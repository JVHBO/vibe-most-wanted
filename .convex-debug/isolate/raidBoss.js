import {
  b as P
} from "./_deps/AWJMSRP7.js";
import {
  h as U
} from "./_deps/QS6BMXBV.js";
import {
  a as I,
  b as Q,
  c as R,
  d as D
} from "./_deps/3SBKGJDS.js";
import "./_deps/6EQFL5ZL.js";
import {
  h as o
} from "./_deps/34SVKERO.js";
import {
  a as b
} from "./_deps/5B5TEMMX.js";

// lib/ipfs-assets.ts
var z = {
  // Videos (HIGH PRIORITY - largest files)
  "/davyjones.mp4": "https://ipfs.filebase.io/ipfs/QmcQ2mSo2gXQsn1t5rnnrFnGMXwLGBw3S4NdJz9VWWHJHi",
  "/tie.mp4": "https://ipfs.filebase.io/ipfs/QmNudh4HxzX36Lt5k9URHxDCLUthhFtryeJoWr9Rt4mqmB",
  "/littlebird.mp4": "https://ipfs.filebase.io/ipfs/QmYtzRiye5xWfz4pJy2SpXAsFW4kcKHYQ2PdZS8dJo6qHi",
  "/derrotanumeronsei.mp4": "https://ipfs.filebase.io/ipfs/QmaDCwu6Uf8tSfaqfXj4LQ1VCmcH3AaW4AhePefKe1NTvS",
  "/1206 (1).mp4": "https://ipfs.filebase.io/ipfs/QmNwnxJ7Mmf8Voh4ZacfZnD5aPPhA6HAP54jrNnxj3idZd",
  "/1206(1).mp4": "https://ipfs.filebase.io/ipfs/QmUSSjyGgAbaR9ukmXjTrSTUGyKev1CGDie7JohemkSiWX",
  // Large covers and images (HIGH PRIORITY)
  "/covers/vibefid-cover.png": "https://ipfs.filebase.io/ipfs/QmRYubyLozbaECBfBhW59Y5LpZ5sLkqNuAHivR3FyeSYEi",
  "/covers/cumioh-cover.png": "https://ipfs.filebase.io/ipfs/QmPghDo2HMJUxwhsZwEGfnHZpcFwDGaBXm9NLVAUPtBL2E",
  "/hero.jpg": "https://ipfs.filebase.io/ipfs/QmXpeouxdQdZ3nTn4WKi8uyXdS3Z8TccQz5ChKQ9MxdQH9",
  "/icon.png": "https://ipfs.filebase.io/ipfs/QmQXqHYvtCKgXq6Xn3YJJJwvPLqXDQFnVk4cF4g4PJQX9K",
  // Difficulties (frequently accessed)
  "/images/difficulties/gooner.png": "https://ipfs.filebase.io/ipfs/QmWav3qcf8BFMQdQ3VBAZ3qsWEEJTcX4kKsyUKhpPsJvpL",
  "/images/difficulties/gangster.png": "https://ipfs.filebase.io/ipfs/QmRL6bb9zrb9yE5gqwfWBfuXWrKH9JVNb5bNZD9TXcZkPF",
  "/images/difficulties/gigachad.png": "https://ipfs.filebase.io/ipfs/QmceAG1MZrSvR4YdCqN5gYmLkC1H3nP9Fk8x1g7YBRv4VZ",
  "/images/difficulties/goofy.png": "https://ipfs.filebase.io/ipfs/QmeFzFaY1RfMH5YM8FQEZkbN7yJUq8TsL4mVJM9u9K2Wt3",
  "/images/difficulties/gey.png": "https://ipfs.filebase.io/ipfs/QmRFZUenp8TTQj6dZRBZvgDGxQx6Q6cz5BypvbDBm8jZu2",
  // Screenshots
  "/screenshot-1.png": "https://ipfs.filebase.io/ipfs/QmPAV3PEZBg7RJQ3x8Gkrb4K8hQs5xKvZy9x4Bxo6mQvPp",
  "/screenshot-2.png": "https://ipfs.filebase.io/ipfs/QmWi7EYMMYAaSWNCgT2WL4ZN6K8ry3v6pxVnZ5zcvyTHk7",
  "/screenshot-3.png": "https://ipfs.filebase.io/ipfs/QmNMNBURvudv4kDQjJSU6Z4Lx9kHg8mLR7eFpUFshWjEZP",
  // Backgrounds
  "/fundo1.jpg": "https://ipfs.filebase.io/ipfs/QmPTVKUq9nEY3hYGFsKbLhLCqfCAuRpjCaE6fjyJ5N1iyQ",
  "/fundo2.jpg": "https://ipfs.filebase.io/ipfs/QmfBb7a2nBh78xmz7Y8fRZdAqXwW4nLT7kLHqN8cxKyLmF",
  "/profile-bg.jpg": "https://ipfs.filebase.io/ipfs/QmemgMVC1LN78M2z7QzWGQRFYKvJm7x2N5JJuLoq8JEQxP",
  "/referral-bg.jpg": "https://ipfs.filebase.io/ipfs/QmboM4BjkXAdGQ2JpzkR6R4V4bXJjQ9p7rD7ZP7EgFm3Km",
  "/easteregg-background.png": "https://ipfs.filebase.io/ipfs/QmSUT8TjeLwgN7VjX5Q3fJJzLpDRm9yLRQxLM6KEbjQmX8",
  // Raid boss images (frequently accessed)
  "/images/raid-bosses/vibe/common.png": "https://ipfs.filebase.io/ipfs/QmeCAYE1XxXmN1HkAW6G8qF9xBQKtQhyjGDkHyR5dJ2kZB",
  "/images/raid-bosses/vibe/rare.png": "https://ipfs.filebase.io/ipfs/QmdQLDWdZ2o9YGLqL9EjmZdLyXFPNjJj6bQnJ9qPX3Rv5q",
  "/images/raid-bosses/vibe/epic.png": "https://ipfs.filebase.io/ipfs/QmcHJXBtUBqzXcwqvQ4zWnTHZKvJQxP8yCJxzJC7YKBbPF",
  "/images/raid-bosses/vibe/legendary.png": "https://ipfs.filebase.io/ipfs/QmeDwVnc5p3VLwqXxWNUdPQhLyjE8q3M6WLkE9JfPHqJGF",
  "/images/raid-bosses/vibe/mythic.png": "https://ipfs.filebase.io/ipfs/Qmf3NxhsWKAtG9pWLq6B2JV7nPdZVHXw4TZcY8Z7VbFmQn",
  "/images/raid-bosses/vibefid/common.png": "https://ipfs.filebase.io/ipfs/QmS4TMMdnbHrSYjLxKqKZbLqKYTZC8GqWvHhHAJYJWqYQN",
  "/images/raid-bosses/vibefid/rare.png": "https://ipfs.filebase.io/ipfs/QmUPRMEdkaJbLqWgXjL7Vh4FsqJ8kEd3xTvJpYZHQ8UeFn",
  "/images/raid-bosses/vibefid/epic.png": "https://ipfs.filebase.io/ipfs/QmUdMMGFr65vKKAo9KYbXxq7DgWqQx5TN3JbPHQbM8N8YF",
  "/images/raid-bosses/vibefid/legendary.png": "https://ipfs.filebase.io/ipfs/QmZuPVRQ25UDCkLqKfBmQJZWEjL2LKdQjC3kPCNqYNqvq5",
  "/images/raid-bosses/vibefid/mythic.png": "https://ipfs.filebase.io/ipfs/QmbTnaqPAZrD8qY5rVq3eFSvH4aRd8Y8ULwJ3Jmq2MUKTz",
  "/images/raid-bosses/gmvbrs/common.png": "https://ipfs.filebase.io/ipfs/QmaY7putRHzptPECMNxFGBMCvQBSV9obPmWYD2LkCDDQiM",
  "/images/raid-bosses/gmvbrs/rare.png": "https://ipfs.filebase.io/ipfs/QmZpi1qg6njKEqJq8Gvg4y9nVFJxvQJYN7E8r5T2LZBQH5",
  "/images/raid-bosses/gmvbrs/epic.png": "https://ipfs.filebase.io/ipfs/QmaZPiBbLC8ey9qFVK3Td9PJx5SvP8CWvx5Px1nFWNmVKH",
  "/images/raid-bosses/gmvbrs/legendary.png": "https://ipfs.filebase.io/ipfs/QmQdYjuHt5mbJRTLmZJNFM3hCYWVQBTJvKQNx7bQzPxzFe",
  "/images/raid-bosses/gmvbrs/mythic.png": "https://ipfs.filebase.io/ipfs/QmbcASVTxfi7TQxQ8EvDCWZTQKvCJN3QLqmvDzVyVAqxJg",
  "/images/raid-bosses/cumioh/common.png": "https://ipfs.filebase.io/ipfs/Qmdi3uuGQwErJxqJPPW3qQN8FYnwQzP5qRKvJL3ZQPKLQE",
  "/images/raid-bosses/cumioh/rare.png": "https://ipfs.filebase.io/ipfs/QmSsZ9fks6onw7V8KqmKFQBqRTdJLJxQ3mVE8wPMQDmLZv",
  "/images/raid-bosses/cumioh/epic.png": "https://ipfs.filebase.io/ipfs/QmXA9bWDZzNWc7NmQJFkTQ8DVzMPJXvFYLEPv9C8qYwz7Z",
  "/images/raid-bosses/cumioh/legendary.png": "https://ipfs.filebase.io/ipfs/QmPvrvwVY4rMD3QKxPQKpXJvKN3LqmJdCQwN5NzYPNKqFZ",
  "/images/raid-bosses/cumioh/mythic.png": "https://ipfs.filebase.io/ipfs/QmS6JQqFWT33ZPdXqJzVqEPzPQJPqNQqJRzPqLKQLbqPMQ",
  // Card backs and misc
  "/card-back.png": "https://ipfs.filebase.io/ipfs/QmZrRir8uDx3jKrx6hfDFhRJXmxXaU3rfQJAbTqqk9Bod5",
  "/pack-closed.png": "https://ipfs.filebase.io/ipfs/QmP7Q6Sz8p8eEuF8nYS2MX1CdTCe6jQpBy81iQtvQDCJRn",
  "/pack-cover.png": "https://ipfs.filebase.io/ipfs/QmZrRir8uDx3jKrx6hfDFhRJXmxXaU3rfQJAbTqqk9Bod5",
  "/splash.png": "https://ipfs.filebase.io/ipfs/QmZ1cfYCW9mDzD4V9iMhVoUQGFd1QwNLfMmEEBQKwEfFSb",
  "/og-image.png": "https://ipfs.filebase.io/ipfs/QmU27iyqYXLYD3P7xKZqVNdqLKq8mFvZKq8LNdqLKqYXLY"
};
function T(r) {
  return z[r] || r;
}
b(T, "getAssetUrl");

// lib/raid-boss/boss-cards.ts
var s = {
  common: 1e6,
  // 1M HP
  rare: 5e6,
  // 5M HP
  epic: 25e6,
  // 25M HP
  legendary: 5e7,
  // 50M HP
  mythic: 1e8
  // 100M HP
}, L = {
  common: 1e3,
  // 1k coins
  rare: 5e3,
  // 5k coins
  epic: 25e3,
  // 25k coins
  legendary: 1e5,
  // 100k coins
  mythic: 5e5
  // 500k coins
}, M = [
  // Round 1 (indices 0-6)
  "gmvbrs",
  "vibe",
  "vibefid",
  "viberuto",
  "meowverse",
  "viberotbangers",
  "gmvbrs",
  // Round 2 (indices 7-13)
  "vibe",
  "vibefid",
  "viberuto",
  "meowverse",
  "viberotbangers",
  "gmvbrs",
  "vibe",
  // Round 3 (indices 14-20)
  "vibefid",
  "viberuto",
  "meowverse",
  "viberotbangers",
  "gmvbrs",
  "vibe",
  "vibefid",
  // Round 4 (indices 21-27)
  "viberuto",
  "meowverse",
  "viberotbangers",
  "gmvbrs",
  "vibe",
  "vibefid",
  "viberuto",
  // Round 5 (indices 28-34)
  "meowverse",
  "viberotbangers",
  "gmvbrs",
  "vibe",
  "vibefid",
  "viberuto",
  "meowverse"
], F = [
  // Round 1 (indices 0-6)
  "Common",
  "Rare",
  "Epic",
  "Legendary",
  "Mythic",
  "Common",
  "Rare",
  // Round 2 (indices 7-13)
  "Epic",
  "Legendary",
  "Mythic",
  "Common",
  "Rare",
  "Epic",
  "Legendary",
  // Round 3 (indices 14-20)
  "Mythic",
  "Common",
  "Rare",
  "Epic",
  "Legendary",
  "Mythic",
  "Common",
  // Round 4 (indices 21-27)
  "Rare",
  "Epic",
  "Legendary",
  "Mythic",
  "Common",
  "Rare",
  "Epic",
  // Round 5 (indices 28-34)
  "Legendary",
  "Mythic",
  "Common",
  "Rare",
  "Epic",
  "Legendary",
  "Mythic"
], N = {
  Common: {
    tokenId: "gmvbrs-boss-common",
    collection: "gmvbrs",
    name: "Street Brawler",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/gmvbrs/common.png",
    hp: s.common,
    description: "A common street fighter looking for trouble"
  },
  Rare: {
    tokenId: "gmvbrs-boss-rare",
    collection: "gmvbrs",
    name: "Vibe Enforcer",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/gmvbrs/rare.png",
    hp: s.rare,
    description: "Elite muscle from the Vibe crew"
  },
  Epic: {
    tokenId: "gmvbrs-boss-epic",
    collection: "gmvbrs",
    name: "Underboss Reaper",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/gmvbrs/epic.png",
    hp: s.epic,
    description: "Second-in-command of the most dangerous gang"
  },
  Legendary: {
    tokenId: "gmvbrs-boss-legendary",
    collection: "gmvbrs",
    name: "Don Crimson",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/gmvbrs/legendary.png",
    hp: s.legendary,
    description: "Legendary crime lord who runs the city"
  },
  Mythic: {
    tokenId: "gmvbrs-boss-mythic",
    collection: "gmvbrs",
    name: "The Godfather",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/gmvbrs/mythic.png",
    hp: s.mythic,
    description: "The untouchable kingpin of all organized crime"
  }
}, V = {
  Common: {
    tokenId: "vibe-boss-common",
    collection: "vibe",
    name: "Petty Thief",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/vibe/common.png",
    hp: s.common,
    description: "Small-time criminal with big ambitions"
  },
  Rare: {
    tokenId: "vibe-boss-rare",
    collection: "vibe",
    name: "Armed Robber",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/vibe/rare.png",
    hp: s.rare,
    description: "Dangerous outlaw wanted for multiple heists"
  },
  Epic: {
    tokenId: "vibe-boss-epic",
    collection: "vibe",
    name: "Cartel Lieutenant",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/vibe/epic.png",
    hp: s.epic,
    description: "High-ranking member of a powerful cartel"
  },
  Legendary: {
    tokenId: "vibe-boss-legendary",
    collection: "vibe",
    name: "El Diablo",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/vibe/legendary.png",
    hp: s.legendary,
    description: "Feared crime lord with a ruthless reputation"
  },
  Mythic: {
    tokenId: "vibe-boss-mythic",
    collection: "vibe",
    name: "The Phantom",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/vibe/mythic.png",
    hp: s.mythic,
    description: "The most wanted criminal - identity unknown"
  }
}, H = {
  Common: {
    tokenId: "vibefid-boss-common",
    collection: "vibefid",
    name: "Digital Wanderer",
    rarity: "Common",
    power: 10,
    imageUrl: "/images/raid-bosses/vibefid/common.png",
    hp: s.common,
    description: "A common FID holder exploring the metaverse"
  },
  Rare: {
    tokenId: "vibefid-boss-rare",
    collection: "vibefid",
    name: "Cyber Sentinel",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/vibefid/rare.png",
    hp: s.rare,
    description: "Guardian of the digital realm"
  },
  Epic: {
    tokenId: "vibefid-boss-epic",
    collection: "vibefid",
    name: "Protocol Enforcer",
    rarity: "Epic",
    power: 50,
    imageUrl: "/images/raid-bosses/vibefid/epic.png",
    hp: s.epic,
    description: "Elite defender of the blockchain"
  },
  Legendary: {
    tokenId: "vibefid-boss-legendary",
    collection: "vibefid",
    name: "The Architect",
    rarity: "Legendary",
    power: 100,
    imageUrl: "/images/raid-bosses/vibefid/legendary.png",
    hp: s.legendary,
    description: "Master builder of the decentralized future"
  },
  Mythic: {
    tokenId: "vibefid-boss-mythic",
    collection: "vibefid",
    name: "Satoshi Reborn",
    rarity: "Mythic",
    power: 600,
    imageUrl: "/images/raid-bosses/vibefid/mythic.png",
    hp: s.mythic,
    description: "The legendary creator returns from the shadows"
  }
}, J = {
  Common: {
    tokenId: "viberuto-boss-common",
    collection: "viberuto",
    name: "Vibeten",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/viberuto/common.png",
    hp: s.common,
    description: "The ninja who defeated Uchiha Madara"
  },
  Rare: {
    tokenId: "viberuto-boss-rare",
    collection: "viberuto",
    name: "Vibe-bee",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/viberuto/rare.png",
    hp: s.rare,
    description: "Super rapper and jinchuuriki"
  },
  Epic: {
    tokenId: "viberuto-boss-epic",
    collection: "viberuto",
    name: "Vibenato",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/viberuto/epic.png",
    hp: s.epic,
    description: "Teleports, still late"
  },
  Legendary: {
    tokenId: "viberuto-boss-legendary",
    collection: "viberuto",
    name: "Viberama",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/viberuto/legendary.png",
    hp: s.legendary,
    description: "Broke every rival, including his wallet"
  },
  Mythic: {
    tokenId: "viberuto-boss-mythic",
    collection: "viberuto",
    name: "Vibomoro",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/viberuto/mythic.png",
    hp: s.mythic,
    description: "Inherited chakra, distributed it like free samples"
  }
}, X = {
  Common: {
    tokenId: "2429",
    collection: "meowverse",
    name: "Heavenly Chonk",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/meowverse/common.png",
    hp: s.common,
    description: "A gentle sky guardian powered by serenity\u2026 and snacks"
  },
  Rare: {
    tokenId: "2430",
    collection: "meowverse",
    name: "Noodle Nimbus",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/meowverse/rare.png",
    hp: s.rare,
    description: "Rides a legendary cloud, powering up between noodle bites"
  },
  Epic: {
    tokenId: "2431",
    collection: "meowverse",
    name: "Blade Paws",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/meowverse/epic.png",
    hp: s.epic,
    description: "A brave cat warrior on a quest, swinging a legendary sword of light"
  },
  Legendary: {
    tokenId: "2432",
    collection: "meowverse",
    name: "Goldra, the Nine Claws",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/meowverse/legendary.png",
    hp: s.legendary,
    description: "A golden beast with living serpents for fur and a petrifying glare"
  },
  Mythic: {
    tokenId: "2433",
    collection: "meowverse",
    name: "King Clawster",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/meowverse/mythic.png",
    hp: s.mythic,
    description: "A streetwise feline king who rules with sharp claws and sharper instincts"
  }
}, j = {
  Common: {
    tokenId: "7464",
    collection: "poorlydrawnpepes",
    name: "Pepe Fish",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/poorlydrawnpepes/common.png",
    hp: s.common,
    description: "Swims in circles, finds nothing, vibes anyway"
  },
  Rare: {
    tokenId: "7465",
    collection: "poorlydrawnpepes",
    name: "Pepe Dev",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/poorlydrawnpepes/rare.png",
    hp: s.rare,
    description: "Lives on caffeine, commits bugs with confidence"
  },
  Epic: {
    tokenId: "7466",
    collection: "poorlydrawnpepes",
    name: "Angel Investor Pepe",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/poorlydrawnpepes/epic.png",
    hp: s.epic,
    description: "Turns your chaos into capital. Maybe"
  },
  Legendary: {
    tokenId: "7467",
    collection: "poorlydrawnpepes",
    name: "Vibecat Pepe",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/poorlydrawnpepes/legendary.png",
    hp: s.legendary,
    description: "Breaks every rule and still demands treats"
  },
  Mythic: {
    tokenId: "7468",
    collection: "poorlydrawnpepes",
    name: "Wizard Pepe",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/poorlydrawnpepes/mythic.png",
    hp: s.mythic,
    description: "Casts spells nobody asked for, results unpredictable"
  }
}, G = {
  Common: {
    tokenId: "6456",
    collection: "teampothead",
    name: "Smoke Naga",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/teampothead/common.png",
    hp: s.common,
    description: "A swirling cloud-serpent that forgets what it\u2019s doing mid-attack"
  },
  Rare: {
    tokenId: "6457",
    collection: "teampothead",
    name: "Bulbablaze",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/teampothead/rare.png",
    hp: s.rare,
    description: "A leafy frog forever stuck in a confused, happy haze"
  },
  Epic: {
    tokenId: "6458",
    collection: "teampothead",
    name: "Vaporeonado",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/teampothead/epic.png",
    hp: s.epic,
    description: "A spacey sea-creature clutching a mystical bong like a comfort toy"
  },
  Legendary: {
    tokenId: "6459",
    collection: "teampothead",
    name: "Dr. Buddaf\xE9",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/teampothead/legendary.png",
    hp: s.legendary,
    description: "A smug green mastermind whose plans vanish as fast as his focus"
  },
  Mythic: {
    tokenId: "6460",
    collection: "teampothead",
    name: "Big Bluntkarp",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/teampothead/mythic.png",
    hp: s.mythic,
    description: "A giant golden fish drifting through smoke like it\u2019s cosmic water"
  }
}, $ = {
  Common: {
    tokenId: "2274",
    collection: "tarot",
    name: "Feet Juggler",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/tarot/common.png",
    hp: s.common,
    description: "A playful performer looping enchanted feet through the air with impossible precision"
  },
  Rare: {
    tokenId: "2275",
    collection: "tarot",
    name: "The Ink",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/tarot/rare.png",
    hp: s.rare,
    description: "A hooded figure holding a glowing tablet, blending art and mystery by the water\u2019s edge"
  },
  Epic: {
    tokenId: "2276",
    collection: "tarot",
    name: "Computer Historian",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/tarot/epic.png",
    hp: s.epic,
    description: "A quirky scholar stacked with glowing screens, preserving the digital tales of every era"
  },
  Legendary: {
    tokenId: "2277",
    collection: "tarot",
    name: "New God",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/tarot/legendary.png",
    hp: s.legendary,
    description: "A serene blue entity sits between two ancient pillars, radiating quiet, mysterious power"
  },
  Mythic: {
    tokenId: "2278",
    collection: "tarot",
    name: "The Builders",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/tarot/mythic.png",
    hp: s.mythic,
    description: "Guided by a radiant winged figure, two creators stand ready to shape a new world"
  }
}, ee = {
  Common: {
    tokenId: "7160",
    collection: "baseballcabal",
    name: "Phantom Pitcher",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/baseballcabal/common.png",
    hp: s.common,
    description: "You'll never see the ball coming"
  },
  Rare: {
    tokenId: "7161",
    collection: "baseballcabal",
    name: "The Closer",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/baseballcabal/rare.png",
    hp: s.rare,
    description: "Last inning specialist. Zero mercy"
  },
  Epic: {
    tokenId: "7162",
    collection: "baseballcabal",
    name: "The Whale",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/baseballcabal/epic.png",
    hp: s.epic,
    description: "Bought every card. Now wants yours"
  },
  Legendary: {
    tokenId: "7163",
    collection: "baseballcabal",
    name: "Diamond Hands Dave",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/baseballcabal/legendary.png",
    hp: s.legendary,
    description: "Never drops the ball. Never sells"
  },
  Mythic: {
    tokenId: "7164",
    collection: "baseballcabal",
    name: "The Rug Puller",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/baseballcabal/mythic.png",
    hp: s.mythic,
    description: "Promises home runs, delivers strikeouts"
  }
}, re = {
  Common: {
    tokenId: "10384",
    collection: "vibefx",
    name: "Barrel Bob",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/vibefx/common.png",
    hp: s.common,
    description: "Found behind a gas station. Promoted to warrior"
  },
  Rare: {
    tokenId: "10385",
    collection: "vibefx",
    name: "The Grinder",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/vibefx/rare.png",
    hp: s.rare,
    description: "Drills first, thinks never"
  },
  Epic: {
    tokenId: "10386",
    collection: "vibefx",
    name: "Shills81",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/vibefx/epic.png",
    hp: s.epic,
    description: "Cute face, killer instincts. Do not let the cupcake head fool you"
  },
  Legendary: {
    tokenId: "10387",
    collection: "vibefx",
    name: "Redphone",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/vibefx/legendary.png",
    hp: s.legendary,
    description: "We all float down here... in the metaverse"
  },
  Mythic: {
    tokenId: "10388",
    collection: "vibefx",
    name: "The Goddess",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/vibefx/mythic.png",
    hp: s.mythic,
    description: "OG deity of the Vibe realm. Bow or be liquidated"
  }
}, ie = {
  Common: {
    tokenId: "6152",
    collection: "historyofcomputer",
    name: "Arcane Bug Summoner",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/historyofcomputer/common.png",
    hp: s.common,
    description: "Accidentally summoned a demon while debugging. Claims it\u2019s a feature"
  },
  Rare: {
    tokenId: "6153",
    collection: "historyofcomputer",
    name: "Cable Wizard Duo",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/historyofcomputer/rare.png",
    hp: s.rare,
    description: "They do not know what any of the cables do, but somehow it works"
  },
  Epic: {
    tokenId: "6154",
    collection: "historyofcomputer",
    name: "Bologna Meat Computer",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/historyofcomputer/epic.png",
    hp: s.epic,
    description: "Runs on pure spite, cold cuts, and 3% electricity"
  },
  Legendary: {
    tokenId: "6155",
    collection: "historyofcomputer",
    name: "Lab Rats of the Mainframe",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/historyofcomputer/legendary.png",
    hp: s.legendary,
    description: "Optimizing the machine by pressing random buttons with extreme confidence"
  },
  Mythic: {
    tokenId: "6156",
    collection: "historyofcomputer",
    name: "Duck of Computing",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/historyofcomputer/mythic.png",
    hp: s.mythic,
    description: "Explaining the bug to the rubber duck\u2026 for the 7th hour"
  }
}, O = {
  Common: {
    tokenId: "cumioh-common",
    collection: "cumioh",
    name: "THE.HOES.M\xDCR",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/cumioh/common.png",
    hp: s.common,
    description: "Just a full time Lad on retake.tv/live/203751"
  },
  Rare: {
    tokenId: "cumioh-rare",
    collection: "cumioh",
    name: "$.C.U.M.ilady",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/cumioh/rare.png",
    hp: s.rare,
    description: "Divinely loved, technically genius and spiritually transcendent. This card deals damage by casting loving commentary!"
  },
  Epic: {
    tokenId: "cumioh-epic",
    collection: "cumioh",
    name: "DARK MAGICIAN MILADY",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/cumioh/epic.png",
    hp: s.epic,
    description: "This card gains 333 ATK for every $.C.U.M.ilady on the field when this card is casted"
  },
  Legendary: {
    tokenId: "cumioh-legendary",
    collection: "cumioh",
    name: "ily 3-Thousand Dragon",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/cumioh/legendary.png",
    hp: s.legendary,
    description: "Lover of all the things, clicks every link and mints to HODL for a minimum of 1000 years in their treasure horde spread across hundreds of wallets"
  },
  Mythic: {
    tokenId: "cumioh-mythic",
    collection: "cumioh",
    name: "BIZORDIA THE BIZARRE ONE",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/cumioh/mythic.png",
    hp: s.mythic,
    description: "If you have Right Leg of the Bizarre One, Left Leg of the Bizarre One, Right Arm of the Bizarre One and Left Arm of the Bizarre One in addition to this card on the field, you win the Duel"
  }
}, Y = {
  Common: {
    tokenId: "viberotbangers-common",
    collection: "viberotbangers",
    name: "The Slippage Saint",
    rarity: "Common",
    power: 15,
    imageUrl: "/images/raid-bosses/viberotbangers/common.png",
    hp: s.common,
    description: "Every trade against him costs more than expected"
  },
  Rare: {
    tokenId: "viberotbangers-rare",
    collection: "viberotbangers",
    name: "Booty Liquidity Beast",
    rarity: "Rare",
    power: 20,
    imageUrl: "/images/raid-bosses/viberotbangers/rare.png",
    hp: s.rare,
    description: "An unholy fusion of greed, memes, and bad decisions"
  },
  Epic: {
    tokenId: "viberotbangers-epic",
    collection: "viberotbangers",
    name: "Leverage Temptress",
    rarity: "Epic",
    power: 80,
    imageUrl: "/images/raid-bosses/viberotbangers/epic.png",
    hp: s.epic,
    description: "Lures traders in with beauty and liquidates them silently"
  },
  Legendary: {
    tokenId: "viberotbangers-legendary",
    collection: "viberotbangers",
    name: "Bagholder King",
    rarity: "Legendary",
    power: 240,
    imageUrl: "/images/raid-bosses/viberotbangers/legendary.png",
    hp: s.legendary,
    description: "The bag that bites back when you try to exit"
  },
  Mythic: {
    tokenId: "viberotbangers-mythic",
    collection: "viberotbangers",
    name: "Hydra of Degens",
    rarity: "Mythic",
    power: 800,
    imageUrl: "/images/raid-bosses/viberotbangers/mythic.png",
    hp: s.mythic,
    description: "Many minds, one wallet, infinite bad ideas"
  }
}, K = {
  viberotbangers: Y,
  gmvbrs: N,
  vibe: V,
  vibefid: H,
  viberuto: J,
  meowverse: X,
  poorlydrawnpepes: j,
  teampothead: G,
  tarot: $,
  baseballcabal: ee,
  vibefx: re,
  historyofcomputer: ie,
  cumioh: O,
  nothing: {},
  // Free cards - no raid bosses
  custom: {}
  // Not used for raid bosses
};
function Z(r, e) {
  let i = K[r]?.[e];
  if (i)
    return {
      ...i,
      imageUrl: T(i.imageUrl)
    };
}
b(Z, "getBossCard");
function _(r) {
  let e = r % 70, i = M[e], t = F[e];
  return Z(i, t);
}
b(_, "getCurrentBoss");

// convex/raidBoss.ts
async function B(r, e) {
  let i = e.toLowerCase(), t = await r.db.query("addressLinks").withIndex("by_address", (a) => a.eq("address", i)).first();
  return t ? t.primaryAddress : i;
}
b(B, "resolvePrimaryAddress");
function te() {
  let r = new Uint32Array(1);
  return crypto.getRandomValues(r), r[0] / 4294967296;
}
b(te, "cryptoRandomFloat");
var se = 1, oe = 4, ae = 720 * 60 * 1e3, S = {
  common: 1,
  // 1 VBMS
  rare: 3,
  // 3 VBMS
  epic: 5,
  // 5 VBMS
  legendary: 10,
  // 10 VBMS
  mythic: 15,
  // 15 VBMS
  vibefid: 50
  // 50 VBMS (infinite energy)
}, x = {
  common: 720 * 60 * 1e3,
  // 12 hours
  rare: 1440 * 60 * 1e3,
  // 1 day
  epic: 2880 * 60 * 1e3,
  // 2 days
  legendary: 5760 * 60 * 1e3,
  // 4 days
  mythic: 7200 * 60 * 1e3,
  // 5 days
  vibefid: 0
  // Infinite (never expires)
}, ne = 0.1, xe = I({
  handler: /* @__PURE__ */ b(async (r) => {
    let e = await r.db.query("raidBoss").withIndex("by_status", (i) => i.eq("status", "active")).first();
    return e || (e = await r.db.query("raidBoss").withIndex("by_status", (i) => i.eq("status", "transitioning")).first()), e || (e = await r.db.query("raidBoss").withIndex("by_status", (i) => i.eq("status", "defeated")).first()), e;
  }, "handler")
}), De = R({
  handler: /* @__PURE__ */ b(async (r) => {
    let e = await r.db.query("raidBoss").first();
    if (e)
      return e;
    let i = 0, t = _(i);
    if (!t)
      throw new Error("Failed to get boss data for index 0");
    let a = await r.db.insert("raidBoss", {
      bossIndex: i,
      tokenId: t.tokenId,
      name: t.name,
      collection: t.collection,
      rarity: t.rarity,
      imageUrl: t.imageUrl,
      power: t.power,
      maxHp: t.hp,
      currentHp: t.hp,
      status: "active",
      spawnedAt: Date.now(),
      defeatedAt: void 0
    });
    return console.log(`\u{1F409} First Raid Boss spawned: ${t.name} (${t.rarity})`), await r.db.get(a);
  }, "handler")
}), Se = I({
  args: {
    address: o.string()
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address);
    return await r.db.query("raidAttacks").withIndex("by_address", (a) => a.eq("address", i)).first();
  }, "handler")
}), qe = I({
  args: {
    address: o.string()
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), t = await r.db.query("raidBoss").withIndex("by_status", (n) => n.eq("status", "active")).first();
    return t ? await r.db.query("raidContributions").withIndex(
      "by_boss_player",
      (n) => n.eq("bossIndex", t.bossIndex).eq("address", i)
    ).first() : null;
  }, "handler")
}), Le = I({
  args: {
    limit: o.optional(o.number())
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await r.db.query("raidBoss").withIndex("by_status", (n) => n.eq("status", "active")).first();
    if (!i) return [];
    let t = e.limit || 100;
    return await r.db.query("raidContributions").withIndex("by_boss", (n) => n.eq("bossIndex", i.bossIndex)).order("desc").take(t);
  }, "handler")
}), _e = I({
  args: {
    limit: o.optional(o.number())
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = e.limit || 10;
    return await r.db.query("raidHistory").withIndex("by_defeated_at").order("desc").take(i);
  }, "handler")
}), Qe = I({
  args: {
    bossIndex: o.number()
  },
  handler: /* @__PURE__ */ b(async (r, e) => await r.db.query("raidHistory").withIndex("by_boss_index", (t) => t.eq("bossIndex", e.bossIndex)).first(), "handler")
}), Ue = I({
  args: { limit: o.optional(o.number()) },
  handler: /* @__PURE__ */ b(async (r, { limit: e = 100 }) => (await r.db.query("raidAttacks").withIndex("by_total_damage").order("desc").take(e)).map((a) => ({
    address: a.address,
    username: a.username || a.address.slice(0, 8),
    // Use cached username
    stats: {
      raidBossDamage: a.totalDamageDealt,
      bossesKilled: a.bossesKilled,
      aura: 500,
      // Default aura (not critical for raid leaderboard)
      totalPower: a.deckPower || 0
      // Use deck power instead of profile power
    },
    userIndex: 0
    // Not needed for raid leaderboard
  })), "handler")
}), Pe = R({
  args: {
    address: o.string(),
    oldCardTokenId: o.string(),
    // Card to remove
    newCard: o.object({
      tokenId: o.string(),
      collection: o.optional(o.string()),
      power: o.number(),
      imageUrl: o.string(),
      name: o.string(),
      rarity: o.string(),
      foil: o.optional(o.string()),
      isFreeCard: o.optional(o.boolean())
    }),
    txHash: o.string(),
    // VBMS payment transaction hash
    isVibeFID: o.optional(o.boolean())
    // If true, replacing VibeFID card
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), t = await r.db.query("raidAttacks").withIndex("by_address", (g) => g.eq("address", i)).first();
    if (!t)
      throw new Error("Player has no raid deck");
    if (e.isVibeFID) {
      if (!t.vibefidCard)
        throw new Error("No VibeFID card in deck to replace");
      if (e.newCard.collection !== "vibefid")
        throw new Error("Can only replace VibeFID with another VibeFID card");
      if (t.deck.some(
        (w) => w.tokenId === e.newCard.tokenId
      ))
        throw new Error("This VibeFID is already in your raid deck.");
      let m = Date.now(), A = t.vibefidCard.tokenId, y = {
        ...e.newCard,
        collection: "vibefid"
      }, c = t.cardEnergy.map((w) => w.tokenId === A ? {
        tokenId: e.newCard.tokenId,
        energyExpiresAt: 0,
        // Infinite energy
        lastAttackAt: void 0,
        nextAttackAt: m
        // Can attack immediately
      } : w), v = t.deck.reduce((w, E) => {
        let q = E.power || 0;
        return E.collection === "vibe" ? w + q * 2 : w + q;
      }, 0), C = Math.floor((v + e.newCard.power * 5) * 1.1);
      return await r.db.patch(t._id, {
        vibefidCard: y,
        cardEnergy: c,
        deckPower: C,
        lastUpdated: m
      }), console.log(`\u{1F3B4} VibeFID replaced: ${A} \u2192 ${e.newCard.tokenId} (power: ${C})`), {
        success: !0,
        newDeckPower: C,
        cost: 50
      };
    }
    let a = t.deck.findIndex((g) => g.tokenId === e.oldCardTokenId);
    if (a === -1)
      throw new Error("Card not found in deck");
    if (t.deck.some(
      (g, m) => g.tokenId === e.newCard.tokenId && m !== a
    ))
      throw new Error("This card is already in your raid deck. Cannot have duplicate cards.");
    if (t.vibefidCard && t.vibefidCard.tokenId === e.newCard.tokenId)
      throw new Error("This card is already in your raid deck (VibeFID slot). Cannot have duplicate cards.");
    let p = Date.now(), h = e.newCard.rarity.toLowerCase(), f = S[h] || S.common, l = [...t.deck];
    l[a] = e.newCard;
    let k = l.reduce((g, m) => g + m.power, 0), u = [...t.cardEnergy], d = x[h] || x.common;
    return u[a] = {
      tokenId: e.newCard.tokenId,
      energyExpiresAt: d === 0 ? 0 : p + d,
      // 0 = infinite (VibeFID)
      lastAttackAt: void 0,
      nextAttackAt: p
      // Can attack immediately
    }, await r.db.patch(t._id, {
      deck: l,
      deckPower: k,
      cardEnergy: u,
      lastUpdated: p
    }), console.log(`\u{1F504} Card replaced: ${e.oldCardTokenId} \u2192 ${e.newCard.tokenId} for ${i} (cost: ${f} VBMS)`), {
      success: !0,
      oldCard: e.oldCardTokenId,
      newCard: e.newCard.tokenId,
      newDeckPower: k,
      cost: f
    };
  }, "handler")
}), Te = R({
  args: {
    address: o.string(),
    deck: o.array(o.object({
      tokenId: o.string(),
      collection: o.optional(o.string()),
      power: o.number(),
      imageUrl: o.string(),
      name: o.string(),
      rarity: o.string(),
      foil: o.optional(o.string()),
      isFreeCard: o.optional(o.boolean())
    })),
    vibefidCard: o.optional(o.object({
      tokenId: o.string(),
      collection: o.optional(o.string()),
      power: o.number(),
      imageUrl: o.string(),
      name: o.string(),
      rarity: o.string(),
      foil: o.optional(o.string())
    })),
    txHash: o.string()
    // VBMS payment transaction hash
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), a = (await r.db.query("profiles").withIndex("by_address", (d) => d.eq("address", i)).first())?.username;
    if (e.deck.length !== 5)
      throw new Error("Raid deck must contain exactly 5 cards");
    let n = e.deck.map((d) => d.tokenId);
    if (new Set(n).size !== n.length)
      throw new Error("Deck cannot contain duplicate cards");
    if (e.vibefidCard && n.includes(e.vibefidCard.tokenId))
      throw new Error("VibeFID card cannot be duplicate of deck cards");
    let h = Date.now(), f = 0;
    for (let d of e.deck) {
      let g = d.rarity.toLowerCase();
      f += S[g] || S.common;
    }
    e.vibefidCard && (f += S.vibefid);
    let l = e.deck.reduce((d, g) => {
      let m = g.power || 0;
      return g.collection === "vibe" ? d + m * 2 : d + m;
    }, 0);
    e.vibefidCard && (l += e.vibefidCard.power * 5, l = Math.floor(l * (1 + ne)));
    let k = e.deck.map((d) => {
      let g = d.rarity.toLowerCase(), m = x[g] || x.common;
      return {
        tokenId: d.tokenId,
        energyExpiresAt: m === 0 ? 0 : h + m,
        // 0 = infinite (VibeFID)
        lastAttackAt: void 0,
        nextAttackAt: h
        // Can attack immediately
      };
    });
    e.vibefidCard && k.push({
      tokenId: e.vibefidCard.tokenId,
      energyExpiresAt: 0,
      // Infinite energy
      lastAttackAt: void 0,
      nextAttackAt: h
    });
    let u = await r.db.query("raidAttacks").withIndex("by_address", (d) => d.eq("address", i)).first();
    return u ? await r.db.patch(u._id, {
      deck: e.deck,
      vibefidCard: e.vibefidCard ? {
        ...e.vibefidCard,
        collection: "vibefid"
        // ðŸ”§ FIX: Always force 'vibefid' collection
      } : void 0,
      deckPower: l,
      cardEnergy: k,
      entryFeePaid: !0,
      entryTxHash: e.txHash,
      entryPaidAt: Date.now(),
      lastUpdated: Date.now(),
      username: a
      // ðŸš€ Cache username
    }) : await r.db.insert("raidAttacks", {
      address: i,
      username: a,
      // ðŸš€ Cache username
      deck: e.deck,
      vibefidCard: e.vibefidCard ? {
        ...e.vibefidCard,
        collection: "vibefid"
        // ðŸ”§ FIX: Always force 'vibefid' collection
      } : void 0,
      deckPower: l,
      cardEnergy: k,
      entryFeePaid: !0,
      entryTxHash: e.txHash,
      entryPaidAt: Date.now(),
      totalDamageDealt: 0,
      bossesKilled: 0,
      createdAt: Date.now(),
      lastUpdated: Date.now()
    }), console.log(`\u{1F3B4} Raid deck set for ${i}: ${e.deck.length} cards${e.vibefidCard ? " + VibeFID" : ""} (cost: ${f} VBMS, power: ${l})`), {
      success: !0,
      deckPower: l,
      totalCost: f,
      hasVibeFID: !!e.vibefidCard
    };
  }, "handler")
}), Me = R({
  args: {
    address: o.string()
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), t = await r.db.query("raidAttacks").withIndex("by_address", (a) => a.eq("address", i)).first();
    if (!t)
      throw new Error("Player has no raid deck");
    return await r.db.patch(t._id, {
      deck: [],
      vibefidCard: void 0,
      deckPower: 0,
      cardEnergy: [],
      entryFeePaid: !1,
      // Allow new entry (will need to pay again)
      lastUpdated: Date.now()
      // NOTE: totalDamageDealt and bossesKilled are NOT cleared
    }), console.log(`\u{1F5D1}\uFE0F Raid deck cleared for ${i} (damage preserved: ${t.totalDamageDealt})`), {
      success: !0,
      damagePreserved: t.totalDamageDealt,
      bossesKilledPreserved: t.bossesKilled
    };
  }, "handler")
}), Fe = R({
  args: {
    address: o.string(),
    cardTokenIds: o.array(o.string()),
    // Which cards to refuel
    txHash: o.string()
    // VBMS payment transaction hash
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), t = await r.db.query("raidAttacks").withIndex("by_address", (f) => f.eq("address", i)).first();
    if (!t)
      throw new Error("Player has no raid deck");
    let a = e.cardTokenIds.length, n = a === 5 ? oe : a * se, p = Date.now(), h = t.cardEnergy.map((f) => {
      if (e.cardTokenIds.includes(f.tokenId)) {
        let l = t.deck.find((d) => d.tokenId === f.tokenId);
        if (!l) return f;
        let k = l.rarity.toLowerCase(), u = x[k] || x.common;
        return {
          ...f,
          energyExpiresAt: u === 0 ? 0 : p + u,
          // 0 = infinite (VibeFID)
          nextAttackAt: p
          // Can attack immediately after refuel
        };
      }
      return f;
    });
    return await r.db.patch(t._id, {
      cardEnergy: h,
      lastUpdated: Date.now()
    }), await r.db.insert("raidRefuels", {
      address: i,
      cardsRefueled: e.cardTokenIds,
      amount: n,
      txHash: e.txHash,
      timestamp: Date.now()
    }), { success: !0, cardsRefueled: e.cardTokenIds.length, cost: n };
  }, "handler")
}), Ne = D({
  handler: /* @__PURE__ */ b(async (r) => {
    let e = Date.now(), i = await r.db.query("raidBoss").withIndex("by_status", (d) => d.eq("status", "active")).first();
    if (!i)
      return console.log("No active boss found"), { success: !1, message: "No active boss" };
    let t = e - 7200 * 1e3, a = await r.db.query("raidAttacks").withIndex("by_last_updated", (d) => d.gt("lastUpdated", t)).take(5e3), p = [...new Set(a.map((d) => d.address))].map(
      (d) => r.db.query("profiles").withIndex("by_address", (g) => g.eq("address", d)).first()
    ), h = await Promise.all(p), f = new Map(
      h.filter(Boolean).map((d) => [d.address, d])
    );
    console.log(`\u{1F680} Batch-loaded ${f.size} profiles for ${a.length} decks`);
    let l = 0, k = 0;
    for (let d of a) {
      let g = [], m = 0, A = d.deck.some((y) => y.collection === "vibefid") || !!d.vibefidCard;
      for (let y of d.cardEnergy) {
        let c = y.energyExpiresAt === 0 || e < y.energyExpiresAt, v = !y.nextAttackAt || y.nextAttackAt <= e;
        if (c && v) {
          let C = d.deck.find((W) => W.tokenId === y.tokenId) || (d.vibefidCard?.tokenId === y.tokenId ? d.vibefidCard : void 0), w = C?.power || 0, E = C?.collection === "vibefid" || d.vibefidCard?.tokenId === y.tokenId;
          C && !("isFreeCard" in C && C.isFreeCard) && (E ? w = Math.floor(w * 5) : C.collection === i.collection && (w = Math.floor(w * 2)), A && !E && (w = Math.floor(w * 1.5)));
          let q = E ? 0.3 : 0.15;
          te() < q && (w = Math.floor(w * 2), console.log(`\u{1F4A5} CRITICAL HIT! Card ${y.tokenId} dealt ${w} damage (2x multiplier)`)), m += w, g.push({
            ...y,
            lastAttackAt: e,
            nextAttackAt: e + ae
            // Next attack in 5 minutes
          });
        } else
          g.push(y);
      }
      if (m > 0) {
        await r.db.patch(d._id, {
          cardEnergy: g,
          totalDamageDealt: d.totalDamageDealt + m,
          lastUpdated: e
        });
        let y = await r.db.query("raidContributions").withIndex(
          "by_boss_player",
          (C) => C.eq("bossIndex", i.bossIndex).eq("address", d.address)
        ).first(), v = f.get(d.address)?.username || d.address.slice(0, 8);
        y ? await r.db.patch(y._id, {
          damageDealt: y.damageDealt + m,
          attackCount: y.attackCount + 1,
          lastAttackAt: e
        }) : await r.db.insert("raidContributions", {
          bossIndex: i.bossIndex,
          address: d.address,
          username: v,
          damageDealt: m,
          attackCount: 1,
          rewardEarned: 0,
          // Calculated when boss is defeated
          rewardClaimed: !1,
          firstAttackAt: e,
          lastAttackAt: e
        }), l += m, k++;
      }
    }
    let u = Math.max(0, i.currentHp - l);
    return await r.db.patch(i._id, {
      currentHp: u,
      lastAttackAt: e
    }), u <= 0 && i.status === "active" && (await r.db.patch(i._id, {
      status: "transitioning",
      // Intermediate status to prevent double-processing
      defeatedAt: e
    }), console.log(`\u{1F409} Boss ${i.name} defeated! Transitioning to next boss...`)), {
      success: !0,
      totalDamage: l,
      attackingPlayers: k,
      bossHpRemaining: u,
      bossDefeated: u <= 0
    };
  }, "handler")
}), Ve = D({
  handler: /* @__PURE__ */ b(async (r) => {
    let e = Date.now(), i = await r.db.query("raidBoss").filter((c) => c.eq(c.field("status"), "transitioning")).first();
    if (i || (i = await r.db.query("raidBoss").filter((c) => c.eq(c.field("status"), "defeated")).first()), !i)
      return { success: !1, message: "No defeated boss found" };
    let t = await r.db.query("raidContributions").withIndex("by_boss", (c) => c.eq("bossIndex", i.bossIndex)).take(1e4), a = t.reduce((c, v) => c + v.damageDealt, 0), n = i.rarity.toLowerCase(), p = L[n];
    for (let c of t) {
      let v = a > 0 ? c.damageDealt / a : 0, C = Math.max(1, Math.floor(p * v));
      await r.db.patch(c._id, {
        rewardEarned: C
      });
    }
    let h = t.sort((c, v) => v.damageDealt - c.damageDealt).slice(0, 10).map((c) => ({
      address: c.address,
      username: c.username,
      damage: c.damageDealt,
      reward: c.rewardEarned
    })), f = Math.floor((i.defeatedAt - i.spawnedAt) / 1e3);
    await r.db.insert("raidHistory", {
      bossIndex: i.bossIndex,
      collection: i.collection,
      rarity: i.rarity,
      name: i.name,
      imageUrl: i.imageUrl,
      maxHp: i.maxHp,
      totalDamage: a,
      totalPlayers: t.length,
      totalAttacks: t.reduce((c, v) => c + v.attackCount, 0),
      topContributors: h,
      spawnedAt: i.spawnedAt,
      defeatedAt: i.defeatedAt,
      duration: f
    });
    let k = [...new Set(t.map((c) => c.address))].map(
      (c) => r.db.query("raidAttacks").withIndex("by_address", (v) => v.eq("address", c)).first()
    ), d = (await Promise.all(k)).filter((c) => c !== null).map((c) => r.db.patch(c._id, { bossesKilled: c.bossesKilled + 1 }));
    await Promise.all(d), await r.db.delete(i._id);
    let g = (i.bossIndex + 1) % 50, m = _(g);
    if (!m)
      throw new Error("Failed to get next boss card");
    let A = m.rarity.toLowerCase(), y = s[A];
    await r.db.insert("raidBoss", {
      bossIndex: g,
      collection: m.collection,
      rarity: m.rarity,
      tokenId: m.tokenId,
      name: m.name,
      imageUrl: m.imageUrl,
      power: m.power,
      maxHp: y,
      currentHp: y,
      status: "active",
      spawnedAt: e
    });
    try {
      await r.scheduler.runAfter(0, P.notifications.sendBossDefeatedNotifications, {
        bossName: i.name,
        bossRarity: i.rarity,
        totalContributors: t.length,
        contributorAddresses: t.map((c) => c.address)
      }), console.log(`\u{1F4E2} Scheduled boss defeated notifications for ${t.length} contributors`);
    } catch (c) {
      console.error("Failed to schedule boss notifications:", c);
    }
    return {
      success: !0,
      defeatedBoss: i.name,
      nextBoss: m.name,
      totalContributors: t.length,
      totalDamage: a
    };
  }, "handler")
}), He = I({
  args: { address: o.string() },
  handler: /* @__PURE__ */ b(async (r, { address: e }) => {
    let i = e.toLowerCase(), t = await r.db.query("raidContributions").withIndex("by_player", (n) => n.eq("address", i)).filter(
      (n) => n.and(
        n.eq(n.field("rewardClaimed"), !1),
        n.gt(n.field("rewardEarned"), 0)
      )
    ).take(100), a = t.reduce(
      (n, p) => n + p.rewardEarned,
      0
    );
    return {
      contributions: t,
      totalUnclaimed: a,
      count: t.length
    };
  }, "handler")
}), Je = R({
  args: { address: o.string() },
  handler: /* @__PURE__ */ b(async (r, { address: e }) => {
    let i = e.toLowerCase(), t = await r.db.query("raidContributions").withIndex("by_player", (p) => p.eq("address", i)).filter(
      (p) => p.and(
        p.eq(p.field("rewardClaimed"), !1),
        p.gt(p.field("rewardEarned"), 0)
      )
    ).take(100);
    if (t.length === 0)
      return {
        success: !1,
        message: "No unclaimed rewards",
        totalClaimed: 0
      };
    let a = t.reduce(
      (p, h) => p + h.rewardEarned,
      0
    ), n = await r.db.query("profiles").withIndex("by_address", (p) => p.eq("address", i)).first();
    if (!n)
      return { success: !1, message: "Profile not found", totalClaimed: 0 };
    for (let p of t)
      await r.db.patch(p._id, {
        rewardClaimed: !0
      });
    return await r.db.patch(n._id, {
      coins: (n.coins || 0) + a,
      lifetimeEarned: (n.lifetimeEarned || 0) + a
    }), await r.db.insert("coinTransactions", {
      address: i,
      amount: a,
      type: "earn",
      source: "raid_boss_reward",
      description: `Raid Boss rewards (x${t.length} bosses)`,
      timestamp: Date.now(),
      balanceBefore: n.coins || 0,
      balanceAfter: (n.coins || 0) + a
    }), await U(
      r,
      i,
      "earn",
      a,
      n.coins || 0,
      (n.coins || 0) + a,
      "raid_boss_reward",
      `bosses_${t.length}`,
      { reason: `Raid Boss rewards for ${t.length} boss kills` }
    ), console.log("Claimed " + a + " coins for " + i), {
      success: !0,
      totalClaimed: a,
      claimedCount: t.length,
      newBalance: (n.coins || 0) + a
    };
  }, "handler")
}), Oe = Q({
  handler: /* @__PURE__ */ b(async (r) => await r.db.query("raidContributions").take(500), "handler")
}), Ye = D({
  args: { bossIndex: o.number() },
  handler: /* @__PURE__ */ b(async (r, { bossIndex: e }) => {
    let i = await r.db.query("raidContributions").withIndex("by_boss_player", (l) => l.eq("bossIndex", e)).take(1e4);
    if (i.length === 0)
      return { success: !1, message: "No contributions found for this boss" };
    let t = i.reduce((l, k) => l + k.damageDealt, 0), n = (await r.db.query("raidBoss").filter((l) => l.eq(l.field("bossIndex"), e)).first())?.rarity?.toLowerCase() || "common", p = L[n], h = 0, f = [];
    for (let l of i) {
      let k = t > 0 ? l.damageDealt / t : 0, u = Math.max(1, Math.floor(p * k));
      await r.db.patch(l._id, {
        rewardEarned: u
      }), await r.db.query("profiles").withIndex("by_address", (g) => g.eq("address", l.address)).first() && (h += u, f.push({ address: l.address, reward: u }));
    }
    return console.log("Manually distributed " + h + " TESTVBMS to " + i.length + " players for boss #" + e), {
      success: !0,
      totalDistributed: h,
      contributors: i.length,
      rewards: f
    };
  }, "handler")
}), Ke = I({
  args: {
    address: o.string()
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = await B(r, e.address), t = await r.db.query("raidAttacks").withIndex("by_address", (n) => n.eq("address", i)).first();
    if (!t) return null;
    let a = await r.db.query("profiles").withIndex("by_address", (n) => n.eq("address", i)).first();
    return {
      address: t.address,
      username: a?.username || t.address.slice(0, 8),
      deck: t.deck,
      vibefidCard: t.vibefidCard,
      deckPower: t.deckPower,
      totalDamageDealt: t.totalDamageDealt,
      bossesKilled: t.bossesKilled,
      cardEnergy: t.cardEnergy
    };
  }, "handler")
}), Ze = D({
  args: {
    linkedAddress: o.string()
  },
  handler: /* @__PURE__ */ b(async (r, e) => {
    let i = e.linkedAddress.toLowerCase(), t = await r.db.query("raidAttacks").withIndex("by_address", (n) => n.eq("address", i)).first();
    t && (await r.db.delete(t._id), console.log(`\u{1F9F9} Deleted raid deck for linked wallet: ${i}`));
    let a = await r.db.query("raidContributions").withIndex("by_player", (n) => n.eq("address", i)).take(1e3);
    for (let n of a)
      await r.db.delete(n._id);
    return a.length > 0 && console.log(`\u{1F9F9} Deleted ${a.length} contributions for linked wallet: ${i}`), {
      deletedRaidDeck: !!t,
      deletedContributions: a.length
    };
  }, "handler")
}), We = R({
  args: {},
  handler: /* @__PURE__ */ b(async (r) => {
    let e = Date.now(), i = await r.db.query("raidBoss").filter((t) => t.eq(t.field("status"), "active")).first();
    return i ? (await r.db.patch(i._id, {
      currentHp: 0,
      status: "transitioning",
      defeatedAt: e
    }), console.log(`\u{1F52A} Admin force-killed boss: ${i.name} (index ${i.bossIndex})`), {
      success: !0,
      killedBoss: i.name,
      bossIndex: i.bossIndex
    }) : { success: !1, message: "No active boss found" };
  }, "handler")
});
export {
  We as adminForceKillBoss,
  Je as claimRaidRewards,
  Ze as cleanupLinkedWalletRaidData,
  Me as clearRaidDeck,
  Ve as defeatBossAndSpawnNext,
  Oe as getAllContributions,
  Qe as getBossLeaderboard,
  xe as getCurrentRaidBoss,
  qe as getPlayerContribution,
  Se as getPlayerRaidDeck,
  Ke as getPlayerRaidDeckByAddress,
  Ue as getRaidBossLeaderboard,
  _e as getRaidHistory,
  Le as getTopContributors,
  He as getUnclaimedRewards,
  De as initializeRaidBoss,
  Ye as manualDistributeRewards,
  Ne as processAutoAttacks,
  Fe as refuelCards,
  Pe as replaceCard,
  Te as setRaidDeck
};
//# sourceMappingURL=raidBoss.js.map
