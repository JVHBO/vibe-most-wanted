{"projectConfig":{"functions":"convex/","node":{"externalPackages":[]},"generateCommonJSApi":false,"codegen":{"staticApi":false,"staticDataModel":false}},"modules":[{"path":"_deps/4SZP7OOE.js","source":"import {\n  a,\n  b,\n  c\n} from \"./AWJMSRP7.js\";\nimport \"./6EQFL5ZL.js\";\nimport \"./34SVKERO.js\";\nimport \"./5B5TEMMX.js\";\nexport {\n  a as api,\n  c as components,\n  b as internal\n};\n//# sourceMappingURL=4SZP7OOE.js.map\n","environment":"isolate"},{"path":"testHelpers.js","source":"import {\n  c as d\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as a\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as t\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/testHelpers.ts\nvar f = d({\n  args: { fid: a.number() },\n  handler: /* @__PURE__ */ t(async (r, { fid: i }) => {\n    let e = await r.db.query(\"farcasterCards\").withIndex(\"by_fid\", (s) => s.eq(\"fid\", i)).first();\n    return e ? (await r.db.patch(e._id, {\n      rarity: \"Epic\",\n      power: 140,\n      // Epic base power with Standard foil and Mint wear\n      previousRarity: void 0,\n      upgradedAt: void 0\n    }), { success: !0, message: \"Card reset to Epic for testing\" }) : { error: \"Card not found\" };\n  }, \"handler\")\n});\nexport {\n  f as resetCardForTest\n};\n//# sourceMappingURL=testHelpers.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/testHelpers.ts\"],\n  \"mappings\": \";;;;;;;;;;;;AAIO,IAAMA,IAAmBC,EAAS;AAAA,EACvC,MAAM,EAAE,KAAKC,EAAE,OAAO,EAAE;AAAA,EACxB,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,KAAAC,EAAI,MAAM;AAC/B,QAAMC,IAAO,MAAMF,EAAI,GACpB,MAAM,gBAAgB,EACtB,UAAU,UAAU,CAACG,MAAMA,EAAE,GAAG,OAAOF,CAAG,CAAC,EAC3C,MAAM;AAET,WAAKC,KAGL,MAAMF,EAAI,GAAG,MAAME,EAAK,KAAK;AAAA,MAC3B,QAAQ;AAAA,MACR,OAAO;AAAA;AAAA,MACP,gBAAgB;AAAA,MAChB,YAAY;AAAA,IACd,CAAC,GAEM,EAAE,SAAS,IAAM,SAAS,iCAAiC,KAVhD,EAAE,OAAO,iBAAiB;AAAA,EAW9C,GAjBS;AAkBX,CAAC;\",\n  \"names\": [\"resetCardForTest\", \"mutation\", \"v\", \"__name\", \"ctx\", \"fid\", \"card\", \"q\"]\n}\n"},{"path":"txHistory.js","source":"import {\n  a as s\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as r\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/txHistory.ts\nvar c = s({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ r(async (d, { address: a }) => {\n    let t = a.toLowerCase();\n    return await d.db.query(\"coinTransactions\").withIndex(\"by_address\", (o) => o.eq(\"address\", t)).order(\"desc\").take(500);\n  }, \"handler\")\n});\nexport {\n  c as getByAddress\n};\n//# sourceMappingURL=txHistory.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/txHistory.ts\"],\n  \"mappings\": \";;;;;;;;;;;;AAGO,IAAMA,IAAeC,EAAM;AAAA,EAChC,MAAM,EAAE,SAASC,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,SAAAC,EAAQ,MAAM;AACnC,QAAMC,IAAOD,EAAQ,YAAY;AACjC,WAAO,MAAMD,EAAI,GACd,MAAM,kBAAkB,EACxB,UAAU,cAAc,CAACG,MAAMA,EAAE,GAAG,WAAWD,CAAI,CAAC,EACpD,MAAM,MAAM,EACZ,KAAK,GAAG;AAAA,EACb,GAPS;AAQX,CAAC;\",\n  \"names\": [\"getByAddress\", \"query\", \"v\", \"__name\", \"ctx\", \"address\", \"addr\", \"q\"]\n}\n"},{"path":"utils.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g,\n  h\n} from \"./_deps/LKY7FFHL.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  c as addressesEqual,\n  f as calculateTotalPower,\n  d as getTodayString,\n  e as isToday,\n  b as isValidAddress,\n  a as normalizeAddress,\n  h as validateNotEmpty,\n  g as validateRange\n};\n//# sourceMappingURL=utils.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"vbmsClaim.js","source":"import {\n  b as p\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  b as B,\n  c as R\n} from \"./_deps/55EWY3YS.js\";\nimport {\n  a as T\n} from \"./_deps/HHLKWD3J.js\";\nimport {\n  h as b\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as h,\n  b as M,\n  c as v,\n  d as y,\n  e as A,\n  f as S\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/vbmsClaim.ts\nasync function g(t, n) {\n  let e = await t.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", n.toLowerCase())).first();\n  if (!e)\n    throw new Error(`Profile not found for address: ${n}`);\n  return e;\n}\nd(g, \"getProfile\");\nfunction D(t, n, e = 0) {\n  let o = 0, r = [], a = n + e;\n  if (a >= 1e3) {\n    let u = Math.floor(a * 0.01);\n    o += u, r.push(`+${u} VBMS (1% large claim bonus)`);\n  }\n  let s = t.lastClaimTimestamp || 0;\n  if ((Date.now() - s) / (1440 * 60 * 1e3) >= 7) {\n    let u = Math.floor(a * 0.05);\n    o += u, r.push(`+${u} VBMS (5% weekly bonus)`);\n  }\n  let c = Math.floor(Date.now() / (1440 * 60 * 1e3)), m = Math.floor(s / (1440 * 60 * 1e3));\n  return c > m && (o += 50, r.push(\"+50 VBMS (first claim today)\")), {\n    baseAmount: n,\n    bonus: o,\n    totalAmount: n + o,\n    bonusReasons: r\n  };\n}\nd(D, \"calculateClaimBonus\");\nfunction _() {\n  let t = crypto.randomUUID().replace(/-/g, \"\"), n = crypto.randomUUID().replace(/-/g, \"\");\n  return `0x${t}${n}`.substring(0, 66);\n}\nd(_, \"generateNonce\");\nvar F = S({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    nonce: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, n) => {\n    let { address: e, amount: o, nonce: r } = n, a = \"https://vibemostwanted.xyz\";\n    console.log(`[VBMS Sign Claim] Calling API at: ${a}/api/vbms/sign-claim`), console.log(`[VBMS Sign Claim] Request: address=${e}, amount=${o}, nonce=${r}`);\n    try {\n      let s = await fetch(`${a}/api/vbms/sign-claim`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ address: e, amount: o, nonce: r })\n      });\n      if (console.log(`[VBMS Sign Claim] Response status: ${s.status} ${s.statusText}`), !s.ok) {\n        let c = await s.text();\n        console.error(`[VBMS Sign Claim] Error response body: ${c}`);\n        let m;\n        try {\n          m = JSON.parse(c);\n        } catch {\n          m = { error: c || \"Unknown error\" };\n        }\n        throw new Error(`Failed to sign claim (${s.status}): ${m.error || s.statusText}`);\n      }\n      let l = await s.json();\n      if (console.log(`[VBMS Signature] Address: ${e}, Amount: ${o} VBMS, Nonce: ${r}`), console.log(`[VBMS Signature] Signature received: ${l.signature?.slice(0, 20)}...`), !l.signature)\n        throw new Error(\"No signature in response\");\n      return l.signature;\n    } catch (s) {\n      throw console.error(`[VBMS Signature Error] ${s.message}`, s), new Error(`Failed to sign claim message: ${s.message}`);\n    }\n  }, \"handler\")\n}), L = \"0x062b914668f3fD35c3Ae02e699cB82e1cF4bE18b\", x = \"https://mainnet.base.org\", q = S({\n  args: {\n    nonce: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { nonce: n }) => {\n    try {\n      let r = `0xfeb61724${(n.startsWith(\"0x\") ? n : `0x${n}`).slice(2).padStart(64, \"0\")}`, s = await (await fetch(x, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: 1,\n          method: \"eth_call\",\n          params: [{\n            to: L,\n            data: r\n          }, \"latest\"]\n        })\n      })).json();\n      if (s.error)\n        return console.error(\"[OnChain Check] RPC error:\", s.error), !0;\n      let l = s.result, c = l && l !== \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n      return console.log(`[OnChain Check] Nonce ${n.slice(0, 10)}... used: ${c}`), c;\n    } catch (e) {\n      return console.error(\"[OnChain Check] Error checking nonce:\", e), !0;\n    }\n  }, \"handler\")\n}), H = v({\n  args: {\n    address: i.string(),\n    matchId: i.id(\"matches\")\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, matchId: e }) => {\n    let o = await g(t, n), r = await t.db.get(e);\n    if (!r)\n      throw new Error(\"Match not found\");\n    if (r.playerAddress.toLowerCase() !== n.toLowerCase())\n      throw new Error(\"Unauthorized: Match does not belong to this player\");\n    if (r.rewardsClaimed)\n      throw new Error(\"Rewards already claimed for this match\");\n    let a = r.coinsEarned || 0, s = (o.coins || 0) + a;\n    return await t.db.patch(o._id, {\n      coins: s,\n      lifetimeEarned: (o.lifetimeEarned || 0) + a\n    }), await t.db.insert(\"coinTransactions\", {\n      address: n.toLowerCase(),\n      amount: a,\n      type: \"earn\",\n      source: \"pve_match\",\n      description: \"PvE match reward\",\n      timestamp: Date.now(),\n      balanceBefore: o.coins || 0,\n      balanceAfter: s\n    }), await b(\n      t,\n      n,\n      \"earn\",\n      a,\n      o.coins || 0,\n      s,\n      \"sendToInbox\",\n      e,\n      { reason: \"PvE match reward added to balance\" }\n    ), await t.db.patch(e, {\n      rewardsClaimed: !0,\n      claimedAt: Date.now(),\n      claimType: \"inbox\"\n    }), await t.db.insert(\"claimAnalytics\", {\n      playerAddress: n.toLowerCase(),\n      choice: \"inbox\",\n      amount: a,\n      inboxTotal: s,\n      bonusAvailable: !1,\n      timestamp: Date.now()\n    }), {\n      newInbox: s,\n      amountAdded: a,\n      gasUsed: 0,\n      message: `\\u{1F4B0} ${a} VBMS added to balance!`\n    };\n  }, \"handler\")\n}), Y = A({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await t.runMutation(p.vbmsClaim.prepareInboxClaimInternal, { address: n }), o = _(), r = await t.runAction(p.vbmsClaim.signClaimMessage, {\n      address: n,\n      amount: e.totalAmount,\n      nonce: o\n    });\n    return {\n      amount: e.totalAmount,\n      baseAmount: e.baseAmount,\n      bonus: e.bonus,\n      bonusReasons: e.bonusReasons,\n      nonce: o,\n      signature: r,\n      message: `Collect ${e.totalAmount} VBMS from inbox`\n    };\n  }, \"handler\")\n}), W = y({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await g(t, n), o = e.coinsInbox || 0;\n    if (o < 100)\n      throw new Error(\"Minimum claim amount is 100 VBMS. Current inbox: \" + o);\n    let r = D(e, o);\n    return await t.db.patch(e._id, {\n      coinsInbox: 0\n    }), {\n      totalAmount: r.totalAmount,\n      baseAmount: r.baseAmount,\n      bonus: r.bonus,\n      bonusReasons: r.bonusReasons\n    };\n  }, \"handler\")\n}), Q = v({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    txHash: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e, txHash: o }) => {\n    let r = await g(t, n);\n    return await t.db.patch(r._id, {\n      coinsInbox: 0,\n      claimedTokens: (r.claimedTokens || 0) + e,\n      lastClaimTimestamp: Date.now()\n    }), await t.db.insert(\"claimHistory\", {\n      playerAddress: n.toLowerCase(),\n      amount: e,\n      txHash: o,\n      timestamp: Date.now(),\n      type: \"inbox_collect\"\n    }), {\n      success: !0,\n      newClaimedTotal: (r.claimedTokens || 0) + e\n    };\n  }, \"handler\")\n}), j = h({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await t.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", n.toLowerCase())).first();\n    if (!e)\n      return null;\n    let o = e.pendingConversion || 0, r = Math.max(0, (e.coins || 0) - o);\n    return {\n      // Virtual balance (in-app spending) - TESTVBMS\n      coins: e.coins || 0,\n      availableCoins: r,\n      // Coins available (excluding pending conversion)\n      lifetimeEarned: e.lifetimeEarned || 0,\n      lifetimeSpent: e.lifetimeSpent || 0,\n      // Real VBMS token (inbox system)\n      inbox: e.coinsInbox || 0,\n      claimedTokens: e.claimedTokens || 0,\n      poolDebt: e.poolDebt || 0,\n      lastClaimTimestamp: e.lastClaimTimestamp || 0,\n      // Pending conversion info\n      pendingConversion: o,\n      pendingConversionTimestamp: e.pendingConversionTimestamp || null,\n      hasPendingConversion: o > 0,\n      // Calculate claimable\n      claimableBalance: Math.max(0, (e.coinsInbox || 0) - (e.poolDebt || 0))\n    };\n  }, \"handler\")\n}), K = h({\n  args: {\n    address: i.string(),\n    pendingAmount: i.number()\n    // Amount from current battle\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, pendingAmount: e }) => {\n    let o = await g(t, n), r = o.coinsInbox || 0, a = r + e, s = o.lastClaimTimestamp || 0, l = (Date.now() - s) / (1440 * 60 * 1e3), c = D(o, e, r), m = c.bonus > 0, u = \"inbox\", w = \"Economize gas acumulando mais!\", f = null;\n    return a >= 1e3 ? (u = \"claim_now\", w = \"Voc\\xEA tem 1,000+ VBMS acumulado!\", f = \"\\u{1F381} +1% Bonus\") : l >= 7 ? (u = \"claim_now\", w = \"Bonus semanal dispon\\xEDvel!\", f = \"\\u{1F389} +5% Weekly Bonus\") : m && (u = \"claim_now\", w = \"Bonus dispon\\xEDvel agora!\", f = `\\u2728 +${c.bonus} VBMS`), {\n      recommended: u,\n      reason: w,\n      badge: f,\n      potentialBonus: c.bonus,\n      totalWithBonus: c.totalAmount,\n      inboxTotal: a\n    };\n  }, \"handler\")\n}), z = h({\n  args: {\n    address: i.string(),\n    limit: i.optional(i.number())\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, limit: e = 500 }) => await t.db.query(\"claimHistory\").withIndex(\n    \"by_player\",\n    (r) => r.eq(\"playerAddress\", n.toLowerCase())\n  ).order(\"desc\").take(e), \"handler\")\n}), G = h({\n  args: {\n    address: i.string(),\n    limit: i.optional(i.number())\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, limit: e = 500 }) => {\n    let o = n.toLowerCase(), r = await t.db.query(\"claimHistory\").withIndex(\"by_player\", (c) => c.eq(\"playerAddress\", o)).order(\"desc\").take(e), a = await t.db.query(\"coinAuditLog\").withIndex(\"by_player\", (c) => c.eq(\"playerAddress\", o)).order(\"desc\").take(e), s = await t.db.query(\"claimAnalytics\").withIndex(\"by_player\", (c) => c.eq(\"playerAddress\", o)).order(\"desc\").take(e), l = [\n      ...r.map((c) => ({\n        source: \"claimHistory\",\n        type: c.type,\n        amount: c.amount,\n        timestamp: c.timestamp,\n        txHash: c.txHash,\n        bonus: c.bonus\n      })),\n      ...a.map((c) => ({\n        source: \"auditLog\",\n        type: c.type,\n        amount: c.amount,\n        timestamp: c.timestamp,\n        balanceBefore: c.balanceBefore,\n        balanceAfter: c.balanceAfter,\n        sourceFunction: c.source,\n        metadata: c.metadata\n      })),\n      ...s.map((c) => ({\n        source: \"analytics\",\n        type: c.choice,\n        amount: c.amount,\n        timestamp: c.timestamp,\n        inboxTotal: c.inboxTotal\n      }))\n    ].sort((c, m) => m.timestamp - c.timestamp);\n    return {\n      total: l.length,\n      transactions: l.slice(0, e),\n      summary: {\n        claimHistoryCount: r.length,\n        auditLogCount: a.length,\n        analyticsCount: s.length\n      }\n    };\n  }, \"handler\")\n}), J = v({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await g(t, n), o = e.coinsInbox || 0;\n    if (o < 1)\n      throw new Error(\"Nada para coletar no inbox\");\n    let r = e.coins || 0, a = r + o;\n    return await t.db.patch(e._id, {\n      coins: a,\n      coinsInbox: 0,\n      // Clear inbox\n      lifetimeEarned: (e.lifetimeEarned || 0) + o\n    }), await t.db.insert(\"coinTransactions\", {\n      address: n.toLowerCase(),\n      amount: o,\n      type: \"earn\",\n      source: \"inbox_claim\",\n      description: \"Claimed inbox as TESTVBMS\",\n      timestamp: Date.now(),\n      balanceBefore: r,\n      balanceAfter: a\n    }), await b(\n      t,\n      n,\n      \"earn\",\n      o,\n      r,\n      a,\n      \"claimInboxAsTESTVBMS\",\n      void 0,\n      { reason: \"Inbox claimed as TESTVBMS (no blockchain)\" }\n    ), {\n      success: !0,\n      amount: o,\n      newBalance: a,\n      message: `\\u{1F4B0} ${o} TESTVBMS added to your balance!`\n    };\n  }, \"handler\")\n}), X = y({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    difficulty: i.optional(i.union(\n      i.literal(\"gey\"),\n      i.literal(\"goofy\"),\n      i.literal(\"gooner\"),\n      i.literal(\"gangster\"),\n      i.literal(\"gigachad\")\n    ))\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e, difficulty: o }) => {\n    let r = await g(t, n), a = r.coins || 0, s = a + e;\n    await t.db.patch(r._id, {\n      coins: s,\n      lifetimeEarned: (r.lifetimeEarned || 0) + e,\n      lastUpdated: Date.now()\n    }), console.log(`\\u{1F4B0} ${n} received ${e} TESTVBMS from PvE victory (difficulty: ${o || \"N/A\"}). Balance: ${a} \\u2192 ${s}`), await t.db.insert(\"coinTransactions\", {\n      address: n.toLowerCase(),\n      type: \"earn\",\n      amount: e,\n      source: \"pve\",\n      description: `PvE victory (${o || \"unknown\"})`,\n      balanceBefore: a,\n      balanceAfter: s,\n      timestamp: Date.now()\n    }), await b(\n      t,\n      n,\n      \"earn\",\n      e,\n      a,\n      s,\n      \"sendPveRewardToInbox\",\n      void 0,\n      { difficulty: o || void 0, reason: \"PvE poker victory reward\" }\n    ), await t.db.insert(\"claimAnalytics\", {\n      playerAddress: n.toLowerCase(),\n      choice: \"pve\",\n      amount: e,\n      inboxTotal: s,\n      bonusAvailable: !1,\n      timestamp: Date.now()\n    });\n    let l = `\\u{1F4B0} ${e} TESTVBMS added to balance from PvE victory!`;\n    return {\n      newInbox: s,\n      amountAdded: e,\n      debtPaid: 0,\n      hadDebt: !1,\n      message: l\n    };\n  }, \"handler\")\n}), Z = y({\n  args: {\n    address: i.string(),\n    amount: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e }) => {\n    try {\n      console.log(`[sendPvpRewardToInbox] START - address: ${n}, amount: ${e}`);\n      let o = await g(t, n);\n      console.log(`[sendPvpRewardToInbox] Profile found: ${o._id}`);\n      let r = o.coins || 0, a = r + e;\n      console.log(\"[sendPvpRewardToInbox] Updating profile...\"), await t.db.patch(o._id, {\n        coins: a,\n        lifetimeEarned: (o.lifetimeEarned || 0) + e,\n        lastUpdated: Date.now()\n      }), console.log(`\\u{1F4B0} ${n} received ${e} TESTVBMS from PvP victory. Balance: ${r} \\u2192 ${a}`), await t.db.insert(\"coinTransactions\", {\n        address: n.toLowerCase(),\n        type: \"earn\",\n        amount: e,\n        source: \"pvp\",\n        description: \"PvP victory reward\",\n        balanceBefore: r,\n        balanceAfter: a,\n        timestamp: Date.now()\n      }), await b(\n        t,\n        n,\n        \"earn\",\n        e,\n        r,\n        a,\n        \"sendPvpRewardToInbox\",\n        void 0,\n        { reason: \"PvP poker victory reward\" }\n      ), console.log(\"[sendPvpRewardToInbox] Inserting analytics...\"), await t.db.insert(\"claimAnalytics\", {\n        playerAddress: n.toLowerCase(),\n        choice: \"pvp\",\n        amount: e,\n        inboxTotal: a,\n        bonusAvailable: !1,\n        timestamp: Date.now()\n      });\n      let s = `\\u{1F4B0} ${e} TESTVBMS added to balance from PvP victory!`;\n      return console.log(\"[sendPvpRewardToInbox] SUCCESS\"), {\n        newInbox: a,\n        amountAdded: e,\n        debtPaid: 0,\n        hadDebt: !1,\n        message: s\n      };\n    } catch (o) {\n      throw console.error(\"[sendPvpRewardToInbox] ERROR:\", o), console.error(\"[sendPvpRewardToInbox] Error details:\", o.message, o.stack), new Error(`Failed to send PvP reward to inbox: ${o.message}`);\n    }\n  }, \"handler\")\n}), ee = A({\n  args: {\n    address: i.string(),\n    fid: i.number(),\n    // ðŸ”’ REQUIRED - Must provide valid FID\n    amount: i.optional(i.number())\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, fid: e, amount: o }) => {\n    if (console.log(\"[VBMS] \\u{1F504} Conversion attempt:\", {\n      address: n,\n      fid: e,\n      requestedAmount: o,\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    }), !e || e <= 0)\n      throw console.log(`[VBMS] \\u26D4 BLOCKED - No valid FID provided for ${n}`), new Error(\"[CLAIM_FID_REQUIRED]\");\n    let r = _(), a;\n    try {\n      a = await t.runMutation(p.vbmsClaim.convertTESTVBMSInternal, { address: n, fid: e, amount: o, nonce: r }), console.log(\"[VBMS] \\u2705 Internal mutation success:\", { claimAmount: a.claimAmount });\n    } catch (l) {\n      throw console.error(\"[VBMS] \\u274C Internal mutation FAILED:\", {\n        address: n,\n        fid: e,\n        requestedAmount: o,\n        error: l.message\n      }), l;\n    }\n    let s;\n    try {\n      s = await t.runAction(p.vbmsClaim.signClaimMessage, {\n        address: n,\n        amount: a.claimAmount,\n        nonce: r\n      });\n    } catch (l) {\n      console.error(`[VBMS] \\u274C Signature failed for ${n}, attempting restore of ${a.claimAmount} coins:`, l);\n      try {\n        throw await t.runAction(p.vbmsClaim.restoreCoinsOnSignFailure, {\n          address: n,\n          amount: a.claimAmount\n        }), new Error(`[CLAIM_SIGNATURE_FAILED_RESTORED]${a.claimAmount}`);\n      } catch (c) {\n        throw console.error(`[VBMS] \\u274C Auto-restore also failed for ${n}:`, c), new Error(\"[CLAIM_SIGNATURE_FAILED_MANUAL]\");\n      }\n    }\n    return console.log(`\\u{1F4B1} ${n} (FID: ${e}) converting ${a.claimAmount} TESTVBMS \\u2192 VBMS (nonce: ${r})`), {\n      amount: a.claimAmount,\n      nonce: r,\n      signature: s,\n      message: `Converting ${a.claimAmount} TESTVBMS to VBMS`\n    };\n  }, \"handler\")\n}), $ = 180 * 1e3, E = 5e5, C = 100, ne = y({\n  args: {\n    address: i.string(),\n    fid: i.number(),\n    // ðŸ”’ Required for FID verification\n    amount: i.optional(i.number()),\n    nonce: i.string()\n    // ðŸ”’ Store for on-chain verification (anti double-spend)\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, fid: e, amount: o, nonce: r }) => {\n    if (console.log(\"[VBMS Internal] Processing conversion:\", {\n      address: n,\n      fid: e,\n      requestedAmount: o,\n      maxAllowed: E,\n      minRequired: C\n    }), B(n)) {\n      let I = R(n);\n      throw console.log(`\\u{1F6AB} [BLACKLIST] Blocked claim attempt from exploiter: ${n} (${I?.username})`), new Error(\"[CLAIM_BLACKLISTED]\");\n    }\n    let a = await g(t, n);\n    console.log(\"[VBMS Internal] Profile state:\", {\n      coins: a.coins || 0,\n      farcasterFid: a.farcasterFid,\n      profileFid: a.fid,\n      lastClaimTimestamp: a.lastClaimTimestamp,\n      pendingConversion: a.pendingConversion || 0\n    });\n    let s = a.farcasterFid || (a.fid ? Number(a.fid) : null);\n    if (!s || s !== e)\n      throw console.log(`\\u{1F6AB} [SECURITY] FID mismatch! Provided: ${e}, Profile FID: ${s}, Address: ${n}`), new Error(\"[CLAIM_FID_MISMATCH]\");\n    console.log(`\\u2705 [SECURITY] FID verified: ${e} for address ${n}`);\n    let l = a.lastConversionAttempt || a.lastClaimTimestamp || 0, c = Date.now() - l;\n    if (l > 0 && c < $) {\n      let I = Math.ceil(($ - c) / 1e3);\n      throw new Error(`[CLAIM_COOLDOWN]${I}`);\n    }\n    let m = a.coins || 0;\n    if (m < C)\n      throw new Error(`[CLAIM_MINIMUM_REQUIRED]${C}|${m}`);\n    let u;\n    if (o !== void 0) {\n      if (o < C)\n        throw new Error(`[CLAIM_MINIMUM_REQUIRED]${C}|${m}`);\n      if (o > m)\n        throw new Error(`[CLAIM_INSUFFICIENT_BALANCE]${m}|${o}`);\n      u = Math.min(o, E);\n    } else\n      u = Math.min(m, E);\n    let w = m - u;\n    if (u < C)\n      throw new Error(`[CLAIM_MINIMUM_REQUIRED]${C}|${m}`);\n    let f = Date.now();\n    return await t.db.patch(a._id, {\n      coins: w,\n      // Keep any amount over 100k\n      pendingConversion: u,\n      // Track pending conversion for recovery if needed\n      pendingConversionTimestamp: f,\n      pendingNonce: r,\n      // ðŸ”’ Store nonce to verify on-chain before allowing recovery\n      lastConversionAttempt: f\n      // ðŸ”’ Track attempt time for cooldown (even if fails)\n    }), await T(t, {\n      address: n,\n      type: \"convert\",\n      amount: -u,\n      source: \"pending_conversion\",\n      description: `Converting ${u.toLocaleString()} TESTVBMS \\u2192 VBMS (pending)`,\n      balanceBefore: m,\n      balanceAfter: w\n    }), await b(\n      t,\n      n,\n      \"convert\",\n      u,\n      m,\n      w,\n      \"convertTESTVBMStoVBMS\",\n      void 0,\n      { reason: `TESTVBMS to VBMS conversion initiated (max: ${E})` }\n    ), await t.db.insert(\"claimAnalytics\", {\n      playerAddress: n.toLowerCase(),\n      choice: \"convert\",\n      amount: u,\n      inboxTotal: a.coinsInbox || 0,\n      bonusAvailable: !1,\n      timestamp: Date.now()\n    }), console.log(`\\u{1F512} [SECURITY] ${n} converting ${u} TESTVBMS (remaining: ${w}, cooldown: 3min)`), { claimAmount: u };\n  }, \"handler\")\n}), oe = v({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    txHash: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e, txHash: o }) => {\n    if (await t.db.query(\"claimHistory\").withIndex(\"by_txHash\", (s) => s.eq(\"txHash\", o)).first())\n      throw console.log(`\\u26A0\\uFE0F [SECURITY] Duplicate txHash rejected: ${o} for ${n}`), new Error(\"[CLAIM_TX_RECORDED]\");\n    let a = await g(t, n);\n    return await t.db.patch(a._id, {\n      // coins is NOT touched here - already correctly set in convertTESTVBMSInternal\n      pendingConversion: 0,\n      // Clear pending\n      pendingConversionTimestamp: void 0,\n      pendingNonce: void 0,\n      // ðŸ”’ Clear nonce after successful claim\n      claimedTokens: (a.claimedTokens || 0) + e,\n      lastClaimTimestamp: Date.now()\n    }), await t.db.insert(\"claimHistory\", {\n      playerAddress: n.toLowerCase(),\n      amount: e,\n      txHash: o,\n      timestamp: Date.now(),\n      type: \"testvbms_conversion\"\n    }), await b(\n      t,\n      n,\n      \"claim\",\n      e,\n      a.pendingConversion || e,\n      0,\n      \"recordTESTVBMSConversion\",\n      o,\n      { txHash: o, reason: \"VBMS claimed on blockchain\" }\n    ), await T(t, {\n      address: n,\n      type: \"convert\",\n      amount: e,\n      source: \"blockchain\",\n      description: `Converted ${e.toLocaleString()} TESTVBMS \\u2192 VBMS`,\n      balanceBefore: a.coins || 0,\n      balanceAfter: 0,\n      txHash: o\n    }), console.log(`\\u2705 ${n} converted ${e} TESTVBMS \\u2192 VBMS (tx: ${o})`), {\n      success: !0,\n      newCoinsBalance: 0,\n      newClaimedTotal: (a.claimedTokens || 0) + e\n    };\n  }, \"handler\")\n}), te = A({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await t.runQuery(p.vbmsClaim.getRecoveryInfo, { address: n });\n    if (e.pendingAmount === 0)\n      throw new Error(\"[CLAIM_NO_PENDING]\");\n    let o = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);\n    if (e.lastRecoveryDay === o && (e.dailyRecoveryCount || 0) >= 3)\n      throw console.log(`\\u{1F6AB} [SECURITY] Daily recovery limit reached for ${n}`), new Error(\"[CLAIM_DAILY_LIMIT]\");\n    let r = Date.now() - 30 * 1e3;\n    if (e.pendingTimestamp > r) {\n      let s = Math.ceil((e.pendingTimestamp - r) / 1e3);\n      throw new Error(`[CLAIM_WAIT_RECOVER]${s}`);\n    }\n    if (e.pendingNonce && await t.runAction(p.vbmsClaim.checkNonceUsedOnChain, {\n      nonce: e.pendingNonce\n    }))\n      throw console.error(`\\u{1F6A8} [SECURITY] DOUBLE-SPEND BLOCKED! Address ${n} tried to recover after claiming on-chain. Nonce: ${e.pendingNonce}`), await t.runMutation(p.vbmsClaim.clearPendingWithoutRestore, { address: n }), new Error(\"[CLAIM_BLOCKED_ALREADY_CLAIMED]\");\n    let a = await t.runMutation(p.vbmsClaim.executeRecovery, {\n      address: n,\n      amount: e.pendingAmount,\n      currentCoins: e.currentCoins,\n      today: o,\n      // ðŸ”’ For daily recovery counter\n      currentRecoveryCount: e.dailyRecoveryCount || 0\n    });\n    return console.log(`\\u{1F504} ${n} recovered ${e.pendingAmount} TESTVBMS from failed conversion (on-chain verified)`), a;\n  }, \"handler\")\n}), ae = M({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await g(t, n);\n    return {\n      pendingAmount: e.pendingConversion || 0,\n      pendingTimestamp: e.pendingConversionTimestamp || 0,\n      pendingNonce: e.pendingNonce || null,\n      currentCoins: e.coins || 0,\n      // ðŸ”’ Anti-exploit fields\n      dailyRecoveryCount: e.dailyRecoveryCount || 0,\n      lastRecoveryDay: e.lastRecoveryDay || null,\n      lastConversionAttempt: e.lastConversionAttempt || 0\n    };\n  }, \"handler\")\n}), re = A({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await t.runQuery(p.vbmsClaim.getRecoveryInfo, { address: n });\n    if (e.pendingAmount === 0)\n      return { amount: 0, timestamp: 0, canRecover: !1 };\n    let o = Date.now() - 30 * 1e3, r = e.pendingTimestamp <= o;\n    return {\n      amount: e.pendingAmount,\n      timestamp: e.pendingTimestamp,\n      canRecover: r\n    };\n  }, \"handler\")\n}), ie = y({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    currentCoins: i.number(),\n    today: i.string(),\n    // ðŸ”’ For daily recovery tracking\n    currentRecoveryCount: i.number()\n    // ðŸ”’ Current recovery count today\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e, currentCoins: o, today: r, currentRecoveryCount: a }) => {\n    let s = await g(t, n), l = o + e;\n    return await t.db.patch(s._id, {\n      coins: l,\n      pendingConversion: 0,\n      pendingConversionTimestamp: void 0,\n      pendingNonce: void 0,\n      // ðŸ”’ Track daily recovery count\n      dailyRecoveryCount: a + 1,\n      lastRecoveryDay: r\n    }), await T(t, {\n      address: n,\n      type: \"refund\",\n      amount: e,\n      source: \"conversion_recovery\",\n      description: `Recovered ${e.toLocaleString()} TESTVBMS from failed conversion`,\n      balanceBefore: o,\n      balanceAfter: l\n    }), await b(\n      t,\n      n,\n      \"recover\",\n      e,\n      0,\n      l,\n      \"recoverFailedConversion\",\n      void 0,\n      { reason: `Recovered failed TESTVBMS conversion (on-chain verified) [${a + 1}/3 today]` }\n    ), {\n      success: !0,\n      recoveredAmount: e,\n      newCoinsBalance: l\n    };\n  }, \"handler\")\n}), se = y({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ d(async (t, { address: n }) => {\n    let e = await g(t, n);\n    await t.db.patch(e._id, {\n      pendingConversion: 0,\n      pendingConversionTimestamp: void 0,\n      pendingNonce: void 0\n    }), await b(\n      t,\n      n,\n      \"recover\",\n      // Using \"recover\" type - actual blocking logged in reason\n      e.pendingConversion || 0,\n      0,\n      e.coins || 0,\n      \"clearPendingWithoutRestore\",\n      void 0,\n      { reason: \"\\u{1F6A8} DOUBLE-SPEND BLOCKED - nonce already used on-chain, coins NOT restored\" }\n    );\n  }, \"handler\")\n}), ce = S({\n  args: {\n    address: i.string(),\n    amount: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e }) => {\n    let o = await t.runQuery(p.vbmsClaim.getRecoveryInfo, { address: n });\n    if (o.pendingNonce)\n      try {\n        if (await t.runAction(p.vbmsClaim.checkNonceUsedOnChain, {\n          nonce: o.pendingNonce\n        })) {\n          console.error(`\\u{1F6A8} [SECURITY] Blocked auto-restore for ${n} - nonce already used on-chain!`), await t.runMutation(p.vbmsClaim.clearPendingWithoutRestore, { address: n });\n          return;\n        }\n      } catch {\n        console.error(`\\u{1F6A8} [SECURITY] On-chain check failed for ${n}, skipping auto-restore. User can try manual recovery.`);\n        return;\n      }\n    let r = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);\n    if (o.lastRecoveryDay === r && (o.dailyRecoveryCount || 0) >= 3) {\n      console.error(`\\u{1F6A8} [SECURITY] Daily recovery limit reached for ${n} - skipping auto-restore`);\n      return;\n    }\n    await t.runMutation(p.vbmsClaim.executeAutoRestore, {\n      address: n,\n      amount: e,\n      today: r,\n      currentRecoveryCount: o.dailyRecoveryCount || 0\n    }), console.log(`\\u{1F504} [AUTO-RESTORE] ${n} - Restored ${e} coins (on-chain verified)`);\n  }, \"handler\")\n}), le = y({\n  args: {\n    address: i.string(),\n    amount: i.number(),\n    today: i.string(),\n    currentRecoveryCount: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (t, { address: n, amount: e, today: o, currentRecoveryCount: r }) => {\n    let a = await g(t, n);\n    await t.db.patch(a._id, {\n      coins: (a.coins || 0) + e,\n      pendingConversion: 0,\n      pendingConversionTimestamp: void 0,\n      pendingNonce: void 0,\n      dailyRecoveryCount: r + 1,\n      lastRecoveryDay: o\n    }), await b(\n      t,\n      n,\n      \"recover\",\n      e,\n      0,\n      (a.coins || 0) + e,\n      \"restoreCoinsOnSignFailure\",\n      void 0,\n      { reason: `Signature failed - coins restored (on-chain verified) [${r + 1}/3 today]` }\n    );\n  }, \"handler\")\n}), me = h({\n  handler: /* @__PURE__ */ d(async (t) => {\n    let n = await t.db.query(\"claimAnalytics\").order(\"desc\").take(1e3), e = n.filter((m) => m.choice === \"immediate\").length, o = n.filter((m) => m.choice === \"inbox\").length, r = n.filter((m) => m.choice === \"pve\").length, a = n.filter((m) => m.choice === \"pvp\").length, s = n.filter((m) => m.choice === \"convert\").length, l = n.length, c = n.reduce((m, u) => m + u.amount, 0) / l || 0;\n    return {\n      totalClaims: l,\n      immediateClaimRate: l > 0 ? e / l : 0,\n      inboxRate: l > 0 ? o / l : 0,\n      avgClaimAmount: c,\n      immediate: e,\n      inbox: o,\n      pve: r,\n      pvp: a,\n      convert: s\n    };\n  }, \"handler\")\n});\nexport {\n  q as checkNonceUsedOnChain,\n  J as claimInboxAsTESTVBMS,\n  se as clearPendingWithoutRestore,\n  ne as convertTESTVBMSInternal,\n  ee as convertTESTVBMStoVBMS,\n  le as executeAutoRestore,\n  ie as executeRecovery,\n  me as getClaimBehaviorAnalytics,\n  z as getClaimHistory,\n  K as getClaimRecommendation,\n  G as getFullTransactionHistory,\n  re as getPendingConversionInfo,\n  j as getPlayerEconomy,\n  ae as getRecoveryInfo,\n  Y as prepareInboxClaim,\n  W as prepareInboxClaimInternal,\n  Q as recordInboxClaim,\n  oe as recordTESTVBMSConversion,\n  te as recoverFailedConversion,\n  ce as restoreCoinsOnSignFailure,\n  X as sendPveRewardToInbox,\n  Z as sendPvpRewardToInbox,\n  H as sendToInbox,\n  F as signClaimMessage\n};\n//# sourceMappingURL=vbmsClaim.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/vbmsClaim.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getProfile\", \"ctx\", \"address\", \"profile\", \"q\", \"__name\", \"calculateClaimBonus\", \"amount\", \"inboxAmount\", \"bonus\", \"bonusReasons\", \"totalClaimAmount\", \"largeBon\", \"lastClaim\", \"weeklyBon\", \"today\", \"lastClaimDay\", \"generateNonce\", \"uuid1\", \"uuid2\", \"signClaimMessage\", \"internalAction\", \"v\", \"args\", \"nonce\", \"apiUrl\", \"response\", \"errorText\", \"errorData\", \"data\", \"error\", \"VBMS_POOL_TROLL_ADDRESS\", \"BASE_RPC_URL\", \"checkNonceUsedOnChain\", \"callData\", \"result\", \"isUsed\", \"sendToInbox\", \"mutation\", \"matchId\", \"match\", \"newBalance\", \"createAuditLog\", \"prepareInboxClaim\", \"action\", \"internal\", \"signature\", \"prepareInboxClaimInternal\", \"internalMutation\", \"bonusData\", \"recordInboxClaim\", \"txHash\", \"getPlayerEconomy\", \"query\", \"pendingAmount\", \"availableCoins\", \"getClaimRecommendation\", \"totalAfterClaim\", \"daysSinceLastClaim\", \"hasBonus\", \"recommended\", \"reason\", \"badge\", \"getClaimHistory\", \"limit\", \"getFullTransactionHistory\", \"normalizedAddress\", \"claimHistory\", \"auditLog\", \"analytics\", \"allTransactions\", \"a\", \"b\", \"claimInboxAsTESTVBMS\", \"currentCoins\", \"newCoins\", \"sendPveRewardToInbox\", \"difficulty\", \"currentBalance\", \"message\", \"sendPvpRewardToInbox\", \"convertTESTVBMStoVBMS\", \"fid\", \"signError\", \"restoreError\", \"CONVERSION_COOLDOWN_MS\", \"MAX_CLAIM_AMOUNT\", \"MIN_CLAIM_AMOUNT\", \"convertTESTVBMSInternal\", \"isBlacklisted\", \"info\", \"getBlacklistInfo\", \"profileFid\", \"lastAttempt\", \"timeSinceLastAttempt\", \"remainingSeconds\", \"testVBMSBalance\", \"claimAmount\", \"remainingBalance\", \"now\", \"logTransaction\", \"recordTESTVBMSConversion\", \"recoverFailedConversion\", \"profileInfo\", \"thirtySecondsAgo\", \"waitSeconds\", \"getRecoveryInfo\", \"internalQuery\", \"getPendingConversionInfo\", \"canRecover\", \"executeRecovery\", \"currentRecoveryCount\", \"clearPendingWithoutRestore\", \"restoreCoinsOnSignFailure\", \"recoveryInfo\", \"executeAutoRestore\", \"getClaimBehaviorAnalytics\", \"immediate\", \"inbox\", \"pve\", \"pvp\", \"convert\", \"total\", \"avgClaimAmount\", \"sum\"]\n}\n"},{"path":"vibeRewards.js","source":"import {\n  b as m\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as u,\n  c as l,\n  d as c,\n  e as g\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/vibeRewards.ts\nvar b = 100, h = l({\n  args: {\n    cardFid: i.number(),\n    voterFid: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (s, { cardFid: r, voterFid: a }) => {\n    let e = await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", r)).first();\n    return e ? await s.db.patch(e._id, {\n      pendingVbms: e.pendingVbms + b,\n      totalVotes: e.totalVotes + 1,\n      lastVoteAt: Date.now()\n    }) : await s.db.insert(\"vibeRewards\", {\n      fid: r,\n      pendingVbms: b,\n      claimedVbms: 0,\n      totalVotes: 1,\n      lastVoteAt: Date.now(),\n      lastClaimAt: void 0\n    }), { success: !0, vbmsAdded: b };\n  }, \"handler\")\n}), A = u({\n  args: { fid: i.number() },\n  handler: /* @__PURE__ */ d(async (s, { fid: r }) => await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (e) => e.eq(\"fid\", r)).first() || {\n    fid: r,\n    pendingVbms: 0,\n    claimedVbms: 0,\n    totalVotes: 0\n  }, \"handler\")\n}), v = l({\n  args: {\n    fid: i.number(),\n    claimerAddress: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { fid: r, claimerAddress: a }) => {\n    let e = await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (o) => o.eq(\"fid\", r)).first();\n    if (!e || e.pendingVbms === 0)\n      return { success: !1, error: \"No pending rewards\" };\n    let n = e.pendingVbms;\n    return await s.db.patch(e._id, {\n      pendingVbms: 0,\n      claimedVbms: e.claimedVbms + n,\n      lastClaimAt: Date.now()\n    }), {\n      success: !0,\n      claimAmount: n,\n      claimerAddress: a,\n      fid: r\n    };\n  }, \"handler\")\n}), q = u({\n  args: {},\n  handler: /* @__PURE__ */ d(async (s) => {\n    let r = await s.db.query(\"vibeRewards\").collect(), a = r.reduce((o, t) => o + t.claimedVbms + t.pendingVbms, 0), e = r.reduce((o, t) => o + t.pendingVbms, 0), n = r.reduce((o, t) => o + t.claimedVbms, 0);\n    return { total: a, pending: e, claimed: n };\n  }, \"handler\")\n});\nfunction V() {\n  let s = crypto.randomUUID().replace(/-/g, \"\"), r = crypto.randomUUID().replace(/-/g, \"\");\n  return `0x${s}${r}`.substring(0, 66);\n}\nd(V, \"generateNonce\");\nvar x = g({\n  args: {\n    fid: i.number(),\n    claimerAddress: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { fid: r, claimerAddress: a }) => {\n    let e = await s.runMutation(m.vibeRewards.prepareClaimInternal, {\n      fid: r,\n      claimerAddress: a\n    });\n    if (!e.success)\n      return { success: !1, error: e.error };\n    let n = V(), o = \"https://vibemostwanted.xyz\";\n    console.log(`[VibeRewards] Signing claim: ${a}, amount: ${e.claimAmount}, nonce: ${n}`);\n    try {\n      let t = await fetch(`${o}/api/vbms/sign-claim`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          address: a,\n          amount: e.claimAmount,\n          nonce: n\n        })\n      });\n      if (!t.ok) {\n        let p = await t.text();\n        return console.error(`[VibeRewards] Sign API error: ${p}`), await s.runMutation(m.vibeRewards.restoreRewardsOnFailure, {\n          fid: r,\n          amount: e.claimAmount\n        }), { success: !1, error: `Sign failed: ${t.status}` };\n      }\n      let w = await t.json();\n      return console.log(`[VibeRewards] Got signature: ${w.signature?.slice(0, 20)}...`), {\n        success: !0,\n        amount: e.claimAmount,\n        nonce: n,\n        signature: w.signature\n      };\n    } catch (t) {\n      return console.error(\"[VibeRewards] Error:\", t), await s.runMutation(m.vibeRewards.restoreRewardsOnFailure, {\n        fid: r,\n        amount: e.claimAmount\n      }), { success: !1, error: t.message };\n    }\n  }, \"handler\")\n}), I = c({\n  args: {\n    fid: i.number(),\n    claimerAddress: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { fid: r, claimerAddress: a }) => {\n    let e = await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (o) => o.eq(\"fid\", r)).first();\n    if (!e || e.pendingVbms === 0)\n      return { success: !1, error: \"No pending rewards\", claimAmount: 0 };\n    let n = e.pendingVbms;\n    return await s.db.patch(e._id, {\n      pendingVbms: 0,\n      claimedVbms: e.claimedVbms + n,\n      lastClaimAt: Date.now()\n    }), { success: !0, claimAmount: n };\n  }, \"handler\")\n}), _ = c({\n  args: {\n    fid: i.number(),\n    amount: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (s, { fid: r, amount: a }) => {\n    let e = await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", r)).first();\n    e && (await s.db.patch(e._id, {\n      pendingVbms: e.pendingVbms + a,\n      claimedVbms: Math.max(0, e.claimedVbms - a)\n    }), console.log(`[VibeRewards] Restored ${a} VBMS to FID ${r}`));\n  }, \"handler\")\n}), $ = c({\n  args: {\n    fid: i.number(),\n    amount: i.number()\n  },\n  handler: /* @__PURE__ */ d(async (s, { fid: r, amount: a }) => {\n    let e = await s.db.query(\"vibeRewards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", r)).first();\n    return e ? (await s.db.patch(e._id, {\n      pendingVbms: e.pendingVbms + a,\n      claimedVbms: Math.max(0, e.claimedVbms - a)\n    }), console.log(`[VibeRewards] TX cancelled - Restored ${a} VBMS to FID ${r}`), { success: !0, restoredAmount: a }) : { success: !1, error: \"No rewards record found\" };\n  }, \"handler\")\n});\nexport {\n  v as claimRewards,\n  A as getRewards,\n  q as getTotalDistributed,\n  I as prepareClaimInternal,\n  x as prepareVibeRewardsClaim,\n  h as recordVote,\n  $ as restoreClaimOnTxFailure,\n  _ as restoreRewardsOnFailure\n};\n//# sourceMappingURL=vibeRewards.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/vibeRewards.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"VBMS_PER_VOTE\", \"recordVote\", \"mutation\", \"v\", \"__name\", \"ctx\", \"cardFid\", \"voterFid\", \"existing\", \"q\", \"getRewards\", \"query\", \"fid\", \"claimRewards\", \"claimerAddress\", \"rewards\", \"claimAmount\", \"getTotalDistributed\", \"allRewards\", \"total\", \"sum\", \"r\", \"pending\", \"claimed\", \"generateNonce\", \"uuid1\", \"uuid2\", \"prepareVibeRewardsClaim\", \"action\", \"result\", \"internal\", \"nonce\", \"apiUrl\", \"response\", \"errorText\", \"data\", \"error\", \"prepareClaimInternal\", \"internalMutation\", \"restoreRewardsOnFailure\", \"amount\", \"restoreClaimOnTxFailure\"]\n}\n"},{"path":"voiceChat.js","source":"import {\n  a as p,\n  c as d,\n  d as g\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as n\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as s\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/voiceChat.ts\nvar m = d({\n  args: {\n    roomId: n.string(),\n    sender: n.string(),\n    recipient: n.string(),\n    type: n.union(n.literal(\"offer\"), n.literal(\"answer\"), n.literal(\"ice-candidate\")),\n    data: n.any()\n    // SDP or ICE candidate\n  },\n  handler: /* @__PURE__ */ s(async (o, { roomId: a, sender: r, recipient: e, type: t, data: i }) => {\n    let c = r.toLowerCase(), l = e.toLowerCase();\n    return await o.db.insert(\"voiceSignaling\", {\n      roomId: a,\n      sender: c,\n      recipient: l,\n      type: t,\n      data: i,\n      timestamp: Date.now(),\n      processed: !1\n    }), console.log(`[VoiceChat] ${t} sent from ${c} to ${l} in room ${a}`), { success: !0 };\n  }, \"handler\")\n}), f = p({\n  args: {\n    recipient: n.string(),\n    roomId: n.string()\n  },\n  handler: /* @__PURE__ */ s(async (o, { recipient: a, roomId: r }) => {\n    let e = a.toLowerCase();\n    return await o.db.query(\"voiceSignaling\").withIndex(\n      \"by_recipient\",\n      (i) => i.eq(\"recipient\", e).eq(\"processed\", !1)\n    ).filter((i) => i.eq(i.field(\"roomId\"), r)).order(\"asc\").collect();\n  }, \"handler\")\n}), y = d({\n  args: {\n    signalIds: n.array(n.id(\"voiceSignaling\"))\n  },\n  handler: /* @__PURE__ */ s(async (o, { signalIds: a }) => {\n    let r = 0;\n    for (let e of a)\n      try {\n        await o.db.patch(e, { processed: !0 }), r++;\n      } catch (t) {\n        console.error(`[VoiceChat] Failed to mark signal ${e} as processed:`, t);\n      }\n    return console.log(`[VoiceChat] Marked ${r}/${a.length} signals as processed`), { success: !0, processed: r };\n  }, \"handler\")\n}), w = g({\n  args: {},\n  handler: /* @__PURE__ */ s(async (o) => {\n    let a = Date.now() - 3e5, r = await o.db.query(\"voiceSignaling\").filter((t) => t.lt(t.field(\"timestamp\"), a)).collect(), e = 0;\n    for (let t of r)\n      try {\n        await o.db.delete(t._id), e++;\n      } catch (i) {\n        console.error(`[VoiceChat] Failed to delete signal ${t._id}:`, i);\n      }\n    return console.log(`[VoiceChat] Cleaned up ${e}/${r.length} old signals`), { deleted: e };\n  }, \"handler\")\n}), C = d({\n  args: {\n    roomId: n.string(),\n    address: n.string(),\n    username: n.string()\n  },\n  handler: /* @__PURE__ */ s(async (o, { roomId: a, address: r, username: e }) => {\n    let t = r.toLowerCase(), i = e.toLowerCase();\n    if (t.startsWith(\"cpu_\") || t.startsWith(\"mecha_\") || i.startsWith(\"mecha \") || i.startsWith(\"cpu \"))\n      return console.log(`[VoiceChat] BLOCKED: CPU/Mecha ${e} cannot join voice`), { success: !1, blocked: !0, reason: \"CPUs cannot join voice\" };\n    let c = await o.db.query(\"voiceParticipants\").filter((l) => l.eq(l.field(\"address\"), t)).collect();\n    for (let l of c)\n      await o.db.delete(l._id), console.log(`[VoiceChat] Cleaned stale entry for ${t} in room ${l.roomId}`);\n    return await o.db.insert(\"voiceParticipants\", {\n      roomId: a,\n      address: t,\n      username: e,\n      joinedAt: Date.now()\n    }), console.log(`[VoiceChat] ${e} joined voice in room ${a}`), { success: !0 };\n  }, \"handler\")\n}), $ = d({\n  args: {\n    roomId: n.string(),\n    address: n.string()\n  },\n  handler: /* @__PURE__ */ s(async (o, { roomId: a, address: r }) => {\n    let e = r.toLowerCase(), t = await o.db.query(\"voiceParticipants\").filter((c) => c.eq(c.field(\"address\"), e)).collect(), i = 0;\n    for (let c of t)\n      await o.db.delete(c._id), i++;\n    return i > 0 && console.log(`[VoiceChat] ${e} left voice (cleaned ${i} entries)`), { success: !0, deleted: i };\n  }, \"handler\")\n}), b = p({\n  args: {\n    roomId: n.string()\n  },\n  handler: /* @__PURE__ */ s(async (o, { roomId: a }) => (await o.db.query(\"voiceParticipants\").withIndex(\"by_room\", (e) => e.eq(\"roomId\", a)).collect()).map((e) => ({\n    address: e.address,\n    username: e.username,\n    joinedAt: e.joinedAt\n  })), \"handler\")\n}), v = d({\n  args: {\n    roomId: n.string()\n  },\n  handler: /* @__PURE__ */ s(async (o, { roomId: a }) => {\n    let r = await o.db.query(\"voiceParticipants\").withIndex(\"by_room\", (t) => t.eq(\"roomId\", a)).collect(), e = 0;\n    for (let t of r)\n      try {\n        await o.db.delete(t._id), e++;\n      } catch (i) {\n        console.error(`[VoiceChat] Failed to delete participant ${t._id}:`, i);\n      }\n    return console.log(`[VoiceChat] Cleaned up ${e}/${r.length} voice participants for room ${a}`), { deleted: e };\n  }, \"handler\")\n}), V = d({\n  args: {},\n  handler: /* @__PURE__ */ s(async (o) => {\n    let a = Date.now() - 18e5, r = await o.db.query(\"voiceParticipants\").filter((t) => t.lt(t.field(\"joinedAt\"), a)).collect(), e = 0;\n    for (let t of r)\n      try {\n        await o.db.delete(t._id), e++;\n      } catch (i) {\n        console.error(`[VoiceChat] Failed to delete stale participant ${t._id}:`, i);\n      }\n    return console.log(`[VoiceChat] Cleaned up ${e}/${r.length} stale voice participants`), { deleted: e };\n  }, \"handler\")\n}), P = g({\n  args: {},\n  handler: /* @__PURE__ */ s(async (o) => {\n    let a = await o.db.query(\"voiceParticipants\").collect(), r = 0;\n    for (let e of a)\n      try {\n        await o.db.delete(e._id), r++;\n      } catch (t) {\n        console.error(`[VoiceChat] Failed to delete participant ${e._id}:`, t);\n      }\n    return console.log(`[VoiceChat] Emergency cleanup: removed ${r}/${a.length} voice participants`), { deleted: r };\n  }, \"handler\")\n});\nexport {\n  P as cleanupAllVoiceParticipants,\n  w as cleanupOldSignals,\n  v as cleanupRoomVoice,\n  V as cleanupStaleVoiceParticipants,\n  f as getSignals,\n  b as getVoiceParticipants,\n  C as joinVoiceChannel,\n  $ as leaveVoiceChannel,\n  y as markSignalsProcessed,\n  m as sendSignal\n};\n//# sourceMappingURL=voiceChat.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/voiceChat.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"sendSignal\", \"mutation\", \"v\", \"__name\", \"ctx\", \"roomId\", \"sender\", \"recipient\", \"type\", \"data\", \"normalizedSender\", \"normalizedRecipient\", \"getSignals\", \"query\", \"q\", \"markSignalsProcessed\", \"signalIds\", \"processed\", \"id\", \"err\", \"cleanupOldSignals\", \"internalMutation\", \"fiveMinutesAgo\", \"oldSignals\", \"deleted\", \"signal\", \"joinVoiceChannel\", \"address\", \"username\", \"normalizedAddress\", \"normalizedUsername\", \"staleEntries\", \"entry\", \"leaveVoiceChannel\", \"allEntries\", \"getVoiceParticipants\", \"p\", \"cleanupRoomVoice\", \"participants\", \"cleanupStaleVoiceParticipants\", \"thirtyMinutesAgo\", \"staleParticipants\", \"cleanupAllVoiceParticipants\", \"allParticipants\"]\n}\n"},{"path":"welcomePack.js","source":"import {\n  a as u,\n  c as m,\n  d as k\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as p\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as i\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/welcomePack.ts\nvar P = u({\n  args: { address: p.string() },\n  handler: /* @__PURE__ */ i(async (e, { address: c }) => {\n    let s = c.toLowerCase(), r = await e.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", s)).first();\n    return r && r.hasReceivedWelcomePack || !1;\n  }, \"handler\")\n}), y = m({\n  args: { address: p.string() },\n  handler: /* @__PURE__ */ i(async (e, { address: c }) => {\n    let s = c.toLowerCase(), r = await e.db.query(\"profiles\").withIndex(\"by_address\", (t) => t.eq(\"address\", s)).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    if (r.hasReceivedWelcomePack)\n      throw new Error(\"Welcome pack already claimed\");\n    let d = await e.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (t) => t.eq(\"address\", s).eq(\"packType\", \"basic\")).first();\n    return d ? await e.db.patch(d._id, {\n      unopened: d.unopened + 1\n    }) : await e.db.insert(\"cardPacks\", {\n      address: s,\n      packType: \"basic\",\n      unopened: 1,\n      sourceId: \"welcome_pack\",\n      earnedAt: Date.now()\n    }), await e.db.patch(r._id, {\n      hasReceivedWelcomePack: !0\n    }), {\n      success: !0,\n      message: \"Welcome pack claimed! You received 1 Basic Pack!\"\n    };\n  }, \"handler\")\n}), b = k({\n  args: {},\n  handler: /* @__PURE__ */ i(async (e) => {\n    let c = await e.db.query(\"profiles\").collect(), s = c.filter((a) => !a.hasReceivedWelcomePack);\n    if (s.length === 0)\n      return {\n        success: !0,\n        packsGiven: 0,\n        totalProfiles: c.length,\n        message: \"All users already have welcome packs!\"\n      };\n    let r = s.map((a) => a.address.toLowerCase()), d = r.map(\n      (a) => e.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (o) => o.eq(\"address\", a).eq(\"packType\", \"basic\")).first()\n    ), t = await Promise.all(d), f = new Map(\n      t.map((a, o) => [r[o], a])\n    ), n = 0;\n    for (let a of s) {\n      let o = a.address.toLowerCase(), l = f.get(o);\n      l ? await e.db.patch(l._id, {\n        unopened: l.unopened + 1\n      }) : await e.db.insert(\"cardPacks\", {\n        address: o,\n        packType: \"basic\",\n        unopened: 1,\n        sourceId: \"welcome_pack_retroactive\",\n        earnedAt: Date.now()\n      }), await e.db.patch(a._id, {\n        hasReceivedWelcomePack: !0\n      }), n++;\n    }\n    return {\n      success: !0,\n      packsGiven: n,\n      totalProfiles: c.length,\n      message: `Welcome packs distributed to ${n} users!`\n    };\n  }, \"handler\")\n});\nexport {\n  y as claimWelcomePack,\n  b as giveWelcomePackToAll,\n  P as hasReceivedWelcomePack\n};\n//# sourceMappingURL=welcomePack.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/welcomePack.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"hasReceivedWelcomePack\", \"query\", \"v\", \"__name\", \"ctx\", \"address\", \"normalizedAddress\", \"profile\", \"q\", \"claimWelcomePack\", \"mutation\", \"existingPack\", \"giveWelcomePackToAll\", \"internalMutation\", \"allProfiles\", \"profilesToUpdate\", \"p\", \"addresses\", \"packPromises\", \"addr\", \"existingPacks\", \"packMap\", \"pack\", \"idx\", \"packsGiven\"]\n}\n"},{"path":"_deps/GNMXU3CQ.js","source":"import {\n  $,\n  $a,\n  $b,\n  A,\n  Aa,\n  Ab,\n  Ac,\n  B,\n  Ba,\n  Bb,\n  Bc,\n  C,\n  Ca,\n  Cb,\n  Cc,\n  D,\n  Da,\n  Db,\n  Dc,\n  E,\n  Ea,\n  Eb,\n  Ec,\n  F,\n  Fa,\n  Fb,\n  Fc,\n  G,\n  Ga,\n  Gb,\n  H,\n  Ha,\n  Hb,\n  I,\n  Ia,\n  Ib,\n  J,\n  Ja,\n  Jb,\n  K,\n  Ka,\n  Kb,\n  L,\n  La,\n  Lb,\n  M,\n  Ma,\n  Mb,\n  N,\n  Na,\n  Nb,\n  O,\n  Oa,\n  Ob,\n  P,\n  Pa,\n  Pb,\n  Q,\n  Qa,\n  Qb,\n  R,\n  Ra,\n  Rb,\n  S,\n  Sa,\n  Sb,\n  T,\n  Ta,\n  Tb,\n  U,\n  Ua,\n  Ub,\n  V,\n  Va,\n  Vb,\n  W,\n  Wa,\n  Wb,\n  X,\n  Xa,\n  Xb,\n  Y,\n  Ya,\n  Yb,\n  Z,\n  Za,\n  Zb,\n  _,\n  _a,\n  _b,\n  a,\n  aa,\n  ab,\n  ac,\n  b,\n  ba,\n  bb,\n  bc,\n  c,\n  ca,\n  cb,\n  cc,\n  d,\n  da,\n  db,\n  dc,\n  e,\n  ea,\n  eb,\n  ec,\n  f,\n  fa,\n  fb,\n  fc,\n  g,\n  ga,\n  gb,\n  gc,\n  h,\n  ha,\n  hb,\n  hc,\n  i,\n  ia,\n  ib,\n  ic,\n  j,\n  ja,\n  jb,\n  jc,\n  k,\n  ka,\n  kb,\n  kc,\n  l,\n  la,\n  lb,\n  lc,\n  m,\n  ma,\n  mb,\n  mc,\n  n,\n  na,\n  nb,\n  nc,\n  o,\n  oa,\n  ob,\n  oc,\n  p,\n  pa,\n  pb,\n  pc,\n  q,\n  qa,\n  qb,\n  qc,\n  r,\n  ra,\n  rb,\n  rc,\n  s,\n  sa,\n  sb,\n  sc,\n  t,\n  ta,\n  tb,\n  tc,\n  u,\n  ua,\n  ub,\n  uc,\n  v,\n  va,\n  vb,\n  vc,\n  w,\n  wa,\n  wb,\n  wc,\n  x,\n  xa,\n  xb,\n  xc,\n  y,\n  ya,\n  yb,\n  yc,\n  z,\n  za,\n  zb,\n  zc\n} from \"./OXIBDITK.js\";\nimport \"./5B5TEMMX.js\";\nexport {\n  eb as AbiCoder,\n  Kb as AbstractProvider,\n  Lb as AbstractSigner,\n  Sb as AlchemyProvider,\n  Rb as AnkrProvider,\n  yb as BaseContract,\n  lc as BaseWallet,\n  ob as Block,\n  ic as BlockscoutProvider,\n  hc as BrowserProvider,\n  Tb as ChainstackProvider,\n  Ub as CloudflareProvider,\n  ab as ConstructorFragment,\n  zb as Contract,\n  xb as ContractEventPayload,\n  Ab as ContractFactory,\n  ub as ContractTransactionReceipt,\n  vb as ContractTransactionResponse,\n  wb as ContractUnknownEventPayload,\n  Fb as EnsPlugin,\n  Cb as EnsResolver,\n  jb as ErrorDescription,\n  _a as ErrorFragment,\n  ra as EtherSymbol,\n  Vb as EtherscanPlugin,\n  Wb as EtherscanProvider,\n  $a as EventFragment,\n  sb as EventLog,\n  L as EventPayload,\n  bb as FallbackFragment,\n  ec as FallbackProvider,\n  mb as FeeData,\n  Gb as FeeDataNetworkPlugin,\n  Q as FetchCancelSignal,\n  R as FetchRequest,\n  S as FetchResponse,\n  Hb as FetchUrlFeeDataNetworkPlugin,\n  T as FixedNumber,\n  Ya as Fragment,\n  cb as FunctionFragment,\n  Eb as GasCostPlugin,\n  xc as HDNodeVoidWallet,\n  wc as HDNodeWallet,\n  kb as Indexed,\n  cc as InfuraProvider,\n  bc as InfuraWebSocketProvider,\n  lb as Interface,\n  kc as IpcSocketProvider,\n  Pb as JsonRpcApiProvider,\n  Qb as JsonRpcProvider,\n  Ob as JsonRpcSigner,\n  oc as LangEn,\n  pb as Log,\n  hb as LogDescription,\n  qa as MaxInt256,\n  oa as MaxUint256,\n  sa as MessagePrefix,\n  pa as MinInt256,\n  pc as Mnemonic,\n  Bb as MulticoinProviderPlugin,\n  ma as N,\n  Za as NamedFragment,\n  Ib as Network,\n  Db as NetworkPlugin,\n  gc as NonceManager,\n  Xa as ParamType,\n  jc as PocketProvider,\n  dc as QuickNodeProvider,\n  $ as Result,\n  ta as Signature,\n  ua as SigningKey,\n  Yb as SocketBlockSubscriber,\n  _b as SocketEventSubscriber,\n  Zb as SocketPendingSubscriber,\n  $b as SocketProvider,\n  Xb as SocketSubscriber,\n  db as StructFragment,\n  Ia as Transaction,\n  ib as TransactionDescription,\n  qb as TransactionReceipt,\n  rb as TransactionResponse,\n  Da as Typed,\n  Va as TypedDataEncoder,\n  tb as UndecodedEventLog,\n  Jb as UnmanagedSubscriber,\n  M as Utf8ErrorFuncs,\n  Mb as VoidSigner,\n  Cc as Wallet,\n  ac as WebSocketProvider,\n  na as WeiPerEther,\n  mc as Wordlist,\n  nc as WordlistOwl,\n  Dc as WordlistOwlA,\n  ka as ZeroAddress,\n  la as ZeroHash,\n  Ea as accessListify,\n  g as assert,\n  h as assertArgument,\n  i as assertArgumentCount,\n  j as assertNormalize,\n  k as assertPrivate,\n  Fa as authorizationify,\n  aa as checkResultErrors,\n  Ga as computeAddress,\n  ba as computeHmac,\n  q as concat,\n  nb as copyRequest,\n  r as dataLength,\n  s as dataSlice,\n  I as decodeBase58,\n  J as decodeBase64,\n  gb as decodeBytes32String,\n  U as decodeRlp,\n  Bc as decryptCrowdsaleJson,\n  sc as decryptKeystoreJson,\n  rc as decryptKeystoreJsonSync,\n  vc as defaultPath,\n  c as defineProperties,\n  Pa as dnsEncode,\n  H as encodeBase58,\n  K as encodeBase64,\n  fb as encodeBytes32String,\n  V as encodeRlp,\n  uc as encryptKeystoreJson,\n  tc as encryptKeystoreJsonSync,\n  Ma as ensNormalize,\n  Fc as ethers,\n  Y as formatEther,\n  W as formatUnits,\n  w as fromTwos,\n  yc as getAccountPath,\n  wa as getAddress,\n  z as getBigInt,\n  l as getBytes,\n  m as getBytesCopy,\n  za as getCreate2Address,\n  ya as getCreateAddress,\n  fc as getDefaultProvider,\n  xa as getIcapAddress,\n  zc as getIndexedAccountPath,\n  C as getNumber,\n  A as getUint,\n  Ja as hashAuthorization,\n  Qa as hashMessage,\n  p as hexlify,\n  La as id,\n  Ba as isAddress,\n  Aa as isAddressable,\n  o as isBytesLike,\n  e as isCallException,\n  Ac as isCrowdsaleJson,\n  d as isError,\n  n as isHexString,\n  qc as isKeystoreJson,\n  Na as isValidName,\n  ca as keccak256,\n  va as lock,\n  f as makeError,\n  y as mask,\n  Oa as namehash,\n  Z as parseEther,\n  X as parseUnits,\n  ea as pbkdf2,\n  fa as randomBytes,\n  Ha as recoverAddress,\n  Ca as resolveAddress,\n  b as resolveProperties,\n  da as ripemd160,\n  ga as scrypt,\n  ha as scryptSync,\n  ia as sha256,\n  ja as sha512,\n  Nb as showThrottleMessage,\n  Sa as solidityPacked,\n  Ta as solidityPackedKeccak256,\n  Ua as solidityPackedSha256,\n  t as stripZerosLeft,\n  F as toBeArray,\n  E as toBeHex,\n  B as toBigInt,\n  D as toNumber,\n  G as toQuantity,\n  x as toTwos,\n  N as toUtf8Bytes,\n  P as toUtf8CodePoints,\n  O as toUtf8String,\n  _ as uuidV4,\n  Ka as verifyAuthorization,\n  Ra as verifyMessage,\n  Wa as verifyTypedData,\n  a as version,\n  Ec as wordlists,\n  v as zeroPadBytes,\n  u as zeroPadValue\n};\n//# sourceMappingURL=GNMXU3CQ.js.map\n","environment":"isolate"},{"path":"rooms.js","source":"import {\n  a as g,\n  c,\n  d as w\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as n\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as i\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/rooms.ts\nvar I = g({\n  args: { code: n.string() },\n  handler: /* @__PURE__ */ i(async (t, { code: r }) => await t.db.query(\"rooms\").withIndex(\"by_room_id\", (e) => e.eq(\"roomId\", r)).first(), \"handler\")\n}), k = g({\n  args: { limit: n.optional(n.number()) },\n  handler: /* @__PURE__ */ i(async (t, { limit: r = 20 }) => await t.db.query(\"rooms\").withIndex(\"by_status\", (e) => e.eq(\"status\", \"waiting\")).order(\"desc\").take(r), \"handler\")\n}), C = g({\n  args: { playerAddress: n.string() },\n  handler: /* @__PURE__ */ i(async (t, { playerAddress: r }) => {\n    let o = r.toLowerCase();\n    return await t.db.query(\"matchmaking\").withIndex(\"by_player\", (s) => s.eq(\"playerAddress\", o)).first();\n  }, \"handler\")\n}), R = g({\n  args: { playerAddress: n.string() },\n  handler: /* @__PURE__ */ i(async (t, { playerAddress: r }) => {\n    let o = r.toLowerCase(), e = await t.db.query(\"rooms\").filter((a) => a.eq(a.field(\"hostAddress\"), o)).filter((a) => a.neq(a.field(\"status\"), \"finished\")).first();\n    return e || await t.db.query(\"rooms\").filter((a) => a.eq(a.field(\"guestAddress\"), o)).filter((a) => a.neq(a.field(\"status\"), \"finished\")).first();\n  }, \"handler\")\n}), D = c({\n  args: {\n    hostAddress: n.string(),\n    hostUsername: n.string(),\n    mode: n.optional(n.union(n.literal(\"ranked\"), n.literal(\"casual\")))\n  },\n  handler: /* @__PURE__ */ i(async (t, { hostAddress: r, hostUsername: o, mode: e = \"ranked\" }) => {\n    let s, a = 0, u = 10;\n    for (; a < u; ) {\n      if (s = crypto.randomUUID().replace(/-/g, \"\").substring(0, 6).toUpperCase(), !await t.db.query(\"rooms\").withIndex(\"by_room_id\", (m) => m.eq(\"roomId\", s)).first()) {\n        let m = Date.now(), h = await t.db.insert(\"rooms\", {\n          roomId: s,\n          status: \"waiting\",\n          mode: e,\n          hostAddress: r.toLowerCase(),\n          hostUsername: o,\n          createdAt: m\n        });\n        return console.log(`\\u2705 Room created in Convex: ${s} (${e})`), s;\n      }\n      a++;\n    }\n    throw new Error(\"Failed to generate unique room code after 10 attempts\");\n  }, \"handler\")\n}), x = c({\n  args: {\n    code: n.string(),\n    guestAddress: n.string(),\n    guestUsername: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { code: r, guestAddress: o, guestUsername: e }) => {\n    let s = await t.db.query(\"rooms\").withIndex(\"by_room_id\", (a) => a.eq(\"roomId\", r)).first();\n    if (!s)\n      throw new Error(\"Sala n\\xE3o encontrada\");\n    if (s.guestAddress)\n      throw new Error(\"Sala j\\xE1 est\\xE1 cheia\");\n    if (s.hostAddress === o.toLowerCase())\n      throw new Error(\"Voc\\xEA n\\xE3o pode entrar na pr\\xF3pria sala\");\n    return await t.db.patch(s._id, {\n      guestAddress: o.toLowerCase(),\n      guestUsername: e,\n      status: \"ready\"\n    }), console.log(\"\\u2705 Guest joined room:\", r), !0;\n  }, \"handler\")\n}), U = c({\n  args: {\n    code: n.string(),\n    playerAddress: n.string(),\n    cards: n.array(n.any()),\n    power: n.number()\n  },\n  handler: /* @__PURE__ */ i(async (t, { code: r, playerAddress: o, cards: e, power: s }) => {\n    let a = await t.db.query(\"rooms\").withIndex(\"by_room_id\", (m) => m.eq(\"roomId\", r)).first();\n    if (!a)\n      throw new Error(\"Sala n\\xE3o encontrada\");\n    let u = o.toLowerCase();\n    a.hostAddress === u ? await t.db.patch(a._id, {\n      hostCards: e,\n      hostPower: s\n    }) : await t.db.patch(a._id, {\n      guestCards: e,\n      guestPower: s\n    });\n    let l = await t.db.get(a._id);\n    l && l.hostCards && l.guestCards && l.status === \"ready\" && await t.db.patch(a._id, {\n      status: \"playing\",\n      startedAt: Date.now()\n    }), console.log(\"\\u2705 Cards updated for room:\", r);\n  }, \"handler\")\n}), L = c({\n  args: {\n    code: n.string(),\n    winnerId: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { code: r, winnerId: o }) => {\n    let e = await t.db.query(\"rooms\").withIndex(\"by_room_id\", (s) => s.eq(\"roomId\", r)).first();\n    if (!e)\n      throw new Error(\"Sala n\\xE3o encontrada\");\n    await t.db.patch(e._id, {\n      status: \"finished\",\n      winnerId: o,\n      finishedAt: Date.now()\n    }), console.log(\"\\u2705 Room finished:\", r, \"winner:\", o);\n  }, \"handler\")\n}), M = c({\n  args: {\n    code: n.string(),\n    playerAddress: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { code: r, playerAddress: o }) => {\n    let e = await t.db.query(\"rooms\").withIndex(\"by_room_id\", (a) => a.eq(\"roomId\", r)).first();\n    if (!e)\n      return;\n    let s = o.toLowerCase();\n    e.hostAddress === s ? (await t.db.delete(e._id), console.log(\"\\u2705 Room deleted (host left):\", r)) : e.guestAddress === s && (await t.db.patch(e._id, {\n      guestAddress: void 0,\n      guestUsername: void 0,\n      guestCards: void 0,\n      guestPower: void 0,\n      status: \"waiting\"\n    }), console.log(\"\\u2705 Guest removed from room:\", r));\n  }, \"handler\")\n}), E = w({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => {\n    let r = Date.now() - 3e5, o = await t.db.query(\"rooms\").filter((s) => s.lt(s.field(\"createdAt\"), r)).collect(), e = 0;\n    for (let s of o)\n      await t.db.delete(s._id), e++;\n    return e > 0 && console.log(`\\u2705 Cleaned up ${e} old rooms`), e;\n  }, \"handler\")\n}), z = c({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => {\n    let r = Date.now() - 3e5, o = await t.db.query(\"rooms\").filter((s) => s.lt(s.field(\"createdAt\"), r)).collect(), e = 0;\n    for (let s of o)\n      await t.db.delete(s._id), e++;\n    return e > 0 && console.log(`\\u2705 Cleaned up ${e} old rooms (public)`), e;\n  }, \"handler\")\n}), P = c({\n  args: {\n    playerAddress: n.string(),\n    playerUsername: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { playerAddress: r, playerUsername: o }) => {\n    let e = r.toLowerCase(), s = await t.db.query(\"matchmaking\").withIndex(\"by_player\", (a) => a.eq(\"playerAddress\", e)).first();\n    s ? await t.db.patch(s._id, {\n      createdAt: Date.now(),\n      status: \"searching\"\n    }) : await t.db.insert(\"matchmaking\", {\n      playerAddress: e,\n      playerUsername: o,\n      status: \"searching\",\n      createdAt: Date.now()\n    }), console.log(\"\\u2705 Added to matchmaking:\", e);\n  }, \"handler\")\n}), v = c({\n  args: {\n    playerAddress: n.string(),\n    playerUsername: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { playerAddress: r, playerUsername: o }) => {\n    let e = r.toLowerCase(), s = Date.now() - 30 * 1e3, a = await t.db.query(\"matchmaking\").withIndex(\"by_status\", (d) => d.eq(\"status\", \"searching\")).filter(\n      (d) => d.and(\n        d.neq(d.field(\"playerAddress\"), e),\n        d.gt(d.field(\"createdAt\"), s)\n      )\n    ).take(1);\n    if (a.length > 0) {\n      let d = a[0], l = \"\", m = 0, h = 10;\n      for (; m < h && (l = crypto.randomUUID().replace(/-/g, \"\").substring(0, 6).toUpperCase(), !!await t.db.query(\"rooms\").withIndex(\"by_room_id\", (b) => b.eq(\"roomId\", l)).first()); )\n        m++;\n      if (m >= h)\n        throw new Error(\"Failed to generate unique room code after 10 attempts\");\n      let y = Date.now();\n      await t.db.insert(\"rooms\", {\n        roomId: l,\n        status: \"ready\",\n        mode: \"ranked\",\n        // Auto-match is always ranked (costs coins, awards coins)\n        hostAddress: e,\n        hostUsername: o,\n        guestAddress: d.playerAddress,\n        guestUsername: d.playerUsername,\n        createdAt: y\n      }), await t.db.patch(d._id, {\n        status: \"matched\",\n        matchedWith: e\n      });\n      let p = await t.db.query(\"matchmaking\").withIndex(\n        \"by_player\",\n        (f) => f.eq(\"playerAddress\", e)\n      ).first();\n      return p ? await t.db.patch(p._id, {\n        status: \"matched\",\n        matchedWith: d.playerAddress\n      }) : await t.db.insert(\"matchmaking\", {\n        playerAddress: e,\n        playerUsername: o,\n        status: \"matched\",\n        matchedWith: d.playerAddress,\n        createdAt: y\n      }), console.log(\"\\u2705 Match found! Room:\", l), l;\n    }\n    let u = await t.db.query(\"matchmaking\").withIndex(\"by_player\", (d) => d.eq(\"playerAddress\", e)).first();\n    return u ? await t.db.patch(u._id, {\n      createdAt: Date.now(),\n      status: \"searching\"\n    }) : await t.db.insert(\"matchmaking\", {\n      playerAddress: e,\n      playerUsername: o,\n      status: \"searching\",\n      createdAt: Date.now()\n    }), console.log(\"\\u23F3 Added to matchmaking queue:\", e), null;\n  }, \"handler\")\n}), S = c({\n  args: {\n    playerAddress: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, { playerAddress: r }) => {\n    let o = r.toLowerCase(), e = await t.db.query(\"matchmaking\").withIndex(\"by_player\", (s) => s.eq(\"playerAddress\", o)).first();\n    e && (await t.db.patch(e._id, {\n      status: \"cancelled\"\n    }), console.log(\"\\u2705 Cancelled matchmaking:\", o));\n  }, \"handler\")\n}), $ = w({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => {\n    let r = Date.now() - 6e4, o = await t.db.query(\"matchmaking\").filter((s) => s.lt(s.field(\"createdAt\"), r)).collect(), e = 0;\n    for (let s of o)\n      await t.db.delete(s._id), e++;\n    return e > 0 && console.log(`\\u2705 Cleaned up ${e} old matchmaking entries`), e;\n  }, \"handler\")\n});\nexport {\n  P as addToMatchmaking,\n  S as cancelMatchmaking,\n  $ as cleanupMatchmaking,\n  E as cleanupOldRooms,\n  z as cleanupOldRoomsPublic,\n  D as createRoom,\n  v as findMatch,\n  L as finishRoom,\n  C as getMatchmakingStatus,\n  I as getRoom,\n  R as getRoomByPlayer,\n  k as getWaitingRooms,\n  x as joinRoom,\n  M as leaveRoom,\n  U as updateCards\n};\n//# sourceMappingURL=rooms.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/rooms.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getRoom\", \"query\", \"v\", \"__name\", \"ctx\", \"code\", \"q\", \"getWaitingRooms\", \"limit\", \"getMatchmakingStatus\", \"playerAddress\", \"normalizedAddress\", \"getRoomByPlayer\", \"asHost\", \"createRoom\", \"mutation\", \"hostAddress\", \"hostUsername\", \"mode\", \"attempts\", \"maxAttempts\", \"now\", \"roomId\", \"joinRoom\", \"guestAddress\", \"guestUsername\", \"room\", \"updateCards\", \"cards\", \"power\", \"updatedRoom\", \"finishRoom\", \"winnerId\", \"leaveRoom\", \"cleanupOldRooms\", \"internalMutation\", \"fiveMinutesAgo\", \"oldRooms\", \"deleted\", \"cleanupOldRoomsPublic\", \"addToMatchmaking\", \"playerUsername\", \"existing\", \"findMatch\", \"thirtySecondsAgo\", \"waitingPlayers\", \"opponent\", \"thisPlayerEntry\", \"cancelMatchmaking\", \"entry\", \"cleanupMatchmaking\", \"oneMinuteAgo\", \"oldEntries\"]\n}\n"},{"path":"roulette.js","source":"import {\n  b as I\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  h as A\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as h,\n  b as z,\n  c as _,\n  d as b,\n  e as x\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as l\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/roulette.ts\nfunction T() {\n  let s = crypto.randomUUID().replace(/-/g, \"\"), n = crypto.randomUUID().replace(/-/g, \"\");\n  return `0x${s}${n}`.substring(0, 66);\n}\nd(T, \"generateNonce\");\nvar g = [\n  { amount: 100, probability: 88, label: \"100 VBMS\" },\n  { amount: 500, probability: 8, label: \"500 VBMS\" },\n  { amount: 1e3, probability: 2.5, label: \"1K VBMS\" },\n  { amount: 1e4, probability: 1, label: \"10K VBMS\" },\n  { amount: 5e4, probability: 0.5, label: \"50K VBMS\" }\n];\nfunction y() {\n  let s = /* @__PURE__ */ new Date();\n  return `${s.getFullYear()}-${String(s.getMonth() + 1).padStart(2, \"0\")}-${String(s.getDate()).padStart(2, \"0\")}`;\n}\nd(y, \"getTodayKey\");\nfunction M() {\n  let s = Math.random() * 100, n = 0;\n  for (let e = 0; e < g.length; e++)\n    if (n += g[e].probability, s <= n)\n      return { amount: g[e].amount, index: e };\n  return { amount: g[0].amount, index: 0 };\n}\nd(M, \"determinePrize\");\nasync function q(s, n) {\n  let e = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", n)).first();\n  if (e) return e;\n  let t = await s.db.query(\"addressLinks\").withIndex(\"by_address\", (r) => r.eq(\"address\", n)).first();\n  return t && (e = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", t.primaryAddress)).first()), e;\n}\nd(q, \"findProfileByAddress\");\nasync function P(s, n) {\n  let e = await s.db.query(\"farcasterCards\").withIndex(\"by_address\", (t) => t.eq(\"address\", n)).first();\n  if (!e) {\n    let t = await q(s, n);\n    if (t) {\n      let r = [t.address, ...t.linkedAddresses || []];\n      for (let a of r)\n        if (e = await s.db.query(\"farcasterCards\").withIndex(\"by_address\", (i) => i.eq(\"address\", a.toLowerCase())).first(), e) break;\n    }\n  }\n  return e;\n}\nd(P, \"findVibeFidByAddress\");\nvar L = h({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = y(), t = n.toLowerCase();\n    if ((await q(s, t))?.rouletteTestMode === !0)\n      return {\n        canSpin: !0,\n        lastSpinDate: null,\n        prizes: g.map((m, f) => ({ ...m, index: f })),\n        testMode: !0\n      };\n    let c = !!await P(s, t), p = c ? 3 : 1, u = await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (m) => m.eq(\"address\", t).eq(\"date\", e)\n    ).collect(), o = u.length, w = Math.max(0, p - o);\n    return {\n      canSpin: w > 0,\n      lastSpinDate: u[u.length - 1]?.date || null,\n      prizes: g.map((m, f) => ({ ...m, index: f })),\n      testMode: !1,\n      spinsRemaining: w,\n      isVibeFidHolder: c,\n      maxSpins: p\n    };\n  }, \"handler\")\n}), R = _({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = y(), t = n.toLowerCase(), r = await q(s, t);\n    if (!(r?.rouletteTestMode === !0)) {\n      let u = !!await P(s, t), o = u ? 3 : 1;\n      if ((await s.db.query(\"rouletteSpins\").withIndex(\n        \"by_address_date\",\n        (m) => m.eq(\"address\", t).eq(\"date\", e)\n      ).collect()).length >= o)\n        return {\n          success: !1,\n          error: u ? \"Voce usou seus 3 spins VibeFID hoje\" : \"Voce ja girou hoje\",\n          prize: null,\n          prizeIndex: null\n        };\n    }\n    let { amount: i, index: c } = M();\n    return r ? (await s.db.insert(\"rouletteSpins\", {\n      address: t,\n      date: e,\n      prizeAmount: i,\n      prizeIndex: c,\n      spunAt: Date.now(),\n      claimed: !1\n      // Track if claimed\n    }), console.log(`\\u{1F3B0} Roulette: ${t} won ${i} VBMS (awaiting claim)`), {\n      success: !0,\n      error: null,\n      prize: i,\n      prizeIndex: c\n    }) : {\n      success: !1,\n      error: \"Profile not found\",\n      prize: null,\n      prizeIndex: null\n    };\n  }, \"handler\")\n}), v = h({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase();\n    return await s.db.query(\"rouletteSpins\").withIndex(\"by_address_date\", (r) => r.eq(\"address\", e)).order(\"desc\").take(10);\n  }, \"handler\")\n}), F = b({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase(), t = await s.db.query(\"rouletteSpins\").withIndex(\"by_address_date\", (r) => r.eq(\"address\", e)).collect();\n    for (let r of t)\n      await s.db.delete(r._id);\n    return console.log(`\\u{1F3B0} Admin: Reset ${t.length} spins for ${e}`), { deleted: t.length };\n  }, \"handler\")\n}), U = b({\n  args: { address: l.string(), enabled: l.boolean() },\n  handler: /* @__PURE__ */ d(async (s, { address: n, enabled: e }) => {\n    let t = n.toLowerCase(), r = await s.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", t)).first();\n    return r ? (await s.db.patch(r._id, {\n      rouletteTestMode: e\n    }), console.log(`\\u{1F3B0} Admin: Test mode ${e ? \"enabled\" : \"disabled\"} for ${t}`), { success: !0 }) : { success: !1, error: \"Profile not found\" };\n  }, \"handler\")\n}), E = x({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase(), t = await s.runQuery(I.roulette.getUnclaimedSpin, { address: e });\n    if (!t)\n      throw new Error(\"No unclaimed spin found\");\n    await s.runMutation(I.roulette.markSpinAsPending, { spinId: t._id });\n    let r = T(), i = await fetch(\"https://vibemostwanted.xyz/api/vbms/sign-roulette\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        address: e,\n        amount: t.prizeAmount,\n        nonce: r\n      })\n    });\n    if (!i.ok) {\n      let p = await i.json().catch(() => ({ error: \"Unknown error\" }));\n      throw new Error(`Failed to sign: ${p.error}`);\n    }\n    let { signature: c } = await i.json();\n    return console.log(`\\u{1F3B0} Roulette claim prepared: ${e} claiming ${t.prizeAmount} VBMS`), {\n      amount: t.prizeAmount,\n      nonce: r,\n      signature: c,\n      spinId: t._id\n    };\n  }, \"handler\")\n}), N = _({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase(), t = y(), r = await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (i) => i.eq(\"address\", e).eq(\"date\", t)\n    ).first();\n    if (!r || r.claimed)\n      throw new Error(\"No unclaimed spin found\");\n    if (r.prizeAmount >= 100)\n      throw new Error(\"Use blockchain claim for prizes >= 100\");\n    let a = await s.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", e)).first();\n    if (!a)\n      throw new Error(\"Profile not found\");\n    return await s.db.patch(a._id, {\n      coinsInbox: (a.coinsInbox || 0) + r.prizeAmount\n    }), await s.db.patch(r._id, {\n      claimed: !0,\n      claimedAt: Date.now(),\n      txHash: \"inbox\"\n      // Mark as inbox claim\n    }), await A(\n      s,\n      e,\n      \"earn\",\n      r.prizeAmount,\n      a.coinsInbox || 0,\n      (a.coinsInbox || 0) + r.prizeAmount,\n      \"roulette_small_prize\",\n      \"inbox\",\n      { spinId: r._id, prizeIndex: r.prizeIndex }\n    ), console.log(`\\u{1F3B0} Roulette small prize: ${e} received ${r.prizeAmount} VBMS to inbox`), {\n      success: !0,\n      amount: r.prizeAmount,\n      method: \"inbox\"\n    };\n  }, \"handler\")\n}), j = z({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase(), t = y(), a = (await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (i) => i.eq(\"address\", e).eq(\"date\", t)\n    ).collect()).filter((i) => !i.claimed && !i.claimPending);\n    return a.length === 0 ? null : (a.sort((i, c) => (c.spunAt || 0) - (i.spunAt || 0)), a[0]);\n  }, \"handler\")\n}), K = b({\n  args: { spinId: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { spinId: n }) => {\n    let e = await s.db.get(n);\n    if (!e)\n      throw new Error(\"Spin not found\");\n    if (e.claimed)\n      throw new Error(\"Spin already claimed\");\n    if (e.claimPending)\n      throw new Error(\"Claim already in progress\");\n    return await s.db.patch(e._id, {\n      claimPending: !0,\n      claimPendingAt: Date.now()\n    }), { success: !0 };\n  }, \"handler\")\n}), O = _({\n  args: {\n    address: l.string(),\n    amount: l.number(),\n    txHash: l.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { address: n, amount: e, txHash: t }) => {\n    let r = n.toLowerCase(), a = y(), i = await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (o) => o.eq(\"address\", r).eq(\"date\", a)\n    ).collect(), p = i.filter((o) => !o.claimed && o.prizeAmount === e).sort((o, w) => (w.spunAt || 0) - (o.spunAt || 0))[0];\n    if (!p) {\n      let o = i.filter((f) => !f.claimed);\n      if (o.length === 0)\n        throw new Error(\"No unclaimed spins found\");\n      let w = o.sort((f, C) => (C.spunAt || 0) - (f.spunAt || 0))[0];\n      await s.db.patch(w._id, {\n        claimed: !0,\n        claimedAt: Date.now(),\n        txHash: t\n      }), console.log(`\\u{1F3B0} Roulette claimed (fallback): ${r} received ${e} VBMS (tx: ${t})`), await s.db.insert(\"claimHistory\", {\n        playerAddress: r,\n        amount: e,\n        txHash: t,\n        timestamp: Date.now(),\n        type: \"roulette\"\n      });\n      let m = await s.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", r)).first();\n      return m && await A(\n        s,\n        r,\n        \"earn\",\n        e,\n        m.coins || 0,\n        (m.coins || 0) + e,\n        \"roulette_claim_fallback\",\n        t,\n        { spinId: w._id }\n      ), { success: !0, amount: e, txHash: t };\n    }\n    await s.db.patch(p._id, {\n      claimed: !0,\n      claimedAt: Date.now(),\n      txHash: t\n    }), await s.db.insert(\"claimHistory\", {\n      playerAddress: r,\n      amount: e,\n      txHash: t,\n      timestamp: Date.now(),\n      type: \"roulette\"\n    });\n    let u = await s.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", r)).first();\n    return u && await A(\n      s,\n      r,\n      \"earn\",\n      e,\n      u.coins || 0,\n      (u.coins || 0) + e,\n      \"roulette_claim\",\n      t,\n      { spinId: p._id, prizeIndex: p.prizeIndex }\n    ), console.log(`\\u{1F3B0} Roulette claimed: ${r} received ${e} VBMS (tx: ${t})`), {\n      success: !0,\n      amount: e,\n      txHash: t\n    };\n  }, \"handler\")\n}), Q = b({\n  args: {},\n  handler: /* @__PURE__ */ d(async (s) => {\n    let n = await s.db.query(\"profiles\").collect(), e = 0;\n    for (let t of n)\n      t.rouletteTestMode === !0 && (await s.db.patch(t._id, {\n        rouletteTestMode: !1\n      }), e++);\n    return console.log(`\\u{1F3B0} Disabled test mode for ${e} profiles`), { disabled: e };\n  }, \"handler\")\n}), X = b({\n  args: {},\n  handler: /* @__PURE__ */ d(async (s) => {\n    let n = await s.db.query(\"rouletteSpins\").collect(), e = 0;\n    for (let t of n)\n      await s.db.delete(t._id), e++;\n    return console.log(`\\u{1F3B0} Admin: Reset ${e} spins for all users`), { deleted: e };\n  }, \"handler\")\n}), $ = 500, S = 20, Y = h({\n  args: { address: l.string() },\n  handler: /* @__PURE__ */ d(async (s, { address: n }) => {\n    let e = n.toLowerCase(), t = y(), a = (await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (c) => c.eq(\"address\", e).eq(\"date\", t)\n    ).collect()).filter((c) => c.isPaidSpin === !0).length;\n    return {\n      canBuy: a < S,\n      paidSpinsToday: a,\n      maxPaidSpins: S,\n      remaining: S - a,\n      cost: $\n    };\n  }, \"handler\")\n}), J = _({\n  args: {\n    address: l.string(),\n    txHash: l.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { address: n, txHash: e }) => {\n    let t = n.toLowerCase(), r = y();\n    if ((await s.db.query(\"rouletteSpins\").withIndex(\n      \"by_address_date\",\n      (o) => o.eq(\"address\", t).eq(\"date\", r)\n    ).collect()).filter((o) => o.isPaidSpin === !0).length >= S)\n      return {\n        success: !1,\n        error: `Daily limit reached (${S} paid spins)`\n      };\n    if (await s.db.query(\"rouletteSpins\").filter((o) => o.eq(o.field(\"paidTxHash\"), e)).first())\n      return {\n        success: !1,\n        error: \"Transaction already used\"\n      };\n    let { amount: p, index: u } = M();\n    return await s.db.insert(\"rouletteSpins\", {\n      address: t,\n      date: r,\n      prizeAmount: p,\n      prizeIndex: u,\n      spunAt: Date.now(),\n      claimed: !1,\n      isPaidSpin: !0,\n      paidTxHash: e\n    }), console.log(`\\u{1F3B0} Paid Spin (TX): ${t} paid 500 VBMS, won ${p} VBMS (tx: ${e})`), {\n      success: !0,\n      prize: p,\n      prizeIndex: u\n    };\n  }, \"handler\")\n}), Z = h({\n  args: {},\n  handler: /* @__PURE__ */ d(async () => ({\n    cost: $,\n    maxPerDay: S\n  }), \"handler\")\n});\nexport {\n  X as adminResetAllSpins,\n  F as adminResetSpins,\n  U as adminSetTestMode,\n  Y as canBuyPaidSpin,\n  L as canSpin,\n  N as claimSmallPrize,\n  Q as disableAllTestMode,\n  Z as getPaidSpinCost,\n  v as getSpinHistory,\n  j as getUnclaimedSpin,\n  K as markSpinAsPending,\n  E as prepareRouletteClaim,\n  J as recordPaidSpin,\n  O as recordRouletteClaim,\n  R as spin\n};\n//# sourceMappingURL=roulette.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/roulette.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"generateNonce\", \"uuid1\", \"uuid2\", \"__name\", \"PRIZES\", \"getTodayKey\", \"now\", \"determinePrize\", \"random\", \"cumulative\", \"i\", \"findProfileByAddress\", \"ctx\", \"normalizedAddress\", \"profile\", \"q\", \"link\", \"findVibeFidByAddress\", \"vibeFidCard\", \"addressesToCheck\", \"addr\", \"canSpin\", \"query\", \"v\", \"address\", \"today\", \"p\", \"isVibeFidHolder\", \"maxSpins\", \"spins\", \"spinsUsed\", \"spinsRemaining\", \"spin\", \"mutation\", \"amount\", \"index\", \"getSpinHistory\", \"adminResetSpins\", \"internalMutation\", \"adminSetTestMode\", \"enabled\", \"prepareRouletteClaim\", \"action\", \"unclaimed\", \"internal\", \"nonce\", \"response\", \"errorData\", \"signature\", \"claimSmallPrize\", \"createAuditLog\", \"getUnclaimedSpin\", \"internalQuery\", \"unclaimedSpins\", \"s\", \"a\", \"b\", \"markSpinAsPending\", \"spinId\", \"recordRouletteClaim\", \"txHash\", \"anyUnclaimed\", \"fallbackSpin\", \"profileFallback\", \"disableAllTestMode\", \"profiles\", \"count\", \"adminResetAllSpins\", \"PAID_SPIN_COST\", \"MAX_PAID_SPINS_PER_DAY\", \"canBuyPaidSpin\", \"paidSpinsToday\", \"recordPaidSpin\", \"getPaidSpinCost\"]\n}\n"},{"path":"roundBetting.js","source":"import {\n  b as q\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as p,\n  c as I\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as s\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/roundBetting.ts\nvar y = {\n  rounds1to3: 1.5,\n  // Early rounds: 1.5x\n  rounds4to5: 1.8,\n  // Mid rounds: 1.8x\n  rounds6to7: 2,\n  // Final rounds: 2.0x\n  allInRound7: 3,\n  // ALL IN on final round: 3.0x (high risk, high reward!)\n  tie: 3.5\n  // Tie bet: 3.5x (higher since it's harder to predict)\n}, _ = [\n  \"gmvbrs\",\n  \"vibe\",\n  \"viberuto\",\n  \"meowverse\",\n  \"poorlydrawnpepes\",\n  \"teampothead\",\n  \"tarot\",\n  \"vibefid\",\n  \"baseballcabal\",\n  \"vibefx\",\n  \"historyofcomputer\"\n], $ = 0.5;\nfunction N() {\n  let e = /* @__PURE__ */ new Date(), a = Date.UTC(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate());\n  return Math.floor(a / (1e3 * 60 * 60 * 24));\n}\nc(N, \"getUTCDayNumber\");\nfunction R() {\n  let a = N() % _.length;\n  return _[a];\n}\nc(R, \"getDailyBuffedCollection\");\nfunction v(e) {\n  return e.toLowerCase() === R().toLowerCase();\n}\nc(v, \"isCollectionBuffed\");\nfunction O(e, a = !1, n, r = !1) {\n  let t;\n  return e === 7 && r ? t = y.allInRound7 : a ? t = y.tie : e <= 3 ? t = y.rounds1to3 : e <= 5 ? t = y.rounds4to5 : t = y.rounds6to7, n && v(n) && (t += $), t;\n}\nc(O, \"getOddsForRound\");\nvar M = p({\n  args: {\n    roomId: s.string(),\n    roundNumber: s.number(),\n    bettor: s.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let { roomId: n, roundNumber: r, bettor: t } = a, u = t.toLowerCase();\n    return await e.db.query(\"roundBets\").withIndex(\n      \"by_room_round\",\n      (i) => i.eq(\"roomId\", n).eq(\"roundNumber\", r)\n    ).filter((i) => i.eq(i.field(\"bettor\"), u)).first();\n  }, \"handler\")\n}), U = p({\n  args: {\n    roomId: s.string(),\n    spectatorAddress: s.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let { roomId: n, spectatorAddress: r } = a, t = r.toLowerCase();\n    return await e.db.query(\"roundBets\").withIndex(\"by_room_round\", (d) => d.eq(\"roomId\", n)).filter((d) => d.eq(d.field(\"bettor\"), t)).collect();\n  }, \"handler\")\n}), x = I({\n  args: {\n    address: s.string(),\n    roomId: s.string(),\n    roundNumber: s.number(),\n    betOn: s.string(),\n    // Address of player to bet on OR \"tie\" for draw bet\n    amount: s.number(),\n    isAllIn: s.optional(s.boolean())\n    // ALL IN on final round for 3x odds!\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let { address: n, roomId: r, roundNumber: t, betOn: u, amount: d, isAllIn: i = !1 } = a, m = n.toLowerCase(), w = u.toLowerCase();\n    if (t < 1 || t > 7)\n      throw new Error(\"Invalid round number (must be 1-7)\");\n    if (await e.db.query(\"roundBets\").withIndex(\n      \"by_room_round\",\n      (l) => l.eq(\"roomId\", r).eq(\"roundNumber\", t)\n    ).filter((l) => l.eq(l.field(\"bettor\"), m)).first())\n      throw new Error(\"You already bet on this round\");\n    let f = await e.db.query(\"bettingCredits\").withIndex(\"by_address\", (l) => l.eq(\"address\", m)).first();\n    if (!f || f.balance < d)\n      throw new Error(\"Insufficient betting credits\");\n    await e.db.patch(f._id, {\n      balance: f.balance - d\n    });\n    let B = w === \"tie\", C = await e.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (l) => l.eq(\"roomId\", r)).first(), g = C?.cpuCollection || void 0, b = O(t, B, g, i), h = g ? v(g) : !1;\n    return await e.db.insert(\"roundBets\", {\n      roomId: r,\n      roundNumber: t,\n      bettor: m,\n      betOn: w,\n      amount: d,\n      odds: b,\n      status: \"active\",\n      timestamp: Date.now()\n    }), console.log(`\\u{1F3B0} Round bet placed: ${m} bet ${d} credits on round ${t} at ${b}x odds [roomId: ${r}]`), C?.isCpuVsCpu && await e.runMutation(q.pokerBattle.shortenBettingWindow, { roomId: r }), {\n      success: !0,\n      newBalance: f.balance - d,\n      odds: b,\n      potentialWin: Math.floor(d * b)\n    };\n  }, \"handler\")\n}), E = I({\n  args: {\n    roomId: s.string(),\n    roundNumber: s.number(),\n    winnerAddress: s.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let { roomId: n, roundNumber: r, winnerAddress: t } = a, u = t.toLowerCase();\n    console.log(`\\u{1F3B2} Resolving round ${r} bets for room ${n}, winner: ${u}`);\n    let d = await e.db.query(\"roundBets\").withIndex(\n      \"by_room_round\",\n      (o) => o.eq(\"roomId\", n).eq(\"roundNumber\", r)\n    ).filter((o) => o.eq(o.field(\"status\"), \"active\")).collect();\n    if (d.length === 0)\n      return console.log(`No active bets for round ${r} (may be already resolved)`), {\n        success: !0,\n        betsResolved: 0,\n        winners: 0,\n        losers: 0,\n        alreadyResolved: !0\n      };\n    let i = 0, m = 0, w = !u || u === \"tie\";\n    for (let o of d) {\n      let f = o.betOn.toLowerCase() === \"tie\", B = w ? f : o.betOn.toLowerCase() === u, g = (await e.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", o.bettor)).first())?.username || \"Spectator\";\n      if (B) {\n        let b = Math.floor(o.amount * o.odds);\n        i++;\n        let h = await e.db.query(\"bettingCredits\").withIndex(\"by_address\", (l) => l.eq(\"address\", o.bettor)).first();\n        h && (await e.db.patch(h._id, {\n          balance: h.balance + b\n        }), console.log(`\\u2705 Winner: ${o.bettor} won ${b} credits (${o.amount} \\xD7 ${o.odds})`)), await e.db.patch(o._id, {\n          status: \"won\",\n          payout: b,\n          resolvedAt: Date.now()\n        }), await e.db.insert(\"bettingTransactions\", {\n          address: o.bettor,\n          type: \"win\",\n          amount: b,\n          roomId: n,\n          timestamp: Date.now()\n        }), await e.db.insert(\"pokerChatMessages\", {\n          roomId: n,\n          sender: o.bettor,\n          senderUsername: g,\n          message: `\\u{1F389} Won ${b} credits! (${o.amount} \\xD7 ${o.odds}x)`,\n          timestamp: Date.now(),\n          type: \"text\"\n        });\n      } else\n        m++, await e.db.patch(o._id, {\n          status: \"lost\",\n          resolvedAt: Date.now()\n        }), console.log(`\\u274C Loser: ${o.bettor} lost ${o.amount} credits`), await e.db.insert(\"bettingTransactions\", {\n          address: o.bettor,\n          type: \"loss\",\n          amount: -o.amount,\n          roomId: n,\n          timestamp: Date.now()\n        }), await e.db.insert(\"pokerChatMessages\", {\n          roomId: n,\n          sender: o.bettor,\n          senderUsername: g,\n          message: `\\u{1F494} Lost ${o.amount} credits on Round ${r}`,\n          timestamp: Date.now(),\n          type: \"text\"\n        });\n    }\n    return console.log(`\\u{1F3B0} Round ${r} resolved: ${i} winners, ${m} losers`), {\n      success: !0,\n      betsResolved: d.length,\n      winners: i,\n      losers: m\n    };\n  }, \"handler\")\n}), S = I({\n  args: {\n    address: s.string(),\n    roomId: s.optional(s.string())\n    // Optional for tracking\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let { address: n, roomId: r } = a, t = n.toLowerCase(), u = await e.db.query(\"bettingCredits\").withIndex(\"by_address\", (o) => o.eq(\"address\", t)).first();\n    if (!u || u.balance === 0)\n      return {\n        success: !0,\n        converted: 0,\n        message: \"No credits to convert\"\n      };\n    let d = u.balance, i = await e.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", t)).first();\n    if (!i)\n      throw new Error(\"Profile not found\");\n    let w = (i.coins || 0) + d;\n    return await e.db.patch(i._id, {\n      coins: w,\n      lifetimeEarned: (i.lifetimeEarned || 0) + d,\n      lastUpdated: Date.now()\n    }), await e.db.insert(\"coinTransactions\", {\n      address: n.toLowerCase(),\n      amount: d,\n      type: \"earn\",\n      source: \"betting_convert\",\n      description: \"Converted betting credits to coins\",\n      timestamp: Date.now(),\n      balanceBefore: i.coins || 0,\n      balanceAfter: w\n    }), await e.db.patch(u._id, {\n      balance: 0\n    }), await e.db.insert(\"bettingTransactions\", {\n      address: t,\n      type: \"withdraw\",\n      amount: d,\n      roomId: r,\n      timestamp: Date.now()\n    }), console.log(`\\u{1F4B0} Converted ${d} credits to TESTVBMS for ${t}`), {\n      success: !0,\n      converted: d,\n      newCoinsBalance: w,\n      message: `${d} credits converted to TESTVBMS!`\n    };\n  }, \"handler\")\n}), z = p({\n  args: {\n    roomId: s.string(),\n    roundNumber: s.number()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => await e.db.query(\"roundBets\").withIndex(\n    \"by_room_round\",\n    (r) => r.eq(\"roomId\", a.roomId).eq(\"roundNumber\", a.roundNumber)\n  ).collect(), \"handler\")\n}), F = p({\n  args: {\n    address: s.string(),\n    roomId: s.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let n = a.address.toLowerCase();\n    return await e.db.query(\"roundBets\").withIndex(\"by_bettor\", (t) => t.eq(\"bettor\", n)).filter((t) => t.eq(t.field(\"roomId\"), a.roomId)).collect();\n  }, \"handler\")\n}), W = p({\n  args: {\n    roomId: s.string(),\n    roundNumber: s.number()\n  },\n  handler: /* @__PURE__ */ c(async (e, a) => {\n    let n = await e.db.query(\"roundBets\").withIndex(\n      \"by_room_round\",\n      (t) => t.eq(\"roomId\", a.roomId).eq(\"roundNumber\", a.roundNumber)\n    ).collect(), r = {};\n    for (let t of n)\n      r[t.betOn] || (r[t.betOn] = { total: 0, count: 0 }), r[t.betOn].total += t.amount, r[t.betOn].count += 1;\n    return {\n      bets: n,\n      stats: r,\n      totalBets: n.length\n    };\n  }, \"handler\")\n});\nexport {\n  S as convertCreditsToCoins,\n  F as getMyRoomBets,\n  W as getRoomBettingStats,\n  M as getRoundBet,\n  z as getRoundBets,\n  U as getSpectatorBetsForRoom,\n  x as placeBetOnRound,\n  E as resolveRoundBets\n};\n//# sourceMappingURL=roundBetting.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/roundBetting.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"ODDS_CONFIG\", \"ARENA_COLLECTIONS\", \"BUFF_BONUS\", \"getUTCDayNumber\", \"now\", \"utcMidnight\", \"__name\", \"getDailyBuffedCollection\", \"index\", \"isCollectionBuffed\", \"collectionSlug\", \"getOddsForRound\", \"roundNumber\", \"isTieBet\", \"isAllIn\", \"baseOdds\", \"getRoundBet\", \"query\", \"v\", \"ctx\", \"args\", \"roomId\", \"bettor\", \"normalizedBettor\", \"q\", \"getSpectatorBetsForRoom\", \"spectatorAddress\", \"normalizedAddress\", \"placeBetOnRound\", \"mutation\", \"address\", \"betOn\", \"amount\", \"normalizedBetOn\", \"credits\", \"room\", \"odds\", \"isBuffed\", \"internal\", \"resolveRoundBets\", \"winnerAddress\", \"normalizedWinner\", \"bets\", \"winnersCount\", \"losersCount\", \"isTieRound\", \"bet\", \"isWinner\", \"bettorUsername\", \"payout\", \"convertCreditsToCoins\", \"profile\", \"newBalance\", \"getRoundBets\", \"getMyRoomBets\", \"getRoomBettingStats\", \"stats\"]\n}\n"},{"path":"scheduledTips.js","source":"import {\n  b as o\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  h as i\n} from \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\n\n// convex/scheduledTips.ts\nvar r = i();\nr.daily(\n  \"send-periodic-tip\",\n  { hourUTC: 18, minuteUTC: 0 },\n  o.notifications.sendPeriodicTip\n);\nvar e = r;\nexport {\n  e as default\n};\n//# sourceMappingURL=scheduledTips.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/scheduledTips.ts\"],\n  \"mappings\": \";;;;;;;;;;AAGA,IAAMA,IAAQC,EAAS;AAIvBD,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,IAAI,WAAW,EAAE;AAAA,EAC5BE,EAAS,cAAc;AACzB;AAEA,IAAOC,IAAQH;\",\n  \"names\": [\"crons\", \"cronJobs\", \"internal\", \"scheduledTips_default\"]\n}\n"},{"path":"sessions.js","source":"import {\n  a as l,\n  c as a\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/sessions.ts\nvar c = 300 * 1e3, w = a({\n  args: {\n    profileAddress: r.string(),\n    sessionId: r.string(),\n    deviceInfo: r.optional(r.string())\n  },\n  handler: /* @__PURE__ */ d(async (s, e) => {\n    let o = e.profileAddress.toLowerCase(), i = Date.now(), n = await s.db.query(\"activeSessions\").withIndex(\"by_profile\", (t) => t.eq(\"profileAddress\", o)).first();\n    return n && n.sessionId === e.sessionId ? (await s.db.patch(n._id, {\n      lastHeartbeat: i,\n      deviceInfo: e.deviceInfo\n    }), { success: !0, isNewSession: !1 }) : (n && await s.db.delete(n._id), await s.db.insert(\"activeSessions\", {\n      profileAddress: o,\n      sessionId: e.sessionId,\n      deviceInfo: e.deviceInfo,\n      connectedAt: i,\n      lastHeartbeat: i\n    }), { success: !0, isNewSession: !0 });\n  }, \"handler\")\n}), u = a({\n  args: {\n    profileAddress: r.string(),\n    sessionId: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, e) => {\n    let o = e.profileAddress.toLowerCase(), i = Date.now(), n = await s.db.query(\"activeSessions\").withIndex(\"by_profile\", (t) => t.eq(\"profileAddress\", o)).first();\n    return n ? n.sessionId !== e.sessionId ? { valid: !1, reason: \"session_invalidated\" } : (await s.db.patch(n._id, {\n      lastHeartbeat: i\n    }), { valid: !0 }) : { valid: !1, reason: \"no_session\" };\n  }, \"handler\")\n}), I = l({\n  args: {\n    profileAddress: r.string(),\n    sessionId: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, e) => {\n    let o = e.profileAddress.toLowerCase(), i = await s.db.query(\"activeSessions\").withIndex(\"by_profile\", (t) => t.eq(\"profileAddress\", o)).first();\n    return i ? i.sessionId !== e.sessionId ? { valid: !1, reason: \"session_invalidated\" } : Date.now() - i.lastHeartbeat > c ? { valid: !1, reason: \"session_expired\" } : { valid: !0 } : { valid: !1, reason: \"no_session\" };\n  }, \"handler\")\n}), b = a({\n  args: {\n    profileAddress: r.string(),\n    sessionId: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, e) => {\n    let o = e.profileAddress.toLowerCase(), i = await s.db.query(\"activeSessions\").withIndex(\"by_profile\", (n) => n.eq(\"profileAddress\", o)).first();\n    return i && i.sessionId === e.sessionId ? (await s.db.delete(i._id), { success: !0 }) : { success: !1, reason: \"not_your_session\" };\n  }, \"handler\")\n}), v = a({\n  args: {},\n  handler: /* @__PURE__ */ d(async (s) => {\n    let o = Date.now() - c, i = await s.db.query(\"activeSessions\").collect(), n = 0;\n    for (let t of i)\n      t.lastHeartbeat < o && (await s.db.delete(t._id), n++);\n    return { cleaned: n };\n  }, \"handler\")\n}), A = l({\n  args: {\n    profileAddress: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, e) => {\n    let o = e.profileAddress.toLowerCase();\n    return await s.db.query(\"activeSessions\").withIndex(\"by_profile\", (i) => i.eq(\"profileAddress\", o)).first();\n  }, \"handler\")\n});\nexport {\n  I as checkSession,\n  v as cleanupExpiredSessions,\n  b as endSession,\n  A as getActiveSession,\n  u as heartbeat,\n  w as registerSession\n};\n//# sourceMappingURL=sessions.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/sessions.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"SESSION_TIMEOUT_MS\", \"registerSession\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"normalizedAddress\", \"now\", \"existingSession\", \"q\", \"heartbeat\", \"session\", \"checkSession\", \"query\", \"endSession\", \"cleanupExpiredSessions\", \"expiredThreshold\", \"allSessions\", \"cleaned\", \"getActiveSession\"]\n}\n"},{"path":"shopAnnouncement.js","source":"import {\n  d as i\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport {\n  a as r\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/shopAnnouncement.ts\nvar l = i({\n  args: {},\n  handler: /* @__PURE__ */ r(async (s) => {\n    let c = await s.db.query(\"profiles\").take(100), t = 0, a = 0;\n    for (let n of c) {\n      let o = n.coins || 0, e = 100;\n      await s.db.patch(n._id, {\n        coins: o + e,\n        lifetimeEarned: (n.lifetimeEarned || 0) + e\n      }), await s.db.insert(\"coinTransactions\", {\n        address: n.address.toLowerCase(),\n        amount: e,\n        type: \"bonus\",\n        source: \"shop_announcement\",\n        description: \"Shop announcement bonus\",\n        timestamp: Date.now(),\n        balanceBefore: o,\n        balanceAfter: o + e\n      }), console.log(`\\u{1F4B0} Shop bonus added to balance: ${e} TESTVBMS for ${n.address}. Balance: ${o} \\u2192 ${o + e}`), t++, a += e;\n    }\n    return {\n      success: !0,\n      notificationsSent: t,\n      totalCoinsDistributed: a,\n      message: \"Shop announcement sent! All users received 100 coins bonus.\"\n    };\n  }, \"handler\")\n});\nexport {\n  l as sendShopAnnouncement\n};\n//# sourceMappingURL=shopAnnouncement.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/shopAnnouncement.ts\"],\n  \"mappings\": \";;;;;;;;;;AAYO,IAAMA,IAAuBC,EAAiB;AAAA,EACnD,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAC,EAAA,OAAOC,MAAQ;AAEtB,QAAMC,IAAc,MAAMD,EAAI,GAAG,MAAM,UAAU,EAAE,KAAK,GAAG,GAEvDE,IAAoB,GACpBC,IAAa;AAGjB,aAAWC,KAAWH,GAAa;AACjC,UAAMI,IAAiBD,EAAQ,SAAS,GAClCE,IAAc;AAEpB,YAAMN,EAAI,GAAG,MAAMI,EAAQ,KAAK;AAAA,QAC9B,OAAOC,IAAiBC;AAAA,QACxB,iBAAiBF,EAAQ,kBAAkB,KAAKE;AAAA,MAClD,CAAC,GAGD,MAAMN,EAAI,GAAG,OAAO,oBAAoB;AAAA,QACtC,SAASI,EAAQ,QAAQ,YAAY;AAAA,QACrC,QAAQE;AAAA,QACR,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,aAAa;AAAA,QACb,WAAW,KAAK,IAAI;AAAA,QACpB,eAAeD;AAAA,QACf,cAAcA,IAAiBC;AAAA,MACjC,CAAC,GAED,QAAQ,IAAI,0CAAmCA,CAAW,iBAAiBF,EAAQ,OAAO,cAAcC,CAAc,WAAMA,IAAiBC,CAAW,EAAE,GAE1JJ,KACAC,KAAcG;AAAA,IAChB;AAEA,WAAO;AAAA,MACL,SAAS;AAAA,MACT,mBAAAJ;AAAA,MACA,uBAAuBC;AAAA,MACvB,SAAS;AAAA,IACX;AAAA,EACF,GAzCS;AA0CX,CAAC;\",\n  \"names\": [\"sendShopAnnouncement\", \"internalMutation\", \"__name\", \"ctx\", \"allProfiles\", \"notificationsSent\", \"coinsAdded\", \"profile\", \"currentBalance\", \"bonusAmount\"]\n}\n"},{"path":"socialQuests.js","source":"import {\n  a as m\n} from \"./_deps/LKY7FFHL.js\";\nimport {\n  h as _\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as b,\n  c as g,\n  d as h\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/socialQuests.ts\nvar y = {\n  // SDK Actions (notifications & miniapp - 500 VBMS each)\n  enable_notifications: 500,\n  add_miniapp: 500,\n  // Channels - 200 each\n  join_vibe_most_wanted: 200,\n  join_fidmfers: 200,\n  // Follows - 100 each (only active collections)\n  follow_jvhbo: 100,\n  follow_betobutter: 100,\n  follow_jayabs: 100,\n  follow_smolemaru: 100,\n  follow_denkurhq: 100,\n  follow_zazza: 100,\n  follow_bradenwolf: 100,\n  follow_viberotbangers_creator: 100\n};\nasync function I(r, n) {\n  let e = await r.db.query(\"profiles\").withIndex(\"by_address\", (s) => s.eq(\"address\", n)).first();\n  return e ? e.hasVibeBadge ? { has2x: !0, reason: \"VIBE Badge\" } : e.ownedTokenIds?.some((s) => s.toLowerCase().startsWith(\"vibefid:\")) ? { has2x: !0, reason: \"VibeFID\" } : { has2x: !1, reason: \"\" } : { has2x: !1, reason: \"\" };\n}\nc(I, \"has2xBonus\");\nvar $ = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ c(async (r, { address: n }) => {\n    let e = m(n), s = await r.db.query(\"socialQuestProgress\").withIndex(\"by_player\", (t) => t.eq(\"playerAddress\", e)).collect(), o = {};\n    for (let t of s)\n      o[t.questId] = {\n        completed: t.completed,\n        claimed: t.claimed,\n        claimedAt: t.claimedAt\n      };\n    return o;\n  }, \"handler\")\n}), B = h({\n  args: {\n    address: i.string(),\n    questId: i.string()\n  },\n  handler: /* @__PURE__ */ c(async (r, { address: n, questId: e }) => {\n    let s = m(n);\n    if (!y[e])\n      throw new Error(\"Invalid quest ID\");\n    let o = await r.db.query(\"socialQuestProgress\").withIndex(\n      \"by_player_quest\",\n      (t) => t.eq(\"playerAddress\", s).eq(\"questId\", e)\n    ).first();\n    return o ? (o.completed || await r.db.patch(o._id, {\n      completed: !0,\n      completedAt: Date.now()\n    }), { success: !0, alreadyCompleted: o.completed }) : (await r.db.insert(\"socialQuestProgress\", {\n      playerAddress: s,\n      questId: e,\n      completed: !0,\n      completedAt: Date.now(),\n      claimed: !1\n    }), { success: !0, alreadyCompleted: !1 });\n  }, \"handler\")\n}), C = g({\n  args: {\n    address: i.string(),\n    questId: i.string()\n  },\n  handler: /* @__PURE__ */ c(async (r, { address: n, questId: e }) => {\n    let s = m(n), o = y[e];\n    if (!o)\n      throw new Error(\"Invalid quest ID\");\n    let t = await r.db.query(\"socialQuestProgress\").withIndex(\n      \"by_player_quest\",\n      (p) => p.eq(\"playerAddress\", s).eq(\"questId\", e)\n    ).first();\n    if (!t)\n      throw new Error(\"Quest not completed yet\");\n    if (!t.completed)\n      throw new Error(\"Quest not completed yet\");\n    if (t.claimed)\n      throw new Error(\"Reward already claimed\");\n    let a = await r.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", s)).first();\n    if (!a)\n      throw new Error(\"Profile not found\");\n    let d = await I(r, s), q = d.has2x ? 2 : 1, l = o * q, w = d.has2x ? ` (2x ${d.reason})` : \"\", f = a.coins || 0, u = f + l, A = (a.lifetimeEarned || 0) + l;\n    return await r.db.patch(a._id, {\n      coins: u,\n      lifetimeEarned: A,\n      lastUpdated: Date.now()\n    }), await r.db.insert(\"coinTransactions\", {\n      address: s,\n      amount: l,\n      type: \"earn\",\n      source: \"social_quest\",\n      description: `Social quest: ${e}${w}`,\n      timestamp: Date.now(),\n      balanceBefore: f,\n      balanceAfter: u\n    }), await _(\n      r,\n      s,\n      \"earn\",\n      l,\n      f,\n      u,\n      \"social_quest\",\n      e,\n      { reason: `Social quest completed: ${e}${w}` }\n    ), console.log(`\\u{1F4B0} Social quest reward: ${l} coins for ${s}${w}. Balance: ${f} \\u2192 ${u}`), await r.db.patch(t._id, {\n      claimed: !0,\n      claimedAt: Date.now()\n    }), {\n      success: !0,\n      reward: l,\n      newBalance: u,\n      questId: e\n    };\n  }, \"handler\")\n}), R = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ c(async (r, { address: n }) => {\n    let e = m(n), s = await r.db.query(\"socialQuestProgress\").withIndex(\"by_player\", (a) => a.eq(\"playerAddress\", e)).filter(\n      (a) => a.and(\n        a.eq(a.field(\"completed\"), !0),\n        a.eq(a.field(\"claimed\"), !1)\n      )\n    ).collect(), o = 0, t = [];\n    for (let a of s) {\n      let d = y[a.questId];\n      d && (o += d, t.push(a.questId));\n    }\n    return {\n      totalClaimable: o,\n      claimableQuests: t,\n      count: t.length\n    };\n  }, \"handler\")\n});\nexport {\n  C as claimSocialQuestReward,\n  R as getClaimableSocialRewards,\n  $ as getSocialQuestProgress,\n  B as markQuestCompleted\n};\n//# sourceMappingURL=socialQuests.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/socialQuests.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"QUEST_REWARDS\", \"has2xBonus\", \"ctx\", \"playerAddress\", \"profile\", \"q\", \"id\", \"__name\", \"getSocialQuestProgress\", \"query\", \"v\", \"address\", \"normalizedAddress\", \"normalizeAddress\", \"progress\", \"progressMap\", \"p\", \"markQuestCompleted\", \"internalMutation\", \"questId\", \"QUEST_REWARDS\", \"existing\", \"claimSocialQuestReward\", \"mutation\", \"baseReward\", \"bonusCheck\", \"multiplier\", \"reward\", \"bonusText\", \"currentBalance\", \"newBalance\", \"newLifetimeEarned\", \"createAuditLog\", \"getClaimableSocialRewards\", \"totalClaimable\", \"claimableQuests\"]\n}\n"},{"path":"stats.js","source":"import {\n  b as s\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport {\n  a as n\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/stats.ts\nvar i = s({\n  args: {},\n  handler: /* @__PURE__ */ n(async (r) => (await r.db.query(\"profiles\").take(200)).map((e) => ({\n    username: e.username,\n    address: e.address,\n    coins: e.coins || 0,\n    coinsInbox: e.inbox || 0,\n    // Using inbox field now\n    lifetimeEarned: e.lifetimeEarned || 0,\n    lifetimeSpent: e.lifetimeSpent || 0\n  })), \"handler\")\n});\nexport {\n  i as getAllProfiles\n};\n//# sourceMappingURL=stats.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/stats.ts\"],\n  \"mappings\": \";;;;;;;;;;AAMO,IAAMA,IAAiBC,EAAc;AAAA,EAC1C,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAC,EAAA,OAAOC,OAEG,MAAMA,EAAI,GAAG,MAAM,UAAU,EAAE,KAAK,GAAG,GAExC,IAAI,CAAAC,OAAY;AAAA,IAC9B,UAAUA,EAAQ;AAAA,IAClB,SAASA,EAAQ;AAAA,IACjB,OAAOA,EAAQ,SAAS;AAAA,IACxB,YAAYA,EAAQ,SAAS;AAAA;AAAA,IAC7B,gBAAgBA,EAAQ,kBAAkB;AAAA,IAC1C,eAAeA,EAAQ,iBAAiB;AAAA,EAC1C,EAAE,GAXK;AAaX,CAAC;\",\n  \"names\": [\"getAllProfiles\", \"internalQuery\", \"__name\", \"ctx\", \"profile\"]\n}\n"},{"path":"pokerChat.js","source":"import {\n  a as t,\n  c as n\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as o\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/pokerChat.ts\nvar g = n({\n  args: {\n    roomId: e.string(),\n    sender: e.string(),\n    // address\n    senderUsername: e.string(),\n    message: e.string(),\n    type: e.optional(e.union(e.literal(\"text\"), e.literal(\"sound\"))),\n    // Message type\n    soundUrl: e.optional(e.string()),\n    // URL of the sound file (for sound messages)\n    emoji: e.optional(e.string())\n    // Emoji for floating animation (for sound messages)\n  },\n  handler: /* @__PURE__ */ o(async (r, s) => {\n    if (s.message.length > 500)\n      throw new Error(\"Message too long (max 500 characters)\");\n    if (s.message.trim().length === 0)\n      throw new Error(\"Message cannot be empty\");\n    return await r.db.insert(\"pokerChatMessages\", {\n      roomId: s.roomId,\n      sender: s.sender.toLowerCase(),\n      senderUsername: s.senderUsername,\n      message: s.message.trim(),\n      timestamp: Date.now(),\n      type: s.type,\n      soundUrl: s.soundUrl,\n      emoji: s.emoji\n    }), { success: !0 };\n  }, \"handler\")\n}), l = t({\n  args: {\n    roomId: e.string()\n  },\n  handler: /* @__PURE__ */ o(async (r, s) => (await r.db.query(\"pokerChatMessages\").withIndex(\"by_room\", (a) => a.eq(\"roomId\", s.roomId)).order(\"desc\").take(50)).reverse(), \"handler\")\n});\nexport {\n  l as getMessages,\n  g as sendMessage\n};\n//# sourceMappingURL=pokerChat.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/pokerChat.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;AAIO,IAAMA,IAAcC,EAAS;AAAA,EAClC,MAAM;AAAA,IACJ,QAAQC,EAAE,OAAO;AAAA,IACjB,QAAQA,EAAE,OAAO;AAAA;AAAA,IACjB,gBAAgBA,EAAE,OAAO;AAAA,IACzB,SAASA,EAAE,OAAO;AAAA,IAClB,MAAMA,EAAE,SAASA,EAAE,MAAMA,EAAE,QAAQ,MAAM,GAAGA,EAAE,QAAQ,OAAO,CAAC,CAAC;AAAA;AAAA,IAC/D,UAAUA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA;AAAA,IAC/B,OAAOA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA;AAAA,EAC9B;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,MAAS;AAE5B,QAAIA,EAAK,QAAQ,SAAS;AACxB,YAAM,IAAI,MAAM,uCAAuC;AAGzD,QAAIA,EAAK,QAAQ,KAAK,EAAE,WAAW;AACjC,YAAM,IAAI,MAAM,yBAAyB;AAG3C,iBAAMD,EAAI,GAAG,OAAO,qBAAqB;AAAA,MACvC,QAAQC,EAAK;AAAA,MACb,QAAQA,EAAK,OAAO,YAAY;AAAA,MAChC,gBAAgBA,EAAK;AAAA,MACrB,SAASA,EAAK,QAAQ,KAAK;AAAA,MAC3B,WAAW,KAAK,IAAI;AAAA,MACpB,MAAMA,EAAK;AAAA,MACX,UAAUA,EAAK;AAAA,MACf,OAAOA,EAAK;AAAA,IACd,CAAC,GAEM,EAAE,SAAS,GAAK;AAAA,EACzB,GAtBS;AAuBX,CAAC,GAGYC,IAAcC,EAAM;AAAA,EAC/B,MAAM;AAAA,IACJ,QAAQL,EAAE,OAAO;AAAA,EACnB;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,OACF,MAAMD,EAAI,GACxB,MAAM,mBAAmB,EACzB,UAAU,WAAW,CAACI,MAAMA,EAAE,GAAG,UAAUH,EAAK,MAAM,CAAC,EACvD,MAAM,MAAM,EACZ,KAAK,EAAE,GAEM,QAAQ,GAPjB;AASX,CAAC;\",\n  \"names\": [\"sendMessage\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"getMessages\", \"query\", \"q\"]\n}\n"},{"path":"pokerCpu.js","source":"import {\n  a as f,\n  c as m,\n  d as y\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as n\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as p\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/pokerCpu.ts\nvar a = 5, d = 10;\nfunction u() {\n  return (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n}\np(u, \"getTodayDate\");\nvar h = f({\n  args: {\n    address: n.string()\n  },\n  handler: /* @__PURE__ */ p(async (o, t) => {\n    let s = await o.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", t.address.toLowerCase())).first();\n    if (!s)\n      return { remaining: a, total: a };\n    let r = u(), e = s.dailyLimits;\n    if (!e || e.lastResetDate !== r)\n      return { remaining: a, total: a };\n    let i = e.pokerCpuAttempts || 0;\n    return { remaining: Math.max(0, a - i), total: a };\n  }, \"handler\")\n}), P = f({\n  args: {\n    address: n.string()\n  },\n  handler: /* @__PURE__ */ p(async (o, t) => {\n    let s = await o.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", t.address.toLowerCase())).first();\n    if (!s)\n      return { remaining: d, total: d };\n    let r = u(), e = s.dailyLimits;\n    if (!e || e.lastResetDate !== r)\n      return { remaining: d, total: d };\n    let i = e.pveWins || 0;\n    return { remaining: Math.max(0, d - i), total: d };\n  }, \"handler\")\n}), b = m({\n  args: {\n    address: n.string()\n  },\n  handler: /* @__PURE__ */ p(async (o, t) => {\n    let s = await o.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", t.address.toLowerCase())).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    let r = u(), e = s.dailyLimits;\n    (!e || e.lastResetDate !== r) && (e = {\n      pveWins: 0,\n      pvpMatches: 0,\n      pokerCpuAttempts: 0,\n      lastResetDate: r,\n      firstPveBonus: !1,\n      firstPvpBonus: !1,\n      loginBonus: !1,\n      streakBonus: !1\n    });\n    let i = e.pokerCpuAttempts || 0;\n    if (i >= a)\n      throw new Error(`Daily limit reached. You can play ${a} CPU poker games per day. Come back tomorrow!`);\n    e.pokerCpuAttempts = i + 1, await o.db.patch(s._id, {\n      dailyLimits: e\n    });\n    let l = a - e.pokerCpuAttempts;\n    return console.log(`\\u{1F3AE} ${t.address} consumed poker CPU attempt. Remaining: ${l}/${a}`), {\n      success: !0,\n      remaining: l,\n      total: a\n    };\n  }, \"handler\")\n}), C = m({\n  args: {\n    address: n.string()\n  },\n  handler: /* @__PURE__ */ p(async (o, t) => {\n    let s = await o.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", t.address.toLowerCase())).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    let r = u(), e = s.dailyLimits;\n    (!e || e.lastResetDate !== r) && (e = {\n      pveWins: 0,\n      pvpMatches: 0,\n      pokerCpuAttempts: 0,\n      lastResetDate: r,\n      firstPveBonus: !1,\n      firstPvpBonus: !1,\n      loginBonus: !1,\n      streakBonus: !1\n    });\n    let i = e.pveWins || 0;\n    if (i >= d)\n      throw new Error(`Daily limit reached. You can play ${d} PvE battles per day. Come back tomorrow!`);\n    e.pveWins = i + 1, await o.db.patch(s._id, {\n      dailyLimits: e\n    });\n    let l = d - e.pveWins;\n    return console.log(`\\u2694\\uFE0F ${t.address} consumed PvE attempt. Remaining: ${l}/${d}`), {\n      success: !0,\n      remaining: l,\n      total: d\n    };\n  }, \"handler\")\n}), v = y({\n  args: {\n    address: n.string(),\n    difficulty: n.union(\n      n.literal(\"gey\"),\n      n.literal(\"goofy\"),\n      n.literal(\"gooner\"),\n      n.literal(\"gangster\"),\n      n.literal(\"gigachad\")\n    ),\n    coinsWon: n.number()\n  },\n  handler: /* @__PURE__ */ p(async (o, t) => {\n    let s = await o.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", t.address.toLowerCase())).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    let r = s.coins || 0, e = r + t.coinsWon;\n    return await o.db.patch(s._id, {\n      coins: e,\n      lifetimeEarned: (s.lifetimeEarned || 0) + t.coinsWon\n    }), console.log(`\\u{1F4B0} ${t.address} won ${t.coinsWon} coins on ${t.difficulty} difficulty (total: ${e})`), await o.db.insert(\"coinTransactions\", {\n      address: t.address.toLowerCase(),\n      type: \"earn\",\n      amount: t.coinsWon,\n      source: \"pve\",\n      description: `Poker CPU victory (${t.difficulty})`,\n      balanceBefore: r,\n      balanceAfter: e,\n      timestamp: Date.now()\n    }), {\n      success: !0,\n      coinsWon: t.coinsWon,\n      newBalance: e\n    };\n  }, \"handler\")\n});\nexport {\n  v as awardPokerWin,\n  b as consumePokerAttempt,\n  C as consumePveAttempt,\n  h as getRemainingPokerAttempts,\n  P as getRemainingPveAttempts\n};\n//# sourceMappingURL=pokerCpu.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/pokerCpu.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"MAX_POKER_CPU_ATTEMPTS\", \"MAX_PVE_ATTEMPTS\", \"getTodayDate\", \"__name\", \"getRemainingPokerAttempts\", \"query\", \"v\", \"ctx\", \"args\", \"profile\", \"q\", \"today\", \"dailyLimits\", \"used\", \"getRemainingPveAttempts\", \"consumePokerAttempt\", \"mutation\", \"remaining\", \"consumePveAttempt\", \"awardPokerWin\", \"internalMutation\", \"currentCoins\", \"newCoins\"]\n}\n"},{"path":"priceSnapshots.js","source":"import {\n  a as c,\n  c as p,\n  d as h\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as t\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/priceSnapshots.ts\nvar b = p({\n  args: {\n    prices: t.array(t.object({\n      collectionId: t.string(),\n      priceEth: t.number(),\n      priceUsd: t.number()\n    })),\n    ethUsdPrice: t.number()\n  },\n  handler: /* @__PURE__ */ d(async (r, e) => {\n    let s = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], i = await r.db.query(\"priceSnapshots\").withIndex(\"by_date\", (a) => a.eq(\"date\", s)).first();\n    return i ? (await r.db.patch(i._id, {\n      prices: e.prices,\n      ethUsdPrice: e.ethUsdPrice,\n      timestamp: Date.now()\n    }), { updated: !0, date: s }) : (await r.db.insert(\"priceSnapshots\", {\n      date: s,\n      prices: e.prices,\n      ethUsdPrice: e.ethUsdPrice,\n      timestamp: Date.now()\n    }), { created: !0, date: s });\n  }, \"handler\")\n}), S = c({\n  args: {},\n  handler: /* @__PURE__ */ d(async (r) => {\n    let e = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], s = /* @__PURE__ */ new Date();\n    s.setDate(s.getDate() - 1);\n    let i = s.toISOString().split(\"T\")[0], a = await r.db.query(\"priceSnapshots\").withIndex(\"by_date\", (n) => n.eq(\"date\", i)).first();\n    if (a || (a = (await r.db.query(\"priceSnapshots\").order(\"desc\").take(5)).find((u) => u.date !== e) || null), !a)\n      return null;\n    let o = {};\n    for (let n of a.prices)\n      o[n.collectionId] = { priceEth: n.priceEth, priceUsd: n.priceUsd };\n    return {\n      date: a.date,\n      prices: o,\n      ethUsdPrice: a.ethUsdPrice\n    };\n  }, \"handler\")\n}), m = c({\n  args: {},\n  handler: /* @__PURE__ */ d(async (r) => await r.db.query(\"priceSnapshots\").order(\"desc\").take(7), \"handler\")\n}), w = h({\n  args: {\n    date: t.string(),\n    prices: t.array(t.object({\n      collectionId: t.string(),\n      priceEth: t.number(),\n      priceUsd: t.number()\n    })),\n    ethUsdPrice: t.number()\n  },\n  handler: /* @__PURE__ */ d(async (r, e) => await r.db.query(\"priceSnapshots\").withIndex(\"by_date\", (i) => i.eq(\"date\", e.date)).first() ? { error: \"Snapshot already exists for this date\", date: e.date } : (await r.db.insert(\"priceSnapshots\", {\n    date: e.date,\n    prices: e.prices,\n    ethUsdPrice: e.ethUsdPrice,\n    timestamp: Date.now()\n  }), { created: !0, date: e.date }), \"handler\")\n});\nexport {\n  m as getRecentSnapshots,\n  S as getYesterdayPrices,\n  w as insertHistoricalSnapshot,\n  b as savePriceSnapshot\n};\n//# sourceMappingURL=priceSnapshots.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/priceSnapshots.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"savePriceSnapshot\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"today\", \"existingSnapshot\", \"q\", \"getYesterdayPrices\", \"query\", \"yesterday\", \"yesterdayStr\", \"snapshot\", \"s\", \"priceMap\", \"p\", \"getRecentSnapshots\", \"insertHistoricalSnapshot\", \"internalMutation\"]\n}\n"},{"path":"profiles.js","source":"import {\n  a as w,\n  b as h\n} from \"./_deps/LKY7FFHL.js\";\nimport {\n  b as A\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  b as L,\n  c as E\n} from \"./_deps/55EWY3YS.js\";\nimport \"./_deps/HHLKWD3J.js\";\nimport {\n  e as C,\n  g as _,\n  h as P\n} from \"./_deps/KGOWE5FI.js\";\nimport {\n  a as b,\n  b as $,\n  c as m,\n  d as D\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as u\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/profiles.ts\nasync function q(r, t) {\n  let a = w(t), i = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (s) => s.eq(\"address\", a)).first();\n  return i ? i.primaryAddress : a;\n}\nu(q, \"resolvePrimaryAddress\");\nvar R = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!t || t.length === 0 || !h(t))\n      return null;\n    let a = w(t), i = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first(), s;\n    return i ? s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", i.primaryAddress)).first() : s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first(), s ? {\n      ...s,\n      hasDefenseDeck: (s.defenseDeck?.length || 0) === 5\n    } : null;\n  }, \"handler\")\n}), O = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!t || t.length === 0 || !h(t))\n      return null;\n    let a = w(t), i = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first(), s;\n    return i ? s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", i.primaryAddress)).first() : s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first(), s ? {\n      _id: s._id,\n      address: s.address,\n      username: s.username,\n      stats: s.stats,\n      coins: s.coins || 0,\n      coinsInbox: s.coinsInbox || 0,\n      inbox: s.inbox || 0,\n      dailyLimits: s.dailyLimits,\n      attacksToday: s.attacksToday || 0,\n      rematchesToday: s.rematchesToday || 0,\n      winStreak: s.winStreak || 0,\n      fid: s.fid,\n      farcasterFid: s.farcasterFid,\n      farcasterPfpUrl: s.farcasterPfpUrl,\n      twitter: s.twitter,\n      twitterHandle: s.twitterHandle,\n      twitterProfileImageUrl: s.twitterProfileImageUrl,\n      hasDefenseDeck: (s.defenseDeck?.length || 0) === 5,\n      preferredCollection: s.preferredCollection,\n      createdAt: s.createdAt,\n      lastUpdated: s.lastUpdated,\n      // ðŸš€ BANDWIDTH FIX: Include linked addresses (small array, saves separate query)\n      linkedAddresses: s.linkedAddresses || []\n    } : null;\n  }, \"handler\")\n}), K = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!t || t.length === 0 || !h(t))\n      return null;\n    let a = w(t), i = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (d) => d.eq(\"address\", a)).first(), s = i ? i.primaryAddress : a, n = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", s)).first();\n    return n ? {\n      address: n.address,\n      username: n.username,\n      defenseDeck: n.defenseDeck || [],\n      hasDefenseDeck: (n.defenseDeck?.length || 0) === 5,\n      stats: {\n        totalPower: n.stats?.totalPower || 0,\n        aura: n.stats?.aura ?? 500\n      }\n    } : null;\n  }, \"handler\")\n}), H = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!t || t.length === 0 || !h(t))\n      return null;\n    let a = await q(r, t), i = a !== w(t), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (I) => I.eq(\"address\", a)).first();\n    if (!s) return null;\n    let n = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], d = s.dailyLimits, l = d?.lastResetDate === n, o = 10, c = l && d?.pveWins || 0, f = Math.max(0, o - c), p = 180 * 1e3, y = s.lastConversionAttempt || s.pendingConversionTimestamp || 0, g = Date.now() - y, k = y > 0 && g < p ? Math.ceil((p - g) / 1e3) : 0, U = (l && s.lifetimeEarned || 0) < 1e5, v = [];\n    if (s.defenseDeck && s.defenseDeck.length > 0)\n      for (let I of s.defenseDeck)\n        if (typeof I == \"object\" && I !== null && \"tokenId\" in I) {\n          if (I.collection === \"vibefid\") continue;\n          let x = `${I.collection || \"default\"}:${I.tokenId}`;\n          v.push(x);\n        } else typeof I == \"string\" && v.push(`default:${I}`);\n    return {\n      // Core profile\n      _id: s._id,\n      address: s.address,\n      username: s.username,\n      stats: s.stats,\n      hasDefenseDeck: (s.defenseDeck?.length || 0) === 5,\n      // Economy (replaces getPlayerEconomy)\n      coins: s.coins || 0,\n      lifetimeEarned: s.lifetimeEarned || 0,\n      lifetimeSpent: s.lifetimeSpent || 0,\n      dailyLimits: s.dailyLimits,\n      winStreak: s.winStreak || 0,\n      canEarnMore: U,\n      // VBMS (replaces getVBMSBalance)\n      inbox: s.coinsInbox || 0,\n      claimedTokens: s.claimedTokens || 0,\n      // Inbox status (replaces getInboxStatus)\n      coinsInbox: s.coinsInbox || 0,\n      cooldownRemaining: k,\n      // PvE attempts (replaces getRemainingPveAttempts)\n      pveRemaining: f,\n      pveTotal: o,\n      // Welcome pack (replaces hasReceivedWelcomePack)\n      hasReceivedWelcomePack: s.hasReceivedWelcomePack || !1,\n      // Extras needed by UI\n      fid: s.fid,\n      farcasterFid: s.farcasterFid,\n      farcasterPfpUrl: s.farcasterPfpUrl,\n      twitterProfileImageUrl: s.twitterProfileImageUrl,\n      // ðŸš€ For PokerBattleTable avatars\n      hasVibeBadge: s.hasVibeBadge || !1,\n      // ðŸš€ BANDWIDTH FIX: Locked cards for attack/pvp modes\n      // Replaces getAvailableCards queries\n      lockedTokenIds: v,\n      // ðŸš€ BANDWIDTH FIX: Linked addresses info\n      // Replaces getLinkedAddresses query for pages using dashboard\n      primaryAddress: s.address,\n      linkedAddresses: s.linkedAddresses || [],\n      isLinkedWallet: i\n    };\n  }, \"handler\")\n}), Q = b({\n  args: { limit: e.optional(e.number()) },\n  handler: /* @__PURE__ */ u(async (r, { limit: t = 200 }) => {\n    try {\n      let a = await r.db.query(\"leaderboardFullCache\").withIndex(\"by_type\", (o) => o.eq(\"type\", \"full_leaderboard\")).first();\n      if (a && a.data && a.data.length > 0) {\n        let o = Date.now() - a.updatedAt, c = 2100 * 1e3;\n        if (o < c)\n          return a.data.slice(0, t).map((f) => ({\n            address: f.address,\n            username: f.username,\n            twitterProfileImageUrl: f.twitterProfileImageUrl,\n            farcasterPfpUrl: f.farcasterPfpUrl,\n            stats: {\n              aura: f.aura,\n              totalPower: f.totalPower\n            },\n            hasDefenseDeck: f.hasDefenseDeck,\n            userIndex: f.userIndex,\n            isBlacklisted: f.isBlacklisted,\n            hasVibeBadge: f.hasVibeBadge\n            // ðŸ› FIX: Was missing!\n          }));\n      }\n      console.log(\"\\u26A0\\uFE0F Leaderboard cache miss - fetching from profiles\");\n      let i = await r.db.query(\"profiles\").withIndex(\"by_defense_aura\", (o) => o.eq(\"hasFullDefenseDeck\", !0)).order(\"desc\").take(t + 100), s = await r.db.query(\"addressLinks\").take(1e3), n = new Set(s.map((o) => o.address.toLowerCase())), d = [];\n      for (let o of i)\n        if (o.address && !n.has(o.address.toLowerCase()) && (d.push(o), d.length >= t))\n          break;\n      return d.map((o) => {\n        let c = o.address || \"unknown\", f = L(c), p = f ? E(c) : null, y = p ? Math.floor(p.amountStolen / 100) : 0;\n        return {\n          address: c,\n          username: o.username || \"unknown\",\n          twitterProfileImageUrl: o.twitterProfileImageUrl,\n          farcasterPfpUrl: o.farcasterPfpUrl,\n          stats: {\n            aura: f ? -y : o.stats?.aura ?? 500,\n            totalPower: f ? -y : o.stats?.totalPower || 0\n          },\n          hasDefenseDeck: o.hasFullDefenseDeck === !0 || (o.defenseDeck?.length || 0) === 5,\n          userIndex: o.userIndex || 0,\n          isBlacklisted: f,\n          hasVibeBadge: o.hasVibeBadge || !1\n        };\n      });\n    } catch (a) {\n      return console.error(\"\\u274C getLeaderboardLite error:\", a), [];\n    }\n  }, \"handler\")\n}), Y = D({\n  args: {},\n  handler: /* @__PURE__ */ u(async (r) => {\n    try {\n      let t = await r.db.query(\"profiles\").withIndex(\"by_defense_aura\", (l) => l.eq(\"hasFullDefenseDeck\", !0)).order(\"desc\").take(250), a = await r.db.query(\"addressLinks\").take(1e3), i = new Set(a.map((l) => l.address.toLowerCase())), s = [];\n      for (let l of t)\n        if (l.address && !i.has(l.address.toLowerCase()) && (s.push(l), s.length >= 200))\n          break;\n      let n = s.map((l) => {\n        let o = l.address || \"unknown\", c = L(o), f = c ? E(o) : null, p = f ? Math.floor(f.amountStolen / 100) : 0;\n        return {\n          address: o,\n          username: l.username || \"unknown\",\n          twitterProfileImageUrl: l.twitterProfileImageUrl,\n          farcasterPfpUrl: l.farcasterPfpUrl,\n          aura: c ? -p : l.stats?.aura ?? 500,\n          totalPower: c ? -p : l.stats?.totalPower || 0,\n          hasDefenseDeck: !0,\n          userIndex: l.userIndex || 0,\n          isBlacklisted: c,\n          hasVibeBadge: l.hasVibeBadge || !1\n          // ðŸ› FIX: Was missing from cache!\n        };\n      }), d = await r.db.query(\"leaderboardFullCache\").withIndex(\"by_type\", (l) => l.eq(\"type\", \"full_leaderboard\")).first();\n      return d ? await r.db.patch(d._id, {\n        data: n,\n        updatedAt: Date.now()\n      }) : await r.db.insert(\"leaderboardFullCache\", {\n        type: \"full_leaderboard\",\n        data: n,\n        updatedAt: Date.now()\n      }), console.log(`\\u2705 Leaderboard cache updated: ${n.length} players`), { success: !0, count: n.length };\n    } catch (t) {\n      return console.error(\"\\u274C updateLeaderboardFullCache error:\", t), { success: !1, error: String(t) };\n    }\n  }, \"handler\")\n}), G = b({\n  args: { username: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { username: t }) => !await r.db.query(\"profiles\").withIndex(\n    \"by_username\",\n    (i) => i.eq(\"username\", t.toLowerCase())\n  ).first(), \"handler\")\n}), X = b({\n  args: { username: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { username: t }) => await r.db.query(\"profiles\").withIndex(\n    \"by_username\",\n    (i) => i.eq(\"username\", t.toLowerCase())\n  ).first(), \"handler\")\n}), J = m({\n  args: {\n    address: e.string(),\n    fid: e.number(),\n    // ðŸ”’ REQUIRED - Must be valid Farcaster FID\n    username: e.string(),\n    // From Farcaster SDK, not user input\n    displayName: e.optional(e.string()),\n    pfpUrl: e.optional(e.string())\n  },\n  handler: /* @__PURE__ */ u(async (r, t) => {\n    if (!t.fid || t.fid <= 0)\n      throw new Error(\"\\u{1F512} Valid Farcaster FID required to create account\");\n    if (!h(t.address))\n      throw new Error(\"Invalid Ethereum address format\");\n    let a = w(t.address), i = t.username.toLowerCase(), s = Date.now(), n = await r.db.query(\"profiles\").withIndex(\"by_fid\", (o) => o.eq(\"farcasterFid\", t.fid)).first();\n    if (n && n.address !== a) {\n      if (!await r.db.query(\"addressLinks\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first()) {\n        await r.db.insert(\"addressLinks\", {\n          address: a,\n          primaryAddress: n.address,\n          linkedAt: s\n        });\n        let c = n.linkedAddresses || [];\n        c.includes(a) || await r.db.patch(n._id, {\n          linkedAddresses: [...c, a],\n          lastUpdated: s\n        }), console.log(`\\u{1F517} MULTI-WALLET: Linked ${a} to existing profile @${n.username} (FID ${t.fid})`);\n      }\n      return n._id;\n    }\n    let d = await r.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", a)).first();\n    if (d) {\n      let o = {};\n      return d.farcasterFid !== t.fid && (o.farcasterFid = t.fid), d.username !== i && (o.username = i), d.farcasterDisplayName !== t.displayName && (o.farcasterDisplayName = t.displayName), d.farcasterPfpUrl !== t.pfpUrl && (o.farcasterPfpUrl = t.pfpUrl), Object.keys(o).length > 0 && (o.lastUpdated = s, await r.db.patch(d._id, o), console.log(`\\u2705 Profile updated for FID ${t.fid} (@${i}):`, Object.keys(o))), d._id;\n    }\n    let l = await r.db.insert(\"profiles\", {\n      address: a,\n      farcasterFid: t.fid,\n      // Use farcasterFid (number)\n      username: i,\n      farcasterDisplayName: t.displayName,\n      farcasterPfpUrl: t.pfpUrl,\n      stats: {\n        totalPower: 0,\n        totalCards: 0,\n        openedCards: 0,\n        unopenedCards: 0,\n        aura: 500,\n        // Initial aura for new players\n        pveWins: 0,\n        pveLosses: 0,\n        pvpWins: 0,\n        pvpLosses: 0,\n        attackWins: 0,\n        attackLosses: 0,\n        defenseWins: 0,\n        defenseLosses: 0\n      },\n      attacksToday: 0,\n      rematchesToday: 0,\n      createdAt: s,\n      lastUpdated: s\n    });\n    return await r.scheduler.runAfter(0, A.economy.addCoins, {\n      address: a,\n      amount: 100,\n      reason: \"Welcome bonus\"\n    }), await r.db.insert(\"personalMissions\", {\n      playerAddress: a,\n      date: \"once\",\n      // One-time mission\n      missionType: \"welcome_gift\",\n      completed: !0,\n      // Auto-completed for new users\n      claimed: !1,\n      // Not claimed yet - player needs to claim\n      reward: 500,\n      completedAt: s\n    }), await r.db.insert(\"cardPacks\", {\n      address: a,\n      packType: \"basic\",\n      unopened: 1,\n      sourceId: \"welcome_pack_auto\",\n      earnedAt: s\n    }), await r.db.patch(l, {\n      hasReceivedWelcomePack: !0,\n      hasReceivedWelcomeGift: !0\n    }), console.log(`\\u{1F195} New profile created for FID ${t.fid} (@${i}) at ${a} - Welcome pack given!`), l;\n  }, \"handler\")\n}), Z = m({\n  args: {\n    primaryAddress: e.string(),\n    newAddress: e.string(),\n    fid: e.number()\n  },\n  handler: /* @__PURE__ */ u(async (r, t) => {\n    if (!t.fid || t.fid <= 0)\n      throw new Error(\"\\u{1F512} Valid Farcaster FID required\");\n    if (!h(t.primaryAddress) || !h(t.newAddress))\n      throw new Error(\"Invalid address format\");\n    let a = w(t.primaryAddress), i = w(t.newAddress), s = Date.now();\n    if (a === i)\n      throw new Error(\"Cannot link wallet to itself\");\n    let n = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    if (n.farcasterFid !== t.fid)\n      throw new Error(\"\\u{1F512} FID mismatch - unauthorized\");\n    let d = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first();\n    if (d && d._id !== n._id)\n      throw d.farcasterFid && d.farcasterFid !== t.fid ? new Error(\"N\\xE3o \\xE9 poss\\xEDvel linkar wallets com FIDs diferentes. Use 'Merge Account' se quiser unir contas.\") : new Error(\"This wallet already has a profile. Cannot link.\");\n    let l = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first();\n    if (l) {\n      if (l.primaryAddress === a)\n        return { success: !0, message: \"Wallet already linked\" };\n      throw new Error(\"This wallet is already linked to another profile\");\n    }\n    await r.db.insert(\"addressLinks\", {\n      address: i,\n      primaryAddress: a,\n      linkedAt: s\n    });\n    let o = n.linkedAddresses || [];\n    return o.includes(i) || await r.db.patch(n._id, {\n      linkedAddresses: [...o, i],\n      lastUpdated: s\n    }), console.log(`\\u{1F517} MANUAL LINK: ${i} linked to @${n.username} (FID ${t.fid})`), { success: !0, message: \"Wallet linked successfully\" };\n  }, \"handler\")\n}), ee = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!t || !h(t))\n      return { primary: null, linked: [] };\n    let a = w(t), i = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first();\n    if (i) {\n      let n = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", i.primaryAddress)).first();\n      if (n)\n        return {\n          primary: n.address,\n          linked: n.linkedAddresses || []\n        };\n    }\n    let s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first();\n    return s ? {\n      primary: s.address,\n      linked: s.linkedAddresses || []\n    } : { primary: null, linked: [] };\n  }, \"handler\")\n}), re = b({\n  args: { address1: e.string(), address2: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address1: t, address2: a }) => {\n    if (!t || !a) return !1;\n    let i = w(t), s = w(a);\n    if (i === s) return !0;\n    let n = await q(r, i), d = await q(r, s);\n    return n === d;\n  }, \"handler\")\n}), se = m({\n  args: { walletAddress: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { walletAddress: t }) => {\n    if (!h(t))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let a = w(t);\n    if (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first())\n      throw new Error(\"Esta wallet j\\xE1 est\\xE1 linkada a um perfil\");\n    if (await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first())\n      throw new Error(\"Esta wallet j\\xE1 tem um perfil\");\n    let n = await r.db.query(\"walletLinkCodes\").withIndex(\"by_profile\", (c) => c.eq(\"profileAddress\", a)).take(50);\n    for (let c of n)\n      await r.db.delete(c._id);\n    let d = Math.floor(1e5 + Math.random() * 9e5).toString(), l = Date.now(), o = l + 30 * 1e3;\n    return await r.db.insert(\"walletLinkCodes\", {\n      code: d,\n      profileAddress: a,\n      // This is the wallet that wants to be linked\n      createdAt: l,\n      expiresAt: o,\n      used: !1\n    }), { code: d, expiresAt: o };\n  }, \"handler\")\n}), te = m({\n  args: {\n    code: e.string(),\n    fidOwnerAddress: e.string()\n    // The wallet of the FID owner (has profile)\n  },\n  handler: /* @__PURE__ */ u(async (r, { code: t, fidOwnerAddress: a }) => {\n    if (!h(a))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let i = w(a), n = (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (p) => p.eq(\"address\", i)).first())?.primaryAddress || i, d = await r.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", n)).first();\n    if (!d)\n      throw new Error(\"Voc\\xEA precisa ter um perfil para linkar wallets\");\n    let l = await r.db.query(\"walletLinkCodes\").withIndex(\"by_code\", (p) => p.eq(\"code\", t)).first();\n    if (!l)\n      throw new Error(\"C\\xF3digo inv\\xE1lido\");\n    if (l.used)\n      throw new Error(\"C\\xF3digo j\\xE1 foi usado\");\n    if (Date.now() > l.expiresAt)\n      throw await r.db.delete(l._id), new Error(\"C\\xF3digo expirado\");\n    let o = l.profileAddress;\n    if (n === o)\n      throw new Error(\"N\\xE3o pode linkar a mesma wallet\");\n    let c = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (p) => p.eq(\"address\", o)).first();\n    if (c) {\n      if (await r.db.patch(l._id, { used: !0 }), c.primaryAddress === n)\n        return { success: !0, message: \"Wallet j\\xE1 est\\xE1 linkada ao seu perfil\" };\n      throw new Error(\"Esta wallet j\\xE1 est\\xE1 linkada a outro perfil\");\n    }\n    await r.db.insert(\"addressLinks\", {\n      address: o,\n      primaryAddress: n,\n      linkedAt: Date.now()\n    });\n    let f = d.linkedAddresses || [];\n    return f.includes(o) || await r.db.patch(d._id, {\n      linkedAddresses: [...f, o]\n    }), await r.scheduler.runAfter(0, A.raidBoss.cleanupLinkedWalletRaidData, {\n      linkedAddress: o\n    }), await r.db.patch(l._id, { used: !0 }), console.log(`\\u{1F517} Wallet linked: ${o} \\u2192 ${n} (cleanup scheduled)`), {\n      success: !0,\n      message: \"Wallet linkada com sucesso!\",\n      profileUsername: d.username,\n      linkedWallet: o\n    };\n  }, \"handler\")\n}), ne = m({\n  args: { fidOwnerAddress: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { fidOwnerAddress: t }) => {\n    if (!h(t))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let a = w(t), s = (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (f) => f.eq(\"address\", a)).first())?.primaryAddress || a, n = await r.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", s)).first();\n    if (!n)\n      throw new Error(\"Voc\\xEA precisa ter um perfil para gerar c\\xF3digo\");\n    let d = await r.db.query(\"walletLinkCodes\").withIndex(\"by_profile\", (f) => f.eq(\"profileAddress\", s)).take(50);\n    for (let f of d)\n      await r.db.delete(f._id);\n    let l = Math.floor(1e5 + Math.random() * 9e5).toString(), o = Date.now(), c = o + 60 * 1e3;\n    return await r.db.insert(\"walletLinkCodes\", {\n      code: l,\n      profileAddress: s,\n      // The FID profile that will receive the linked wallet\n      createdAt: o,\n      expiresAt: c,\n      used: !1,\n      isFidCode: !0\n      // Mark as FID-generated code\n    }), console.log(`\\u{1F517} FID link code generated: ${l} for profile ${n.username}`), { code: l, expiresAt: c };\n  }, \"handler\")\n}), ae = m({\n  args: {\n    code: e.string(),\n    walletToLink: e.string()\n    // The new wallet that wants to be linked\n  },\n  handler: /* @__PURE__ */ u(async (r, { code: t, walletToLink: a }) => {\n    if (!h(a))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let i = w(a);\n    if (await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first())\n      throw new Error(\"Esta wallet j\\xE1 tem um perfil. Use 'Merge Account' para transferir.\");\n    if (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first())\n      throw new Error(\"Esta wallet j\\xE1 est\\xE1 linkada a outro perfil\");\n    let d = await r.db.query(\"walletLinkCodes\").withIndex(\"by_code\", (c) => c.eq(\"code\", t)).first();\n    if (!d)\n      throw new Error(\"C\\xF3digo inv\\xE1lido\");\n    if (d.used)\n      throw new Error(\"C\\xF3digo j\\xE1 foi usado\");\n    if (Date.now() > d.expiresAt)\n      throw await r.db.delete(d._id), new Error(\"C\\xF3digo expirado\");\n    let l = d.profileAddress, o = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", l)).first();\n    if (!o)\n      throw new Error(\"Perfil do c\\xF3digo n\\xE3o encontrado\");\n    if (l === i)\n      throw new Error(\"N\\xE3o pode linkar a mesma wallet\");\n    return await r.db.insert(\"addressLinks\", {\n      address: i,\n      primaryAddress: l,\n      linkedAt: Date.now()\n    }), await r.scheduler.runAfter(0, A.raidBoss.cleanupLinkedWalletRaidData, {\n      linkedAddress: i\n    }), await r.db.patch(d._id, { used: !0 }), console.log(`\\u{1F517} Wallet linked via FID code: ${i} \\u2192 ${l}`), {\n      success: !0,\n      message: \"Wallet linkada com sucesso!\",\n      profileUsername: o.username,\n      linkedWallet: i\n    };\n  }, \"handler\")\n}), ie = m({\n  args: {\n    primaryAddress: e.string(),\n    // The wallet making the request (must be primary)\n    addressToUnlink: e.string()\n    // The wallet to remove\n  },\n  handler: /* @__PURE__ */ u(async (r, { primaryAddress: t, addressToUnlink: a }) => {\n    if (!h(t) || !h(a))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let i = w(t), s = w(a);\n    if (i === s)\n      throw new Error(\"N\\xE3o pode deslinkar a wallet principal\");\n    let n = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first();\n    if (!n)\n      throw new Error(\"Perfil n\\xE3o encontrado\");\n    let d = n.linkedAddresses || [];\n    if (!d.includes(s))\n      throw new Error(\"Esta wallet n\\xE3o est\\xE1 linkada ao perfil\");\n    let l = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (c) => c.eq(\"address\", s)).first();\n    l && await r.db.delete(l._id);\n    let o = d.filter((c) => c !== s);\n    return await r.db.patch(n._id, {\n      linkedAddresses: o\n    }), {\n      success: !0,\n      message: \"Wallet deslinkada com sucesso!\",\n      unlinkedAddress: s\n    };\n  }, \"handler\")\n}), de = m({\n  args: { walletAddress: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { walletAddress: t }) => {\n    if (!h(t))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let a = w(t), i = await r.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", a)).first();\n    if (!i)\n      throw new Error(\"Esta wallet n\\xE3o tem um perfil para mergear\");\n    if (i.farcasterFid)\n      throw new Error(\"Este perfil j\\xE1 tem FID. Use 'Linkar Wallet' ao inv\\xE9s de merge.\");\n    let s = await r.db.query(\"walletLinkCodes\").withIndex(\"by_profile\", (o) => o.eq(\"profileAddress\", a)).take(50);\n    for (let o of s)\n      await r.db.delete(o._id);\n    let n = Math.floor(1e5 + Math.random() * 9e5).toString(), d = Date.now(), l = d + 60 * 1e3;\n    return await r.db.insert(\"walletLinkCodes\", {\n      code: n,\n      profileAddress: a,\n      createdAt: d,\n      expiresAt: l,\n      used: !1\n    }), {\n      code: n,\n      expiresAt: l,\n      profileToMerge: i.username\n    };\n  }, \"handler\")\n}), oe = m({\n  args: {\n    code: e.string(),\n    fidOwnerAddress: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { code: t, fidOwnerAddress: a }) => {\n    if (!h(a))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let i = w(a), n = (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (g) => g.eq(\"address\", i)).first())?.primaryAddress || i, d = await r.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", n)).first();\n    if (!d)\n      throw new Error(\"Voc\\xEA precisa ter um perfil para fazer merge\");\n    if (!d.farcasterFid)\n      throw new Error(\"Seu perfil precisa ter FID para absorver outra conta\");\n    let l = await r.db.query(\"walletLinkCodes\").withIndex(\"by_code\", (g) => g.eq(\"code\", t)).first();\n    if (!l)\n      throw new Error(\"C\\xF3digo inv\\xE1lido\");\n    if (l.used)\n      throw new Error(\"C\\xF3digo j\\xE1 foi usado\");\n    if (Date.now() > l.expiresAt)\n      throw await r.db.delete(l._id), new Error(\"C\\xF3digo expirado\");\n    let o = l.profileAddress;\n    if (n === o)\n      throw new Error(\"N\\xE3o pode mergear consigo mesmo\");\n    let c = await r.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", o)).first();\n    if (!c)\n      throw new Error(\"Perfil antigo n\\xE3o encontrado\");\n    if (c.farcasterFid && c.farcasterFid !== d.farcasterFid)\n      throw new Error(\"N\\xE3o \\xE9 poss\\xEDvel mergear contas com FIDs diferentes. Ambas as contas t\\xEAm FIDs distintos.\");\n    let f = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (g) => g.eq(\"address\", o)).first();\n    if (f && f.primaryAddress !== n)\n      throw new Error(\"Esta wallet j\\xE1 est\\xE1 linkada a outro perfil\");\n    f || await r.db.insert(\"addressLinks\", {\n      address: o,\n      primaryAddress: n,\n      linkedAt: Date.now()\n    });\n    let p = d.linkedAddresses || [];\n    p.includes(o) || await r.db.patch(d._id, {\n      linkedAddresses: [...p, o]\n    }), await r.scheduler.runAfter(0, A.raidBoss.cleanupLinkedWalletRaidData, {\n      linkedAddress: o\n    });\n    let y = c.username;\n    return await r.db.delete(c._id), await r.db.patch(l._id, { used: !0 }), console.log(`\\u{1F500} Account merged: @${y} (${o}) \\u2192 @${d.username} (${n})`), {\n      success: !0,\n      message: `Conta @${y} foi mergeada com sucesso!`,\n      mergedUsername: y,\n      mergedWallet: o,\n      newProfile: d.username\n    };\n  }, \"handler\")\n}), le = m({\n  args: {\n    code: e.string(),\n    fidOwnerAddress: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { code: t, fidOwnerAddress: a }) => {\n    if (!h(a))\n      throw new Error(\"Endere\\xE7o inv\\xE1lido\");\n    let i = w(a), n = (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (k) => k.eq(\"address\", i)).first())?.primaryAddress || i, d = await r.db.query(\"profiles\").withIndex(\"by_address\", (k) => k.eq(\"address\", n)).first();\n    if (!d)\n      throw new Error(\"Voc\\xEA precisa ter um perfil para usar c\\xF3digos\");\n    if (!d.farcasterFid)\n      throw new Error(\"Seu perfil precisa ter FID para linkar/mergear wallets\");\n    let l = await r.db.query(\"walletLinkCodes\").withIndex(\"by_code\", (k) => k.eq(\"code\", t)).first();\n    if (!l)\n      throw new Error(\"C\\xF3digo inv\\xE1lido\");\n    if (l.used)\n      throw new Error(\"C\\xF3digo j\\xE1 foi usado\");\n    if (Date.now() > l.expiresAt)\n      throw await r.db.delete(l._id), new Error(\"C\\xF3digo expirado\");\n    let o = l.profileAddress;\n    if (n === o)\n      throw new Error(\"N\\xE3o pode linkar/mergear consigo mesmo\");\n    let c = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (k) => k.eq(\"address\", o)).first();\n    if (c) {\n      if (await r.db.patch(l._id, { used: !0 }), c.primaryAddress === n)\n        return { success: !0, message: \"Wallet j\\xE1 est\\xE1 linkada ao seu perfil\", type: \"already_linked\" };\n      throw new Error(\"Esta wallet j\\xE1 est\\xE1 linkada a outro perfil\");\n    }\n    let f = await r.db.query(\"profiles\").withIndex(\"by_address\", (k) => k.eq(\"address\", o)).first(), p = \"link\", y;\n    f && (p = \"merge\", y = f.username, await r.db.delete(f._id), console.log(`\\u{1F500} Merged profile @${y} (${o}) into @${d.username}`)), await r.db.insert(\"addressLinks\", {\n      address: o,\n      primaryAddress: n,\n      linkedAt: Date.now()\n    });\n    let g = d.linkedAddresses || [];\n    return g.includes(o) || await r.db.patch(d._id, {\n      linkedAddresses: [...g, o]\n    }), await r.scheduler.runAfter(0, A.raidBoss.cleanupLinkedWalletRaidData, {\n      linkedAddress: o\n    }), await r.db.patch(l._id, { used: !0 }), p === \"merge\" ? (console.log(`\\u{1F500} Account merged: @${y} (${o}) \\u2192 @${d.username} (${n})`), {\n      success: !0,\n      type: \"merge\",\n      message: `Conta @${y} mergeada com sucesso!`,\n      mergedUsername: y,\n      linkedWallet: o\n    }) : (console.log(`\\u{1F517} Wallet linked: ${o} \\u2192 @${d.username} (${n})`), {\n      success: !0,\n      type: \"link\",\n      message: \"Wallet linkada com sucesso!\",\n      linkedWallet: o\n    });\n  }, \"handler\")\n}), ce = b({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    if (!h(t))\n      return null;\n    let a = w(t), s = (await r.db.query(\"addressLinks\").withIndex(\"by_address\", (d) => d.eq(\"address\", a)).first())?.primaryAddress || a, n = await r.db.query(\"walletLinkCodes\").withIndex(\"by_profile\", (d) => d.eq(\"profileAddress\", s)).first();\n    return !n || n.used || Date.now() > n.expiresAt ? null : {\n      code: n.code,\n      expiresAt: n.expiresAt\n    };\n  }, \"handler\")\n}), fe = m({\n  args: {\n    address: e.string(),\n    username: e.string(),\n    stats: e.optional(\n      e.object({\n        totalPower: e.number(),\n        totalCards: e.number(),\n        openedCards: e.number(),\n        unopenedCards: e.number(),\n        pveWins: e.number(),\n        pveLosses: e.number(),\n        pvpWins: e.number(),\n        pvpLosses: e.number(),\n        attackWins: e.number(),\n        attackLosses: e.number(),\n        defenseWins: e.number(),\n        defenseLosses: e.number()\n      })\n    ),\n    defenseDeck: e.optional(e.array(\n      e.object({\n        tokenId: e.string(),\n        power: e.number(),\n        imageUrl: e.string(),\n        name: e.string(),\n        rarity: e.string(),\n        foil: e.optional(e.string()),\n        collection: e.optional(e.string())\n        // FIX: Add collection to type\n      })\n    )),\n    twitter: e.optional(e.string()),\n    twitterHandle: e.optional(e.string()),\n    twitterProfileImageUrl: e.optional(e.string()),\n    fid: e.optional(e.string())\n  },\n  handler: /* @__PURE__ */ u(async (r, t) => {\n    if (!h(t.address))\n      throw new Error(\"Invalid Ethereum address format\");\n    let a = w(t.address), i = t.username.toLowerCase(), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", a)).first(), n = Date.now();\n    if (s)\n      return await r.db.patch(s._id, {\n        ...t,\n        address: a,\n        username: i,\n        lastUpdated: n\n      }), s._id;\n    throw console.log(`\\u{1F6AB} [SECURITY] Blocked legacy account creation for ${a} - must use Farcaster`), new Error(\"\\u{1F512} Account creation requires Farcaster authentication. Please use the miniapp.\");\n  }, \"handler\")\n}), ue = m({\n  args: {\n    address: e.string(),\n    farcasterPfpUrl: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, farcasterPfpUrl: a }) => {\n    let i = w(t), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", i)).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    return await r.db.patch(s._id, { farcasterPfpUrl: a }), { success: !0 };\n  }, \"handler\")\n}), we = m({\n  args: {\n    address: e.string(),\n    totalCards: e.number(),\n    openedCards: e.number(),\n    unopenedCards: e.number(),\n    totalPower: e.number(),\n    vibePower: e.optional(e.number()),\n    vbrsPower: e.optional(e.number()),\n    vibefidPower: e.optional(e.number()),\n    afclPower: e.optional(e.number()),\n    tokenIds: e.optional(e.array(e.string()))\n  },\n  handler: /* @__PURE__ */ u(async (r, t) => {\n    let a = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", w(t.address))).first();\n    if (!a)\n      throw new Error(`Profile not found: ${t.address}`);\n    let s = {\n      stats: {\n        ...a.stats,\n        totalCards: t.totalCards,\n        openedCards: t.openedCards,\n        unopenedCards: t.unopenedCards,\n        totalPower: t.totalPower,\n        ...t.vibePower !== void 0 && { vibePower: t.vibePower },\n        ...t.vbrsPower !== void 0 && { vbrsPower: t.vbrsPower },\n        ...t.vibefidPower !== void 0 && { vibefidPower: t.vibefidPower },\n        ...t.afclPower !== void 0 && { afclPower: t.afclPower }\n      },\n      lastUpdated: Date.now()\n    };\n    t.tokenIds && (s.ownedTokenIds = t.tokenIds), await r.db.patch(a._id, s);\n  }, \"handler\")\n}), pe = m({\n  args: {\n    address: e.string(),\n    stats: e.object({\n      totalPower: e.number(),\n      totalCards: e.number(),\n      openedCards: e.number(),\n      unopenedCards: e.number(),\n      aura: e.optional(e.number()),\n      honor: e.optional(e.number()),\n      // legacy\n      vibePower: e.optional(e.number()),\n      vbrsPower: e.optional(e.number()),\n      vibefidPower: e.optional(e.number()),\n      afclPower: e.optional(e.number()),\n      coqPower: e.optional(e.number()),\n      // DEPRECATED: kept for backward compatibility\n      pveWins: e.number(),\n      pveLosses: e.number(),\n      pvpWins: e.number(),\n      pvpLosses: e.number(),\n      attackWins: e.number(),\n      attackLosses: e.number(),\n      defenseWins: e.number(),\n      defenseLosses: e.number()\n    }),\n    tokenIds: e.optional(e.array(e.string()))\n    // Array of owned tokenIds for validation\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, stats: a, tokenIds: i }) => {\n    let s = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", w(t))).first();\n    if (!s)\n      throw new Error(`Profile not found: ${t}`);\n    let n = {\n      stats: a,\n      lastUpdated: Date.now()\n    };\n    i && (n.ownedTokenIds = i), await r.db.patch(s._id, n);\n  }, \"handler\")\n}), me = m({\n  args: {\n    address: e.string(),\n    defenseDeck: e.array(\n      e.object({\n        tokenId: e.string(),\n        power: e.number(),\n        imageUrl: e.string(),\n        name: e.string(),\n        rarity: e.string(),\n        foil: e.optional(e.string()),\n        collection: e.optional(e.string())\n        // FIX: Add collection to type\n      })\n    )\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, defenseDeck: a }) => {\n    try {\n      let i = await q(r, t);\n      if (L(i))\n        throw new Error(\"Account banned: Defense deck feature disabled for exploiters\");\n      let s = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first();\n      if (!s)\n        throw new Error(`Profile not found: ${t}`);\n      let n = a.map((c) => {\n        let f = {\n          tokenId: c.tokenId,\n          power: c.power,\n          imageUrl: c.imageUrl,\n          name: c.name,\n          rarity: c.rarity,\n          collection: c.collection || \"vibe\"\n          // FIX: Always include collection\n        };\n        return c.foil && c.foil !== \"\" && (f.foil = c.foil), f;\n      }), d = n.map((c) => c.tokenId), l = s.ownedTokenIds || [], o = [.../* @__PURE__ */ new Set([...l, ...d])];\n      await r.db.patch(s._id, {\n        defenseDeck: n,\n        hasFullDefenseDeck: n.length === 5,\n        // ðŸš€ BANDWIDTH FIX: For efficient leaderboard queries\n        ownedTokenIds: o,\n        lastUpdated: Date.now()\n      }), console.log(`\\u2705 Defense deck updated for ${w(t)}: ${n.length} cards, hasFullDefenseDeck: ${n.length === 5}, ownedTokenIds: ${o.length} total`);\n    } catch (i) {\n      throw i;\n    }\n  }, \"handler\")\n}), he = m({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    let a = await q(r, t), i = await r.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", a)).first();\n    if (!i)\n      return {\n        defenseDeck: [],\n        removedCards: [],\n        isValid: !1\n      };\n    if (!i.defenseDeck || i.defenseDeck.length === 0)\n      return {\n        defenseDeck: [],\n        removedCards: [],\n        isValid: !0\n      };\n    if (!i.ownedTokenIds || i.ownedTokenIds.length === 0)\n      return {\n        defenseDeck: i.defenseDeck.filter((o) => typeof o == \"object\"),\n        removedCards: [],\n        isValid: !1,\n        // Not validated\n        warning: \"Defense deck not validated - ownedTokenIds missing\"\n      };\n    let s = new Set(i.ownedTokenIds), n = [], d = [];\n    for (let l of i.defenseDeck)\n      typeof l == \"object\" && l.tokenId && (s.has(l.tokenId) ? n.push(l) : d.push(l));\n    return d.length > 0 && (console.log(`\\u26A0\\uFE0F DEFENSE DECK VALIDATION for ${t}:`), console.log(`  - Original cards: ${i.defenseDeck.length}`), console.log(`  - Valid cards: ${n.length}`), console.log(`  - Removed cards: ${d.map((l) => l.tokenId).join(\", \")}`), console.log(`  - ownedTokenIds count: ${i.ownedTokenIds?.length || 0}`), await r.db.patch(i._id, {\n      defenseDeck: n,\n      lastUpdated: Date.now()\n    }), console.log(`\\u2705 Defense deck updated for ${t}: ${n.length} valid, ${d.length} removed`)), {\n      defenseDeck: n,\n      removedCards: d,\n      isValid: !0\n    };\n  }, \"handler\")\n}), be = m({\n  args: {\n    address: e.string(),\n    attacksToday: e.number(),\n    lastAttackDate: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, attacksToday: a, lastAttackDate: i }) => {\n    let s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", w(t))).first();\n    if (!s)\n      throw new Error(`Profile not found: ${t}`);\n    await r.db.patch(s._id, {\n      attacksToday: a,\n      lastAttackDate: i,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), ye = D({\n  args: {\n    address: e.string(),\n    stat: e.union(\n      e.literal(\"pvpWins\"),\n      e.literal(\"pvpLosses\"),\n      e.literal(\"attackWins\"),\n      e.literal(\"attackLosses\"),\n      e.literal(\"defenseWins\"),\n      e.literal(\"defenseLosses\")\n    )\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, stat: a }) => {\n    let i = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", w(t))).first();\n    if (!i)\n      throw new Error(`Profile not found: ${t}`);\n    let s = { ...i.stats };\n    s[a] = (s[a] || 0) + 1, await r.db.patch(i._id, {\n      stats: s,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), ke = m({\n  args: {\n    address: e.string(),\n    signature: e.string(),\n    message: e.string(),\n    stats: e.object({\n      totalPower: e.number(),\n      totalCards: e.number(),\n      openedCards: e.number(),\n      unopenedCards: e.number(),\n      aura: e.optional(e.number()),\n      honor: e.optional(e.number()),\n      // legacy\n      vibePower: e.optional(e.number()),\n      vbrsPower: e.optional(e.number()),\n      vibefidPower: e.optional(e.number()),\n      afclPower: e.optional(e.number()),\n      coqPower: e.optional(e.number()),\n      // DEPRECATED: kept for backward compatibility\n      pveWins: e.number(),\n      pveLosses: e.number(),\n      pvpWins: e.number(),\n      pvpLosses: e.number(),\n      attackWins: e.number(),\n      attackLosses: e.number(),\n      defenseWins: e.number(),\n      defenseLosses: e.number()\n    })\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, signature: a, message: i, stats: s }) => {\n    let n = await C(r, t, a, i);\n    if (!n.success)\n      throw new Error(`Unauthorized: ${n.error}`);\n    if (!await P(r, t, i))\n      throw new Error(\"Invalid nonce - possible replay attack\");\n    await _(r, t);\n    let l = await r.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", w(t))).first();\n    if (!l)\n      throw new Error(`Profile not found: ${t}`);\n    await r.db.patch(l._id, {\n      stats: s,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), Ie = m({\n  args: {\n    address: e.string(),\n    signature: e.string(),\n    message: e.string(),\n    defenseDeck: e.array(\n      e.object({\n        tokenId: e.string(),\n        power: e.number(),\n        imageUrl: e.string(),\n        name: e.string(),\n        rarity: e.string(),\n        foil: e.optional(e.string()),\n        collection: e.optional(e.string())\n        // FIX: Add collection to type\n      })\n    )\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, signature: a, message: i, defenseDeck: s }) => {\n    let n = w(t);\n    if (L(n))\n      throw new Error(\"Account banned: Defense deck feature disabled for exploiters\");\n    let d = await C(r, t, a, i);\n    if (!d.success)\n      throw new Error(`Unauthorized: ${d.error}`);\n    if (!await P(r, t, i))\n      throw new Error(\"Invalid nonce - possible replay attack\");\n    await _(r, t);\n    let o = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", w(t))).first();\n    if (!o)\n      throw new Error(`Profile not found: ${t}`);\n    await r.db.patch(o._id, {\n      defenseDeck: s,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), qe = m({\n  args: {\n    address: e.string(),\n    signature: e.string(),\n    message: e.string(),\n    stat: e.union(\n      e.literal(\"pvpWins\"),\n      e.literal(\"pvpLosses\"),\n      e.literal(\"attackWins\"),\n      e.literal(\"attackLosses\"),\n      e.literal(\"defenseWins\"),\n      e.literal(\"defenseLosses\")\n    )\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, signature: a, message: i, stat: s }) => {\n    let n = await C(r, t, a, i);\n    if (!n.success)\n      throw new Error(`Unauthorized: ${n.error}`);\n    if (!await P(r, t, i))\n      throw new Error(\"Invalid nonce - possible replay attack\");\n    await _(r, t);\n    let l = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", w(t))).first();\n    if (!l)\n      throw new Error(`Profile not found: ${t}`);\n    let o = { ...l.stats };\n    o[s] = (o[s] || 0) + 1, await r.db.patch(l._id, {\n      stats: o,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), Ae = D({\n  args: {},\n  handler: /* @__PURE__ */ u(async (r) => {\n    let t = await r.db.query(\"profiles\").take(100), a = 0, i = 0;\n    for (let s of t) {\n      if (!s.defenseDeck || s.defenseDeck.length === 0) {\n        i++;\n        continue;\n      }\n      typeof s.defenseDeck[0] == \"string\" ? (await r.db.patch(s._id, {\n        defenseDeck: void 0\n      }), a++) : i++;\n    }\n    return {\n      cleanedCount: a,\n      skippedCount: i,\n      totalProfiles: t.length\n    };\n  }, \"handler\")\n}), De = b({\n  args: {\n    address: e.string(),\n    mode: e.union(e.literal(\"attack\"), e.literal(\"pvp\"), e.literal(\"pve\"))\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, mode: a }) => {\n    let i = await q(r, t), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", i)).first();\n    if (!s)\n      return { lockedTokenIds: [], isLockEnabled: !1 };\n    if (a === \"pve\")\n      return { lockedTokenIds: [], isLockEnabled: !1 };\n    if (!s.defenseDeck || s.defenseDeck.length === 0)\n      return { lockedTokenIds: [], isLockEnabled: !1 };\n    let n = [];\n    for (let d of s.defenseDeck)\n      if (typeof d == \"object\" && d !== null && \"tokenId\" in d) {\n        if (d.collection === \"vibefid\")\n          continue;\n        let l = `${d.collection || \"default\"}:${d.tokenId}`;\n        n.push(l);\n      } else typeof d == \"string\" && n.push(`default:${d}`);\n    return {\n      lockedTokenIds: n,\n      isLockEnabled: !0,\n      lockedCount: n.length\n    };\n  }, \"handler\")\n}), Le = b({\n  args: {\n    address: e.string(),\n    mode: e.union(e.literal(\"defense\"), e.literal(\"raid\"))\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, mode: a }) => {\n    let i = await q(r, t), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", i)).first(), n = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (f) => f.eq(\"address\", i)).first(), d = [], l = [], o = [], c = /* @__PURE__ */ u((f) => `${f.collection || \"default\"}:${f.tokenId}`, \"getCardKey\");\n    if (a === \"defense\") {\n      if (n?.deck)\n        for (let f of n.deck) {\n          if (f.collection === \"vibefid\") continue;\n          let p = c(f);\n          d.push(p), l.push(p);\n        }\n      if (n?.vibefidCard && n.vibefidCard.collection !== \"vibefid\") {\n        let f = c(n.vibefidCard);\n        d.push(f), l.push(f);\n      }\n    } else if (a === \"raid\" && s?.defenseDeck)\n      for (let f of s.defenseDeck)\n        if (typeof f == \"object\" && f !== null && \"tokenId\" in f) {\n          if (f.collection === \"vibefid\") continue;\n          let p = c(f);\n          d.push(p), o.push(p);\n        } else typeof f == \"string\" && (d.push(`default:${f}`), o.push(`default:${f}`));\n    return {\n      lockedTokenIds: d,\n      lockedByRaid: l,\n      lockedByDefense: o,\n      hasConflicts: !1\n      // Will be set by migration check\n    };\n  }, \"handler\")\n}), Ce = m({\n  args: {\n    address: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    let a = w(t), i = await r.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first();\n    if (!i || !i.defenseDeck || i.defenseDeck.length === 0)\n      return { cleaned: 0, removed: [] };\n    let s = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (c) => c.eq(\"address\", a)).first();\n    if (!s || !s.deck || s.deck.length === 0)\n      return { cleaned: 0, removed: [] };\n    let n = /* @__PURE__ */ u((c) => `${c.collection || \"default\"}:${c.tokenId}`, \"getCardKey\"), d = /* @__PURE__ */ new Set();\n    for (let c of s.deck)\n      c.collection !== \"vibefid\" && d.add(n(c));\n    s.vibefidCard && s.vibefidCard.collection !== \"vibefid\" && d.add(n(s.vibefidCard));\n    let l = [], o = i.defenseDeck.filter((c) => {\n      let f, p;\n      if (typeof c == \"object\" && c !== null && \"tokenId\" in c)\n        f = n(c), p = c.collection;\n      else if (typeof c == \"string\")\n        f = `default:${c}`;\n      else\n        return !0;\n      return p === \"vibefid\" ? !0 : d.has(f) ? (l.push(f), !1) : !0;\n    });\n    return l.length > 0 && o.length >= 5 ? (await r.db.patch(i._id, {\n      defenseDeck: o\n    }), console.log(`\\u{1F9F9} Cleaned ${l.length} conflicting cards from ${a}'s defense deck`), {\n      cleaned: l.length,\n      removed: l\n    }) : (l.length > 0 && o.length < 5 && console.log(`\\u26A0\\uFE0F Skipped cleaning ${l.length} cards - would leave only ${o.length} cards in defense`), {\n      cleaned: 0,\n      removed: []\n    });\n  }, \"handler\")\n}), _e = m({\n  args: {\n    address: e.string(),\n    revealedCards: e.array(e.object({\n      tokenId: e.string(),\n      name: e.string(),\n      imageUrl: e.string(),\n      rarity: e.string(),\n      wear: e.optional(e.string()),\n      foil: e.optional(e.string()),\n      collection: e.optional(e.string()),\n      // FIX: Add collection to type\n      character: e.optional(e.string()),\n      power: e.optional(e.number()),\n      attributes: e.optional(e.any())\n    }))\n  },\n  handler: /* @__PURE__ */ u(async (r, t) => {\n    let { address: a, revealedCards: i } = t, s = w(a), n = await r.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", s)).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    let d = n.revealedCardsCache || [], l = new Map(\n      d.map((f) => [f.tokenId, f])\n    ), o = Date.now();\n    for (let f of i)\n      (f.wear || f.character || f.power) && l.set(f.tokenId, {\n        ...f,\n        cachedAt: l.has(f.tokenId) ? l.get(f.tokenId).cachedAt : o\n      });\n    let c = Array.from(l.values());\n    return await r.db.patch(n._id, {\n      revealedCardsCache: c,\n      lastUpdated: o\n    }), {\n      success: !0,\n      cachedCount: c.length,\n      newlyCached: c.length - d.length\n    };\n  }, \"handler\")\n}), Pe = m({\n  args: {\n    address: e.string(),\n    customMusicUrl: e.union(e.string(), e.null())\n    // URL or null to clear\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, customMusicUrl: a }) => {\n    let i = w(t), s = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", i)).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    return await r.db.patch(s._id, {\n      customMusicUrl: a || void 0,\n      // Convert null to undefined for removal\n      lastUpdated: Date.now()\n    }), {\n      success: !0,\n      customMusicUrl: a || null\n    };\n  }, \"handler\")\n}), ve = m({\n  args: {\n    address: e.string(),\n    playlist: e.array(e.string()),\n    // Array of URLs (can be empty)\n    lastPlayedIndex: e.optional(e.number())\n    // Track which song was last played\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t, playlist: a, lastPlayedIndex: i }) => {\n    let s = w(t), n = await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", s)).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    return await r.db.patch(n._id, {\n      musicPlaylist: a.length > 0 ? a : void 0,\n      lastPlayedIndex: i ?? 0,\n      // Clear legacy customMusicUrl if using playlist\n      customMusicUrl: a.length > 0 ? void 0 : n.customMusicUrl,\n      lastUpdated: Date.now()\n    }), {\n      success: !0,\n      playlist: a,\n      lastPlayedIndex: i ?? 0\n    };\n  }, \"handler\")\n}), Ee = b({\n  args: {\n    address: e.string()\n  },\n  handler: /* @__PURE__ */ u(async (r, { address: t }) => {\n    let a = w(t), i = await r.db.query(\"profiles\").withIndex(\"by_address\", (s) => s.eq(\"address\", a)).first();\n    return i ? {\n      playlist: i.musicPlaylist || [],\n      lastPlayedIndex: i.lastPlayedIndex || 0\n    } : { playlist: [], lastPlayedIndex: 0 };\n  }, \"handler\")\n}), $e = $({\n  args: {},\n  handler: /* @__PURE__ */ u(async (r) => await r.db.query(\"profiles\").take(200), \"handler\")\n}), Ue = b({\n  args: { fid: e.number() },\n  handler: /* @__PURE__ */ u(async (r, { fid: t }) => {\n    let a = await r.db.query(\"profiles\").withIndex(\"by_fid\", (i) => i.eq(\"farcasterFid\", t)).first();\n    return a ? {\n      username: a.username || \"Unknown\",\n      fid: a.farcasterFid,\n      address: a.address,\n      coins: a.coins || 0,\n      coinsInbox: a.coinsInbox || 0,\n      lifetimeEarned: a.lifetimeEarned || 0,\n      totalCards: a.stats?.totalCards || 0,\n      wins: (a.stats?.pveWins || 0) + (a.stats?.pvpWins || 0)\n    } : null;\n  }, \"handler\")\n}), xe = b({\n  args: { limit: e.optional(e.number()) },\n  handler: /* @__PURE__ */ u(async (r, { limit: t = 10 }) => (await r.db.query(\"profiles\").take(500)).filter((s) => (s.coins || 0) > 0).sort((s, n) => (n.coins || 0) - (s.coins || 0)).slice(0, t).map((s) => ({\n    username: s.username || \"Unknown\",\n    fid: s.farcasterFid,\n    coins: s.coins || 0,\n    coinsInbox: s.coinsInbox || 0,\n    lifetimeEarned: s.lifetimeEarned || 0\n  })), \"handler\")\n}), Fe = b({\n  args: {},\n  handler: /* @__PURE__ */ u(async (r) => {\n    let t = await r.db.query(\"profiles\").collect(), a = 0, i = 0, s = 0;\n    for (let n of t)\n      n.farcasterFid ? i++ : n.fid ? a++ : s++;\n    return {\n      total: t.length,\n      migrated: i,\n      legacy: a,\n      noFid: s,\n      needsMigration: a > 0\n    };\n  }, \"handler\")\n}), We = D({\n  args: {},\n  handler: /* @__PURE__ */ u(async (r) => {\n    let t = await r.db.query(\"profiles\").collect(), a = 0, i = [];\n    for (let s of t) {\n      if (s.farcasterFid) continue;\n      let n = s.fid;\n      if (n)\n        try {\n          let d = parseInt(n, 10);\n          !isNaN(d) && d > 0 ? (await r.db.patch(s._id, { farcasterFid: d }), a++, console.log(`\\u2705 Migrated profile ${s.username} (FID: ${d})`)) : i.push(`Invalid FID for ${s.username}: ${n}`);\n        } catch (d) {\n          i.push(`Error migrating ${s.username}: ${d.message}`);\n        }\n    }\n    return console.log(`\\u{1F504} Migration complete: ${a} profiles migrated`), {\n      migratedCount: a,\n      errors: i\n    };\n  }, \"handler\")\n});\nexport {\n  Ce as cleanConflictingDefenseCards,\n  Ae as cleanOldDefenseDecks,\n  Fe as countLegacyFidProfiles,\n  ne as generateFidLinkCode,\n  se as generateLinkCode,\n  de as generateMergeCode,\n  ce as getActiveLinkCode,\n  De as getAvailableCards,\n  K as getDefenseDeckOnly,\n  Q as getLeaderboardLite,\n  ee as getLinkedAddresses,\n  Le as getLockedCardsForDeckBuilding,\n  Ee as getMusicPlaylist,\n  R as getProfile,\n  Ue as getProfileByFid,\n  X as getProfileByUsername,\n  H as getProfileDashboard,\n  O as getProfileLite,\n  xe as getTopByCoins,\n  he as getValidatedDefenseDeck,\n  ye as incrementStat,\n  qe as incrementStatSecure,\n  re as isSameUser,\n  G as isUsernameAvailable,\n  Z as linkWallet,\n  $e as listAll,\n  We as migrateLegacyFidProfiles,\n  ie as unlinkWallet,\n  be as updateAttacks,\n  Pe as updateCustomMusic,\n  me as updateDefenseDeck,\n  Ie as updateDefenseDeckSecure,\n  ue as updateFarcasterPfp,\n  Y as updateLeaderboardFullCache,\n  ve as updateMusicPlaylist,\n  _e as updateRevealedCardsCache,\n  pe as updateStats,\n  we as updateStatsLite,\n  ke as updateStatsSecure,\n  fe as upsertProfile,\n  J as upsertProfileFromFarcaster,\n  ae as useFidLinkCode,\n  te as useLinkCode,\n  oe as useMergeCode,\n  le as useUnifiedCode\n};\n//# sourceMappingURL=profiles.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/profiles.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"resolvePrimaryAddress\", \"ctx\", \"address\", \"normalizedAddress\", \"normalizeAddress\", \"link\", \"q\", \"__name\", \"getProfile\", \"query\", \"v\", \"isValidAddress\", \"addressLink\", \"profile\", \"getProfileLite\", \"getDefenseDeckOnly\", \"targetAddress\", \"getProfileDashboard\", \"primaryAddress\", \"isLinkedWallet\", \"today\", \"dailyLimits\", \"isToday\", \"MAX_PVE_ATTEMPTS\", \"pveUsed\", \"pveRemaining\", \"COOLDOWN_MS\", \"lastConversion\", \"timeSinceLastConversion\", \"cooldownRemaining\", \"canEarnMore\", \"lockedTokenIds\", \"card\", \"cardKey\", \"getLeaderboardLite\", \"limit\", \"cache\", \"cacheAge\", \"cacheMaxAge\", \"p\", \"topProfiles\", \"allLinks\", \"linkedAddressSet\", \"primaryProfiles\", \"blacklisted\", \"isBlacklisted\", \"blacklistInfo\", \"getBlacklistInfo\", \"punishment\", \"error\", \"updateLeaderboardFullCache\", \"internalMutation\", \"cachedData\", \"existingCache\", \"isUsernameAvailable\", \"username\", \"getProfileByUsername\", \"upsertProfileFromFarcaster\", \"mutation\", \"args\", \"now\", \"existingByFid\", \"currentLinked\", \"existing\", \"updates\", \"newId\", \"internal\", \"linkWallet\", \"newAddress\", \"existingProfile\", \"existingLink\", \"getLinkedAddresses\", \"primaryProfile\", \"isSameUser\", \"address1\", \"address2\", \"normalized1\", \"normalized2\", \"primary1\", \"primary2\", \"generateLinkCode\", \"walletAddress\", \"existingCodes\", \"code\", \"expiresAt\", \"useLinkCode\", \"fidOwnerAddress\", \"normalizedFidOwner\", \"linkCode\", \"walletToLink\", \"generateFidLinkCode\", \"useFidLinkCode\", \"normalizedWallet\", \"fidProfileAddress\", \"unlinkWallet\", \"addressToUnlink\", \"normalizedPrimary\", \"normalizedUnlink\", \"linkedAddresses\", \"updatedLinked\", \"addr\", \"generateMergeCode\", \"useMergeCode\", \"fidProfile\", \"mergeCode\", \"oldWalletAddress\", \"oldProfile\", \"oldUsername\", \"useUnifiedCode\", \"targetProfile\", \"operationType\", \"mergedUsername\", \"getActiveLinkCode\", \"upsertProfile\", \"updateFarcasterPfp\", \"farcasterPfpUrl\", \"updateStatsLite\", \"updateStats\", \"stats\", \"tokenIds\", \"updateDefenseDeck\", \"defenseDeck\", \"cleanedDefenseDeck\", \"cleaned\", \"defenseTokenIds\", \"existingOwnedIds\", \"mergedOwnedIds\", \"getValidatedDefenseDeck\", \"ownedTokenIdsSet\", \"validCards\", \"removedCards\", \"c\", \"updateAttacks\", \"attacksToday\", \"lastAttackDate\", \"incrementStat\", \"stat\", \"newStats\", \"updateStatsSecure\", \"signature\", \"message\", \"auth\", \"authenticateActionWithBackend\", \"verifyNonce\", \"incrementNonce\", \"updateDefenseDeckSecure\", \"incrementStatSecure\", \"cleanOldDefenseDecks\", \"profiles\", \"cleanedCount\", \"skippedCount\", \"getAvailableCards\", \"mode\", \"getLockedCardsForDeckBuilding\", \"raidDeck\", \"lockedByRaid\", \"lockedByDefense\", \"getCardKey\", \"cleanConflictingDefenseCards\", \"raidCardKeys\", \"collection\", \"updateRevealedCardsCache\", \"revealedCards\", \"cacheMap\", \"mergedCache\", \"updateCustomMusic\", \"customMusicUrl\", \"updateMusicPlaylist\", \"playlist\", \"lastPlayedIndex\", \"getMusicPlaylist\", \"listAll\", \"internalQuery\", \"getProfileByFid\", \"fid\", \"getTopByCoins\", \"a\", \"b\", \"countLegacyFidProfiles\", \"legacyCount\", \"migratedCount\", \"noFidCount\", \"migrateLegacyFidProfiles\", \"errors\", \"legacyFid\", \"fidNumber\", \"e\"]\n}\n"},{"path":"pvp.js","source":"import {\n  b as m\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  b as p\n} from \"./_deps/XHHFSPHN.js\";\nimport {\n  a as w,\n  c as f,\n  d as l,\n  e as y\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as t\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/pvp.ts\nvar b = \"0x062b914668f3fd35c3ae02e699cb82e1cf4be18b\", x = y({\n  args: {\n    address: t.string(),\n    amount: t.number(),\n    txHash: t.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let { address: n, amount: r, txHash: s } = o, i = n.toLowerCase();\n    if (!p(s))\n      throw new Error(\"Invalid transaction hash format\");\n    let a = await e.runAction(m.blockchainVerify.verifyTransaction, {\n      txHash: s,\n      expectedFrom: i,\n      expectedTo: b,\n      expectedAmountWei: (BigInt(r) * BigInt(10 ** 18)).toString(),\n      isERC20: !0\n      // VBMS is an ERC20 token\n    });\n    if (!a.isValid)\n      throw console.error(`[PvP] TX verification failed for ${s}: ${a.error}`), new Error(`Transaction verification failed: ${a.error}`);\n    return await e.runMutation(m.pvp.recordEntryFeeInternal, {\n      address: i,\n      amount: r,\n      txHash: s\n    }), { success: !0 };\n  }, \"handler\")\n}), P = l({\n  args: {\n    address: t.string(),\n    amount: t.number(),\n    txHash: t.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let { address: n, amount: r, txHash: s } = o;\n    if (await e.db.query(\"pvpEntryFees\").withIndex(\"by_txHash\", (a) => a.eq(\"txHash\", s)).first())\n      throw new Error(\"Transaction already processed\");\n    return await e.db.insert(\"pvpEntryFees\", {\n      address: n,\n      amount: r,\n      txHash: s,\n      timestamp: Date.now(),\n      used: !1,\n      verified: !0\n      // Mark as blockchain-verified\n    }), console.log(`\\u2694\\uFE0F PvP entry fee recorded (VERIFIED): ${r} VBMS from ${n}`), {\n      success: !0\n    };\n  }, \"handler\")\n}), A = f({\n  args: {\n    address: t.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let n = o.address.toLowerCase(), r = await e.db.query(\"pvpEntryFees\").withIndex(\n      \"by_address_used\",\n      (s) => s.eq(\"address\", n).eq(\"used\", !1)\n    ).order(\"desc\").first();\n    if (!r)\n      throw new Error(\"No valid entry fee found. Please pay entry fee first.\");\n    return await e.db.patch(r._id, {\n      used: !0,\n      usedAt: Date.now()\n    }), console.log(`\\u2705 Entry fee used for ${n}: ${r.amount} VBMS`), {\n      success: !0,\n      amount: r.amount\n    };\n  }, \"handler\")\n}), F = w({\n  args: {\n    address: t.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let n = o.address.toLowerCase(), r = await e.db.query(\"pvpEntryFees\").withIndex(\n      \"by_address_used\",\n      (s) => s.eq(\"address\", n).eq(\"used\", !1)\n    ).order(\"desc\").first();\n    return {\n      hasEntryFee: !!r,\n      amount: r?.amount || 0\n    };\n  }, \"handler\")\n}), _ = l({\n  args: {\n    address: t.string(),\n    rewardAmount: t.number(),\n    roomCode: t.optional(t.string())\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let { address: n, rewardAmount: r, roomCode: s } = o, i = n.toLowerCase();\n    return await e.db.insert(\"vbmsInbox\", {\n      address: i,\n      amount: r,\n      source: \"pvp_win\",\n      metadata: {\n        roomCode: s\n      },\n      claimedAt: void 0,\n      timestamp: Date.now()\n    }), console.log(`\\u{1F3C6} PvP reward sent to inbox: ${r} TESTVBMS for ${n}`), {\n      success: !0,\n      rewardAmount: r\n    };\n  }, \"handler\")\n}), I = f({\n  args: {\n    address: t.string(),\n    roomCode: t.optional(t.string())\n  },\n  handler: /* @__PURE__ */ c(async (e, o) => {\n    let { address: n, roomCode: r } = o, s = n.toLowerCase(), i = await e.db.query(\"pvpEntryFees\").withIndex(\"by_address\", (d) => d.eq(\"address\", s)).filter((d) => d.eq(d.field(\"used\"), !1)).first();\n    if (!i)\n      return {\n        success: !1,\n        error: \"No valid entry fee found\"\n      };\n    await e.db.patch(i._id, {\n      used: !0,\n      usedAt: Date.now()\n    });\n    let a = 40, u = await e.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", s)).first();\n    if (u) {\n      let d = u.coins || 0;\n      await e.db.patch(u._id, {\n        coins: d + a,\n        lifetimeEarned: (u.lifetimeEarned || 0) + a\n      }), await e.db.insert(\"coinTransactions\", {\n        address: s,\n        amount: a,\n        type: \"earn\",\n        source: \"pvp_win\",\n        description: \"PvP win reward\",\n        timestamp: Date.now(),\n        balanceBefore: d,\n        balanceAfter: d + a\n      });\n    }\n    return console.log(`\\u{1F3C6} PvP reward claimed: ${a} TESTVBMS for ${s}`), {\n      success: !0,\n      rewardAmount: a\n    };\n  }, \"handler\")\n});\nexport {\n  F as checkEntryFee,\n  I as claimPvPWinReward,\n  x as recordEntryFee,\n  P as recordEntryFeeInternal,\n  _ as sendPvPRewardToInbox,\n  A as useEntryFee\n};\n//# sourceMappingURL=pvp.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/pvp.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"VBMS_POOL_TROLL\", \"recordEntryFee\", \"action\", \"v\", \"__name\", \"ctx\", \"args\", \"address\", \"amount\", \"txHash\", \"normalizedAddress\", \"isValidTxHash\", \"verification\", \"internal\", \"recordEntryFeeInternal\", \"internalMutation\", \"q\", \"useEntryFee\", \"mutation\", \"entryFee\", \"checkEntryFee\", \"query\", \"sendPvPRewardToInbox\", \"rewardAmount\", \"roomCode\", \"claimPvPWinReward\", \"REWARD_AMOUNT\", \"profile\", \"currentBalance\"]\n}\n"},{"path":"quests.js","source":"import {\n  a as g\n} from \"./_deps/LKY7FFHL.js\";\nimport {\n  a as x\n} from \"./_deps/HHLKWD3J.js\";\nimport {\n  a as D,\n  c as _,\n  d as A\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as m\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as y\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/quests.ts\nfunction W(t) {\n  let o = new Uint32Array(1);\n  return crypto.getRandomValues(o), o[0] % t;\n}\ny(W, \"cryptoRandomInt\");\nvar E = [\n  {\n    type: \"win_pve_3\",\n    description: \"Win 3 PvE battles\",\n    requirement: { count: 3 },\n    reward: 150,\n    difficulty: \"easy\"\n  },\n  {\n    type: \"win_pve_5\",\n    description: \"Win 5 PvE battles\",\n    requirement: { count: 5 },\n    reward: 300,\n    difficulty: \"medium\"\n  },\n  {\n    type: \"defeat_gangster\",\n    description: \"Defeat Gangster difficulty AI\",\n    requirement: { count: 1, difficulty: \"gangster\" },\n    reward: 250,\n    difficulty: \"medium\"\n  },\n  {\n    type: \"defeat_gigachad\",\n    description: \"Defeat Gigachad difficulty AI\",\n    requirement: { count: 1, difficulty: \"gigachad\" },\n    reward: 500,\n    difficulty: \"hard\"\n  },\n  {\n    type: \"play_pvp_3\",\n    description: \"Play 3 PvP matches (win or lose)\",\n    requirement: { count: 3 },\n    reward: 200,\n    difficulty: \"medium\"\n  },\n  {\n    type: \"win_pvp_3\",\n    description: \"Win 3 PvP matches\",\n    requirement: { count: 3 },\n    reward: 400,\n    difficulty: \"hard\"\n  },\n  {\n    type: \"win_streak_3\",\n    description: \"Win 3 battles in a row\",\n    requirement: { count: 3 },\n    reward: 350,\n    difficulty: \"hard\"\n  },\n  {\n    type: \"complete_5_battles\",\n    description: \"Complete 5 battles (any mode)\",\n    requirement: { count: 5 },\n    reward: 250,\n    difficulty: \"easy\"\n  },\n  {\n    type: \"perfect_day\",\n    description: \"Win 2 PvE and 2 PvP battles\",\n    requirement: { count: 2 },\n    // 2 of each\n    reward: 600,\n    difficulty: \"hard\"\n  }\n], M = D({\n  args: {},\n  handler: /* @__PURE__ */ y(async (t) => {\n    let o = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], a = await t.db.query(\"dailyQuests\").withIndex(\"by_date\", (d) => d.eq(\"date\", o)).first();\n    return a || null;\n  }, \"handler\")\n}), U = _({\n  args: {},\n  handler: /* @__PURE__ */ y(async (t) => {\n    let o = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], a = await t.db.query(\"dailyQuests\").withIndex(\"by_date\", (s) => s.eq(\"date\", o)).first();\n    if (a)\n      return a;\n    let d = W(E.length), e = E[d], n = await t.db.insert(\"dailyQuests\", {\n      date: o,\n      type: e.type,\n      description: e.description,\n      requirement: e.requirement,\n      reward: e.reward,\n      difficulty: e.difficulty,\n      createdAt: Date.now()\n    }), r = await t.db.get(n);\n    return console.log(\"\\u2705 Generated daily quest:\", e.type, \"for\", o), r;\n  }, \"handler\")\n}), L = A({\n  args: {},\n  handler: /* @__PURE__ */ y(async (t) => {\n    let o = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], a = await t.db.query(\"dailyQuests\").withIndex(\"by_date\", (r) => r.eq(\"date\", o)).first();\n    if (a)\n      return a._id;\n    let d = W(E.length), e = E[d];\n    return await t.db.insert(\"dailyQuests\", {\n      date: o,\n      type: e.type,\n      description: e.description,\n      requirement: e.requirement,\n      reward: e.reward,\n      difficulty: e.difficulty,\n      createdAt: Date.now()\n    });\n  }, \"handler\")\n}), z = D({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ y(async (t, { address: o }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], d = g(o), e = await t.db.query(\"dailyQuests\").withIndex(\"by_date\", (l) => l.eq(\"date\", a)).first();\n    if (!e)\n      return null;\n    let n = await t.db.query(\"questProgress\").withIndex(\n      \"by_player_date\",\n      (l) => l.eq(\"playerAddress\", d).eq(\"questDate\", a)\n    ).first();\n    if (n)\n      return {\n        quest: e,\n        progress: n.completed ? e.requirement.count || 1 : 0,\n        completed: n.completed,\n        claimed: n.claimed\n      };\n    let r = [], s = 0, i = !1;\n    switch (e.type) {\n      case \"win_pve_3\":\n      case \"win_pve_5\":\n        s = r.filter(\n          (u) => u.type === \"pve\" && u.result === \"win\"\n        ).length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"defeat_gangster\":\n      case \"defeat_gigachad\":\n        s = r.filter(\n          (u) => u.type === \"pve\" && u.result === \"win\" && u.difficulty === e.requirement.difficulty\n        ).length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"play_pvp_3\":\n        s = r.filter((u) => u.type === \"pvp\").length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"win_pvp_3\":\n        s = r.filter(\n          (u) => u.type === \"pvp\" && u.result === \"win\"\n        ).length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"win_streak_3\":\n        let l = 0, c = 0, f = r.sort((u, v) => u.timestamp - v.timestamp);\n        for (let u of f)\n          u.result === \"win\" ? (l++, c = Math.max(c, l)) : l = 0;\n        s = c, i = c >= (e.requirement.count || 0);\n        break;\n      case \"low_power_win\":\n        s = r.filter(\n          (u) => u.type === \"pve\" && u.result === \"win\" && u.playerPower <= (e.requirement.maxPower || 0)\n        ).length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"complete_5_battles\":\n        s = r.length, i = s >= (e.requirement.count || 0);\n        break;\n      case \"perfect_day\":\n        let k = r.filter(\n          (u) => u.type === \"pve\" && u.result === \"win\"\n        ).length, h = r.filter(\n          (u) => u.type === \"pvp\" && u.result === \"win\"\n        ).length, p = e.requirement.count || 2;\n        s = Math.min(k, h), i = k >= p && h >= p;\n        break;\n    }\n    return {\n      quest: e,\n      progress: s,\n      completed: i,\n      claimed: !1\n    };\n  }, \"handler\")\n}), N = _({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ y(async (t, { address: o }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], d = g(o), e = await t.db.query(\"dailyQuests\").withIndex(\"by_date\", (p) => p.eq(\"date\", a)).first();\n    if (!e)\n      throw new Error(\"No daily quest available\");\n    let n = await t.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", d)).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    let r = await t.db.query(\"questProgress\").withIndex(\n      \"by_player_date\",\n      (p) => p.eq(\"playerAddress\", d).eq(\"questDate\", a)\n    ).first();\n    if (r && r.claimed)\n      throw new Error(\"Quest reward already claimed\");\n    let s = new Date(a).getTime(), i = s + 1440 * 60 * 1e3, l = await t.db.query(\"matches\").withIndex(\"by_player\", (p) => p.eq(\"playerAddress\", d)).filter(\n      (p) => p.and(\n        p.gte(p.field(\"timestamp\"), s),\n        p.lt(p.field(\"timestamp\"), i)\n      )\n    ).take(100), c = !1;\n    switch (e.type) {\n      case \"win_pve_3\":\n      case \"win_pve_5\":\n        c = l.filter((w) => w.type === \"pve\" && w.result === \"win\").length >= (e.requirement.count || 0);\n        break;\n      case \"defeat_gangster\":\n      case \"defeat_gigachad\":\n        c = l.filter(\n          (w) => w.type === \"pve\" && w.result === \"win\" && w.difficulty === e.requirement.difficulty\n        ).length >= (e.requirement.count || 0);\n        break;\n      case \"play_pvp_3\":\n        c = l.filter((w) => w.type === \"pvp\").length >= (e.requirement.count || 0);\n        break;\n      case \"win_pvp_3\":\n        c = l.filter((w) => w.type === \"pvp\" && w.result === \"win\").length >= (e.requirement.count || 0);\n        break;\n      case \"low_power_win\":\n        c = l.filter(\n          (w) => w.type === \"pve\" && w.result === \"win\" && w.playerPower <= (e.requirement.maxPower || 0)\n        ).length >= (e.requirement.count || 0);\n        break;\n      case \"complete_5_battles\":\n        c = l.length >= (e.requirement.count || 0);\n        break;\n      case \"perfect_day\":\n        let p = l.filter(\n          (w) => w.type === \"pve\" && w.result === \"win\"\n        ).length, u = l.filter(\n          (w) => w.type === \"pvp\" && w.result === \"win\"\n        ).length;\n        c = p >= (e.requirement.count || 2) && u >= (e.requirement.count || 2);\n        break;\n      case \"win_streak_3\":\n        let v = 0, I = 0, C = l.sort((w, B) => w.timestamp - B.timestamp);\n        for (let w of C)\n          w.result === \"win\" ? (v++, I = Math.max(I, v)) : v = 0;\n        c = I >= (e.requirement.count || 0);\n        break;\n    }\n    if (!c)\n      throw new Error(\"Quest not completed yet\");\n    let f = n.coins || 0, k = f + e.reward, h = (n.lifetimeEarned || 0) + e.reward;\n    return await t.db.patch(n._id, {\n      coins: k,\n      lifetimeEarned: h,\n      lastUpdated: Date.now()\n    }), await x(t, {\n      address: d,\n      type: \"earn\",\n      amount: e.reward,\n      source: \"daily_quest\",\n      description: `Completed daily quest: ${e.type}`,\n      balanceBefore: f,\n      balanceAfter: k\n    }), console.log(`\\u{1F4B0} Daily quest reward added to balance: ${e.reward} TESTVBMS for ${d}. Balance: ${f} \\u2192 ${k}`), r ? await t.db.patch(r._id, {\n      claimed: !0,\n      claimedAt: Date.now()\n    }) : await t.db.insert(\"questProgress\", {\n      playerAddress: d,\n      questDate: a,\n      completed: !0,\n      claimed: !0,\n      claimedAt: Date.now()\n    }), {\n      success: !0,\n      reward: e.reward,\n      newBalance: k,\n      questName: e.description\n    };\n  }, \"handler\")\n}), T = {\n  attackWins: {\n    id: \"weekly_attack_wins\",\n    name: \"Attack Master\",\n    description: \"Win 20 attacks\",\n    target: 20,\n    reward: 300,\n    // Weekly attack wins reward\n    icon: \"\\u{1F3C6}\"\n  },\n  totalMatches: {\n    id: \"weekly_total_matches\",\n    name: \"Active Player\",\n    description: \"Play 30 matches (any mode)\",\n    target: 30,\n    reward: 200,\n    icon: \"\\u{1F3B2}\"\n  },\n  defenseWins: {\n    id: \"weekly_defense_wins\",\n    name: \"Fortress\",\n    description: \"Defend successfully 10 times\",\n    target: 10,\n    reward: 400,\n    icon: \"\\u{1F6E1}\\uFE0F\"\n  },\n  pveStreak: {\n    id: \"weekly_pve_streak\",\n    name: \"Unbeatable\",\n    description: \"Win 10 PvE battles in a row\",\n    target: 10,\n    reward: 500,\n    icon: \"\\u{1F525}\"\n  }\n}, b = {\n  rank1: 1e3,\n  // 1st place\n  rank2: 750,\n  // 2nd place\n  rank3: 500,\n  // 3rd place\n  rank4to10: 300\n  // 4th-10th place\n  // SEM top20 ou top50 - APENAS TOP 10!\n}, V = D({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ y(async (t, { address: o }) => {\n    let a = g(o), d = S(), e = await t.db.query(\"weeklyProgress\").withIndex(\n      \"by_player_week\",\n      (n) => n.eq(\"playerAddress\", a).eq(\"weekStart\", d)\n    ).first();\n    return e ? {\n      weekStart: d,\n      weekEnd: q(),\n      quests: e.quests || P()\n    } : {\n      weekStart: d,\n      weekEnd: q(),\n      quests: P()\n    };\n  }, \"handler\")\n}), j = A({\n  args: {\n    address: m.string(),\n    questId: m.string(),\n    increment: m.optional(m.number())\n  },\n  handler: /* @__PURE__ */ y(async (t, { address: o, questId: a, increment: d = 1 }) => {\n    let e = g(o), n = S(), r = await t.db.query(\"weeklyProgress\").withIndex(\n      \"by_player_week\",\n      (i) => i.eq(\"playerAddress\", e).eq(\"weekStart\", n)\n    ).first();\n    if (!r) {\n      let i = await t.db.insert(\"weeklyProgress\", {\n        playerAddress: e,\n        weekStart: n,\n        quests: P()\n      });\n      if (r = await t.db.get(i), !r) throw new Error(\"Failed to create weekly progress\");\n    }\n    let s = { ...r.quests };\n    return s[a] && (s[a].current = Math.min(\n      (s[a].current || 0) + d,\n      s[a].target\n    ), s[a].completed = s[a].current >= s[a].target), await t.db.patch(r._id, { quests: s }), { success: !0, progress: s[a] };\n  }, \"handler\")\n}), F = _({\n  args: {\n    address: m.string(),\n    won: m.boolean()\n  },\n  handler: /* @__PURE__ */ y(async (t, { address: o, won: a }) => {\n    let d = g(o), e = S(), n = await t.db.query(\"weeklyProgress\").withIndex(\n      \"by_player_week\",\n      (l) => l.eq(\"playerAddress\", d).eq(\"weekStart\", e)\n    ).first();\n    if (!n) {\n      let l = await t.db.insert(\"weeklyProgress\", {\n        playerAddress: d,\n        weekStart: e,\n        quests: P(),\n        pveStreakCurrent: 0\n      });\n      if (n = await t.db.get(l), !n) throw new Error(\"Failed to create weekly progress\");\n    }\n    let r = { ...n.quests }, s = \"weekly_pve_streak\", i = n.pveStreakCurrent || 0;\n    return a ? (i += 1, r[s] && (r[s].current = Math.max(\n      r[s].current || 0,\n      i\n    ), r[s].completed = r[s].current >= r[s].target)) : i = 0, await t.db.patch(n._id, {\n      quests: r,\n      pveStreakCurrent: i\n    }), {\n      success: !0,\n      currentStreak: i,\n      maxStreak: r[s]?.current || 0\n    };\n  }, \"handler\")\n}), G = _({\n  args: {\n    address: m.string(),\n    questId: m.string()\n  },\n  handler: /* @__PURE__ */ y(async (t, { address: o, questId: a }) => {\n    let d = g(o), e = S(), n = await t.db.query(\"weeklyProgress\").withIndex(\n      \"by_player_week\",\n      (p) => p.eq(\"playerAddress\", d).eq(\"weekStart\", e)\n    ).first();\n    if (!n || !n.quests[a])\n      throw new Error(\"Quest not found\");\n    let r = n.quests[a];\n    if (!r.completed)\n      throw new Error(\"Quest not completed yet\");\n    if (r.claimed)\n      throw new Error(\"Reward already claimed\");\n    let s = Object.values(T).find((p) => p.id === a);\n    if (!s)\n      throw new Error(\"Quest definition not found\");\n    let i = await t.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", d)).first();\n    if (!i)\n      throw new Error(\"Profile not found\");\n    let l = s.reward, c = i.coins || 0, f = c + l, k = (i.lifetimeEarned || 0) + l;\n    await t.db.patch(i._id, {\n      coins: f,\n      lifetimeEarned: k,\n      lastUpdated: Date.now()\n    }), await x(t, {\n      address: d,\n      type: \"earn\",\n      amount: l,\n      source: \"weekly_quest\",\n      description: `Completed weekly quest: ${s.name}`,\n      balanceBefore: c,\n      balanceAfter: f\n    }), console.log(`\\u{1F4B0} Weekly quest reward added to balance: ${l} TESTVBMS for ${d}. Balance: ${c} \\u2192 ${f}`);\n    let h = { ...n.quests };\n    return h[a].claimed = !0, await t.db.patch(n._id, { quests: h }), {\n      success: !0,\n      reward: l,\n      newBalance: f,\n      questName: s.description\n    };\n  }, \"handler\")\n}), H = A({\n  args: {},\n  handler: /* @__PURE__ */ y(async (t) => {\n    let o = await t.db.query(\"profiles\").withIndex(\"by_total_power\").order(\"desc\").take(10);\n    if (o.length === 0)\n      return { distributed: 0, rewards: [] };\n    let a = [];\n    for (let d = 0; d < o.length; d++) {\n      let e = d + 1, n = o[d], r = 0;\n      if (e === 1 ? r = b.rank1 : e === 2 ? r = b.rank2 : e === 3 ? r = b.rank3 : e <= 10 && (r = b.rank4to10), r > 0) {\n        let s = n.coins || 0;\n        await t.db.patch(n._id, {\n          coins: s + r,\n          lifetimeEarned: (n.lifetimeEarned || 0) + r\n        }), await t.db.insert(\"coinTransactions\", {\n          address: n.address.toLowerCase(),\n          amount: r,\n          type: \"earn\",\n          source: \"weekly_quest\",\n          description: `Weekly quest reward (rank ${e})`,\n          timestamp: Date.now(),\n          balanceBefore: n.coins || 0,\n          balanceAfter: (n.coins || 0) + r\n        }), console.log(`\\u{1F4B0} Weekly leaderboard reward added to balance: ${r} TESTVBMS for ${n.address}. Balance: ${s} \\u2192 ${s + r}`), a.push({\n          rank: e,\n          username: n.username,\n          address: n.address,\n          reward: r\n        });\n      }\n    }\n    return {\n      distributed: a.length,\n      rewards: a,\n      timestamp: Date.now()\n    };\n  }, \"handler\")\n}), K = D({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ y(async (t, { address: o }) => {\n    let a = g(o), d = S(), e = await t.db.query(\"weeklyRewards\").withIndex(\n      \"by_player_week\",\n      (c) => c.eq(\"playerAddress\", a).eq(\"weekStart\", d)\n    ).first();\n    if (e)\n      return {\n        eligible: !1,\n        reason: \"already_claimed\",\n        rank: e.rank,\n        reward: e.reward,\n        claimed: !0,\n        claimedAt: e.claimedAt,\n        nextResetDate: q()\n      };\n    let n = await t.db.query(\"leaderboardCache\").withIndex(\"by_type\", (c) => c.eq(\"type\", \"top10_power\")).first(), r;\n    n && n.addresses.length > 0 ? r = n.addresses : r = (await t.db.query(\"profiles\").withIndex(\"by_total_power\").order(\"desc\").take(10)).map((f) => g(f.address));\n    let s = r.indexOf(a);\n    if (s === -1)\n      return {\n        eligible: !1,\n        reason: \"not_top_10\",\n        rank: null,\n        reward: 0,\n        claimed: !1,\n        nextResetDate: q()\n      };\n    let i = s + 1, l = 0;\n    return i === 1 ? l = b.rank1 : i === 2 ? l = b.rank2 : i === 3 ? l = b.rank3 : i <= 10 && (l = b.rank4to10), {\n      eligible: !0,\n      reason: \"can_claim\",\n      rank: i,\n      reward: l,\n      claimed: !1,\n      nextResetDate: q()\n    };\n  }, \"handler\")\n}), Y = _({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ y(async (t, { address: o }) => {\n    let a = g(o), d = S(), e = await t.db.query(\"profiles\").withIndex(\"by_total_power\").order(\"desc\").take(10), n = e.findIndex(\n      (h) => g(h.address) === a\n    );\n    if (n === -1)\n      throw new Error(\"Not eligible: Must be in TOP 10 leaderboard\");\n    let r = n + 1, s = e[n], i = 0;\n    if (r === 1 ? i = b.rank1 : r === 2 ? i = b.rank2 : r === 3 ? i = b.rank3 : r <= 10 && (i = b.rank4to10), await t.db.query(\"weeklyRewards\").withIndex(\n      \"by_player_week\",\n      (h) => h.eq(\"playerAddress\", a).eq(\"weekStart\", d)\n    ).first())\n      throw new Error(\"Already claimed reward for this week\");\n    let c = s.coins || 0, f = c + i, k = (s.lifetimeEarned || 0) + i;\n    return console.log(\"[claimWeeklyLeaderboardReward] Adding to coins:\", {\n      address: a,\n      currentBalance: c,\n      reward: i,\n      newBalance: f\n    }), await t.db.patch(s._id, {\n      coins: f,\n      lifetimeEarned: k,\n      lastUpdated: Date.now()\n    }), console.log(`\\u{1F4B0} Weekly leaderboard reward added to balance: ${i} TESTVBMS for ${a}. Balance: ${c} \\u2192 ${f}`), await t.db.insert(\"weeklyRewards\", {\n      playerAddress: a,\n      username: s.username,\n      weekStart: d,\n      rank: r,\n      reward: i,\n      claimedAt: Date.now(),\n      method: \"manual_claim\"\n      // vs \"auto_distribution\"\n    }), {\n      success: !0,\n      rank: r,\n      reward: i,\n      newBalance: f,\n      rewardName: `Leaderboard Rank #${r}`,\n      nextResetDate: q()\n    };\n  }, \"handler\")\n});\nfunction P() {\n  return Object.fromEntries(\n    Object.values(T).map((t) => [\n      t.id,\n      {\n        current: 0,\n        target: t.target,\n        completed: !1,\n        claimed: !1\n      }\n    ])\n  );\n}\ny(P, \"initializeWeeklyQuests\");\nfunction S() {\n  let t = /* @__PURE__ */ new Date(), o = t.getUTCDay(), a = new Date(t);\n  return a.setUTCDate(t.getUTCDate() - o), a.setUTCHours(0, 0, 0, 0), a.toISOString().split(\"T\")[0];\n}\ny(S, \"getLastSunday\");\nfunction q() {\n  let t = /* @__PURE__ */ new Date(), o = t.getUTCDay(), a = new Date(t);\n  return a.setUTCDate(t.getUTCDate() + (7 - o)), a.setUTCHours(0, 0, 0, 0), a.toISOString().split(\"T\")[0];\n}\ny(q, \"getNextSunday\");\nvar J = A({\n  args: {},\n  handler: /* @__PURE__ */ y(async (t) => {\n    let a = (await t.db.query(\"profiles\").withIndex(\"by_total_power\").order(\"desc\").take(10)).map((e) => g(e.address)), d = await t.db.query(\"leaderboardCache\").withIndex(\"by_type\", (e) => e.eq(\"type\", \"top10_power\")).first();\n    return d ? await t.db.patch(d._id, {\n      addresses: a,\n      updatedAt: Date.now()\n    }) : await t.db.insert(\"leaderboardCache\", {\n      type: \"top10_power\",\n      addresses: a,\n      updatedAt: Date.now()\n    }), { updated: !0, count: a.length };\n  }, \"handler\")\n});\nexport {\n  b as WEEKLY_LEADERBOARD_REWARDS,\n  K as checkWeeklyRewardEligibility,\n  N as claimQuestReward,\n  Y as claimWeeklyLeaderboardReward,\n  G as claimWeeklyReward,\n  H as distributeWeeklyRewards,\n  U as ensureDailyQuest,\n  L as generateDailyQuest,\n  M as getDailyQuest,\n  z as getQuestProgress,\n  V as getWeeklyProgress,\n  J as updateLeaderboardCache,\n  F as updatePveStreak,\n  j as updateWeeklyProgress\n};\n//# sourceMappingURL=quests.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/quests.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"cryptoRandomInt\", \"max\", \"randomBytes\", \"__name\", \"QUEST_POOL\", \"getDailyQuest\", \"query\", \"ctx\", \"today\", \"existingQuest\", \"q\", \"ensureDailyQuest\", \"mutation\", \"existing\", \"randomIndex\", \"questTemplate\", \"questId\", \"quest\", \"generateDailyQuest\", \"internalMutation\", \"getQuestProgress\", \"v\", \"address\", \"normalizedAddress\", \"normalizeAddress\", \"progress\", \"matches\", \"currentProgress\", \"completed\", \"m\", \"streak\", \"maxStreak\", \"sortedMatches\", \"a\", \"b\", \"match\", \"pveWins\", \"pvpWins\", \"requiredCount\", \"claimQuestReward\", \"profile\", \"existingProgress\", \"todayStart\", \"todayEnd\", \"isCompleted\", \"currentBalance\", \"newBalance\", \"lifetimeEarned\", \"logTransaction\", \"WEEKLY_QUESTS\", \"WEEKLY_LEADERBOARD_REWARDS\", \"getWeeklyProgress\", \"lastSunday\", \"getLastSunday\", \"getNextSunday\", \"initializeWeeklyQuests\", \"updateWeeklyProgress\", \"increment\", \"progressId\", \"quests\", \"updatePveStreak\", \"won\", \"currentStreak\", \"claimWeeklyReward\", \"questDef\", \"reward\", \"newLifetimeEarned\", \"updatedQuests\", \"distributeWeeklyRewards\", \"topPlayers\", \"rewards\", \"i\", \"rank\", \"player\", \"checkWeeklyRewardEligibility\", \"currentWeek\", \"existingClaim\", \"cache\", \"topPlayerAddresses\", \"p\", \"playerIndex\", \"claimWeeklyLeaderboardReward\", \"now\", \"dayOfWeek\", \"nextSunday\", \"updateLeaderboardCache\", \"addresses\", \"existingCache\"]\n}\n"},{"path":"raidBoss.js","source":"import {\n  b as P\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  h as U\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as I,\n  b as Q,\n  c as R,\n  d as D\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as o\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as b\n} from \"./_deps/5B5TEMMX.js\";\n\n// lib/ipfs-assets.ts\nvar z = {\n  // Videos (HIGH PRIORITY - largest files)\n  \"/davyjones.mp4\": \"https://ipfs.filebase.io/ipfs/QmcQ2mSo2gXQsn1t5rnnrFnGMXwLGBw3S4NdJz9VWWHJHi\",\n  \"/tie.mp4\": \"https://ipfs.filebase.io/ipfs/QmNudh4HxzX36Lt5k9URHxDCLUthhFtryeJoWr9Rt4mqmB\",\n  \"/littlebird.mp4\": \"https://ipfs.filebase.io/ipfs/QmYtzRiye5xWfz4pJy2SpXAsFW4kcKHYQ2PdZS8dJo6qHi\",\n  \"/derrotanumeronsei.mp4\": \"https://ipfs.filebase.io/ipfs/QmaDCwu6Uf8tSfaqfXj4LQ1VCmcH3AaW4AhePefKe1NTvS\",\n  \"/1206 (1).mp4\": \"https://ipfs.filebase.io/ipfs/QmNwnxJ7Mmf8Voh4ZacfZnD5aPPhA6HAP54jrNnxj3idZd\",\n  \"/1206(1).mp4\": \"https://ipfs.filebase.io/ipfs/QmUSSjyGgAbaR9ukmXjTrSTUGyKev1CGDie7JohemkSiWX\",\n  // Large covers and images (HIGH PRIORITY)\n  \"/covers/vibefid-cover.png\": \"https://ipfs.filebase.io/ipfs/QmRYubyLozbaECBfBhW59Y5LpZ5sLkqNuAHivR3FyeSYEi\",\n  \"/covers/cumioh-cover.png\": \"https://ipfs.filebase.io/ipfs/QmPghDo2HMJUxwhsZwEGfnHZpcFwDGaBXm9NLVAUPtBL2E\",\n  \"/hero.jpg\": \"https://ipfs.filebase.io/ipfs/QmXpeouxdQdZ3nTn4WKi8uyXdS3Z8TccQz5ChKQ9MxdQH9\",\n  \"/icon.png\": \"https://ipfs.filebase.io/ipfs/QmQXqHYvtCKgXq6Xn3YJJJwvPLqXDQFnVk4cF4g4PJQX9K\",\n  // Difficulties (frequently accessed)\n  \"/images/difficulties/gooner.png\": \"https://ipfs.filebase.io/ipfs/QmWav3qcf8BFMQdQ3VBAZ3qsWEEJTcX4kKsyUKhpPsJvpL\",\n  \"/images/difficulties/gangster.png\": \"https://ipfs.filebase.io/ipfs/QmRL6bb9zrb9yE5gqwfWBfuXWrKH9JVNb5bNZD9TXcZkPF\",\n  \"/images/difficulties/gigachad.png\": \"https://ipfs.filebase.io/ipfs/QmceAG1MZrSvR4YdCqN5gYmLkC1H3nP9Fk8x1g7YBRv4VZ\",\n  \"/images/difficulties/goofy.png\": \"https://ipfs.filebase.io/ipfs/QmeFzFaY1RfMH5YM8FQEZkbN7yJUq8TsL4mVJM9u9K2Wt3\",\n  \"/images/difficulties/gey.png\": \"https://ipfs.filebase.io/ipfs/QmRFZUenp8TTQj6dZRBZvgDGxQx6Q6cz5BypvbDBm8jZu2\",\n  // Screenshots\n  \"/screenshot-1.png\": \"https://ipfs.filebase.io/ipfs/QmPAV3PEZBg7RJQ3x8Gkrb4K8hQs5xKvZy9x4Bxo6mQvPp\",\n  \"/screenshot-2.png\": \"https://ipfs.filebase.io/ipfs/QmWi7EYMMYAaSWNCgT2WL4ZN6K8ry3v6pxVnZ5zcvyTHk7\",\n  \"/screenshot-3.png\": \"https://ipfs.filebase.io/ipfs/QmNMNBURvudv4kDQjJSU6Z4Lx9kHg8mLR7eFpUFshWjEZP\",\n  // Backgrounds\n  \"/fundo1.jpg\": \"https://ipfs.filebase.io/ipfs/QmPTVKUq9nEY3hYGFsKbLhLCqfCAuRpjCaE6fjyJ5N1iyQ\",\n  \"/fundo2.jpg\": \"https://ipfs.filebase.io/ipfs/QmfBb7a2nBh78xmz7Y8fRZdAqXwW4nLT7kLHqN8cxKyLmF\",\n  \"/profile-bg.jpg\": \"https://ipfs.filebase.io/ipfs/QmemgMVC1LN78M2z7QzWGQRFYKvJm7x2N5JJuLoq8JEQxP\",\n  \"/referral-bg.jpg\": \"https://ipfs.filebase.io/ipfs/QmboM4BjkXAdGQ2JpzkR6R4V4bXJjQ9p7rD7ZP7EgFm3Km\",\n  \"/easteregg-background.png\": \"https://ipfs.filebase.io/ipfs/QmSUT8TjeLwgN7VjX5Q3fJJzLpDRm9yLRQxLM6KEbjQmX8\",\n  // Raid boss images (frequently accessed)\n  \"/images/raid-bosses/vibe/common.png\": \"https://ipfs.filebase.io/ipfs/QmeCAYE1XxXmN1HkAW6G8qF9xBQKtQhyjGDkHyR5dJ2kZB\",\n  \"/images/raid-bosses/vibe/rare.png\": \"https://ipfs.filebase.io/ipfs/QmdQLDWdZ2o9YGLqL9EjmZdLyXFPNjJj6bQnJ9qPX3Rv5q\",\n  \"/images/raid-bosses/vibe/epic.png\": \"https://ipfs.filebase.io/ipfs/QmcHJXBtUBqzXcwqvQ4zWnTHZKvJQxP8yCJxzJC7YKBbPF\",\n  \"/images/raid-bosses/vibe/legendary.png\": \"https://ipfs.filebase.io/ipfs/QmeDwVnc5p3VLwqXxWNUdPQhLyjE8q3M6WLkE9JfPHqJGF\",\n  \"/images/raid-bosses/vibe/mythic.png\": \"https://ipfs.filebase.io/ipfs/Qmf3NxhsWKAtG9pWLq6B2JV7nPdZVHXw4TZcY8Z7VbFmQn\",\n  \"/images/raid-bosses/vibefid/common.png\": \"https://ipfs.filebase.io/ipfs/QmS4TMMdnbHrSYjLxKqKZbLqKYTZC8GqWvHhHAJYJWqYQN\",\n  \"/images/raid-bosses/vibefid/rare.png\": \"https://ipfs.filebase.io/ipfs/QmUPRMEdkaJbLqWgXjL7Vh4FsqJ8kEd3xTvJpYZHQ8UeFn\",\n  \"/images/raid-bosses/vibefid/epic.png\": \"https://ipfs.filebase.io/ipfs/QmUdMMGFr65vKKAo9KYbXxq7DgWqQx5TN3JbPHQbM8N8YF\",\n  \"/images/raid-bosses/vibefid/legendary.png\": \"https://ipfs.filebase.io/ipfs/QmZuPVRQ25UDCkLqKfBmQJZWEjL2LKdQjC3kPCNqYNqvq5\",\n  \"/images/raid-bosses/vibefid/mythic.png\": \"https://ipfs.filebase.io/ipfs/QmbTnaqPAZrD8qY5rVq3eFSvH4aRd8Y8ULwJ3Jmq2MUKTz\",\n  \"/images/raid-bosses/gmvbrs/common.png\": \"https://ipfs.filebase.io/ipfs/QmaY7putRHzptPECMNxFGBMCvQBSV9obPmWYD2LkCDDQiM\",\n  \"/images/raid-bosses/gmvbrs/rare.png\": \"https://ipfs.filebase.io/ipfs/QmZpi1qg6njKEqJq8Gvg4y9nVFJxvQJYN7E8r5T2LZBQH5\",\n  \"/images/raid-bosses/gmvbrs/epic.png\": \"https://ipfs.filebase.io/ipfs/QmaZPiBbLC8ey9qFVK3Td9PJx5SvP8CWvx5Px1nFWNmVKH\",\n  \"/images/raid-bosses/gmvbrs/legendary.png\": \"https://ipfs.filebase.io/ipfs/QmQdYjuHt5mbJRTLmZJNFM3hCYWVQBTJvKQNx7bQzPxzFe\",\n  \"/images/raid-bosses/gmvbrs/mythic.png\": \"https://ipfs.filebase.io/ipfs/QmbcASVTxfi7TQxQ8EvDCWZTQKvCJN3QLqmvDzVyVAqxJg\",\n  \"/images/raid-bosses/cumioh/common.png\": \"https://ipfs.filebase.io/ipfs/Qmdi3uuGQwErJxqJPPW3qQN8FYnwQzP5qRKvJL3ZQPKLQE\",\n  \"/images/raid-bosses/cumioh/rare.png\": \"https://ipfs.filebase.io/ipfs/QmSsZ9fks6onw7V8KqmKFQBqRTdJLJxQ3mVE8wPMQDmLZv\",\n  \"/images/raid-bosses/cumioh/epic.png\": \"https://ipfs.filebase.io/ipfs/QmXA9bWDZzNWc7NmQJFkTQ8DVzMPJXvFYLEPv9C8qYwz7Z\",\n  \"/images/raid-bosses/cumioh/legendary.png\": \"https://ipfs.filebase.io/ipfs/QmPvrvwVY4rMD3QKxPQKpXJvKN3LqmJdCQwN5NzYPNKqFZ\",\n  \"/images/raid-bosses/cumioh/mythic.png\": \"https://ipfs.filebase.io/ipfs/QmS6JQqFWT33ZPdXqJzVqEPzPQJPqNQqJRzPqLKQLbqPMQ\",\n  // Card backs and misc\n  \"/card-back.png\": \"https://ipfs.filebase.io/ipfs/QmZrRir8uDx3jKrx6hfDFhRJXmxXaU3rfQJAbTqqk9Bod5\",\n  \"/pack-closed.png\": \"https://ipfs.filebase.io/ipfs/QmP7Q6Sz8p8eEuF8nYS2MX1CdTCe6jQpBy81iQtvQDCJRn\",\n  \"/pack-cover.png\": \"https://ipfs.filebase.io/ipfs/QmZrRir8uDx3jKrx6hfDFhRJXmxXaU3rfQJAbTqqk9Bod5\",\n  \"/splash.png\": \"https://ipfs.filebase.io/ipfs/QmZ1cfYCW9mDzD4V9iMhVoUQGFd1QwNLfMmEEBQKwEfFSb\",\n  \"/og-image.png\": \"https://ipfs.filebase.io/ipfs/QmU27iyqYXLYD3P7xKZqVNdqLKq8mFvZKq8LNdqLKqYXLY\"\n};\nfunction T(r) {\n  return z[r] || r;\n}\nb(T, \"getAssetUrl\");\n\n// lib/raid-boss/boss-cards.ts\nvar s = {\n  common: 1e6,\n  // 1M HP\n  rare: 5e6,\n  // 5M HP\n  epic: 25e6,\n  // 25M HP\n  legendary: 5e7,\n  // 50M HP\n  mythic: 1e8\n  // 100M HP\n}, L = {\n  common: 1e3,\n  // 1k coins\n  rare: 5e3,\n  // 5k coins\n  epic: 25e3,\n  // 25k coins\n  legendary: 1e5,\n  // 100k coins\n  mythic: 5e5\n  // 500k coins\n}, M = [\n  // Round 1 (indices 0-6)\n  \"gmvbrs\",\n  \"vibe\",\n  \"vibefid\",\n  \"viberuto\",\n  \"meowverse\",\n  \"viberotbangers\",\n  \"gmvbrs\",\n  // Round 2 (indices 7-13)\n  \"vibe\",\n  \"vibefid\",\n  \"viberuto\",\n  \"meowverse\",\n  \"viberotbangers\",\n  \"gmvbrs\",\n  \"vibe\",\n  // Round 3 (indices 14-20)\n  \"vibefid\",\n  \"viberuto\",\n  \"meowverse\",\n  \"viberotbangers\",\n  \"gmvbrs\",\n  \"vibe\",\n  \"vibefid\",\n  // Round 4 (indices 21-27)\n  \"viberuto\",\n  \"meowverse\",\n  \"viberotbangers\",\n  \"gmvbrs\",\n  \"vibe\",\n  \"vibefid\",\n  \"viberuto\",\n  // Round 5 (indices 28-34)\n  \"meowverse\",\n  \"viberotbangers\",\n  \"gmvbrs\",\n  \"vibe\",\n  \"vibefid\",\n  \"viberuto\",\n  \"meowverse\"\n], F = [\n  // Round 1 (indices 0-6)\n  \"Common\",\n  \"Rare\",\n  \"Epic\",\n  \"Legendary\",\n  \"Mythic\",\n  \"Common\",\n  \"Rare\",\n  // Round 2 (indices 7-13)\n  \"Epic\",\n  \"Legendary\",\n  \"Mythic\",\n  \"Common\",\n  \"Rare\",\n  \"Epic\",\n  \"Legendary\",\n  // Round 3 (indices 14-20)\n  \"Mythic\",\n  \"Common\",\n  \"Rare\",\n  \"Epic\",\n  \"Legendary\",\n  \"Mythic\",\n  \"Common\",\n  // Round 4 (indices 21-27)\n  \"Rare\",\n  \"Epic\",\n  \"Legendary\",\n  \"Mythic\",\n  \"Common\",\n  \"Rare\",\n  \"Epic\",\n  // Round 5 (indices 28-34)\n  \"Legendary\",\n  \"Mythic\",\n  \"Common\",\n  \"Rare\",\n  \"Epic\",\n  \"Legendary\",\n  \"Mythic\"\n], N = {\n  Common: {\n    tokenId: \"gmvbrs-boss-common\",\n    collection: \"gmvbrs\",\n    name: \"Street Brawler\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/gmvbrs/common.png\",\n    hp: s.common,\n    description: \"A common street fighter looking for trouble\"\n  },\n  Rare: {\n    tokenId: \"gmvbrs-boss-rare\",\n    collection: \"gmvbrs\",\n    name: \"Vibe Enforcer\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/gmvbrs/rare.png\",\n    hp: s.rare,\n    description: \"Elite muscle from the Vibe crew\"\n  },\n  Epic: {\n    tokenId: \"gmvbrs-boss-epic\",\n    collection: \"gmvbrs\",\n    name: \"Underboss Reaper\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/gmvbrs/epic.png\",\n    hp: s.epic,\n    description: \"Second-in-command of the most dangerous gang\"\n  },\n  Legendary: {\n    tokenId: \"gmvbrs-boss-legendary\",\n    collection: \"gmvbrs\",\n    name: \"Don Crimson\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/gmvbrs/legendary.png\",\n    hp: s.legendary,\n    description: \"Legendary crime lord who runs the city\"\n  },\n  Mythic: {\n    tokenId: \"gmvbrs-boss-mythic\",\n    collection: \"gmvbrs\",\n    name: \"The Godfather\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/gmvbrs/mythic.png\",\n    hp: s.mythic,\n    description: \"The untouchable kingpin of all organized crime\"\n  }\n}, V = {\n  Common: {\n    tokenId: \"vibe-boss-common\",\n    collection: \"vibe\",\n    name: \"Petty Thief\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/vibe/common.png\",\n    hp: s.common,\n    description: \"Small-time criminal with big ambitions\"\n  },\n  Rare: {\n    tokenId: \"vibe-boss-rare\",\n    collection: \"vibe\",\n    name: \"Armed Robber\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/vibe/rare.png\",\n    hp: s.rare,\n    description: \"Dangerous outlaw wanted for multiple heists\"\n  },\n  Epic: {\n    tokenId: \"vibe-boss-epic\",\n    collection: \"vibe\",\n    name: \"Cartel Lieutenant\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/vibe/epic.png\",\n    hp: s.epic,\n    description: \"High-ranking member of a powerful cartel\"\n  },\n  Legendary: {\n    tokenId: \"vibe-boss-legendary\",\n    collection: \"vibe\",\n    name: \"El Diablo\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/vibe/legendary.png\",\n    hp: s.legendary,\n    description: \"Feared crime lord with a ruthless reputation\"\n  },\n  Mythic: {\n    tokenId: \"vibe-boss-mythic\",\n    collection: \"vibe\",\n    name: \"The Phantom\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/vibe/mythic.png\",\n    hp: s.mythic,\n    description: \"The most wanted criminal - identity unknown\"\n  }\n}, H = {\n  Common: {\n    tokenId: \"vibefid-boss-common\",\n    collection: \"vibefid\",\n    name: \"Digital Wanderer\",\n    rarity: \"Common\",\n    power: 10,\n    imageUrl: \"/images/raid-bosses/vibefid/common.png\",\n    hp: s.common,\n    description: \"A common FID holder exploring the metaverse\"\n  },\n  Rare: {\n    tokenId: \"vibefid-boss-rare\",\n    collection: \"vibefid\",\n    name: \"Cyber Sentinel\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/vibefid/rare.png\",\n    hp: s.rare,\n    description: \"Guardian of the digital realm\"\n  },\n  Epic: {\n    tokenId: \"vibefid-boss-epic\",\n    collection: \"vibefid\",\n    name: \"Protocol Enforcer\",\n    rarity: \"Epic\",\n    power: 50,\n    imageUrl: \"/images/raid-bosses/vibefid/epic.png\",\n    hp: s.epic,\n    description: \"Elite defender of the blockchain\"\n  },\n  Legendary: {\n    tokenId: \"vibefid-boss-legendary\",\n    collection: \"vibefid\",\n    name: \"The Architect\",\n    rarity: \"Legendary\",\n    power: 100,\n    imageUrl: \"/images/raid-bosses/vibefid/legendary.png\",\n    hp: s.legendary,\n    description: \"Master builder of the decentralized future\"\n  },\n  Mythic: {\n    tokenId: \"vibefid-boss-mythic\",\n    collection: \"vibefid\",\n    name: \"Satoshi Reborn\",\n    rarity: \"Mythic\",\n    power: 600,\n    imageUrl: \"/images/raid-bosses/vibefid/mythic.png\",\n    hp: s.mythic,\n    description: \"The legendary creator returns from the shadows\"\n  }\n}, J = {\n  Common: {\n    tokenId: \"viberuto-boss-common\",\n    collection: \"viberuto\",\n    name: \"Vibeten\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/viberuto/common.png\",\n    hp: s.common,\n    description: \"The ninja who defeated Uchiha Madara\"\n  },\n  Rare: {\n    tokenId: \"viberuto-boss-rare\",\n    collection: \"viberuto\",\n    name: \"Vibe-bee\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/viberuto/rare.png\",\n    hp: s.rare,\n    description: \"Super rapper and jinchuuriki\"\n  },\n  Epic: {\n    tokenId: \"viberuto-boss-epic\",\n    collection: \"viberuto\",\n    name: \"Vibenato\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/viberuto/epic.png\",\n    hp: s.epic,\n    description: \"Teleports, still late\"\n  },\n  Legendary: {\n    tokenId: \"viberuto-boss-legendary\",\n    collection: \"viberuto\",\n    name: \"Viberama\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/viberuto/legendary.png\",\n    hp: s.legendary,\n    description: \"Broke every rival, including his wallet\"\n  },\n  Mythic: {\n    tokenId: \"viberuto-boss-mythic\",\n    collection: \"viberuto\",\n    name: \"Vibomoro\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/viberuto/mythic.png\",\n    hp: s.mythic,\n    description: \"Inherited chakra, distributed it like free samples\"\n  }\n}, X = {\n  Common: {\n    tokenId: \"2429\",\n    collection: \"meowverse\",\n    name: \"Heavenly Chonk\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/meowverse/common.png\",\n    hp: s.common,\n    description: \"A gentle sky guardian powered by serenity\\u2026 and snacks\"\n  },\n  Rare: {\n    tokenId: \"2430\",\n    collection: \"meowverse\",\n    name: \"Noodle Nimbus\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/meowverse/rare.png\",\n    hp: s.rare,\n    description: \"Rides a legendary cloud, powering up between noodle bites\"\n  },\n  Epic: {\n    tokenId: \"2431\",\n    collection: \"meowverse\",\n    name: \"Blade Paws\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/meowverse/epic.png\",\n    hp: s.epic,\n    description: \"A brave cat warrior on a quest, swinging a legendary sword of light\"\n  },\n  Legendary: {\n    tokenId: \"2432\",\n    collection: \"meowverse\",\n    name: \"Goldra, the Nine Claws\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/meowverse/legendary.png\",\n    hp: s.legendary,\n    description: \"A golden beast with living serpents for fur and a petrifying glare\"\n  },\n  Mythic: {\n    tokenId: \"2433\",\n    collection: \"meowverse\",\n    name: \"King Clawster\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/meowverse/mythic.png\",\n    hp: s.mythic,\n    description: \"A streetwise feline king who rules with sharp claws and sharper instincts\"\n  }\n}, j = {\n  Common: {\n    tokenId: \"7464\",\n    collection: \"poorlydrawnpepes\",\n    name: \"Pepe Fish\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/poorlydrawnpepes/common.png\",\n    hp: s.common,\n    description: \"Swims in circles, finds nothing, vibes anyway\"\n  },\n  Rare: {\n    tokenId: \"7465\",\n    collection: \"poorlydrawnpepes\",\n    name: \"Pepe Dev\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/poorlydrawnpepes/rare.png\",\n    hp: s.rare,\n    description: \"Lives on caffeine, commits bugs with confidence\"\n  },\n  Epic: {\n    tokenId: \"7466\",\n    collection: \"poorlydrawnpepes\",\n    name: \"Angel Investor Pepe\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/poorlydrawnpepes/epic.png\",\n    hp: s.epic,\n    description: \"Turns your chaos into capital. Maybe\"\n  },\n  Legendary: {\n    tokenId: \"7467\",\n    collection: \"poorlydrawnpepes\",\n    name: \"Vibecat Pepe\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/poorlydrawnpepes/legendary.png\",\n    hp: s.legendary,\n    description: \"Breaks every rule and still demands treats\"\n  },\n  Mythic: {\n    tokenId: \"7468\",\n    collection: \"poorlydrawnpepes\",\n    name: \"Wizard Pepe\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/poorlydrawnpepes/mythic.png\",\n    hp: s.mythic,\n    description: \"Casts spells nobody asked for, results unpredictable\"\n  }\n}, G = {\n  Common: {\n    tokenId: \"6456\",\n    collection: \"teampothead\",\n    name: \"Smoke Naga\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/teampothead/common.png\",\n    hp: s.common,\n    description: \"A swirling cloud-serpent that forgets what it\\u2019s doing mid-attack\"\n  },\n  Rare: {\n    tokenId: \"6457\",\n    collection: \"teampothead\",\n    name: \"Bulbablaze\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/teampothead/rare.png\",\n    hp: s.rare,\n    description: \"A leafy frog forever stuck in a confused, happy haze\"\n  },\n  Epic: {\n    tokenId: \"6458\",\n    collection: \"teampothead\",\n    name: \"Vaporeonado\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/teampothead/epic.png\",\n    hp: s.epic,\n    description: \"A spacey sea-creature clutching a mystical bong like a comfort toy\"\n  },\n  Legendary: {\n    tokenId: \"6459\",\n    collection: \"teampothead\",\n    name: \"Dr. Buddaf\\xE9\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/teampothead/legendary.png\",\n    hp: s.legendary,\n    description: \"A smug green mastermind whose plans vanish as fast as his focus\"\n  },\n  Mythic: {\n    tokenId: \"6460\",\n    collection: \"teampothead\",\n    name: \"Big Bluntkarp\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/teampothead/mythic.png\",\n    hp: s.mythic,\n    description: \"A giant golden fish drifting through smoke like it\\u2019s cosmic water\"\n  }\n}, $ = {\n  Common: {\n    tokenId: \"2274\",\n    collection: \"tarot\",\n    name: \"Feet Juggler\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/tarot/common.png\",\n    hp: s.common,\n    description: \"A playful performer looping enchanted feet through the air with impossible precision\"\n  },\n  Rare: {\n    tokenId: \"2275\",\n    collection: \"tarot\",\n    name: \"The Ink\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/tarot/rare.png\",\n    hp: s.rare,\n    description: \"A hooded figure holding a glowing tablet, blending art and mystery by the water\\u2019s edge\"\n  },\n  Epic: {\n    tokenId: \"2276\",\n    collection: \"tarot\",\n    name: \"Computer Historian\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/tarot/epic.png\",\n    hp: s.epic,\n    description: \"A quirky scholar stacked with glowing screens, preserving the digital tales of every era\"\n  },\n  Legendary: {\n    tokenId: \"2277\",\n    collection: \"tarot\",\n    name: \"New God\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/tarot/legendary.png\",\n    hp: s.legendary,\n    description: \"A serene blue entity sits between two ancient pillars, radiating quiet, mysterious power\"\n  },\n  Mythic: {\n    tokenId: \"2278\",\n    collection: \"tarot\",\n    name: \"The Builders\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/tarot/mythic.png\",\n    hp: s.mythic,\n    description: \"Guided by a radiant winged figure, two creators stand ready to shape a new world\"\n  }\n}, ee = {\n  Common: {\n    tokenId: \"7160\",\n    collection: \"baseballcabal\",\n    name: \"Phantom Pitcher\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/baseballcabal/common.png\",\n    hp: s.common,\n    description: \"You'll never see the ball coming\"\n  },\n  Rare: {\n    tokenId: \"7161\",\n    collection: \"baseballcabal\",\n    name: \"The Closer\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/baseballcabal/rare.png\",\n    hp: s.rare,\n    description: \"Last inning specialist. Zero mercy\"\n  },\n  Epic: {\n    tokenId: \"7162\",\n    collection: \"baseballcabal\",\n    name: \"The Whale\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/baseballcabal/epic.png\",\n    hp: s.epic,\n    description: \"Bought every card. Now wants yours\"\n  },\n  Legendary: {\n    tokenId: \"7163\",\n    collection: \"baseballcabal\",\n    name: \"Diamond Hands Dave\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/baseballcabal/legendary.png\",\n    hp: s.legendary,\n    description: \"Never drops the ball. Never sells\"\n  },\n  Mythic: {\n    tokenId: \"7164\",\n    collection: \"baseballcabal\",\n    name: \"The Rug Puller\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/baseballcabal/mythic.png\",\n    hp: s.mythic,\n    description: \"Promises home runs, delivers strikeouts\"\n  }\n}, re = {\n  Common: {\n    tokenId: \"10384\",\n    collection: \"vibefx\",\n    name: \"Barrel Bob\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/vibefx/common.png\",\n    hp: s.common,\n    description: \"Found behind a gas station. Promoted to warrior\"\n  },\n  Rare: {\n    tokenId: \"10385\",\n    collection: \"vibefx\",\n    name: \"The Grinder\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/vibefx/rare.png\",\n    hp: s.rare,\n    description: \"Drills first, thinks never\"\n  },\n  Epic: {\n    tokenId: \"10386\",\n    collection: \"vibefx\",\n    name: \"Shills81\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/vibefx/epic.png\",\n    hp: s.epic,\n    description: \"Cute face, killer instincts. Do not let the cupcake head fool you\"\n  },\n  Legendary: {\n    tokenId: \"10387\",\n    collection: \"vibefx\",\n    name: \"Redphone\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/vibefx/legendary.png\",\n    hp: s.legendary,\n    description: \"We all float down here... in the metaverse\"\n  },\n  Mythic: {\n    tokenId: \"10388\",\n    collection: \"vibefx\",\n    name: \"The Goddess\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/vibefx/mythic.png\",\n    hp: s.mythic,\n    description: \"OG deity of the Vibe realm. Bow or be liquidated\"\n  }\n}, ie = {\n  Common: {\n    tokenId: \"6152\",\n    collection: \"historyofcomputer\",\n    name: \"Arcane Bug Summoner\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/historyofcomputer/common.png\",\n    hp: s.common,\n    description: \"Accidentally summoned a demon while debugging. Claims it\\u2019s a feature\"\n  },\n  Rare: {\n    tokenId: \"6153\",\n    collection: \"historyofcomputer\",\n    name: \"Cable Wizard Duo\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/historyofcomputer/rare.png\",\n    hp: s.rare,\n    description: \"They do not know what any of the cables do, but somehow it works\"\n  },\n  Epic: {\n    tokenId: \"6154\",\n    collection: \"historyofcomputer\",\n    name: \"Bologna Meat Computer\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/historyofcomputer/epic.png\",\n    hp: s.epic,\n    description: \"Runs on pure spite, cold cuts, and 3% electricity\"\n  },\n  Legendary: {\n    tokenId: \"6155\",\n    collection: \"historyofcomputer\",\n    name: \"Lab Rats of the Mainframe\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/historyofcomputer/legendary.png\",\n    hp: s.legendary,\n    description: \"Optimizing the machine by pressing random buttons with extreme confidence\"\n  },\n  Mythic: {\n    tokenId: \"6156\",\n    collection: \"historyofcomputer\",\n    name: \"Duck of Computing\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/historyofcomputer/mythic.png\",\n    hp: s.mythic,\n    description: \"Explaining the bug to the rubber duck\\u2026 for the 7th hour\"\n  }\n}, O = {\n  Common: {\n    tokenId: \"cumioh-common\",\n    collection: \"cumioh\",\n    name: \"THE.HOES.M\\xDCR\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/cumioh/common.png\",\n    hp: s.common,\n    description: \"Just a full time Lad on retake.tv/live/203751\"\n  },\n  Rare: {\n    tokenId: \"cumioh-rare\",\n    collection: \"cumioh\",\n    name: \"$.C.U.M.ilady\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/cumioh/rare.png\",\n    hp: s.rare,\n    description: \"Divinely loved, technically genius and spiritually transcendent. This card deals damage by casting loving commentary!\"\n  },\n  Epic: {\n    tokenId: \"cumioh-epic\",\n    collection: \"cumioh\",\n    name: \"DARK MAGICIAN MILADY\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/cumioh/epic.png\",\n    hp: s.epic,\n    description: \"This card gains 333 ATK for every $.C.U.M.ilady on the field when this card is casted\"\n  },\n  Legendary: {\n    tokenId: \"cumioh-legendary\",\n    collection: \"cumioh\",\n    name: \"ily 3-Thousand Dragon\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/cumioh/legendary.png\",\n    hp: s.legendary,\n    description: \"Lover of all the things, clicks every link and mints to HODL for a minimum of 1000 years in their treasure horde spread across hundreds of wallets\"\n  },\n  Mythic: {\n    tokenId: \"cumioh-mythic\",\n    collection: \"cumioh\",\n    name: \"BIZORDIA THE BIZARRE ONE\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/cumioh/mythic.png\",\n    hp: s.mythic,\n    description: \"If you have Right Leg of the Bizarre One, Left Leg of the Bizarre One, Right Arm of the Bizarre One and Left Arm of the Bizarre One in addition to this card on the field, you win the Duel\"\n  }\n}, Y = {\n  Common: {\n    tokenId: \"viberotbangers-common\",\n    collection: \"viberotbangers\",\n    name: \"The Slippage Saint\",\n    rarity: \"Common\",\n    power: 15,\n    imageUrl: \"/images/raid-bosses/viberotbangers/common.png\",\n    hp: s.common,\n    description: \"Every trade against him costs more than expected\"\n  },\n  Rare: {\n    tokenId: \"viberotbangers-rare\",\n    collection: \"viberotbangers\",\n    name: \"Booty Liquidity Beast\",\n    rarity: \"Rare\",\n    power: 20,\n    imageUrl: \"/images/raid-bosses/viberotbangers/rare.png\",\n    hp: s.rare,\n    description: \"An unholy fusion of greed, memes, and bad decisions\"\n  },\n  Epic: {\n    tokenId: \"viberotbangers-epic\",\n    collection: \"viberotbangers\",\n    name: \"Leverage Temptress\",\n    rarity: \"Epic\",\n    power: 80,\n    imageUrl: \"/images/raid-bosses/viberotbangers/epic.png\",\n    hp: s.epic,\n    description: \"Lures traders in with beauty and liquidates them silently\"\n  },\n  Legendary: {\n    tokenId: \"viberotbangers-legendary\",\n    collection: \"viberotbangers\",\n    name: \"Bagholder King\",\n    rarity: \"Legendary\",\n    power: 240,\n    imageUrl: \"/images/raid-bosses/viberotbangers/legendary.png\",\n    hp: s.legendary,\n    description: \"The bag that bites back when you try to exit\"\n  },\n  Mythic: {\n    tokenId: \"viberotbangers-mythic\",\n    collection: \"viberotbangers\",\n    name: \"Hydra of Degens\",\n    rarity: \"Mythic\",\n    power: 800,\n    imageUrl: \"/images/raid-bosses/viberotbangers/mythic.png\",\n    hp: s.mythic,\n    description: \"Many minds, one wallet, infinite bad ideas\"\n  }\n}, K = {\n  viberotbangers: Y,\n  gmvbrs: N,\n  vibe: V,\n  vibefid: H,\n  viberuto: J,\n  meowverse: X,\n  poorlydrawnpepes: j,\n  teampothead: G,\n  tarot: $,\n  baseballcabal: ee,\n  vibefx: re,\n  historyofcomputer: ie,\n  cumioh: O,\n  nothing: {},\n  // Free cards - no raid bosses\n  custom: {}\n  // Not used for raid bosses\n};\nfunction Z(r, e) {\n  let i = K[r]?.[e];\n  if (i)\n    return {\n      ...i,\n      imageUrl: T(i.imageUrl)\n    };\n}\nb(Z, \"getBossCard\");\nfunction _(r) {\n  let e = r % 70, i = M[e], t = F[e];\n  return Z(i, t);\n}\nb(_, \"getCurrentBoss\");\n\n// convex/raidBoss.ts\nasync function B(r, e) {\n  let i = e.toLowerCase(), t = await r.db.query(\"addressLinks\").withIndex(\"by_address\", (a) => a.eq(\"address\", i)).first();\n  return t ? t.primaryAddress : i;\n}\nb(B, \"resolvePrimaryAddress\");\nfunction te() {\n  let r = new Uint32Array(1);\n  return crypto.getRandomValues(r), r[0] / 4294967296;\n}\nb(te, \"cryptoRandomFloat\");\nvar se = 1, oe = 4, ae = 720 * 60 * 1e3, S = {\n  common: 1,\n  // 1 VBMS\n  rare: 3,\n  // 3 VBMS\n  epic: 5,\n  // 5 VBMS\n  legendary: 10,\n  // 10 VBMS\n  mythic: 15,\n  // 15 VBMS\n  vibefid: 50\n  // 50 VBMS (infinite energy)\n}, x = {\n  common: 720 * 60 * 1e3,\n  // 12 hours\n  rare: 1440 * 60 * 1e3,\n  // 1 day\n  epic: 2880 * 60 * 1e3,\n  // 2 days\n  legendary: 5760 * 60 * 1e3,\n  // 4 days\n  mythic: 7200 * 60 * 1e3,\n  // 5 days\n  vibefid: 0\n  // Infinite (never expires)\n}, ne = 0.1, xe = I({\n  handler: /* @__PURE__ */ b(async (r) => {\n    let e = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (i) => i.eq(\"status\", \"active\")).first();\n    return e || (e = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (i) => i.eq(\"status\", \"transitioning\")).first()), e || (e = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (i) => i.eq(\"status\", \"defeated\")).first()), e;\n  }, \"handler\")\n}), De = R({\n  handler: /* @__PURE__ */ b(async (r) => {\n    let e = await r.db.query(\"raidBoss\").first();\n    if (e)\n      return e;\n    let i = 0, t = _(i);\n    if (!t)\n      throw new Error(\"Failed to get boss data for index 0\");\n    let a = await r.db.insert(\"raidBoss\", {\n      bossIndex: i,\n      tokenId: t.tokenId,\n      name: t.name,\n      collection: t.collection,\n      rarity: t.rarity,\n      imageUrl: t.imageUrl,\n      power: t.power,\n      maxHp: t.hp,\n      currentHp: t.hp,\n      status: \"active\",\n      spawnedAt: Date.now(),\n      defeatedAt: void 0\n    });\n    return console.log(`\\u{1F409} First Raid Boss spawned: ${t.name} (${t.rarity})`), await r.db.get(a);\n  }, \"handler\")\n}), Se = I({\n  args: {\n    address: o.string()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address);\n    return await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (a) => a.eq(\"address\", i)).first();\n  }, \"handler\")\n}), qe = I({\n  args: {\n    address: o.string()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), t = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (n) => n.eq(\"status\", \"active\")).first();\n    return t ? await r.db.query(\"raidContributions\").withIndex(\n      \"by_boss_player\",\n      (n) => n.eq(\"bossIndex\", t.bossIndex).eq(\"address\", i)\n    ).first() : null;\n  }, \"handler\")\n}), Le = I({\n  args: {\n    limit: o.optional(o.number())\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (n) => n.eq(\"status\", \"active\")).first();\n    if (!i) return [];\n    let t = e.limit || 100;\n    return await r.db.query(\"raidContributions\").withIndex(\"by_boss\", (n) => n.eq(\"bossIndex\", i.bossIndex)).order(\"desc\").take(t);\n  }, \"handler\")\n}), _e = I({\n  args: {\n    limit: o.optional(o.number())\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = e.limit || 10;\n    return await r.db.query(\"raidHistory\").withIndex(\"by_defeated_at\").order(\"desc\").take(i);\n  }, \"handler\")\n}), Qe = I({\n  args: {\n    bossIndex: o.number()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => await r.db.query(\"raidHistory\").withIndex(\"by_boss_index\", (t) => t.eq(\"bossIndex\", e.bossIndex)).first(), \"handler\")\n}), Ue = I({\n  args: { limit: o.optional(o.number()) },\n  handler: /* @__PURE__ */ b(async (r, { limit: e = 100 }) => (await r.db.query(\"raidAttacks\").withIndex(\"by_total_damage\").order(\"desc\").take(e)).map((a) => ({\n    address: a.address,\n    username: a.username || a.address.slice(0, 8),\n    // Use cached username\n    stats: {\n      raidBossDamage: a.totalDamageDealt,\n      bossesKilled: a.bossesKilled,\n      aura: 500,\n      // Default aura (not critical for raid leaderboard)\n      totalPower: a.deckPower || 0\n      // Use deck power instead of profile power\n    },\n    userIndex: 0\n    // Not needed for raid leaderboard\n  })), \"handler\")\n}), Pe = R({\n  args: {\n    address: o.string(),\n    oldCardTokenId: o.string(),\n    // Card to remove\n    newCard: o.object({\n      tokenId: o.string(),\n      collection: o.optional(o.string()),\n      power: o.number(),\n      imageUrl: o.string(),\n      name: o.string(),\n      rarity: o.string(),\n      foil: o.optional(o.string()),\n      isFreeCard: o.optional(o.boolean())\n    }),\n    txHash: o.string(),\n    // VBMS payment transaction hash\n    isVibeFID: o.optional(o.boolean())\n    // If true, replacing VibeFID card\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), t = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (g) => g.eq(\"address\", i)).first();\n    if (!t)\n      throw new Error(\"Player has no raid deck\");\n    if (e.isVibeFID) {\n      if (!t.vibefidCard)\n        throw new Error(\"No VibeFID card in deck to replace\");\n      if (e.newCard.collection !== \"vibefid\")\n        throw new Error(\"Can only replace VibeFID with another VibeFID card\");\n      if (t.deck.some(\n        (w) => w.tokenId === e.newCard.tokenId\n      ))\n        throw new Error(\"This VibeFID is already in your raid deck.\");\n      let m = Date.now(), A = t.vibefidCard.tokenId, y = {\n        ...e.newCard,\n        collection: \"vibefid\"\n      }, c = t.cardEnergy.map((w) => w.tokenId === A ? {\n        tokenId: e.newCard.tokenId,\n        energyExpiresAt: 0,\n        // Infinite energy\n        lastAttackAt: void 0,\n        nextAttackAt: m\n        // Can attack immediately\n      } : w), v = t.deck.reduce((w, E) => {\n        let q = E.power || 0;\n        return E.collection === \"vibe\" ? w + q * 2 : w + q;\n      }, 0), C = Math.floor((v + e.newCard.power * 5) * 1.1);\n      return await r.db.patch(t._id, {\n        vibefidCard: y,\n        cardEnergy: c,\n        deckPower: C,\n        lastUpdated: m\n      }), console.log(`\\u{1F3B4} VibeFID replaced: ${A} \\u2192 ${e.newCard.tokenId} (power: ${C})`), {\n        success: !0,\n        newDeckPower: C,\n        cost: 50\n      };\n    }\n    let a = t.deck.findIndex((g) => g.tokenId === e.oldCardTokenId);\n    if (a === -1)\n      throw new Error(\"Card not found in deck\");\n    if (t.deck.some(\n      (g, m) => g.tokenId === e.newCard.tokenId && m !== a\n    ))\n      throw new Error(\"This card is already in your raid deck. Cannot have duplicate cards.\");\n    if (t.vibefidCard && t.vibefidCard.tokenId === e.newCard.tokenId)\n      throw new Error(\"This card is already in your raid deck (VibeFID slot). Cannot have duplicate cards.\");\n    let p = Date.now(), h = e.newCard.rarity.toLowerCase(), f = S[h] || S.common, l = [...t.deck];\n    l[a] = e.newCard;\n    let k = l.reduce((g, m) => g + m.power, 0), u = [...t.cardEnergy], d = x[h] || x.common;\n    return u[a] = {\n      tokenId: e.newCard.tokenId,\n      energyExpiresAt: d === 0 ? 0 : p + d,\n      // 0 = infinite (VibeFID)\n      lastAttackAt: void 0,\n      nextAttackAt: p\n      // Can attack immediately\n    }, await r.db.patch(t._id, {\n      deck: l,\n      deckPower: k,\n      cardEnergy: u,\n      lastUpdated: p\n    }), console.log(`\\u{1F504} Card replaced: ${e.oldCardTokenId} \\u2192 ${e.newCard.tokenId} for ${i} (cost: ${f} VBMS)`), {\n      success: !0,\n      oldCard: e.oldCardTokenId,\n      newCard: e.newCard.tokenId,\n      newDeckPower: k,\n      cost: f\n    };\n  }, \"handler\")\n}), Te = R({\n  args: {\n    address: o.string(),\n    deck: o.array(o.object({\n      tokenId: o.string(),\n      collection: o.optional(o.string()),\n      power: o.number(),\n      imageUrl: o.string(),\n      name: o.string(),\n      rarity: o.string(),\n      foil: o.optional(o.string()),\n      isFreeCard: o.optional(o.boolean())\n    })),\n    vibefidCard: o.optional(o.object({\n      tokenId: o.string(),\n      collection: o.optional(o.string()),\n      power: o.number(),\n      imageUrl: o.string(),\n      name: o.string(),\n      rarity: o.string(),\n      foil: o.optional(o.string())\n    })),\n    txHash: o.string()\n    // VBMS payment transaction hash\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), a = (await r.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", i)).first())?.username;\n    if (e.deck.length !== 5)\n      throw new Error(\"Raid deck must contain exactly 5 cards\");\n    let n = e.deck.map((d) => d.tokenId);\n    if (new Set(n).size !== n.length)\n      throw new Error(\"Deck cannot contain duplicate cards\");\n    if (e.vibefidCard && n.includes(e.vibefidCard.tokenId))\n      throw new Error(\"VibeFID card cannot be duplicate of deck cards\");\n    let h = Date.now(), f = 0;\n    for (let d of e.deck) {\n      let g = d.rarity.toLowerCase();\n      f += S[g] || S.common;\n    }\n    e.vibefidCard && (f += S.vibefid);\n    let l = e.deck.reduce((d, g) => {\n      let m = g.power || 0;\n      return g.collection === \"vibe\" ? d + m * 2 : d + m;\n    }, 0);\n    e.vibefidCard && (l += e.vibefidCard.power * 5, l = Math.floor(l * (1 + ne)));\n    let k = e.deck.map((d) => {\n      let g = d.rarity.toLowerCase(), m = x[g] || x.common;\n      return {\n        tokenId: d.tokenId,\n        energyExpiresAt: m === 0 ? 0 : h + m,\n        // 0 = infinite (VibeFID)\n        lastAttackAt: void 0,\n        nextAttackAt: h\n        // Can attack immediately\n      };\n    });\n    e.vibefidCard && k.push({\n      tokenId: e.vibefidCard.tokenId,\n      energyExpiresAt: 0,\n      // Infinite energy\n      lastAttackAt: void 0,\n      nextAttackAt: h\n    });\n    let u = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (d) => d.eq(\"address\", i)).first();\n    return u ? await r.db.patch(u._id, {\n      deck: e.deck,\n      vibefidCard: e.vibefidCard ? {\n        ...e.vibefidCard,\n        collection: \"vibefid\"\n        // ðŸ”§ FIX: Always force 'vibefid' collection\n      } : void 0,\n      deckPower: l,\n      cardEnergy: k,\n      entryFeePaid: !0,\n      entryTxHash: e.txHash,\n      entryPaidAt: Date.now(),\n      lastUpdated: Date.now(),\n      username: a\n      // ðŸš€ Cache username\n    }) : await r.db.insert(\"raidAttacks\", {\n      address: i,\n      username: a,\n      // ðŸš€ Cache username\n      deck: e.deck,\n      vibefidCard: e.vibefidCard ? {\n        ...e.vibefidCard,\n        collection: \"vibefid\"\n        // ðŸ”§ FIX: Always force 'vibefid' collection\n      } : void 0,\n      deckPower: l,\n      cardEnergy: k,\n      entryFeePaid: !0,\n      entryTxHash: e.txHash,\n      entryPaidAt: Date.now(),\n      totalDamageDealt: 0,\n      bossesKilled: 0,\n      createdAt: Date.now(),\n      lastUpdated: Date.now()\n    }), console.log(`\\u{1F3B4} Raid deck set for ${i}: ${e.deck.length} cards${e.vibefidCard ? \" + VibeFID\" : \"\"} (cost: ${f} VBMS, power: ${l})`), {\n      success: !0,\n      deckPower: l,\n      totalCost: f,\n      hasVibeFID: !!e.vibefidCard\n    };\n  }, \"handler\")\n}), Me = R({\n  args: {\n    address: o.string()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), t = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (a) => a.eq(\"address\", i)).first();\n    if (!t)\n      throw new Error(\"Player has no raid deck\");\n    return await r.db.patch(t._id, {\n      deck: [],\n      vibefidCard: void 0,\n      deckPower: 0,\n      cardEnergy: [],\n      entryFeePaid: !1,\n      // Allow new entry (will need to pay again)\n      lastUpdated: Date.now()\n      // NOTE: totalDamageDealt and bossesKilled are NOT cleared\n    }), console.log(`\\u{1F5D1}\\uFE0F Raid deck cleared for ${i} (damage preserved: ${t.totalDamageDealt})`), {\n      success: !0,\n      damagePreserved: t.totalDamageDealt,\n      bossesKilledPreserved: t.bossesKilled\n    };\n  }, \"handler\")\n}), Fe = R({\n  args: {\n    address: o.string(),\n    cardTokenIds: o.array(o.string()),\n    // Which cards to refuel\n    txHash: o.string()\n    // VBMS payment transaction hash\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), t = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (f) => f.eq(\"address\", i)).first();\n    if (!t)\n      throw new Error(\"Player has no raid deck\");\n    let a = e.cardTokenIds.length, n = a === 5 ? oe : a * se, p = Date.now(), h = t.cardEnergy.map((f) => {\n      if (e.cardTokenIds.includes(f.tokenId)) {\n        let l = t.deck.find((d) => d.tokenId === f.tokenId);\n        if (!l) return f;\n        let k = l.rarity.toLowerCase(), u = x[k] || x.common;\n        return {\n          ...f,\n          energyExpiresAt: u === 0 ? 0 : p + u,\n          // 0 = infinite (VibeFID)\n          nextAttackAt: p\n          // Can attack immediately after refuel\n        };\n      }\n      return f;\n    });\n    return await r.db.patch(t._id, {\n      cardEnergy: h,\n      lastUpdated: Date.now()\n    }), await r.db.insert(\"raidRefuels\", {\n      address: i,\n      cardsRefueled: e.cardTokenIds,\n      amount: n,\n      txHash: e.txHash,\n      timestamp: Date.now()\n    }), { success: !0, cardsRefueled: e.cardTokenIds.length, cost: n };\n  }, \"handler\")\n}), Ne = D({\n  handler: /* @__PURE__ */ b(async (r) => {\n    let e = Date.now(), i = await r.db.query(\"raidBoss\").withIndex(\"by_status\", (d) => d.eq(\"status\", \"active\")).first();\n    if (!i)\n      return console.log(\"No active boss found\"), { success: !1, message: \"No active boss\" };\n    let t = e - 7200 * 1e3, a = await r.db.query(\"raidAttacks\").withIndex(\"by_last_updated\", (d) => d.gt(\"lastUpdated\", t)).take(5e3), p = [...new Set(a.map((d) => d.address))].map(\n      (d) => r.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", d)).first()\n    ), h = await Promise.all(p), f = new Map(\n      h.filter(Boolean).map((d) => [d.address, d])\n    );\n    console.log(`\\u{1F680} Batch-loaded ${f.size} profiles for ${a.length} decks`);\n    let l = 0, k = 0;\n    for (let d of a) {\n      let g = [], m = 0, A = d.deck.some((y) => y.collection === \"vibefid\") || !!d.vibefidCard;\n      for (let y of d.cardEnergy) {\n        let c = y.energyExpiresAt === 0 || e < y.energyExpiresAt, v = !y.nextAttackAt || y.nextAttackAt <= e;\n        if (c && v) {\n          let C = d.deck.find((W) => W.tokenId === y.tokenId) || (d.vibefidCard?.tokenId === y.tokenId ? d.vibefidCard : void 0), w = C?.power || 0, E = C?.collection === \"vibefid\" || d.vibefidCard?.tokenId === y.tokenId;\n          C && !(\"isFreeCard\" in C && C.isFreeCard) && (E ? w = Math.floor(w * 5) : C.collection === i.collection && (w = Math.floor(w * 2)), A && !E && (w = Math.floor(w * 1.5)));\n          let q = E ? 0.3 : 0.15;\n          te() < q && (w = Math.floor(w * 2), console.log(`\\u{1F4A5} CRITICAL HIT! Card ${y.tokenId} dealt ${w} damage (2x multiplier)`)), m += w, g.push({\n            ...y,\n            lastAttackAt: e,\n            nextAttackAt: e + ae\n            // Next attack in 5 minutes\n          });\n        } else\n          g.push(y);\n      }\n      if (m > 0) {\n        await r.db.patch(d._id, {\n          cardEnergy: g,\n          totalDamageDealt: d.totalDamageDealt + m,\n          lastUpdated: e\n        });\n        let y = await r.db.query(\"raidContributions\").withIndex(\n          \"by_boss_player\",\n          (C) => C.eq(\"bossIndex\", i.bossIndex).eq(\"address\", d.address)\n        ).first(), v = f.get(d.address)?.username || d.address.slice(0, 8);\n        y ? await r.db.patch(y._id, {\n          damageDealt: y.damageDealt + m,\n          attackCount: y.attackCount + 1,\n          lastAttackAt: e\n        }) : await r.db.insert(\"raidContributions\", {\n          bossIndex: i.bossIndex,\n          address: d.address,\n          username: v,\n          damageDealt: m,\n          attackCount: 1,\n          rewardEarned: 0,\n          // Calculated when boss is defeated\n          rewardClaimed: !1,\n          firstAttackAt: e,\n          lastAttackAt: e\n        }), l += m, k++;\n      }\n    }\n    let u = Math.max(0, i.currentHp - l);\n    return await r.db.patch(i._id, {\n      currentHp: u,\n      lastAttackAt: e\n    }), u <= 0 && i.status === \"active\" && (await r.db.patch(i._id, {\n      status: \"transitioning\",\n      // Intermediate status to prevent double-processing\n      defeatedAt: e\n    }), console.log(`\\u{1F409} Boss ${i.name} defeated! Transitioning to next boss...`)), {\n      success: !0,\n      totalDamage: l,\n      attackingPlayers: k,\n      bossHpRemaining: u,\n      bossDefeated: u <= 0\n    };\n  }, \"handler\")\n}), Ve = D({\n  handler: /* @__PURE__ */ b(async (r) => {\n    let e = Date.now(), i = await r.db.query(\"raidBoss\").filter((c) => c.eq(c.field(\"status\"), \"transitioning\")).first();\n    if (i || (i = await r.db.query(\"raidBoss\").filter((c) => c.eq(c.field(\"status\"), \"defeated\")).first()), !i)\n      return { success: !1, message: \"No defeated boss found\" };\n    let t = await r.db.query(\"raidContributions\").withIndex(\"by_boss\", (c) => c.eq(\"bossIndex\", i.bossIndex)).take(1e4), a = t.reduce((c, v) => c + v.damageDealt, 0), n = i.rarity.toLowerCase(), p = L[n];\n    for (let c of t) {\n      let v = a > 0 ? c.damageDealt / a : 0, C = Math.max(1, Math.floor(p * v));\n      await r.db.patch(c._id, {\n        rewardEarned: C\n      });\n    }\n    let h = t.sort((c, v) => v.damageDealt - c.damageDealt).slice(0, 10).map((c) => ({\n      address: c.address,\n      username: c.username,\n      damage: c.damageDealt,\n      reward: c.rewardEarned\n    })), f = Math.floor((i.defeatedAt - i.spawnedAt) / 1e3);\n    await r.db.insert(\"raidHistory\", {\n      bossIndex: i.bossIndex,\n      collection: i.collection,\n      rarity: i.rarity,\n      name: i.name,\n      imageUrl: i.imageUrl,\n      maxHp: i.maxHp,\n      totalDamage: a,\n      totalPlayers: t.length,\n      totalAttacks: t.reduce((c, v) => c + v.attackCount, 0),\n      topContributors: h,\n      spawnedAt: i.spawnedAt,\n      defeatedAt: i.defeatedAt,\n      duration: f\n    });\n    let k = [...new Set(t.map((c) => c.address))].map(\n      (c) => r.db.query(\"raidAttacks\").withIndex(\"by_address\", (v) => v.eq(\"address\", c)).first()\n    ), d = (await Promise.all(k)).filter((c) => c !== null).map((c) => r.db.patch(c._id, { bossesKilled: c.bossesKilled + 1 }));\n    await Promise.all(d), await r.db.delete(i._id);\n    let g = (i.bossIndex + 1) % 50, m = _(g);\n    if (!m)\n      throw new Error(\"Failed to get next boss card\");\n    let A = m.rarity.toLowerCase(), y = s[A];\n    await r.db.insert(\"raidBoss\", {\n      bossIndex: g,\n      collection: m.collection,\n      rarity: m.rarity,\n      tokenId: m.tokenId,\n      name: m.name,\n      imageUrl: m.imageUrl,\n      power: m.power,\n      maxHp: y,\n      currentHp: y,\n      status: \"active\",\n      spawnedAt: e\n    });\n    try {\n      await r.scheduler.runAfter(0, P.notifications.sendBossDefeatedNotifications, {\n        bossName: i.name,\n        bossRarity: i.rarity,\n        totalContributors: t.length,\n        contributorAddresses: t.map((c) => c.address)\n      }), console.log(`\\u{1F4E2} Scheduled boss defeated notifications for ${t.length} contributors`);\n    } catch (c) {\n      console.error(\"Failed to schedule boss notifications:\", c);\n    }\n    return {\n      success: !0,\n      defeatedBoss: i.name,\n      nextBoss: m.name,\n      totalContributors: t.length,\n      totalDamage: a\n    };\n  }, \"handler\")\n}), He = I({\n  args: { address: o.string() },\n  handler: /* @__PURE__ */ b(async (r, { address: e }) => {\n    let i = e.toLowerCase(), t = await r.db.query(\"raidContributions\").withIndex(\"by_player\", (n) => n.eq(\"address\", i)).filter(\n      (n) => n.and(\n        n.eq(n.field(\"rewardClaimed\"), !1),\n        n.gt(n.field(\"rewardEarned\"), 0)\n      )\n    ).take(100), a = t.reduce(\n      (n, p) => n + p.rewardEarned,\n      0\n    );\n    return {\n      contributions: t,\n      totalUnclaimed: a,\n      count: t.length\n    };\n  }, \"handler\")\n}), Je = R({\n  args: { address: o.string() },\n  handler: /* @__PURE__ */ b(async (r, { address: e }) => {\n    let i = e.toLowerCase(), t = await r.db.query(\"raidContributions\").withIndex(\"by_player\", (p) => p.eq(\"address\", i)).filter(\n      (p) => p.and(\n        p.eq(p.field(\"rewardClaimed\"), !1),\n        p.gt(p.field(\"rewardEarned\"), 0)\n      )\n    ).take(100);\n    if (t.length === 0)\n      return {\n        success: !1,\n        message: \"No unclaimed rewards\",\n        totalClaimed: 0\n      };\n    let a = t.reduce(\n      (p, h) => p + h.rewardEarned,\n      0\n    ), n = await r.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", i)).first();\n    if (!n)\n      return { success: !1, message: \"Profile not found\", totalClaimed: 0 };\n    for (let p of t)\n      await r.db.patch(p._id, {\n        rewardClaimed: !0\n      });\n    return await r.db.patch(n._id, {\n      coins: (n.coins || 0) + a,\n      lifetimeEarned: (n.lifetimeEarned || 0) + a\n    }), await r.db.insert(\"coinTransactions\", {\n      address: i,\n      amount: a,\n      type: \"earn\",\n      source: \"raid_boss_reward\",\n      description: `Raid Boss rewards (x${t.length} bosses)`,\n      timestamp: Date.now(),\n      balanceBefore: n.coins || 0,\n      balanceAfter: (n.coins || 0) + a\n    }), await U(\n      r,\n      i,\n      \"earn\",\n      a,\n      n.coins || 0,\n      (n.coins || 0) + a,\n      \"raid_boss_reward\",\n      `bosses_${t.length}`,\n      { reason: `Raid Boss rewards for ${t.length} boss kills` }\n    ), console.log(\"Claimed \" + a + \" coins for \" + i), {\n      success: !0,\n      totalClaimed: a,\n      claimedCount: t.length,\n      newBalance: (n.coins || 0) + a\n    };\n  }, \"handler\")\n}), Oe = Q({\n  handler: /* @__PURE__ */ b(async (r) => await r.db.query(\"raidContributions\").take(500), \"handler\")\n}), Ye = D({\n  args: { bossIndex: o.number() },\n  handler: /* @__PURE__ */ b(async (r, { bossIndex: e }) => {\n    let i = await r.db.query(\"raidContributions\").withIndex(\"by_boss_player\", (l) => l.eq(\"bossIndex\", e)).take(1e4);\n    if (i.length === 0)\n      return { success: !1, message: \"No contributions found for this boss\" };\n    let t = i.reduce((l, k) => l + k.damageDealt, 0), n = (await r.db.query(\"raidBoss\").filter((l) => l.eq(l.field(\"bossIndex\"), e)).first())?.rarity?.toLowerCase() || \"common\", p = L[n], h = 0, f = [];\n    for (let l of i) {\n      let k = t > 0 ? l.damageDealt / t : 0, u = Math.max(1, Math.floor(p * k));\n      await r.db.patch(l._id, {\n        rewardEarned: u\n      }), await r.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", l.address)).first() && (h += u, f.push({ address: l.address, reward: u }));\n    }\n    return console.log(\"Manually distributed \" + h + \" TESTVBMS to \" + i.length + \" players for boss #\" + e), {\n      success: !0,\n      totalDistributed: h,\n      contributors: i.length,\n      rewards: f\n    };\n  }, \"handler\")\n}), Ke = I({\n  args: {\n    address: o.string()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = await B(r, e.address), t = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (n) => n.eq(\"address\", i)).first();\n    if (!t) return null;\n    let a = await r.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", i)).first();\n    return {\n      address: t.address,\n      username: a?.username || t.address.slice(0, 8),\n      deck: t.deck,\n      vibefidCard: t.vibefidCard,\n      deckPower: t.deckPower,\n      totalDamageDealt: t.totalDamageDealt,\n      bossesKilled: t.bossesKilled,\n      cardEnergy: t.cardEnergy\n    };\n  }, \"handler\")\n}), Ze = D({\n  args: {\n    linkedAddress: o.string()\n  },\n  handler: /* @__PURE__ */ b(async (r, e) => {\n    let i = e.linkedAddress.toLowerCase(), t = await r.db.query(\"raidAttacks\").withIndex(\"by_address\", (n) => n.eq(\"address\", i)).first();\n    t && (await r.db.delete(t._id), console.log(`\\u{1F9F9} Deleted raid deck for linked wallet: ${i}`));\n    let a = await r.db.query(\"raidContributions\").withIndex(\"by_player\", (n) => n.eq(\"address\", i)).take(1e3);\n    for (let n of a)\n      await r.db.delete(n._id);\n    return a.length > 0 && console.log(`\\u{1F9F9} Deleted ${a.length} contributions for linked wallet: ${i}`), {\n      deletedRaidDeck: !!t,\n      deletedContributions: a.length\n    };\n  }, \"handler\")\n}), We = R({\n  args: {},\n  handler: /* @__PURE__ */ b(async (r) => {\n    let e = Date.now(), i = await r.db.query(\"raidBoss\").filter((t) => t.eq(t.field(\"status\"), \"active\")).first();\n    return i ? (await r.db.patch(i._id, {\n      currentHp: 0,\n      status: \"transitioning\",\n      defeatedAt: e\n    }), console.log(`\\u{1F52A} Admin force-killed boss: ${i.name} (index ${i.bossIndex})`), {\n      success: !0,\n      killedBoss: i.name,\n      bossIndex: i.bossIndex\n    }) : { success: !1, message: \"No active boss found\" };\n  }, \"handler\")\n});\nexport {\n  We as adminForceKillBoss,\n  Je as claimRaidRewards,\n  Ze as cleanupLinkedWalletRaidData,\n  Me as clearRaidDeck,\n  Ve as defeatBossAndSpawnNext,\n  Oe as getAllContributions,\n  Qe as getBossLeaderboard,\n  xe as getCurrentRaidBoss,\n  qe as getPlayerContribution,\n  Se as getPlayerRaidDeck,\n  Ke as getPlayerRaidDeckByAddress,\n  Ue as getRaidBossLeaderboard,\n  _e as getRaidHistory,\n  Le as getTopContributors,\n  He as getUnclaimedRewards,\n  De as initializeRaidBoss,\n  Ye as manualDistributeRewards,\n  Ne as processAutoAttacks,\n  Fe as refuelCards,\n  Pe as replaceCard,\n  Te as setRaidDeck\n};\n//# sourceMappingURL=raidBoss.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../lib/ipfs-assets.ts\", \"../lib/raid-boss/boss-cards.ts\", \"../convex/raidBoss.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"IPFS_ASSETS\", \"getAssetUrl\", \"localPath\", \"__name\", \"BOSS_HP_BY_RARITY\", \"BOSS_REWARDS_BY_RARITY\", \"BOSS_ROTATION_ORDER\", \"BOSS_RARITY_ORDER\", \"GMVBRS_BOSSES\", \"VBMS_BOSSES\", \"VIBEFID_BOSSES\", \"VIBERUTO_BOSSES\", \"MEOWVERSE_BOSSES\", \"POORLYDRAWNPEPES_BOSSES\", \"TEAMPOTHEAD_BOSSES\", \"TAROT_BOSSES\", \"BASEBALLCABAL_BOSSES\", \"VIBEFX_BOSSES\", \"HISTORYOFCOMPUTER_BOSSES\", \"CUMIOH_BOSSES\", \"VIBEROTBANGERS_BOSSES\", \"ALL_BOSS_CARDS\", \"getBossCard\", \"collection\", \"rarity\", \"boss\", \"getAssetUrl\", \"__name\", \"getCurrentBoss\", \"bossIndex\", \"normalizedIndex\", \"resolvePrimaryAddress\", \"ctx\", \"address\", \"normalizedAddress\", \"link\", \"q\", \"__name\", \"cryptoRandomFloat\", \"randomBytes\", \"REFUEL_COST_PER_CARD\", \"REFUEL_COST_ALL\", \"ATTACK_INTERVAL\", \"REPLACE_COST_BY_RARITY\", \"ENERGY_DURATION_BY_RARITY\", \"VIBEFID_DECK_BONUS\", \"getCurrentRaidBoss\", \"query\", \"__name\", \"ctx\", \"boss\", \"q\", \"initializeRaidBoss\", \"mutation\", \"existingBoss\", \"bossIndex\", \"bossData\", \"getCurrentBoss\", \"newBoss\", \"getPlayerRaidDeck\", \"v\", \"args\", \"primaryAddress\", \"resolvePrimaryAddress\", \"getPlayerContribution\", \"getTopContributors\", \"limit\", \"getRaidHistory\", \"getBossLeaderboard\", \"getRaidBossLeaderboard\", \"raid\", \"replaceCard\", \"address\", \"raidDeck\", \"c\", \"now\", \"oldVibefidTokenId\", \"newVibefidCard\", \"updatedCardEnergy\", \"ce\", \"basePower\", \"sum\", \"card\", \"p\", \"newDeckPower\", \"cardIndex\", \"idx\", \"rarity\", \"cost\", \"updatedDeck\", \"duration\", \"setRaidDeck\", \"username\", \"tokenIds\", \"totalCost\", \"deckPower\", \"cardEnergy\", \"existingDeck\", \"clearRaidDeck\", \"refuelCards\", \"numCards\", \"expectedCost\", \"deckCard\", \"processAutoAttacks\", \"internalMutation\", \"twoHoursAgo\", \"allDecks\", \"profilePromises\", \"addr\", \"profiles\", \"profileMap\", \"totalDamage\", \"attackingPlayers\", \"deck\", \"playerDamage\", \"hasVibeFIDInDeck\", \"hasEnergy\", \"isReady\", \"cardPower\", \"isVibeFID\", \"criticalHitChance\", \"cryptoRandomFloat\", \"contribution\", \"newHp\", \"defeatBossAndSpawnNext\", \"defeatedBoss\", \"contributions\", \"bossRarity\", \"REWARD_POOL\", \"BOSS_REWARDS_BY_RARITY\", \"contributionPercent\", \"reward\", \"topContributors\", \"a\", \"b\", \"raidDeckPromises\", \"updatePromises\", \"nextBossIndex\", \"nextBossCard\", \"maxHp\", \"BOSS_HP_BY_RARITY\", \"internal\", \"error\", \"getUnclaimedRewards\", \"normalizedAddress\", \"unclaimedContributions\", \"totalUnclaimed\", \"claimRaidRewards\", \"totalReward\", \"profile\", \"createAuditLog\", \"getAllContributions\", \"internalQuery\", \"manualDistributeRewards\", \"totalDistributed\", \"rewards\", \"getPlayerRaidDeckByAddress\", \"cleanupLinkedWalletRaidData\", \"adminForceKillBoss\", \"activeBoss\"]\n}\n"},{"path":"rewardsChoice.js","source":"import {\n  Fc as w\n} from \"./_deps/OXIBDITK.js\";\nimport {\n  c as g\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/rewardsChoice.ts\nfunction m() {\n  let s = crypto.randomUUID().replace(/-/g, \"\"), o = crypto.randomUUID().replace(/-/g, \"\");\n  return `0x${s}${o}`.substring(0, 66);\n}\nc(m, \"generateNonce\");\nasync function p(s, o, e) {\n  let a = process.env.VBMS_SIGNER_PRIVATE_KEY;\n  if (!a)\n    throw new Error(\"VBMS_SIGNER_PRIVATE_KEY not configured in environment variables\");\n  let t = new w.Wallet(a), n = w.parseEther(o.toString()), i = w.solidityPackedKeccak256(\n    [\"address\", \"uint256\", \"bytes32\"],\n    [s, n, e]\n  ), l = await t.signMessage(w.getBytes(i));\n  return console.log(`[Rewards Signature] Address: ${s}, Amount: ${o} VBMS (${n} wei), Nonce: ${e}`), console.log(`[Rewards Signature] Message Hash: ${i}`), console.log(`[Rewards Signature] Signature: ${l}`), console.log(`[Rewards Signature] Signer Address: ${t.address}`), l;\n}\nc(p, \"signClaimMessage\");\nvar E = g({\n  args: {\n    address: r.string(),\n    amount: r.number(),\n    choice: r.union(r.literal(\"claim_now\"), r.literal(\"claim_later\")),\n    source: r.union(\n      r.literal(\"pve\"),\n      r.literal(\"pvp\"),\n      r.literal(\"attack\"),\n      r.literal(\"defense\"),\n      r.literal(\"leaderboard\")\n    )\n  },\n  handler: /* @__PURE__ */ c(async (s, { address: o, amount: e, choice: a, source: t }) => {\n    console.log(\"[processRewardChoice] Called with:\", { address: o, amount: e, choice: a, source: t });\n    let n = await s.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", o.toLowerCase())).first();\n    if (!n)\n      throw console.error(\"[processRewardChoice] Profile not found for address:\", o), new Error(\"Profile not found\");\n    if (console.log(\"[processRewardChoice] Profile found:\", {\n      coins: n.coins,\n      inbox: n.coinsInbox\n    }), a === \"claim_now\") {\n      let i = n.coins || 0;\n      if (console.log(\"[processRewardChoice] Checking balance:\", { currentCoins: i, amount: e }), i < e) {\n        let d = `Saldo insuficiente. Voc\\xEA tem ${i} coins, precisa de ${e}`;\n        throw console.error(\"[processRewardChoice]\", d), new Error(d);\n      }\n      let l = i - e;\n      console.log(\"[processRewardChoice] Generating signature...\");\n      let u = m(), h;\n      try {\n        h = await p(o, e, u), console.log(\"[processRewardChoice] Signature generated successfully\");\n      } catch (d) {\n        throw console.error(\"[processRewardChoice] Signature generation failed:\", d), new Error(`Failed to generate signature: ${d.message}`);\n      }\n      return await s.db.patch(n._id, {\n        coins: l,\n        lastUpdated: Date.now()\n      }), await s.db.insert(\"claimAnalytics\", {\n        playerAddress: o.toLowerCase(),\n        choice: \"immediate\",\n        amount: e,\n        inboxTotal: n.coinsInbox || 0,\n        bonusAvailable: !1,\n        timestamp: Date.now()\n      }), {\n        success: !0,\n        choice: \"claim_now\",\n        amount: e,\n        nonce: u,\n        signature: h,\n        newCoinsBalance: l,\n        message: `\\u{1F4B3} ${e} coins convertidos para VBMS! Assine a transa\\xE7\\xE3o.`\n      };\n    } else\n      return {\n        success: !0,\n        choice: \"claim_later\",\n        amount: e,\n        coinsBalance: n.coins || 0,\n        message: `\\u{1F4E5} ${e} coins guardados! Converta depois quando quiser.`\n      };\n  }, \"handler\")\n}), b = g({\n  args: {\n    address: r.string(),\n    matchId: r.id(\"matches\")\n  },\n  handler: /* @__PURE__ */ c(async (s, { address: o, matchId: e }) => {\n    let a = await s.db.get(e);\n    if (!a)\n      throw new Error(\"Match not found\");\n    if (a.playerAddress.toLowerCase() !== o.toLowerCase())\n      throw new Error(\"Unauthorized: Not your match\");\n    if (a.rewardsClaimed)\n      throw new Error(\"Rewards already claimed\");\n    let t = a.coinsEarned || 0;\n    return {\n      matchId: e,\n      coinsEarned: t,\n      matchType: a.type,\n      result: a.result,\n      canClaim: t > 0\n    };\n  }, \"handler\")\n}), R = g({\n  args: {\n    matchId: r.id(\"matches\"),\n    claimType: r.union(r.literal(\"immediate\"), r.literal(\"inbox\"))\n  },\n  handler: /* @__PURE__ */ c(async (s, { matchId: o, claimType: e }) => {\n    let a = await s.db.get(o);\n    if (!a)\n      throw new Error(\"Match not found\");\n    if (a.rewardsClaimed)\n      throw new Error(\"Match already marked as claimed\");\n    return await s.db.patch(o, {\n      rewardsClaimed: !0,\n      claimedAt: Date.now(),\n      claimType: e\n    }), {\n      success: !0,\n      matchId: o,\n      claimType: e\n    };\n  }, \"handler\")\n});\nexport {\n  b as getPendingReward,\n  R as markMatchAsClaimed,\n  E as processRewardChoice\n};\n//# sourceMappingURL=rewardsChoice.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/rewardsChoice.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"generateNonce\", \"uuid1\", \"uuid2\", \"__name\", \"signClaimMessage\", \"address\", \"amount\", \"nonce\", \"SIGNER_PRIVATE_KEY\", \"wallet\", \"ethers_exports\", \"amountInWei\", \"messageHash\", \"signature\", \"processRewardChoice\", \"mutation\", \"v\", \"ctx\", \"choice\", \"source\", \"profile\", \"q\", \"currentCoins\", \"error\", \"newCoinsBalance\", \"signError\", \"getPendingReward\", \"matchId\", \"match\", \"coinsEarned\", \"markMatchAsClaimed\", \"claimType\"]\n}\n"},{"path":"_deps/OXIBDITK.js","source":"import {\n  a,\n  b as Hc\n} from \"./5B5TEMMX.js\";\n\n// node_modules/ethers/lib.esm/ethers.js\nvar Pu = {};\nHc(Pu, {\n  AbiCoder: () => st,\n  AbstractProvider: () => ot,\n  AbstractSigner: () => at,\n  AlchemyProvider: () => yn,\n  AnkrProvider: () => gn,\n  BaseContract: () => ir,\n  BaseWallet: () => ar,\n  Block: () => un,\n  BlockscoutProvider: () => ri,\n  BrowserProvider: () => ti,\n  ChainstackProvider: () => wn,\n  CloudflareProvider: () => An,\n  ConstructorFragment: () => St,\n  Contract: () => We,\n  ContractEventPayload: () => dn,\n  ContractFactory: () => Js,\n  ContractTransactionReceipt: () => os,\n  ContractTransactionResponse: () => sr,\n  ContractUnknownEventPayload: () => Cr,\n  EnsPlugin: () => Ur,\n  EnsResolver: () => Or,\n  ErrorDescription: () => ss,\n  ErrorFragment: () => Ke,\n  EtherSymbol: () => ka,\n  EtherscanPlugin: () => Xs,\n  EtherscanProvider: () => En,\n  EventFragment: () => Ot,\n  EventLog: () => nr,\n  EventPayload: () => Qt,\n  FallbackFragment: () => fn,\n  FallbackProvider: () => Nn,\n  FeeData: () => Tr,\n  FeeDataNetworkPlugin: () => Zs,\n  FetchCancelSignal: () => Mn,\n  FetchRequest: () => ne,\n  FetchResponse: () => xt,\n  FetchUrlFeeDataNetworkPlugin: () => pn,\n  FixedNumber: () => pr,\n  Fragment: () => Lt,\n  FunctionFragment: () => Ut,\n  GasCostPlugin: () => Sr,\n  HDNodeVoidWallet: () => Cn,\n  HDNodeWallet: () => lr,\n  Indexed: () => ln,\n  InfuraProvider: () => Gr,\n  InfuraWebSocketProvider: () => hs,\n  Interface: () => tr,\n  IpcSocketProvider: () => Pc,\n  JsonRpcApiProvider: () => Fr,\n  JsonRpcProvider: () => de,\n  JsonRpcSigner: () => Dr,\n  LangEn: () => je,\n  Log: () => $e,\n  LogDescription: () => rs,\n  MaxInt256: () => Pa,\n  MaxUint256: () => Aa,\n  MessagePrefix: () => Us,\n  MinInt256: () => Ea,\n  Mnemonic: () => Ft,\n  MulticoinProviderPlugin: () => as,\n  N: () => ya,\n  NamedFragment: () => er,\n  Network: () => J,\n  NetworkPlugin: () => Tt,\n  NonceManager: () => ei,\n  ParamType: () => me,\n  PocketProvider: () => ni,\n  QuickNodeProvider: () => kn,\n  Result: () => mt,\n  Signature: () => we,\n  SigningKey: () => Ie,\n  SocketBlockSubscriber: () => ls,\n  SocketEventSubscriber: () => ds,\n  SocketPendingSubscriber: () => us,\n  SocketProvider: () => Pn,\n  SocketSubscriber: () => Mr,\n  StructFragment: () => Rr,\n  Transaction: () => Xe,\n  TransactionDescription: () => ns,\n  TransactionReceipt: () => rr,\n  TransactionResponse: () => Dt,\n  Typed: () => se,\n  TypedDataEncoder: () => nt,\n  UndecodedEventLog: () => Ir,\n  UnmanagedSubscriber: () => It,\n  Utf8ErrorFuncs: () => mi,\n  VoidSigner: () => bn,\n  Wallet: () => li,\n  WebSocketProvider: () => or,\n  WeiPerEther: () => wa,\n  Wordlist: () => Bn,\n  WordlistOwl: () => cr,\n  WordlistOwlA: () => ui,\n  ZeroAddress: () => Pt,\n  ZeroHash: () => Jn,\n  accessListify: () => Ce,\n  assert: () => b,\n  assertArgument: () => h,\n  assertArgumentCount: () => zr,\n  assertNormalize: () => Vr,\n  assertPrivate: () => ve,\n  authorizationify: () => nn,\n  checkResultErrors: () => ki,\n  computeAddress: () => Nt,\n  computeHmac: () => yt,\n  concat: () => F,\n  copyRequest: () => it,\n  dataLength: () => Qe,\n  dataSlice: () => Y,\n  decodeBase58: () => ks,\n  decodeBase64: () => Ns,\n  decodeBytes32String: () => tc,\n  decodeRlp: () => Jt,\n  decryptCrowdsaleJson: () => As,\n  decryptKeystoreJson: () => fi,\n  decryptKeystoreJsonSync: () => ci,\n  defaultPath: () => ys,\n  defineProperties: () => P,\n  dnsEncode: () => zs,\n  encodeBase58: () => Qr,\n  encodeBase64: () => Bs,\n  encodeBytes32String: () => ec,\n  encodeRlp: () => _e,\n  encryptKeystoreJson: () => In,\n  encryptKeystoreJsonSync: () => Tn,\n  ensNormalize: () => ao,\n  formatEther: () => Qo,\n  formatUnits: () => wi,\n  fromTwos: () => Vt,\n  getAccountPath: () => Uc,\n  getAddress: () => U,\n  getBigInt: () => k,\n  getBytes: () => E,\n  getBytesCopy: () => fe,\n  getCreate2Address: () => Ra,\n  getCreateAddress: () => tn,\n  getDefaultProvider: () => Ec,\n  getIcapAddress: () => Ba,\n  getIndexedAccountPath: () => Lc,\n  getNumber: () => S,\n  getUint: () => Kr,\n  hashAuthorization: () => qn,\n  hashMessage: () => ts,\n  hexlify: () => w,\n  id: () => Oe,\n  isAddress: () => Ta,\n  isAddressable: () => jn,\n  isBytesLike: () => dt,\n  isCallException: () => xr,\n  isCrowdsaleJson: () => ws,\n  isError: () => $,\n  isHexString: () => z,\n  isKeystoreJson: () => gs,\n  isValidName: () => Ja,\n  keccak256: () => G,\n  lock: () => Tf,\n  makeError: () => Q,\n  mask: () => Ze,\n  namehash: () => Br,\n  parseEther: () => Jo,\n  parseUnits: () => Ai,\n  pbkdf2: () => ze,\n  randomBytes: () => Me,\n  recoverAddress: () => Bt,\n  resolveAddress: () => le,\n  resolveProperties: () => oe,\n  ripemd160: () => wt,\n  scrypt: () => At,\n  scryptSync: () => Et,\n  sha256: () => ye,\n  sha512: () => qr,\n  showThrottleMessage: () => Ue,\n  solidityPacked: () => Vs,\n  solidityPackedKeccak256: () => ja,\n  solidityPackedSha256: () => Za,\n  stripZerosLeft: () => Ho,\n  toBeArray: () => X,\n  toBeHex: () => Be,\n  toBigInt: () => tt,\n  toNumber: () => Ps,\n  toQuantity: () => Pe,\n  toTwos: () => Kt,\n  toUtf8Bytes: () => re,\n  toUtf8CodePoints: () => zo,\n  toUtf8String: () => He,\n  uuidV4: () => vs,\n  verifyAuthorization: () => Ua,\n  verifyMessage: () => Wa,\n  verifyTypedData: () => Xa,\n  version: () => Ln,\n  wordlists: () => Dc,\n  zeroPadBytes: () => zt,\n  zeroPadValue: () => ge\n});\n\n// node_modules/ethers/lib.esm/_version.js\nvar Ln = \"6.15.0\";\n\n// node_modules/ethers/lib.esm/utils/properties.js\nfunction ku(r, e, t) {\n  let n = e.split(\"|\").map((i) => i.trim());\n  for (let i = 0; i < n.length; i++)\n    switch (e) {\n      case \"any\":\n        return;\n      case \"bigint\":\n      case \"boolean\":\n      case \"number\":\n      case \"string\":\n        if (typeof r === e)\n          return;\n    }\n  let s = new Error(`invalid value for type ${e}`);\n  throw s.code = \"INVALID_ARGUMENT\", s.argument = `value.${t}`, s.value = r, s;\n}\na(ku, \"checkType\");\nasync function oe(r) {\n  let e = Object.keys(r);\n  return (await Promise.all(e.map((n) => Promise.resolve(r[n])))).reduce((n, s, i) => (n[e[i]] = s, n), {});\n}\na(oe, \"resolveProperties\");\nfunction P(r, e, t) {\n  for (let n in e) {\n    let s = e[n], i = t ? t[n] : null;\n    i && ku(s, i, n), Object.defineProperty(r, n, { enumerable: !0, value: s, writable: !1 });\n  }\n}\na(P, \"defineProperties\");\n\n// node_modules/ethers/lib.esm/utils/errors.js\nfunction Dn(r, e) {\n  if (r == null)\n    return \"null\";\n  if (e == null && (e = /* @__PURE__ */ new Set()), typeof r == \"object\") {\n    if (e.has(r))\n      return \"[Circular]\";\n    e.add(r);\n  }\n  if (Array.isArray(r))\n    return \"[ \" + r.map((t) => Dn(t, e)).join(\", \") + \" ]\";\n  if (r instanceof Uint8Array) {\n    let t = \"0123456789abcdef\", n = \"0x\";\n    for (let s = 0; s < r.length; s++)\n      n += t[r[s] >> 4], n += t[r[s] & 15];\n    return n;\n  }\n  if (typeof r == \"object\" && typeof r.toJSON == \"function\")\n    return Dn(r.toJSON(), e);\n  switch (typeof r) {\n    case \"boolean\":\n    case \"number\":\n    case \"symbol\":\n      return r.toString();\n    case \"bigint\":\n      return BigInt(r).toString();\n    case \"string\":\n      return JSON.stringify(r);\n    case \"object\": {\n      let t = Object.keys(r);\n      return t.sort(), \"{ \" + t.map((n) => `${Dn(n, e)}: ${Dn(r[n], e)}`).join(\", \") + \" }\";\n    }\n  }\n  return \"[ COULD NOT SERIALIZE ]\";\n}\na(Dn, \"stringify\");\nfunction $(r, e) {\n  return r && r.code === e;\n}\na($, \"isError\");\nfunction xr(r) {\n  return $(r, \"CALL_EXCEPTION\");\n}\na(xr, \"isCallException\");\nfunction Q(r, e, t) {\n  let n = r;\n  {\n    let i = [];\n    if (t) {\n      if (\"message\" in t || \"code\" in t || \"name\" in t)\n        throw new Error(`value will overwrite populated values: ${Dn(t)}`);\n      for (let o in t) {\n        if (o === \"shortMessage\")\n          continue;\n        let c = t[o];\n        i.push(o + \"=\" + Dn(c));\n      }\n    }\n    i.push(`code=${e}`), i.push(`version=${Ln}`), i.length && (r += \" (\" + i.join(\", \") + \")\");\n  }\n  let s;\n  switch (e) {\n    case \"INVALID_ARGUMENT\":\n      s = new TypeError(r);\n      break;\n    case \"NUMERIC_FAULT\":\n    case \"BUFFER_OVERRUN\":\n      s = new RangeError(r);\n      break;\n    default:\n      s = new Error(r);\n  }\n  return P(s, { code: e }), t && Object.assign(s, t), s.shortMessage == null && P(s, { shortMessage: n }), s;\n}\na(Q, \"makeError\");\nfunction b(r, e, t, n) {\n  if (!r)\n    throw Q(e, t, n);\n}\na(b, \"assert\");\nfunction h(r, e, t, n) {\n  b(r, e, \"INVALID_ARGUMENT\", { argument: t, value: n });\n}\na(h, \"assertArgument\");\nfunction zr(r, e, t) {\n  t == null && (t = \"\"), t && (t = \": \" + t), b(r >= e, \"missing argument\" + t, \"MISSING_ARGUMENT\", {\n    count: r,\n    expectedCount: e\n  }), b(r <= e, \"too many arguments\" + t, \"UNEXPECTED_ARGUMENT\", {\n    count: r,\n    expectedCount: e\n  });\n}\na(zr, \"assertArgumentCount\");\nvar Nu = [\"NFD\", \"NFC\", \"NFKD\", \"NFKC\"].reduce((r, e) => {\n  try {\n    if (\"test\".normalize(e) !== \"test\")\n      throw new Error(\"bad\");\n    if (e === \"NFD\" && \"\\xE9\".normalize(\"NFD\") !== \"e\\u0301\")\n      throw new Error(\"broken\");\n    r.push(e);\n  } catch {\n  }\n  return r;\n}, []);\nfunction Vr(r) {\n  b(Nu.indexOf(r) >= 0, \"platform missing String.prototype.normalize\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"String.prototype.normalize\",\n    info: { form: r }\n  });\n}\na(Vr, \"assertNormalize\");\nfunction ve(r, e, t) {\n  if (t == null && (t = \"\"), r !== e) {\n    let n = t, s = \"new\";\n    t && (n += \".\", s += \" \" + t), b(!1, `private constructor; use ${n}from* methods`, \"UNSUPPORTED_OPERATION\", {\n      operation: s\n    });\n  }\n}\na(ve, \"assertPrivate\");\n\n// node_modules/ethers/lib.esm/utils/data.js\nfunction zc(r, e, t) {\n  if (r instanceof Uint8Array)\n    return t ? new Uint8Array(r) : r;\n  if (typeof r == \"string\" && r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)) {\n    let n = new Uint8Array((r.length - 2) / 2), s = 2;\n    for (let i = 0; i < n.length; i++)\n      n[i] = parseInt(r.substring(s, s + 2), 16), s += 2;\n    return n;\n  }\n  h(!1, \"invalid BytesLike value\", e || \"value\", r);\n}\na(zc, \"_getBytes\");\nfunction E(r, e) {\n  return zc(r, e, !1);\n}\na(E, \"getBytes\");\nfunction fe(r, e) {\n  return zc(r, e, !0);\n}\na(fe, \"getBytesCopy\");\nfunction z(r, e) {\n  return !(typeof r != \"string\" || !r.match(/^0x[0-9A-Fa-f]*$/) || typeof e == \"number\" && r.length !== 2 + 2 * e || e === !0 && r.length % 2 !== 0);\n}\na(z, \"isHexString\");\nfunction dt(r) {\n  return z(r, !0) || r instanceof Uint8Array;\n}\na(dt, \"isBytesLike\");\nvar _c = \"0123456789abcdef\";\nfunction w(r) {\n  let e = E(r), t = \"0x\";\n  for (let n = 0; n < e.length; n++) {\n    let s = e[n];\n    t += _c[(s & 240) >> 4] + _c[s & 15];\n  }\n  return t;\n}\na(w, \"hexlify\");\nfunction F(r) {\n  return \"0x\" + r.map((e) => w(e).substring(2)).join(\"\");\n}\na(F, \"concat\");\nfunction Qe(r) {\n  return z(r, !0) ? (r.length - 2) / 2 : E(r).length;\n}\na(Qe, \"dataLength\");\nfunction Y(r, e, t) {\n  let n = E(r);\n  return t != null && t > n.length && b(!1, \"cannot slice beyond data bounds\", \"BUFFER_OVERRUN\", {\n    buffer: n,\n    length: n.length,\n    offset: t\n  }), w(n.slice(e ?? 0, t ?? n.length));\n}\na(Y, \"dataSlice\");\nfunction Ho(r) {\n  let e = w(r).substring(2);\n  for (; e.startsWith(\"00\"); )\n    e = e.substring(2);\n  return \"0x\" + e;\n}\na(Ho, \"stripZerosLeft\");\nfunction Vc(r, e, t) {\n  let n = E(r);\n  b(e >= n.length, \"padding exceeds data length\", \"BUFFER_OVERRUN\", {\n    buffer: new Uint8Array(n),\n    length: e,\n    offset: e + 1\n  });\n  let s = new Uint8Array(e);\n  return s.fill(0), t ? s.set(n, e - n.length) : s.set(n, 0), w(s);\n}\na(Vc, \"zeroPad\");\nfunction ge(r, e) {\n  return Vc(r, e, !0);\n}\na(ge, \"zeroPadValue\");\nfunction zt(r, e) {\n  return Vc(r, e, !1);\n}\na(zt, \"zeroPadBytes\");\n\n// node_modules/ethers/lib.esm/utils/maths.js\nvar hi = BigInt(0), ht = BigInt(1), Fn = 9007199254740991;\nfunction Vt(r, e) {\n  let t = Kr(r, \"value\"), n = BigInt(S(e, \"width\"));\n  if (b(t >> n === hi, \"overflow\", \"NUMERIC_FAULT\", {\n    operation: \"fromTwos\",\n    fault: \"overflow\",\n    value: r\n  }), t >> n - ht) {\n    let s = (ht << n) - ht;\n    return -((~t & s) + ht);\n  }\n  return t;\n}\na(Vt, \"fromTwos\");\nfunction Kt(r, e) {\n  let t = k(r, \"value\"), n = BigInt(S(e, \"width\")), s = ht << n - ht;\n  if (t < hi) {\n    t = -t, b(t <= s, \"too low\", \"NUMERIC_FAULT\", {\n      operation: \"toTwos\",\n      fault: \"overflow\",\n      value: r\n    });\n    let i = (ht << n) - ht;\n    return (~t & i) + ht;\n  } else\n    b(t < s, \"too high\", \"NUMERIC_FAULT\", {\n      operation: \"toTwos\",\n      fault: \"overflow\",\n      value: r\n    });\n  return t;\n}\na(Kt, \"toTwos\");\nfunction Ze(r, e) {\n  let t = Kr(r, \"value\"), n = BigInt(S(e, \"bits\"));\n  return t & (ht << n) - ht;\n}\na(Ze, \"mask\");\nfunction k(r, e) {\n  switch (typeof r) {\n    case \"bigint\":\n      return r;\n    case \"number\":\n      return h(Number.isInteger(r), \"underflow\", e || \"value\", r), h(r >= -Fn && r <= Fn, \"overflow\", e || \"value\", r), BigInt(r);\n    case \"string\":\n      try {\n        if (r === \"\")\n          throw new Error(\"empty string\");\n        return r[0] === \"-\" && r[1] !== \"-\" ? -BigInt(r.substring(1)) : BigInt(r);\n      } catch (t) {\n        h(!1, `invalid BigNumberish string: ${t.message}`, e || \"value\", r);\n      }\n  }\n  h(!1, \"invalid BigNumberish value\", e || \"value\", r);\n}\na(k, \"getBigInt\");\nfunction Kr(r, e) {\n  let t = k(r, e);\n  return b(t >= hi, \"unsigned value cannot be negative\", \"NUMERIC_FAULT\", {\n    fault: \"overflow\",\n    operation: \"getUint\",\n    value: r\n  }), t;\n}\na(Kr, \"getUint\");\nvar Kc = \"0123456789abcdef\";\nfunction tt(r) {\n  if (r instanceof Uint8Array) {\n    let e = \"0x0\";\n    for (let t of r)\n      e += Kc[t >> 4], e += Kc[t & 15];\n    return BigInt(e);\n  }\n  return k(r);\n}\na(tt, \"toBigInt\");\nfunction S(r, e) {\n  switch (typeof r) {\n    case \"bigint\":\n      return h(r >= -Fn && r <= Fn, \"overflow\", e || \"value\", r), Number(r);\n    case \"number\":\n      return h(Number.isInteger(r), \"underflow\", e || \"value\", r), h(r >= -Fn && r <= Fn, \"overflow\", e || \"value\", r), r;\n    case \"string\":\n      try {\n        if (r === \"\")\n          throw new Error(\"empty string\");\n        return S(BigInt(r), e);\n      } catch (t) {\n        h(!1, `invalid numeric string: ${t.message}`, e || \"value\", r);\n      }\n  }\n  h(!1, \"invalid numeric value\", e || \"value\", r);\n}\na(S, \"getNumber\");\nfunction Ps(r) {\n  return S(tt(r));\n}\na(Ps, \"toNumber\");\nfunction Be(r, e) {\n  let n = Kr(r, \"value\").toString(16);\n  if (e == null)\n    n.length % 2 && (n = \"0\" + n);\n  else {\n    let s = S(e, \"width\");\n    for (b(s * 2 >= n.length, `value exceeds width (${s} bytes)`, \"NUMERIC_FAULT\", {\n      operation: \"toBeHex\",\n      fault: \"overflow\",\n      value: r\n    }); n.length < s * 2; )\n      n = \"0\" + n;\n  }\n  return \"0x\" + n;\n}\na(Be, \"toBeHex\");\nfunction X(r) {\n  let e = Kr(r, \"value\");\n  if (e === hi)\n    return new Uint8Array([]);\n  let t = e.toString(16);\n  t.length % 2 && (t = \"0\" + t);\n  let n = new Uint8Array(t.length / 2);\n  for (let s = 0; s < n.length; s++) {\n    let i = s * 2;\n    n[s] = parseInt(t.substring(i, i + 2), 16);\n  }\n  return n;\n}\na(X, \"toBeArray\");\nfunction Pe(r) {\n  let e = w(dt(r) ? r : X(r)).substring(2);\n  for (; e.startsWith(\"0\"); )\n    e = e.substring(1);\n  return e === \"\" && (e = \"0\"), \"0x\" + e;\n}\na(Pe, \"toQuantity\");\n\n// node_modules/ethers/lib.esm/utils/base58.js\nvar pi = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\", xi = null;\nfunction Bu(r) {\n  if (xi == null) {\n    xi = {};\n    for (let t = 0; t < pi.length; t++)\n      xi[pi[t]] = BigInt(t);\n  }\n  let e = xi[r];\n  return h(e != null, \"invalid base58 value\", \"letter\", r), e;\n}\na(Bu, \"getAlpha\");\nvar Ru = BigInt(0), _o = BigInt(58);\nfunction Qr(r) {\n  let e = E(r), t = tt(e), n = \"\";\n  for (; t; )\n    n = pi[Number(t % _o)] + n, t /= _o;\n  for (let s = 0; s < e.length && !e[s]; s++)\n    n = pi[0] + n;\n  return n;\n}\na(Qr, \"encodeBase58\");\nfunction ks(r) {\n  let e = Ru;\n  for (let t = 0; t < r.length; t++)\n    e *= _o, e += Bu(r[t]);\n  return e;\n}\na(ks, \"decodeBase58\");\n\n// node_modules/ethers/lib.esm/utils/base64-browser.js\nfunction Ns(r) {\n  r = atob(r);\n  let e = new Uint8Array(r.length);\n  for (let t = 0; t < r.length; t++)\n    e[t] = r.charCodeAt(t);\n  return E(e);\n}\na(Ns, \"decodeBase64\");\nfunction Bs(r) {\n  let e = E(r), t = \"\";\n  for (let n = 0; n < e.length; n++)\n    t += String.fromCharCode(e[n]);\n  return btoa(t);\n}\na(Bs, \"encodeBase64\");\n\n// node_modules/ethers/lib.esm/utils/events.js\nvar Qt = class {\n  static {\n    a(this, \"EventPayload\");\n  }\n  /**\n   *  The event filter.\n   */\n  filter;\n  /**\n   *  The **EventEmitterable**.\n   */\n  emitter;\n  #e;\n  /**\n   *  Create a new **EventPayload** for %%emitter%% with\n   *  the %%listener%% and for %%filter%%.\n   */\n  constructor(e, t, n) {\n    this.#e = t, P(this, { emitter: e, filter: n });\n  }\n  /**\n   *  Unregister the triggered listener for future events.\n   */\n  async removeListener() {\n    this.#e != null && await this.emitter.off(this.filter, this.#e);\n  }\n};\n\n// node_modules/ethers/lib.esm/utils/utf8.js\nfunction vu(r, e, t, n, s) {\n  h(!1, `invalid codepoint at offset ${e}; ${r}`, \"bytes\", t);\n}\na(vu, \"errorFunc\");\nfunction Qc(r, e, t, n, s) {\n  if (r === \"BAD_PREFIX\" || r === \"UNEXPECTED_CONTINUE\") {\n    let i = 0;\n    for (let o = e + 1; o < t.length && t[o] >> 6 === 2; o++)\n      i++;\n    return i;\n  }\n  return r === \"OVERRUN\" ? t.length - e - 1 : 0;\n}\na(Qc, \"ignoreFunc\");\nfunction Tu(r, e, t, n, s) {\n  return r === \"OVERLONG\" ? (h(typeof s == \"number\", \"invalid bad code point for replacement\", \"badCodepoint\", s), n.push(s), 0) : (n.push(65533), Qc(r, e, t, n, s));\n}\na(Tu, \"replaceFunc\");\nvar mi = Object.freeze({\n  error: vu,\n  ignore: Qc,\n  replace: Tu\n});\nfunction Jc(r, e) {\n  e == null && (e = mi.error);\n  let t = E(r, \"bytes\"), n = [], s = 0;\n  for (; s < t.length; ) {\n    let i = t[s++];\n    if (i >> 7 === 0) {\n      n.push(i);\n      continue;\n    }\n    let o = null, c = null;\n    if ((i & 224) === 192)\n      o = 1, c = 127;\n    else if ((i & 240) === 224)\n      o = 2, c = 2047;\n    else if ((i & 248) === 240)\n      o = 3, c = 65535;\n    else {\n      (i & 192) === 128 ? s += e(\"UNEXPECTED_CONTINUE\", s - 1, t, n) : s += e(\"BAD_PREFIX\", s - 1, t, n);\n      continue;\n    }\n    if (s - 1 + o >= t.length) {\n      s += e(\"OVERRUN\", s - 1, t, n);\n      continue;\n    }\n    let f = i & (1 << 8 - o - 1) - 1;\n    for (let l = 0; l < o; l++) {\n      let u = t[s];\n      if ((u & 192) != 128) {\n        s += e(\"MISSING_CONTINUE\", s, t, n), f = null;\n        break;\n      }\n      f = f << 6 | u & 63, s++;\n    }\n    if (f !== null) {\n      if (f > 1114111) {\n        s += e(\"OUT_OF_RANGE\", s - 1 - o, t, n, f);\n        continue;\n      }\n      if (f >= 55296 && f <= 57343) {\n        s += e(\"UTF16_SURROGATE\", s - 1 - o, t, n, f);\n        continue;\n      }\n      if (f <= c) {\n        s += e(\"OVERLONG\", s - 1 - o, t, n, f);\n        continue;\n      }\n      n.push(f);\n    }\n  }\n  return n;\n}\na(Jc, \"getUtf8CodePoints\");\nfunction re(r, e) {\n  h(typeof r == \"string\", \"invalid string value\", \"str\", r), e != null && (Vr(e), r = r.normalize(e));\n  let t = [];\n  for (let n = 0; n < r.length; n++) {\n    let s = r.charCodeAt(n);\n    if (s < 128)\n      t.push(s);\n    else if (s < 2048)\n      t.push(s >> 6 | 192), t.push(s & 63 | 128);\n    else if ((s & 64512) == 55296) {\n      n++;\n      let i = r.charCodeAt(n);\n      h(n < r.length && (i & 64512) === 56320, \"invalid surrogate pair\", \"str\", r);\n      let o = 65536 + ((s & 1023) << 10) + (i & 1023);\n      t.push(o >> 18 | 240), t.push(o >> 12 & 63 | 128), t.push(o >> 6 & 63 | 128), t.push(o & 63 | 128);\n    } else\n      t.push(s >> 12 | 224), t.push(s >> 6 & 63 | 128), t.push(s & 63 | 128);\n  }\n  return new Uint8Array(t);\n}\na(re, \"toUtf8Bytes\");\nfunction Iu(r) {\n  return r.map((e) => e <= 65535 ? String.fromCharCode(e) : (e -= 65536, String.fromCharCode((e >> 10 & 1023) + 55296, (e & 1023) + 56320))).join(\"\");\n}\na(Iu, \"_toUtf8String\");\nfunction He(r, e) {\n  return Iu(Jc(r, e));\n}\na(He, \"toUtf8String\");\nfunction zo(r, e) {\n  return Jc(re(r, e));\n}\na(zo, \"toUtf8CodePoints\");\n\n// node_modules/ethers/lib.esm/utils/geturl-browser.js\nfunction bi(r) {\n  async function e(t, n) {\n    b(n == null || !n.cancelled, \"request cancelled before sending\", \"CANCELLED\");\n    let s = t.url.split(\":\")[0].toLowerCase();\n    b(s === \"http\" || s === \"https\", `unsupported protocol ${s}`, \"UNSUPPORTED_OPERATION\", {\n      info: { protocol: s },\n      operation: \"request\"\n    }), b(s === \"https\" || !t.credentials || t.allowInsecureAuthentication, \"insecure authorized connections unsupported\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"request\"\n    });\n    let i = null, o = new AbortController(), c = setTimeout(() => {\n      i = Q(\"request timeout\", \"TIMEOUT\"), o.abort();\n    }, t.timeout);\n    n && n.addListener(() => {\n      i = Q(\"request cancelled\", \"CANCELLED\"), o.abort();\n    });\n    let f = Object.assign({}, r, {\n      method: t.method,\n      headers: new Headers(Array.from(t)),\n      body: t.body || void 0,\n      signal: o.signal\n    }), l;\n    try {\n      l = await fetch(t.url, f);\n    } catch (p) {\n      throw clearTimeout(c), i || p;\n    }\n    clearTimeout(c);\n    let u = {};\n    l.headers.forEach((p, g) => {\n      u[g.toLowerCase()] = p;\n    });\n    let d = await l.arrayBuffer(), x = d == null ? null : new Uint8Array(d);\n    return {\n      statusCode: l.status,\n      statusMessage: l.statusText,\n      headers: u,\n      body: x\n    };\n  }\n  return a(e, \"getUrl\"), e;\n}\na(bi, \"createGetUrl\");\nvar Gm = bi({});\n\n// node_modules/ethers/lib.esm/utils/fetch.js\nvar Cu = 12, Ou = 250, Wc = bi(), Su = new RegExp(\"^data:([^;:]*)?(;base64)?,(.*)$\", \"i\"), Uu = new RegExp(\"^ipfs://(ipfs/)?(.*)$\", \"i\"), Vo = !1;\nasync function Zc(r, e) {\n  try {\n    let t = r.match(Su);\n    if (!t)\n      throw new Error(\"invalid data\");\n    return new xt(200, \"OK\", {\n      \"content-type\": t[1] || \"text/plain\"\n    }, t[2] ? Ns(t[3]) : Lu(t[3]));\n  } catch {\n    return new xt(599, \"BAD REQUEST (invalid data: URI)\", {}, null, new ne(r));\n  }\n}\na(Zc, \"dataGatewayFunc\");\nfunction qc(r) {\n  async function e(t, n) {\n    try {\n      let s = t.match(Uu);\n      if (!s)\n        throw new Error(\"invalid link\");\n      return new ne(`${r}${s[2]}`);\n    } catch {\n      return new xt(599, \"BAD REQUEST (invalid IPFS URI)\", {}, null, new ne(t));\n    }\n  }\n  return a(e, \"gatewayIpfs\"), e;\n}\na(qc, \"getIpfsGatewayFunc\");\nvar gi = {\n  data: Zc,\n  ipfs: qc(\"https://gateway.ipfs.io/ipfs/\")\n}, Yc = /* @__PURE__ */ new WeakMap(), Mn = class {\n  static {\n    a(this, \"FetchCancelSignal\");\n  }\n  #e;\n  #t;\n  constructor(e) {\n    this.#e = [], this.#t = !1, Yc.set(e, () => {\n      if (!this.#t) {\n        this.#t = !0;\n        for (let t of this.#e)\n          setTimeout(() => {\n            t();\n          }, 0);\n        this.#e = [];\n      }\n    });\n  }\n  addListener(e) {\n    b(!this.#t, \"singal already cancelled\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"fetchCancelSignal.addCancelListener\"\n    }), this.#e.push(e);\n  }\n  get cancelled() {\n    return this.#t;\n  }\n  checkSignal() {\n    b(!this.cancelled, \"cancelled\", \"CANCELLED\", {});\n  }\n};\nfunction yi(r) {\n  if (r == null)\n    throw new Error(\"missing signal; should not happen\");\n  return r.checkSignal(), r;\n}\na(yi, \"checkSignal\");\nvar ne = class r {\n  static {\n    a(this, \"FetchRequest\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  #s;\n  #o;\n  #i;\n  #a;\n  #u;\n  // Hooks\n  #f;\n  #x;\n  #p;\n  #c;\n  #l;\n  #d;\n  /**\n   *  The fetch URL to request.\n   */\n  get url() {\n    return this.#o;\n  }\n  set url(e) {\n    this.#o = String(e);\n  }\n  /**\n   *  The fetch body, if any, to send as the request body. //(default: null)//\n   *\n   *  When setting a body, the intrinsic ``Content-Type`` is automatically\n   *  set and will be used if **not overridden** by setting a custom\n   *  header.\n   *\n   *  If %%body%% is null, the body is cleared (along with the\n   *  intrinsic ``Content-Type``).\n   *\n   *  If %%body%% is a string, the intrinsic ``Content-Type`` is set to\n   *  ``text/plain``.\n   *\n   *  If %%body%% is a Uint8Array, the intrinsic ``Content-Type`` is set to\n   *  ``application/octet-stream``.\n   *\n   *  If %%body%% is any other object, the intrinsic ``Content-Type`` is\n   *  set to ``application/json``.\n   */\n  get body() {\n    return this.#i == null ? null : new Uint8Array(this.#i);\n  }\n  set body(e) {\n    if (e == null)\n      this.#i = void 0, this.#a = void 0;\n    else if (typeof e == \"string\")\n      this.#i = re(e), this.#a = \"text/plain\";\n    else if (e instanceof Uint8Array)\n      this.#i = e, this.#a = \"application/octet-stream\";\n    else if (typeof e == \"object\")\n      this.#i = re(JSON.stringify(e)), this.#a = \"application/json\";\n    else\n      throw new Error(\"invalid body\");\n  }\n  /**\n   *  Returns true if the request has a body.\n   */\n  hasBody() {\n    return this.#i != null;\n  }\n  /**\n   *  The HTTP method to use when requesting the URI. If no method\n   *  has been explicitly set, then ``GET`` is used if the body is\n   *  null and ``POST`` otherwise.\n   */\n  get method() {\n    return this.#n ? this.#n : this.hasBody() ? \"POST\" : \"GET\";\n  }\n  set method(e) {\n    e == null && (e = \"\"), this.#n = String(e).toUpperCase();\n  }\n  /**\n   *  The headers that will be used when requesting the URI. All\n   *  keys are lower-case.\n   *\n   *  This object is a copy, so any changes will **NOT** be reflected\n   *  in the ``FetchRequest``.\n   *\n   *  To set a header entry, use the ``setHeader`` method.\n   */\n  get headers() {\n    let e = Object.assign({}, this.#r);\n    return this.#u && (e.authorization = `Basic ${Bs(re(this.#u))}`), this.allowGzip && (e[\"accept-encoding\"] = \"gzip\"), e[\"content-type\"] == null && this.#a && (e[\"content-type\"] = this.#a), this.body && (e[\"content-length\"] = String(this.body.length)), e;\n  }\n  /**\n   *  Get the header for %%key%%, ignoring case.\n   */\n  getHeader(e) {\n    return this.headers[e.toLowerCase()];\n  }\n  /**\n   *  Set the header for %%key%% to %%value%%. All values are coerced\n   *  to a string.\n   */\n  setHeader(e, t) {\n    this.#r[String(e).toLowerCase()] = String(t);\n  }\n  /**\n   *  Clear all headers, resetting all intrinsic headers.\n   */\n  clearHeaders() {\n    this.#r = {};\n  }\n  [Symbol.iterator]() {\n    let e = this.headers, t = Object.keys(e), n = 0;\n    return {\n      next: /* @__PURE__ */ a(() => {\n        if (n < t.length) {\n          let s = t[n++];\n          return {\n            value: [s, e[s]],\n            done: !1\n          };\n        }\n        return { value: void 0, done: !0 };\n      }, \"next\")\n    };\n  }\n  /**\n   *  The value that will be sent for the ``Authorization`` header.\n   *\n   *  To set the credentials, use the ``setCredentials`` method.\n   */\n  get credentials() {\n    return this.#u || null;\n  }\n  /**\n   *  Sets an ``Authorization`` for %%username%% with %%password%%.\n   */\n  setCredentials(e, t) {\n    h(!e.match(/:/), \"invalid basic authentication username\", \"username\", \"[REDACTED]\"), this.#u = `${e}:${t}`;\n  }\n  /**\n   *  Enable and request gzip-encoded responses. The response will\n   *  automatically be decompressed. //(default: true)//\n   */\n  get allowGzip() {\n    return this.#t;\n  }\n  set allowGzip(e) {\n    this.#t = !!e;\n  }\n  /**\n   *  Allow ``Authentication`` credentials to be sent over insecure\n   *  channels. //(default: false)//\n   */\n  get allowInsecureAuthentication() {\n    return !!this.#e;\n  }\n  set allowInsecureAuthentication(e) {\n    this.#e = !!e;\n  }\n  /**\n   *  The timeout (in milliseconds) to wait for a complete response.\n   *  //(default: 5 minutes)//\n   */\n  get timeout() {\n    return this.#s;\n  }\n  set timeout(e) {\n    h(e >= 0, \"timeout must be non-zero\", \"timeout\", e), this.#s = e;\n  }\n  /**\n   *  This function is called prior to each request, for example\n   *  during a redirection or retry in case of server throttling.\n   *\n   *  This offers an opportunity to populate headers or update\n   *  content before sending a request.\n   */\n  get preflightFunc() {\n    return this.#f || null;\n  }\n  set preflightFunc(e) {\n    this.#f = e;\n  }\n  /**\n   *  This function is called after each response, offering an\n   *  opportunity to provide client-level throttling or updating\n   *  response data.\n   *\n   *  Any error thrown in this causes the ``send()`` to throw.\n   *\n   *  To schedule a retry attempt (assuming the maximum retry limit\n   *  has not been reached), use [[response.throwThrottleError]].\n   */\n  get processFunc() {\n    return this.#x || null;\n  }\n  set processFunc(e) {\n    this.#x = e;\n  }\n  /**\n   *  This function is called on each retry attempt.\n   */\n  get retryFunc() {\n    return this.#p || null;\n  }\n  set retryFunc(e) {\n    this.#p = e;\n  }\n  /**\n   *  This function is called to fetch content from HTTP and\n   *  HTTPS URLs and is platform specific (e.g. nodejs vs\n   *  browsers).\n   *\n   *  This is by default the currently registered global getUrl\n   *  function, which can be changed using [[registerGetUrl]].\n   *  If this has been set, setting is to ``null`` will cause\n   *  this FetchRequest (and any future clones) to revert back to\n   *  using the currently registered global getUrl function.\n   *\n   *  Setting this is generally not necessary, but may be useful\n   *  for developers that wish to intercept requests or to\n   *  configurege a proxy or other agent.\n   */\n  get getUrlFunc() {\n    return this.#d || Wc;\n  }\n  set getUrlFunc(e) {\n    this.#d = e;\n  }\n  /**\n   *  Create a new FetchRequest instance with default values.\n   *\n   *  Once created, each property may be set before issuing a\n   *  ``.send()`` to make the request.\n   */\n  constructor(e) {\n    this.#o = String(e), this.#e = !1, this.#t = !0, this.#r = {}, this.#n = \"\", this.#s = 3e5, this.#l = {\n      slotInterval: Ou,\n      maxAttempts: Cu\n    }, this.#d = null;\n  }\n  toString() {\n    return `<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i ? w(this.#i) : \"null\"}>`;\n  }\n  /**\n   *  Update the throttle parameters used to determine maximum\n   *  attempts and exponential-backoff properties.\n   */\n  setThrottleParams(e) {\n    e.slotInterval != null && (this.#l.slotInterval = e.slotInterval), e.maxAttempts != null && (this.#l.maxAttempts = e.maxAttempts);\n  }\n  async #h(e, t, n, s, i) {\n    if (e >= this.#l.maxAttempts)\n      return i.makeServerError(\"exceeded maximum retry limit\");\n    b(jc() <= t, \"timeout\", \"TIMEOUT\", {\n      operation: \"request.send\",\n      reason: \"timeout\",\n      request: s\n    }), n > 0 && await Du(n);\n    let o = this.clone(), c = (o.url.split(\":\")[0] || \"\").toLowerCase();\n    if (c in gi) {\n      let u = await gi[c](o.url, yi(s.#c));\n      if (u instanceof xt) {\n        let d = u;\n        if (this.processFunc) {\n          yi(s.#c);\n          try {\n            d = await this.processFunc(o, d);\n          } catch (x) {\n            (x.throttle == null || typeof x.stall != \"number\") && d.makeServerError(\"error in post-processing function\", x).assertOk();\n          }\n        }\n        return d;\n      }\n      o = u;\n    }\n    this.preflightFunc && (o = await this.preflightFunc(o));\n    let f = await this.getUrlFunc(o, yi(s.#c)), l = new xt(f.statusCode, f.statusMessage, f.headers, f.body, s);\n    if (l.statusCode === 301 || l.statusCode === 302) {\n      try {\n        let u = l.headers.location || \"\";\n        return o.redirect(u).#h(e + 1, t, 0, s, l);\n      } catch {\n      }\n      return l;\n    } else if (l.statusCode === 429 && (this.retryFunc == null || await this.retryFunc(o, l, e))) {\n      let u = l.headers[\"retry-after\"], d = this.#l.slotInterval * Math.trunc(Math.random() * Math.pow(2, e));\n      return typeof u == \"string\" && u.match(/^[1-9][0-9]*$/) && (d = parseInt(u)), o.clone().#h(e + 1, t, d, s, l);\n    }\n    if (this.processFunc) {\n      yi(s.#c);\n      try {\n        l = await this.processFunc(o, l);\n      } catch (u) {\n        (u.throttle == null || typeof u.stall != \"number\") && l.makeServerError(\"error in post-processing function\", u).assertOk();\n        let d = this.#l.slotInterval * Math.trunc(Math.random() * Math.pow(2, e));\n        return u.stall >= 0 && (d = u.stall), o.clone().#h(e + 1, t, d, s, l);\n      }\n    }\n    return l;\n  }\n  /**\n   *  Resolves to the response by sending the request.\n   */\n  send() {\n    return b(this.#c == null, \"request already sent\", \"UNSUPPORTED_OPERATION\", { operation: \"fetchRequest.send\" }), this.#c = new Mn(this), this.#h(0, jc() + this.timeout, 0, this, new xt(0, \"\", {}, null, this));\n  }\n  /**\n   *  Cancels the inflight response, causing a ``CANCELLED``\n   *  error to be rejected from the [[send]].\n   */\n  cancel() {\n    b(this.#c != null, \"request has not been sent\", \"UNSUPPORTED_OPERATION\", { operation: \"fetchRequest.cancel\" });\n    let e = Yc.get(this);\n    if (!e)\n      throw new Error(\"missing signal; should not happen\");\n    e();\n  }\n  /**\n   *  Returns a new [[FetchRequest]] that represents the redirection\n   *  to %%location%%.\n   */\n  redirect(e) {\n    let t = this.url.split(\":\")[0].toLowerCase(), n = e.split(\":\")[0].toLowerCase();\n    b(this.method === \"GET\" && (t !== \"https\" || n !== \"http\") && e.match(/^https?:/), \"unsupported redirect\", \"UNSUPPORTED_OPERATION\", {\n      operation: `redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`\n    });\n    let s = new r(e);\n    return s.method = \"GET\", s.allowGzip = this.allowGzip, s.timeout = this.timeout, s.#r = Object.assign({}, this.#r), this.#i && (s.#i = new Uint8Array(this.#i)), s.#a = this.#a, s;\n  }\n  /**\n   *  Create a new copy of this request.\n   */\n  clone() {\n    let e = new r(this.url);\n    return e.#n = this.#n, this.#i && (e.#i = this.#i), e.#a = this.#a, e.#r = Object.assign({}, this.#r), e.#u = this.#u, this.allowGzip && (e.allowGzip = !0), e.timeout = this.timeout, this.allowInsecureAuthentication && (e.allowInsecureAuthentication = !0), e.#f = this.#f, e.#x = this.#x, e.#p = this.#p, e.#l = Object.assign({}, this.#l), e.#d = this.#d, e;\n  }\n  /**\n   *  Locks all static configuration for gateways and FetchGetUrlFunc\n   *  registration.\n   */\n  static lockConfig() {\n    Vo = !0;\n  }\n  /**\n   *  Get the current Gateway function for %%scheme%%.\n   */\n  static getGateway(e) {\n    return gi[e.toLowerCase()] || null;\n  }\n  /**\n   *  Use the %%func%% when fetching URIs using %%scheme%%.\n   *\n   *  This method affects all requests globally.\n   *\n   *  If [[lockConfig]] has been called, no change is made and this\n   *  throws.\n   */\n  static registerGateway(e, t) {\n    if (e = e.toLowerCase(), e === \"http\" || e === \"https\")\n      throw new Error(`cannot intercept ${e}; use registerGetUrl`);\n    if (Vo)\n      throw new Error(\"gateways locked\");\n    gi[e] = t;\n  }\n  /**\n   *  Use %%getUrl%% when fetching URIs over HTTP and HTTPS requests.\n   *\n   *  This method affects all requests globally.\n   *\n   *  If [[lockConfig]] has been called, no change is made and this\n   *  throws.\n   */\n  static registerGetUrl(e) {\n    if (Vo)\n      throw new Error(\"gateways locked\");\n    Wc = e;\n  }\n  /**\n   *  Creates a getUrl function that fetches content from HTTP and\n   *  HTTPS URLs.\n   *\n   *  The available %%options%% are dependent on the platform\n   *  implementation of the default getUrl function.\n   *\n   *  This is not generally something that is needed, but is useful\n   *  when trying to customize simple behaviour when fetching HTTP\n   *  content.\n   */\n  static createGetUrlFunc(e) {\n    return bi(e);\n  }\n  /**\n   *  Creates a function that can \"fetch\" data URIs.\n   *\n   *  Note that this is automatically done internally to support\n   *  data URIs, so it is not necessary to register it.\n   *\n   *  This is not generally something that is needed, but may\n   *  be useful in a wrapper to perfom custom data URI functionality.\n   */\n  static createDataGateway() {\n    return Zc;\n  }\n  /**\n   *  Creates a function that will fetch IPFS (unvalidated) from\n   *  a custom gateway baseUrl.\n   *\n   *  The default IPFS gateway used internally is\n   *  ``\"https:/\\/gateway.ipfs.io/ipfs/\"``.\n   */\n  static createIpfsGatewayFunc(e) {\n    return qc(e);\n  }\n}, xt = class r {\n  static {\n    a(this, \"FetchResponse\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  #s;\n  #o;\n  toString() {\n    return `<FetchResponse status=${this.statusCode} body=${this.#n ? w(this.#n) : \"null\"}>`;\n  }\n  /**\n   *  The response status code.\n   */\n  get statusCode() {\n    return this.#e;\n  }\n  /**\n   *  The response status message.\n   */\n  get statusMessage() {\n    return this.#t;\n  }\n  /**\n   *  The response headers. All keys are lower-case.\n   */\n  get headers() {\n    return Object.assign({}, this.#r);\n  }\n  /**\n   *  The response body, or ``null`` if there was no body.\n   */\n  get body() {\n    return this.#n == null ? null : new Uint8Array(this.#n);\n  }\n  /**\n   *  The response body as a UTF-8 encoded string, or the empty\n   *  string (i.e. ``\"\"``) if there was no body.\n   *\n   *  An error is thrown if the body is invalid UTF-8 data.\n   */\n  get bodyText() {\n    try {\n      return this.#n == null ? \"\" : He(this.#n);\n    } catch {\n      b(!1, \"response body is not valid UTF-8 data\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"bodyText\",\n        info: { response: this }\n      });\n    }\n  }\n  /**\n   *  The response body, decoded as JSON.\n   *\n   *  An error is thrown if the body is invalid JSON-encoded data\n   *  or if there was no body.\n   */\n  get bodyJson() {\n    try {\n      return JSON.parse(this.bodyText);\n    } catch {\n      b(!1, \"response body is not valid JSON\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"bodyJson\",\n        info: { response: this }\n      });\n    }\n  }\n  [Symbol.iterator]() {\n    let e = this.headers, t = Object.keys(e), n = 0;\n    return {\n      next: /* @__PURE__ */ a(() => {\n        if (n < t.length) {\n          let s = t[n++];\n          return {\n            value: [s, e[s]],\n            done: !1\n          };\n        }\n        return { value: void 0, done: !0 };\n      }, \"next\")\n    };\n  }\n  constructor(e, t, n, s, i) {\n    this.#e = e, this.#t = t, this.#r = Object.keys(n).reduce((o, c) => (o[c.toLowerCase()] = String(n[c]), o), {}), this.#n = s == null ? null : new Uint8Array(s), this.#s = i || null, this.#o = { message: \"\" };\n  }\n  /**\n   *  Return a Response with matching headers and body, but with\n   *  an error status code (i.e. 599) and %%message%% with an\n   *  optional %%error%%.\n   */\n  makeServerError(e, t) {\n    let n;\n    e ? n = `CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})` : (e = `${this.statusCode} ${this.statusMessage}`, n = `CLIENT ESCALATED SERVER ERROR (${e})`);\n    let s = new r(599, n, this.headers, this.body, this.#s || void 0);\n    return s.#o = { message: e, error: t }, s;\n  }\n  /**\n   *  If called within a [request.processFunc](FetchRequest-processFunc)\n   *  call, causes the request to retry as if throttled for %%stall%%\n   *  milliseconds.\n   */\n  throwThrottleError(e, t) {\n    t == null ? t = -1 : h(Number.isInteger(t) && t >= 0, \"invalid stall timeout\", \"stall\", t);\n    let n = new Error(e || \"throttling requests\");\n    throw P(n, { stall: t, throttle: !0 }), n;\n  }\n  /**\n   *  Get the header value for %%key%%, ignoring case.\n   */\n  getHeader(e) {\n    return this.headers[e.toLowerCase()];\n  }\n  /**\n   *  Returns true if the response has a body.\n   */\n  hasBody() {\n    return this.#n != null;\n  }\n  /**\n   *  The request made for this response.\n   */\n  get request() {\n    return this.#s;\n  }\n  /**\n   *  Returns true if this response was a success statusCode.\n   */\n  ok() {\n    return this.#o.message === \"\" && this.statusCode >= 200 && this.statusCode < 300;\n  }\n  /**\n   *  Throws a ``SERVER_ERROR`` if this response is not ok.\n   */\n  assertOk() {\n    if (this.ok())\n      return;\n    let { message: e, error: t } = this.#o;\n    e === \"\" && (e = `server response ${this.statusCode} ${this.statusMessage}`);\n    let n = null;\n    this.request && (n = this.request.url);\n    let s = null;\n    try {\n      this.#n && (s = He(this.#n));\n    } catch {\n    }\n    b(!1, e, \"SERVER_ERROR\", {\n      request: this.request || \"unknown request\",\n      response: this,\n      error: t,\n      info: {\n        requestUrl: n,\n        responseBody: s,\n        responseStatus: `${this.statusCode} ${this.statusMessage}`\n      }\n    });\n  }\n};\nfunction jc() {\n  return (/* @__PURE__ */ new Date()).getTime();\n}\na(jc, \"getTime\");\nfunction Lu(r) {\n  return re(r.replace(/%([0-9a-f][0-9a-f])/gi, (e, t) => String.fromCharCode(parseInt(t, 16))));\n}\na(Lu, \"unpercent\");\nfunction Du(r) {\n  return new Promise((e) => setTimeout(e, r));\n}\na(Du, \"wait\");\n\n// node_modules/ethers/lib.esm/utils/fixednumber.js\nvar Fu = BigInt(-1), pt = BigInt(0), Hn = BigInt(1), Mu = BigInt(5), Gn = {}, _n = \"0000\";\nfor (; _n.length < 80; )\n  _n += _n;\nfunction Jr(r) {\n  let e = _n;\n  for (; e.length < r; )\n    e += e;\n  return BigInt(\"1\" + e.substring(0, r));\n}\na(Jr, \"getTens\");\nfunction Rs(r, e, t) {\n  let n = BigInt(e.width);\n  if (e.signed) {\n    let s = Hn << n - Hn;\n    b(t == null || r >= -s && r < s, \"overflow\", \"NUMERIC_FAULT\", {\n      operation: t,\n      fault: \"overflow\",\n      value: r\n    }), r > pt ? r = Vt(Ze(r, n), n) : r = -Vt(Ze(-r, n), n);\n  } else {\n    let s = Hn << n;\n    b(t == null || r >= 0 && r < s, \"overflow\", \"NUMERIC_FAULT\", {\n      operation: t,\n      fault: \"overflow\",\n      value: r\n    }), r = (r % s + s) % s & s - Hn;\n  }\n  return r;\n}\na(Rs, \"checkValue\");\nfunction Ko(r) {\n  typeof r == \"number\" && (r = `fixed128x${r}`);\n  let e = !0, t = 128, n = 18;\n  if (typeof r == \"string\") {\n    if (r !== \"fixed\")\n      if (r === \"ufixed\")\n        e = !1;\n      else {\n        let i = r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);\n        h(i, \"invalid fixed format\", \"format\", r), e = i[1] !== \"u\", t = parseInt(i[2]), n = parseInt(i[3]);\n      }\n  } else if (r) {\n    let i = r, o = /* @__PURE__ */ a((c, f, l) => i[c] == null ? l : (h(typeof i[c] === f, \"invalid fixed format (\" + c + \" not \" + f + \")\", \"format.\" + c, i[c]), i[c]), \"check\");\n    e = o(\"signed\", \"boolean\", e), t = o(\"width\", \"number\", t), n = o(\"decimals\", \"number\", n);\n  }\n  h(t % 8 === 0, \"invalid FixedNumber width (not byte aligned)\", \"format.width\", t), h(n <= 80, \"invalid FixedNumber decimals (too large)\", \"format.decimals\", n);\n  let s = (e ? \"\" : \"u\") + \"fixed\" + String(t) + \"x\" + String(n);\n  return { signed: e, width: t, decimals: n, name: s };\n}\na(Ko, \"getFormat\");\nfunction Gu(r, e) {\n  let t = \"\";\n  r < pt && (t = \"-\", r *= Fu);\n  let n = r.toString();\n  if (e === 0)\n    return t + n;\n  for (; n.length <= e; )\n    n = _n + n;\n  let s = n.length - e;\n  for (n = n.substring(0, s) + \".\" + n.substring(s); n[0] === \"0\" && n[1] !== \".\"; )\n    n = n.substring(1);\n  for (; n[n.length - 1] === \"0\" && n[n.length - 2] !== \".\"; )\n    n = n.substring(0, n.length - 1);\n  return t + n;\n}\na(Gu, \"toString\");\nvar pr = class r {\n  static {\n    a(this, \"FixedNumber\");\n  }\n  /**\n   *  The specific fixed-point arithmetic field for this value.\n   */\n  format;\n  #e;\n  // The actual value (accounting for decimals)\n  #t;\n  // A base-10 value to multiple values by to maintain the magnitude\n  #r;\n  /**\n   *  This is a property so console.log shows a human-meaningful value.\n   *\n   *  @private\n   */\n  _value;\n  // Use this when changing this file to get some typing info,\n  // but then switch to any to mask the internal type\n  //constructor(guard: any, value: bigint, format: _FixedFormat) {\n  /**\n   *  @private\n   */\n  constructor(e, t, n) {\n    ve(e, Gn, \"FixedNumber\"), this.#t = t, this.#e = n;\n    let s = Gu(t, n.decimals);\n    P(this, { format: n.name, _value: s }), this.#r = Jr(n.decimals);\n  }\n  /**\n   *  If true, negative values are permitted, otherwise only\n   *  positive values and zero are allowed.\n   */\n  get signed() {\n    return this.#e.signed;\n  }\n  /**\n   *  The number of bits available to store the value.\n   */\n  get width() {\n    return this.#e.width;\n  }\n  /**\n   *  The number of decimal places in the fixed-point arithment field.\n   */\n  get decimals() {\n    return this.#e.decimals;\n  }\n  /**\n   *  The value as an integer, based on the smallest unit the\n   *  [[decimals]] allow.\n   */\n  get value() {\n    return this.#t;\n  }\n  #n(e) {\n    h(this.format === e.format, \"incompatible format; use fixedNumber.toFormat\", \"other\", e);\n  }\n  #s(e, t) {\n    return e = Rs(e, this.#e, t), new r(Gn, e, this.#e);\n  }\n  #o(e, t) {\n    return this.#n(e), this.#s(this.#t + e.#t, t);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% added\n   *  to %%other%%, ignoring overflow.\n   */\n  addUnsafe(e) {\n    return this.#o(e);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% added\n   *  to %%other%%. A [[NumericFaultError]] is thrown if overflow\n   *  occurs.\n   */\n  add(e) {\n    return this.#o(e, \"add\");\n  }\n  #i(e, t) {\n    return this.#n(e), this.#s(this.#t - e.#t, t);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%other%% subtracted\n   *  from %%this%%, ignoring overflow.\n   */\n  subUnsafe(e) {\n    return this.#i(e);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%other%% subtracted\n   *  from %%this%%. A [[NumericFaultError]] is thrown if overflow\n   *  occurs.\n   */\n  sub(e) {\n    return this.#i(e, \"sub\");\n  }\n  #a(e, t) {\n    return this.#n(e), this.#s(this.#t * e.#t / this.#r, t);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% multiplied\n   *  by %%other%%, ignoring overflow and underflow (precision loss).\n   */\n  mulUnsafe(e) {\n    return this.#a(e);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% multiplied\n   *  by %%other%%. A [[NumericFaultError]] is thrown if overflow\n   *  occurs.\n   */\n  mul(e) {\n    return this.#a(e, \"mul\");\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% multiplied\n   *  by %%other%%. A [[NumericFaultError]] is thrown if overflow\n   *  occurs or if underflow (precision loss) occurs.\n   */\n  mulSignal(e) {\n    this.#n(e);\n    let t = this.#t * e.#t;\n    return b(t % this.#r === pt, \"precision lost during signalling mul\", \"NUMERIC_FAULT\", {\n      operation: \"mulSignal\",\n      fault: \"underflow\",\n      value: this\n    }), this.#s(t / this.#r, \"mulSignal\");\n  }\n  #u(e, t) {\n    return b(e.#t !== pt, \"division by zero\", \"NUMERIC_FAULT\", {\n      operation: \"div\",\n      fault: \"divide-by-zero\",\n      value: this\n    }), this.#n(e), this.#s(this.#t * this.#r / e.#t, t);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% divided\n   *  by %%other%%, ignoring underflow (precision loss). A\n   *  [[NumericFaultError]] is thrown if overflow occurs.\n   */\n  divUnsafe(e) {\n    return this.#u(e);\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% divided\n   *  by %%other%%, ignoring underflow (precision loss). A\n   *  [[NumericFaultError]] is thrown if overflow occurs.\n   */\n  div(e) {\n    return this.#u(e, \"div\");\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the result of %%this%% divided\n   *  by %%other%%. A [[NumericFaultError]] is thrown if underflow\n   *  (precision loss) occurs.\n   */\n  divSignal(e) {\n    b(e.#t !== pt, \"division by zero\", \"NUMERIC_FAULT\", {\n      operation: \"div\",\n      fault: \"divide-by-zero\",\n      value: this\n    }), this.#n(e);\n    let t = this.#t * this.#r;\n    return b(t % e.#t === pt, \"precision lost during signalling div\", \"NUMERIC_FAULT\", {\n      operation: \"divSignal\",\n      fault: \"underflow\",\n      value: this\n    }), this.#s(t / e.#t, \"divSignal\");\n  }\n  /**\n   *  Returns a comparison result between %%this%% and %%other%%.\n   *\n   *  This is suitable for use in sorting, where ``-1`` implies %%this%%\n   *  is smaller, ``1`` implies %%this%% is larger and ``0`` implies\n   *  both are equal.\n   */\n  cmp(e) {\n    let t = this.value, n = e.value, s = this.decimals - e.decimals;\n    return s > 0 ? n *= Jr(s) : s < 0 && (t *= Jr(-s)), t < n ? -1 : t > n ? 1 : 0;\n  }\n  /**\n   *  Returns true if %%other%% is equal to %%this%%.\n   */\n  eq(e) {\n    return this.cmp(e) === 0;\n  }\n  /**\n   *  Returns true if %%other%% is less than to %%this%%.\n   */\n  lt(e) {\n    return this.cmp(e) < 0;\n  }\n  /**\n   *  Returns true if %%other%% is less than or equal to %%this%%.\n   */\n  lte(e) {\n    return this.cmp(e) <= 0;\n  }\n  /**\n   *  Returns true if %%other%% is greater than to %%this%%.\n   */\n  gt(e) {\n    return this.cmp(e) > 0;\n  }\n  /**\n   *  Returns true if %%other%% is greater than or equal to %%this%%.\n   */\n  gte(e) {\n    return this.cmp(e) >= 0;\n  }\n  /**\n   *  Returns a new [[FixedNumber]] which is the largest **integer**\n   *  that is less than or equal to %%this%%.\n   *\n   *  The decimal component of the result will always be ``0``.\n   */\n  floor() {\n    let e = this.#t;\n    return this.#t < pt && (e -= this.#r - Hn), e = this.#t / this.#r * this.#r, this.#s(e, \"floor\");\n  }\n  /**\n   *  Returns a new [[FixedNumber]] which is the smallest **integer**\n   *  that is greater than or equal to %%this%%.\n   *\n   *  The decimal component of the result will always be ``0``.\n   */\n  ceiling() {\n    let e = this.#t;\n    return this.#t > pt && (e += this.#r - Hn), e = this.#t / this.#r * this.#r, this.#s(e, \"ceiling\");\n  }\n  /**\n   *  Returns a new [[FixedNumber]] with the decimal component\n   *  rounded up on ties at %%decimals%% places.\n   */\n  round(e) {\n    if (e == null && (e = 0), e >= this.decimals)\n      return this;\n    let t = this.decimals - e, n = Mu * Jr(t - 1), s = this.value + n, i = Jr(t);\n    return s = s / i * i, Rs(s, this.#e, \"round\"), new r(Gn, s, this.#e);\n  }\n  /**\n   *  Returns true if %%this%% is equal to ``0``.\n   */\n  isZero() {\n    return this.#t === pt;\n  }\n  /**\n   *  Returns true if %%this%% is less than ``0``.\n   */\n  isNegative() {\n    return this.#t < pt;\n  }\n  /**\n   *  Returns the string representation of %%this%%.\n   */\n  toString() {\n    return this._value;\n  }\n  /**\n   *  Returns a float approximation.\n   *\n   *  Due to IEEE 754 precission (or lack thereof), this function\n   *  can only return an approximation and most values will contain\n   *  rounding errors.\n   */\n  toUnsafeFloat() {\n    return parseFloat(this.toString());\n  }\n  /**\n   *  Return a new [[FixedNumber]] with the same value but has had\n   *  its field set to %%format%%.\n   *\n   *  This will throw if the value cannot fit into %%format%%.\n   */\n  toFormat(e) {\n    return r.fromString(this.toString(), e);\n  }\n  /**\n   *  Creates a new [[FixedNumber]] for %%value%% divided by\n   *  %%decimal%% places with %%format%%.\n   *\n   *  This will throw a [[NumericFaultError]] if %%value%% (once adjusted\n   *  for %%decimals%%) cannot fit in %%format%%, either due to overflow\n   *  or underflow (precision loss).\n   */\n  static fromValue(e, t, n) {\n    let s = t == null ? 0 : S(t), i = Ko(n), o = k(e, \"value\"), c = s - i.decimals;\n    if (c > 0) {\n      let f = Jr(c);\n      b(o % f === pt, \"value loses precision for format\", \"NUMERIC_FAULT\", {\n        operation: \"fromValue\",\n        fault: \"underflow\",\n        value: e\n      }), o /= f;\n    } else c < 0 && (o *= Jr(-c));\n    return Rs(o, i, \"fromValue\"), new r(Gn, o, i);\n  }\n  /**\n   *  Creates a new [[FixedNumber]] for %%value%% with %%format%%.\n   *\n   *  This will throw a [[NumericFaultError]] if %%value%% cannot fit\n   *  in %%format%%, either due to overflow or underflow (precision loss).\n   */\n  static fromString(e, t) {\n    let n = e.match(/^(-?)([0-9]*)\\.?([0-9]*)$/);\n    h(n && n[2].length + n[3].length > 0, \"invalid FixedNumber string value\", \"value\", e);\n    let s = Ko(t), i = n[2] || \"0\", o = n[3] || \"\";\n    for (; o.length < s.decimals; )\n      o += _n;\n    b(o.substring(s.decimals).match(/^0*$/), \"too many decimals for format\", \"NUMERIC_FAULT\", {\n      operation: \"fromString\",\n      fault: \"underflow\",\n      value: e\n    }), o = o.substring(0, s.decimals);\n    let c = BigInt(n[1] + i + o);\n    return Rs(c, s, \"fromString\"), new r(Gn, c, s);\n  }\n  /**\n   *  Creates a new [[FixedNumber]] with the big-endian representation\n   *  %%value%% with %%format%%.\n   *\n   *  This will throw a [[NumericFaultError]] if %%value%% cannot fit\n   *  in %%format%% due to overflow.\n   */\n  static fromBytes(e, t) {\n    let n = tt(E(e, \"value\")), s = Ko(t);\n    return s.signed && (n = Vt(n, s.width)), Rs(n, s, \"fromBytes\"), new r(Gn, n, s);\n  }\n};\n\n// node_modules/ethers/lib.esm/utils/rlp-decode.js\nfunction Hu(r) {\n  let e = r.toString(16);\n  for (; e.length < 2; )\n    e = \"0\" + e;\n  return \"0x\" + e;\n}\na(Hu, \"hexlifyByte\");\nfunction Xc(r, e, t) {\n  let n = 0;\n  for (let s = 0; s < t; s++)\n    n = n * 256 + r[e + s];\n  return n;\n}\na(Xc, \"unarrayifyInteger\");\nfunction $c(r, e, t, n) {\n  let s = [];\n  for (; t < e + 1 + n; ) {\n    let i = e0(r, t);\n    s.push(i.result), t += i.consumed, b(t <= e + 1 + n, \"child data too short\", \"BUFFER_OVERRUN\", {\n      buffer: r,\n      length: n,\n      offset: e\n    });\n  }\n  return { consumed: 1 + n, result: s };\n}\na($c, \"_decodeChildren\");\nfunction e0(r, e) {\n  b(r.length !== 0, \"data too short\", \"BUFFER_OVERRUN\", {\n    buffer: r,\n    length: 0,\n    offset: 1\n  });\n  let t = /* @__PURE__ */ a((n) => {\n    b(n <= r.length, \"data short segment too short\", \"BUFFER_OVERRUN\", {\n      buffer: r,\n      length: r.length,\n      offset: n\n    });\n  }, \"checkOffset\");\n  if (r[e] >= 248) {\n    let n = r[e] - 247;\n    t(e + 1 + n);\n    let s = Xc(r, e + 1, n);\n    return t(e + 1 + n + s), $c(r, e, e + 1 + n, n + s);\n  } else if (r[e] >= 192) {\n    let n = r[e] - 192;\n    return t(e + 1 + n), $c(r, e, e + 1, n);\n  } else if (r[e] >= 184) {\n    let n = r[e] - 183;\n    t(e + 1 + n);\n    let s = Xc(r, e + 1, n);\n    t(e + 1 + n + s);\n    let i = w(r.slice(e + 1 + n, e + 1 + n + s));\n    return { consumed: 1 + n + s, result: i };\n  } else if (r[e] >= 128) {\n    let n = r[e] - 128;\n    t(e + 1 + n);\n    let s = w(r.slice(e + 1, e + 1 + n));\n    return { consumed: 1 + n, result: s };\n  }\n  return { consumed: 1, result: Hu(r[e]) };\n}\na(e0, \"_decode\");\nfunction Jt(r) {\n  let e = E(r, \"data\"), t = e0(e, 0);\n  return h(t.consumed === e.length, \"unexpected junk after rlp payload\", \"data\", r), t.result;\n}\na(Jt, \"decodeRlp\");\n\n// node_modules/ethers/lib.esm/utils/rlp-encode.js\nfunction t0(r) {\n  let e = [];\n  for (; r; )\n    e.unshift(r & 255), r >>= 8;\n  return e;\n}\na(t0, \"arrayifyInteger\");\nfunction n0(r) {\n  if (Array.isArray(r)) {\n    let n = [];\n    if (r.forEach(function(i) {\n      n = n.concat(n0(i));\n    }), n.length <= 55)\n      return n.unshift(192 + n.length), n;\n    let s = t0(n.length);\n    return s.unshift(247 + s.length), s.concat(n);\n  }\n  let e = Array.prototype.slice.call(E(r, \"object\"));\n  if (e.length === 1 && e[0] <= 127)\n    return e;\n  if (e.length <= 55)\n    return e.unshift(128 + e.length), e;\n  let t = t0(e.length);\n  return t.unshift(183 + t.length), t.concat(e);\n}\na(n0, \"_encode\");\nvar r0 = \"0123456789abcdef\";\nfunction _e(r) {\n  let e = \"0x\";\n  for (let t of n0(r))\n    e += r0[t >> 4], e += r0[t & 15];\n  return e;\n}\na(_e, \"encodeRlp\");\n\n// node_modules/ethers/lib.esm/utils/units.js\nvar s0 = [\n  \"wei\",\n  \"kwei\",\n  \"mwei\",\n  \"gwei\",\n  \"szabo\",\n  \"finney\",\n  \"ether\"\n];\nfunction wi(r, e) {\n  let t = 18;\n  if (typeof e == \"string\") {\n    let n = s0.indexOf(e);\n    h(n >= 0, \"invalid unit\", \"unit\", e), t = 3 * n;\n  } else e != null && (t = S(e, \"unit\"));\n  return pr.fromValue(r, t, { decimals: t, width: 512 }).toString();\n}\na(wi, \"formatUnits\");\nfunction Ai(r, e) {\n  h(typeof r == \"string\", \"value must be a string\", \"value\", r);\n  let t = 18;\n  if (typeof e == \"string\") {\n    let n = s0.indexOf(e);\n    h(n >= 0, \"invalid unit\", \"unit\", e), t = 3 * n;\n  } else e != null && (t = S(e, \"unit\"));\n  return pr.fromString(r, { decimals: t, width: 512 }).value;\n}\na(Ai, \"parseUnits\");\nfunction Qo(r) {\n  return wi(r, 18);\n}\na(Qo, \"formatEther\");\nfunction Jo(r) {\n  return Ai(r, 18);\n}\na(Jo, \"parseEther\");\n\n// node_modules/ethers/lib.esm/utils/uuid.js\nfunction vs(r) {\n  let e = E(r, \"randomBytes\");\n  e[6] = e[6] & 15 | 64, e[8] = e[8] & 63 | 128;\n  let t = w(e);\n  return [\n    t.substring(2, 10),\n    t.substring(10, 14),\n    t.substring(14, 18),\n    t.substring(18, 22),\n    t.substring(22, 34)\n  ].join(\"-\");\n}\na(vs, \"uuidV4\");\n\n// node_modules/ethers/lib.esm/abi/coders/abstract-coder.js\nvar Te = 32, Wo = new Uint8Array(Te), _u = [\"then\"], Ei = {}, a0 = /* @__PURE__ */ new WeakMap();\nfunction Wr(r) {\n  return a0.get(r);\n}\na(Wr, \"getNames\");\nfunction i0(r, e) {\n  a0.set(r, e);\n}\na(i0, \"setNames\");\nfunction Ts(r, e) {\n  let t = new Error(`deferred error during ABI decoding triggered accessing ${r}`);\n  throw t.error = e, t;\n}\na(Ts, \"throwError\");\nfunction jo(r, e, t) {\n  return r.indexOf(null) >= 0 ? e.map((n, s) => n instanceof mt ? jo(Wr(n), n, t) : n) : r.reduce((n, s, i) => {\n    let o = e.getValue(s);\n    return s in n || (t && o instanceof mt && (o = jo(Wr(o), o, t)), n[s] = o), n;\n  }, {});\n}\na(jo, \"toObject\");\nvar mt = class r extends Array {\n  static {\n    a(this, \"Result\");\n  }\n  // No longer used; but cannot be removed as it will remove the\n  // #private field from the .d.ts which may break backwards\n  // compatibility\n  #e;\n  /**\n   *  @private\n   */\n  constructor(...e) {\n    let t = e[0], n = e[1], s = (e[2] || []).slice(), i = !0;\n    t !== Ei && (n = e, s = [], i = !1), super(n.length), n.forEach((f, l) => {\n      this[l] = f;\n    });\n    let o = s.reduce((f, l) => (typeof l == \"string\" && f.set(l, (f.get(l) || 0) + 1), f), /* @__PURE__ */ new Map());\n    if (i0(this, Object.freeze(n.map((f, l) => {\n      let u = s[l];\n      return u != null && o.get(u) === 1 ? u : null;\n    }))), this.#e = [], this.#e == null && this.#e, !i)\n      return;\n    Object.freeze(this);\n    let c = new Proxy(this, {\n      get: /* @__PURE__ */ a((f, l, u) => {\n        if (typeof l == \"string\") {\n          if (l.match(/^[0-9]+$/)) {\n            let x = S(l, \"%index\");\n            if (x < 0 || x >= this.length)\n              throw new RangeError(\"out of result range\");\n            let p = f[x];\n            return p instanceof Error && Ts(`index ${x}`, p), p;\n          }\n          if (_u.indexOf(l) >= 0)\n            return Reflect.get(f, l, u);\n          let d = f[l];\n          if (d instanceof Function)\n            return function(...x) {\n              return d.apply(this === u ? f : this, x);\n            };\n          if (!(l in f))\n            return f.getValue.apply(this === u ? f : this, [l]);\n        }\n        return Reflect.get(f, l, u);\n      }, \"get\")\n    });\n    return i0(c, Wr(this)), c;\n  }\n  /**\n   *  Returns the Result as a normal Array. If %%deep%%, any children\n   *  which are Result objects are also converted to a normal Array.\n   *\n   *  This will throw if there are any outstanding deferred\n   *  errors.\n   */\n  toArray(e) {\n    let t = [];\n    return this.forEach((n, s) => {\n      n instanceof Error && Ts(`index ${s}`, n), e && n instanceof r && (n = n.toArray(e)), t.push(n);\n    }), t;\n  }\n  /**\n   *  Returns the Result as an Object with each name-value pair. If\n   *  %%deep%%, any children which are Result objects are also\n   *  converted to an Object.\n   *\n   *  This will throw if any value is unnamed, or if there are\n   *  any outstanding deferred errors.\n   */\n  toObject(e) {\n    let t = Wr(this);\n    return t.reduce((n, s, i) => (b(s != null, `value at index ${i} unnamed`, \"UNSUPPORTED_OPERATION\", {\n      operation: \"toObject()\"\n    }), jo(t, this, e)), {});\n  }\n  /**\n   *  @_ignore\n   */\n  slice(e, t) {\n    e == null && (e = 0), e < 0 && (e += this.length, e < 0 && (e = 0)), t == null && (t = this.length), t < 0 && (t += this.length, t < 0 && (t = 0)), t > this.length && (t = this.length);\n    let n = Wr(this), s = [], i = [];\n    for (let o = e; o < t; o++)\n      s.push(this[o]), i.push(n[o]);\n    return new r(Ei, s, i);\n  }\n  /**\n   *  @_ignore\n   */\n  filter(e, t) {\n    let n = Wr(this), s = [], i = [];\n    for (let o = 0; o < this.length; o++) {\n      let c = this[o];\n      c instanceof Error && Ts(`index ${o}`, c), e.call(t, c, o, this) && (s.push(c), i.push(n[o]));\n    }\n    return new r(Ei, s, i);\n  }\n  /**\n   *  @_ignore\n   */\n  map(e, t) {\n    let n = [];\n    for (let s = 0; s < this.length; s++) {\n      let i = this[s];\n      i instanceof Error && Ts(`index ${s}`, i), n.push(e.call(t, i, s, this));\n    }\n    return n;\n  }\n  /**\n   *  Returns the value for %%name%%.\n   *\n   *  Since it is possible to have a key whose name conflicts with\n   *  a method on a [[Result]] or its superclass Array, or any\n   *  JavaScript keyword, this ensures all named values are still\n   *  accessible by name.\n   */\n  getValue(e) {\n    let t = Wr(this).indexOf(e);\n    if (t === -1)\n      return;\n    let n = this[t];\n    return n instanceof Error && Ts(`property ${JSON.stringify(e)}`, n.error), n;\n  }\n  /**\n   *  Creates a new [[Result]] for %%items%% with each entry\n   *  also accessible by its corresponding name in %%keys%%.\n   */\n  static fromItems(e, t) {\n    return new r(Ei, e, t);\n  }\n};\nfunction ki(r) {\n  let e = [], t = /* @__PURE__ */ a(function(n, s) {\n    if (Array.isArray(s))\n      for (let i in s) {\n        let o = n.slice();\n        o.push(i);\n        try {\n          t(o, s[i]);\n        } catch (c) {\n          e.push({ path: o, error: c });\n        }\n      }\n  }, \"checkErrors\");\n  return t([], r), e;\n}\na(ki, \"checkResultErrors\");\nfunction o0(r) {\n  let e = X(r);\n  return b(e.length <= Te, \"value out-of-bounds\", \"BUFFER_OVERRUN\", { buffer: e, length: Te, offset: e.length }), e.length !== Te && (e = fe(F([Wo.slice(e.length % Te), e]))), e;\n}\na(o0, \"getValue\");\nvar Ee = class {\n  static {\n    a(this, \"Coder\");\n  }\n  // The coder name:\n  //   - address, uint256, tuple, array, etc.\n  name;\n  // The fully expanded type, including composite types:\n  //   - address, uint256, tuple(address,bytes), uint256[3][4][],  etc.\n  type;\n  // The localName bound in the signature, in this example it is \"baz\":\n  //   - tuple(address foo, uint bar) baz\n  localName;\n  // Whether this type is dynamic:\n  //  - Dynamic: bytes, string, address[], tuple(boolean[]), etc.\n  //  - Not Dynamic: address, uint256, boolean[3], tuple(address, uint8)\n  dynamic;\n  constructor(e, t, n, s) {\n    P(this, { name: e, type: t, localName: n, dynamic: s }, {\n      name: \"string\",\n      type: \"string\",\n      localName: \"string\",\n      dynamic: \"boolean\"\n    });\n  }\n  _throwError(e, t) {\n    h(!1, e, this.localName, t);\n  }\n}, jr = class {\n  static {\n    a(this, \"Writer\");\n  }\n  // An array of WordSize lengthed objects to concatenation\n  #e;\n  #t;\n  constructor() {\n    this.#e = [], this.#t = 0;\n  }\n  get data() {\n    return F(this.#e);\n  }\n  get length() {\n    return this.#t;\n  }\n  #r(e) {\n    return this.#e.push(e), this.#t += e.length, e.length;\n  }\n  appendWriter(e) {\n    return this.#r(fe(e.data));\n  }\n  // Arrayish item; pad on the right to *nearest* WordSize\n  writeBytes(e) {\n    let t = fe(e), n = t.length % Te;\n    return n && (t = fe(F([t, Wo.slice(n)]))), this.#r(t);\n  }\n  // Numeric item; pad on the left *to* WordSize\n  writeValue(e) {\n    return this.#r(o0(e));\n  }\n  // Inserts a numeric place-holder, returning a callback that can\n  // be used to asjust the value later\n  writeUpdatableValue() {\n    let e = this.#e.length;\n    return this.#e.push(Wo), this.#t += Te, (t) => {\n      this.#e[e] = o0(t);\n    };\n  }\n}, Pi = class r {\n  static {\n    a(this, \"Reader\");\n  }\n  // Allows incomplete unpadded data to be read; otherwise an error\n  // is raised if attempting to overrun the buffer. This is required\n  // to deal with an old Solidity bug, in which event data for\n  // external (not public thoguh) was tightly packed.\n  allowLoose;\n  #e;\n  #t;\n  #r;\n  #n;\n  #s;\n  constructor(e, t, n) {\n    P(this, { allowLoose: !!t }), this.#e = fe(e), this.#r = 0, this.#n = null, this.#s = n ?? 1024, this.#t = 0;\n  }\n  get data() {\n    return w(this.#e);\n  }\n  get dataLength() {\n    return this.#e.length;\n  }\n  get consumed() {\n    return this.#t;\n  }\n  get bytes() {\n    return new Uint8Array(this.#e);\n  }\n  #o(e) {\n    if (this.#n)\n      return this.#n.#o(e);\n    this.#r += e, b(this.#s < 1 || this.#r <= this.#s * this.dataLength, `compressed ABI data exceeds inflation ratio of ${this.#s} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`, \"BUFFER_OVERRUN\", {\n      buffer: fe(this.#e),\n      offset: this.#t,\n      length: e,\n      info: {\n        bytesRead: this.#r,\n        dataLength: this.dataLength\n      }\n    });\n  }\n  #i(e, t, n) {\n    let s = Math.ceil(t / Te) * Te;\n    return this.#t + s > this.#e.length && (this.allowLoose && n && this.#t + t <= this.#e.length ? s = t : b(!1, \"data out-of-bounds\", \"BUFFER_OVERRUN\", {\n      buffer: fe(this.#e),\n      length: this.#e.length,\n      offset: this.#t + s\n    })), this.#e.slice(this.#t, this.#t + s);\n  }\n  // Create a sub-reader with the same underlying data, but offset\n  subReader(e) {\n    let t = new r(this.#e.slice(this.#t + e), this.allowLoose, this.#s);\n    return t.#n = this, t;\n  }\n  // Read bytes\n  readBytes(e, t) {\n    let n = this.#i(0, e, !!t);\n    return this.#o(e), this.#t += n.length, n.slice(0, e);\n  }\n  // Read a numeric values\n  readValue() {\n    return tt(this.readBytes(Te));\n  }\n  readIndex() {\n    return Ps(this.readBytes(Te));\n  }\n};\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/_assert.js\nfunction Fe(r) {\n  if (!Number.isSafeInteger(r) || r < 0)\n    throw new Error(`Wrong positive integer: ${r}`);\n}\na(Fe, \"number\");\nfunction Is(r, ...e) {\n  if (!(r instanceof Uint8Array))\n    throw new Error(\"Expected Uint8Array\");\n  if (e.length > 0 && !e.includes(r.length))\n    throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`);\n}\na(Is, \"bytes\");\nfunction Ni(r) {\n  if (typeof r != \"function\" || typeof r.create != \"function\")\n    throw new Error(\"Hash should be wrapped by utils.wrapConstructor\");\n  Fe(r.outputLen), Fe(r.blockLen);\n}\na(Ni, \"hash\");\nfunction Wt(r, e = !0) {\n  if (r.destroyed)\n    throw new Error(\"Hash instance has been destroyed\");\n  if (e && r.finished)\n    throw new Error(\"Hash#digest() has already been called\");\n}\na(Wt, \"exists\");\nfunction Bi(r, e) {\n  Is(r);\n  let t = e.outputLen;\n  if (r.length < t)\n    throw new Error(`digestInto() expects output buffer of length at least ${t}`);\n}\na(Bi, \"output\");\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/crypto.js\nvar Ri = typeof globalThis == \"object\" && \"crypto\" in globalThis ? globalThis.crypto : void 0;\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/utils.js\nvar c0 = /* @__PURE__ */ a((r) => r instanceof Uint8Array, \"u8a\");\nvar zn = /* @__PURE__ */ a((r) => new Uint32Array(r.buffer, r.byteOffset, Math.floor(r.byteLength / 4)), \"u32\"), Vn = /* @__PURE__ */ a((r) => new DataView(r.buffer, r.byteOffset, r.byteLength), \"createView\"), bt = /* @__PURE__ */ a((r, e) => r << 32 - e | r >>> e, \"rotr\"), zu = new Uint8Array(new Uint32Array([287454020]).buffer)[0] === 68;\nif (!zu)\n  throw new Error(\"Non little-endian hardware is not supported\");\nvar Vu = /* @__PURE__ */ a(async () => {\n}, \"nextTick\");\nasync function vi(r, e, t) {\n  let n = Date.now();\n  for (let s = 0; s < r; s++) {\n    t(s);\n    let i = Date.now() - n;\n    i >= 0 && i < e || (await Vu(), n += i);\n  }\n}\na(vi, \"asyncLoop\");\nfunction Ku(r) {\n  if (typeof r != \"string\")\n    throw new Error(`utf8ToBytes expected string, got ${typeof r}`);\n  return new Uint8Array(new TextEncoder().encode(r));\n}\na(Ku, \"utf8ToBytes\");\nfunction gt(r) {\n  if (typeof r == \"string\" && (r = Ku(r)), !c0(r))\n    throw new Error(`expected Uint8Array, got ${typeof r}`);\n  return r;\n}\na(gt, \"toBytes\");\nfunction f0(...r) {\n  let e = new Uint8Array(r.reduce((n, s) => n + s.length, 0)), t = 0;\n  return r.forEach((n) => {\n    if (!c0(n))\n      throw new Error(\"Uint8Array expected\");\n    e.set(n, t), t += n.length;\n  }), e;\n}\na(f0, \"concatBytes\");\nvar mr = class {\n  static {\n    a(this, \"Hash\");\n  }\n  // Safe version that clones internal state\n  clone() {\n    return this._cloneInto();\n  }\n}, Qu = {}.toString;\nfunction Ti(r, e) {\n  if (e !== void 0 && Qu.call(e) !== \"[object Object]\")\n    throw new Error(\"Options should be object or undefined\");\n  return Object.assign(r, e);\n}\na(Ti, \"checkOpts\");\nfunction br(r) {\n  let e = /* @__PURE__ */ a((n) => r().update(gt(n)).digest(), \"hashC\"), t = r();\n  return e.outputLen = t.outputLen, e.blockLen = t.blockLen, e.create = () => r(), e;\n}\na(br, \"wrapConstructor\");\nfunction l0(r) {\n  let e = /* @__PURE__ */ a((n, s) => r(s).update(gt(n)).digest(), \"hashC\"), t = r({});\n  return e.outputLen = t.outputLen, e.blockLen = t.blockLen, e.create = (n) => r(n), e;\n}\na(l0, \"wrapXOFConstructorWithOpts\");\nfunction u0(r = 32) {\n  if (Ri && typeof Ri.getRandomValues == \"function\")\n    return Ri.getRandomValues(new Uint8Array(r));\n  throw new Error(\"crypto.getRandomValues must be defined\");\n}\na(u0, \"randomBytes\");\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/hmac.js\nvar Ii = class extends mr {\n  static {\n    a(this, \"HMAC\");\n  }\n  constructor(e, t) {\n    super(), this.finished = !1, this.destroyed = !1, Ni(e);\n    let n = gt(t);\n    if (this.iHash = e.create(), typeof this.iHash.update != \"function\")\n      throw new Error(\"Expected instance of class which extends utils.Hash\");\n    this.blockLen = this.iHash.blockLen, this.outputLen = this.iHash.outputLen;\n    let s = this.blockLen, i = new Uint8Array(s);\n    i.set(n.length > s ? e.create().update(n).digest() : n);\n    for (let o = 0; o < i.length; o++)\n      i[o] ^= 54;\n    this.iHash.update(i), this.oHash = e.create();\n    for (let o = 0; o < i.length; o++)\n      i[o] ^= 106;\n    this.oHash.update(i), i.fill(0);\n  }\n  update(e) {\n    return Wt(this), this.iHash.update(e), this;\n  }\n  digestInto(e) {\n    Wt(this), Is(e, this.outputLen), this.finished = !0, this.iHash.digestInto(e), this.oHash.update(e), this.oHash.digestInto(e), this.destroy();\n  }\n  digest() {\n    let e = new Uint8Array(this.oHash.outputLen);\n    return this.digestInto(e), e;\n  }\n  _cloneInto(e) {\n    e || (e = Object.create(Object.getPrototypeOf(this), {}));\n    let { oHash: t, iHash: n, finished: s, destroyed: i, blockLen: o, outputLen: c } = this;\n    return e = e, e.finished = s, e.destroyed = i, e.blockLen = o, e.outputLen = c, e.oHash = t._cloneInto(e.oHash), e.iHash = n._cloneInto(e.iHash), e;\n  }\n  destroy() {\n    this.destroyed = !0, this.oHash.destroy(), this.iHash.destroy();\n  }\n}, Zr = /* @__PURE__ */ a((r, e, t) => new Ii(r, e).update(t).digest(), \"hmac\");\nZr.create = (r, e) => new Ii(r, e);\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/pbkdf2.js\nfunction Ju(r, e, t, n) {\n  Ni(r);\n  let s = Ti({ dkLen: 32, asyncTick: 10 }, n), { c: i, dkLen: o, asyncTick: c } = s;\n  if (Fe(i), Fe(o), Fe(c), i < 1)\n    throw new Error(\"PBKDF2: iterations (c) should be >= 1\");\n  let f = gt(e), l = gt(t), u = new Uint8Array(o), d = Zr.create(r, f), x = d._cloneInto().update(l);\n  return { c: i, dkLen: o, asyncTick: c, DK: u, PRF: d, PRFSalt: x };\n}\na(Ju, \"pbkdf2Init\");\nfunction Wu(r, e, t, n, s) {\n  return r.destroy(), e.destroy(), n && n.destroy(), s.fill(0), t;\n}\na(Wu, \"pbkdf2Output\");\nfunction Cs(r, e, t, n) {\n  let { c: s, dkLen: i, DK: o, PRF: c, PRFSalt: f } = Ju(r, e, t, n), l, u = new Uint8Array(4), d = Vn(u), x = new Uint8Array(c.outputLen);\n  for (let p = 1, g = 0; g < i; p++, g += c.outputLen) {\n    let m = o.subarray(g, g + c.outputLen);\n    d.setInt32(0, p, !1), (l = f._cloneInto(l)).update(u).digestInto(x), m.set(x.subarray(0, m.length));\n    for (let y = 1; y < s; y++) {\n      c._cloneInto(l).update(x).digestInto(x);\n      for (let A = 0; A < m.length; A++)\n        m[A] ^= x[A];\n    }\n  }\n  return Wu(c, f, o, l, x);\n}\na(Cs, \"pbkdf2\");\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/_sha2.js\nfunction ju(r, e, t, n) {\n  if (typeof r.setBigUint64 == \"function\")\n    return r.setBigUint64(e, t, n);\n  let s = BigInt(32), i = BigInt(4294967295), o = Number(t >> s & i), c = Number(t & i), f = n ? 4 : 0, l = n ? 0 : 4;\n  r.setUint32(e + f, o, n), r.setUint32(e + l, c, n);\n}\na(ju, \"setBigUint64\");\nvar gr = class extends mr {\n  static {\n    a(this, \"SHA2\");\n  }\n  constructor(e, t, n, s) {\n    super(), this.blockLen = e, this.outputLen = t, this.padOffset = n, this.isLE = s, this.finished = !1, this.length = 0, this.pos = 0, this.destroyed = !1, this.buffer = new Uint8Array(e), this.view = Vn(this.buffer);\n  }\n  update(e) {\n    Wt(this);\n    let { view: t, buffer: n, blockLen: s } = this;\n    e = gt(e);\n    let i = e.length;\n    for (let o = 0; o < i; ) {\n      let c = Math.min(s - this.pos, i - o);\n      if (c === s) {\n        let f = Vn(e);\n        for (; s <= i - o; o += s)\n          this.process(f, o);\n        continue;\n      }\n      n.set(e.subarray(o, o + c), this.pos), this.pos += c, o += c, this.pos === s && (this.process(t, 0), this.pos = 0);\n    }\n    return this.length += e.length, this.roundClean(), this;\n  }\n  digestInto(e) {\n    Wt(this), Bi(e, this), this.finished = !0;\n    let { buffer: t, view: n, blockLen: s, isLE: i } = this, { pos: o } = this;\n    t[o++] = 128, this.buffer.subarray(o).fill(0), this.padOffset > s - o && (this.process(n, 0), o = 0);\n    for (let d = o; d < s; d++)\n      t[d] = 0;\n    ju(n, s - 8, BigInt(this.length * 8), i), this.process(n, 0);\n    let c = Vn(e), f = this.outputLen;\n    if (f % 4)\n      throw new Error(\"_sha2: outputLen should be aligned to 32bit\");\n    let l = f / 4, u = this.get();\n    if (l > u.length)\n      throw new Error(\"_sha2: outputLen bigger than state\");\n    for (let d = 0; d < l; d++)\n      c.setUint32(4 * d, u[d], i);\n  }\n  digest() {\n    let { buffer: e, outputLen: t } = this;\n    this.digestInto(e);\n    let n = e.slice(0, t);\n    return this.destroy(), n;\n  }\n  _cloneInto(e) {\n    e || (e = new this.constructor()), e.set(...this.get());\n    let { blockLen: t, buffer: n, length: s, finished: i, destroyed: o, pos: c } = this;\n    return e.length = s, e.pos = c, e.finished = i, e.destroyed = o, s % t && e.buffer.set(n), e;\n  }\n};\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/sha256.js\nvar Zu = /* @__PURE__ */ a((r, e, t) => r & e ^ ~r & t, \"Chi\"), qu = /* @__PURE__ */ a((r, e, t) => r & e ^ r & t ^ e & t, \"Maj\"), Yu = /* @__PURE__ */ new Uint32Array([\n  1116352408,\n  1899447441,\n  3049323471,\n  3921009573,\n  961987163,\n  1508970993,\n  2453635748,\n  2870763221,\n  3624381080,\n  310598401,\n  607225278,\n  1426881987,\n  1925078388,\n  2162078206,\n  2614888103,\n  3248222580,\n  3835390401,\n  4022224774,\n  264347078,\n  604807628,\n  770255983,\n  1249150122,\n  1555081692,\n  1996064986,\n  2554220882,\n  2821834349,\n  2952996808,\n  3210313671,\n  3336571891,\n  3584528711,\n  113926993,\n  338241895,\n  666307205,\n  773529912,\n  1294757372,\n  1396182291,\n  1695183700,\n  1986661051,\n  2177026350,\n  2456956037,\n  2730485921,\n  2820302411,\n  3259730800,\n  3345764771,\n  3516065817,\n  3600352804,\n  4094571909,\n  275423344,\n  430227734,\n  506948616,\n  659060556,\n  883997877,\n  958139571,\n  1322822218,\n  1537002063,\n  1747873779,\n  1955562222,\n  2024104815,\n  2227730452,\n  2361852424,\n  2428436474,\n  2756734187,\n  3204031479,\n  3329325298\n]), yr = /* @__PURE__ */ new Uint32Array([\n  1779033703,\n  3144134277,\n  1013904242,\n  2773480762,\n  1359893119,\n  2600822924,\n  528734635,\n  1541459225\n]), wr = /* @__PURE__ */ new Uint32Array(64), Zo = class extends gr {\n  static {\n    a(this, \"SHA256\");\n  }\n  constructor() {\n    super(64, 32, 8, !1), this.A = yr[0] | 0, this.B = yr[1] | 0, this.C = yr[2] | 0, this.D = yr[3] | 0, this.E = yr[4] | 0, this.F = yr[5] | 0, this.G = yr[6] | 0, this.H = yr[7] | 0;\n  }\n  get() {\n    let { A: e, B: t, C: n, D: s, E: i, F: o, G: c, H: f } = this;\n    return [e, t, n, s, i, o, c, f];\n  }\n  // prettier-ignore\n  set(e, t, n, s, i, o, c, f) {\n    this.A = e | 0, this.B = t | 0, this.C = n | 0, this.D = s | 0, this.E = i | 0, this.F = o | 0, this.G = c | 0, this.H = f | 0;\n  }\n  process(e, t) {\n    for (let d = 0; d < 16; d++, t += 4)\n      wr[d] = e.getUint32(t, !1);\n    for (let d = 16; d < 64; d++) {\n      let x = wr[d - 15], p = wr[d - 2], g = bt(x, 7) ^ bt(x, 18) ^ x >>> 3, m = bt(p, 17) ^ bt(p, 19) ^ p >>> 10;\n      wr[d] = m + wr[d - 7] + g + wr[d - 16] | 0;\n    }\n    let { A: n, B: s, C: i, D: o, E: c, F: f, G: l, H: u } = this;\n    for (let d = 0; d < 64; d++) {\n      let x = bt(c, 6) ^ bt(c, 11) ^ bt(c, 25), p = u + x + Zu(c, f, l) + Yu[d] + wr[d] | 0, m = (bt(n, 2) ^ bt(n, 13) ^ bt(n, 22)) + qu(n, s, i) | 0;\n      u = l, l = f, f = c, c = o + p | 0, o = i, i = s, s = n, n = p + m | 0;\n    }\n    n = n + this.A | 0, s = s + this.B | 0, i = i + this.C | 0, o = o + this.D | 0, c = c + this.E | 0, f = f + this.F | 0, l = l + this.G | 0, u = u + this.H | 0, this.set(n, s, i, o, c, f, l, u);\n  }\n  roundClean() {\n    wr.fill(0);\n  }\n  destroy() {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0), this.buffer.fill(0);\n  }\n};\nvar jt = /* @__PURE__ */ br(() => new Zo());\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/_u64.js\nvar Ci = /* @__PURE__ */ BigInt(4294967295), qo = /* @__PURE__ */ BigInt(32);\nfunction d0(r, e = !1) {\n  return e ? { h: Number(r & Ci), l: Number(r >> qo & Ci) } : { h: Number(r >> qo & Ci) | 0, l: Number(r & Ci) | 0 };\n}\na(d0, \"fromBig\");\nfunction Yo(r, e = !1) {\n  let t = new Uint32Array(r.length), n = new Uint32Array(r.length);\n  for (let s = 0; s < r.length; s++) {\n    let { h: i, l: o } = d0(r[s], e);\n    [t[s], n[s]] = [i, o];\n  }\n  return [t, n];\n}\na(Yo, \"split\");\nvar Xu = /* @__PURE__ */ a((r, e) => BigInt(r >>> 0) << qo | BigInt(e >>> 0), \"toBig\"), $u = /* @__PURE__ */ a((r, e, t) => r >>> t, \"shrSH\"), ed = /* @__PURE__ */ a((r, e, t) => r << 32 - t | e >>> t, \"shrSL\"), td = /* @__PURE__ */ a((r, e, t) => r >>> t | e << 32 - t, \"rotrSH\"), rd = /* @__PURE__ */ a((r, e, t) => r << 32 - t | e >>> t, \"rotrSL\"), nd = /* @__PURE__ */ a((r, e, t) => r << 64 - t | e >>> t - 32, \"rotrBH\"), sd = /* @__PURE__ */ a((r, e, t) => r >>> t - 32 | e << 64 - t, \"rotrBL\"), id = /* @__PURE__ */ a((r, e) => e, \"rotr32H\"), od = /* @__PURE__ */ a((r, e) => r, \"rotr32L\"), Xo = /* @__PURE__ */ a((r, e, t) => r << t | e >>> 32 - t, \"rotlSH\"), $o = /* @__PURE__ */ a((r, e, t) => e << t | r >>> 32 - t, \"rotlSL\"), ea = /* @__PURE__ */ a((r, e, t) => e << t - 32 | r >>> 64 - t, \"rotlBH\"), ta = /* @__PURE__ */ a((r, e, t) => r << t - 32 | e >>> 64 - t, \"rotlBL\");\nfunction ad(r, e, t, n) {\n  let s = (e >>> 0) + (n >>> 0);\n  return { h: r + t + (s / 2 ** 32 | 0) | 0, l: s | 0 };\n}\na(ad, \"add\");\nvar cd = /* @__PURE__ */ a((r, e, t) => (r >>> 0) + (e >>> 0) + (t >>> 0), \"add3L\"), fd = /* @__PURE__ */ a((r, e, t, n) => e + t + n + (r / 2 ** 32 | 0) | 0, \"add3H\"), ld = /* @__PURE__ */ a((r, e, t, n) => (r >>> 0) + (e >>> 0) + (t >>> 0) + (n >>> 0), \"add4L\"), ud = /* @__PURE__ */ a((r, e, t, n, s) => e + t + n + s + (r / 2 ** 32 | 0) | 0, \"add4H\"), dd = /* @__PURE__ */ a((r, e, t, n, s) => (r >>> 0) + (e >>> 0) + (t >>> 0) + (n >>> 0) + (s >>> 0), \"add5L\"), hd = /* @__PURE__ */ a((r, e, t, n, s, i) => e + t + n + s + i + (r / 2 ** 32 | 0) | 0, \"add5H\");\nvar xd = {\n  fromBig: d0,\n  split: Yo,\n  toBig: Xu,\n  shrSH: $u,\n  shrSL: ed,\n  rotrSH: td,\n  rotrSL: rd,\n  rotrBH: nd,\n  rotrBL: sd,\n  rotr32H: id,\n  rotr32L: od,\n  rotlSH: Xo,\n  rotlSL: $o,\n  rotlBH: ea,\n  rotlBL: ta,\n  add: ad,\n  add3L: cd,\n  add3H: fd,\n  add4L: ld,\n  add4H: ud,\n  add5H: hd,\n  add5L: dd\n}, V = xd;\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/sha512.js\nvar [pd, md] = V.split([\n  \"0x428a2f98d728ae22\",\n  \"0x7137449123ef65cd\",\n  \"0xb5c0fbcfec4d3b2f\",\n  \"0xe9b5dba58189dbbc\",\n  \"0x3956c25bf348b538\",\n  \"0x59f111f1b605d019\",\n  \"0x923f82a4af194f9b\",\n  \"0xab1c5ed5da6d8118\",\n  \"0xd807aa98a3030242\",\n  \"0x12835b0145706fbe\",\n  \"0x243185be4ee4b28c\",\n  \"0x550c7dc3d5ffb4e2\",\n  \"0x72be5d74f27b896f\",\n  \"0x80deb1fe3b1696b1\",\n  \"0x9bdc06a725c71235\",\n  \"0xc19bf174cf692694\",\n  \"0xe49b69c19ef14ad2\",\n  \"0xefbe4786384f25e3\",\n  \"0x0fc19dc68b8cd5b5\",\n  \"0x240ca1cc77ac9c65\",\n  \"0x2de92c6f592b0275\",\n  \"0x4a7484aa6ea6e483\",\n  \"0x5cb0a9dcbd41fbd4\",\n  \"0x76f988da831153b5\",\n  \"0x983e5152ee66dfab\",\n  \"0xa831c66d2db43210\",\n  \"0xb00327c898fb213f\",\n  \"0xbf597fc7beef0ee4\",\n  \"0xc6e00bf33da88fc2\",\n  \"0xd5a79147930aa725\",\n  \"0x06ca6351e003826f\",\n  \"0x142929670a0e6e70\",\n  \"0x27b70a8546d22ffc\",\n  \"0x2e1b21385c26c926\",\n  \"0x4d2c6dfc5ac42aed\",\n  \"0x53380d139d95b3df\",\n  \"0x650a73548baf63de\",\n  \"0x766a0abb3c77b2a8\",\n  \"0x81c2c92e47edaee6\",\n  \"0x92722c851482353b\",\n  \"0xa2bfe8a14cf10364\",\n  \"0xa81a664bbc423001\",\n  \"0xc24b8b70d0f89791\",\n  \"0xc76c51a30654be30\",\n  \"0xd192e819d6ef5218\",\n  \"0xd69906245565a910\",\n  \"0xf40e35855771202a\",\n  \"0x106aa07032bbd1b8\",\n  \"0x19a4c116b8d2d0c8\",\n  \"0x1e376c085141ab53\",\n  \"0x2748774cdf8eeb99\",\n  \"0x34b0bcb5e19b48a8\",\n  \"0x391c0cb3c5c95a63\",\n  \"0x4ed8aa4ae3418acb\",\n  \"0x5b9cca4f7763e373\",\n  \"0x682e6ff3d6b2b8a3\",\n  \"0x748f82ee5defb2fc\",\n  \"0x78a5636f43172f60\",\n  \"0x84c87814a1f0ab72\",\n  \"0x8cc702081a6439ec\",\n  \"0x90befffa23631e28\",\n  \"0xa4506cebde82bde9\",\n  \"0xbef9a3f7b2c67915\",\n  \"0xc67178f2e372532b\",\n  \"0xca273eceea26619c\",\n  \"0xd186b8c721c0c207\",\n  \"0xeada7dd6cde0eb1e\",\n  \"0xf57d4f7fee6ed178\",\n  \"0x06f067aa72176fba\",\n  \"0x0a637dc5a2c898a6\",\n  \"0x113f9804bef90dae\",\n  \"0x1b710b35131c471b\",\n  \"0x28db77f523047d84\",\n  \"0x32caab7b40c72493\",\n  \"0x3c9ebe0a15c9bebc\",\n  \"0x431d67c49c100d4c\",\n  \"0x4cc5d4becb3e42b6\",\n  \"0x597f299cfc657e2a\",\n  \"0x5fcb6fab3ad6faec\",\n  \"0x6c44198c4a475817\"\n].map((r) => BigInt(r))), Ar = /* @__PURE__ */ new Uint32Array(80), Er = /* @__PURE__ */ new Uint32Array(80), ra = class extends gr {\n  static {\n    a(this, \"SHA512\");\n  }\n  constructor() {\n    super(128, 64, 16, !1), this.Ah = 1779033703, this.Al = -205731576, this.Bh = -1150833019, this.Bl = -2067093701, this.Ch = 1013904242, this.Cl = -23791573, this.Dh = -1521486534, this.Dl = 1595750129, this.Eh = 1359893119, this.El = -1377402159, this.Fh = -1694144372, this.Fl = 725511199, this.Gh = 528734635, this.Gl = -79577749, this.Hh = 1541459225, this.Hl = 327033209;\n  }\n  // prettier-ignore\n  get() {\n    let { Ah: e, Al: t, Bh: n, Bl: s, Ch: i, Cl: o, Dh: c, Dl: f, Eh: l, El: u, Fh: d, Fl: x, Gh: p, Gl: g, Hh: m, Hl: y } = this;\n    return [e, t, n, s, i, o, c, f, l, u, d, x, p, g, m, y];\n  }\n  // prettier-ignore\n  set(e, t, n, s, i, o, c, f, l, u, d, x, p, g, m, y) {\n    this.Ah = e | 0, this.Al = t | 0, this.Bh = n | 0, this.Bl = s | 0, this.Ch = i | 0, this.Cl = o | 0, this.Dh = c | 0, this.Dl = f | 0, this.Eh = l | 0, this.El = u | 0, this.Fh = d | 0, this.Fl = x | 0, this.Gh = p | 0, this.Gl = g | 0, this.Hh = m | 0, this.Hl = y | 0;\n  }\n  process(e, t) {\n    for (let N = 0; N < 16; N++, t += 4)\n      Ar[N] = e.getUint32(t), Er[N] = e.getUint32(t += 4);\n    for (let N = 16; N < 80; N++) {\n      let D = Ar[N - 15] | 0, v = Er[N - 15] | 0, T = V.rotrSH(D, v, 1) ^ V.rotrSH(D, v, 8) ^ V.shrSH(D, v, 7), L = V.rotrSL(D, v, 1) ^ V.rotrSL(D, v, 8) ^ V.shrSL(D, v, 7), O = Ar[N - 2] | 0, K = Er[N - 2] | 0, H = V.rotrSH(O, K, 19) ^ V.rotrBH(O, K, 61) ^ V.shrSH(O, K, 6), _ = V.rotrSL(O, K, 19) ^ V.rotrBL(O, K, 61) ^ V.shrSL(O, K, 6), ae = V.add4L(L, _, Er[N - 7], Er[N - 16]), ue = V.add4H(ae, T, H, Ar[N - 7], Ar[N - 16]);\n      Ar[N] = ue | 0, Er[N] = ae | 0;\n    }\n    let { Ah: n, Al: s, Bh: i, Bl: o, Ch: c, Cl: f, Dh: l, Dl: u, Eh: d, El: x, Fh: p, Fl: g, Gh: m, Gl: y, Hh: A, Hl: B } = this;\n    for (let N = 0; N < 80; N++) {\n      let D = V.rotrSH(d, x, 14) ^ V.rotrSH(d, x, 18) ^ V.rotrBH(d, x, 41), v = V.rotrSL(d, x, 14) ^ V.rotrSL(d, x, 18) ^ V.rotrBL(d, x, 41), T = d & p ^ ~d & m, L = x & g ^ ~x & y, O = V.add5L(B, v, L, md[N], Er[N]), K = V.add5H(O, A, D, T, pd[N], Ar[N]), H = O | 0, _ = V.rotrSH(n, s, 28) ^ V.rotrBH(n, s, 34) ^ V.rotrBH(n, s, 39), ae = V.rotrSL(n, s, 28) ^ V.rotrBL(n, s, 34) ^ V.rotrBL(n, s, 39), ue = n & i ^ n & c ^ i & c, Ne = s & o ^ s & f ^ o & f;\n      A = m | 0, B = y | 0, m = p | 0, y = g | 0, p = d | 0, g = x | 0, { h: d, l: x } = V.add(l | 0, u | 0, K | 0, H | 0), l = c | 0, u = f | 0, c = i | 0, f = o | 0, i = n | 0, o = s | 0;\n      let R = V.add3L(H, ae, Ne);\n      n = V.add3H(R, K, _, ue), s = R | 0;\n    }\n    ({ h: n, l: s } = V.add(this.Ah | 0, this.Al | 0, n | 0, s | 0)), { h: i, l: o } = V.add(this.Bh | 0, this.Bl | 0, i | 0, o | 0), { h: c, l: f } = V.add(this.Ch | 0, this.Cl | 0, c | 0, f | 0), { h: l, l: u } = V.add(this.Dh | 0, this.Dl | 0, l | 0, u | 0), { h: d, l: x } = V.add(this.Eh | 0, this.El | 0, d | 0, x | 0), { h: p, l: g } = V.add(this.Fh | 0, this.Fl | 0, p | 0, g | 0), { h: m, l: y } = V.add(this.Gh | 0, this.Gl | 0, m | 0, y | 0), { h: A, l: B } = V.add(this.Hh | 0, this.Hl | 0, A | 0, B | 0), this.set(n, s, i, o, c, f, l, u, d, x, p, g, m, y, A, B);\n  }\n  roundClean() {\n    Ar.fill(0), Er.fill(0);\n  }\n  destroy() {\n    this.buffer.fill(0), this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n};\nvar Oi = /* @__PURE__ */ br(() => new ra());\n\n// node_modules/ethers/lib.esm/crypto/crypto-browser.js\nfunction bd() {\n  if (typeof self < \"u\")\n    return self;\n  if (typeof window < \"u\")\n    return window;\n  if (typeof global < \"u\")\n    return global;\n  throw new Error(\"unable to locate global object\");\n}\na(bd, \"getGlobal\");\nvar h0 = bd(), x0 = h0.crypto || h0.msCrypto;\nfunction na(r) {\n  switch (r) {\n    case \"sha256\":\n      return jt.create();\n    case \"sha512\":\n      return Oi.create();\n  }\n  h(!1, \"invalid hashing algorithm name\", \"algorithm\", r);\n}\na(na, \"createHash\");\nfunction p0(r, e) {\n  let t = { sha256: jt, sha512: Oi }[r];\n  return h(t != null, \"invalid hmac algorithm\", \"algorithm\", r), Zr.create(t, e);\n}\na(p0, \"createHmac\");\nfunction m0(r, e, t, n, s) {\n  let i = { sha256: jt, sha512: Oi }[s];\n  return h(i != null, \"invalid pbkdf2 algorithm\", \"algorithm\", s), Cs(i, r, e, { c: t, dkLen: n });\n}\na(m0, \"pbkdf2Sync\");\nfunction b0(r) {\n  b(x0 != null, \"platform does not support secure random numbers\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"randomBytes\"\n  }), h(Number.isInteger(r) && r > 0 && r <= 1024, \"invalid length\", \"length\", r);\n  let e = new Uint8Array(r);\n  return x0.getRandomValues(e), e;\n}\na(b0, \"randomBytes\");\n\n// node_modules/ethers/lib.esm/crypto/hmac.js\nvar g0 = !1, y0 = /* @__PURE__ */ a(function(r, e, t) {\n  return p0(r, e).update(t).digest();\n}, \"_computeHmac\"), w0 = y0;\nfunction yt(r, e, t) {\n  let n = E(e, \"key\"), s = E(t, \"data\");\n  return w(w0(r, n, s));\n}\na(yt, \"computeHmac\");\nyt._ = y0;\nyt.lock = function() {\n  g0 = !0;\n};\nyt.register = function(r) {\n  if (g0)\n    throw new Error(\"computeHmac is locked\");\n  w0 = r;\n};\nObject.freeze(yt);\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/sha3.js\nvar [P0, k0, N0] = [[], [], []], gd = /* @__PURE__ */ BigInt(0), Os = /* @__PURE__ */ BigInt(1), yd = /* @__PURE__ */ BigInt(2), wd = /* @__PURE__ */ BigInt(7), Ad = /* @__PURE__ */ BigInt(256), Ed = /* @__PURE__ */ BigInt(113);\nfor (let r = 0, e = Os, t = 1, n = 0; r < 24; r++) {\n  [t, n] = [n, (2 * t + 3 * n) % 5], P0.push(2 * (5 * n + t)), k0.push((r + 1) * (r + 2) / 2 % 64);\n  let s = gd;\n  for (let i = 0; i < 7; i++)\n    e = (e << Os ^ (e >> wd) * Ed) % Ad, e & yd && (s ^= Os << (Os << /* @__PURE__ */ BigInt(i)) - Os);\n  N0.push(s);\n}\nvar [Pd, kd] = /* @__PURE__ */ Yo(N0, !0), A0 = /* @__PURE__ */ a((r, e, t) => t > 32 ? ea(r, e, t) : Xo(r, e, t), \"rotlH\"), E0 = /* @__PURE__ */ a((r, e, t) => t > 32 ? ta(r, e, t) : $o(r, e, t), \"rotlL\");\nfunction Nd(r, e = 24) {\n  let t = new Uint32Array(10);\n  for (let n = 24 - e; n < 24; n++) {\n    for (let o = 0; o < 10; o++)\n      t[o] = r[o] ^ r[o + 10] ^ r[o + 20] ^ r[o + 30] ^ r[o + 40];\n    for (let o = 0; o < 10; o += 2) {\n      let c = (o + 8) % 10, f = (o + 2) % 10, l = t[f], u = t[f + 1], d = A0(l, u, 1) ^ t[c], x = E0(l, u, 1) ^ t[c + 1];\n      for (let p = 0; p < 50; p += 10)\n        r[o + p] ^= d, r[o + p + 1] ^= x;\n    }\n    let s = r[2], i = r[3];\n    for (let o = 0; o < 24; o++) {\n      let c = k0[o], f = A0(s, i, c), l = E0(s, i, c), u = P0[o];\n      s = r[u], i = r[u + 1], r[u] = f, r[u + 1] = l;\n    }\n    for (let o = 0; o < 50; o += 10) {\n      for (let c = 0; c < 10; c++)\n        t[c] = r[o + c];\n      for (let c = 0; c < 10; c++)\n        r[o + c] ^= ~t[(c + 2) % 10] & t[(c + 4) % 10];\n    }\n    r[0] ^= Pd[n], r[1] ^= kd[n];\n  }\n  t.fill(0);\n}\na(Nd, \"keccakP\");\nvar Si = class r extends mr {\n  static {\n    a(this, \"Keccak\");\n  }\n  // NOTE: we accept arguments in bytes instead of bits here.\n  constructor(e, t, n, s = !1, i = 24) {\n    if (super(), this.blockLen = e, this.suffix = t, this.outputLen = n, this.enableXOF = s, this.rounds = i, this.pos = 0, this.posOut = 0, this.finished = !1, this.destroyed = !1, Fe(n), 0 >= this.blockLen || this.blockLen >= 200)\n      throw new Error(\"Sha3 supports only keccak-f1600 function\");\n    this.state = new Uint8Array(200), this.state32 = zn(this.state);\n  }\n  keccak() {\n    Nd(this.state32, this.rounds), this.posOut = 0, this.pos = 0;\n  }\n  update(e) {\n    Wt(this);\n    let { blockLen: t, state: n } = this;\n    e = gt(e);\n    let s = e.length;\n    for (let i = 0; i < s; ) {\n      let o = Math.min(t - this.pos, s - i);\n      for (let c = 0; c < o; c++)\n        n[this.pos++] ^= e[i++];\n      this.pos === t && this.keccak();\n    }\n    return this;\n  }\n  finish() {\n    if (this.finished)\n      return;\n    this.finished = !0;\n    let { state: e, suffix: t, pos: n, blockLen: s } = this;\n    e[n] ^= t, (t & 128) !== 0 && n === s - 1 && this.keccak(), e[s - 1] ^= 128, this.keccak();\n  }\n  writeInto(e) {\n    Wt(this, !1), Is(e), this.finish();\n    let t = this.state, { blockLen: n } = this;\n    for (let s = 0, i = e.length; s < i; ) {\n      this.posOut >= n && this.keccak();\n      let o = Math.min(n - this.posOut, i - s);\n      e.set(t.subarray(this.posOut, this.posOut + o), s), this.posOut += o, s += o;\n    }\n    return e;\n  }\n  xofInto(e) {\n    if (!this.enableXOF)\n      throw new Error(\"XOF is not possible for this instance\");\n    return this.writeInto(e);\n  }\n  xof(e) {\n    return Fe(e), this.xofInto(new Uint8Array(e));\n  }\n  digestInto(e) {\n    if (Bi(e, this), this.finished)\n      throw new Error(\"digest() was already called\");\n    return this.writeInto(e), this.destroy(), e;\n  }\n  digest() {\n    return this.digestInto(new Uint8Array(this.outputLen));\n  }\n  destroy() {\n    this.destroyed = !0, this.state.fill(0);\n  }\n  _cloneInto(e) {\n    let { blockLen: t, suffix: n, outputLen: s, rounds: i, enableXOF: o } = this;\n    return e || (e = new r(t, n, s, o, i)), e.state32.set(this.state32), e.pos = this.pos, e.posOut = this.posOut, e.finished = this.finished, e.rounds = i, e.suffix = n, e.outputLen = s, e.enableXOF = o, e.destroyed = this.destroyed, e;\n  }\n}, Pr = /* @__PURE__ */ a((r, e, t) => br(() => new Si(e, r, t)), \"gen\"), Bg = /* @__PURE__ */ Pr(6, 144, 224 / 8), Rg = /* @__PURE__ */ Pr(6, 136, 256 / 8), vg = /* @__PURE__ */ Pr(6, 104, 384 / 8), Tg = /* @__PURE__ */ Pr(6, 72, 512 / 8), Ig = /* @__PURE__ */ Pr(1, 144, 224 / 8), B0 = /* @__PURE__ */ Pr(1, 136, 256 / 8), Cg = /* @__PURE__ */ Pr(1, 104, 384 / 8), Og = /* @__PURE__ */ Pr(1, 72, 512 / 8), R0 = /* @__PURE__ */ a((r, e, t) => l0((n = {}) => new Si(e, r, n.dkLen === void 0 ? t : n.dkLen, !0)), \"genShake\"), Sg = /* @__PURE__ */ R0(31, 168, 128 / 8), Ug = /* @__PURE__ */ R0(31, 136, 256 / 8);\n\n// node_modules/ethers/lib.esm/crypto/keccak.js\nvar v0 = !1, T0 = /* @__PURE__ */ a(function(r) {\n  return B0(r);\n}, \"_keccak256\"), I0 = T0;\nfunction G(r) {\n  let e = E(r, \"data\");\n  return w(I0(e));\n}\na(G, \"keccak256\");\nG._ = T0;\nG.lock = function() {\n  v0 = !0;\n};\nG.register = function(r) {\n  if (v0)\n    throw new TypeError(\"keccak256 is locked\");\n  I0 = r;\n};\nObject.freeze(G);\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/ripemd160.js\nvar Bd = /* @__PURE__ */ new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]), O0 = /* @__PURE__ */ Uint8Array.from({ length: 16 }, (r, e) => e), Rd = /* @__PURE__ */ O0.map((r) => (9 * r + 5) % 16), ia = [O0], oa = [Rd];\nfor (let r = 0; r < 4; r++)\n  for (let e of [ia, oa])\n    e.push(e[r].map((t) => Bd[t]));\nvar S0 = /* @__PURE__ */ [\n  [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n  [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n  [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n  [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n  [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5]\n].map((r) => new Uint8Array(r)), vd = /* @__PURE__ */ ia.map((r, e) => r.map((t) => S0[e][t])), Td = /* @__PURE__ */ oa.map((r, e) => r.map((t) => S0[e][t])), Id = /* @__PURE__ */ new Uint32Array([\n  0,\n  1518500249,\n  1859775393,\n  2400959708,\n  2840853838\n]), Cd = /* @__PURE__ */ new Uint32Array([\n  1352829926,\n  1548603684,\n  1836072691,\n  2053994217,\n  0\n]), Ui = /* @__PURE__ */ a((r, e) => r << e | r >>> 32 - e, \"rotl\");\nfunction C0(r, e, t, n) {\n  return r === 0 ? e ^ t ^ n : r === 1 ? e & t | ~e & n : r === 2 ? (e | ~t) ^ n : r === 3 ? e & n | t & ~n : e ^ (t | ~n);\n}\na(C0, \"f\");\nvar Li = /* @__PURE__ */ new Uint32Array(16), sa = class extends gr {\n  static {\n    a(this, \"RIPEMD160\");\n  }\n  constructor() {\n    super(64, 20, 8, !0), this.h0 = 1732584193, this.h1 = -271733879, this.h2 = -1732584194, this.h3 = 271733878, this.h4 = -1009589776;\n  }\n  get() {\n    let { h0: e, h1: t, h2: n, h3: s, h4: i } = this;\n    return [e, t, n, s, i];\n  }\n  set(e, t, n, s, i) {\n    this.h0 = e | 0, this.h1 = t | 0, this.h2 = n | 0, this.h3 = s | 0, this.h4 = i | 0;\n  }\n  process(e, t) {\n    for (let p = 0; p < 16; p++, t += 4)\n      Li[p] = e.getUint32(t, !0);\n    let n = this.h0 | 0, s = n, i = this.h1 | 0, o = i, c = this.h2 | 0, f = c, l = this.h3 | 0, u = l, d = this.h4 | 0, x = d;\n    for (let p = 0; p < 5; p++) {\n      let g = 4 - p, m = Id[p], y = Cd[p], A = ia[p], B = oa[p], N = vd[p], D = Td[p];\n      for (let v = 0; v < 16; v++) {\n        let T = Ui(n + C0(p, i, c, l) + Li[A[v]] + m, N[v]) + d | 0;\n        n = d, d = l, l = Ui(c, 10) | 0, c = i, i = T;\n      }\n      for (let v = 0; v < 16; v++) {\n        let T = Ui(s + C0(g, o, f, u) + Li[B[v]] + y, D[v]) + x | 0;\n        s = x, x = u, u = Ui(f, 10) | 0, f = o, o = T;\n      }\n    }\n    this.set(this.h1 + c + u | 0, this.h2 + l + x | 0, this.h3 + d + s | 0, this.h4 + n + o | 0, this.h0 + i + f | 0);\n  }\n  roundClean() {\n    Li.fill(0);\n  }\n  destroy() {\n    this.destroyed = !0, this.buffer.fill(0), this.set(0, 0, 0, 0, 0);\n  }\n}, U0 = /* @__PURE__ */ br(() => new sa());\n\n// node_modules/ethers/lib.esm/crypto/ripemd160.js\nvar L0 = !1, D0 = /* @__PURE__ */ a(function(r) {\n  return U0(r);\n}, \"_ripemd160\"), F0 = D0;\nfunction wt(r) {\n  let e = E(r, \"data\");\n  return w(F0(e));\n}\na(wt, \"ripemd160\");\nwt._ = D0;\nwt.lock = function() {\n  L0 = !0;\n};\nwt.register = function(r) {\n  if (L0)\n    throw new TypeError(\"ripemd160 is locked\");\n  F0 = r;\n};\nObject.freeze(wt);\n\n// node_modules/ethers/lib.esm/crypto/pbkdf2.js\nvar M0 = !1, G0 = /* @__PURE__ */ a(function(r, e, t, n, s) {\n  return m0(r, e, t, n, s);\n}, \"_pbkdf2\"), H0 = G0;\nfunction ze(r, e, t, n, s) {\n  let i = E(r, \"password\"), o = E(e, \"salt\");\n  return w(H0(i, o, t, n, s));\n}\na(ze, \"pbkdf2\");\nze._ = G0;\nze.lock = function() {\n  M0 = !0;\n};\nze.register = function(r) {\n  if (M0)\n    throw new Error(\"pbkdf2 is locked\");\n  H0 = r;\n};\nObject.freeze(ze);\n\n// node_modules/ethers/lib.esm/crypto/random.js\nvar _0 = !1, z0 = /* @__PURE__ */ a(function(r) {\n  return new Uint8Array(b0(r));\n}, \"_randomBytes\"), V0 = z0;\nfunction Me(r) {\n  return V0(r);\n}\na(Me, \"randomBytes\");\nMe._ = z0;\nMe.lock = function() {\n  _0 = !0;\n};\nMe.register = function(r) {\n  if (_0)\n    throw new Error(\"randomBytes is locked\");\n  V0 = r;\n};\nObject.freeze(Me);\n\n// node_modules/ethers/node_modules/@noble/hashes/esm/scrypt.js\nvar ee = /* @__PURE__ */ a((r, e) => r << e | r >>> 32 - e, \"rotl\");\nfunction K0(r, e, t, n, s, i) {\n  let o = r[e++] ^ t[n++], c = r[e++] ^ t[n++], f = r[e++] ^ t[n++], l = r[e++] ^ t[n++], u = r[e++] ^ t[n++], d = r[e++] ^ t[n++], x = r[e++] ^ t[n++], p = r[e++] ^ t[n++], g = r[e++] ^ t[n++], m = r[e++] ^ t[n++], y = r[e++] ^ t[n++], A = r[e++] ^ t[n++], B = r[e++] ^ t[n++], N = r[e++] ^ t[n++], D = r[e++] ^ t[n++], v = r[e++] ^ t[n++], T = o, L = c, O = f, K = l, H = u, _ = d, ae = x, ue = p, Ne = g, R = m, I = y, M = A, q = B, W = N, ce = D, be = v;\n  for (let De = 0; De < 8; De += 2)\n    H ^= ee(T + q | 0, 7), Ne ^= ee(H + T | 0, 9), q ^= ee(Ne + H | 0, 13), T ^= ee(q + Ne | 0, 18), R ^= ee(_ + L | 0, 7), W ^= ee(R + _ | 0, 9), L ^= ee(W + R | 0, 13), _ ^= ee(L + W | 0, 18), ce ^= ee(I + ae | 0, 7), O ^= ee(ce + I | 0, 9), ae ^= ee(O + ce | 0, 13), I ^= ee(ae + O | 0, 18), K ^= ee(be + M | 0, 7), ue ^= ee(K + be | 0, 9), M ^= ee(ue + K | 0, 13), be ^= ee(M + ue | 0, 18), L ^= ee(T + K | 0, 7), O ^= ee(L + T | 0, 9), K ^= ee(O + L | 0, 13), T ^= ee(K + O | 0, 18), ae ^= ee(_ + H | 0, 7), ue ^= ee(ae + _ | 0, 9), H ^= ee(ue + ae | 0, 13), _ ^= ee(H + ue | 0, 18), M ^= ee(I + R | 0, 7), Ne ^= ee(M + I | 0, 9), R ^= ee(Ne + M | 0, 13), I ^= ee(R + Ne | 0, 18), q ^= ee(be + ce | 0, 7), W ^= ee(q + be | 0, 9), ce ^= ee(W + q | 0, 13), be ^= ee(ce + W | 0, 18);\n  s[i++] = o + T | 0, s[i++] = c + L | 0, s[i++] = f + O | 0, s[i++] = l + K | 0, s[i++] = u + H | 0, s[i++] = d + _ | 0, s[i++] = x + ae | 0, s[i++] = p + ue | 0, s[i++] = g + Ne | 0, s[i++] = m + R | 0, s[i++] = y + I | 0, s[i++] = A + M | 0, s[i++] = B + q | 0, s[i++] = N + W | 0, s[i++] = D + ce | 0, s[i++] = v + be | 0;\n}\na(K0, \"XorAndSalsa\");\nfunction Kn(r, e, t, n, s) {\n  let i = n + 0, o = n + 16 * s;\n  for (let c = 0; c < 16; c++)\n    t[o + c] = r[e + (2 * s - 1) * 16 + c];\n  for (let c = 0; c < s; c++, i += 16, e += 16)\n    K0(t, o, r, e, t, i), c > 0 && (o += 16), K0(t, i, r, e += 16, t, o);\n}\na(Kn, \"BlockMix\");\nfunction Q0(r, e, t) {\n  let n = Ti({\n    dkLen: 32,\n    asyncTick: 10,\n    maxmem: 1073742848\n  }, t), { N: s, r: i, p: o, dkLen: c, asyncTick: f, maxmem: l, onProgress: u } = n;\n  if (Fe(s), Fe(i), Fe(o), Fe(c), Fe(f), Fe(l), u !== void 0 && typeof u != \"function\")\n    throw new Error(\"progressCb should be function\");\n  let d = 128 * i, x = d / 4;\n  if (s <= 1 || (s & s - 1) !== 0 || s >= 2 ** (d / 8) || s > 2 ** 32)\n    throw new Error(\"Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32\");\n  if (o < 0 || o > (2 ** 32 - 1) * 32 / d)\n    throw new Error(\"Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)\");\n  if (c < 0 || c > (2 ** 32 - 1) * 32)\n    throw new Error(\"Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32\");\n  let p = d * (s + o);\n  if (p > l)\n    throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${l} (maxmem)`);\n  let g = Cs(jt, r, e, { c: 1, dkLen: d * o }), m = zn(g), y = zn(new Uint8Array(d * s)), A = zn(new Uint8Array(d)), B = /* @__PURE__ */ a(() => {\n  }, \"blockMixCb\");\n  if (u) {\n    let N = 2 * s * o, D = Math.max(Math.floor(N / 1e4), 1), v = 0;\n    B = /* @__PURE__ */ a(() => {\n      v++, u && (!(v % D) || v === N) && u(v / N);\n    }, \"blockMixCb\");\n  }\n  return { N: s, r: i, p: o, dkLen: c, blockSize32: x, V: y, B32: m, B: g, tmp: A, blockMixCb: B, asyncTick: f };\n}\na(Q0, \"scryptInit\");\nfunction J0(r, e, t, n, s) {\n  let i = Cs(jt, r, t, { c: 1, dkLen: e });\n  return t.fill(0), n.fill(0), s.fill(0), i;\n}\na(J0, \"scryptOutput\");\nfunction W0(r, e, t) {\n  let { N: n, r: s, p: i, dkLen: o, blockSize32: c, V: f, B32: l, B: u, tmp: d, blockMixCb: x } = Q0(r, e, t);\n  for (let p = 0; p < i; p++) {\n    let g = c * p;\n    for (let m = 0; m < c; m++)\n      f[m] = l[g + m];\n    for (let m = 0, y = 0; m < n - 1; m++)\n      Kn(f, y, f, y += c, s), x();\n    Kn(f, (n - 1) * c, l, g, s), x();\n    for (let m = 0; m < n; m++) {\n      let y = l[g + c - 16] % n;\n      for (let A = 0; A < c; A++)\n        d[A] = l[g + A] ^ f[y * c + A];\n      Kn(d, 0, l, g, s), x();\n    }\n  }\n  return J0(r, o, u, f, d);\n}\na(W0, \"scrypt\");\nasync function j0(r, e, t) {\n  let { N: n, r: s, p: i, dkLen: o, blockSize32: c, V: f, B32: l, B: u, tmp: d, blockMixCb: x, asyncTick: p } = Q0(r, e, t);\n  for (let g = 0; g < i; g++) {\n    let m = c * g;\n    for (let A = 0; A < c; A++)\n      f[A] = l[m + A];\n    let y = 0;\n    await vi(n - 1, p, () => {\n      Kn(f, y, f, y += c, s), x();\n    }), Kn(f, (n - 1) * c, l, m, s), x(), await vi(n, p, () => {\n      let A = l[m + c - 16] % n;\n      for (let B = 0; B < c; B++)\n        d[B] = l[m + B] ^ f[A * c + B];\n      Kn(d, 0, l, m, s), x();\n    });\n  }\n  return J0(r, o, u, f, d);\n}\na(j0, \"scryptAsync\");\n\n// node_modules/ethers/lib.esm/crypto/scrypt.js\nvar Z0 = !1, q0 = !1, Y0 = /* @__PURE__ */ a(async function(r, e, t, n, s, i, o) {\n  return await j0(r, e, { N: t, r: n, p: s, dkLen: i, onProgress: o });\n}, \"_scryptAsync\"), X0 = /* @__PURE__ */ a(function(r, e, t, n, s, i) {\n  return W0(r, e, { N: t, r: n, p: s, dkLen: i });\n}, \"_scryptSync\"), $0 = Y0, ef = X0;\nasync function At(r, e, t, n, s, i, o) {\n  let c = E(r, \"passwd\"), f = E(e, \"salt\");\n  return w(await $0(c, f, t, n, s, i, o));\n}\na(At, \"scrypt\");\nAt._ = Y0;\nAt.lock = function() {\n  q0 = !0;\n};\nAt.register = function(r) {\n  if (q0)\n    throw new Error(\"scrypt is locked\");\n  $0 = r;\n};\nObject.freeze(At);\nfunction Et(r, e, t, n, s, i) {\n  let o = E(r, \"passwd\"), c = E(e, \"salt\");\n  return w(ef(o, c, t, n, s, i));\n}\na(Et, \"scryptSync\");\nEt._ = X0;\nEt.lock = function() {\n  Z0 = !0;\n};\nEt.register = function(r) {\n  if (Z0)\n    throw new Error(\"scryptSync is locked\");\n  ef = r;\n};\nObject.freeze(Et);\n\n// node_modules/ethers/lib.esm/crypto/sha2.js\nvar tf = /* @__PURE__ */ a(function(r) {\n  return na(\"sha256\").update(r).digest();\n}, \"_sha256\"), rf = /* @__PURE__ */ a(function(r) {\n  return na(\"sha512\").update(r).digest();\n}, \"_sha512\"), nf = tf, sf = rf, of = !1, af = !1;\nfunction ye(r) {\n  let e = E(r, \"data\");\n  return w(nf(e));\n}\na(ye, \"sha256\");\nye._ = tf;\nye.lock = function() {\n  of = !0;\n};\nye.register = function(r) {\n  if (of)\n    throw new Error(\"sha256 is locked\");\n  nf = r;\n};\nObject.freeze(ye);\nfunction qr(r) {\n  let e = E(r, \"data\");\n  return w(sf(e));\n}\na(qr, \"sha512\");\nqr._ = rf;\nqr.lock = function() {\n  af = !0;\n};\nqr.register = function(r) {\n  if (af)\n    throw new Error(\"sha512 is locked\");\n  sf = r;\n};\nObject.freeze(ye);\n\n// node_modules/ethers/node_modules/@noble/curves/esm/abstract/utils.js\nvar la = {};\nHc(la, {\n  bitGet: () => Md,\n  bitLen: () => Fd,\n  bitMask: () => Ss,\n  bitSet: () => Gd,\n  bytesToHex: () => Yr,\n  bytesToNumberBE: () => Zt,\n  bytesToNumberLE: () => Mi,\n  concatBytes: () => Qn,\n  createHmacDrbg: () => fa,\n  ensureBytes: () => qe,\n  equalBytes: () => Ld,\n  hexToBytes: () => Xr,\n  hexToNumber: () => ca,\n  numberToBytesBE: () => kr,\n  numberToBytesLE: () => Gi,\n  numberToHexUnpadded: () => lf,\n  numberToVarBytesBE: () => Ud,\n  utf8ToBytes: () => Dd,\n  validateObject: () => Nr\n});\nvar ff = BigInt(0), Di = BigInt(1), Od = BigInt(2), Fi = /* @__PURE__ */ a((r) => r instanceof Uint8Array, \"u8a\"), Sd = /* @__PURE__ */ Array.from({ length: 256 }, (r, e) => e.toString(16).padStart(2, \"0\"));\nfunction Yr(r) {\n  if (!Fi(r))\n    throw new Error(\"Uint8Array expected\");\n  let e = \"\";\n  for (let t = 0; t < r.length; t++)\n    e += Sd[r[t]];\n  return e;\n}\na(Yr, \"bytesToHex\");\nfunction lf(r) {\n  let e = r.toString(16);\n  return e.length & 1 ? `0${e}` : e;\n}\na(lf, \"numberToHexUnpadded\");\nfunction ca(r) {\n  if (typeof r != \"string\")\n    throw new Error(\"hex string expected, got \" + typeof r);\n  return BigInt(r === \"\" ? \"0\" : `0x${r}`);\n}\na(ca, \"hexToNumber\");\nfunction Xr(r) {\n  if (typeof r != \"string\")\n    throw new Error(\"hex string expected, got \" + typeof r);\n  let e = r.length;\n  if (e % 2)\n    throw new Error(\"padded hex string expected, got unpadded hex of length \" + e);\n  let t = new Uint8Array(e / 2);\n  for (let n = 0; n < t.length; n++) {\n    let s = n * 2, i = r.slice(s, s + 2), o = Number.parseInt(i, 16);\n    if (Number.isNaN(o) || o < 0)\n      throw new Error(\"Invalid byte sequence\");\n    t[n] = o;\n  }\n  return t;\n}\na(Xr, \"hexToBytes\");\nfunction Zt(r) {\n  return ca(Yr(r));\n}\na(Zt, \"bytesToNumberBE\");\nfunction Mi(r) {\n  if (!Fi(r))\n    throw new Error(\"Uint8Array expected\");\n  return ca(Yr(Uint8Array.from(r).reverse()));\n}\na(Mi, \"bytesToNumberLE\");\nfunction kr(r, e) {\n  return Xr(r.toString(16).padStart(e * 2, \"0\"));\n}\na(kr, \"numberToBytesBE\");\nfunction Gi(r, e) {\n  return kr(r, e).reverse();\n}\na(Gi, \"numberToBytesLE\");\nfunction Ud(r) {\n  return Xr(lf(r));\n}\na(Ud, \"numberToVarBytesBE\");\nfunction qe(r, e, t) {\n  let n;\n  if (typeof e == \"string\")\n    try {\n      n = Xr(e);\n    } catch (i) {\n      throw new Error(`${r} must be valid hex string, got \"${e}\". Cause: ${i}`);\n    }\n  else if (Fi(e))\n    n = Uint8Array.from(e);\n  else\n    throw new Error(`${r} must be hex string or Uint8Array`);\n  let s = n.length;\n  if (typeof t == \"number\" && s !== t)\n    throw new Error(`${r} expected ${t} bytes, got ${s}`);\n  return n;\n}\na(qe, \"ensureBytes\");\nfunction Qn(...r) {\n  let e = new Uint8Array(r.reduce((n, s) => n + s.length, 0)), t = 0;\n  return r.forEach((n) => {\n    if (!Fi(n))\n      throw new Error(\"Uint8Array expected\");\n    e.set(n, t), t += n.length;\n  }), e;\n}\na(Qn, \"concatBytes\");\nfunction Ld(r, e) {\n  if (r.length !== e.length)\n    return !1;\n  for (let t = 0; t < r.length; t++)\n    if (r[t] !== e[t])\n      return !1;\n  return !0;\n}\na(Ld, \"equalBytes\");\nfunction Dd(r) {\n  if (typeof r != \"string\")\n    throw new Error(`utf8ToBytes expected string, got ${typeof r}`);\n  return new Uint8Array(new TextEncoder().encode(r));\n}\na(Dd, \"utf8ToBytes\");\nfunction Fd(r) {\n  let e;\n  for (e = 0; r > ff; r >>= Di, e += 1)\n    ;\n  return e;\n}\na(Fd, \"bitLen\");\nfunction Md(r, e) {\n  return r >> BigInt(e) & Di;\n}\na(Md, \"bitGet\");\nvar Gd = /* @__PURE__ */ a((r, e, t) => r | (t ? Di : ff) << BigInt(e), \"bitSet\"), Ss = /* @__PURE__ */ a((r) => (Od << BigInt(r - 1)) - Di, \"bitMask\"), aa = /* @__PURE__ */ a((r) => new Uint8Array(r), \"u8n\"), cf = /* @__PURE__ */ a((r) => Uint8Array.from(r), \"u8fr\");\nfunction fa(r, e, t) {\n  if (typeof r != \"number\" || r < 2)\n    throw new Error(\"hashLen must be a number\");\n  if (typeof e != \"number\" || e < 2)\n    throw new Error(\"qByteLen must be a number\");\n  if (typeof t != \"function\")\n    throw new Error(\"hmacFn must be a function\");\n  let n = aa(r), s = aa(r), i = 0, o = /* @__PURE__ */ a(() => {\n    n.fill(1), s.fill(0), i = 0;\n  }, \"reset\"), c = /* @__PURE__ */ a((...d) => t(s, n, ...d), \"h\"), f = /* @__PURE__ */ a((d = aa()) => {\n    s = c(cf([0]), d), n = c(), d.length !== 0 && (s = c(cf([1]), d), n = c());\n  }, \"reseed\"), l = /* @__PURE__ */ a(() => {\n    if (i++ >= 1e3)\n      throw new Error(\"drbg: tried 1000 values\");\n    let d = 0, x = [];\n    for (; d < e; ) {\n      n = c();\n      let p = n.slice();\n      x.push(p), d += n.length;\n    }\n    return Qn(...x);\n  }, \"gen\");\n  return /* @__PURE__ */ a((d, x) => {\n    o(), f(d);\n    let p;\n    for (; !(p = x(l())); )\n      f();\n    return o(), p;\n  }, \"genUntil\");\n}\na(fa, \"createHmacDrbg\");\nvar Hd = {\n  bigint: /* @__PURE__ */ a((r) => typeof r == \"bigint\", \"bigint\"),\n  function: /* @__PURE__ */ a((r) => typeof r == \"function\", \"function\"),\n  boolean: /* @__PURE__ */ a((r) => typeof r == \"boolean\", \"boolean\"),\n  string: /* @__PURE__ */ a((r) => typeof r == \"string\", \"string\"),\n  stringOrUint8Array: /* @__PURE__ */ a((r) => typeof r == \"string\" || r instanceof Uint8Array, \"stringOrUint8Array\"),\n  isSafeInteger: /* @__PURE__ */ a((r) => Number.isSafeInteger(r), \"isSafeInteger\"),\n  array: /* @__PURE__ */ a((r) => Array.isArray(r), \"array\"),\n  field: /* @__PURE__ */ a((r, e) => e.Fp.isValid(r), \"field\"),\n  hash: /* @__PURE__ */ a((r) => typeof r == \"function\" && Number.isSafeInteger(r.outputLen), \"hash\")\n};\nfunction Nr(r, e, t = {}) {\n  let n = /* @__PURE__ */ a((s, i, o) => {\n    let c = Hd[i];\n    if (typeof c != \"function\")\n      throw new Error(`Invalid validator \"${i}\", expected function`);\n    let f = r[s];\n    if (!(o && f === void 0) && !c(f, r))\n      throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`);\n  }, \"checkField\");\n  for (let [s, i] of Object.entries(e))\n    n(s, i, !1);\n  for (let [s, i] of Object.entries(t))\n    n(s, i, !0);\n  return r;\n}\na(Nr, \"validateObject\");\n\n// node_modules/ethers/node_modules/@noble/curves/esm/abstract/modular.js\nvar ke = BigInt(0), pe = BigInt(1), $r = BigInt(2), _d = BigInt(3), ua = BigInt(4), uf = BigInt(5), df = BigInt(8), zd = BigInt(9), Vd = BigInt(16);\nfunction Ge(r, e) {\n  let t = r % e;\n  return t >= ke ? t : e + t;\n}\na(Ge, \"mod\");\nfunction Kd(r, e, t) {\n  if (t <= ke || e < ke)\n    throw new Error(\"Expected power/modulo > 0\");\n  if (t === pe)\n    return ke;\n  let n = pe;\n  for (; e > ke; )\n    e & pe && (n = n * r % t), r = r * r % t, e >>= pe;\n  return n;\n}\na(Kd, \"pow\");\nfunction Ye(r, e, t) {\n  let n = r;\n  for (; e-- > ke; )\n    n *= n, n %= t;\n  return n;\n}\na(Ye, \"pow2\");\nfunction Hi(r, e) {\n  if (r === ke || e <= ke)\n    throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);\n  let t = Ge(r, e), n = e, s = ke, i = pe, o = pe, c = ke;\n  for (; t !== ke; ) {\n    let l = n / t, u = n % t, d = s - o * l, x = i - c * l;\n    n = t, t = u, s = o, i = c, o = d, c = x;\n  }\n  if (n !== pe)\n    throw new Error(\"invert: does not exist\");\n  return Ge(s, e);\n}\na(Hi, \"invert\");\nfunction Qd(r) {\n  let e = (r - pe) / $r, t, n, s;\n  for (t = r - pe, n = 0; t % $r === ke; t /= $r, n++)\n    ;\n  for (s = $r; s < r && Kd(s, e, r) !== r - pe; s++)\n    ;\n  if (n === 1) {\n    let o = (r + pe) / ua;\n    return /* @__PURE__ */ a(function(f, l) {\n      let u = f.pow(l, o);\n      if (!f.eql(f.sqr(u), l))\n        throw new Error(\"Cannot find square root\");\n      return u;\n    }, \"tonelliFast\");\n  }\n  let i = (t + pe) / $r;\n  return /* @__PURE__ */ a(function(c, f) {\n    if (c.pow(f, e) === c.neg(c.ONE))\n      throw new Error(\"Cannot find square root\");\n    let l = n, u = c.pow(c.mul(c.ONE, s), t), d = c.pow(f, i), x = c.pow(f, t);\n    for (; !c.eql(x, c.ONE); ) {\n      if (c.eql(x, c.ZERO))\n        return c.ZERO;\n      let p = 1;\n      for (let m = c.sqr(x); p < l && !c.eql(m, c.ONE); p++)\n        m = c.sqr(m);\n      let g = c.pow(u, pe << BigInt(l - p - 1));\n      u = c.sqr(g), d = c.mul(d, g), x = c.mul(x, u), l = p;\n    }\n    return d;\n  }, \"tonelliSlow\");\n}\na(Qd, \"tonelliShanks\");\nfunction Jd(r) {\n  if (r % ua === _d) {\n    let e = (r + pe) / ua;\n    return /* @__PURE__ */ a(function(n, s) {\n      let i = n.pow(s, e);\n      if (!n.eql(n.sqr(i), s))\n        throw new Error(\"Cannot find square root\");\n      return i;\n    }, \"sqrt3mod4\");\n  }\n  if (r % df === uf) {\n    let e = (r - uf) / df;\n    return /* @__PURE__ */ a(function(n, s) {\n      let i = n.mul(s, $r), o = n.pow(i, e), c = n.mul(s, o), f = n.mul(n.mul(c, $r), o), l = n.mul(c, n.sub(f, n.ONE));\n      if (!n.eql(n.sqr(l), s))\n        throw new Error(\"Cannot find square root\");\n      return l;\n    }, \"sqrt5mod8\");\n  }\n  return r % Vd, Qd(r);\n}\na(Jd, \"FpSqrt\");\nvar Wd = [\n  \"create\",\n  \"isValid\",\n  \"is0\",\n  \"neg\",\n  \"inv\",\n  \"sqrt\",\n  \"sqr\",\n  \"eql\",\n  \"add\",\n  \"sub\",\n  \"mul\",\n  \"pow\",\n  \"div\",\n  \"addN\",\n  \"subN\",\n  \"mulN\",\n  \"sqrN\"\n];\nfunction da(r) {\n  let e = {\n    ORDER: \"bigint\",\n    MASK: \"bigint\",\n    BYTES: \"isSafeInteger\",\n    BITS: \"isSafeInteger\"\n  }, t = Wd.reduce((n, s) => (n[s] = \"function\", n), e);\n  return Nr(r, t);\n}\na(da, \"validateField\");\nfunction jd(r, e, t) {\n  if (t < ke)\n    throw new Error(\"Expected power > 0\");\n  if (t === ke)\n    return r.ONE;\n  if (t === pe)\n    return e;\n  let n = r.ONE, s = e;\n  for (; t > ke; )\n    t & pe && (n = r.mul(n, s)), s = r.sqr(s), t >>= pe;\n  return n;\n}\na(jd, \"FpPow\");\nfunction Zd(r, e) {\n  let t = new Array(e.length), n = e.reduce((i, o, c) => r.is0(o) ? i : (t[c] = i, r.mul(i, o)), r.ONE), s = r.inv(n);\n  return e.reduceRight((i, o, c) => r.is0(o) ? i : (t[c] = r.mul(i, t[c]), r.mul(i, o)), s), t;\n}\na(Zd, \"FpInvertBatch\");\nfunction ha(r, e) {\n  let t = e !== void 0 ? e : r.toString(2).length, n = Math.ceil(t / 8);\n  return { nBitLength: t, nByteLength: n };\n}\na(ha, \"nLength\");\nfunction hf(r, e, t = !1, n = {}) {\n  if (r <= ke)\n    throw new Error(`Expected Field ORDER > 0, got ${r}`);\n  let { nBitLength: s, nByteLength: i } = ha(r, e);\n  if (i > 2048)\n    throw new Error(\"Field lengths over 2048 bytes are not supported\");\n  let o = Jd(r), c = Object.freeze({\n    ORDER: r,\n    BITS: s,\n    BYTES: i,\n    MASK: Ss(s),\n    ZERO: ke,\n    ONE: pe,\n    create: /* @__PURE__ */ a((f) => Ge(f, r), \"create\"),\n    isValid: /* @__PURE__ */ a((f) => {\n      if (typeof f != \"bigint\")\n        throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);\n      return ke <= f && f < r;\n    }, \"isValid\"),\n    is0: /* @__PURE__ */ a((f) => f === ke, \"is0\"),\n    isOdd: /* @__PURE__ */ a((f) => (f & pe) === pe, \"isOdd\"),\n    neg: /* @__PURE__ */ a((f) => Ge(-f, r), \"neg\"),\n    eql: /* @__PURE__ */ a((f, l) => f === l, \"eql\"),\n    sqr: /* @__PURE__ */ a((f) => Ge(f * f, r), \"sqr\"),\n    add: /* @__PURE__ */ a((f, l) => Ge(f + l, r), \"add\"),\n    sub: /* @__PURE__ */ a((f, l) => Ge(f - l, r), \"sub\"),\n    mul: /* @__PURE__ */ a((f, l) => Ge(f * l, r), \"mul\"),\n    pow: /* @__PURE__ */ a((f, l) => jd(c, f, l), \"pow\"),\n    div: /* @__PURE__ */ a((f, l) => Ge(f * Hi(l, r), r), \"div\"),\n    // Same as above, but doesn't normalize\n    sqrN: /* @__PURE__ */ a((f) => f * f, \"sqrN\"),\n    addN: /* @__PURE__ */ a((f, l) => f + l, \"addN\"),\n    subN: /* @__PURE__ */ a((f, l) => f - l, \"subN\"),\n    mulN: /* @__PURE__ */ a((f, l) => f * l, \"mulN\"),\n    inv: /* @__PURE__ */ a((f) => Hi(f, r), \"inv\"),\n    sqrt: n.sqrt || ((f) => o(c, f)),\n    invertBatch: /* @__PURE__ */ a((f) => Zd(c, f), \"invertBatch\"),\n    // TODO: do we really need constant cmov?\n    // We don't have const-time bigints anyway, so probably will be not very useful\n    cmov: /* @__PURE__ */ a((f, l, u) => u ? l : f, \"cmov\"),\n    toBytes: /* @__PURE__ */ a((f) => t ? Gi(f, i) : kr(f, i), \"toBytes\"),\n    fromBytes: /* @__PURE__ */ a((f) => {\n      if (f.length !== i)\n        throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);\n      return t ? Mi(f) : Zt(f);\n    }, \"fromBytes\")\n  });\n  return Object.freeze(c);\n}\na(hf, \"Field\");\nfunction xf(r) {\n  if (typeof r != \"bigint\")\n    throw new Error(\"field order must be bigint\");\n  let e = r.toString(2).length;\n  return Math.ceil(e / 8);\n}\na(xf, \"getFieldBytesLength\");\nfunction xa(r) {\n  let e = xf(r);\n  return e + Math.ceil(e / 2);\n}\na(xa, \"getMinHashLength\");\nfunction pf(r, e, t = !1) {\n  let n = r.length, s = xf(e), i = xa(e);\n  if (n < 16 || n < i || n > 1024)\n    throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);\n  let o = t ? Zt(r) : Mi(r), c = Ge(o, e - pe) + pe;\n  return t ? Gi(c, s) : kr(c, s);\n}\na(pf, \"mapHashToField\");\n\n// node_modules/ethers/node_modules/@noble/curves/esm/abstract/curve.js\nvar Yd = BigInt(0), pa = BigInt(1);\nfunction mf(r, e) {\n  let t = /* @__PURE__ */ a((s, i) => {\n    let o = i.negate();\n    return s ? o : i;\n  }, \"constTimeNegate\"), n = /* @__PURE__ */ a((s) => {\n    let i = Math.ceil(e / s) + 1, o = 2 ** (s - 1);\n    return { windows: i, windowSize: o };\n  }, \"opts\");\n  return {\n    constTimeNegate: t,\n    // non-const time multiplication ladder\n    unsafeLadder(s, i) {\n      let o = r.ZERO, c = s;\n      for (; i > Yd; )\n        i & pa && (o = o.add(c)), c = c.double(), i >>= pa;\n      return o;\n    },\n    /**\n     * Creates a wNAF precomputation window. Used for caching.\n     * Default window size is set by `utils.precompute()` and is equal to 8.\n     * Number of precomputed points depends on the curve size:\n     * 2^(ð‘Šâˆ’1) * (Math.ceil(ð‘› / ð‘Š) + 1), where:\n     * - ð‘Š is the window size\n     * - ð‘› is the bitlength of the curve order.\n     * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n     * @returns precomputed point tables flattened to a single array\n     */\n    precomputeWindow(s, i) {\n      let { windows: o, windowSize: c } = n(i), f = [], l = s, u = l;\n      for (let d = 0; d < o; d++) {\n        u = l, f.push(u);\n        for (let x = 1; x < c; x++)\n          u = u.add(l), f.push(u);\n        l = u.double();\n      }\n      return f;\n    },\n    /**\n     * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n     * @param W window size\n     * @param precomputes precomputed tables\n     * @param n scalar (we don't check here, but should be less than curve order)\n     * @returns real and fake (for const-time) points\n     */\n    wNAF(s, i, o) {\n      let { windows: c, windowSize: f } = n(s), l = r.ZERO, u = r.BASE, d = BigInt(2 ** s - 1), x = 2 ** s, p = BigInt(s);\n      for (let g = 0; g < c; g++) {\n        let m = g * f, y = Number(o & d);\n        o >>= p, y > f && (y -= x, o += pa);\n        let A = m, B = m + Math.abs(y) - 1, N = g % 2 !== 0, D = y < 0;\n        y === 0 ? u = u.add(t(N, i[A])) : l = l.add(t(D, i[B]));\n      }\n      return { p: l, f: u };\n    },\n    wNAFCached(s, i, o, c) {\n      let f = s._WINDOW_SIZE || 1, l = i.get(s);\n      return l || (l = this.precomputeWindow(s, f), f !== 1 && i.set(s, c(l))), this.wNAF(f, l, o);\n    }\n  };\n}\na(mf, \"wNAF\");\nfunction ma(r) {\n  return da(r.Fp), Nr(r, {\n    n: \"bigint\",\n    h: \"bigint\",\n    Gx: \"field\",\n    Gy: \"field\"\n  }, {\n    nBitLength: \"isSafeInteger\",\n    nByteLength: \"isSafeInteger\"\n  }), Object.freeze({\n    ...ha(r.n, r.nBitLength),\n    ...r,\n    p: r.Fp.ORDER\n  });\n}\na(ma, \"validateBasic\");\n\n// node_modules/ethers/node_modules/@noble/curves/esm/abstract/weierstrass.js\nfunction Xd(r) {\n  let e = ma(r);\n  Nr(e, {\n    a: \"field\",\n    b: \"field\"\n  }, {\n    allowedPrivateKeyLengths: \"array\",\n    wrapPrivateKey: \"boolean\",\n    isTorsionFree: \"function\",\n    clearCofactor: \"function\",\n    allowInfinityPoint: \"boolean\",\n    fromBytes: \"function\",\n    toBytes: \"function\"\n  });\n  let { endo: t, Fp: n, a: s } = e;\n  if (t) {\n    if (!n.eql(s, n.ZERO))\n      throw new Error(\"Endomorphism can only be defined for Koblitz curves that have a=0\");\n    if (typeof t != \"object\" || typeof t.beta != \"bigint\" || typeof t.splitScalar != \"function\")\n      throw new Error(\"Expected endomorphism with beta: bigint and splitScalar: function\");\n  }\n  return Object.freeze({ ...e });\n}\na(Xd, \"validatePointOpts\");\nvar { bytesToNumberBE: $d, hexToBytes: eh } = la, en = {\n  // asn.1 DER encoding utils\n  Err: class extends Error {\n    static {\n      a(this, \"DERErr\");\n    }\n    constructor(e = \"\") {\n      super(e);\n    }\n  },\n  _parseInt(r) {\n    let { Err: e } = en;\n    if (r.length < 2 || r[0] !== 2)\n      throw new e(\"Invalid signature integer tag\");\n    let t = r[1], n = r.subarray(2, t + 2);\n    if (!t || n.length !== t)\n      throw new e(\"Invalid signature integer: wrong length\");\n    if (n[0] & 128)\n      throw new e(\"Invalid signature integer: negative\");\n    if (n[0] === 0 && !(n[1] & 128))\n      throw new e(\"Invalid signature integer: unnecessary leading zero\");\n    return { d: $d(n), l: r.subarray(t + 2) };\n  },\n  toSig(r) {\n    let { Err: e } = en, t = typeof r == \"string\" ? eh(r) : r;\n    if (!(t instanceof Uint8Array))\n      throw new Error(\"ui8a expected\");\n    let n = t.length;\n    if (n < 2 || t[0] != 48)\n      throw new e(\"Invalid signature tag\");\n    if (t[1] !== n - 2)\n      throw new e(\"Invalid signature: incorrect length\");\n    let { d: s, l: i } = en._parseInt(t.subarray(2)), { d: o, l: c } = en._parseInt(i);\n    if (c.length)\n      throw new e(\"Invalid signature: left bytes after parsing\");\n    return { r: s, s: o };\n  },\n  hexFromSig(r) {\n    let e = /* @__PURE__ */ a((l) => Number.parseInt(l[0], 16) & 8 ? \"00\" + l : l, \"slice\"), t = /* @__PURE__ */ a((l) => {\n      let u = l.toString(16);\n      return u.length & 1 ? `0${u}` : u;\n    }, \"h\"), n = e(t(r.s)), s = e(t(r.r)), i = n.length / 2, o = s.length / 2, c = t(i), f = t(o);\n    return `30${t(o + i + 4)}02${f}${s}02${c}${n}`;\n  }\n}, qt = BigInt(0), rt = BigInt(1), B1 = BigInt(2), bf = BigInt(3), R1 = BigInt(4);\nfunction th(r) {\n  let e = Xd(r), { Fp: t } = e, n = e.toBytes || ((g, m, y) => {\n    let A = m.toAffine();\n    return Qn(Uint8Array.from([4]), t.toBytes(A.x), t.toBytes(A.y));\n  }), s = e.fromBytes || ((g) => {\n    let m = g.subarray(1), y = t.fromBytes(m.subarray(0, t.BYTES)), A = t.fromBytes(m.subarray(t.BYTES, 2 * t.BYTES));\n    return { x: y, y: A };\n  });\n  function i(g) {\n    let { a: m, b: y } = e, A = t.sqr(g), B = t.mul(A, g);\n    return t.add(t.add(B, t.mul(g, m)), y);\n  }\n  if (a(i, \"weierstrassEquation\"), !t.eql(t.sqr(e.Gy), i(e.Gx)))\n    throw new Error(\"bad generator point: equation left != right\");\n  function o(g) {\n    return typeof g == \"bigint\" && qt < g && g < e.n;\n  }\n  a(o, \"isWithinCurveOrder\");\n  function c(g) {\n    if (!o(g))\n      throw new Error(\"Expected valid bigint: 0 < bigint < curve.n\");\n  }\n  a(c, \"assertGE\");\n  function f(g) {\n    let { allowedPrivateKeyLengths: m, nByteLength: y, wrapPrivateKey: A, n: B } = e;\n    if (m && typeof g != \"bigint\") {\n      if (g instanceof Uint8Array && (g = Yr(g)), typeof g != \"string\" || !m.includes(g.length))\n        throw new Error(\"Invalid key\");\n      g = g.padStart(y * 2, \"0\");\n    }\n    let N;\n    try {\n      N = typeof g == \"bigint\" ? g : Zt(qe(\"private key\", g, y));\n    } catch {\n      throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`);\n    }\n    return A && (N = Ge(N, B)), c(N), N;\n  }\n  a(f, \"normPrivateKeyToScalar\");\n  let l = /* @__PURE__ */ new Map();\n  function u(g) {\n    if (!(g instanceof d))\n      throw new Error(\"ProjectivePoint expected\");\n  }\n  a(u, \"assertPrjPoint\");\n  class d {\n    static {\n      a(this, \"Point\");\n    }\n    constructor(m, y, A) {\n      if (this.px = m, this.py = y, this.pz = A, m == null || !t.isValid(m))\n        throw new Error(\"x required\");\n      if (y == null || !t.isValid(y))\n        throw new Error(\"y required\");\n      if (A == null || !t.isValid(A))\n        throw new Error(\"z required\");\n    }\n    // Does not validate if the point is on-curve.\n    // Use fromHex instead, or call assertValidity() later.\n    static fromAffine(m) {\n      let { x: y, y: A } = m || {};\n      if (!m || !t.isValid(y) || !t.isValid(A))\n        throw new Error(\"invalid affine point\");\n      if (m instanceof d)\n        throw new Error(\"projective point not allowed\");\n      let B = /* @__PURE__ */ a((N) => t.eql(N, t.ZERO), \"is0\");\n      return B(y) && B(A) ? d.ZERO : new d(y, A, t.ONE);\n    }\n    get x() {\n      return this.toAffine().x;\n    }\n    get y() {\n      return this.toAffine().y;\n    }\n    /**\n     * Takes a bunch of Projective Points but executes only one\n     * inversion on all of them. Inversion is very slow operation,\n     * so this improves performance massively.\n     * Optimization: converts a list of projective points to a list of identical points with Z=1.\n     */\n    static normalizeZ(m) {\n      let y = t.invertBatch(m.map((A) => A.pz));\n      return m.map((A, B) => A.toAffine(y[B])).map(d.fromAffine);\n    }\n    /**\n     * Converts hash string or Uint8Array to Point.\n     * @param hex short/long ECDSA hex\n     */\n    static fromHex(m) {\n      let y = d.fromAffine(s(qe(\"pointHex\", m)));\n      return y.assertValidity(), y;\n    }\n    // Multiplies generator point by privateKey.\n    static fromPrivateKey(m) {\n      return d.BASE.multiply(f(m));\n    }\n    // \"Private method\", don't use it directly\n    _setWindowSize(m) {\n      this._WINDOW_SIZE = m, l.delete(this);\n    }\n    // A point on curve is valid if it conforms to equation.\n    assertValidity() {\n      if (this.is0()) {\n        if (e.allowInfinityPoint && !t.is0(this.py))\n          return;\n        throw new Error(\"bad point: ZERO\");\n      }\n      let { x: m, y } = this.toAffine();\n      if (!t.isValid(m) || !t.isValid(y))\n        throw new Error(\"bad point: x or y not FE\");\n      let A = t.sqr(y), B = i(m);\n      if (!t.eql(A, B))\n        throw new Error(\"bad point: equation left != right\");\n      if (!this.isTorsionFree())\n        throw new Error(\"bad point: not in prime-order subgroup\");\n    }\n    hasEvenY() {\n      let { y: m } = this.toAffine();\n      if (t.isOdd)\n        return !t.isOdd(m);\n      throw new Error(\"Field doesn't support isOdd\");\n    }\n    /**\n     * Compare one point to another.\n     */\n    equals(m) {\n      u(m);\n      let { px: y, py: A, pz: B } = this, { px: N, py: D, pz: v } = m, T = t.eql(t.mul(y, v), t.mul(N, B)), L = t.eql(t.mul(A, v), t.mul(D, B));\n      return T && L;\n    }\n    /**\n     * Flips point to one corresponding to (x, -y) in Affine coordinates.\n     */\n    negate() {\n      return new d(this.px, t.neg(this.py), this.pz);\n    }\n    // Renes-Costello-Batina exception-free doubling formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 3\n    // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n    double() {\n      let { a: m, b: y } = e, A = t.mul(y, bf), { px: B, py: N, pz: D } = this, v = t.ZERO, T = t.ZERO, L = t.ZERO, O = t.mul(B, B), K = t.mul(N, N), H = t.mul(D, D), _ = t.mul(B, N);\n      return _ = t.add(_, _), L = t.mul(B, D), L = t.add(L, L), v = t.mul(m, L), T = t.mul(A, H), T = t.add(v, T), v = t.sub(K, T), T = t.add(K, T), T = t.mul(v, T), v = t.mul(_, v), L = t.mul(A, L), H = t.mul(m, H), _ = t.sub(O, H), _ = t.mul(m, _), _ = t.add(_, L), L = t.add(O, O), O = t.add(L, O), O = t.add(O, H), O = t.mul(O, _), T = t.add(T, O), H = t.mul(N, D), H = t.add(H, H), O = t.mul(H, _), v = t.sub(v, O), L = t.mul(H, K), L = t.add(L, L), L = t.add(L, L), new d(v, T, L);\n    }\n    // Renes-Costello-Batina exception-free addition formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 1\n    // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n    add(m) {\n      u(m);\n      let { px: y, py: A, pz: B } = this, { px: N, py: D, pz: v } = m, T = t.ZERO, L = t.ZERO, O = t.ZERO, K = e.a, H = t.mul(e.b, bf), _ = t.mul(y, N), ae = t.mul(A, D), ue = t.mul(B, v), Ne = t.add(y, A), R = t.add(N, D);\n      Ne = t.mul(Ne, R), R = t.add(_, ae), Ne = t.sub(Ne, R), R = t.add(y, B);\n      let I = t.add(N, v);\n      return R = t.mul(R, I), I = t.add(_, ue), R = t.sub(R, I), I = t.add(A, B), T = t.add(D, v), I = t.mul(I, T), T = t.add(ae, ue), I = t.sub(I, T), O = t.mul(K, R), T = t.mul(H, ue), O = t.add(T, O), T = t.sub(ae, O), O = t.add(ae, O), L = t.mul(T, O), ae = t.add(_, _), ae = t.add(ae, _), ue = t.mul(K, ue), R = t.mul(H, R), ae = t.add(ae, ue), ue = t.sub(_, ue), ue = t.mul(K, ue), R = t.add(R, ue), _ = t.mul(ae, R), L = t.add(L, _), _ = t.mul(I, R), T = t.mul(Ne, T), T = t.sub(T, _), _ = t.mul(Ne, ae), O = t.mul(I, O), O = t.add(O, _), new d(T, L, O);\n    }\n    subtract(m) {\n      return this.add(m.negate());\n    }\n    is0() {\n      return this.equals(d.ZERO);\n    }\n    wNAF(m) {\n      return p.wNAFCached(this, l, m, (y) => {\n        let A = t.invertBatch(y.map((B) => B.pz));\n        return y.map((B, N) => B.toAffine(A[N])).map(d.fromAffine);\n      });\n    }\n    /**\n     * Non-constant-time multiplication. Uses double-and-add algorithm.\n     * It's faster, but should only be used when you don't care about\n     * an exposed private key e.g. sig verification, which works over *public* keys.\n     */\n    multiplyUnsafe(m) {\n      let y = d.ZERO;\n      if (m === qt)\n        return y;\n      if (c(m), m === rt)\n        return this;\n      let { endo: A } = e;\n      if (!A)\n        return p.unsafeLadder(this, m);\n      let { k1neg: B, k1: N, k2neg: D, k2: v } = A.splitScalar(m), T = y, L = y, O = this;\n      for (; N > qt || v > qt; )\n        N & rt && (T = T.add(O)), v & rt && (L = L.add(O)), O = O.double(), N >>= rt, v >>= rt;\n      return B && (T = T.negate()), D && (L = L.negate()), L = new d(t.mul(L.px, A.beta), L.py, L.pz), T.add(L);\n    }\n    /**\n     * Constant time multiplication.\n     * Uses wNAF method. Windowed method may be 10% faster,\n     * but takes 2x longer to generate and consumes 2x memory.\n     * Uses precomputes when available.\n     * Uses endomorphism for Koblitz curves.\n     * @param scalar by which the point would be multiplied\n     * @returns New point\n     */\n    multiply(m) {\n      c(m);\n      let y = m, A, B, { endo: N } = e;\n      if (N) {\n        let { k1neg: D, k1: v, k2neg: T, k2: L } = N.splitScalar(y), { p: O, f: K } = this.wNAF(v), { p: H, f: _ } = this.wNAF(L);\n        O = p.constTimeNegate(D, O), H = p.constTimeNegate(T, H), H = new d(t.mul(H.px, N.beta), H.py, H.pz), A = O.add(H), B = K.add(_);\n      } else {\n        let { p: D, f: v } = this.wNAF(y);\n        A = D, B = v;\n      }\n      return d.normalizeZ([A, B])[0];\n    }\n    /**\n     * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n     * Not using Strauss-Shamir trick: precomputation tables are faster.\n     * The trick could be useful if both P and Q are not G (not in our case).\n     * @returns non-zero affine point\n     */\n    multiplyAndAddUnsafe(m, y, A) {\n      let B = d.BASE, N = /* @__PURE__ */ a((v, T) => T === qt || T === rt || !v.equals(B) ? v.multiplyUnsafe(T) : v.multiply(T), \"mul\"), D = N(this, y).add(N(m, A));\n      return D.is0() ? void 0 : D;\n    }\n    // Converts Projective point to affine (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    // (x, y, z) âˆ‹ (x=x/z, y=y/z)\n    toAffine(m) {\n      let { px: y, py: A, pz: B } = this, N = this.is0();\n      m == null && (m = N ? t.ONE : t.inv(B));\n      let D = t.mul(y, m), v = t.mul(A, m), T = t.mul(B, m);\n      if (N)\n        return { x: t.ZERO, y: t.ZERO };\n      if (!t.eql(T, t.ONE))\n        throw new Error(\"invZ was invalid\");\n      return { x: D, y: v };\n    }\n    isTorsionFree() {\n      let { h: m, isTorsionFree: y } = e;\n      if (m === rt)\n        return !0;\n      if (y)\n        return y(d, this);\n      throw new Error(\"isTorsionFree() has not been declared for the elliptic curve\");\n    }\n    clearCofactor() {\n      let { h: m, clearCofactor: y } = e;\n      return m === rt ? this : y ? y(d, this) : this.multiplyUnsafe(e.h);\n    }\n    toRawBytes(m = !0) {\n      return this.assertValidity(), n(d, this, m);\n    }\n    toHex(m = !0) {\n      return Yr(this.toRawBytes(m));\n    }\n  }\n  d.BASE = new d(e.Gx, e.Gy, t.ONE), d.ZERO = new d(t.ZERO, t.ONE, t.ZERO);\n  let x = e.nBitLength, p = mf(d, e.endo ? Math.ceil(x / 2) : x);\n  return {\n    CURVE: e,\n    ProjectivePoint: d,\n    normPrivateKeyToScalar: f,\n    weierstrassEquation: i,\n    isWithinCurveOrder: o\n  };\n}\na(th, \"weierstrassPoints\");\nfunction rh(r) {\n  let e = ma(r);\n  return Nr(e, {\n    hash: \"hash\",\n    hmac: \"function\",\n    randomBytes: \"function\"\n  }, {\n    bits2int: \"function\",\n    bits2int_modN: \"function\",\n    lowS: \"boolean\"\n  }), Object.freeze({ lowS: !0, ...e });\n}\na(rh, \"validateOpts\");\nfunction gf(r) {\n  let e = rh(r), { Fp: t, n } = e, s = t.BYTES + 1, i = 2 * t.BYTES + 1;\n  function o(R) {\n    return qt < R && R < t.ORDER;\n  }\n  a(o, \"isValidFieldElement\");\n  function c(R) {\n    return Ge(R, n);\n  }\n  a(c, \"modN\");\n  function f(R) {\n    return Hi(R, n);\n  }\n  a(f, \"invN\");\n  let { ProjectivePoint: l, normPrivateKeyToScalar: u, weierstrassEquation: d, isWithinCurveOrder: x } = th({\n    ...e,\n    toBytes(R, I, M) {\n      let q = I.toAffine(), W = t.toBytes(q.x), ce = Qn;\n      return M ? ce(Uint8Array.from([I.hasEvenY() ? 2 : 3]), W) : ce(Uint8Array.from([4]), W, t.toBytes(q.y));\n    },\n    fromBytes(R) {\n      let I = R.length, M = R[0], q = R.subarray(1);\n      if (I === s && (M === 2 || M === 3)) {\n        let W = Zt(q);\n        if (!o(W))\n          throw new Error(\"Point is not on curve\");\n        let ce = d(W), be = t.sqrt(ce), De = (be & rt) === rt;\n        return (M & 1) === 1 !== De && (be = t.neg(be)), { x: W, y: be };\n      } else if (I === i && M === 4) {\n        let W = t.fromBytes(q.subarray(0, t.BYTES)), ce = t.fromBytes(q.subarray(t.BYTES, 2 * t.BYTES));\n        return { x: W, y: ce };\n      } else\n        throw new Error(`Point of length ${I} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`);\n    }\n  }), p = /* @__PURE__ */ a((R) => Yr(kr(R, e.nByteLength)), \"numToNByteStr\");\n  function g(R) {\n    let I = n >> rt;\n    return R > I;\n  }\n  a(g, \"isBiggerThanHalfOrder\");\n  function m(R) {\n    return g(R) ? c(-R) : R;\n  }\n  a(m, \"normalizeS\");\n  let y = /* @__PURE__ */ a((R, I, M) => Zt(R.slice(I, M)), \"slcNum\");\n  class A {\n    static {\n      a(this, \"Signature\");\n    }\n    constructor(I, M, q) {\n      this.r = I, this.s = M, this.recovery = q, this.assertValidity();\n    }\n    // pair (bytes of r, bytes of s)\n    static fromCompact(I) {\n      let M = e.nByteLength;\n      return I = qe(\"compactSignature\", I, M * 2), new A(y(I, 0, M), y(I, M, 2 * M));\n    }\n    // DER encoded ECDSA signature\n    // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n    static fromDER(I) {\n      let { r: M, s: q } = en.toSig(qe(\"DER\", I));\n      return new A(M, q);\n    }\n    assertValidity() {\n      if (!x(this.r))\n        throw new Error(\"r must be 0 < r < CURVE.n\");\n      if (!x(this.s))\n        throw new Error(\"s must be 0 < s < CURVE.n\");\n    }\n    addRecoveryBit(I) {\n      return new A(this.r, this.s, I);\n    }\n    recoverPublicKey(I) {\n      let { r: M, s: q, recovery: W } = this, ce = L(qe(\"msgHash\", I));\n      if (W == null || ![0, 1, 2, 3].includes(W))\n        throw new Error(\"recovery id invalid\");\n      let be = W === 2 || W === 3 ? M + e.n : M;\n      if (be >= t.ORDER)\n        throw new Error(\"recovery id 2 or 3 invalid\");\n      let De = (W & 1) === 0 ? \"02\" : \"03\", ur = l.fromHex(De + p(be)), dr = f(be), On = c(-ce * dr), Es = c(q * dr), hr = l.BASE.multiplyAndAddUnsafe(ur, On, Es);\n      if (!hr)\n        throw new Error(\"point at infinify\");\n      return hr.assertValidity(), hr;\n    }\n    // Signatures should be low-s, to prevent malleability.\n    hasHighS() {\n      return g(this.s);\n    }\n    normalizeS() {\n      return this.hasHighS() ? new A(this.r, c(-this.s), this.recovery) : this;\n    }\n    // DER-encoded\n    toDERRawBytes() {\n      return Xr(this.toDERHex());\n    }\n    toDERHex() {\n      return en.hexFromSig({ r: this.r, s: this.s });\n    }\n    // padded bytes of r, then padded bytes of s\n    toCompactRawBytes() {\n      return Xr(this.toCompactHex());\n    }\n    toCompactHex() {\n      return p(this.r) + p(this.s);\n    }\n  }\n  let B = {\n    isValidPrivateKey(R) {\n      try {\n        return u(R), !0;\n      } catch {\n        return !1;\n      }\n    },\n    normPrivateKeyToScalar: u,\n    /**\n     * Produces cryptographically secure private key from random of size\n     * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n     */\n    randomPrivateKey: /* @__PURE__ */ a(() => {\n      let R = xa(e.n);\n      return pf(e.randomBytes(R), e.n);\n    }, \"randomPrivateKey\"),\n    /**\n     * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n     * Allows to massively speed-up `point.multiply(scalar)`.\n     * @returns cached point\n     * @example\n     * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n     * fast.multiply(privKey); // much faster ECDH now\n     */\n    precompute(R = 8, I = l.BASE) {\n      return I._setWindowSize(R), I.multiply(BigInt(3)), I;\n    }\n  };\n  function N(R, I = !0) {\n    return l.fromPrivateKey(R).toRawBytes(I);\n  }\n  a(N, \"getPublicKey\");\n  function D(R) {\n    let I = R instanceof Uint8Array, M = typeof R == \"string\", q = (I || M) && R.length;\n    return I ? q === s || q === i : M ? q === 2 * s || q === 2 * i : R instanceof l;\n  }\n  a(D, \"isProbPub\");\n  function v(R, I, M = !0) {\n    if (D(R))\n      throw new Error(\"first arg must be private key\");\n    if (!D(I))\n      throw new Error(\"second arg must be public key\");\n    return l.fromHex(I).multiply(u(R)).toRawBytes(M);\n  }\n  a(v, \"getSharedSecret\");\n  let T = e.bits2int || function(R) {\n    let I = Zt(R), M = R.length * 8 - e.nBitLength;\n    return M > 0 ? I >> BigInt(M) : I;\n  }, L = e.bits2int_modN || function(R) {\n    return c(T(R));\n  }, O = Ss(e.nBitLength);\n  function K(R) {\n    if (typeof R != \"bigint\")\n      throw new Error(\"bigint expected\");\n    if (!(qt <= R && R < O))\n      throw new Error(`bigint expected < 2^${e.nBitLength}`);\n    return kr(R, e.nByteLength);\n  }\n  a(K, \"int2octets\");\n  function H(R, I, M = _) {\n    if ([\"recovered\", \"canonical\"].some((_r) => _r in M))\n      throw new Error(\"sign() legacy options not supported\");\n    let { hash: q, randomBytes: W } = e, { lowS: ce, prehash: be, extraEntropy: De } = M;\n    ce == null && (ce = !0), R = qe(\"msgHash\", R), be && (R = qe(\"prehashed msgHash\", q(R)));\n    let ur = L(R), dr = u(I), On = [K(dr), K(ur)];\n    if (De != null) {\n      let _r = De === !0 ? W(t.BYTES) : De;\n      On.push(qe(\"extraEntropy\", _r));\n    }\n    let Es = Qn(...On), hr = ur;\n    function Go(_r) {\n      let Sn = T(_r);\n      if (!x(Sn))\n        return;\n      let Fc = f(Sn), Ct = l.BASE.multiply(Sn).toAffine(), Un = c(Ct.x);\n      if (Un === qt)\n        return;\n      let di = c(Fc * c(hr + Un * dr));\n      if (di === qt)\n        return;\n      let Mc = (Ct.x === Un ? 0 : 2) | Number(Ct.y & rt), Gc = di;\n      return ce && g(di) && (Gc = m(di), Mc ^= 1), new A(Un, Gc, Mc);\n    }\n    return a(Go, \"k2sig\"), { seed: Es, k2sig: Go };\n  }\n  a(H, \"prepSig\");\n  let _ = { lowS: e.lowS, prehash: !1 }, ae = { lowS: e.lowS, prehash: !1 };\n  function ue(R, I, M = _) {\n    let { seed: q, k2sig: W } = H(R, I, M), ce = e;\n    return fa(ce.hash.outputLen, ce.nByteLength, ce.hmac)(q, W);\n  }\n  a(ue, \"sign\"), l.BASE._setWindowSize(8);\n  function Ne(R, I, M, q = ae) {\n    let W = R;\n    if (I = qe(\"msgHash\", I), M = qe(\"publicKey\", M), \"strict\" in q)\n      throw new Error(\"options.strict was renamed to lowS\");\n    let { lowS: ce, prehash: be } = q, De, ur;\n    try {\n      if (typeof W == \"string\" || W instanceof Uint8Array)\n        try {\n          De = A.fromDER(W);\n        } catch (Ct) {\n          if (!(Ct instanceof en.Err))\n            throw Ct;\n          De = A.fromCompact(W);\n        }\n      else if (typeof W == \"object\" && typeof W.r == \"bigint\" && typeof W.s == \"bigint\") {\n        let { r: Ct, s: Un } = W;\n        De = new A(Ct, Un);\n      } else\n        throw new Error(\"PARSE\");\n      ur = l.fromHex(M);\n    } catch (Ct) {\n      if (Ct.message === \"PARSE\")\n        throw new Error(\"signature must be Signature instance, Uint8Array or hex string\");\n      return !1;\n    }\n    if (ce && De.hasHighS())\n      return !1;\n    be && (I = e.hash(I));\n    let { r: dr, s: On } = De, Es = L(I), hr = f(On), Go = c(Es * hr), _r = c(dr * hr), Sn = l.BASE.multiplyAndAddUnsafe(ur, Go, _r)?.toAffine();\n    return Sn ? c(Sn.x) === dr : !1;\n  }\n  return a(Ne, \"verify\"), {\n    CURVE: e,\n    getPublicKey: N,\n    getSharedSecret: v,\n    sign: ue,\n    verify: Ne,\n    ProjectivePoint: l,\n    Signature: A,\n    utils: B\n  };\n}\na(gf, \"weierstrass\");\n\n// node_modules/ethers/node_modules/@noble/curves/esm/_shortw_utils.js\nfunction nh(r) {\n  return {\n    hash: r,\n    hmac: /* @__PURE__ */ a((e, ...t) => Zr(r, e, f0(...t)), \"hmac\"),\n    randomBytes: u0\n  };\n}\na(nh, \"getHash\");\nfunction yf(r, e) {\n  let t = /* @__PURE__ */ a((n) => gf({ ...r, ...nh(n) }), \"create\");\n  return Object.freeze({ ...t(e), create: t });\n}\na(yf, \"createCurve\");\n\n// node_modules/ethers/node_modules/@noble/curves/esm/secp256k1.js\nvar Ef = BigInt(\"0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f\"), wf = BigInt(\"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\"), sh = BigInt(1), ba = BigInt(2), Af = /* @__PURE__ */ a((r, e) => (r + e / ba) / e, \"divNearest\");\nfunction ih(r) {\n  let e = Ef, t = BigInt(3), n = BigInt(6), s = BigInt(11), i = BigInt(22), o = BigInt(23), c = BigInt(44), f = BigInt(88), l = r * r * r % e, u = l * l * r % e, d = Ye(u, t, e) * u % e, x = Ye(d, t, e) * u % e, p = Ye(x, ba, e) * l % e, g = Ye(p, s, e) * p % e, m = Ye(g, i, e) * g % e, y = Ye(m, c, e) * m % e, A = Ye(y, f, e) * y % e, B = Ye(A, c, e) * m % e, N = Ye(B, t, e) * u % e, D = Ye(N, o, e) * g % e, v = Ye(D, n, e) * l % e, T = Ye(v, ba, e);\n  if (!ga.eql(ga.sqr(T), r))\n    throw new Error(\"Cannot find square root\");\n  return T;\n}\na(ih, \"sqrtMod\");\nvar ga = hf(Ef, void 0, void 0, { sqrt: ih }), Yt = yf({\n  a: BigInt(0),\n  b: BigInt(7),\n  Fp: ga,\n  n: wf,\n  // Base point (x, y) aka generator point\n  Gx: BigInt(\"55066263022277343669578718895168534326250603453777594175500187360389116729240\"),\n  Gy: BigInt(\"32670510020758816978083085130507043184471273380659243275938904335757337482424\"),\n  h: BigInt(1),\n  lowS: !0,\n  /**\n   * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n   * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n   * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n   * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n   */\n  endo: {\n    beta: BigInt(\"0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee\"),\n    splitScalar: /* @__PURE__ */ a((r) => {\n      let e = wf, t = BigInt(\"0x3086d221a7d46bcde86c90e49284eb15\"), n = -sh * BigInt(\"0xe4437ed6010e88286f547fa90abfe4c3\"), s = BigInt(\"0x114ca50f7a8e2f3f657c1108d9d44cfd8\"), i = t, o = BigInt(\"0x100000000000000000000000000000000\"), c = Af(i * r, e), f = Af(-n * r, e), l = Ge(r - c * t - f * s, e), u = Ge(-c * n - f * i, e), d = l > o, x = u > o;\n      if (d && (l = e - l), x && (u = e - u), l > o || u > o)\n        throw new Error(\"splitScalar: Endomorphism failed, k=\" + r);\n      return { k1neg: d, k1: l, k2neg: x, k2: u };\n    }, \"splitScalar\")\n  }\n}, jt), M1 = BigInt(0);\nvar G1 = Yt.ProjectivePoint;\n\n// node_modules/ethers/lib.esm/constants/addresses.js\nvar Pt = \"0x0000000000000000000000000000000000000000\";\n\n// node_modules/ethers/lib.esm/constants/hashes.js\nvar Jn = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n\n// node_modules/ethers/lib.esm/constants/numbers.js\nvar ya = BigInt(\"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\"), wa = BigInt(\"1000000000000000000\"), Aa = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"), Ea = BigInt(\"0x8000000000000000000000000000000000000000000000000000000000000000\") * BigInt(-1), Pa = BigInt(\"0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\n// node_modules/ethers/lib.esm/constants/strings.js\nvar ka = \"\\u039E\", Us = `\u0019Ethereum Signed Message:\n`;\n\n// node_modules/ethers/lib.esm/crypto/signature.js\nvar Pf = BigInt(0), kf = BigInt(1), Nf = BigInt(2), Bf = BigInt(27), Rf = BigInt(28), _i = BigInt(35), Wn = {};\nfunction vf(r) {\n  return ge(X(r), 32);\n}\na(vf, \"toUint256\");\nvar we = class r {\n  static {\n    a(this, \"Signature\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  /**\n   *  The ``r`` value for a signature.\n   *\n   *  This represents the ``x`` coordinate of a \"reference\" or\n   *  challenge point, from which the ``y`` can be computed.\n   */\n  get r() {\n    return this.#e;\n  }\n  set r(e) {\n    h(Qe(e) === 32, \"invalid r\", \"value\", e), this.#e = w(e);\n  }\n  /**\n   *  The ``s`` value for a signature.\n   */\n  get s() {\n    return h(parseInt(this.#t.substring(0, 3)) < 8, \"non-canonical s; use ._s\", \"s\", this.#t), this.#t;\n  }\n  set s(e) {\n    h(Qe(e) === 32, \"invalid s\", \"value\", e), this.#t = w(e);\n  }\n  /**\n   *  Return the s value, unchecked for EIP-2 compliance.\n   *\n   *  This should generally not be used and is for situations where\n   *  a non-canonical S value might be relevant, such as Frontier blocks\n   *  that were mined prior to EIP-2 or invalid Authorization List\n   *  signatures.\n   */\n  get _s() {\n    return this.#t;\n  }\n  /**\n   *  Returns true if the Signature is valid for [[link-eip-2]] signatures.\n   */\n  isValid() {\n    return parseInt(this.#t.substring(0, 3)) < 8;\n  }\n  /**\n   *  The ``v`` value for a signature.\n   *\n   *  Since a given ``x`` value for ``r`` has two possible values for\n   *  its correspondin ``y``, the ``v`` indicates which of the two ``y``\n   *  values to use.\n   *\n   *  It is normalized to the values ``27`` or ``28`` for legacy\n   *  purposes.\n   */\n  get v() {\n    return this.#r;\n  }\n  set v(e) {\n    let t = S(e, \"value\");\n    h(t === 27 || t === 28, \"invalid v\", \"v\", e), this.#r = t;\n  }\n  /**\n   *  The EIP-155 ``v`` for legacy transactions. For non-legacy\n   *  transactions, this value is ``null``.\n   */\n  get networkV() {\n    return this.#n;\n  }\n  /**\n   *  The chain ID for EIP-155 legacy transactions. For non-legacy\n   *  transactions, this value is ``null``.\n   */\n  get legacyChainId() {\n    let e = this.networkV;\n    return e == null ? null : r.getChainId(e);\n  }\n  /**\n   *  The ``yParity`` for the signature.\n   *\n   *  See ``v`` for more details on how this value is used.\n   */\n  get yParity() {\n    return this.v === 27 ? 0 : 1;\n  }\n  /**\n   *  The [[link-eip-2098]] compact representation of the ``yParity``\n   *  and ``s`` compacted into a single ``bytes32``.\n   */\n  get yParityAndS() {\n    let e = E(this.s);\n    return this.yParity && (e[0] |= 128), w(e);\n  }\n  /**\n   *  The [[link-eip-2098]] compact representation.\n   */\n  get compactSerialized() {\n    return F([this.r, this.yParityAndS]);\n  }\n  /**\n   *  The serialized representation.\n   */\n  get serialized() {\n    return F([this.r, this.s, this.yParity ? \"0x1c\" : \"0x1b\"]);\n  }\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s) {\n    ve(e, Wn, \"Signature\"), this.#e = t, this.#t = n, this.#r = s, this.#n = null;\n  }\n  [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n    return `Signature { r: \"${this.r}\", s: \"${this._s}\"${this.isValid() ? \"\" : ', valid: \"false\"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`;\n  }\n  /**\n   *  Returns a new identical [[Signature]].\n   */\n  clone() {\n    let e = new r(Wn, this.r, this._s, this.v);\n    return this.networkV && (e.#n = this.networkV), e;\n  }\n  /**\n   *  Returns a representation that is compatible with ``JSON.stringify``.\n   */\n  toJSON() {\n    let e = this.networkV;\n    return {\n      _type: \"signature\",\n      networkV: e != null ? e.toString() : null,\n      r: this.r,\n      s: this._s,\n      v: this.v\n    };\n  }\n  /**\n   *  Compute the chain ID from the ``v`` in a legacy EIP-155 transactions.\n   *\n   *  @example:\n   *    Signature.getChainId(45)\n   *    //_result:\n   *\n   *    Signature.getChainId(46)\n   *    //_result:\n   */\n  static getChainId(e) {\n    let t = k(e, \"v\");\n    return t == Bf || t == Rf ? Pf : (h(t >= _i, \"invalid EIP-155 v\", \"v\", e), (t - _i) / Nf);\n  }\n  /**\n   *  Compute the ``v`` for a chain ID for a legacy EIP-155 transactions.\n   *\n   *  Legacy transactions which use [[link-eip-155]] hijack the ``v``\n   *  property to include the chain ID.\n   *\n   *  @example:\n   *    Signature.getChainIdV(5, 27)\n   *    //_result:\n   *\n   *    Signature.getChainIdV(5, 28)\n   *    //_result:\n   *\n   */\n  static getChainIdV(e, t) {\n    return k(e) * Nf + BigInt(35 + t - 27);\n  }\n  /**\n   *  Compute the normalized legacy transaction ``v`` from a ``yParirty``,\n   *  a legacy transaction ``v`` or a legacy [[link-eip-155]] transaction.\n   *\n   *  @example:\n   *    // The values 0 and 1 imply v is actually yParity\n   *    Signature.getNormalizedV(0)\n   *    //_result:\n   *\n   *    // Legacy non-EIP-1559 transaction (i.e. 27 or 28)\n   *    Signature.getNormalizedV(27)\n   *    //_result:\n   *\n   *    // Legacy EIP-155 transaction (i.e. >= 35)\n   *    Signature.getNormalizedV(46)\n   *    //_result:\n   *\n   *    // Invalid values throw\n   *    Signature.getNormalizedV(5)\n   *    //_error:\n   */\n  static getNormalizedV(e) {\n    let t = k(e);\n    return t === Pf || t === Bf ? 27 : t === kf || t === Rf ? 28 : (h(t >= _i, \"invalid v\", \"v\", e), t & kf ? 27 : 28);\n  }\n  /**\n   *  Creates a new [[Signature]].\n   *\n   *  If no %%sig%% is provided, a new [[Signature]] is created\n   *  with default values.\n   *\n   *  If %%sig%% is a string, it is parsed.\n   */\n  static from(e) {\n    function t(l, u) {\n      h(l, u, \"signature\", e);\n    }\n    if (a(t, \"assertError\"), e == null)\n      return new r(Wn, Jn, Jn, 27);\n    if (typeof e == \"string\") {\n      let l = E(e, \"signature\");\n      if (l.length === 64) {\n        let u = w(l.slice(0, 32)), d = l.slice(32, 64), x = d[0] & 128 ? 28 : 27;\n        return d[0] &= 127, new r(Wn, u, w(d), x);\n      }\n      if (l.length === 65) {\n        let u = w(l.slice(0, 32)), d = w(l.slice(32, 64)), x = r.getNormalizedV(l[64]);\n        return new r(Wn, u, d, x);\n      }\n      t(!1, \"invalid raw signature length\");\n    }\n    if (e instanceof r)\n      return e.clone();\n    let n = e.r;\n    t(n != null, \"missing r\");\n    let s = vf(n), i = (function(l, u) {\n      if (l != null)\n        return vf(l);\n      if (u != null) {\n        t(z(u, 32), \"invalid yParityAndS\");\n        let d = E(u);\n        return d[0] &= 127, w(d);\n      }\n      t(!1, \"missing s\");\n    })(e.s, e.yParityAndS), { networkV: o, v: c } = (function(l, u, d) {\n      if (l != null) {\n        let x = k(l);\n        return {\n          networkV: x >= _i ? x : void 0,\n          v: r.getNormalizedV(x)\n        };\n      }\n      if (u != null)\n        return t(z(u, 32), \"invalid yParityAndS\"), { v: E(u)[0] & 128 ? 28 : 27 };\n      if (d != null) {\n        switch (S(d, \"sig.yParity\")) {\n          case 0:\n            return { v: 27 };\n          case 1:\n            return { v: 28 };\n        }\n        t(!1, \"invalid yParity\");\n      }\n      t(!1, \"missing v\");\n    })(e.v, e.yParityAndS, e.yParity), f = new r(Wn, s, i, c);\n    return o && (f.#n = o), t(e.yParity == null || S(e.yParity, \"sig.yParity\") === f.yParity, \"yParity mismatch\"), t(e.yParityAndS == null || e.yParityAndS === f.yParityAndS, \"yParityAndS mismatch\"), f;\n  }\n};\n\n// node_modules/ethers/lib.esm/crypto/signing-key.js\nvar Ie = class r {\n  static {\n    a(this, \"SigningKey\");\n  }\n  #e;\n  /**\n   *  Creates a new **SigningKey** for %%privateKey%%.\n   */\n  constructor(e) {\n    h(Qe(e) === 32, \"invalid private key\", \"privateKey\", \"[REDACTED]\"), this.#e = w(e);\n  }\n  /**\n   *  The private key.\n   */\n  get privateKey() {\n    return this.#e;\n  }\n  /**\n   *  The uncompressed public key.\n   *\n   * This will always begin with the prefix ``0x04`` and be 132\n   * characters long (the ``0x`` prefix and 130 hexadecimal nibbles).\n   */\n  get publicKey() {\n    return r.computePublicKey(this.#e);\n  }\n  /**\n   *  The compressed public key.\n   *\n   *  This will always begin with either the prefix ``0x02`` or ``0x03``\n   *  and be 68 characters long (the ``0x`` prefix and 33 hexadecimal\n   *  nibbles)\n   */\n  get compressedPublicKey() {\n    return r.computePublicKey(this.#e, !0);\n  }\n  /**\n   *  Return the signature of the signed %%digest%%.\n   */\n  sign(e) {\n    h(Qe(e) === 32, \"invalid digest length\", \"digest\", e);\n    let t = Yt.sign(fe(e), fe(this.#e), {\n      lowS: !0\n    });\n    return we.from({\n      r: Be(t.r, 32),\n      s: Be(t.s, 32),\n      v: t.recovery ? 28 : 27\n    });\n  }\n  /**\n   *  Returns the [[link-wiki-ecdh]] shared secret between this\n   *  private key and the %%other%% key.\n   *\n   *  The %%other%% key may be any type of key, a raw public key,\n   *  a compressed/uncompressed pubic key or aprivate key.\n   *\n   *  Best practice is usually to use a cryptographic hash on the\n   *  returned value before using it as a symetric secret.\n   *\n   *  @example:\n   *    sign1 = new SigningKey(id(\"some-secret-1\"))\n   *    sign2 = new SigningKey(id(\"some-secret-2\"))\n   *\n   *    // Notice that privA.computeSharedSecret(pubB)...\n   *    sign1.computeSharedSecret(sign2.publicKey)\n   *    //_result:\n   *\n   *    // ...is equal to privB.computeSharedSecret(pubA).\n   *    sign2.computeSharedSecret(sign1.publicKey)\n   *    //_result:\n   */\n  computeSharedSecret(e) {\n    let t = r.computePublicKey(e);\n    return w(Yt.getSharedSecret(fe(this.#e), E(t), !1));\n  }\n  /**\n   *  Compute the public key for %%key%%, optionally %%compressed%%.\n   *\n   *  The %%key%% may be any type of key, a raw public key, a\n   *  compressed/uncompressed public key or private key.\n   *\n   *  @example:\n   *    sign = new SigningKey(id(\"some-secret\"));\n   *\n   *    // Compute the uncompressed public key for a private key\n   *    SigningKey.computePublicKey(sign.privateKey)\n   *    //_result:\n   *\n   *    // Compute the compressed public key for a private key\n   *    SigningKey.computePublicKey(sign.privateKey, true)\n   *    //_result:\n   *\n   *    // Compute the uncompressed public key\n   *    SigningKey.computePublicKey(sign.publicKey, false);\n   *    //_result:\n   *\n   *    // Compute the Compressed a public key\n   *    SigningKey.computePublicKey(sign.publicKey, true);\n   *    //_result:\n   */\n  static computePublicKey(e, t) {\n    let n = E(e, \"key\");\n    if (n.length === 32) {\n      let i = Yt.getPublicKey(n, !!t);\n      return w(i);\n    }\n    if (n.length === 64) {\n      let i = new Uint8Array(65);\n      i[0] = 4, i.set(n, 1), n = i;\n    }\n    let s = Yt.ProjectivePoint.fromHex(n);\n    return w(s.toRawBytes(t));\n  }\n  /**\n   *  Returns the public key for the private key which produced the\n   *  %%signature%% for the given %%digest%%.\n   *\n   *  @example:\n   *    key = new SigningKey(id(\"some-secret\"))\n   *    digest = id(\"hello world\")\n   *    sig = key.sign(digest)\n   *\n   *    // Notice the signer public key...\n   *    key.publicKey\n   *    //_result:\n   *\n   *    // ...is equal to the recovered public key\n   *    SigningKey.recoverPublicKey(digest, sig)\n   *    //_result:\n   *\n   */\n  static recoverPublicKey(e, t) {\n    h(Qe(e) === 32, \"invalid digest length\", \"digest\", e);\n    let n = we.from(t), s = Yt.Signature.fromCompact(fe(F([n.r, n.s])));\n    s = s.addRecoveryBit(n.yParity);\n    let i = s.recoverPublicKey(fe(e));\n    return h(i != null, \"invalid signature for digest\", \"signature\", t), \"0x\" + i.toHex(!1);\n  }\n  /**\n   *  Returns the point resulting from adding the ellipic curve points\n   *  %%p0%% and %%p1%%.\n   *\n   *  This is not a common function most developers should require, but\n   *  can be useful for certain privacy-specific techniques.\n   *\n   *  For example, it is used by [[HDNodeWallet]] to compute child\n   *  addresses from parent public keys and chain codes.\n   */\n  static addPoints(e, t, n) {\n    let s = Yt.ProjectivePoint.fromHex(r.computePublicKey(e).substring(2)), i = Yt.ProjectivePoint.fromHex(r.computePublicKey(t).substring(2));\n    return \"0x\" + s.add(i).toHex(!!n);\n  }\n};\n\n// node_modules/ethers/lib.esm/crypto/index.js\nfunction Tf() {\n  yt.lock(), G.lock(), ze.lock(), Me.lock(), wt.lock(), At.lock(), Et.lock(), ye.lock(), qr.lock(), Me.lock();\n}\na(Tf, \"lock\");\n\n// node_modules/ethers/lib.esm/address/address.js\nvar oh = BigInt(0), ah = BigInt(36);\nfunction If(r) {\n  r = r.toLowerCase();\n  let e = r.substring(2).split(\"\"), t = new Uint8Array(40);\n  for (let s = 0; s < 40; s++)\n    t[s] = e[s].charCodeAt(0);\n  let n = E(G(t));\n  for (let s = 0; s < 40; s += 2)\n    n[s >> 1] >> 4 >= 8 && (e[s] = e[s].toUpperCase()), (n[s >> 1] & 15) >= 8 && (e[s + 1] = e[s + 1].toUpperCase());\n  return \"0x\" + e.join(\"\");\n}\na(If, \"getChecksumAddress\");\nvar Na = {};\nfor (let r = 0; r < 10; r++)\n  Na[String(r)] = String(r);\nfor (let r = 0; r < 26; r++)\n  Na[String.fromCharCode(65 + r)] = String(10 + r);\nvar Cf = 15;\nfunction Of(r) {\n  r = r.toUpperCase(), r = r.substring(4) + r.substring(0, 2) + \"00\";\n  let e = r.split(\"\").map((n) => Na[n]).join(\"\");\n  for (; e.length >= Cf; ) {\n    let n = e.substring(0, Cf);\n    e = parseInt(n, 10) % 97 + e.substring(n.length);\n  }\n  let t = String(98 - parseInt(e, 10) % 97);\n  for (; t.length < 2; )\n    t = \"0\" + t;\n  return t;\n}\na(Of, \"ibanChecksum\");\nvar ch = (function() {\n  let r = {};\n  for (let e = 0; e < 36; e++) {\n    let t = \"0123456789abcdefghijklmnopqrstuvwxyz\"[e];\n    r[t] = BigInt(e);\n  }\n  return r;\n})();\nfunction fh(r) {\n  r = r.toLowerCase();\n  let e = oh;\n  for (let t = 0; t < r.length; t++)\n    e = e * ah + ch[r[t]];\n  return e;\n}\na(fh, \"fromBase36\");\nfunction U(r) {\n  if (h(typeof r == \"string\", \"invalid address\", \"address\", r), r.match(/^(0x)?[0-9a-fA-F]{40}$/)) {\n    r.startsWith(\"0x\") || (r = \"0x\" + r);\n    let e = If(r);\n    return h(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/) || e === r, \"bad address checksum\", \"address\", r), e;\n  }\n  if (r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)) {\n    h(r.substring(2, 4) === Of(r), \"bad icap checksum\", \"address\", r);\n    let e = fh(r.substring(4)).toString(16);\n    for (; e.length < 40; )\n      e = \"0\" + e;\n    return If(\"0x\" + e);\n  }\n  h(!1, \"invalid address\", \"address\", r);\n}\na(U, \"getAddress\");\nfunction Ba(r) {\n  let e = BigInt(U(r)).toString(36).toUpperCase();\n  for (; e.length < 30; )\n    e = \"0\" + e;\n  return \"XE\" + Of(\"XE00\" + e) + e;\n}\na(Ba, \"getIcapAddress\");\n\n// node_modules/ethers/lib.esm/address/contract-address.js\nfunction tn(r) {\n  let e = U(r.from), n = k(r.nonce, \"tx.nonce\").toString(16);\n  return n === \"0\" ? n = \"0x\" : n.length % 2 ? n = \"0x0\" + n : n = \"0x\" + n, U(Y(G(_e([e, n])), 12));\n}\na(tn, \"getCreateAddress\");\nfunction Ra(r, e, t) {\n  let n = U(r), s = E(e, \"salt\"), i = E(t, \"initCodeHash\");\n  return h(s.length === 32, \"salt must be 32 bytes\", \"salt\", e), h(i.length === 32, \"initCodeHash must be 32 bytes\", \"initCodeHash\", t), U(Y(G(F([\"0xff\", n, s, i])), 12));\n}\na(Ra, \"getCreate2Address\");\n\n// node_modules/ethers/lib.esm/address/checks.js\nfunction jn(r) {\n  return r && typeof r.getAddress == \"function\";\n}\na(jn, \"isAddressable\");\nfunction Ta(r) {\n  try {\n    return U(r), !0;\n  } catch {\n  }\n  return !1;\n}\na(Ta, \"isAddress\");\nasync function va(r, e) {\n  let t = await e;\n  return (t == null || t === \"0x0000000000000000000000000000000000000000\") && (b(typeof r != \"string\", \"unconfigured name\", \"UNCONFIGURED_NAME\", { value: r }), h(!1, \"invalid AddressLike value; did not resolve to a value address\", \"target\", r)), U(t);\n}\na(va, \"checkAddress\");\nfunction le(r, e) {\n  if (typeof r == \"string\")\n    return r.match(/^0x[0-9a-f]{40}$/i) ? U(r) : (b(e != null, \"ENS resolution requires a provider\", \"UNSUPPORTED_OPERATION\", { operation: \"resolveName\" }), va(r, e.resolveName(r)));\n  if (jn(r))\n    return va(r, r.getAddress());\n  if (r && typeof r.then == \"function\")\n    return va(r, r);\n  h(!1, \"unsupported addressable value\", \"target\", r);\n}\na(le, \"resolveAddress\");\n\n// node_modules/ethers/lib.esm/abi/typed.js\nvar kt = {};\nfunction C(r, e) {\n  let t = !1;\n  return e < 0 && (t = !0, e *= -1), new se(kt, `${t ? \"\" : \"u\"}int${e}`, r, { signed: t, width: e });\n}\na(C, \"n\");\nfunction te(r, e) {\n  return new se(kt, `bytes${e || \"\"}`, r, { size: e });\n}\na(te, \"b\");\nvar Sf = Symbol.for(\"_ethers_typed\"), se = class r {\n  static {\n    a(this, \"Typed\");\n  }\n  /**\n   *  The type, as a Solidity-compatible type.\n   */\n  type;\n  /**\n   *  The actual value.\n   */\n  value;\n  #e;\n  /**\n   *  @_ignore:\n   */\n  _typedSymbol;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n, s) {\n    s == null && (s = null), ve(kt, e, \"Typed\"), P(this, { _typedSymbol: Sf, type: t, value: n }), this.#e = s, this.format();\n  }\n  /**\n   *  Format the type as a Human-Readable type.\n   */\n  format() {\n    if (this.type === \"array\")\n      throw new Error(\"\");\n    if (this.type === \"dynamicArray\")\n      throw new Error(\"\");\n    return this.type === \"tuple\" ? `tuple(${this.value.map((e) => e.format()).join(\",\")})` : this.type;\n  }\n  /**\n   *  The default value returned by this type.\n   */\n  defaultValue() {\n    return 0;\n  }\n  /**\n   *  The minimum value for numeric types.\n   */\n  minValue() {\n    return 0;\n  }\n  /**\n   *  The maximum value for numeric types.\n   */\n  maxValue() {\n    return 0;\n  }\n  /**\n   *  Returns ``true`` and provides a type guard is this is a [[TypedBigInt]].\n   */\n  isBigInt() {\n    return !!this.type.match(/^u?int[0-9]+$/);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard is this is a [[TypedData]].\n   */\n  isData() {\n    return this.type.startsWith(\"bytes\");\n  }\n  /**\n   *  Returns ``true`` and provides a type guard is this is a [[TypedString]].\n   */\n  isString() {\n    return this.type === \"string\";\n  }\n  /**\n   *  Returns the tuple name, if this is a tuple. Throws otherwise.\n   */\n  get tupleName() {\n    if (this.type !== \"tuple\")\n      throw TypeError(\"not a tuple\");\n    return this.#e;\n  }\n  // Returns the length of this type as an array\n  // - `null` indicates the length is unforced, it could be dynamic\n  // - `-1` indicates the length is dynamic\n  // - any other value indicates it is a static array and is its length\n  /**\n   *  Returns the length of the array type or ``-1`` if it is dynamic.\n   *\n   *  Throws if the type is not an array.\n   */\n  get arrayLength() {\n    if (this.type !== \"array\")\n      throw TypeError(\"not an array\");\n    return this.#e === !0 ? -1 : this.#e === !1 ? this.value.length : null;\n  }\n  /**\n   *  Returns a new **Typed** of %%type%% with the %%value%%.\n   */\n  static from(e, t) {\n    return new r(kt, e, t);\n  }\n  /**\n   *  Return a new ``uint8`` type for %%v%%.\n   */\n  static uint8(e) {\n    return C(e, 8);\n  }\n  /**\n   *  Return a new ``uint16`` type for %%v%%.\n   */\n  static uint16(e) {\n    return C(e, 16);\n  }\n  /**\n   *  Return a new ``uint24`` type for %%v%%.\n   */\n  static uint24(e) {\n    return C(e, 24);\n  }\n  /**\n   *  Return a new ``uint32`` type for %%v%%.\n   */\n  static uint32(e) {\n    return C(e, 32);\n  }\n  /**\n   *  Return a new ``uint40`` type for %%v%%.\n   */\n  static uint40(e) {\n    return C(e, 40);\n  }\n  /**\n   *  Return a new ``uint48`` type for %%v%%.\n   */\n  static uint48(e) {\n    return C(e, 48);\n  }\n  /**\n   *  Return a new ``uint56`` type for %%v%%.\n   */\n  static uint56(e) {\n    return C(e, 56);\n  }\n  /**\n   *  Return a new ``uint64`` type for %%v%%.\n   */\n  static uint64(e) {\n    return C(e, 64);\n  }\n  /**\n   *  Return a new ``uint72`` type for %%v%%.\n   */\n  static uint72(e) {\n    return C(e, 72);\n  }\n  /**\n   *  Return a new ``uint80`` type for %%v%%.\n   */\n  static uint80(e) {\n    return C(e, 80);\n  }\n  /**\n   *  Return a new ``uint88`` type for %%v%%.\n   */\n  static uint88(e) {\n    return C(e, 88);\n  }\n  /**\n   *  Return a new ``uint96`` type for %%v%%.\n   */\n  static uint96(e) {\n    return C(e, 96);\n  }\n  /**\n   *  Return a new ``uint104`` type for %%v%%.\n   */\n  static uint104(e) {\n    return C(e, 104);\n  }\n  /**\n   *  Return a new ``uint112`` type for %%v%%.\n   */\n  static uint112(e) {\n    return C(e, 112);\n  }\n  /**\n   *  Return a new ``uint120`` type for %%v%%.\n   */\n  static uint120(e) {\n    return C(e, 120);\n  }\n  /**\n   *  Return a new ``uint128`` type for %%v%%.\n   */\n  static uint128(e) {\n    return C(e, 128);\n  }\n  /**\n   *  Return a new ``uint136`` type for %%v%%.\n   */\n  static uint136(e) {\n    return C(e, 136);\n  }\n  /**\n   *  Return a new ``uint144`` type for %%v%%.\n   */\n  static uint144(e) {\n    return C(e, 144);\n  }\n  /**\n   *  Return a new ``uint152`` type for %%v%%.\n   */\n  static uint152(e) {\n    return C(e, 152);\n  }\n  /**\n   *  Return a new ``uint160`` type for %%v%%.\n   */\n  static uint160(e) {\n    return C(e, 160);\n  }\n  /**\n   *  Return a new ``uint168`` type for %%v%%.\n   */\n  static uint168(e) {\n    return C(e, 168);\n  }\n  /**\n   *  Return a new ``uint176`` type for %%v%%.\n   */\n  static uint176(e) {\n    return C(e, 176);\n  }\n  /**\n   *  Return a new ``uint184`` type for %%v%%.\n   */\n  static uint184(e) {\n    return C(e, 184);\n  }\n  /**\n   *  Return a new ``uint192`` type for %%v%%.\n   */\n  static uint192(e) {\n    return C(e, 192);\n  }\n  /**\n   *  Return a new ``uint200`` type for %%v%%.\n   */\n  static uint200(e) {\n    return C(e, 200);\n  }\n  /**\n   *  Return a new ``uint208`` type for %%v%%.\n   */\n  static uint208(e) {\n    return C(e, 208);\n  }\n  /**\n   *  Return a new ``uint216`` type for %%v%%.\n   */\n  static uint216(e) {\n    return C(e, 216);\n  }\n  /**\n   *  Return a new ``uint224`` type for %%v%%.\n   */\n  static uint224(e) {\n    return C(e, 224);\n  }\n  /**\n   *  Return a new ``uint232`` type for %%v%%.\n   */\n  static uint232(e) {\n    return C(e, 232);\n  }\n  /**\n   *  Return a new ``uint240`` type for %%v%%.\n   */\n  static uint240(e) {\n    return C(e, 240);\n  }\n  /**\n   *  Return a new ``uint248`` type for %%v%%.\n   */\n  static uint248(e) {\n    return C(e, 248);\n  }\n  /**\n   *  Return a new ``uint256`` type for %%v%%.\n   */\n  static uint256(e) {\n    return C(e, 256);\n  }\n  /**\n   *  Return a new ``uint256`` type for %%v%%.\n   */\n  static uint(e) {\n    return C(e, 256);\n  }\n  /**\n   *  Return a new ``int8`` type for %%v%%.\n   */\n  static int8(e) {\n    return C(e, -8);\n  }\n  /**\n   *  Return a new ``int16`` type for %%v%%.\n   */\n  static int16(e) {\n    return C(e, -16);\n  }\n  /**\n   *  Return a new ``int24`` type for %%v%%.\n   */\n  static int24(e) {\n    return C(e, -24);\n  }\n  /**\n   *  Return a new ``int32`` type for %%v%%.\n   */\n  static int32(e) {\n    return C(e, -32);\n  }\n  /**\n   *  Return a new ``int40`` type for %%v%%.\n   */\n  static int40(e) {\n    return C(e, -40);\n  }\n  /**\n   *  Return a new ``int48`` type for %%v%%.\n   */\n  static int48(e) {\n    return C(e, -48);\n  }\n  /**\n   *  Return a new ``int56`` type for %%v%%.\n   */\n  static int56(e) {\n    return C(e, -56);\n  }\n  /**\n   *  Return a new ``int64`` type for %%v%%.\n   */\n  static int64(e) {\n    return C(e, -64);\n  }\n  /**\n   *  Return a new ``int72`` type for %%v%%.\n   */\n  static int72(e) {\n    return C(e, -72);\n  }\n  /**\n   *  Return a new ``int80`` type for %%v%%.\n   */\n  static int80(e) {\n    return C(e, -80);\n  }\n  /**\n   *  Return a new ``int88`` type for %%v%%.\n   */\n  static int88(e) {\n    return C(e, -88);\n  }\n  /**\n   *  Return a new ``int96`` type for %%v%%.\n   */\n  static int96(e) {\n    return C(e, -96);\n  }\n  /**\n   *  Return a new ``int104`` type for %%v%%.\n   */\n  static int104(e) {\n    return C(e, -104);\n  }\n  /**\n   *  Return a new ``int112`` type for %%v%%.\n   */\n  static int112(e) {\n    return C(e, -112);\n  }\n  /**\n   *  Return a new ``int120`` type for %%v%%.\n   */\n  static int120(e) {\n    return C(e, -120);\n  }\n  /**\n   *  Return a new ``int128`` type for %%v%%.\n   */\n  static int128(e) {\n    return C(e, -128);\n  }\n  /**\n   *  Return a new ``int136`` type for %%v%%.\n   */\n  static int136(e) {\n    return C(e, -136);\n  }\n  /**\n   *  Return a new ``int144`` type for %%v%%.\n   */\n  static int144(e) {\n    return C(e, -144);\n  }\n  /**\n   *  Return a new ``int52`` type for %%v%%.\n   */\n  static int152(e) {\n    return C(e, -152);\n  }\n  /**\n   *  Return a new ``int160`` type for %%v%%.\n   */\n  static int160(e) {\n    return C(e, -160);\n  }\n  /**\n   *  Return a new ``int168`` type for %%v%%.\n   */\n  static int168(e) {\n    return C(e, -168);\n  }\n  /**\n   *  Return a new ``int176`` type for %%v%%.\n   */\n  static int176(e) {\n    return C(e, -176);\n  }\n  /**\n   *  Return a new ``int184`` type for %%v%%.\n   */\n  static int184(e) {\n    return C(e, -184);\n  }\n  /**\n   *  Return a new ``int92`` type for %%v%%.\n   */\n  static int192(e) {\n    return C(e, -192);\n  }\n  /**\n   *  Return a new ``int200`` type for %%v%%.\n   */\n  static int200(e) {\n    return C(e, -200);\n  }\n  /**\n   *  Return a new ``int208`` type for %%v%%.\n   */\n  static int208(e) {\n    return C(e, -208);\n  }\n  /**\n   *  Return a new ``int216`` type for %%v%%.\n   */\n  static int216(e) {\n    return C(e, -216);\n  }\n  /**\n   *  Return a new ``int224`` type for %%v%%.\n   */\n  static int224(e) {\n    return C(e, -224);\n  }\n  /**\n   *  Return a new ``int232`` type for %%v%%.\n   */\n  static int232(e) {\n    return C(e, -232);\n  }\n  /**\n   *  Return a new ``int240`` type for %%v%%.\n   */\n  static int240(e) {\n    return C(e, -240);\n  }\n  /**\n   *  Return a new ``int248`` type for %%v%%.\n   */\n  static int248(e) {\n    return C(e, -248);\n  }\n  /**\n   *  Return a new ``int256`` type for %%v%%.\n   */\n  static int256(e) {\n    return C(e, -256);\n  }\n  /**\n   *  Return a new ``int256`` type for %%v%%.\n   */\n  static int(e) {\n    return C(e, -256);\n  }\n  /**\n   *  Return a new ``bytes1`` type for %%v%%.\n   */\n  static bytes1(e) {\n    return te(e, 1);\n  }\n  /**\n   *  Return a new ``bytes2`` type for %%v%%.\n   */\n  static bytes2(e) {\n    return te(e, 2);\n  }\n  /**\n   *  Return a new ``bytes3`` type for %%v%%.\n   */\n  static bytes3(e) {\n    return te(e, 3);\n  }\n  /**\n   *  Return a new ``bytes4`` type for %%v%%.\n   */\n  static bytes4(e) {\n    return te(e, 4);\n  }\n  /**\n   *  Return a new ``bytes5`` type for %%v%%.\n   */\n  static bytes5(e) {\n    return te(e, 5);\n  }\n  /**\n   *  Return a new ``bytes6`` type for %%v%%.\n   */\n  static bytes6(e) {\n    return te(e, 6);\n  }\n  /**\n   *  Return a new ``bytes7`` type for %%v%%.\n   */\n  static bytes7(e) {\n    return te(e, 7);\n  }\n  /**\n   *  Return a new ``bytes8`` type for %%v%%.\n   */\n  static bytes8(e) {\n    return te(e, 8);\n  }\n  /**\n   *  Return a new ``bytes9`` type for %%v%%.\n   */\n  static bytes9(e) {\n    return te(e, 9);\n  }\n  /**\n   *  Return a new ``bytes10`` type for %%v%%.\n   */\n  static bytes10(e) {\n    return te(e, 10);\n  }\n  /**\n   *  Return a new ``bytes11`` type for %%v%%.\n   */\n  static bytes11(e) {\n    return te(e, 11);\n  }\n  /**\n   *  Return a new ``bytes12`` type for %%v%%.\n   */\n  static bytes12(e) {\n    return te(e, 12);\n  }\n  /**\n   *  Return a new ``bytes13`` type for %%v%%.\n   */\n  static bytes13(e) {\n    return te(e, 13);\n  }\n  /**\n   *  Return a new ``bytes14`` type for %%v%%.\n   */\n  static bytes14(e) {\n    return te(e, 14);\n  }\n  /**\n   *  Return a new ``bytes15`` type for %%v%%.\n   */\n  static bytes15(e) {\n    return te(e, 15);\n  }\n  /**\n   *  Return a new ``bytes16`` type for %%v%%.\n   */\n  static bytes16(e) {\n    return te(e, 16);\n  }\n  /**\n   *  Return a new ``bytes17`` type for %%v%%.\n   */\n  static bytes17(e) {\n    return te(e, 17);\n  }\n  /**\n   *  Return a new ``bytes18`` type for %%v%%.\n   */\n  static bytes18(e) {\n    return te(e, 18);\n  }\n  /**\n   *  Return a new ``bytes19`` type for %%v%%.\n   */\n  static bytes19(e) {\n    return te(e, 19);\n  }\n  /**\n   *  Return a new ``bytes20`` type for %%v%%.\n   */\n  static bytes20(e) {\n    return te(e, 20);\n  }\n  /**\n   *  Return a new ``bytes21`` type for %%v%%.\n   */\n  static bytes21(e) {\n    return te(e, 21);\n  }\n  /**\n   *  Return a new ``bytes22`` type for %%v%%.\n   */\n  static bytes22(e) {\n    return te(e, 22);\n  }\n  /**\n   *  Return a new ``bytes23`` type for %%v%%.\n   */\n  static bytes23(e) {\n    return te(e, 23);\n  }\n  /**\n   *  Return a new ``bytes24`` type for %%v%%.\n   */\n  static bytes24(e) {\n    return te(e, 24);\n  }\n  /**\n   *  Return a new ``bytes25`` type for %%v%%.\n   */\n  static bytes25(e) {\n    return te(e, 25);\n  }\n  /**\n   *  Return a new ``bytes26`` type for %%v%%.\n   */\n  static bytes26(e) {\n    return te(e, 26);\n  }\n  /**\n   *  Return a new ``bytes27`` type for %%v%%.\n   */\n  static bytes27(e) {\n    return te(e, 27);\n  }\n  /**\n   *  Return a new ``bytes28`` type for %%v%%.\n   */\n  static bytes28(e) {\n    return te(e, 28);\n  }\n  /**\n   *  Return a new ``bytes29`` type for %%v%%.\n   */\n  static bytes29(e) {\n    return te(e, 29);\n  }\n  /**\n   *  Return a new ``bytes30`` type for %%v%%.\n   */\n  static bytes30(e) {\n    return te(e, 30);\n  }\n  /**\n   *  Return a new ``bytes31`` type for %%v%%.\n   */\n  static bytes31(e) {\n    return te(e, 31);\n  }\n  /**\n   *  Return a new ``bytes32`` type for %%v%%.\n   */\n  static bytes32(e) {\n    return te(e, 32);\n  }\n  /**\n   *  Return a new ``address`` type for %%v%%.\n   */\n  static address(e) {\n    return new r(kt, \"address\", e);\n  }\n  /**\n   *  Return a new ``bool`` type for %%v%%.\n   */\n  static bool(e) {\n    return new r(kt, \"bool\", !!e);\n  }\n  /**\n   *  Return a new ``bytes`` type for %%v%%.\n   */\n  static bytes(e) {\n    return new r(kt, \"bytes\", e);\n  }\n  /**\n   *  Return a new ``string`` type for %%v%%.\n   */\n  static string(e) {\n    return new r(kt, \"string\", e);\n  }\n  /**\n   *  Return a new ``array`` type for %%v%%, allowing %%dynamic%% length.\n   */\n  static array(e, t) {\n    throw new Error(\"not implemented yet\");\n  }\n  /**\n   *  Return a new ``tuple`` type for %%v%%, with the optional %%name%%.\n   */\n  static tuple(e, t) {\n    throw new Error(\"not implemented yet\");\n  }\n  /**\n   *  Return a new ``uint8`` type for %%v%%.\n   */\n  static overrides(e) {\n    return new r(kt, \"overrides\", Object.assign({}, e));\n  }\n  /**\n   *  Returns true only if %%value%% is a [[Typed]] instance.\n   */\n  static isTyped(e) {\n    return e && typeof e == \"object\" && \"_typedSymbol\" in e && e._typedSymbol === Sf;\n  }\n  /**\n   *  If the value is a [[Typed]] instance, validates the underlying value\n   *  and returns it, otherwise returns value directly.\n   *\n   *  This is useful for functions that with to accept either a [[Typed]]\n   *  object or values.\n   */\n  static dereference(e, t) {\n    if (r.isTyped(e)) {\n      if (e.type !== t)\n        throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);\n      return e.value;\n    }\n    return e;\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/address.js\nvar zi = class extends Ee {\n  static {\n    a(this, \"AddressCoder\");\n  }\n  constructor(e) {\n    super(\"address\", \"address\", e, !1);\n  }\n  defaultValue() {\n    return \"0x0000000000000000000000000000000000000000\";\n  }\n  encode(e, t) {\n    let n = se.dereference(t, \"string\");\n    try {\n      n = U(n);\n    } catch (s) {\n      return this._throwError(s.message, t);\n    }\n    return e.writeValue(n);\n  }\n  decode(e) {\n    return U(Be(e.readValue(), 20));\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/anonymous.js\nvar Vi = class extends Ee {\n  static {\n    a(this, \"AnonymousCoder\");\n  }\n  coder;\n  constructor(e) {\n    super(e.name, e.type, \"_\", e.dynamic), this.coder = e;\n  }\n  defaultValue() {\n    return this.coder.defaultValue();\n  }\n  encode(e, t) {\n    return this.coder.encode(e, t);\n  }\n  decode(e) {\n    return this.coder.decode(e);\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/array.js\nfunction Ia(r, e, t) {\n  let n = [];\n  if (Array.isArray(t))\n    n = t;\n  else if (t && typeof t == \"object\") {\n    let f = {};\n    n = e.map((l) => {\n      let u = l.localName;\n      return b(u, \"cannot encode object for signature with missing names\", \"INVALID_ARGUMENT\", { argument: \"values\", info: { coder: l }, value: t }), b(!f[u], \"cannot encode object for signature with duplicate names\", \"INVALID_ARGUMENT\", { argument: \"values\", info: { coder: l }, value: t }), f[u] = !0, t[u];\n    });\n  } else\n    h(!1, \"invalid tuple value\", \"tuple\", t);\n  h(e.length === n.length, \"types/value length mismatch\", \"tuple\", t);\n  let s = new jr(), i = new jr(), o = [];\n  e.forEach((f, l) => {\n    let u = n[l];\n    if (f.dynamic) {\n      let d = i.length;\n      f.encode(i, u);\n      let x = s.writeUpdatableValue();\n      o.push((p) => {\n        x(p + d);\n      });\n    } else\n      f.encode(s, u);\n  }), o.forEach((f) => {\n    f(s.length);\n  });\n  let c = r.appendWriter(s);\n  return c += r.appendWriter(i), c;\n}\na(Ia, \"pack\");\nfunction Ca(r, e) {\n  let t = [], n = [], s = r.subReader(0);\n  return e.forEach((i) => {\n    let o = null;\n    if (i.dynamic) {\n      let c = r.readIndex(), f = s.subReader(c);\n      try {\n        o = i.decode(f);\n      } catch (l) {\n        if ($(l, \"BUFFER_OVERRUN\"))\n          throw l;\n        o = l, o.baseType = i.name, o.name = i.localName, o.type = i.type;\n      }\n    } else\n      try {\n        o = i.decode(r);\n      } catch (c) {\n        if ($(c, \"BUFFER_OVERRUN\"))\n          throw c;\n        o = c, o.baseType = i.name, o.name = i.localName, o.type = i.type;\n      }\n    if (o == null)\n      throw new Error(\"investigate\");\n    t.push(o), n.push(i.localName || null);\n  }), mt.fromItems(t, n);\n}\na(Ca, \"unpack\");\nvar Ki = class extends Ee {\n  static {\n    a(this, \"ArrayCoder\");\n  }\n  coder;\n  length;\n  constructor(e, t, n) {\n    let s = e.type + \"[\" + (t >= 0 ? t : \"\") + \"]\", i = t === -1 || e.dynamic;\n    super(\"array\", s, n, i), P(this, { coder: e, length: t });\n  }\n  defaultValue() {\n    let e = this.coder.defaultValue(), t = [];\n    for (let n = 0; n < this.length; n++)\n      t.push(e);\n    return t;\n  }\n  encode(e, t) {\n    let n = se.dereference(t, \"array\");\n    Array.isArray(n) || this._throwError(\"expected array value\", n);\n    let s = this.length;\n    s === -1 && (s = n.length, e.writeValue(n.length)), zr(n.length, s, \"coder array\" + (this.localName ? \" \" + this.localName : \"\"));\n    let i = [];\n    for (let o = 0; o < n.length; o++)\n      i.push(this.coder);\n    return Ia(e, i, n);\n  }\n  decode(e) {\n    let t = this.length;\n    t === -1 && (t = e.readIndex(), b(t * Te <= e.dataLength, \"insufficient data length\", \"BUFFER_OVERRUN\", { buffer: e.bytes, offset: t * Te, length: e.dataLength }));\n    let n = [];\n    for (let s = 0; s < t; s++)\n      n.push(new Vi(this.coder));\n    return Ca(e, n);\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/boolean.js\nvar Qi = class extends Ee {\n  static {\n    a(this, \"BooleanCoder\");\n  }\n  constructor(e) {\n    super(\"bool\", \"bool\", e, !1);\n  }\n  defaultValue() {\n    return !1;\n  }\n  encode(e, t) {\n    let n = se.dereference(t, \"bool\");\n    return e.writeValue(n ? 1 : 0);\n  }\n  decode(e) {\n    return !!e.readValue();\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/bytes.js\nvar Ls = class extends Ee {\n  static {\n    a(this, \"DynamicBytesCoder\");\n  }\n  constructor(e, t) {\n    super(e, e, t, !0);\n  }\n  defaultValue() {\n    return \"0x\";\n  }\n  encode(e, t) {\n    t = fe(t);\n    let n = e.writeValue(t.length);\n    return n += e.writeBytes(t), n;\n  }\n  decode(e) {\n    return e.readBytes(e.readIndex(), !0);\n  }\n}, Ji = class extends Ls {\n  static {\n    a(this, \"BytesCoder\");\n  }\n  constructor(e) {\n    super(\"bytes\", e);\n  }\n  decode(e) {\n    return w(super.decode(e));\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/fixed-bytes.js\nvar Wi = class extends Ee {\n  static {\n    a(this, \"FixedBytesCoder\");\n  }\n  size;\n  constructor(e, t) {\n    let n = \"bytes\" + String(e);\n    super(n, n, t, !1), P(this, { size: e }, { size: \"number\" });\n  }\n  defaultValue() {\n    return \"0x0000000000000000000000000000000000000000000000000000000000000000\".substring(0, 2 + this.size * 2);\n  }\n  encode(e, t) {\n    let n = fe(se.dereference(t, this.type));\n    return n.length !== this.size && this._throwError(\"incorrect data length\", t), e.writeBytes(n);\n  }\n  decode(e) {\n    return w(e.readBytes(this.size));\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/null.js\nvar lh = new Uint8Array([]), ji = class extends Ee {\n  static {\n    a(this, \"NullCoder\");\n  }\n  constructor(e) {\n    super(\"null\", \"\", e, !1);\n  }\n  defaultValue() {\n    return null;\n  }\n  encode(e, t) {\n    return t != null && this._throwError(\"not null\", t), e.writeBytes(lh);\n  }\n  decode(e) {\n    return e.readBytes(0), null;\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/number.js\nvar uh = BigInt(0), dh = BigInt(1), hh = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"), Zi = class extends Ee {\n  static {\n    a(this, \"NumberCoder\");\n  }\n  size;\n  signed;\n  constructor(e, t, n) {\n    let s = (t ? \"int\" : \"uint\") + e * 8;\n    super(s, s, n, !1), P(this, { size: e, signed: t }, { size: \"number\", signed: \"boolean\" });\n  }\n  defaultValue() {\n    return 0;\n  }\n  encode(e, t) {\n    let n = k(se.dereference(t, this.type)), s = Ze(hh, Te * 8);\n    if (this.signed) {\n      let i = Ze(s, this.size * 8 - 1);\n      (n > i || n < -(i + dh)) && this._throwError(\"value out-of-bounds\", t), n = Kt(n, 8 * Te);\n    } else (n < uh || n > Ze(s, this.size * 8)) && this._throwError(\"value out-of-bounds\", t);\n    return e.writeValue(n);\n  }\n  decode(e) {\n    let t = Ze(e.readValue(), this.size * 8);\n    return this.signed && (t = Vt(t, this.size * 8)), t;\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/string.js\nvar qi = class extends Ls {\n  static {\n    a(this, \"StringCoder\");\n  }\n  constructor(e) {\n    super(\"string\", e);\n  }\n  defaultValue() {\n    return \"\";\n  }\n  encode(e, t) {\n    return super.encode(e, re(se.dereference(t, \"string\")));\n  }\n  decode(e) {\n    return He(super.decode(e));\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/coders/tuple.js\nvar rn = class extends Ee {\n  static {\n    a(this, \"TupleCoder\");\n  }\n  coders;\n  constructor(e, t) {\n    let n = !1, s = [];\n    e.forEach((o) => {\n      o.dynamic && (n = !0), s.push(o.type);\n    });\n    let i = \"tuple(\" + s.join(\",\") + \")\";\n    super(\"tuple\", i, t, n), P(this, { coders: Object.freeze(e.slice()) });\n  }\n  defaultValue() {\n    let e = [];\n    this.coders.forEach((n) => {\n      e.push(n.defaultValue());\n    });\n    let t = this.coders.reduce((n, s) => {\n      let i = s.localName;\n      return i && (n[i] || (n[i] = 0), n[i]++), n;\n    }, {});\n    return this.coders.forEach((n, s) => {\n      let i = n.localName;\n      !i || t[i] !== 1 || (i === \"length\" && (i = \"_length\"), e[i] == null && (e[i] = e[s]));\n    }), Object.freeze(e);\n  }\n  encode(e, t) {\n    let n = se.dereference(t, \"tuple\");\n    return Ia(e, this.coders, n);\n  }\n  decode(e) {\n    return Ca(e, this.coders);\n  }\n};\n\n// node_modules/ethers/lib.esm/transaction/accesslist.js\nfunction Oa(r, e) {\n  return {\n    address: U(r),\n    storageKeys: e.map((t, n) => (h(z(t, 32), \"invalid slot\", `storageKeys[${n}]`, t), t.toLowerCase()))\n  };\n}\na(Oa, \"accessSetify\");\nfunction Ce(r) {\n  if (Array.isArray(r))\n    return r.map((t, n) => Array.isArray(t) ? (h(t.length === 2, \"invalid slot set\", `value[${n}]`, t), Oa(t[0], t[1])) : (h(t != null && typeof t == \"object\", \"invalid address-slot set\", \"value\", r), Oa(t.address, t.storageKeys)));\n  h(r != null && typeof r == \"object\", \"invalid access list\", \"value\", r);\n  let e = Object.keys(r).map((t) => {\n    let n = r[t].reduce((s, i) => (s[i] = !0, s), {});\n    return Oa(t, Object.keys(n).sort());\n  });\n  return e.sort((t, n) => t.address.localeCompare(n.address)), e;\n}\na(Ce, \"accessListify\");\n\n// node_modules/ethers/lib.esm/transaction/authorization.js\nfunction nn(r) {\n  return {\n    address: U(r.address),\n    nonce: k(r.nonce != null ? r.nonce : 0),\n    chainId: k(r.chainId != null ? r.chainId : 0),\n    signature: we.from(r.signature)\n  };\n}\na(nn, \"authorizationify\");\n\n// node_modules/ethers/lib.esm/transaction/address.js\nfunction Nt(r) {\n  let e;\n  return typeof r == \"string\" ? e = Ie.computePublicKey(r, !1) : e = r.publicKey, U(G(\"0x\" + e.substring(4)).substring(26));\n}\na(Nt, \"computeAddress\");\nfunction Bt(r, e) {\n  return Nt(Ie.recoverPublicKey(r, e));\n}\na(Bt, \"recoverAddress\");\n\n// node_modules/ethers/lib.esm/transaction/transaction.js\nvar Re = BigInt(0), xh = BigInt(2), ph = BigInt(27), mh = BigInt(28), bh = BigInt(35), gh = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"), Sa = 4096 * 32;\nfunction yh(r) {\n  return { blobToKzgCommitment: /* @__PURE__ */ a((n) => {\n    if (\"computeBlobProof\" in r) {\n      if (\"blobToKzgCommitment\" in r && typeof r.blobToKzgCommitment == \"function\")\n        return E(r.blobToKzgCommitment(w(n)));\n    } else if (\"blobToKzgCommitment\" in r && typeof r.blobToKzgCommitment == \"function\")\n      return E(r.blobToKzgCommitment(n));\n    if (\"blobToKZGCommitment\" in r && typeof r.blobToKZGCommitment == \"function\")\n      return E(r.blobToKZGCommitment(w(n)));\n    h(!1, \"unsupported KZG library\", \"kzg\", r);\n  }, \"blobToKzgCommitment\"), computeBlobKzgProof: /* @__PURE__ */ a((n, s) => {\n    if (\"computeBlobProof\" in r && typeof r.computeBlobProof == \"function\")\n      return E(r.computeBlobProof(w(n), w(s)));\n    if (\"computeBlobKzgProof\" in r && typeof r.computeBlobKzgProof == \"function\")\n      return r.computeBlobKzgProof(n, s);\n    if (\"computeBlobKZGProof\" in r && typeof r.computeBlobKZGProof == \"function\")\n      return E(r.computeBlobKZGProof(w(n), w(s)));\n    h(!1, \"unsupported KZG library\", \"kzg\", r);\n  }, \"computeBlobKzgProof\") };\n}\na(yh, \"getKzgLibrary\");\nfunction Uf(r, e) {\n  let t = r.toString(16);\n  for (; t.length < 2; )\n    t = \"0\" + t;\n  return t += ye(e).substring(4), \"0x\" + t;\n}\na(Uf, \"getVersionedHash\");\nfunction Zn(r) {\n  return r === \"0x\" ? null : U(r);\n}\na(Zn, \"handleAddress\");\nfunction Yi(r, e) {\n  try {\n    return Ce(r);\n  } catch (t) {\n    h(!1, t.message, e, r);\n  }\n}\na(Yi, \"handleAccessList\");\nfunction wh(r, e) {\n  try {\n    if (!Array.isArray(r))\n      throw new Error(\"authorizationList: invalid array\");\n    let t = [];\n    for (let n = 0; n < r.length; n++) {\n      let s = r[n];\n      if (!Array.isArray(s))\n        throw new Error(`authorization[${n}]: invalid array`);\n      if (s.length !== 6)\n        throw new Error(`authorization[${n}]: wrong length`);\n      if (!s[1])\n        throw new Error(`authorization[${n}]: null address`);\n      t.push({\n        address: Zn(s[1]),\n        nonce: ie(s[2], \"nonce\"),\n        chainId: ie(s[0], \"chainId\"),\n        signature: we.from({\n          yParity: sn(s[3], \"yParity\"),\n          r: ge(s[4], 32),\n          s: ge(s[5], 32)\n        })\n      });\n    }\n    return t;\n  } catch (t) {\n    h(!1, t.message, e, r);\n  }\n}\na(wh, \"handleAuthorizationList\");\nfunction sn(r, e) {\n  return r === \"0x\" ? 0 : S(r, e);\n}\na(sn, \"handleNumber\");\nfunction ie(r, e) {\n  if (r === \"0x\")\n    return Re;\n  let t = k(r, e);\n  return h(t <= gh, \"value exceeds uint size\", e, t), t;\n}\na(ie, \"handleUint\");\nfunction j(r, e) {\n  let t = k(r, \"value\"), n = X(t);\n  return h(n.length <= 32, \"value too large\", `tx.${e}`, t), n;\n}\na(j, \"formatNumber\");\nfunction Xi(r) {\n  return Ce(r).map((e) => [e.address, e.storageKeys]);\n}\na(Xi, \"formatAccessList\");\nfunction Ah(r) {\n  return r.map((e) => [\n    j(e.chainId, \"chainId\"),\n    e.address,\n    j(e.nonce, \"nonce\"),\n    j(e.signature.yParity, \"yParity\"),\n    X(e.signature.r),\n    X(e.signature.s)\n  ]);\n}\na(Ah, \"formatAuthorizationList\");\nfunction Eh(r, e) {\n  h(Array.isArray(r), `invalid ${e}`, \"value\", r);\n  for (let t = 0; t < r.length; t++)\n    h(z(r[t], 32), \"invalid ${ param } hash\", `value[${t}]`, r[t]);\n  return r;\n}\na(Eh, \"formatHashes\");\nfunction Ph(r) {\n  let e = Jt(r);\n  h(Array.isArray(e) && (e.length === 9 || e.length === 6), \"invalid field count for legacy transaction\", \"data\", r);\n  let t = {\n    type: 0,\n    nonce: sn(e[0], \"nonce\"),\n    gasPrice: ie(e[1], \"gasPrice\"),\n    gasLimit: ie(e[2], \"gasLimit\"),\n    to: Zn(e[3]),\n    value: ie(e[4], \"value\"),\n    data: w(e[5]),\n    chainId: Re\n  };\n  if (e.length === 6)\n    return t;\n  let n = ie(e[6], \"v\"), s = ie(e[7], \"r\"), i = ie(e[8], \"s\");\n  if (s === Re && i === Re)\n    t.chainId = n;\n  else {\n    let o = (n - bh) / xh;\n    o < Re && (o = Re), t.chainId = o, h(o !== Re || n === ph || n === mh, \"non-canonical legacy v\", \"v\", e[6]), t.signature = we.from({\n      r: ge(e[7], 32),\n      s: ge(e[8], 32),\n      v: n\n    });\n  }\n  return t;\n}\na(Ph, \"_parseLegacy\");\nfunction kh(r, e) {\n  let t = [\n    j(r.nonce, \"nonce\"),\n    j(r.gasPrice || 0, \"gasPrice\"),\n    j(r.gasLimit, \"gasLimit\"),\n    r.to || \"0x\",\n    j(r.value, \"value\"),\n    r.data\n  ], n = Re;\n  if (r.chainId != Re)\n    n = k(r.chainId, \"tx.chainId\"), h(!e || e.networkV == null || e.legacyChainId === n, \"tx.chainId/sig.v mismatch\", \"sig\", e);\n  else if (r.signature) {\n    let i = r.signature.legacyChainId;\n    i != null && (n = i);\n  }\n  if (!e)\n    return n !== Re && (t.push(X(n)), t.push(\"0x\"), t.push(\"0x\")), _e(t);\n  let s = BigInt(27 + e.yParity);\n  return n !== Re ? s = we.getChainIdV(n, e.v) : BigInt(e.v) !== s && h(!1, \"tx.chainId/sig.v mismatch\", \"sig\", e), t.push(X(s)), t.push(X(e.r)), t.push(X(e.s)), _e(t);\n}\na(kh, \"_serializeLegacy\");\nfunction $i(r, e) {\n  let t;\n  try {\n    if (t = sn(e[0], \"yParity\"), t !== 0 && t !== 1)\n      throw new Error(\"bad yParity\");\n  } catch {\n    h(!1, \"invalid yParity\", \"yParity\", e[0]);\n  }\n  let n = ge(e[1], 32), s = ge(e[2], 32), i = we.from({ r: n, s, yParity: t });\n  r.signature = i;\n}\na($i, \"_parseEipSignature\");\nfunction Nh(r) {\n  let e = Jt(E(r).slice(1));\n  h(Array.isArray(e) && (e.length === 9 || e.length === 12), \"invalid field count for transaction type: 2\", \"data\", w(r));\n  let t = {\n    type: 2,\n    chainId: ie(e[0], \"chainId\"),\n    nonce: sn(e[1], \"nonce\"),\n    maxPriorityFeePerGas: ie(e[2], \"maxPriorityFeePerGas\"),\n    maxFeePerGas: ie(e[3], \"maxFeePerGas\"),\n    gasPrice: null,\n    gasLimit: ie(e[4], \"gasLimit\"),\n    to: Zn(e[5]),\n    value: ie(e[6], \"value\"),\n    data: w(e[7]),\n    accessList: Yi(e[8], \"accessList\")\n  };\n  return e.length === 9 || $i(t, e.slice(9)), t;\n}\na(Nh, \"_parseEip1559\");\nfunction Bh(r, e) {\n  let t = [\n    j(r.chainId, \"chainId\"),\n    j(r.nonce, \"nonce\"),\n    j(r.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n    j(r.maxFeePerGas || 0, \"maxFeePerGas\"),\n    j(r.gasLimit, \"gasLimit\"),\n    r.to || \"0x\",\n    j(r.value, \"value\"),\n    r.data,\n    Xi(r.accessList || [])\n  ];\n  return e && (t.push(j(e.yParity, \"yParity\")), t.push(X(e.r)), t.push(X(e.s))), F([\"0x02\", _e(t)]);\n}\na(Bh, \"_serializeEip1559\");\nfunction Rh(r) {\n  let e = Jt(E(r).slice(1));\n  h(Array.isArray(e) && (e.length === 8 || e.length === 11), \"invalid field count for transaction type: 1\", \"data\", w(r));\n  let t = {\n    type: 1,\n    chainId: ie(e[0], \"chainId\"),\n    nonce: sn(e[1], \"nonce\"),\n    gasPrice: ie(e[2], \"gasPrice\"),\n    gasLimit: ie(e[3], \"gasLimit\"),\n    to: Zn(e[4]),\n    value: ie(e[5], \"value\"),\n    data: w(e[6]),\n    accessList: Yi(e[7], \"accessList\")\n  };\n  return e.length === 8 || $i(t, e.slice(8)), t;\n}\na(Rh, \"_parseEip2930\");\nfunction vh(r, e) {\n  let t = [\n    j(r.chainId, \"chainId\"),\n    j(r.nonce, \"nonce\"),\n    j(r.gasPrice || 0, \"gasPrice\"),\n    j(r.gasLimit, \"gasLimit\"),\n    r.to || \"0x\",\n    j(r.value, \"value\"),\n    r.data,\n    Xi(r.accessList || [])\n  ];\n  return e && (t.push(j(e.yParity, \"recoveryParam\")), t.push(X(e.r)), t.push(X(e.s))), F([\"0x01\", _e(t)]);\n}\na(vh, \"_serializeEip2930\");\nfunction Th(r) {\n  let e = Jt(E(r).slice(1)), t = \"3\", n = null;\n  if (e.length === 4 && Array.isArray(e[0])) {\n    t = \"3 (network format)\";\n    let i = e[1], o = e[2], c = e[3];\n    h(Array.isArray(i), \"invalid network format: blobs not an array\", \"fields[1]\", i), h(Array.isArray(o), \"invalid network format: commitments not an array\", \"fields[2]\", o), h(Array.isArray(c), \"invalid network format: proofs not an array\", \"fields[3]\", c), h(i.length === o.length, \"invalid network format: blobs/commitments length mismatch\", \"fields\", e), h(i.length === c.length, \"invalid network format: blobs/proofs length mismatch\", \"fields\", e), n = [];\n    for (let f = 0; f < e[1].length; f++)\n      n.push({\n        data: i[f],\n        commitment: o[f],\n        proof: c[f]\n      });\n    e = e[0];\n  }\n  h(Array.isArray(e) && (e.length === 11 || e.length === 14), `invalid field count for transaction type: ${t}`, \"data\", w(r));\n  let s = {\n    type: 3,\n    chainId: ie(e[0], \"chainId\"),\n    nonce: sn(e[1], \"nonce\"),\n    maxPriorityFeePerGas: ie(e[2], \"maxPriorityFeePerGas\"),\n    maxFeePerGas: ie(e[3], \"maxFeePerGas\"),\n    gasPrice: null,\n    gasLimit: ie(e[4], \"gasLimit\"),\n    to: Zn(e[5]),\n    value: ie(e[6], \"value\"),\n    data: w(e[7]),\n    accessList: Yi(e[8], \"accessList\"),\n    maxFeePerBlobGas: ie(e[9], \"maxFeePerBlobGas\"),\n    blobVersionedHashes: e[10]\n  };\n  n && (s.blobs = n), h(s.to != null, `invalid address for transaction type: ${t}`, \"data\", r), h(Array.isArray(s.blobVersionedHashes), \"invalid blobVersionedHashes: must be an array\", \"data\", r);\n  for (let i = 0; i < s.blobVersionedHashes.length; i++)\n    h(z(s.blobVersionedHashes[i], 32), `invalid blobVersionedHash at index ${i}: must be length 32`, \"data\", r);\n  return e.length === 11 || $i(s, e.slice(11)), s;\n}\na(Th, \"_parseEip4844\");\nfunction Ih(r, e, t) {\n  let n = [\n    j(r.chainId, \"chainId\"),\n    j(r.nonce, \"nonce\"),\n    j(r.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n    j(r.maxFeePerGas || 0, \"maxFeePerGas\"),\n    j(r.gasLimit, \"gasLimit\"),\n    r.to || Pt,\n    j(r.value, \"value\"),\n    r.data,\n    Xi(r.accessList || []),\n    j(r.maxFeePerBlobGas || 0, \"maxFeePerBlobGas\"),\n    Eh(r.blobVersionedHashes || [], \"blobVersionedHashes\")\n  ];\n  return e && (n.push(j(e.yParity, \"yParity\")), n.push(X(e.r)), n.push(X(e.s)), t) ? F([\n    \"0x03\",\n    _e([\n      n,\n      t.map((s) => s.data),\n      t.map((s) => s.commitment),\n      t.map((s) => s.proof)\n    ])\n  ]) : F([\"0x03\", _e(n)]);\n}\na(Ih, \"_serializeEip4844\");\nfunction Ch(r) {\n  let e = Jt(E(r).slice(1));\n  h(Array.isArray(e) && (e.length === 10 || e.length === 13), \"invalid field count for transaction type: 4\", \"data\", w(r));\n  let t = {\n    type: 4,\n    chainId: ie(e[0], \"chainId\"),\n    nonce: sn(e[1], \"nonce\"),\n    maxPriorityFeePerGas: ie(e[2], \"maxPriorityFeePerGas\"),\n    maxFeePerGas: ie(e[3], \"maxFeePerGas\"),\n    gasPrice: null,\n    gasLimit: ie(e[4], \"gasLimit\"),\n    to: Zn(e[5]),\n    value: ie(e[6], \"value\"),\n    data: w(e[7]),\n    accessList: Yi(e[8], \"accessList\"),\n    authorizationList: wh(e[9], \"authorizationList\")\n  };\n  return e.length === 10 || $i(t, e.slice(10)), t;\n}\na(Ch, \"_parseEip7702\");\nfunction Oh(r, e) {\n  let t = [\n    j(r.chainId, \"chainId\"),\n    j(r.nonce, \"nonce\"),\n    j(r.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n    j(r.maxFeePerGas || 0, \"maxFeePerGas\"),\n    j(r.gasLimit, \"gasLimit\"),\n    r.to || \"0x\",\n    j(r.value, \"value\"),\n    r.data,\n    Xi(r.accessList || []),\n    Ah(r.authorizationList || [])\n  ];\n  return e && (t.push(j(e.yParity, \"yParity\")), t.push(X(e.r)), t.push(X(e.s))), F([\"0x04\", _e(t)]);\n}\na(Oh, \"_serializeEip7702\");\nvar Xe = class r {\n  static {\n    a(this, \"Transaction\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  #s;\n  #o;\n  #i;\n  #a;\n  #u;\n  #f;\n  #x;\n  #p;\n  #c;\n  #l;\n  #d;\n  #h;\n  #b;\n  /**\n   *  The transaction type.\n   *\n   *  If null, the type will be automatically inferred based on\n   *  explicit properties.\n   */\n  get type() {\n    return this.#e;\n  }\n  set type(e) {\n    switch (e) {\n      case null:\n        this.#e = null;\n        break;\n      case 0:\n      case \"legacy\":\n        this.#e = 0;\n        break;\n      case 1:\n      case \"berlin\":\n      case \"eip-2930\":\n        this.#e = 1;\n        break;\n      case 2:\n      case \"london\":\n      case \"eip-1559\":\n        this.#e = 2;\n        break;\n      case 3:\n      case \"cancun\":\n      case \"eip-4844\":\n        this.#e = 3;\n        break;\n      case 4:\n      case \"pectra\":\n      case \"eip-7702\":\n        this.#e = 4;\n        break;\n      default:\n        h(!1, \"unsupported transaction type\", \"type\", e);\n    }\n  }\n  /**\n   *  The name of the transaction type.\n   */\n  get typeName() {\n    switch (this.type) {\n      case 0:\n        return \"legacy\";\n      case 1:\n        return \"eip-2930\";\n      case 2:\n        return \"eip-1559\";\n      case 3:\n        return \"eip-4844\";\n      case 4:\n        return \"eip-7702\";\n    }\n    return null;\n  }\n  /**\n   *  The ``to`` address for the transaction or ``null`` if the\n   *  transaction is an ``init`` transaction.\n   */\n  get to() {\n    let e = this.#t;\n    return e == null && this.type === 3 ? Pt : e;\n  }\n  set to(e) {\n    this.#t = e == null ? null : U(e);\n  }\n  /**\n   *  The transaction nonce.\n   */\n  get nonce() {\n    return this.#n;\n  }\n  set nonce(e) {\n    this.#n = S(e, \"value\");\n  }\n  /**\n   *  The gas limit.\n   */\n  get gasLimit() {\n    return this.#s;\n  }\n  set gasLimit(e) {\n    this.#s = k(e);\n  }\n  /**\n   *  The gas price.\n   *\n   *  On legacy networks this defines the fee that will be paid. On\n   *  EIP-1559 networks, this should be ``null``.\n   */\n  get gasPrice() {\n    let e = this.#o;\n    return e == null && (this.type === 0 || this.type === 1) ? Re : e;\n  }\n  set gasPrice(e) {\n    this.#o = e == null ? null : k(e, \"gasPrice\");\n  }\n  /**\n   *  The maximum priority fee per unit of gas to pay. On legacy\n   *  networks this should be ``null``.\n   */\n  get maxPriorityFeePerGas() {\n    let e = this.#i;\n    return e ?? (this.type === 2 || this.type === 3 ? Re : null);\n  }\n  set maxPriorityFeePerGas(e) {\n    this.#i = e == null ? null : k(e, \"maxPriorityFeePerGas\");\n  }\n  /**\n   *  The maximum total fee per unit of gas to pay. On legacy\n   *  networks this should be ``null``.\n   */\n  get maxFeePerGas() {\n    let e = this.#a;\n    return e ?? (this.type === 2 || this.type === 3 ? Re : null);\n  }\n  set maxFeePerGas(e) {\n    this.#a = e == null ? null : k(e, \"maxFeePerGas\");\n  }\n  /**\n   *  The transaction data. For ``init`` transactions this is the\n   *  deployment code.\n   */\n  get data() {\n    return this.#r;\n  }\n  set data(e) {\n    this.#r = w(e);\n  }\n  /**\n   *  The amount of ether (in wei) to send in this transactions.\n   */\n  get value() {\n    return this.#u;\n  }\n  set value(e) {\n    this.#u = k(e, \"value\");\n  }\n  /**\n   *  The chain ID this transaction is valid on.\n   */\n  get chainId() {\n    return this.#f;\n  }\n  set chainId(e) {\n    this.#f = k(e);\n  }\n  /**\n   *  If signed, the signature for this transaction.\n   */\n  get signature() {\n    return this.#x || null;\n  }\n  set signature(e) {\n    this.#x = e == null ? null : we.from(e);\n  }\n  /**\n   *  The access list.\n   *\n   *  An access list permits discounted (but pre-paid) access to\n   *  bytecode and state variable access within contract execution.\n   */\n  get accessList() {\n    let e = this.#p || null;\n    return e ?? (this.type === 1 || this.type === 2 || this.type === 3 ? [] : null);\n  }\n  set accessList(e) {\n    this.#p = e == null ? null : Ce(e);\n  }\n  get authorizationList() {\n    let e = this.#b || null;\n    return e == null && this.type === 4 ? [] : e;\n  }\n  set authorizationList(e) {\n    this.#b = e == null ? null : e.map((t) => nn(t));\n  }\n  /**\n   *  The max fee per blob gas for Cancun transactions.\n   */\n  get maxFeePerBlobGas() {\n    let e = this.#c;\n    return e == null && this.type === 3 ? Re : e;\n  }\n  set maxFeePerBlobGas(e) {\n    this.#c = e == null ? null : k(e, \"maxFeePerBlobGas\");\n  }\n  /**\n   *  The BLOb versioned hashes for Cancun transactions.\n   */\n  get blobVersionedHashes() {\n    let e = this.#l;\n    return e == null && this.type === 3 ? [] : e;\n  }\n  set blobVersionedHashes(e) {\n    if (e != null) {\n      h(Array.isArray(e), \"blobVersionedHashes must be an Array\", \"value\", e), e = e.slice();\n      for (let t = 0; t < e.length; t++)\n        h(z(e[t], 32), \"invalid blobVersionedHash\", `value[${t}]`, e[t]);\n    }\n    this.#l = e;\n  }\n  /**\n   *  The BLObs for the Transaction, if any.\n   *\n   *  If ``blobs`` is non-``null``, then the [[seriailized]]\n   *  will return the network formatted sidecar, otherwise it\n   *  will return the standard [[link-eip-2718]] payload. The\n   *  [[unsignedSerialized]] is unaffected regardless.\n   *\n   *  When setting ``blobs``, either fully valid [[Blob]] objects\n   *  may be specified (i.e. correctly padded, with correct\n   *  committments and proofs) or a raw [[BytesLike]] may\n   *  be provided.\n   *\n   *  If raw [[BytesLike]] are provided, the [[kzg]] property **must**\n   *  be already set. The blob will be correctly padded and the\n   *  [[KzgLibrary]] will be used to compute the committment and\n   *  proof for the blob.\n   *\n   *  A BLOb is a sequence of field elements, each of which must\n   *  be within the BLS field modulo, so some additional processing\n   *  may be required to encode arbitrary data to ensure each 32 byte\n   *  field is within the valid range.\n   *\n   *  Setting this automatically populates [[blobVersionedHashes]],\n   *  overwriting any existing values. Setting this to ``null``\n   *  does **not** remove the [[blobVersionedHashes]], leaving them\n   *  present.\n   */\n  get blobs() {\n    return this.#h == null ? null : this.#h.map((e) => Object.assign({}, e));\n  }\n  set blobs(e) {\n    if (e == null) {\n      this.#h = null;\n      return;\n    }\n    let t = [], n = [];\n    for (let s = 0; s < e.length; s++) {\n      let i = e[s];\n      if (dt(i)) {\n        b(this.#d, \"adding a raw blob requires a KZG library\", \"UNSUPPORTED_OPERATION\", {\n          operation: \"set blobs()\"\n        });\n        let o = E(i);\n        if (h(o.length <= Sa, \"blob is too large\", `blobs[${s}]`, i), o.length !== Sa) {\n          let l = new Uint8Array(Sa);\n          l.set(o), o = l;\n        }\n        let c = this.#d.blobToKzgCommitment(o), f = w(this.#d.computeBlobKzgProof(o, c));\n        t.push({\n          data: w(o),\n          commitment: w(c),\n          proof: f\n        }), n.push(Uf(1, c));\n      } else {\n        let o = w(i.commitment);\n        t.push({\n          data: w(i.data),\n          commitment: o,\n          proof: w(i.proof)\n        }), n.push(Uf(1, o));\n      }\n    }\n    this.#h = t, this.#l = n;\n  }\n  get kzg() {\n    return this.#d;\n  }\n  set kzg(e) {\n    e == null ? this.#d = null : this.#d = yh(e);\n  }\n  /**\n   *  Creates a new Transaction with default values.\n   */\n  constructor() {\n    this.#e = null, this.#t = null, this.#n = 0, this.#s = Re, this.#o = null, this.#i = null, this.#a = null, this.#r = \"0x\", this.#u = Re, this.#f = Re, this.#x = null, this.#p = null, this.#c = null, this.#l = null, this.#d = null, this.#h = null, this.#b = null;\n  }\n  /**\n   *  The transaction hash, if signed. Otherwise, ``null``.\n   */\n  get hash() {\n    return this.signature == null ? null : G(this.#m(!0, !1));\n  }\n  /**\n   *  The pre-image hash of this transaction.\n   *\n   *  This is the digest that a [[Signer]] must sign to authorize\n   *  this transaction.\n   */\n  get unsignedHash() {\n    return G(this.unsignedSerialized);\n  }\n  /**\n   *  The sending address, if signed. Otherwise, ``null``.\n   */\n  get from() {\n    return this.signature == null ? null : Bt(this.unsignedHash, this.signature);\n  }\n  /**\n   *  The public key of the sender, if signed. Otherwise, ``null``.\n   */\n  get fromPublicKey() {\n    return this.signature == null ? null : Ie.recoverPublicKey(this.unsignedHash, this.signature);\n  }\n  /**\n   *  Returns true if signed.\n   *\n   *  This provides a Type Guard that properties requiring a signed\n   *  transaction are non-null.\n   */\n  isSigned() {\n    return this.signature != null;\n  }\n  #m(e, t) {\n    b(!e || this.signature != null, \"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\" });\n    let n = e ? this.signature : null;\n    switch (this.inferType()) {\n      case 0:\n        return kh(this, n);\n      case 1:\n        return vh(this, n);\n      case 2:\n        return Bh(this, n);\n      case 3:\n        return Ih(this, n, t ? this.blobs : null);\n      case 4:\n        return Oh(this, n);\n    }\n    b(!1, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\" });\n  }\n  /**\n   *  The serialized transaction.\n   *\n   *  This throws if the transaction is unsigned. For the pre-image,\n   *  use [[unsignedSerialized]].\n   */\n  get serialized() {\n    return this.#m(!0, !0);\n  }\n  /**\n   *  The transaction pre-image.\n   *\n   *  The hash of this is the digest which needs to be signed to\n   *  authorize this transaction.\n   */\n  get unsignedSerialized() {\n    return this.#m(!1, !1);\n  }\n  /**\n   *  Return the most \"likely\" type; currently the highest\n   *  supported transaction type.\n   */\n  inferType() {\n    let e = this.inferTypes();\n    return e.indexOf(2) >= 0 ? 2 : e.pop();\n  }\n  /**\n   *  Validates the explicit properties and returns a list of compatible\n   *  transaction types.\n   */\n  inferTypes() {\n    let e = this.gasPrice != null, t = this.maxFeePerGas != null || this.maxPriorityFeePerGas != null, n = this.accessList != null, s = this.#c != null || this.#l;\n    this.maxFeePerGas != null && this.maxPriorityFeePerGas != null && b(this.maxFeePerGas >= this.maxPriorityFeePerGas, \"priorityFee cannot be more than maxFee\", \"BAD_DATA\", { value: this }), b(!t || this.type !== 0 && this.type !== 1, \"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas\", \"BAD_DATA\", { value: this }), b(this.type !== 0 || !n, \"legacy transaction cannot have accessList\", \"BAD_DATA\", { value: this });\n    let i = [];\n    return this.type != null ? i.push(this.type) : this.authorizationList && this.authorizationList.length ? i.push(4) : t ? i.push(2) : e ? (i.push(1), n || i.push(0)) : n ? (i.push(1), i.push(2)) : (s && this.to || (i.push(0), i.push(1), i.push(2)), i.push(3)), i.sort(), i;\n  }\n  /**\n   *  Returns true if this transaction is a legacy transaction (i.e.\n   *  ``type === 0``).\n   *\n   *  This provides a Type Guard that the related properties are\n   *  non-null.\n   */\n  isLegacy() {\n    return this.type === 0;\n  }\n  /**\n   *  Returns true if this transaction is berlin hardform transaction (i.e.\n   *  ``type === 1``).\n   *\n   *  This provides a Type Guard that the related properties are\n   *  non-null.\n   */\n  isBerlin() {\n    return this.type === 1;\n  }\n  /**\n   *  Returns true if this transaction is london hardform transaction (i.e.\n   *  ``type === 2``).\n   *\n   *  This provides a Type Guard that the related properties are\n   *  non-null.\n   */\n  isLondon() {\n    return this.type === 2;\n  }\n  /**\n   *  Returns true if this transaction is an [[link-eip-4844]] BLOB\n   *  transaction.\n   *\n   *  This provides a Type Guard that the related properties are\n   *  non-null.\n   */\n  isCancun() {\n    return this.type === 3;\n  }\n  /**\n   *  Create a copy of this transaciton.\n   */\n  clone() {\n    return r.from(this);\n  }\n  /**\n   *  Return a JSON-friendly object.\n   */\n  toJSON() {\n    let e = /* @__PURE__ */ a((t) => t == null ? null : t.toString(), \"s\");\n    return {\n      type: this.type,\n      to: this.to,\n      //            from: this.from,\n      data: this.data,\n      nonce: this.nonce,\n      gasLimit: e(this.gasLimit),\n      gasPrice: e(this.gasPrice),\n      maxPriorityFeePerGas: e(this.maxPriorityFeePerGas),\n      maxFeePerGas: e(this.maxFeePerGas),\n      value: e(this.value),\n      chainId: e(this.chainId),\n      sig: this.signature ? this.signature.toJSON() : null,\n      accessList: this.accessList\n    };\n  }\n  /**\n   *  Create a **Transaction** from a serialized transaction or a\n   *  Transaction-like object.\n   */\n  static from(e) {\n    if (e == null)\n      return new r();\n    if (typeof e == \"string\") {\n      let n = E(e);\n      if (n[0] >= 127)\n        return r.from(Ph(n));\n      switch (n[0]) {\n        case 1:\n          return r.from(Rh(n));\n        case 2:\n          return r.from(Nh(n));\n        case 3:\n          return r.from(Th(n));\n        case 4:\n          return r.from(Ch(n));\n      }\n      b(!1, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \"from\" });\n    }\n    let t = new r();\n    return e.type != null && (t.type = e.type), e.to != null && (t.to = e.to), e.nonce != null && (t.nonce = e.nonce), e.gasLimit != null && (t.gasLimit = e.gasLimit), e.gasPrice != null && (t.gasPrice = e.gasPrice), e.maxPriorityFeePerGas != null && (t.maxPriorityFeePerGas = e.maxPriorityFeePerGas), e.maxFeePerGas != null && (t.maxFeePerGas = e.maxFeePerGas), e.maxFeePerBlobGas != null && (t.maxFeePerBlobGas = e.maxFeePerBlobGas), e.data != null && (t.data = e.data), e.value != null && (t.value = e.value), e.chainId != null && (t.chainId = e.chainId), e.signature != null && (t.signature = we.from(e.signature)), e.accessList != null && (t.accessList = e.accessList), e.authorizationList != null && (t.authorizationList = e.authorizationList), e.blobVersionedHashes != null && (t.blobVersionedHashes = e.blobVersionedHashes), e.kzg != null && (t.kzg = e.kzg), e.blobs != null && (t.blobs = e.blobs), e.hash != null && (h(t.isSigned(), \"unsigned transaction cannot define '.hash'\", \"tx\", e), h(t.hash === e.hash, \"hash mismatch\", \"tx\", e)), e.from != null && (h(t.isSigned(), \"unsigned transaction cannot define '.from'\", \"tx\", e), h(t.from.toLowerCase() === (e.from || \"\").toLowerCase(), \"from mismatch\", \"tx\", e)), t;\n  }\n};\n\n// node_modules/ethers/lib.esm/hash/authorization.js\nfunction qn(r) {\n  return h(typeof r.address == \"string\", \"invalid address for hashAuthorization\", \"auth.address\", r), G(F([\n    \"0x05\",\n    _e([\n      r.chainId != null ? X(r.chainId) : \"0x\",\n      U(r.address),\n      r.nonce != null ? X(r.nonce) : \"0x\"\n    ])\n  ]));\n}\na(qn, \"hashAuthorization\");\nfunction Ua(r, e) {\n  return Bt(qn(r), e);\n}\na(Ua, \"verifyAuthorization\");\n\n// node_modules/ethers/lib.esm/hash/id.js\nfunction Oe(r) {\n  return G(re(r));\n}\na(Oe, \"id\");\n\n// node_modules/ethers/node_modules/@adraffy/ens-normalize/dist/index.mjs\nvar Sh = \"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\", Lf = /* @__PURE__ */ new Map([[8217, \"apostrophe\"], [8260, \"fraction slash\"], [12539, \"middle dot\"]]), Df = 4;\nfunction Uh(r) {\n  let e = 0;\n  function t() {\n    return r[e++] << 8 | r[e++];\n  }\n  a(t, \"u16\");\n  let n = t(), s = 1, i = [0, 1];\n  for (let v = 1; v < n; v++)\n    i.push(s += t());\n  let o = t(), c = e;\n  e += o;\n  let f = 0, l = 0;\n  function u() {\n    return f == 0 && (l = l << 8 | r[e++], f = 8), l >> --f & 1;\n  }\n  a(u, \"read_bit\");\n  let d = 31, x = 2 ** d, p = x >>> 1, g = p >> 1, m = x - 1, y = 0;\n  for (let v = 0; v < d; v++) y = y << 1 | u();\n  let A = [], B = 0, N = x;\n  for (; ; ) {\n    let v = Math.floor(((y - B + 1) * s - 1) / N), T = 0, L = n;\n    for (; L - T > 1; ) {\n      let H = T + L >>> 1;\n      v < i[H] ? L = H : T = H;\n    }\n    if (T == 0) break;\n    A.push(T);\n    let O = B + Math.floor(N * i[T] / s), K = B + Math.floor(N * i[T + 1] / s) - 1;\n    for (; ((O ^ K) & p) == 0; )\n      y = y << 1 & m | u(), O = O << 1 & m, K = K << 1 & m | 1;\n    for (; O & ~K & g; )\n      y = y & p | y << 1 & m >>> 1 | u(), O = O << 1 ^ p, K = (K ^ p) << 1 | p | 1;\n    B = O, N = 1 + K - O;\n  }\n  let D = n - 4;\n  return A.map((v) => {\n    switch (v - D) {\n      case 3:\n        return D + 65792 + (r[c++] << 16 | r[c++] << 8 | r[c++]);\n      case 2:\n        return D + 256 + (r[c++] << 8 | r[c++]);\n      case 1:\n        return D + r[c++];\n      default:\n        return v - 1;\n    }\n  });\n}\na(Uh, \"decode_arithmetic\");\nfunction Lh(r) {\n  let e = 0;\n  return () => r[e++];\n}\na(Lh, \"read_payload\");\nfunction Hf(r) {\n  return Lh(Uh(Dh(r)));\n}\na(Hf, \"read_compressed_payload\");\nfunction Dh(r) {\n  let e = [];\n  [...\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"].forEach((s, i) => e[s.charCodeAt(0)] = i);\n  let t = r.length, n = new Uint8Array(6 * t >> 3);\n  for (let s = 0, i = 0, o = 0, c = 0; s < t; s++)\n    c = c << 6 | e[r.charCodeAt(s)], o += 6, o >= 8 && (n[i++] = c >> (o -= 8));\n  return n;\n}\na(Dh, \"unsafe_atob\");\nfunction Fh(r) {\n  return r & 1 ? ~r >> 1 : r >> 1;\n}\na(Fh, \"signed\");\nfunction Mh(r, e) {\n  let t = Array(r);\n  for (let n = 0, s = 0; n < r; n++) t[n] = s += Fh(e());\n  return t;\n}\na(Mh, \"read_deltas\");\nfunction Ms(r, e = 0) {\n  let t = [];\n  for (; ; ) {\n    let n = r(), s = r();\n    if (!s) break;\n    e += n;\n    for (let i = 0; i < s; i++)\n      t.push(e + i);\n    e += s + 1;\n  }\n  return t;\n}\na(Ms, \"read_sorted\");\nfunction _f(r) {\n  return Gs(() => {\n    let e = Ms(r);\n    if (e.length) return e;\n  });\n}\na(_f, \"read_sorted_arrays\");\nfunction zf(r) {\n  let e = [];\n  for (; ; ) {\n    let t = r();\n    if (t == 0) break;\n    e.push(Gh(t, r));\n  }\n  for (; ; ) {\n    let t = r() - 1;\n    if (t < 0) break;\n    e.push(Hh(t, r));\n  }\n  return e.flat();\n}\na(zf, \"read_mapped\");\nfunction Gs(r) {\n  let e = [];\n  for (; ; ) {\n    let t = r(e.length);\n    if (!t) break;\n    e.push(t);\n  }\n  return e;\n}\na(Gs, \"read_array_while\");\nfunction Vf(r, e, t) {\n  let n = Array(r).fill().map(() => []);\n  for (let s = 0; s < e; s++)\n    Mh(r, t).forEach((i, o) => n[o].push(i));\n  return n;\n}\na(Vf, \"read_transposed\");\nfunction Gh(r, e) {\n  let t = 1 + e(), n = e(), s = Gs(e);\n  return Vf(s.length, 1 + r, e).flatMap((o, c) => {\n    let [f, ...l] = o;\n    return Array(s[c]).fill().map((u, d) => {\n      let x = d * n;\n      return [f + d * t, l.map((p) => p + x)];\n    });\n  });\n}\na(Gh, \"read_linear_table\");\nfunction Hh(r, e) {\n  let t = 1 + e();\n  return Vf(t, 1 + r, e).map((s) => [s[0], s.slice(1)]);\n}\na(Hh, \"read_replacement_table\");\nfunction _h(r) {\n  let e = [], t = Ms(r);\n  return s(n([]), []), e;\n  function n(i) {\n    let o = r(), c = Gs(() => {\n      let f = Ms(r).map((l) => t[l]);\n      if (f.length) return n(f);\n    });\n    return { S: o, B: c, Q: i };\n  }\n  a(n, \"decode\");\n  function s({ S: i, B: o }, c, f) {\n    if (!(i & 4 && f === c[c.length - 1])) {\n      i & 2 && (f = c[c.length - 1]), i & 1 && e.push(c);\n      for (let l of o)\n        for (let u of l.Q)\n          s(l, [...c, u], f);\n    }\n  }\n  a(s, \"expand\");\n}\na(_h, \"read_trie\");\nfunction zh(r) {\n  return r.toString(16).toUpperCase().padStart(2, \"0\");\n}\na(zh, \"hex_cp\");\nfunction Kf(r) {\n  return `{${zh(r)}}`;\n}\na(Kf, \"quote_cp\");\nfunction Vh(r) {\n  let e = [];\n  for (let t = 0, n = r.length; t < n; ) {\n    let s = r.codePointAt(t);\n    t += s < 65536 ? 1 : 2, e.push(s);\n  }\n  return e;\n}\na(Vh, \"explode_cp\");\nfunction $n(r) {\n  let t = r.length;\n  if (t < 4096) return String.fromCodePoint(...r);\n  let n = [];\n  for (let s = 0; s < t; )\n    n.push(String.fromCodePoint(...r.slice(s, s += 4096)));\n  return n.join(\"\");\n}\na($n, \"str_from_cps\");\nfunction Kh(r, e) {\n  let t = r.length, n = t - e.length;\n  for (let s = 0; n == 0 && s < t; s++) n = r[s] - e[s];\n  return n;\n}\na(Kh, \"compare_arrays\");\nvar Qh = \"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\", Hs = 44032, to = 4352, ro = 4449, no = 4519, Qf = 19, Jf = 21, es = 28, so = Jf * es, Jh = Qf * so, Wh = Hs + Jh, jh = to + Qf, Zh = ro + Jf, qh = no + es;\nfunction Ds(r) {\n  return r >> 24 & 255;\n}\na(Ds, \"unpack_cc\");\nfunction Wf(r) {\n  return r & 16777215;\n}\na(Wf, \"unpack_cp\");\nvar Da, Ff, Fa, eo;\nfunction Yh() {\n  let r = Hf(Qh);\n  Da = new Map(_f(r).flatMap((e, t) => e.map((n) => [n, t + 1 << 24]))), Ff = new Set(Ms(r)), Fa = /* @__PURE__ */ new Map(), eo = /* @__PURE__ */ new Map();\n  for (let [e, t] of zf(r)) {\n    if (!Ff.has(e) && t.length == 2) {\n      let [n, s] = t, i = eo.get(n);\n      i || (i = /* @__PURE__ */ new Map(), eo.set(n, i)), i.set(s, e);\n    }\n    Fa.set(e, t.reverse());\n  }\n}\na(Yh, \"init$1\");\nfunction jf(r) {\n  return r >= Hs && r < Wh;\n}\na(jf, \"is_hangul\");\nfunction Xh(r, e) {\n  if (r >= to && r < jh && e >= ro && e < Zh)\n    return Hs + (r - to) * so + (e - ro) * es;\n  if (jf(r) && e > no && e < qh && (r - Hs) % es == 0)\n    return r + (e - no);\n  {\n    let t = eo.get(r);\n    return t && (t = t.get(e), t) ? t : -1;\n  }\n}\na(Xh, \"compose_pair\");\nfunction Zf(r) {\n  Da || Yh();\n  let e = [], t = [], n = !1;\n  function s(i) {\n    let o = Da.get(i);\n    o && (n = !0, i |= o), e.push(i);\n  }\n  a(s, \"add\");\n  for (let i of r)\n    for (; ; ) {\n      if (i < 128)\n        e.push(i);\n      else if (jf(i)) {\n        let o = i - Hs, c = o / so | 0, f = o % so / es | 0, l = o % es;\n        s(to + c), s(ro + f), l > 0 && s(no + l);\n      } else {\n        let o = Fa.get(i);\n        o ? t.push(...o) : s(i);\n      }\n      if (!t.length) break;\n      i = t.pop();\n    }\n  if (n && e.length > 1) {\n    let i = Ds(e[0]);\n    for (let o = 1; o < e.length; o++) {\n      let c = Ds(e[o]);\n      if (c == 0 || i <= c) {\n        i = c;\n        continue;\n      }\n      let f = o - 1;\n      for (; ; ) {\n        let l = e[f + 1];\n        if (e[f + 1] = e[f], e[f] = l, !f || (i = Ds(e[--f]), i <= c)) break;\n      }\n      i = Ds(e[o]);\n    }\n  }\n  return e;\n}\na(Zf, \"decomposed\");\nfunction $h(r) {\n  let e = [], t = [], n = -1, s = 0;\n  for (let i of r) {\n    let o = Ds(i), c = Wf(i);\n    if (n == -1)\n      o == 0 ? n = c : e.push(c);\n    else if (s > 0 && s >= o)\n      o == 0 ? (e.push(n, ...t), t.length = 0, n = c) : t.push(c), s = o;\n    else {\n      let f = Xh(n, c);\n      f >= 0 ? n = f : s == 0 && o == 0 ? (e.push(n), n = c) : (t.push(c), s = o);\n    }\n  }\n  return n >= 0 && e.push(n, ...t), e;\n}\na($h, \"composed_from_decomposed\");\nfunction qf(r) {\n  return Zf(r).map(Wf);\n}\na(qf, \"nfd\");\nfunction ex(r) {\n  return $h(Zf(r));\n}\na(ex, \"nfc\");\nvar Mf = 45;\nvar Yf = \".\", Xf = 65039, $f = 1, io = /* @__PURE__ */ a((r) => Array.from(r), \"Array_from\");\nfunction _s(r, e) {\n  return r.P.has(e) || r.Q.has(e);\n}\na(_s, \"group_has_cp\");\nvar Ma = class extends Array {\n  static {\n    a(this, \"Emoji\");\n  }\n  get is_emoji() {\n    return !0;\n  }\n  // free tagging system\n}, Ga, el, an, Ha, tl, tx, Xn, La, Yn, on, Gf, _a;\nfunction za() {\n  if (Ga) return;\n  let r = Hf(Sh), e = /* @__PURE__ */ a(() => Ms(r), \"read_sorted_array\"), t = /* @__PURE__ */ a(() => new Set(e()), \"read_sorted_set\"), n = /* @__PURE__ */ a((u, d) => d.forEach((x) => u.add(x)), \"set_add_many\");\n  Ga = new Map(zf(r)), el = t(), an = e(), Ha = new Set(e().map((u) => an[u])), an = new Set(an), tl = t(), tx = t();\n  let s = _f(r), i = r(), o = /* @__PURE__ */ a(() => {\n    let u = /* @__PURE__ */ new Set();\n    return e().forEach((d) => n(u, s[d])), n(u, e()), u;\n  }, \"read_chunked\");\n  Xn = Gs((u) => {\n    let d = Gs(r).map((x) => x + 96);\n    if (d.length) {\n      let x = u >= i;\n      d[0] -= 32, d = $n(d), x && (d = `Restricted[${d}]`);\n      let p = o(), g = o(), m = !r();\n      return { N: d, P: p, Q: g, M: m, R: x };\n    }\n  }), La = t(), Yn = /* @__PURE__ */ new Map();\n  let c = e().concat(io(La)).sort((u, d) => u - d);\n  c.forEach((u, d) => {\n    let x = r(), p = c[d] = x ? c[d - x] : { V: [], M: /* @__PURE__ */ new Map() };\n    p.V.push(u), La.has(u) || Yn.set(u, p);\n  });\n  for (let { V: u, M: d } of new Set(Yn.values())) {\n    let x = [];\n    for (let g of u) {\n      let m = Xn.filter((A) => _s(A, g)), y = x.find(({ G: A }) => m.some((B) => A.has(B)));\n      y || (y = { G: /* @__PURE__ */ new Set(), V: [] }, x.push(y)), y.V.push(g), n(y.G, m);\n    }\n    let p = x.flatMap((g) => io(g.G));\n    for (let { G: g, V: m } of x) {\n      let y = new Set(p.filter((A) => !g.has(A)));\n      for (let A of m)\n        d.set(A, y);\n    }\n  }\n  on = /* @__PURE__ */ new Set();\n  let f = /* @__PURE__ */ new Set(), l = /* @__PURE__ */ a((u) => on.has(u) ? f.add(u) : on.add(u), \"add_to_union\");\n  for (let u of Xn) {\n    for (let d of u.P) l(d);\n    for (let d of u.Q) l(d);\n  }\n  for (let u of on)\n    !Yn.has(u) && !f.has(u) && Yn.set(u, $f);\n  n(on, qf(on)), Gf = _h(r).map((u) => Ma.from(u)).sort(Kh), _a = /* @__PURE__ */ new Map();\n  for (let u of Gf) {\n    let d = [_a];\n    for (let x of u) {\n      let p = d.map((g) => {\n        let m = g.get(x);\n        return m || (m = /* @__PURE__ */ new Map(), g.set(x, m)), m;\n      });\n      x === Xf ? d.push(...p) : d = p;\n    }\n    for (let x of d)\n      x.V = u;\n  }\n}\na(za, \"init\");\nfunction Va(r) {\n  return (rl(r) ? \"\" : `${Ka(oo([r]))} `) + Kf(r);\n}\na(Va, \"quoted_cp\");\nfunction Ka(r) {\n  return `\"${r}\"\\u200E`;\n}\na(Ka, \"bidi_qq\");\nfunction rx(r) {\n  if (r.length >= 4 && r[2] == Mf && r[3] == Mf)\n    throw new Error(`invalid label extension: \"${$n(r.slice(0, 4))}\"`);\n}\na(rx, \"check_label_extension\");\nfunction nx(r) {\n  for (let t = r.lastIndexOf(95); t > 0; )\n    if (r[--t] !== 95)\n      throw new Error(\"underscore allowed only at start\");\n}\na(nx, \"check_leading_underscore\");\nfunction sx(r) {\n  let e = r[0], t = Lf.get(e);\n  if (t) throw Fs(`leading ${t}`);\n  let n = r.length, s = -1;\n  for (let i = 1; i < n; i++) {\n    e = r[i];\n    let o = Lf.get(e);\n    if (o) {\n      if (s == i) throw Fs(`${t} + ${o}`);\n      s = i + 1, t = o;\n    }\n  }\n  if (s == n) throw Fs(`trailing ${t}`);\n}\na(sx, \"check_fenced\");\nfunction oo(r, e = 1 / 0, t = Kf) {\n  let n = [];\n  ix(r[0]) && n.push(\"\\u25CC\"), r.length > e && (e >>= 1, r = [...r.slice(0, e), 8230, ...r.slice(-e)]);\n  let s = 0, i = r.length;\n  for (let o = 0; o < i; o++) {\n    let c = r[o];\n    rl(c) && (n.push($n(r.slice(s, o))), n.push(t(c)), s = o + 1);\n  }\n  return n.push($n(r.slice(s, i))), n.join(\"\");\n}\na(oo, \"safe_str_from_cps\");\nfunction ix(r) {\n  return za(), an.has(r);\n}\na(ix, \"is_combining_mark\");\nfunction rl(r) {\n  return za(), tl.has(r);\n}\na(rl, \"should_escape\");\nfunction nl(r) {\n  return fx(ox(r, ex, dx));\n}\na(nl, \"ens_normalize\");\nfunction ox(r, e, t) {\n  if (!r) return [];\n  za();\n  let n = 0;\n  return r.split(Yf).map((s) => {\n    let i = Vh(s), o = {\n      input: i,\n      offset: n\n      // codepoint, not substring!\n    };\n    n += i.length + 1;\n    try {\n      let c = o.tokens = ux(i, e, t), f = c.length, l;\n      if (!f)\n        throw new Error(\"empty label\");\n      let u = o.output = c.flat();\n      if (nx(u), !(o.emoji = f > 1 || c[0].is_emoji) && u.every((x) => x < 128))\n        rx(u), l = \"ASCII\";\n      else {\n        let x = c.flatMap((p) => p.is_emoji ? [] : p);\n        if (!x.length)\n          l = \"Emoji\";\n        else {\n          if (an.has(u[0])) throw Fs(\"leading combining mark\");\n          for (let m = 1; m < f; m++) {\n            let y = c[m];\n            if (!y.is_emoji && an.has(y[0]))\n              throw Fs(`emoji + combining mark: \"${$n(c[m - 1])} + ${oo([y[0]])}\"`);\n          }\n          sx(u);\n          let p = io(new Set(x)), [g] = cx(p);\n          lx(g, x), ax(g, p), l = g.N;\n        }\n      }\n      o.type = l;\n    } catch (c) {\n      o.error = c;\n    }\n    return o;\n  });\n}\na(ox, \"split\");\nfunction ax(r, e) {\n  let t, n = [];\n  for (let s of e) {\n    let i = Yn.get(s);\n    if (i === $f) return;\n    if (i) {\n      let o = i.M.get(s);\n      if (t = t ? t.filter((c) => o.has(c)) : io(o), !t.length) return;\n    } else\n      n.push(s);\n  }\n  if (t) {\n    for (let s of t)\n      if (n.every((i) => _s(s, i)))\n        throw new Error(`whole-script confusable: ${r.N}/${s.N}`);\n  }\n}\na(ax, \"check_whole\");\nfunction cx(r) {\n  let e = Xn;\n  for (let t of r) {\n    let n = e.filter((s) => _s(s, t));\n    if (!n.length)\n      throw Xn.some((s) => _s(s, t)) ? il(e[0], t) : sl(t);\n    if (e = n, n.length == 1) break;\n  }\n  return e;\n}\na(cx, \"determine_group\");\nfunction fx(r) {\n  return r.map(({ input: e, error: t, output: n }) => {\n    if (t) {\n      let s = t.message;\n      throw new Error(r.length == 1 ? s : `Invalid label ${Ka(oo(e, 63))}: ${s}`);\n    }\n    return $n(n);\n  }).join(Yf);\n}\na(fx, \"flatten\");\nfunction sl(r) {\n  return new Error(`disallowed character: ${Va(r)}`);\n}\na(sl, \"error_disallowed\");\nfunction il(r, e) {\n  let t = Va(e), n = Xn.find((s) => s.P.has(e));\n  return n && (t = `${n.N} ${t}`), new Error(`illegal mixture: ${r.N} + ${t}`);\n}\na(il, \"error_group_member\");\nfunction Fs(r) {\n  return new Error(`illegal placement: ${r}`);\n}\na(Fs, \"error_placement\");\nfunction lx(r, e) {\n  for (let t of e)\n    if (!_s(r, t))\n      throw il(r, t);\n  if (r.M) {\n    let t = qf(e);\n    for (let n = 1, s = t.length; n < s; n++)\n      if (Ha.has(t[n])) {\n        let i = n + 1;\n        for (let o; i < s && Ha.has(o = t[i]); i++)\n          for (let c = n; c < i; c++)\n            if (t[c] == o)\n              throw new Error(`duplicate non-spacing marks: ${Va(o)}`);\n        if (i - n > Df)\n          throw new Error(`excessive non-spacing marks: ${Ka(oo(t.slice(n - 1, i)))} (${i - n}/${Df})`);\n        n = i;\n      }\n  }\n}\na(lx, \"check_group\");\nfunction ux(r, e, t) {\n  let n = [], s = [];\n  for (r = r.slice().reverse(); r.length; ) {\n    let i = hx(r);\n    if (i)\n      s.length && (n.push(e(s)), s = []), n.push(t(i));\n    else {\n      let o = r.pop();\n      if (on.has(o))\n        s.push(o);\n      else {\n        let c = Ga.get(o);\n        if (c)\n          s.push(...c);\n        else if (!el.has(o))\n          throw sl(o);\n      }\n    }\n  }\n  return s.length && n.push(e(s)), n;\n}\na(ux, \"tokens_from_str\");\nfunction dx(r) {\n  return r.filter((e) => e != Xf);\n}\na(dx, \"filter_fe0f\");\nfunction hx(r, e) {\n  let t = _a, n, s = r.length;\n  for (; s && (t = t.get(r[--s]), !!t); ) {\n    let { V: i } = t;\n    i && (n = i, e && e.push(...r.slice(s).reverse()), r.length = s);\n  }\n  return n;\n}\na(hx, \"consume_emoji_reversed\");\n\n// node_modules/ethers/lib.esm/hash/namehash.js\nvar al = new Uint8Array(32);\nal.fill(0);\nfunction ol(r) {\n  return h(r.length !== 0, \"invalid ENS name; empty component\", \"comp\", r), r;\n}\na(ol, \"checkComponent\");\nfunction Qa(r) {\n  let e = re(ao(r)), t = [];\n  if (r.length === 0)\n    return t;\n  let n = 0;\n  for (let s = 0; s < e.length; s++)\n    e[s] === 46 && (t.push(ol(e.slice(n, s))), n = s + 1);\n  return h(n < e.length, \"invalid ENS name; empty component\", \"name\", r), t.push(ol(e.slice(n))), t;\n}\na(Qa, \"ensNameSplit\");\nfunction ao(r) {\n  try {\n    if (r.length === 0)\n      throw new Error(\"empty label\");\n    return nl(r);\n  } catch (e) {\n    h(!1, `invalid ENS name (${e.message})`, \"name\", r);\n  }\n}\na(ao, \"ensNormalize\");\nfunction Ja(r) {\n  try {\n    return Qa(r).length !== 0;\n  } catch {\n  }\n  return !1;\n}\na(Ja, \"isValidName\");\nfunction Br(r) {\n  h(typeof r == \"string\", \"invalid ENS name; not a string\", \"name\", r), h(r.length, \"invalid ENS name (empty label)\", \"name\", r);\n  let e = al, t = Qa(r);\n  for (; t.length; )\n    e = G(F([e, G(t.pop())]));\n  return w(e);\n}\na(Br, \"namehash\");\nfunction zs(r, e) {\n  let t = e ?? 63;\n  return h(t <= 255, \"DNS encoded label cannot exceed 255\", \"length\", t), w(F(Qa(r).map((n) => {\n    h(n.length <= t, `label ${JSON.stringify(r)} exceeds ${t} bytes`, \"name\", r);\n    let s = new Uint8Array(n.length + 1);\n    return s.set(n, 1), s[0] = s.length - 1, s;\n  }))) + \"00\";\n}\na(zs, \"dnsEncode\");\n\n// node_modules/ethers/lib.esm/hash/message.js\nfunction ts(r) {\n  return typeof r == \"string\" && (r = re(r)), G(F([\n    re(Us),\n    re(String(r.length)),\n    r\n  ]));\n}\na(ts, \"hashMessage\");\nfunction Wa(r, e) {\n  let t = ts(r);\n  return Bt(t, e);\n}\na(Wa, \"verifyMessage\");\n\n// node_modules/ethers/lib.esm/hash/solidity.js\nvar xx = new RegExp(\"^bytes([0-9]+)$\"), px = new RegExp(\"^(u?int)([0-9]*)$\"), mx = new RegExp(\"^(.*)\\\\[([0-9]*)\\\\]$\");\nfunction cl(r, e, t) {\n  switch (r) {\n    case \"address\":\n      return t ? E(ge(e, 32)) : E(U(e));\n    case \"string\":\n      return re(e);\n    case \"bytes\":\n      return E(e);\n    case \"bool\":\n      return e = e ? \"0x01\" : \"0x00\", t ? E(ge(e, 32)) : E(e);\n  }\n  let n = r.match(px);\n  if (n) {\n    let s = n[1] === \"int\", i = parseInt(n[2] || \"256\");\n    return h((!n[2] || n[2] === String(i)) && i % 8 === 0 && i !== 0 && i <= 256, \"invalid number type\", \"type\", r), t && (i = 256), s && (e = Kt(e, i)), E(ge(X(e), i / 8));\n  }\n  if (n = r.match(xx), n) {\n    let s = parseInt(n[1]);\n    return h(String(s) === n[1] && s !== 0 && s <= 32, \"invalid bytes type\", \"type\", r), h(Qe(e) === s, `invalid value for ${r}`, \"value\", e), t ? E(zt(e, 32)) : e;\n  }\n  if (n = r.match(mx), n && Array.isArray(e)) {\n    let s = n[1], i = parseInt(n[2] || String(e.length));\n    h(i === e.length, `invalid array length for ${r}`, \"value\", e);\n    let o = [];\n    return e.forEach(function(c) {\n      o.push(cl(s, c, !0));\n    }), E(F(o));\n  }\n  h(!1, \"invalid type\", \"type\", r);\n}\na(cl, \"_pack\");\nfunction Vs(r, e) {\n  h(r.length === e.length, \"wrong number of values; expected ${ types.length }\", \"values\", e);\n  let t = [];\n  return r.forEach(function(n, s) {\n    t.push(cl(n, e[s]));\n  }), w(F(t));\n}\na(Vs, \"solidityPacked\");\nfunction ja(r, e) {\n  return G(Vs(r, e));\n}\na(ja, \"solidityPackedKeccak256\");\nfunction Za(r, e) {\n  return ye(Vs(r, e));\n}\na(Za, \"solidityPackedSha256\");\n\n// node_modules/ethers/lib.esm/hash/typed-data.js\nvar dl = new Uint8Array(32);\ndl.fill(0);\nvar bx = BigInt(-1), hl = BigInt(0), xl = BigInt(1), gx = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\nfunction yx(r) {\n  let e = E(r), t = e.length % 32;\n  return t ? F([e, dl.slice(t)]) : w(e);\n}\na(yx, \"hexPadRight\");\nvar wx = Be(xl, 32), Ax = Be(hl, 32), fl = {\n  name: \"string\",\n  version: \"string\",\n  chainId: \"uint256\",\n  verifyingContract: \"address\",\n  salt: \"bytes32\"\n}, qa = [\n  \"name\",\n  \"version\",\n  \"chainId\",\n  \"verifyingContract\",\n  \"salt\"\n];\nfunction ll(r) {\n  return function(e) {\n    return h(typeof e == \"string\", `invalid domain value for ${JSON.stringify(r)}`, `domain.${r}`, e), e;\n  };\n}\na(ll, \"checkString\");\nvar Ex = {\n  name: ll(\"name\"),\n  version: ll(\"version\"),\n  chainId: /* @__PURE__ */ a(function(r) {\n    let e = k(r, \"domain.chainId\");\n    return h(e >= 0, \"invalid chain ID\", \"domain.chainId\", r), Number.isSafeInteger(e) ? Number(e) : Pe(e);\n  }, \"chainId\"),\n  verifyingContract: /* @__PURE__ */ a(function(r) {\n    try {\n      return U(r).toLowerCase();\n    } catch {\n    }\n    h(!1, 'invalid domain value \"verifyingContract\"', \"domain.verifyingContract\", r);\n  }, \"verifyingContract\"),\n  salt: /* @__PURE__ */ a(function(r) {\n    let e = E(r, \"domain.salt\");\n    return h(e.length === 32, 'invalid domain value \"salt\"', \"domain.salt\", r), w(e);\n  }, \"salt\")\n};\nfunction Ya(r) {\n  {\n    let e = r.match(/^(u?)int(\\d+)$/);\n    if (e) {\n      let t = e[1] === \"\", n = parseInt(e[2]);\n      h(n % 8 === 0 && n !== 0 && n <= 256 && e[2] === String(n), \"invalid numeric width\", \"type\", r);\n      let s = Ze(gx, t ? n - 1 : n), i = t ? (s + xl) * bx : hl;\n      return function(o) {\n        let c = k(o, \"value\");\n        return h(c >= i && c <= s, `value out-of-bounds for ${r}`, \"value\", c), Be(t ? Kt(c, 256) : c, 32);\n      };\n    }\n  }\n  {\n    let e = r.match(/^bytes(\\d+)$/);\n    if (e) {\n      let t = parseInt(e[1]);\n      return h(t !== 0 && t <= 32 && e[1] === String(t), \"invalid bytes width\", \"type\", r), function(n) {\n        let s = E(n);\n        return h(s.length === t, `invalid length for ${r}`, \"value\", n), yx(n);\n      };\n    }\n  }\n  switch (r) {\n    case \"address\":\n      return function(e) {\n        return ge(U(e), 32);\n      };\n    case \"bool\":\n      return function(e) {\n        return e ? wx : Ax;\n      };\n    case \"bytes\":\n      return function(e) {\n        return G(e);\n      };\n    case \"string\":\n      return function(e) {\n        return Oe(e);\n      };\n  }\n  return null;\n}\na(Ya, \"getBaseEncoder\");\nfunction ul(r, e) {\n  return `${r}(${e.map(({ name: t, type: n }) => n + \" \" + t).join(\",\")})`;\n}\na(ul, \"encodeType\");\nfunction co(r) {\n  let e = r.match(/^([^\\x5b]*)((\\x5b\\d*\\x5d)*)(\\x5b(\\d*)\\x5d)$/);\n  return e ? {\n    base: e[1],\n    index: e[2] + e[4],\n    array: {\n      base: e[1],\n      prefix: e[1] + e[2],\n      count: e[5] ? parseInt(e[5]) : -1\n    }\n  } : { base: r };\n}\na(co, \"splitArray\");\nvar nt = class r {\n  static {\n    a(this, \"TypedDataEncoder\");\n  }\n  /**\n   *  The primary type for the structured [[types]].\n   *\n   *  This is derived automatically from the [[types]], since no\n   *  recursion is possible, once the DAG for the types is consturcted\n   *  internally, the primary type must be the only remaining type with\n   *  no parent nodes.\n   */\n  primaryType;\n  #e;\n  /**\n   *  The types.\n   */\n  get types() {\n    return JSON.parse(this.#e);\n  }\n  #t;\n  #r;\n  /**\n   *  Create a new **TypedDataEncoder** for %%types%%.\n   *\n   *  This performs all necessary checking that types are valid and\n   *  do not violate the [[link-eip-712]] structural constraints as\n   *  well as computes the [[primaryType]].\n   */\n  constructor(e) {\n    this.#t = /* @__PURE__ */ new Map(), this.#r = /* @__PURE__ */ new Map();\n    let t = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map(), s = /* @__PURE__ */ new Map(), i = {};\n    Object.keys(e).forEach((f) => {\n      i[f] = e[f].map(({ name: l, type: u }) => {\n        let { base: d, index: x } = co(u);\n        return d === \"int\" && !e.int && (d = \"int256\"), d === \"uint\" && !e.uint && (d = \"uint256\"), { name: l, type: d + (x || \"\") };\n      }), t.set(f, /* @__PURE__ */ new Set()), n.set(f, []), s.set(f, /* @__PURE__ */ new Set());\n    }), this.#e = JSON.stringify(i);\n    for (let f in i) {\n      let l = /* @__PURE__ */ new Set();\n      for (let u of i[f]) {\n        h(!l.has(u.name), `duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(f)}`, \"types\", e), l.add(u.name);\n        let d = co(u.type).base;\n        h(d !== f, `circular type reference to ${JSON.stringify(d)}`, \"types\", e), !Ya(d) && (h(n.has(d), `unknown type ${JSON.stringify(d)}`, \"types\", e), n.get(d).push(f), t.get(f).add(d));\n      }\n    }\n    let o = Array.from(n.keys()).filter((f) => n.get(f).length === 0);\n    h(o.length !== 0, \"missing primary type\", \"types\", e), h(o.length === 1, `ambiguous primary types or unused types: ${o.map((f) => JSON.stringify(f)).join(\", \")}`, \"types\", e), P(this, { primaryType: o[0] });\n    function c(f, l) {\n      h(!l.has(f), `circular type reference to ${JSON.stringify(f)}`, \"types\", e), l.add(f);\n      for (let u of t.get(f))\n        if (n.has(u)) {\n          c(u, l);\n          for (let d of l)\n            s.get(d).add(u);\n        }\n      l.delete(f);\n    }\n    a(c, \"checkCircular\"), c(this.primaryType, /* @__PURE__ */ new Set());\n    for (let [f, l] of s) {\n      let u = Array.from(l);\n      u.sort(), this.#t.set(f, ul(f, i[f]) + u.map((d) => ul(d, i[d])).join(\"\"));\n    }\n  }\n  /**\n   *  Returnthe encoder for the specific %%type%%.\n   */\n  getEncoder(e) {\n    let t = this.#r.get(e);\n    return t || (t = this.#n(e), this.#r.set(e, t)), t;\n  }\n  #n(e) {\n    {\n      let s = Ya(e);\n      if (s)\n        return s;\n    }\n    let t = co(e).array;\n    if (t) {\n      let s = t.prefix, i = this.getEncoder(s);\n      return (o) => {\n        h(t.count === -1 || t.count === o.length, `array length mismatch; expected length ${t.count}`, \"value\", o);\n        let c = o.map(i);\n        return this.#t.has(s) && (c = c.map(G)), G(F(c));\n      };\n    }\n    let n = this.types[e];\n    if (n) {\n      let s = Oe(this.#t.get(e));\n      return (i) => {\n        let o = n.map(({ name: c, type: f }) => {\n          let l = this.getEncoder(f)(i[c]);\n          return this.#t.has(f) ? G(l) : l;\n        });\n        return o.unshift(s), F(o);\n      };\n    }\n    h(!1, `unknown type: ${e}`, \"type\", e);\n  }\n  /**\n   *  Return the full type for %%name%%.\n   */\n  encodeType(e) {\n    let t = this.#t.get(e);\n    return h(t, `unknown type: ${JSON.stringify(e)}`, \"name\", e), t;\n  }\n  /**\n   *  Return the encoded %%value%% for the %%type%%.\n   */\n  encodeData(e, t) {\n    return this.getEncoder(e)(t);\n  }\n  /**\n   *  Returns the hash of %%value%% for the type of %%name%%.\n   */\n  hashStruct(e, t) {\n    return G(this.encodeData(e, t));\n  }\n  /**\n   *  Return the fulled encoded %%value%% for the [[types]].\n   */\n  encode(e) {\n    return this.encodeData(this.primaryType, e);\n  }\n  /**\n   *  Return the hash of the fully encoded %%value%% for the [[types]].\n   */\n  hash(e) {\n    return this.hashStruct(this.primaryType, e);\n  }\n  /**\n   *  @_ignore:\n   */\n  _visit(e, t, n) {\n    if (Ya(e))\n      return n(e, t);\n    let s = co(e).array;\n    if (s)\n      return h(s.count === -1 || s.count === t.length, `array length mismatch; expected length ${s.count}`, \"value\", t), t.map((o) => this._visit(s.prefix, o, n));\n    let i = this.types[e];\n    if (i)\n      return i.reduce((o, { name: c, type: f }) => (o[c] = this._visit(f, t[c], n), o), {});\n    h(!1, `unknown type: ${e}`, \"type\", e);\n  }\n  /**\n   *  Call %%calback%% for each value in %%value%%, passing the type and\n   *  component within %%value%%.\n   *\n   *  This is useful for replacing addresses or other transformation that\n   *  may be desired on each component, based on its type.\n   */\n  visit(e, t) {\n    return this._visit(this.primaryType, e, t);\n  }\n  /**\n   *  Create a new **TypedDataEncoder** for %%types%%.\n   */\n  static from(e) {\n    return new r(e);\n  }\n  /**\n   *  Return the primary type for %%types%%.\n   */\n  static getPrimaryType(e) {\n    return r.from(e).primaryType;\n  }\n  /**\n   *  Return the hashed struct for %%value%% using %%types%% and %%name%%.\n   */\n  static hashStruct(e, t, n) {\n    return r.from(t).hashStruct(e, n);\n  }\n  /**\n   *  Return the domain hash for %%domain%%.\n   */\n  static hashDomain(e) {\n    let t = [];\n    for (let n in e) {\n      if (e[n] == null)\n        continue;\n      let s = fl[n];\n      h(s, `invalid typed-data domain key: ${JSON.stringify(n)}`, \"domain\", e), t.push({ name: n, type: s });\n    }\n    return t.sort((n, s) => qa.indexOf(n.name) - qa.indexOf(s.name)), r.hashStruct(\"EIP712Domain\", { EIP712Domain: t }, e);\n  }\n  /**\n   *  Return the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n   */\n  static encode(e, t, n) {\n    return F([\n      \"0x1901\",\n      r.hashDomain(e),\n      r.from(t).hash(n)\n    ]);\n  }\n  /**\n   *  Return the hash of the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n   */\n  static hash(e, t, n) {\n    return G(r.encode(e, t, n));\n  }\n  // Replaces all address types with ENS names with their looked up address\n  /**\n   * Resolves to the value from resolving all addresses in %%value%% for\n   * %%types%% and the %%domain%%.\n   */\n  static async resolveNames(e, t, n, s) {\n    e = Object.assign({}, e);\n    for (let c in e)\n      e[c] == null && delete e[c];\n    let i = {};\n    e.verifyingContract && !z(e.verifyingContract, 20) && (i[e.verifyingContract] = \"0x\");\n    let o = r.from(t);\n    o.visit(n, (c, f) => (c === \"address\" && !z(f, 20) && (i[f] = \"0x\"), f));\n    for (let c in i)\n      i[c] = await s(c);\n    return e.verifyingContract && i[e.verifyingContract] && (e.verifyingContract = i[e.verifyingContract]), n = o.visit(n, (c, f) => c === \"address\" && i[f] ? i[f] : f), { domain: e, value: n };\n  }\n  /**\n   *  Returns the JSON-encoded payload expected by nodes which implement\n   *  the JSON-RPC [[link-eip-712]] method.\n   */\n  static getPayload(e, t, n) {\n    r.hashDomain(e);\n    let s = {}, i = [];\n    qa.forEach((f) => {\n      let l = e[f];\n      l != null && (s[f] = Ex[f](l), i.push({ name: f, type: fl[f] }));\n    });\n    let o = r.from(t);\n    t = o.types;\n    let c = Object.assign({}, t);\n    return h(c.EIP712Domain == null, \"types must not contain EIP712Domain type\", \"types.EIP712Domain\", t), c.EIP712Domain = i, o.encode(n), {\n      types: c,\n      domain: s,\n      primaryType: o.primaryType,\n      message: o.visit(n, (f, l) => {\n        if (f.match(/^bytes(\\d*)/))\n          return w(E(l));\n        if (f.match(/^u?int/))\n          return k(l).toString();\n        switch (f) {\n          case \"address\":\n            return l.toLowerCase();\n          case \"bool\":\n            return !!l;\n          case \"string\":\n            return h(typeof l == \"string\", \"invalid string\", \"value\", l), l;\n        }\n        h(!1, \"unsupported type\", \"type\", f);\n      })\n    };\n  }\n};\nfunction Xa(r, e, t, n) {\n  return Bt(nt.hash(r, e, t), n);\n}\na(Xa, \"verifyTypedData\");\n\n// node_modules/ethers/lib.esm/abi/fragments.js\nfunction Ve(r) {\n  let e = /* @__PURE__ */ new Set();\n  return r.forEach((t) => e.add(t)), Object.freeze(e);\n}\na(Ve, \"setify\");\nvar Px = \"external public payable override\", kx = Ve(Px.split(\" \")), kl = \"constant external internal payable private public pure view override\", Nx = Ve(kl.split(\" \")), Nl = \"constructor error event fallback function receive struct\", Bl = Ve(Nl.split(\" \")), Rl = \"calldata memory storage payable indexed\", Bx = Ve(Rl.split(\" \")), Rx = \"tuple returns\", vx = [Nl, Rl, Rx, kl].join(\" \"), Tx = Ve(vx.split(\" \")), Ix = {\n  \"(\": \"OPEN_PAREN\",\n  \")\": \"CLOSE_PAREN\",\n  \"[\": \"OPEN_BRACKET\",\n  \"]\": \"CLOSE_BRACKET\",\n  \",\": \"COMMA\",\n  \"@\": \"AT\"\n}, Cx = new RegExp(\"^(\\\\s*)\"), Ox = new RegExp(\"^([0-9]+)\"), Sx = new RegExp(\"^([a-zA-Z$_][a-zA-Z0-9$_]*)\"), vl = new RegExp(\"^([a-zA-Z$_][a-zA-Z0-9$_]*)$\"), Tl = new RegExp(\"^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$\"), Rt = class r {\n  static {\n    a(this, \"TokenString\");\n  }\n  #e;\n  #t;\n  get offset() {\n    return this.#e;\n  }\n  get length() {\n    return this.#t.length - this.#e;\n  }\n  constructor(e) {\n    this.#e = 0, this.#t = e.slice();\n  }\n  clone() {\n    return new r(this.#t);\n  }\n  reset() {\n    this.#e = 0;\n  }\n  #r(e = 0, t = 0) {\n    return new r(this.#t.slice(e, t).map((n) => Object.freeze(Object.assign({}, n, {\n      match: n.match - e,\n      linkBack: n.linkBack - e,\n      linkNext: n.linkNext - e\n    }))));\n  }\n  // Pops and returns the value of the next token, if it is a keyword in allowed; throws if out of tokens\n  popKeyword(e) {\n    let t = this.peek();\n    if (t.type !== \"KEYWORD\" || !e.has(t.text))\n      throw new Error(`expected keyword ${t.text}`);\n    return this.pop().text;\n  }\n  // Pops and returns the value of the next token if it is `type`; throws if out of tokens\n  popType(e) {\n    if (this.peek().type !== e) {\n      let t = this.peek();\n      throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`);\n    }\n    return this.pop().text;\n  }\n  // Pops and returns a \"(\" TOKENS \")\"\n  popParen() {\n    let e = this.peek();\n    if (e.type !== \"OPEN_PAREN\")\n      throw new Error(\"bad start\");\n    let t = this.#r(this.#e + 1, e.match + 1);\n    return this.#e = e.match + 1, t;\n  }\n  // Pops and returns the items within \"(\" ITEM1 \",\" ITEM2 \",\" ... \")\"\n  popParams() {\n    let e = this.peek();\n    if (e.type !== \"OPEN_PAREN\")\n      throw new Error(\"bad start\");\n    let t = [];\n    for (; this.#e < e.match - 1; ) {\n      let n = this.peek().linkNext;\n      t.push(this.#r(this.#e + 1, n)), this.#e = n;\n    }\n    return this.#e = e.match + 1, t;\n  }\n  // Returns the top Token, throwing if out of tokens\n  peek() {\n    if (this.#e >= this.#t.length)\n      throw new Error(\"out-of-bounds\");\n    return this.#t[this.#e];\n  }\n  // Returns the next value, if it is a keyword in `allowed`\n  peekKeyword(e) {\n    let t = this.peekType(\"KEYWORD\");\n    return t != null && e.has(t) ? t : null;\n  }\n  // Returns the value of the next token if it is `type`\n  peekType(e) {\n    if (this.length === 0)\n      return null;\n    let t = this.peek();\n    return t.type === e ? t.text : null;\n  }\n  // Returns the next token; throws if out of tokens\n  pop() {\n    let e = this.peek();\n    return this.#e++, e;\n  }\n  toString() {\n    let e = [];\n    for (let t = this.#e; t < this.#t.length; t++) {\n      let n = this.#t[t];\n      e.push(`${n.type}:${n.text}`);\n    }\n    return `<TokenString ${e.join(\" \")}>`;\n  }\n};\nfunction vr(r) {\n  let e = [], t = /* @__PURE__ */ a((o) => {\n    let c = i < r.length ? JSON.stringify(r[i]) : \"$EOI\";\n    throw new Error(`invalid token ${c} at ${i}: ${o}`);\n  }, \"throwError\"), n = [], s = [], i = 0;\n  for (; i < r.length; ) {\n    let o = r.substring(i), c = o.match(Cx);\n    c && (i += c[1].length, o = r.substring(i));\n    let f = { depth: n.length, linkBack: -1, linkNext: -1, match: -1, type: \"\", text: \"\", offset: i, value: -1 };\n    e.push(f);\n    let l = Ix[o[0]] || \"\";\n    if (l) {\n      if (f.type = l, f.text = o[0], i++, l === \"OPEN_PAREN\")\n        n.push(e.length - 1), s.push(e.length - 1);\n      else if (l == \"CLOSE_PAREN\")\n        n.length === 0 && t(\"no matching open bracket\"), f.match = n.pop(), e[f.match].match = e.length - 1, f.depth--, f.linkBack = s.pop(), e[f.linkBack].linkNext = e.length - 1;\n      else if (l === \"COMMA\")\n        f.linkBack = s.pop(), e[f.linkBack].linkNext = e.length - 1, s.push(e.length - 1);\n      else if (l === \"OPEN_BRACKET\")\n        f.type = \"BRACKET\";\n      else if (l === \"CLOSE_BRACKET\") {\n        let u = e.pop().text;\n        if (e.length > 0 && e[e.length - 1].type === \"NUMBER\") {\n          let d = e.pop().text;\n          u = d + u, e[e.length - 1].value = S(d);\n        }\n        if (e.length === 0 || e[e.length - 1].type !== \"BRACKET\")\n          throw new Error(\"missing opening bracket\");\n        e[e.length - 1].text += u;\n      }\n      continue;\n    }\n    if (c = o.match(Sx), c) {\n      if (f.text = c[1], i += f.text.length, Tx.has(f.text)) {\n        f.type = \"KEYWORD\";\n        continue;\n      }\n      if (f.text.match(Tl)) {\n        f.type = \"TYPE\";\n        continue;\n      }\n      f.type = \"ID\";\n      continue;\n    }\n    if (c = o.match(Ox), c) {\n      f.text = c[1], f.type = \"NUMBER\", i += f.text.length;\n      continue;\n    }\n    throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`);\n  }\n  return new Rt(e.map((o) => Object.freeze(o)));\n}\na(vr, \"lex\");\nfunction pl(r, e) {\n  let t = [];\n  for (let n in e.keys())\n    r.has(n) && t.push(n);\n  if (t.length > 1)\n    throw new Error(`conflicting types: ${t.join(\", \")}`);\n}\na(pl, \"allowSingle\");\nfunction fo(r, e) {\n  if (e.peekKeyword(Bl)) {\n    let t = e.pop().text;\n    if (t !== r)\n      throw new Error(`expected ${r}, got ${t}`);\n  }\n  return e.popType(\"ID\");\n}\na(fo, \"consumeName\");\nfunction $t(r, e) {\n  let t = /* @__PURE__ */ new Set();\n  for (; ; ) {\n    let n = r.peekType(\"KEYWORD\");\n    if (n == null || e && !e.has(n))\n      break;\n    if (r.pop(), t.has(n))\n      throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);\n    t.add(n);\n  }\n  return Object.freeze(t);\n}\na($t, \"consumeKeywords\");\nfunction Il(r) {\n  let e = $t(r, Nx);\n  return pl(e, Ve(\"constant payable nonpayable\".split(\" \"))), pl(e, Ve(\"pure view payable nonpayable\".split(\" \"))), e.has(\"view\") ? \"view\" : e.has(\"pure\") ? \"pure\" : e.has(\"payable\") ? \"payable\" : e.has(\"nonpayable\") ? \"nonpayable\" : e.has(\"constant\") ? \"view\" : \"nonpayable\";\n}\na(Il, \"consumeMutability\");\nfunction Xt(r, e) {\n  return r.popParams().map((t) => me.from(t, e));\n}\na(Xt, \"consumeParams\");\nfunction Cl(r) {\n  if (r.peekType(\"AT\")) {\n    if (r.pop(), r.peekType(\"NUMBER\"))\n      return k(r.pop().text);\n    throw new Error(\"invalid gas\");\n  }\n  return null;\n}\na(Cl, \"consumeGas\");\nfunction cn(r) {\n  if (r.length)\n    throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`);\n}\na(cn, \"consumeEoi\");\nvar Ux = new RegExp(/^(.*)\\[([0-9]*)\\]$/);\nfunction ml(r) {\n  let e = r.match(Tl);\n  if (h(e, \"invalid type\", \"type\", r), r === \"uint\")\n    return \"uint256\";\n  if (r === \"int\")\n    return \"int256\";\n  if (e[2]) {\n    let t = parseInt(e[2]);\n    h(t !== 0 && t <= 32, \"invalid bytes length\", \"type\", r);\n  } else if (e[3]) {\n    let t = parseInt(e[3]);\n    h(t !== 0 && t <= 256 && t % 8 === 0, \"invalid numeric width\", \"type\", r);\n  }\n  return r;\n}\na(ml, \"verifyBasicType\");\nvar he = {}, Je = Symbol.for(\"_ethers_internal\"), bl = \"_ParamTypeInternal\", gl = \"_ErrorInternal\", yl = \"_EventInternal\", wl = \"_ConstructorInternal\", Al = \"_FallbackInternal\", El = \"_FunctionInternal\", Pl = \"_StructInternal\", me = class r {\n  static {\n    a(this, \"ParamType\");\n  }\n  /**\n   *  The local name of the parameter (or ``\"\"`` if unbound)\n   */\n  name;\n  /**\n   *  The fully qualified type (e.g. ``\"address\"``, ``\"tuple(address)\"``,\n   *  ``\"uint256[3][]\"``)\n   */\n  type;\n  /**\n   *  The base type (e.g. ``\"address\"``, ``\"tuple\"``, ``\"array\"``)\n   */\n  baseType;\n  /**\n   *  True if the parameters is indexed.\n   *\n   *  For non-indexable types this is ``null``.\n   */\n  indexed;\n  /**\n   *  The components for the tuple.\n   *\n   *  For non-tuple types this is ``null``.\n   */\n  components;\n  /**\n   *  The array length, or ``-1`` for dynamic-lengthed arrays.\n   *\n   *  For non-array types this is ``null``.\n   */\n  arrayLength;\n  /**\n   *  The type of each child in the array.\n   *\n   *  For non-array types this is ``null``.\n   */\n  arrayChildren;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i, o, c, f) {\n    if (ve(e, he, \"ParamType\"), Object.defineProperty(this, Je, { value: bl }), o && (o = Object.freeze(o.slice())), s === \"array\") {\n      if (c == null || f == null)\n        throw new Error(\"\");\n    } else if (c != null || f != null)\n      throw new Error(\"\");\n    if (s === \"tuple\") {\n      if (o == null)\n        throw new Error(\"\");\n    } else if (o != null)\n      throw new Error(\"\");\n    P(this, {\n      name: t,\n      type: n,\n      baseType: s,\n      indexed: i,\n      components: o,\n      arrayLength: c,\n      arrayChildren: f\n    });\n  }\n  /**\n   *  Return a string representation of this type.\n   *\n   *  For example,\n   *\n   *  ``sighash\" => \"(uint256,address)\"``\n   *\n   *  ``\"minimal\" => \"tuple(uint256,address) indexed\"``\n   *\n   *  ``\"full\" => \"tuple(uint256 foo, address bar) indexed baz\"``\n   */\n  format(e) {\n    if (e == null && (e = \"sighash\"), e === \"json\") {\n      let n = this.name || \"\";\n      if (this.isArray()) {\n        let i = JSON.parse(this.arrayChildren.format(\"json\"));\n        return i.name = n, i.type += `[${this.arrayLength < 0 ? \"\" : String(this.arrayLength)}]`, JSON.stringify(i);\n      }\n      let s = {\n        type: this.baseType === \"tuple\" ? \"tuple\" : this.type,\n        name: n\n      };\n      return typeof this.indexed == \"boolean\" && (s.indexed = this.indexed), this.isTuple() && (s.components = this.components.map((i) => JSON.parse(i.format(e)))), JSON.stringify(s);\n    }\n    let t = \"\";\n    return this.isArray() ? (t += this.arrayChildren.format(e), t += `[${this.arrayLength < 0 ? \"\" : String(this.arrayLength)}]`) : this.isTuple() ? t += \"(\" + this.components.map((n) => n.format(e)).join(e === \"full\" ? \", \" : \",\") + \")\" : t += this.type, e !== \"sighash\" && (this.indexed === !0 && (t += \" indexed\"), e === \"full\" && this.name && (t += \" \" + this.name)), t;\n  }\n  /**\n   *  Returns true if %%this%% is an Array type.\n   *\n   *  This provides a type gaurd ensuring that [[arrayChildren]]\n   *  and [[arrayLength]] are non-null.\n   */\n  isArray() {\n    return this.baseType === \"array\";\n  }\n  /**\n   *  Returns true if %%this%% is a Tuple type.\n   *\n   *  This provides a type gaurd ensuring that [[components]]\n   *  is non-null.\n   */\n  isTuple() {\n    return this.baseType === \"tuple\";\n  }\n  /**\n   *  Returns true if %%this%% is an Indexable type.\n   *\n   *  This provides a type gaurd ensuring that [[indexed]]\n   *  is non-null.\n   */\n  isIndexable() {\n    return this.indexed != null;\n  }\n  /**\n   *  Walks the **ParamType** with %%value%%, calling %%process%%\n   *  on each type, destructing the %%value%% recursively.\n   */\n  walk(e, t) {\n    if (this.isArray()) {\n      if (!Array.isArray(e))\n        throw new Error(\"invalid array value\");\n      if (this.arrayLength !== -1 && e.length !== this.arrayLength)\n        throw new Error(\"array is wrong length\");\n      let n = this;\n      return e.map((s) => n.arrayChildren.walk(s, t));\n    }\n    if (this.isTuple()) {\n      if (!Array.isArray(e))\n        throw new Error(\"invalid tuple value\");\n      if (e.length !== this.components.length)\n        throw new Error(\"array is wrong length\");\n      let n = this;\n      return e.map((s, i) => n.components[i].walk(s, t));\n    }\n    return t(this.type, e);\n  }\n  #e(e, t, n, s) {\n    if (this.isArray()) {\n      if (!Array.isArray(t))\n        throw new Error(\"invalid array value\");\n      if (this.arrayLength !== -1 && t.length !== this.arrayLength)\n        throw new Error(\"array is wrong length\");\n      let o = this.arrayChildren, c = t.slice();\n      c.forEach((f, l) => {\n        o.#e(e, f, n, (u) => {\n          c[l] = u;\n        });\n      }), s(c);\n      return;\n    }\n    if (this.isTuple()) {\n      let o = this.components, c;\n      if (Array.isArray(t))\n        c = t.slice();\n      else {\n        if (t == null || typeof t != \"object\")\n          throw new Error(\"invalid tuple value\");\n        c = o.map((f) => {\n          if (!f.name)\n            throw new Error(\"cannot use object value with unnamed components\");\n          if (!(f.name in t))\n            throw new Error(`missing value for component ${f.name}`);\n          return t[f.name];\n        });\n      }\n      if (c.length !== this.components.length)\n        throw new Error(\"array is wrong length\");\n      c.forEach((f, l) => {\n        o[l].#e(e, f, n, (u) => {\n          c[l] = u;\n        });\n      }), s(c);\n      return;\n    }\n    let i = n(this.type, t);\n    i.then ? e.push((async function() {\n      s(await i);\n    })()) : s(i);\n  }\n  /**\n   *  Walks the **ParamType** with %%value%%, asynchronously calling\n   *  %%process%% on each type, destructing the %%value%% recursively.\n   *\n   *  This can be used to resolve ENS names by walking and resolving each\n   *  ``\"address\"`` type.\n   */\n  async walkAsync(e, t) {\n    let n = [], s = [e];\n    return this.#e(n, e, t, (i) => {\n      s[0] = i;\n    }), n.length && await Promise.all(n), s[0];\n  }\n  /**\n   *  Creates a new **ParamType** for %%obj%%.\n   *\n   *  If %%allowIndexed%% then the ``indexed`` keyword is permitted,\n   *  otherwise the ``indexed`` keyword will throw an error.\n   */\n  static from(e, t) {\n    if (r.isParamType(e))\n      return e;\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e), t);\n      } catch {\n        h(!1, \"invalid param type\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      let c = \"\", f = \"\", l = null;\n      $t(e, Ve([\"tuple\"])).has(\"tuple\") || e.peekType(\"OPEN_PAREN\") ? (f = \"tuple\", l = e.popParams().map((m) => r.from(m)), c = `tuple(${l.map((m) => m.format()).join(\",\")})`) : (c = ml(e.popType(\"TYPE\")), f = c);\n      let u = null, d = null;\n      for (; e.length && e.peekType(\"BRACKET\"); ) {\n        let m = e.pop();\n        u = new r(he, \"\", c, f, null, l, d, u), d = m.value, c += m.text, f = \"array\", l = null;\n      }\n      let x = null;\n      if ($t(e, Bx).has(\"indexed\")) {\n        if (!t)\n          throw new Error(\"\");\n        x = !0;\n      }\n      let g = e.peekType(\"ID\") ? e.pop().text : \"\";\n      if (e.length)\n        throw new Error(\"leftover tokens\");\n      return new r(he, g, c, f, x, l, d, u);\n    }\n    let n = e.name;\n    h(!n || typeof n == \"string\" && n.match(vl), \"invalid name\", \"obj.name\", n);\n    let s = e.indexed;\n    s != null && (h(t, \"parameter cannot be indexed\", \"obj.indexed\", e.indexed), s = !!s);\n    let i = e.type, o = i.match(Ux);\n    if (o) {\n      let c = parseInt(o[2] || \"-1\"), f = r.from({\n        type: o[1],\n        components: e.components\n      });\n      return new r(he, n || \"\", i, \"array\", s, null, c, f);\n    }\n    if (i === \"tuple\" || i.startsWith(\n      \"tuple(\"\n      /* fix: ) */\n    ) || i.startsWith(\n      \"(\"\n      /* fix: ) */\n    )) {\n      let c = e.components != null ? e.components.map((l) => r.from(l)) : null;\n      return new r(he, n || \"\", i, \"tuple\", s, c, null, null);\n    }\n    return i = ml(e.type), new r(he, n || \"\", i, i, s, null, null, null);\n  }\n  /**\n   *  Returns true if %%value%% is a **ParamType**.\n   */\n  static isParamType(e) {\n    return e && e[Je] === bl;\n  }\n}, Lt = class r {\n  static {\n    a(this, \"Fragment\");\n  }\n  /**\n   *  The type of the fragment.\n   */\n  type;\n  /**\n   *  The inputs for the fragment.\n   */\n  inputs;\n  /**\n   *  @private\n   */\n  constructor(e, t, n) {\n    ve(e, he, \"Fragment\"), n = Object.freeze(n.slice()), P(this, { type: t, inputs: n });\n  }\n  /**\n   *  Creates a new **Fragment** for %%obj%%, wich can be any supported\n   *  ABI frgament type.\n   */\n  static from(e) {\n    if (typeof e == \"string\") {\n      try {\n        r.from(JSON.parse(e));\n      } catch {\n      }\n      return r.from(vr(e));\n    }\n    if (e instanceof Rt)\n      switch (e.peekKeyword(Bl)) {\n        case \"constructor\":\n          return St.from(e);\n        case \"error\":\n          return Ke.from(e);\n        case \"event\":\n          return Ot.from(e);\n        case \"fallback\":\n        case \"receive\":\n          return fn.from(e);\n        case \"function\":\n          return Ut.from(e);\n        case \"struct\":\n          return Rr.from(e);\n      }\n    else if (typeof e == \"object\") {\n      switch (e.type) {\n        case \"constructor\":\n          return St.from(e);\n        case \"error\":\n          return Ke.from(e);\n        case \"event\":\n          return Ot.from(e);\n        case \"fallback\":\n        case \"receive\":\n          return fn.from(e);\n        case \"function\":\n          return Ut.from(e);\n        case \"struct\":\n          return Rr.from(e);\n      }\n      b(!1, `unsupported type: ${e.type}`, \"UNSUPPORTED_OPERATION\", {\n        operation: \"Fragment.from\"\n      });\n    }\n    h(!1, \"unsupported frgament object\", \"obj\", e);\n  }\n  /**\n   *  Returns true if %%value%% is a [[ConstructorFragment]].\n   */\n  static isConstructor(e) {\n    return St.isFragment(e);\n  }\n  /**\n   *  Returns true if %%value%% is an [[ErrorFragment]].\n   */\n  static isError(e) {\n    return Ke.isFragment(e);\n  }\n  /**\n   *  Returns true if %%value%% is an [[EventFragment]].\n   */\n  static isEvent(e) {\n    return Ot.isFragment(e);\n  }\n  /**\n   *  Returns true if %%value%% is a [[FunctionFragment]].\n   */\n  static isFunction(e) {\n    return Ut.isFragment(e);\n  }\n  /**\n   *  Returns true if %%value%% is a [[StructFragment]].\n   */\n  static isStruct(e) {\n    return Rr.isFragment(e);\n  }\n}, er = class extends Lt {\n  static {\n    a(this, \"NamedFragment\");\n  }\n  /**\n   *  The name of the fragment.\n   */\n  name;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s) {\n    super(e, t, s), h(typeof n == \"string\" && n.match(vl), \"invalid identifier\", \"name\", n), s = Object.freeze(s.slice()), P(this, { name: n });\n  }\n};\nfunction Ks(r, e) {\n  return \"(\" + e.map((t) => t.format(r)).join(r === \"full\" ? \", \" : \",\") + \")\";\n}\na(Ks, \"joinParams\");\nvar Ke = class r extends er {\n  static {\n    a(this, \"ErrorFragment\");\n  }\n  /**\n   *  @private\n   */\n  constructor(e, t, n) {\n    super(e, \"error\", t, n), Object.defineProperty(this, Je, { value: gl });\n  }\n  /**\n   *  The Custom Error selector.\n   */\n  get selector() {\n    return Oe(this.format(\"sighash\")).substring(0, 10);\n  }\n  /**\n   *  Returns a string representation of this fragment as %%format%%.\n   */\n  format(e) {\n    if (e == null && (e = \"sighash\"), e === \"json\")\n      return JSON.stringify({\n        type: \"error\",\n        name: this.name,\n        inputs: this.inputs.map((n) => JSON.parse(n.format(e)))\n      });\n    let t = [];\n    return e !== \"sighash\" && t.push(\"error\"), t.push(this.name + Ks(e, this.inputs)), t.join(\" \");\n  }\n  /**\n   *  Returns a new **ErrorFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (r.isFragment(e))\n      return e;\n    if (typeof e == \"string\")\n      return r.from(vr(e));\n    if (e instanceof Rt) {\n      let t = fo(\"error\", e), n = Xt(e);\n      return cn(e), new r(he, t, n);\n    }\n    return new r(he, e.name, e.inputs ? e.inputs.map(me.from) : []);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is an\n   *  **ErrorFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === gl;\n  }\n}, Ot = class r extends er {\n  static {\n    a(this, \"EventFragment\");\n  }\n  /**\n   *  Whether this event is anonymous.\n   */\n  anonymous;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s) {\n    super(e, \"event\", t, n), Object.defineProperty(this, Je, { value: yl }), P(this, { anonymous: s });\n  }\n  /**\n   *  The Event topic hash.\n   */\n  get topicHash() {\n    return Oe(this.format(\"sighash\"));\n  }\n  /**\n   *  Returns a string representation of this event as %%format%%.\n   */\n  format(e) {\n    if (e == null && (e = \"sighash\"), e === \"json\")\n      return JSON.stringify({\n        type: \"event\",\n        anonymous: this.anonymous,\n        name: this.name,\n        inputs: this.inputs.map((n) => JSON.parse(n.format(e)))\n      });\n    let t = [];\n    return e !== \"sighash\" && t.push(\"event\"), t.push(this.name + Ks(e, this.inputs)), e !== \"sighash\" && this.anonymous && t.push(\"anonymous\"), t.join(\" \");\n  }\n  /**\n   *  Return the topic hash for an event with %%name%% and %%params%%.\n   */\n  static getTopicHash(e, t) {\n    return t = (t || []).map((s) => me.from(s)), new r(he, e, t, !1).topicHash;\n  }\n  /**\n   *  Returns a new **EventFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (r.isFragment(e))\n      return e;\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e));\n      } catch {\n        h(!1, \"invalid event fragment\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      let t = fo(\"event\", e), n = Xt(e, !0), s = !!$t(e, Ve([\"anonymous\"])).has(\"anonymous\");\n      return cn(e), new r(he, t, n, s);\n    }\n    return new r(he, e.name, e.inputs ? e.inputs.map((t) => me.from(t, !0)) : [], !!e.anonymous);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is an\n   *  **EventFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === yl;\n  }\n}, St = class r extends Lt {\n  static {\n    a(this, \"ConstructorFragment\");\n  }\n  /**\n   *  Whether the constructor can receive an endowment.\n   */\n  payable;\n  /**\n   *  The recommended gas limit for deployment or ``null``.\n   */\n  gas;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i) {\n    super(e, t, n), Object.defineProperty(this, Je, { value: wl }), P(this, { payable: s, gas: i });\n  }\n  /**\n   *  Returns a string representation of this constructor as %%format%%.\n   */\n  format(e) {\n    if (b(e != null && e !== \"sighash\", \"cannot format a constructor for sighash\", \"UNSUPPORTED_OPERATION\", { operation: \"format(sighash)\" }), e === \"json\")\n      return JSON.stringify({\n        type: \"constructor\",\n        stateMutability: this.payable ? \"payable\" : \"undefined\",\n        payable: this.payable,\n        gas: this.gas != null ? this.gas : void 0,\n        inputs: this.inputs.map((n) => JSON.parse(n.format(e)))\n      });\n    let t = [`constructor${Ks(e, this.inputs)}`];\n    return this.payable && t.push(\"payable\"), this.gas != null && t.push(`@${this.gas.toString()}`), t.join(\" \");\n  }\n  /**\n   *  Returns a new **ConstructorFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (r.isFragment(e))\n      return e;\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e));\n      } catch {\n        h(!1, \"invalid constuctor fragment\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      $t(e, Ve([\"constructor\"]));\n      let t = Xt(e), n = !!$t(e, kx).has(\"payable\"), s = Cl(e);\n      return cn(e), new r(he, \"constructor\", t, n, s);\n    }\n    return new r(he, \"constructor\", e.inputs ? e.inputs.map(me.from) : [], !!e.payable, e.gas != null ? e.gas : null);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is a\n   *  **ConstructorFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === wl;\n  }\n}, fn = class r extends Lt {\n  static {\n    a(this, \"FallbackFragment\");\n  }\n  /**\n   *  If the function can be sent value during invocation.\n   */\n  payable;\n  constructor(e, t, n) {\n    super(e, \"fallback\", t), Object.defineProperty(this, Je, { value: Al }), P(this, { payable: n });\n  }\n  /**\n   *  Returns a string representation of this fallback as %%format%%.\n   */\n  format(e) {\n    let t = this.inputs.length === 0 ? \"receive\" : \"fallback\";\n    if (e === \"json\") {\n      let n = this.payable ? \"payable\" : \"nonpayable\";\n      return JSON.stringify({ type: t, stateMutability: n });\n    }\n    return `${t}()${this.payable ? \" payable\" : \"\"}`;\n  }\n  /**\n   *  Returns a new **FallbackFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (r.isFragment(e))\n      return e;\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e));\n      } catch {\n        h(!1, \"invalid fallback fragment\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      let t = e.toString(), n = e.peekKeyword(Ve([\"fallback\", \"receive\"]));\n      if (h(n, \"type must be fallback or receive\", \"obj\", t), e.popKeyword(Ve([\"fallback\", \"receive\"])) === \"receive\") {\n        let c = Xt(e);\n        return h(c.length === 0, \"receive cannot have arguments\", \"obj.inputs\", c), $t(e, Ve([\"payable\"])), cn(e), new r(he, [], !0);\n      }\n      let i = Xt(e);\n      i.length ? h(i.length === 1 && i[0].type === \"bytes\", \"invalid fallback inputs\", \"obj.inputs\", i.map((c) => c.format(\"minimal\")).join(\", \")) : i = [me.from(\"bytes\")];\n      let o = Il(e);\n      if (h(o === \"nonpayable\" || o === \"payable\", \"fallback cannot be constants\", \"obj.stateMutability\", o), $t(e, Ve([\"returns\"])).has(\"returns\")) {\n        let c = Xt(e);\n        h(c.length === 1 && c[0].type === \"bytes\", \"invalid fallback outputs\", \"obj.outputs\", c.map((f) => f.format(\"minimal\")).join(\", \"));\n      }\n      return cn(e), new r(he, i, o === \"payable\");\n    }\n    if (e.type === \"receive\")\n      return new r(he, [], !0);\n    if (e.type === \"fallback\") {\n      let t = [me.from(\"bytes\")], n = e.stateMutability === \"payable\";\n      return new r(he, t, n);\n    }\n    h(!1, \"invalid fallback description\", \"obj\", e);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is a\n   *  **FallbackFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === Al;\n  }\n}, Ut = class r extends er {\n  static {\n    a(this, \"FunctionFragment\");\n  }\n  /**\n   *  If the function is constant (e.g. ``pure`` or ``view`` functions).\n   */\n  constant;\n  /**\n   *  The returned types for the result of calling this function.\n   */\n  outputs;\n  /**\n   *  The state mutability (e.g. ``payable``, ``nonpayable``, ``view``\n   *  or ``pure``)\n   */\n  stateMutability;\n  /**\n   *  If the function can be sent value during invocation.\n   */\n  payable;\n  /**\n   *  The recommended gas limit to send when calling this function.\n   */\n  gas;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i, o) {\n    super(e, \"function\", t, s), Object.defineProperty(this, Je, { value: El }), i = Object.freeze(i.slice()), P(this, { constant: n === \"view\" || n === \"pure\", gas: o, outputs: i, payable: n === \"payable\", stateMutability: n });\n  }\n  /**\n   *  The Function selector.\n   */\n  get selector() {\n    return Oe(this.format(\"sighash\")).substring(0, 10);\n  }\n  /**\n   *  Returns a string representation of this function as %%format%%.\n   */\n  format(e) {\n    if (e == null && (e = \"sighash\"), e === \"json\")\n      return JSON.stringify({\n        type: \"function\",\n        name: this.name,\n        constant: this.constant,\n        stateMutability: this.stateMutability !== \"nonpayable\" ? this.stateMutability : void 0,\n        payable: this.payable,\n        gas: this.gas != null ? this.gas : void 0,\n        inputs: this.inputs.map((n) => JSON.parse(n.format(e))),\n        outputs: this.outputs.map((n) => JSON.parse(n.format(e)))\n      });\n    let t = [];\n    return e !== \"sighash\" && t.push(\"function\"), t.push(this.name + Ks(e, this.inputs)), e !== \"sighash\" && (this.stateMutability !== \"nonpayable\" && t.push(this.stateMutability), this.outputs && this.outputs.length && (t.push(\"returns\"), t.push(Ks(e, this.outputs))), this.gas != null && t.push(`@${this.gas.toString()}`)), t.join(\" \");\n  }\n  /**\n   *  Return the selector for a function with %%name%% and %%params%%.\n   */\n  static getSelector(e, t) {\n    return t = (t || []).map((s) => me.from(s)), new r(he, e, \"view\", t, [], null).selector;\n  }\n  /**\n   *  Returns a new **FunctionFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (r.isFragment(e))\n      return e;\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e));\n      } catch {\n        h(!1, \"invalid function fragment\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      let n = fo(\"function\", e), s = Xt(e), i = Il(e), o = [];\n      $t(e, Ve([\"returns\"])).has(\"returns\") && (o = Xt(e));\n      let c = Cl(e);\n      return cn(e), new r(he, n, i, s, o, c);\n    }\n    let t = e.stateMutability;\n    return t == null && (t = \"payable\", typeof e.constant == \"boolean\" ? (t = \"view\", e.constant || (t = \"payable\", typeof e.payable == \"boolean\" && !e.payable && (t = \"nonpayable\"))) : typeof e.payable == \"boolean\" && !e.payable && (t = \"nonpayable\")), new r(he, e.name, t, e.inputs ? e.inputs.map(me.from) : [], e.outputs ? e.outputs.map(me.from) : [], e.gas != null ? e.gas : null);\n  }\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is a\n   *  **FunctionFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === El;\n  }\n}, Rr = class r extends er {\n  static {\n    a(this, \"StructFragment\");\n  }\n  /**\n   *  @private\n   */\n  constructor(e, t, n) {\n    super(e, \"struct\", t, n), Object.defineProperty(this, Je, { value: Pl });\n  }\n  /**\n   *  Returns a string representation of this struct as %%format%%.\n   */\n  format() {\n    throw new Error(\"@TODO\");\n  }\n  /**\n   *  Returns a new **StructFragment** for %%obj%%.\n   */\n  static from(e) {\n    if (typeof e == \"string\")\n      try {\n        return r.from(vr(e));\n      } catch {\n        h(!1, \"invalid struct fragment\", \"obj\", e);\n      }\n    else if (e instanceof Rt) {\n      let t = fo(\"struct\", e), n = Xt(e);\n      return cn(e), new r(he, t, n);\n    }\n    return new r(he, e.name, e.inputs ? e.inputs.map(me.from) : []);\n  }\n  // @TODO: fix this return type\n  /**\n   *  Returns ``true`` and provides a type guard if %%value%% is a\n   *  **StructFragment**.\n   */\n  static isFragment(e) {\n    return e && e[Je] === Pl;\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/abi-coder.js\nvar vt = /* @__PURE__ */ new Map();\nvt.set(0, \"GENERIC_PANIC\");\nvt.set(1, \"ASSERT_FALSE\");\nvt.set(17, \"OVERFLOW\");\nvt.set(18, \"DIVIDE_BY_ZERO\");\nvt.set(33, \"ENUM_RANGE_ERROR\");\nvt.set(34, \"BAD_STORAGE_DATA\");\nvt.set(49, \"STACK_UNDERFLOW\");\nvt.set(50, \"ARRAY_RANGE_ERROR\");\nvt.set(65, \"OUT_OF_MEMORY\");\nvt.set(81, \"UNINITIALIZED_FUNCTION_CALL\");\nvar Lx = new RegExp(/^bytes([0-9]*)$/), Dx = new RegExp(/^(u?int)([0-9]*)$/), $a = null, Ol = 1024;\nfunction Fx(r, e, t, n) {\n  let s = \"missing revert data\", i = null, o = null, c = null;\n  if (t) {\n    s = \"execution reverted\";\n    let l = E(t);\n    if (t = w(t), l.length === 0)\n      s += \" (no data present; likely require(false) occurred\", i = \"require(false)\";\n    else if (l.length % 32 !== 4)\n      s += \" (could not decode reason; invalid data length)\";\n    else if (w(l.slice(0, 4)) === \"0x08c379a0\")\n      try {\n        i = n.decode([\"string\"], l.slice(4))[0], c = {\n          signature: \"Error(string)\",\n          name: \"Error\",\n          args: [i]\n        }, s += `: ${JSON.stringify(i)}`;\n      } catch {\n        s += \" (could not decode reason; invalid string data)\";\n      }\n    else if (w(l.slice(0, 4)) === \"0x4e487b71\")\n      try {\n        let u = Number(n.decode([\"uint256\"], l.slice(4))[0]);\n        c = {\n          signature: \"Panic(uint256)\",\n          name: \"Panic\",\n          args: [u]\n        }, i = `Panic due to ${vt.get(u) || \"UNKNOWN\"}(${u})`, s += `: ${i}`;\n      } catch {\n        s += \" (could not decode panic code)\";\n      }\n    else\n      s += \" (unknown custom error)\";\n  }\n  let f = {\n    to: e.to ? U(e.to) : null,\n    data: e.data || \"0x\"\n  };\n  return e.from && (f.from = U(e.from)), Q(s, \"CALL_EXCEPTION\", {\n    action: r,\n    data: t,\n    reason: i,\n    transaction: f,\n    invocation: o,\n    revert: c\n  });\n}\na(Fx, \"getBuiltinCallException\");\nvar st = class r {\n  static {\n    a(this, \"AbiCoder\");\n  }\n  #e(e) {\n    if (e.isArray())\n      return new Ki(this.#e(e.arrayChildren), e.arrayLength, e.name);\n    if (e.isTuple())\n      return new rn(e.components.map((n) => this.#e(n)), e.name);\n    switch (e.baseType) {\n      case \"address\":\n        return new zi(e.name);\n      case \"bool\":\n        return new Qi(e.name);\n      case \"string\":\n        return new qi(e.name);\n      case \"bytes\":\n        return new Ji(e.name);\n      case \"\":\n        return new ji(e.name);\n    }\n    let t = e.type.match(Dx);\n    if (t) {\n      let n = parseInt(t[2] || \"256\");\n      return h(n !== 0 && n <= 256 && n % 8 === 0, \"invalid \" + t[1] + \" bit length\", \"param\", e), new Zi(n / 8, t[1] === \"int\", e.name);\n    }\n    if (t = e.type.match(Lx), t) {\n      let n = parseInt(t[1]);\n      return h(n !== 0 && n <= 32, \"invalid bytes length\", \"param\", e), new Wi(n, e.name);\n    }\n    h(!1, \"invalid type\", \"type\", e.type);\n  }\n  /**\n   *  Get the default values for the given %%types%%.\n   *\n   *  For example, a ``uint`` is by default ``0`` and ``bool``\n   *  is by default ``false``.\n   */\n  getDefaultValue(e) {\n    let t = e.map((s) => this.#e(me.from(s)));\n    return new rn(t, \"_\").defaultValue();\n  }\n  /**\n   *  Encode the %%values%% as the %%types%% into ABI data.\n   *\n   *  @returns DataHexstring\n   */\n  encode(e, t) {\n    zr(t.length, e.length, \"types/values length mismatch\");\n    let n = e.map((o) => this.#e(me.from(o))), s = new rn(n, \"_\"), i = new jr();\n    return s.encode(i, t), i.data;\n  }\n  /**\n   *  Decode the ABI %%data%% as the %%types%% into values.\n   *\n   *  If %%loose%% decoding is enabled, then strict padding is\n   *  not enforced. Some older versions of Solidity incorrectly\n   *  padded event data emitted from ``external`` functions.\n   */\n  decode(e, t, n) {\n    let s = e.map((o) => this.#e(me.from(o)));\n    return new rn(s, \"_\").decode(new Pi(t, n, Ol));\n  }\n  static _setDefaultMaxInflation(e) {\n    h(typeof e == \"number\" && Number.isInteger(e), \"invalid defaultMaxInflation factor\", \"value\", e), Ol = e;\n  }\n  /**\n   *  Returns the shared singleton instance of a default [[AbiCoder]].\n   *\n   *  On the first call, the instance is created internally.\n   */\n  static defaultAbiCoder() {\n    return $a == null && ($a = new r()), $a;\n  }\n  /**\n   *  Returns an ethers-compatible [[CallExceptionError]] Error for the given\n   *  result %%data%% for the [[CallExceptionAction]] %%action%% against\n   *  the Transaction %%tx%%.\n   */\n  static getBuiltinCallException(e, t, n) {\n    return Fx(e, t, n, r.defaultAbiCoder());\n  }\n};\n\n// node_modules/ethers/lib.esm/abi/bytes32.js\nfunction ec(r) {\n  let e = re(r);\n  if (e.length > 31)\n    throw new Error(\"bytes32 string must be less than 32 bytes\");\n  return zt(e, 32);\n}\na(ec, \"encodeBytes32String\");\nfunction tc(r) {\n  let e = E(r, \"bytes\");\n  if (e.length !== 32)\n    throw new Error(\"invalid bytes32 - not 32 bytes long\");\n  if (e[31] !== 0)\n    throw new Error(\"invalid bytes32 string - no null terminator\");\n  let t = 31;\n  for (; e[t - 1] === 0; )\n    t--;\n  return He(e.slice(0, t));\n}\na(tc, \"decodeBytes32String\");\n\n// node_modules/ethers/lib.esm/abi/interface.js\nvar rs = class {\n  static {\n    a(this, \"LogDescription\");\n  }\n  /**\n   *  The matching fragment for the ``topic0``.\n   */\n  fragment;\n  /**\n   *  The name of the Event.\n   */\n  name;\n  /**\n   *  The full Event signature.\n   */\n  signature;\n  /**\n   *  The topic hash for the Event.\n   */\n  topic;\n  /**\n   *  The arguments passed into the Event with ``emit``.\n   */\n  args;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n) {\n    let s = e.name, i = e.format();\n    P(this, {\n      fragment: e,\n      name: s,\n      signature: i,\n      topic: t,\n      args: n\n    });\n  }\n}, ns = class {\n  static {\n    a(this, \"TransactionDescription\");\n  }\n  /**\n   *  The matching fragment from the transaction ``data``.\n   */\n  fragment;\n  /**\n   *  The name of the Function from the transaction ``data``.\n   */\n  name;\n  /**\n   *  The arguments passed to the Function from the transaction ``data``.\n   */\n  args;\n  /**\n   *  The full Function signature from the transaction ``data``.\n   */\n  signature;\n  /**\n   *  The selector for the Function from the transaction ``data``.\n   */\n  selector;\n  /**\n   *  The ``value`` (in wei) from the transaction.\n   */\n  value;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n, s) {\n    let i = e.name, o = e.format();\n    P(this, {\n      fragment: e,\n      name: i,\n      args: n,\n      signature: o,\n      selector: t,\n      value: s\n    });\n  }\n}, ss = class {\n  static {\n    a(this, \"ErrorDescription\");\n  }\n  /**\n   *  The matching fragment.\n   */\n  fragment;\n  /**\n   *  The name of the Error.\n   */\n  name;\n  /**\n   *  The arguments passed to the Error with ``revert``.\n   */\n  args;\n  /**\n   *  The full Error signature.\n   */\n  signature;\n  /**\n   *  The selector for the Error.\n   */\n  selector;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n) {\n    let s = e.name, i = e.format();\n    P(this, {\n      fragment: e,\n      name: s,\n      args: n,\n      signature: i,\n      selector: t\n    });\n  }\n}, ln = class {\n  static {\n    a(this, \"Indexed\");\n  }\n  /**\n   *  The ``keccak256`` of the value logged.\n   */\n  hash;\n  /**\n   *  @_ignore:\n   */\n  _isIndexed;\n  /**\n   *  Returns ``true`` if %%value%% is an **Indexed**.\n   *\n   *  This provides a Type Guard for property access.\n   */\n  static isIndexed(e) {\n    return !!(e && e._isIndexed);\n  }\n  /**\n   *  @_ignore:\n   */\n  constructor(e) {\n    P(this, { hash: e, _isIndexed: !0 });\n  }\n}, Sl = {\n  0: \"generic panic\",\n  1: \"assert(false)\",\n  17: \"arithmetic overflow\",\n  18: \"division or modulo by zero\",\n  33: \"enum overflow\",\n  34: \"invalid encoded storage byte array accessed\",\n  49: \"out-of-bounds array access; popping on an empty array\",\n  50: \"out-of-bounds access of an array or bytesN\",\n  65: \"out of memory\",\n  81: \"uninitialized function\"\n}, Ul = {\n  \"0x08c379a0\": {\n    signature: \"Error(string)\",\n    name: \"Error\",\n    inputs: [\"string\"],\n    reason: /* @__PURE__ */ a((r) => `reverted with reason string ${JSON.stringify(r)}`, \"reason\")\n  },\n  \"0x4e487b71\": {\n    signature: \"Panic(uint256)\",\n    name: \"Panic\",\n    inputs: [\"uint256\"],\n    reason: /* @__PURE__ */ a((r) => {\n      let e = \"unknown panic code\";\n      return r >= 0 && r <= 255 && Sl[r.toString()] && (e = Sl[r.toString()]), `reverted with panic code 0x${r.toString(16)} (${e})`;\n    }, \"reason\")\n  }\n}, tr = class r {\n  static {\n    a(this, \"Interface\");\n  }\n  /**\n   *  All the Contract ABI members (i.e. methods, events, errors, etc).\n   */\n  fragments;\n  /**\n   *  The Contract constructor.\n   */\n  deploy;\n  /**\n   *  The Fallback method, if any.\n   */\n  fallback;\n  /**\n   *  If receiving ether is supported.\n   */\n  receive;\n  #e;\n  #t;\n  #r;\n  //    #structs: Map<string, StructFragment>;\n  #n;\n  /**\n   *  Create a new Interface for the %%fragments%%.\n   */\n  constructor(e) {\n    let t = [];\n    typeof e == \"string\" ? t = JSON.parse(e) : t = e, this.#r = /* @__PURE__ */ new Map(), this.#e = /* @__PURE__ */ new Map(), this.#t = /* @__PURE__ */ new Map();\n    let n = [];\n    for (let o of t)\n      try {\n        n.push(Lt.from(o));\n      } catch (c) {\n        console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`, c.message);\n      }\n    P(this, {\n      fragments: Object.freeze(n)\n    });\n    let s = null, i = !1;\n    this.#n = this.getAbiCoder(), this.fragments.forEach((o, c) => {\n      let f;\n      switch (o.type) {\n        case \"constructor\":\n          if (this.deploy) {\n            console.log(\"duplicate definition - constructor\");\n            return;\n          }\n          P(this, { deploy: o });\n          return;\n        case \"fallback\":\n          o.inputs.length === 0 ? i = !0 : (h(!s || o.payable !== s.payable, \"conflicting fallback fragments\", `fragments[${c}]`, o), s = o, i = s.payable);\n          return;\n        case \"function\":\n          f = this.#r;\n          break;\n        case \"event\":\n          f = this.#t;\n          break;\n        case \"error\":\n          f = this.#e;\n          break;\n        default:\n          return;\n      }\n      let l = o.format();\n      f.has(l) || f.set(l, o);\n    }), this.deploy || P(this, {\n      deploy: St.from(\"constructor()\")\n    }), P(this, { fallback: s, receive: i });\n  }\n  /**\n   *  Returns the entire Human-Readable ABI, as an array of\n   *  signatures, optionally as %%minimal%% strings, which\n   *  removes parameter names and unneceesary spaces.\n   */\n  format(e) {\n    let t = e ? \"minimal\" : \"full\";\n    return this.fragments.map((s) => s.format(t));\n  }\n  /**\n   *  Return the JSON-encoded ABI. This is the format Solidiy\n   *  returns.\n   */\n  formatJson() {\n    let e = this.fragments.map((t) => t.format(\"json\"));\n    return JSON.stringify(e.map((t) => JSON.parse(t)));\n  }\n  /**\n   *  The ABI coder that will be used to encode and decode binary\n   *  data.\n   */\n  getAbiCoder() {\n    return st.defaultAbiCoder();\n  }\n  // Find a function definition by any means necessary (unless it is ambiguous)\n  #s(e, t, n) {\n    if (z(e)) {\n      let i = e.toLowerCase();\n      for (let o of this.#r.values())\n        if (i === o.selector)\n          return o;\n      return null;\n    }\n    if (e.indexOf(\"(\") === -1) {\n      let i = [];\n      for (let [o, c] of this.#r)\n        o.split(\n          \"(\"\n          /* fix:) */\n        )[0] === e && i.push(c);\n      if (t) {\n        let o = t.length > 0 ? t[t.length - 1] : null, c = t.length, f = !0;\n        se.isTyped(o) && o.type === \"overrides\" && (f = !1, c--);\n        for (let l = i.length - 1; l >= 0; l--) {\n          let u = i[l].inputs.length;\n          u !== c && (!f || u !== c - 1) && i.splice(l, 1);\n        }\n        for (let l = i.length - 1; l >= 0; l--) {\n          let u = i[l].inputs;\n          for (let d = 0; d < t.length; d++)\n            if (se.isTyped(t[d])) {\n              if (d >= u.length) {\n                if (t[d].type === \"overrides\")\n                  continue;\n                i.splice(l, 1);\n                break;\n              }\n              if (t[d].type !== u[d].baseType) {\n                i.splice(l, 1);\n                break;\n              }\n            }\n        }\n      }\n      if (i.length === 1 && t && t.length !== i[0].inputs.length) {\n        let o = t[t.length - 1];\n        (o == null || Array.isArray(o) || typeof o != \"object\") && i.splice(0, 1);\n      }\n      if (i.length === 0)\n        return null;\n      if (i.length > 1 && n) {\n        let o = i.map((c) => JSON.stringify(c.format())).join(\", \");\n        h(!1, `ambiguous function description (i.e. matches ${o})`, \"key\", e);\n      }\n      return i[0];\n    }\n    let s = this.#r.get(Ut.from(e).format());\n    return s || null;\n  }\n  /**\n   *  Get the function name for %%key%%, which may be a function selector,\n   *  function name or function signature that belongs to the ABI.\n   */\n  getFunctionName(e) {\n    let t = this.#s(e, null, !1);\n    return h(t, \"no matching function\", \"key\", e), t.name;\n  }\n  /**\n   *  Returns true if %%key%% (a function selector, function name or\n   *  function signature) is present in the ABI.\n   *\n   *  In the case of a function name, the name may be ambiguous, so\n   *  accessing the [[FunctionFragment]] may require refinement.\n   */\n  hasFunction(e) {\n    return !!this.#s(e, null, !1);\n  }\n  /**\n   *  Get the [[FunctionFragment]] for %%key%%, which may be a function\n   *  selector, function name or function signature that belongs to the ABI.\n   *\n   *  If %%values%% is provided, it will use the Typed API to handle\n   *  ambiguous cases where multiple functions match by name.\n   *\n   *  If the %%key%% and %%values%% do not refine to a single function in\n   *  the ABI, this will throw.\n   */\n  getFunction(e, t) {\n    return this.#s(e, t || null, !0);\n  }\n  /**\n   *  Iterate over all functions, calling %%callback%%, sorted by their name.\n   */\n  forEachFunction(e) {\n    let t = Array.from(this.#r.keys());\n    t.sort((n, s) => n.localeCompare(s));\n    for (let n = 0; n < t.length; n++) {\n      let s = t[n];\n      e(this.#r.get(s), n);\n    }\n  }\n  // Find an event definition by any means necessary (unless it is ambiguous)\n  #o(e, t, n) {\n    if (z(e)) {\n      let i = e.toLowerCase();\n      for (let o of this.#t.values())\n        if (i === o.topicHash)\n          return o;\n      return null;\n    }\n    if (e.indexOf(\"(\") === -1) {\n      let i = [];\n      for (let [o, c] of this.#t)\n        o.split(\n          \"(\"\n          /* fix:) */\n        )[0] === e && i.push(c);\n      if (t) {\n        for (let o = i.length - 1; o >= 0; o--)\n          i[o].inputs.length < t.length && i.splice(o, 1);\n        for (let o = i.length - 1; o >= 0; o--) {\n          let c = i[o].inputs;\n          for (let f = 0; f < t.length; f++)\n            if (se.isTyped(t[f]) && t[f].type !== c[f].baseType) {\n              i.splice(o, 1);\n              break;\n            }\n        }\n      }\n      if (i.length === 0)\n        return null;\n      if (i.length > 1 && n) {\n        let o = i.map((c) => JSON.stringify(c.format())).join(\", \");\n        h(!1, `ambiguous event description (i.e. matches ${o})`, \"key\", e);\n      }\n      return i[0];\n    }\n    let s = this.#t.get(Ot.from(e).format());\n    return s || null;\n  }\n  /**\n   *  Get the event name for %%key%%, which may be a topic hash,\n   *  event name or event signature that belongs to the ABI.\n   */\n  getEventName(e) {\n    let t = this.#o(e, null, !1);\n    return h(t, \"no matching event\", \"key\", e), t.name;\n  }\n  /**\n   *  Returns true if %%key%% (an event topic hash, event name or\n   *  event signature) is present in the ABI.\n   *\n   *  In the case of an event name, the name may be ambiguous, so\n   *  accessing the [[EventFragment]] may require refinement.\n   */\n  hasEvent(e) {\n    return !!this.#o(e, null, !1);\n  }\n  /**\n   *  Get the [[EventFragment]] for %%key%%, which may be a topic hash,\n   *  event name or event signature that belongs to the ABI.\n   *\n   *  If %%values%% is provided, it will use the Typed API to handle\n   *  ambiguous cases where multiple events match by name.\n   *\n   *  If the %%key%% and %%values%% do not refine to a single event in\n   *  the ABI, this will throw.\n   */\n  getEvent(e, t) {\n    return this.#o(e, t || null, !0);\n  }\n  /**\n   *  Iterate over all events, calling %%callback%%, sorted by their name.\n   */\n  forEachEvent(e) {\n    let t = Array.from(this.#t.keys());\n    t.sort((n, s) => n.localeCompare(s));\n    for (let n = 0; n < t.length; n++) {\n      let s = t[n];\n      e(this.#t.get(s), n);\n    }\n  }\n  /**\n   *  Get the [[ErrorFragment]] for %%key%%, which may be an error\n   *  selector, error name or error signature that belongs to the ABI.\n   *\n   *  If %%values%% is provided, it will use the Typed API to handle\n   *  ambiguous cases where multiple errors match by name.\n   *\n   *  If the %%key%% and %%values%% do not refine to a single error in\n   *  the ABI, this will throw.\n   */\n  getError(e, t) {\n    if (z(e)) {\n      let s = e.toLowerCase();\n      if (Ul[s])\n        return Ke.from(Ul[s].signature);\n      for (let i of this.#e.values())\n        if (s === i.selector)\n          return i;\n      return null;\n    }\n    if (e.indexOf(\"(\") === -1) {\n      let s = [];\n      for (let [i, o] of this.#e)\n        i.split(\n          \"(\"\n          /* fix:) */\n        )[0] === e && s.push(o);\n      if (s.length === 0)\n        return e === \"Error\" ? Ke.from(\"error Error(string)\") : e === \"Panic\" ? Ke.from(\"error Panic(uint256)\") : null;\n      if (s.length > 1) {\n        let i = s.map((o) => JSON.stringify(o.format())).join(\", \");\n        h(!1, `ambiguous error description (i.e. ${i})`, \"name\", e);\n      }\n      return s[0];\n    }\n    if (e = Ke.from(e).format(), e === \"Error(string)\")\n      return Ke.from(\"error Error(string)\");\n    if (e === \"Panic(uint256)\")\n      return Ke.from(\"error Panic(uint256)\");\n    let n = this.#e.get(e);\n    return n || null;\n  }\n  /**\n   *  Iterate over all errors, calling %%callback%%, sorted by their name.\n   */\n  forEachError(e) {\n    let t = Array.from(this.#e.keys());\n    t.sort((n, s) => n.localeCompare(s));\n    for (let n = 0; n < t.length; n++) {\n      let s = t[n];\n      e(this.#e.get(s), n);\n    }\n  }\n  // Get the 4-byte selector used by Solidity to identify a function\n  /*\n  getSelector(fragment: ErrorFragment | FunctionFragment): string {\n      if (typeof(fragment) === \"string\") {\n          const matches: Array<Fragment> = [ ];\n  \n          try { matches.push(this.getFunction(fragment)); } catch (error) { }\n          try { matches.push(this.getError(<string>fragment)); } catch (_) { }\n  \n          if (matches.length === 0) {\n              logger.throwArgumentError(\"unknown fragment\", \"key\", fragment);\n          } else if (matches.length > 1) {\n              logger.throwArgumentError(\"ambiguous fragment matches function and error\", \"key\", fragment);\n          }\n  \n          fragment = matches[0];\n      }\n  \n      return dataSlice(id(fragment.format()), 0, 4);\n  }\n      */\n  // Get the 32-byte topic hash used by Solidity to identify an event\n  /*\n  getEventTopic(fragment: EventFragment): string {\n      //if (typeof(fragment) === \"string\") { fragment = this.getEvent(eventFragment); }\n      return id(fragment.format());\n  }\n  */\n  _decodeParams(e, t) {\n    return this.#n.decode(e, t);\n  }\n  _encodeParams(e, t) {\n    return this.#n.encode(e, t);\n  }\n  /**\n   *  Encodes a ``tx.data`` object for deploying the Contract with\n   *  the %%values%% as the constructor arguments.\n   */\n  encodeDeploy(e) {\n    return this._encodeParams(this.deploy.inputs, e || []);\n  }\n  /**\n   *  Decodes the result %%data%% (e.g. from an ``eth_call``) for the\n   *  specified error (see [[getError]] for valid values for\n   *  %%key%%).\n   *\n   *  Most developers should prefer the [[parseCallResult]] method instead,\n   *  which will automatically detect a ``CALL_EXCEPTION`` and throw the\n   *  corresponding error.\n   */\n  decodeErrorResult(e, t) {\n    if (typeof e == \"string\") {\n      let n = this.getError(e);\n      h(n, \"unknown error\", \"fragment\", e), e = n;\n    }\n    return h(Y(t, 0, 4) === e.selector, `data signature does not match error ${e.name}.`, \"data\", t), this._decodeParams(e.inputs, Y(t, 4));\n  }\n  /**\n   *  Encodes the transaction revert data for a call result that\n   *  reverted from the the Contract with the sepcified %%error%%\n   *  (see [[getError]] for valid values for %%fragment%%) with the %%values%%.\n   *\n   *  This is generally not used by most developers, unless trying to mock\n   *  a result from a Contract.\n   */\n  encodeErrorResult(e, t) {\n    if (typeof e == \"string\") {\n      let n = this.getError(e);\n      h(n, \"unknown error\", \"fragment\", e), e = n;\n    }\n    return F([\n      e.selector,\n      this._encodeParams(e.inputs, t || [])\n    ]);\n  }\n  /**\n   *  Decodes the %%data%% from a transaction ``tx.data`` for\n   *  the function specified (see [[getFunction]] for valid values\n   *  for %%fragment%%).\n   *\n   *  Most developers should prefer the [[parseTransaction]] method\n   *  instead, which will automatically detect the fragment.\n   */\n  decodeFunctionData(e, t) {\n    if (typeof e == \"string\") {\n      let n = this.getFunction(e);\n      h(n, \"unknown function\", \"fragment\", e), e = n;\n    }\n    return h(Y(t, 0, 4) === e.selector, `data signature does not match function ${e.name}.`, \"data\", t), this._decodeParams(e.inputs, Y(t, 4));\n  }\n  /**\n   *  Encodes the ``tx.data`` for a transaction that calls the function\n   *  specified (see [[getFunction]] for valid values for %%fragment%%) with\n   *  the %%values%%.\n   */\n  encodeFunctionData(e, t) {\n    if (typeof e == \"string\") {\n      let n = this.getFunction(e);\n      h(n, \"unknown function\", \"fragment\", e), e = n;\n    }\n    return F([\n      e.selector,\n      this._encodeParams(e.inputs, t || [])\n    ]);\n  }\n  /**\n   *  Decodes the result %%data%% (e.g. from an ``eth_call``) for the\n   *  specified function (see [[getFunction]] for valid values for\n   *  %%key%%).\n   *\n   *  Most developers should prefer the [[parseCallResult]] method instead,\n   *  which will automatically detect a ``CALL_EXCEPTION`` and throw the\n   *  corresponding error.\n   */\n  decodeFunctionResult(e, t) {\n    if (typeof e == \"string\") {\n      let i = this.getFunction(e);\n      h(i, \"unknown function\", \"fragment\", e), e = i;\n    }\n    let n = \"invalid length for result data\", s = fe(t);\n    if (s.length % 32 === 0)\n      try {\n        return this.#n.decode(e.outputs, s);\n      } catch {\n        n = \"could not decode result data\";\n      }\n    b(!1, n, \"BAD_DATA\", {\n      value: w(s),\n      info: { method: e.name, signature: e.format() }\n    });\n  }\n  makeError(e, t) {\n    let n = E(e, \"data\"), s = st.getBuiltinCallException(\"call\", t, n);\n    if (s.message.startsWith(\"execution reverted (unknown custom error)\")) {\n      let c = w(n.slice(0, 4)), f = this.getError(c);\n      if (f)\n        try {\n          let l = this.#n.decode(f.inputs, n.slice(4));\n          s.revert = {\n            name: f.name,\n            signature: f.format(),\n            args: l\n          }, s.reason = s.revert.signature, s.message = `execution reverted: ${s.reason}`;\n        } catch {\n          s.message = \"execution reverted (coult not decode custom error)\";\n        }\n    }\n    let o = this.parseTransaction(t);\n    return o && (s.invocation = {\n      method: o.name,\n      signature: o.signature,\n      args: o.args\n    }), s;\n  }\n  /**\n   *  Encodes the result data (e.g. from an ``eth_call``) for the\n   *  specified function (see [[getFunction]] for valid values\n   *  for %%fragment%%) with %%values%%.\n   *\n   *  This is generally not used by most developers, unless trying to mock\n   *  a result from a Contract.\n   */\n  encodeFunctionResult(e, t) {\n    if (typeof e == \"string\") {\n      let n = this.getFunction(e);\n      h(n, \"unknown function\", \"fragment\", e), e = n;\n    }\n    return w(this.#n.encode(e.outputs, t || []));\n  }\n  /*\n      spelunk(inputs: Array<ParamType>, values: ReadonlyArray<any>, processfunc: (type: string, value: any) => Promise<any>): Promise<Array<any>> {\n          const promises: Array<Promise<>> = [ ];\n          const process = function(type: ParamType, value: any): any {\n              if (type.baseType === \"array\") {\n                  return descend(type.child\n              }\n              if (type. === \"address\") {\n              }\n          };\n  \n          const descend = function (inputs: Array<ParamType>, values: ReadonlyArray<any>) {\n              if (inputs.length !== values.length) { throw new Error(\"length mismatch\"); }\n              \n          };\n  \n          const result: Array<any> = [ ];\n          values.forEach((value, index) => {\n              if (value == null) {\n                  topics.push(null);\n              } else if (param.baseType === \"array\" || param.baseType === \"tuple\") {\n                  logger.throwArgumentError(\"filtering with tuples or arrays not supported\", (\"contract.\" + param.name), value);\n              } else if (Array.isArray(value)) {\n                  topics.push(value.map((value) => encodeTopic(param, value)));\n              } else {\n                  topics.push(encodeTopic(param, value));\n              }\n          });\n      }\n  */\n  // Create the filter for the event with search criteria (e.g. for eth_filterLog)\n  encodeFilterTopics(e, t) {\n    if (typeof e == \"string\") {\n      let i = this.getEvent(e);\n      h(i, \"unknown event\", \"eventFragment\", e), e = i;\n    }\n    b(t.length <= e.inputs.length, `too many arguments for ${e.format()}`, \"UNEXPECTED_ARGUMENT\", { count: t.length, expectedCount: e.inputs.length });\n    let n = [];\n    e.anonymous || n.push(e.topicHash);\n    let s = /* @__PURE__ */ a((i, o) => i.type === \"string\" ? Oe(o) : i.type === \"bytes\" ? G(w(o)) : (i.type === \"bool\" && typeof o == \"boolean\" ? o = o ? \"0x01\" : \"0x00\" : i.type.match(/^u?int/) ? o = Be(o) : i.type.match(/^bytes/) ? o = zt(o, 32) : i.type === \"address\" && this.#n.encode([\"address\"], [o]), ge(w(o), 32)), \"encodeTopic\");\n    for (t.forEach((i, o) => {\n      let c = e.inputs[o];\n      if (!c.indexed) {\n        h(i == null, \"cannot filter non-indexed parameters; must be null\", \"contract.\" + c.name, i);\n        return;\n      }\n      i == null ? n.push(null) : c.baseType === \"array\" || c.baseType === \"tuple\" ? h(!1, \"filtering with tuples or arrays not supported\", \"contract.\" + c.name, i) : Array.isArray(i) ? n.push(i.map((f) => s(c, f))) : n.push(s(c, i));\n    }); n.length && n[n.length - 1] === null; )\n      n.pop();\n    return n;\n  }\n  encodeEventLog(e, t) {\n    if (typeof e == \"string\") {\n      let o = this.getEvent(e);\n      h(o, \"unknown event\", \"eventFragment\", e), e = o;\n    }\n    let n = [], s = [], i = [];\n    return e.anonymous || n.push(e.topicHash), h(t.length === e.inputs.length, \"event arguments/values mismatch\", \"values\", t), e.inputs.forEach((o, c) => {\n      let f = t[c];\n      if (o.indexed)\n        if (o.type === \"string\")\n          n.push(Oe(f));\n        else if (o.type === \"bytes\")\n          n.push(G(f));\n        else {\n          if (o.baseType === \"tuple\" || o.baseType === \"array\")\n            throw new Error(\"not implemented\");\n          n.push(this.#n.encode([o.type], [f]));\n        }\n      else\n        s.push(o), i.push(f);\n    }), {\n      data: this.#n.encode(s, i),\n      topics: n\n    };\n  }\n  // Decode a filter for the event and the search criteria\n  decodeEventLog(e, t, n) {\n    if (typeof e == \"string\") {\n      let p = this.getEvent(e);\n      h(p, \"unknown event\", \"eventFragment\", e), e = p;\n    }\n    if (n != null && !e.anonymous) {\n      let p = e.topicHash;\n      h(z(n[0], 32) && n[0].toLowerCase() === p, \"fragment/topic mismatch\", \"topics[0]\", n[0]), n = n.slice(1);\n    }\n    let s = [], i = [], o = [];\n    e.inputs.forEach((p, g) => {\n      p.indexed ? p.type === \"string\" || p.type === \"bytes\" || p.baseType === \"tuple\" || p.baseType === \"array\" ? (s.push(me.from({ type: \"bytes32\", name: p.name })), o.push(!0)) : (s.push(p), o.push(!1)) : (i.push(p), o.push(!1));\n    });\n    let c = n != null ? this.#n.decode(s, F(n)) : null, f = this.#n.decode(i, t, !0), l = [], u = [], d = 0, x = 0;\n    return e.inputs.forEach((p, g) => {\n      let m = null;\n      if (p.indexed)\n        if (c == null)\n          m = new ln(null);\n        else if (o[g])\n          m = new ln(c[x++]);\n        else\n          try {\n            m = c[x++];\n          } catch (y) {\n            m = y;\n          }\n      else\n        try {\n          m = f[d++];\n        } catch (y) {\n          m = y;\n        }\n      l.push(m), u.push(p.name || null);\n    }), mt.fromItems(l, u);\n  }\n  /**\n   *  Parses a transaction, finding the matching function and extracts\n   *  the parameter values along with other useful function details.\n   *\n   *  If the matching function cannot be found, return null.\n   */\n  parseTransaction(e) {\n    let t = E(e.data, \"tx.data\"), n = k(e.value != null ? e.value : 0, \"tx.value\"), s = this.getFunction(w(t.slice(0, 4)));\n    if (!s)\n      return null;\n    let i = this.#n.decode(s.inputs, t.slice(4));\n    return new ns(s, s.selector, i, n);\n  }\n  parseCallResult(e) {\n    throw new Error(\"@TODO\");\n  }\n  /**\n   *  Parses a receipt log, finding the matching event and extracts\n   *  the parameter values along with other useful event details.\n   *\n   *  If the matching event cannot be found, returns null.\n   */\n  parseLog(e) {\n    let t = this.getEvent(e.topics[0]);\n    return !t || t.anonymous ? null : new rs(t, t.topicHash, this.decodeEventLog(t, e.data, e.topics));\n  }\n  /**\n   *  Parses a revert data, finding the matching error and extracts\n   *  the parameter values along with other useful error details.\n   *\n   *  If the matching error cannot be found, returns null.\n   */\n  parseError(e) {\n    let t = w(e), n = this.getError(Y(t, 0, 4));\n    if (!n)\n      return null;\n    let s = this.#n.decode(n.inputs, Y(t, 4));\n    return new ss(n, n.selector, s);\n  }\n  /**\n   *  Creates a new [[Interface]] from the ABI %%value%%.\n   *\n   *  The %%value%% may be provided as an existing [[Interface]] object,\n   *  a JSON-encoded ABI or any Human-Readable ABI format.\n   */\n  static from(e) {\n    return e instanceof r ? e : typeof e == \"string\" ? new r(JSON.parse(e)) : typeof e.formatJson == \"function\" ? new r(e.formatJson()) : typeof e.format == \"function\" ? new r(e.format(\"json\")) : new r(e);\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider.js\nvar Ll = BigInt(0);\nfunction is(r) {\n  return r ?? null;\n}\na(is, \"getValue\");\nfunction Ae(r) {\n  return r == null ? null : r.toString();\n}\na(Ae, \"toJson\");\nvar Tr = class {\n  static {\n    a(this, \"FeeData\");\n  }\n  /**\n   *  The gas price for legacy networks.\n   */\n  gasPrice;\n  /**\n   *  The maximum fee to pay per gas.\n   *\n   *  The base fee per gas is defined by the network and based on\n   *  congestion, increasing the cost during times of heavy load\n   *  and lowering when less busy.\n   *\n   *  The actual fee per gas will be the base fee for the block\n   *  and the priority fee, up to the max fee per gas.\n   *\n   *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n   */\n  maxFeePerGas;\n  /**\n   *  The additional amout to pay per gas to encourage a validator\n   *  to include the transaction.\n   *\n   *  The purpose of this is to compensate the validator for the\n   *  adjusted risk for including a given transaction.\n   *\n   *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n   */\n  maxPriorityFeePerGas;\n  /**\n   *  Creates a new FeeData for %%gasPrice%%, %%maxFeePerGas%% and\n   *  %%maxPriorityFeePerGas%%.\n   */\n  constructor(e, t, n) {\n    P(this, {\n      gasPrice: is(e),\n      maxFeePerGas: is(t),\n      maxPriorityFeePerGas: is(n)\n    });\n  }\n  /**\n   *  Returns a JSON-friendly value.\n   */\n  toJSON() {\n    let { gasPrice: e, maxFeePerGas: t, maxPriorityFeePerGas: n } = this;\n    return {\n      _type: \"FeeData\",\n      gasPrice: Ae(e),\n      maxFeePerGas: Ae(t),\n      maxPriorityFeePerGas: Ae(n)\n    };\n  }\n};\nfunction it(r) {\n  let e = {};\n  r.to && (e.to = r.to), r.from && (e.from = r.from), r.data && (e.data = w(r.data));\n  let t = \"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value\".split(/,/);\n  for (let s of t)\n    !(s in r) || r[s] == null || (e[s] = k(r[s], `request.${s}`));\n  let n = \"type,nonce\".split(/,/);\n  for (let s of n)\n    !(s in r) || r[s] == null || (e[s] = S(r[s], `request.${s}`));\n  return r.accessList && (e.accessList = Ce(r.accessList)), r.authorizationList && (e.authorizationList = r.authorizationList.slice()), \"blockTag\" in r && (e.blockTag = r.blockTag), \"enableCcipRead\" in r && (e.enableCcipRead = !!r.enableCcipRead), \"customData\" in r && (e.customData = r.customData), \"blobVersionedHashes\" in r && r.blobVersionedHashes && (e.blobVersionedHashes = r.blobVersionedHashes.slice()), \"kzg\" in r && (e.kzg = r.kzg), \"blobs\" in r && r.blobs && (e.blobs = r.blobs.map((s) => dt(s) ? w(s) : Object.assign({}, s))), e;\n}\na(it, \"copyRequest\");\nvar un = class {\n  static {\n    a(this, \"Block\");\n  }\n  /**\n   *  The provider connected to the block used to fetch additional details\n   *  if necessary.\n   */\n  provider;\n  /**\n   *  The block number, sometimes called the block height. This is a\n   *  sequential number that is one higher than the parent block.\n   */\n  number;\n  /**\n   *  The block hash.\n   *\n   *  This hash includes all properties, so can be safely used to identify\n   *  an exact set of block properties.\n   */\n  hash;\n  /**\n   *  The timestamp for this block, which is the number of seconds since\n   *  epoch that this block was included.\n   */\n  timestamp;\n  /**\n   *  The block hash of the parent block.\n   */\n  parentHash;\n  /**\n   *  The hash tree root of the parent beacon block for the given\n   *  execution block. See [[link-eip-4788]].\n   */\n  parentBeaconBlockRoot;\n  /**\n   *  The nonce.\n   *\n   *  On legacy networks, this is the random number inserted which\n   *  permitted the difficulty target to be reached.\n   */\n  nonce;\n  /**\n   *  The difficulty target.\n   *\n   *  On legacy networks, this is the proof-of-work target required\n   *  for a block to meet the protocol rules to be included.\n   *\n   *  On modern networks, this is a random number arrived at using\n   *  randao.  @TODO: Find links?\n   */\n  difficulty;\n  /**\n   *  The total gas limit for this block.\n   */\n  gasLimit;\n  /**\n   *  The total gas used in this block.\n   */\n  gasUsed;\n  /**\n   *  The root hash for the global state after applying changes\n   *  in this block.\n   */\n  stateRoot;\n  /**\n   *  The hash of the transaction receipts trie.\n   */\n  receiptsRoot;\n  /**\n   *  The total amount of blob gas consumed by the transactions\n   *  within the block. See [[link-eip-4844]].\n   */\n  blobGasUsed;\n  /**\n   *  The running total of blob gas consumed in excess of the\n   *  target, prior to the block. See [[link-eip-4844]].\n   */\n  excessBlobGas;\n  /**\n   *  The miner coinbase address, wihch receives any subsidies for\n   *  including this block.\n   */\n  miner;\n  /**\n   *  The latest RANDAO mix of the post beacon state of\n   *  the previous block.\n   */\n  prevRandao;\n  /**\n   *  Any extra data the validator wished to include.\n   */\n  extraData;\n  /**\n   *  The base fee per gas that all transactions in this block were\n   *  charged.\n   *\n   *  This adjusts after each block, depending on how congested the network\n   *  is.\n   */\n  baseFeePerGas;\n  #e;\n  /**\n   *  Create a new **Block** object.\n   *\n   *  This should generally not be necessary as the unless implementing a\n   *  low-level library.\n   */\n  constructor(e, t) {\n    this.#e = e.transactions.map((n) => typeof n != \"string\" ? new Dt(n, t) : n), P(this, {\n      provider: t,\n      hash: is(e.hash),\n      number: e.number,\n      timestamp: e.timestamp,\n      parentHash: e.parentHash,\n      parentBeaconBlockRoot: e.parentBeaconBlockRoot,\n      nonce: e.nonce,\n      difficulty: e.difficulty,\n      gasLimit: e.gasLimit,\n      gasUsed: e.gasUsed,\n      blobGasUsed: e.blobGasUsed,\n      excessBlobGas: e.excessBlobGas,\n      miner: e.miner,\n      prevRandao: is(e.prevRandao),\n      extraData: e.extraData,\n      baseFeePerGas: is(e.baseFeePerGas),\n      stateRoot: e.stateRoot,\n      receiptsRoot: e.receiptsRoot\n    });\n  }\n  /**\n   *  Returns the list of transaction hashes, in the order\n   *  they were executed within the block.\n   */\n  get transactions() {\n    return this.#e.map((e) => typeof e == \"string\" ? e : e.hash);\n  }\n  /**\n   *  Returns the complete transactions, in the order they\n   *  were executed within the block.\n   *\n   *  This is only available for blocks which prefetched\n   *  transactions, by passing ``true`` to %%prefetchTxs%%\n   *  into [[Provider-getBlock]].\n   */\n  get prefetchedTransactions() {\n    let e = this.#e.slice();\n    return e.length === 0 ? [] : (b(typeof e[0] == \"object\", \"transactions were not prefetched with block request\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"transactionResponses()\"\n    }), e);\n  }\n  /**\n   *  Returns a JSON-friendly value.\n   */\n  toJSON() {\n    let { baseFeePerGas: e, difficulty: t, extraData: n, gasLimit: s, gasUsed: i, hash: o, miner: c, prevRandao: f, nonce: l, number: u, parentHash: d, parentBeaconBlockRoot: x, stateRoot: p, receiptsRoot: g, timestamp: m, transactions: y } = this;\n    return {\n      _type: \"Block\",\n      baseFeePerGas: Ae(e),\n      difficulty: Ae(t),\n      extraData: n,\n      gasLimit: Ae(s),\n      gasUsed: Ae(i),\n      blobGasUsed: Ae(this.blobGasUsed),\n      excessBlobGas: Ae(this.excessBlobGas),\n      hash: o,\n      miner: c,\n      prevRandao: f,\n      nonce: l,\n      number: u,\n      parentHash: d,\n      timestamp: m,\n      parentBeaconBlockRoot: x,\n      stateRoot: p,\n      receiptsRoot: g,\n      transactions: y\n    };\n  }\n  [Symbol.iterator]() {\n    let e = 0, t = this.transactions;\n    return {\n      next: /* @__PURE__ */ a(() => e < this.length ? {\n        value: t[e++],\n        done: !1\n      } : { value: void 0, done: !0 }, \"next\")\n    };\n  }\n  /**\n   *  The number of transactions in this block.\n   */\n  get length() {\n    return this.#e.length;\n  }\n  /**\n   *  The [[link-js-date]] this block was included at.\n   */\n  get date() {\n    return this.timestamp == null ? null : new Date(this.timestamp * 1e3);\n  }\n  /**\n   *  Get the transaction at %%indexe%% within this block.\n   */\n  async getTransaction(e) {\n    let t;\n    if (typeof e == \"number\")\n      t = this.#e[e];\n    else {\n      let n = e.toLowerCase();\n      for (let s of this.#e)\n        if (typeof s == \"string\") {\n          if (s !== n)\n            continue;\n          t = s;\n          break;\n        } else {\n          if (s.hash !== n)\n            continue;\n          t = s;\n          break;\n        }\n    }\n    if (t == null)\n      throw new Error(\"no such tx\");\n    return typeof t == \"string\" ? await this.provider.getTransaction(t) : t;\n  }\n  /**\n   *  If a **Block** was fetched with a request to include the transactions\n   *  this will allow synchronous access to those transactions.\n   *\n   *  If the transactions were not prefetched, this will throw.\n   */\n  getPrefetchedTransaction(e) {\n    let t = this.prefetchedTransactions;\n    if (typeof e == \"number\")\n      return t[e];\n    e = e.toLowerCase();\n    for (let n of t)\n      if (n.hash === e)\n        return n;\n    h(!1, \"no matching transaction\", \"indexOrHash\", e);\n  }\n  /**\n   *  Returns true if this block been mined. This provides a type guard\n   *  for all properties on a [[MinedBlock]].\n   */\n  isMined() {\n    return !!this.hash;\n  }\n  /**\n   *  Returns true if this block is an [[link-eip-2930]] block.\n   */\n  isLondon() {\n    return !!this.baseFeePerGas;\n  }\n  /**\n   *  @_ignore:\n   */\n  orphanedEvent() {\n    if (!this.isMined())\n      throw new Error(\"\");\n    return Mx(this);\n  }\n}, $e = class {\n  static {\n    a(this, \"Log\");\n  }\n  /**\n   *  The provider connected to the log used to fetch additional details\n   *  if necessary.\n   */\n  provider;\n  /**\n   *  The transaction hash of the transaction this log occurred in. Use the\n   *  [[Log-getTransaction]] to get the [[TransactionResponse]].\n   */\n  transactionHash;\n  /**\n   *  The block hash of the block this log occurred in. Use the\n   *  [[Log-getBlock]] to get the [[Block]].\n   */\n  blockHash;\n  /**\n   *  The block number of the block this log occurred in. It is preferred\n   *  to use the [[Block-hash]] when fetching the related [[Block]],\n   *  since in the case of an orphaned block, the block at that height may\n   *  have changed.\n   */\n  blockNumber;\n  /**\n   *  If the **Log** represents a block that was removed due to an orphaned\n   *  block, this will be true.\n   *\n   *  This can only happen within an orphan event listener.\n   */\n  removed;\n  /**\n   *  The address of the contract that emitted this log.\n   */\n  address;\n  /**\n   *  The data included in this log when it was emitted.\n   */\n  data;\n  /**\n   *  The indexed topics included in this log when it was emitted.\n   *\n   *  All topics are included in the bloom filters, so they can be\n   *  efficiently filtered using the [[Provider-getLogs]] method.\n   */\n  topics;\n  /**\n   *  The index within the block this log occurred at. This is generally\n   *  not useful to developers, but can be used with the various roots\n   *  to proof inclusion within a block.\n   */\n  index;\n  /**\n   *  The index within the transaction of this log.\n   */\n  transactionIndex;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t) {\n    this.provider = t;\n    let n = Object.freeze(e.topics.slice());\n    P(this, {\n      transactionHash: e.transactionHash,\n      blockHash: e.blockHash,\n      blockNumber: e.blockNumber,\n      removed: e.removed,\n      address: e.address,\n      data: e.data,\n      topics: n,\n      index: e.index,\n      transactionIndex: e.transactionIndex\n    });\n  }\n  /**\n   *  Returns a JSON-compatible object.\n   */\n  toJSON() {\n    let { address: e, blockHash: t, blockNumber: n, data: s, index: i, removed: o, topics: c, transactionHash: f, transactionIndex: l } = this;\n    return {\n      _type: \"log\",\n      address: e,\n      blockHash: t,\n      blockNumber: n,\n      data: s,\n      index: i,\n      removed: o,\n      topics: c,\n      transactionHash: f,\n      transactionIndex: l\n    };\n  }\n  /**\n   *  Returns the block that this log occurred in.\n   */\n  async getBlock() {\n    let e = await this.provider.getBlock(this.blockHash);\n    return b(!!e, \"failed to find transaction\", \"UNKNOWN_ERROR\", {}), e;\n  }\n  /**\n   *  Returns the transaction that this log occurred in.\n   */\n  async getTransaction() {\n    let e = await this.provider.getTransaction(this.transactionHash);\n    return b(!!e, \"failed to find transaction\", \"UNKNOWN_ERROR\", {}), e;\n  }\n  /**\n   *  Returns the transaction receipt fot the transaction that this\n   *  log occurred in.\n   */\n  async getTransactionReceipt() {\n    let e = await this.provider.getTransactionReceipt(this.transactionHash);\n    return b(!!e, \"failed to find transaction receipt\", \"UNKNOWN_ERROR\", {}), e;\n  }\n  /**\n   *  @_ignore:\n   */\n  removedEvent() {\n    return Gx(this);\n  }\n}, rr = class {\n  static {\n    a(this, \"TransactionReceipt\");\n  }\n  /**\n   *  The provider connected to the log used to fetch additional details\n   *  if necessary.\n   */\n  provider;\n  /**\n   *  The address the transaction was sent to.\n   */\n  to;\n  /**\n   *  The sender of the transaction.\n   */\n  from;\n  /**\n   *  The address of the contract if the transaction was directly\n   *  responsible for deploying one.\n   *\n   *  This is non-null **only** if the ``to`` is empty and the ``data``\n   *  was successfully executed as initcode.\n   */\n  contractAddress;\n  /**\n   *  The transaction hash.\n   */\n  hash;\n  /**\n   *  The index of this transaction within the block transactions.\n   */\n  index;\n  /**\n   *  The block hash of the [[Block]] this transaction was included in.\n   */\n  blockHash;\n  /**\n   *  The block number of the [[Block]] this transaction was included in.\n   */\n  blockNumber;\n  /**\n   *  The bloom filter bytes that represent all logs that occurred within\n   *  this transaction. This is generally not useful for most developers,\n   *  but can be used to validate the included logs.\n   */\n  logsBloom;\n  /**\n   *  The actual amount of gas used by this transaction.\n   *\n   *  When creating a transaction, the amount of gas that will be used can\n   *  only be approximated, but the sender must pay the gas fee for the\n   *  entire gas limit. After the transaction, the difference is refunded.\n   */\n  gasUsed;\n  /**\n   *  The gas used for BLObs. See [[link-eip-4844]].\n   */\n  blobGasUsed;\n  /**\n   *  The amount of gas used by all transactions within the block for this\n   *  and all transactions with a lower ``index``.\n   *\n   *  This is generally not useful for developers but can be used to\n   *  validate certain aspects of execution.\n   */\n  cumulativeGasUsed;\n  /**\n   *  The actual gas price used during execution.\n   *\n   *  Due to the complexity of [[link-eip-1559]] this value can only\n   *  be caluclated after the transaction has been mined, snce the base\n   *  fee is protocol-enforced.\n   */\n  gasPrice;\n  /**\n   *  The price paid per BLOB in gas. See [[link-eip-4844]].\n   */\n  blobGasPrice;\n  /**\n   *  The [[link-eip-2718]] transaction type.\n   */\n  type;\n  //readonly byzantium!: boolean;\n  /**\n   *  The status of this transaction, indicating success (i.e. ``1``) or\n   *  a revert (i.e. ``0``).\n   *\n   *  This is available in post-byzantium blocks, but some backends may\n   *  backfill this value.\n   */\n  status;\n  /**\n   *  The root hash of this transaction.\n   *\n   *  This is no present and was only included in pre-byzantium blocks, but\n   *  could be used to validate certain parts of the receipt.\n   */\n  root;\n  #e;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t) {\n    this.#e = Object.freeze(e.logs.map((s) => new $e(s, t)));\n    let n = Ll;\n    e.effectiveGasPrice != null ? n = e.effectiveGasPrice : e.gasPrice != null && (n = e.gasPrice), P(this, {\n      provider: t,\n      to: e.to,\n      from: e.from,\n      contractAddress: e.contractAddress,\n      hash: e.hash,\n      index: e.index,\n      blockHash: e.blockHash,\n      blockNumber: e.blockNumber,\n      logsBloom: e.logsBloom,\n      gasUsed: e.gasUsed,\n      cumulativeGasUsed: e.cumulativeGasUsed,\n      blobGasUsed: e.blobGasUsed,\n      gasPrice: n,\n      blobGasPrice: e.blobGasPrice,\n      type: e.type,\n      //byzantium: tx.byzantium,\n      status: e.status,\n      root: e.root\n    });\n  }\n  /**\n   *  The logs for this transaction.\n   */\n  get logs() {\n    return this.#e;\n  }\n  /**\n   *  Returns a JSON-compatible representation.\n   */\n  toJSON() {\n    let {\n      to: e,\n      from: t,\n      contractAddress: n,\n      hash: s,\n      index: i,\n      blockHash: o,\n      blockNumber: c,\n      logsBloom: f,\n      logs: l,\n      //byzantium, \n      status: u,\n      root: d\n    } = this;\n    return {\n      _type: \"TransactionReceipt\",\n      blockHash: o,\n      blockNumber: c,\n      //byzantium, \n      contractAddress: n,\n      cumulativeGasUsed: Ae(this.cumulativeGasUsed),\n      from: t,\n      gasPrice: Ae(this.gasPrice),\n      blobGasUsed: Ae(this.blobGasUsed),\n      blobGasPrice: Ae(this.blobGasPrice),\n      gasUsed: Ae(this.gasUsed),\n      hash: s,\n      index: i,\n      logs: l,\n      logsBloom: f,\n      root: d,\n      status: u,\n      to: e\n    };\n  }\n  /**\n   *  @_ignore:\n   */\n  get length() {\n    return this.logs.length;\n  }\n  [Symbol.iterator]() {\n    let e = 0;\n    return {\n      next: /* @__PURE__ */ a(() => e < this.length ? { value: this.logs[e++], done: !1 } : { value: void 0, done: !0 }, \"next\")\n    };\n  }\n  /**\n   *  The total fee for this transaction, in wei.\n   */\n  get fee() {\n    return this.gasUsed * this.gasPrice;\n  }\n  /**\n   *  Resolves to the block this transaction occurred in.\n   */\n  async getBlock() {\n    let e = await this.provider.getBlock(this.blockHash);\n    if (e == null)\n      throw new Error(\"TODO\");\n    return e;\n  }\n  /**\n   *  Resolves to the transaction this transaction occurred in.\n   */\n  async getTransaction() {\n    let e = await this.provider.getTransaction(this.hash);\n    if (e == null)\n      throw new Error(\"TODO\");\n    return e;\n  }\n  /**\n   *  Resolves to the return value of the execution of this transaction.\n   *\n   *  Support for this feature is limited, as it requires an archive node\n   *  with the ``debug_`` or ``trace_`` API enabled.\n   */\n  async getResult() {\n    return await this.provider.getTransactionResult(this.hash);\n  }\n  /**\n   *  Resolves to the number of confirmations this transaction has.\n   */\n  async confirmations() {\n    return await this.provider.getBlockNumber() - this.blockNumber + 1;\n  }\n  /**\n   *  @_ignore:\n   */\n  removedEvent() {\n    return Fl(this);\n  }\n  /**\n   *  @_ignore:\n   */\n  reorderedEvent(e) {\n    return b(!e || e.isMined(), \"unmined 'other' transction cannot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"reorderedEvent(other)\" }), Dl(this, e);\n  }\n}, Dt = class r {\n  static {\n    a(this, \"TransactionResponse\");\n  }\n  /**\n   *  The provider this is connected to, which will influence how its\n   *  methods will resolve its async inspection methods.\n   */\n  provider;\n  /**\n   *  The block number of the block that this transaction was included in.\n   *\n   *  This is ``null`` for pending transactions.\n   */\n  blockNumber;\n  /**\n   *  The blockHash of the block that this transaction was included in.\n   *\n   *  This is ``null`` for pending transactions.\n   */\n  blockHash;\n  /**\n   *  The index within the block that this transaction resides at.\n   */\n  index;\n  /**\n   *  The transaction hash.\n   */\n  hash;\n  /**\n   *  The [[link-eip-2718]] transaction envelope type. This is\n   *  ``0`` for legacy transactions types.\n   */\n  type;\n  /**\n   *  The receiver of this transaction.\n   *\n   *  If ``null``, then the transaction is an initcode transaction.\n   *  This means the result of executing the [[data]] will be deployed\n   *  as a new contract on chain (assuming it does not revert) and the\n   *  address may be computed using [[getCreateAddress]].\n   */\n  to;\n  /**\n   *  The sender of this transaction. It is implicitly computed\n   *  from the transaction pre-image hash (as the digest) and the\n   *  [[signature]] using ecrecover.\n   */\n  from;\n  /**\n   *  The nonce, which is used to prevent replay attacks and offer\n   *  a method to ensure transactions from a given sender are explicitly\n   *  ordered.\n   *\n   *  When sending a transaction, this must be equal to the number of\n   *  transactions ever sent by [[from]].\n   */\n  nonce;\n  /**\n   *  The maximum units of gas this transaction can consume. If execution\n   *  exceeds this, the entries transaction is reverted and the sender\n   *  is charged for the full amount, despite not state changes being made.\n   */\n  gasLimit;\n  /**\n   *  The gas price can have various values, depending on the network.\n   *\n   *  In modern networks, for transactions that are included this is\n   *  the //effective gas price// (the fee per gas that was actually\n   *  charged), while for transactions that have not been included yet\n   *  is the [[maxFeePerGas]].\n   *\n   *  For legacy transactions, or transactions on legacy networks, this\n   *  is the fee that will be charged per unit of gas the transaction\n   *  consumes.\n   */\n  gasPrice;\n  /**\n   *  The maximum priority fee (per unit of gas) to allow a\n   *  validator to charge the sender. This is inclusive of the\n   *  [[maxFeeFeePerGas]].\n   */\n  maxPriorityFeePerGas;\n  /**\n   *  The maximum fee (per unit of gas) to allow this transaction\n   *  to charge the sender.\n   */\n  maxFeePerGas;\n  /**\n   *  The [[link-eip-4844]] max fee per BLOb gas.\n   */\n  maxFeePerBlobGas;\n  /**\n   *  The data.\n   */\n  data;\n  /**\n   *  The value, in wei. Use [[formatEther]] to format this value\n   *  as ether.\n   */\n  value;\n  /**\n   *  The chain ID.\n   */\n  chainId;\n  /**\n   *  The signature.\n   */\n  signature;\n  /**\n   *  The [[link-eip-2930]] access list for transaction types that\n   *  support it, otherwise ``null``.\n   */\n  accessList;\n  /**\n   *  The [[link-eip-4844]] BLOb versioned hashes.\n   */\n  blobVersionedHashes;\n  /**\n   *  The [[link-eip-7702]] authorizations (if any).\n   */\n  authorizationList;\n  #e;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t) {\n    this.provider = t, this.blockNumber = e.blockNumber != null ? e.blockNumber : null, this.blockHash = e.blockHash != null ? e.blockHash : null, this.hash = e.hash, this.index = e.index, this.type = e.type, this.from = e.from, this.to = e.to || null, this.gasLimit = e.gasLimit, this.nonce = e.nonce, this.data = e.data, this.value = e.value, this.gasPrice = e.gasPrice, this.maxPriorityFeePerGas = e.maxPriorityFeePerGas != null ? e.maxPriorityFeePerGas : null, this.maxFeePerGas = e.maxFeePerGas != null ? e.maxFeePerGas : null, this.maxFeePerBlobGas = e.maxFeePerBlobGas != null ? e.maxFeePerBlobGas : null, this.chainId = e.chainId, this.signature = e.signature, this.accessList = e.accessList != null ? e.accessList : null, this.blobVersionedHashes = e.blobVersionedHashes != null ? e.blobVersionedHashes : null, this.authorizationList = e.authorizationList != null ? e.authorizationList : null, this.#e = -1;\n  }\n  /**\n   *  Returns a JSON-compatible representation of this transaction.\n   */\n  toJSON() {\n    let { blockNumber: e, blockHash: t, index: n, hash: s, type: i, to: o, from: c, nonce: f, data: l, signature: u, accessList: d, blobVersionedHashes: x } = this;\n    return {\n      _type: \"TransactionResponse\",\n      accessList: d,\n      blockNumber: e,\n      blockHash: t,\n      blobVersionedHashes: x,\n      chainId: Ae(this.chainId),\n      data: l,\n      from: c,\n      gasLimit: Ae(this.gasLimit),\n      gasPrice: Ae(this.gasPrice),\n      hash: s,\n      maxFeePerGas: Ae(this.maxFeePerGas),\n      maxPriorityFeePerGas: Ae(this.maxPriorityFeePerGas),\n      maxFeePerBlobGas: Ae(this.maxFeePerBlobGas),\n      nonce: f,\n      signature: u,\n      to: o,\n      index: n,\n      type: i,\n      value: Ae(this.value)\n    };\n  }\n  /**\n   *  Resolves to the Block that this transaction was included in.\n   *\n   *  This will return null if the transaction has not been included yet.\n   */\n  async getBlock() {\n    let e = this.blockNumber;\n    if (e == null) {\n      let n = await this.getTransaction();\n      n && (e = n.blockNumber);\n    }\n    if (e == null)\n      return null;\n    let t = this.provider.getBlock(e);\n    if (t == null)\n      throw new Error(\"TODO\");\n    return t;\n  }\n  /**\n   *  Resolves to this transaction being re-requested from the\n   *  provider. This can be used if you have an unmined transaction\n   *  and wish to get an up-to-date populated instance.\n   */\n  async getTransaction() {\n    return this.provider.getTransaction(this.hash);\n  }\n  /**\n   *  Resolve to the number of confirmations this transaction has.\n   */\n  async confirmations() {\n    if (this.blockNumber == null) {\n      let { tx: t, blockNumber: n } = await oe({\n        tx: this.getTransaction(),\n        blockNumber: this.provider.getBlockNumber()\n      });\n      return t == null || t.blockNumber == null ? 0 : n - t.blockNumber + 1;\n    }\n    return await this.provider.getBlockNumber() - this.blockNumber + 1;\n  }\n  /**\n   *  Resolves once this transaction has been mined and has\n   *  %%confirms%% blocks including it (default: ``1``) with an\n   *  optional %%timeout%%.\n   *\n   *  This can resolve to ``null`` only if %%confirms%% is ``0``\n   *  and the transaction has not been mined, otherwise this will\n   *  wait until enough confirmations have completed.\n   */\n  async wait(e, t) {\n    let n = e ?? 1, s = t ?? 0, i = this.#e, o = -1, c = i === -1, f = /* @__PURE__ */ a(async () => {\n      if (c)\n        return null;\n      let { blockNumber: x, nonce: p } = await oe({\n        blockNumber: this.provider.getBlockNumber(),\n        nonce: this.provider.getTransactionCount(this.from)\n      });\n      if (p < this.nonce) {\n        i = x;\n        return;\n      }\n      if (c)\n        return null;\n      let g = await this.getTransaction();\n      if (!(g && g.blockNumber != null))\n        for (o === -1 && (o = i - 3, o < this.#e && (o = this.#e)); o <= x; ) {\n          if (c)\n            return null;\n          let m = await this.provider.getBlock(o, !0);\n          if (m == null)\n            return;\n          for (let y of m)\n            if (y === this.hash)\n              return;\n          for (let y = 0; y < m.length; y++) {\n            let A = await m.getTransaction(y);\n            if (A.from === this.from && A.nonce === this.nonce) {\n              if (c)\n                return null;\n              let B = await this.provider.getTransactionReceipt(A.hash);\n              if (B == null || x - B.blockNumber + 1 < n)\n                return;\n              let N = \"replaced\";\n              A.data === this.data && A.to === this.to && A.value === this.value ? N = \"repriced\" : A.data === \"0x\" && A.from === A.to && A.value === Ll && (N = \"cancelled\"), b(!1, \"transaction was replaced\", \"TRANSACTION_REPLACED\", {\n                cancelled: N === \"replaced\" || N === \"cancelled\",\n                reason: N,\n                replacement: A.replaceableTransaction(i),\n                hash: A.hash,\n                receipt: B\n              });\n            }\n          }\n          o++;\n        }\n    }, \"checkReplacement\"), l = /* @__PURE__ */ a((x) => {\n      if (x == null || x.status !== 0)\n        return x;\n      b(!1, \"transaction execution reverted\", \"CALL_EXCEPTION\", {\n        action: \"sendTransaction\",\n        data: null,\n        reason: null,\n        invocation: null,\n        revert: null,\n        transaction: {\n          to: x.to,\n          from: x.from,\n          data: \"\"\n          // @TODO: in v7, split out sendTransaction properties\n        },\n        receipt: x\n      });\n    }, \"checkReceipt\"), u = await this.provider.getTransactionReceipt(this.hash);\n    if (n === 0)\n      return l(u);\n    if (u) {\n      if (n === 1 || await u.confirmations() >= n)\n        return l(u);\n    } else if (await f(), n === 0)\n      return null;\n    return await new Promise((x, p) => {\n      let g = [], m = /* @__PURE__ */ a(() => {\n        g.forEach((A) => A());\n      }, \"cancel\");\n      if (g.push(() => {\n        c = !0;\n      }), s > 0) {\n        let A = setTimeout(() => {\n          m(), p(Q(\"wait for transaction timeout\", \"TIMEOUT\"));\n        }, s);\n        g.push(() => {\n          clearTimeout(A);\n        });\n      }\n      let y = /* @__PURE__ */ a(async (A) => {\n        if (await A.confirmations() >= n) {\n          m();\n          try {\n            x(l(A));\n          } catch (B) {\n            p(B);\n          }\n        }\n      }, \"txListener\");\n      if (g.push(() => {\n        this.provider.off(this.hash, y);\n      }), this.provider.on(this.hash, y), i >= 0) {\n        let A = /* @__PURE__ */ a(async () => {\n          try {\n            await f();\n          } catch (B) {\n            if ($(B, \"TRANSACTION_REPLACED\")) {\n              m(), p(B);\n              return;\n            }\n          }\n          c || this.provider.once(\"block\", A);\n        }, \"replaceListener\");\n        g.push(() => {\n          this.provider.off(\"block\", A);\n        }), this.provider.once(\"block\", A);\n      }\n    });\n  }\n  /**\n   *  Returns ``true`` if this transaction has been included.\n   *\n   *  This is effective only as of the time the TransactionResponse\n   *  was instantiated. To get up-to-date information, use\n   *  [[getTransaction]].\n   *\n   *  This provides a Type Guard that this transaction will have\n   *  non-null property values for properties that are null for\n   *  unmined transactions.\n   */\n  isMined() {\n    return this.blockHash != null;\n  }\n  /**\n   *  Returns true if the transaction is a legacy (i.e. ``type == 0``)\n   *  transaction.\n   *\n   *  This provides a Type Guard that this transaction will have\n   *  the ``null``-ness for hardfork-specific properties set correctly.\n   */\n  isLegacy() {\n    return this.type === 0;\n  }\n  /**\n   *  Returns true if the transaction is a Berlin (i.e. ``type == 1``)\n   *  transaction. See [[link-eip-2070]].\n   *\n   *  This provides a Type Guard that this transaction will have\n   *  the ``null``-ness for hardfork-specific properties set correctly.\n   */\n  isBerlin() {\n    return this.type === 1;\n  }\n  /**\n   *  Returns true if the transaction is a London (i.e. ``type == 2``)\n   *  transaction. See [[link-eip-1559]].\n   *\n   *  This provides a Type Guard that this transaction will have\n   *  the ``null``-ness for hardfork-specific properties set correctly.\n   */\n  isLondon() {\n    return this.type === 2;\n  }\n  /**\n   *  Returns true if hte transaction is a Cancun (i.e. ``type == 3``)\n   *  transaction. See [[link-eip-4844]].\n   */\n  isCancun() {\n    return this.type === 3;\n  }\n  /**\n   *  Returns a filter which can be used to listen for orphan events\n   *  that evict this transaction.\n   */\n  removedEvent() {\n    return b(this.isMined(), \"unmined transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" }), Fl(this);\n  }\n  /**\n   *  Returns a filter which can be used to listen for orphan events\n   *  that re-order this event against %%other%%.\n   */\n  reorderedEvent(e) {\n    return b(this.isMined(), \"unmined transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" }), b(!e || e.isMined(), \"unmined 'other' transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" }), Dl(this, e);\n  }\n  /**\n   *  Returns a new TransactionResponse instance which has the ability to\n   *  detect (and throw an error) if the transaction is replaced, which\n   *  will begin scanning at %%startBlock%%.\n   *\n   *  This should generally not be used by developers and is intended\n   *  primarily for internal use. Setting an incorrect %%startBlock%% can\n   *  have devastating performance consequences if used incorrectly.\n   */\n  replaceableTransaction(e) {\n    h(Number.isInteger(e) && e >= 0, \"invalid startBlock\", \"startBlock\", e);\n    let t = new r(this, this.provider);\n    return t.#e = e, t;\n  }\n};\nfunction Mx(r) {\n  return { orphan: \"drop-block\", hash: r.hash, number: r.number };\n}\na(Mx, \"createOrphanedBlockFilter\");\nfunction Dl(r, e) {\n  return { orphan: \"reorder-transaction\", tx: r, other: e };\n}\na(Dl, \"createReorderedTransactionFilter\");\nfunction Fl(r) {\n  return { orphan: \"drop-transaction\", tx: r };\n}\na(Fl, \"createRemovedTransactionFilter\");\nfunction Gx(r) {\n  return { orphan: \"drop-log\", log: {\n    transactionHash: r.transactionHash,\n    blockHash: r.blockHash,\n    blockNumber: r.blockNumber,\n    address: r.address,\n    data: r.data,\n    topics: Object.freeze(r.topics.slice()),\n    index: r.index\n  } };\n}\na(Gx, \"createRemovedLogFilter\");\n\n// node_modules/ethers/lib.esm/contract/wrappers.js\nvar nr = class extends $e {\n  static {\n    a(this, \"EventLog\");\n  }\n  /**\n   *  The Contract Interface.\n   */\n  interface;\n  /**\n   *  The matching event.\n   */\n  fragment;\n  /**\n   *  The parsed arguments passed to the event by ``emit``.\n   */\n  args;\n  /**\n   * @_ignore:\n   */\n  constructor(e, t, n) {\n    super(e, e.provider);\n    let s = t.decodeEventLog(n, e.data, e.topics);\n    P(this, { args: s, fragment: n, interface: t });\n  }\n  /**\n   *  The name of the event.\n   */\n  get eventName() {\n    return this.fragment.name;\n  }\n  /**\n   *  The signature of the event.\n   */\n  get eventSignature() {\n    return this.fragment.format();\n  }\n}, Ir = class extends $e {\n  static {\n    a(this, \"UndecodedEventLog\");\n  }\n  /**\n   *  The error encounted when trying to decode the log.\n   */\n  error;\n  /**\n   * @_ignore:\n   */\n  constructor(e, t) {\n    super(e, e.provider), P(this, { error: t });\n  }\n}, os = class extends rr {\n  static {\n    a(this, \"ContractTransactionReceipt\");\n  }\n  #e;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n) {\n    super(n, t), this.#e = e;\n  }\n  /**\n   *  The parsed logs for any [[Log]] which has a matching event in the\n   *  Contract ABI.\n   */\n  get logs() {\n    return super.logs.map((e) => {\n      let t = e.topics.length ? this.#e.getEvent(e.topics[0]) : null;\n      if (t)\n        try {\n          return new nr(e, this.#e, t);\n        } catch (n) {\n          return new Ir(e, n);\n        }\n      return e;\n    });\n  }\n}, sr = class extends Dt {\n  static {\n    a(this, \"ContractTransactionResponse\");\n  }\n  #e;\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n) {\n    super(n, t), this.#e = e;\n  }\n  /**\n   *  Resolves once this transaction has been mined and has\n   *  %%confirms%% blocks including it (default: ``1``) with an\n   *  optional %%timeout%%.\n   *\n   *  This can resolve to ``null`` only if %%confirms%% is ``0``\n   *  and the transaction has not been mined, otherwise this will\n   *  wait until enough confirmations have completed.\n   */\n  async wait(e, t) {\n    let n = await super.wait(e, t);\n    return n == null ? null : new os(this.#e, this.provider, n);\n  }\n}, Cr = class extends Qt {\n  static {\n    a(this, \"ContractUnknownEventPayload\");\n  }\n  /**\n   *  The log with no matching events.\n   */\n  log;\n  /**\n   *  @_event:\n   */\n  constructor(e, t, n, s) {\n    super(e, t, n), P(this, { log: s });\n  }\n  /**\n   *  Resolves to the block the event occured in.\n   */\n  async getBlock() {\n    return await this.log.getBlock();\n  }\n  /**\n   *  Resolves to the transaction the event occured in.\n   */\n  async getTransaction() {\n    return await this.log.getTransaction();\n  }\n  /**\n   *  Resolves to the transaction receipt the event occured in.\n   */\n  async getTransactionReceipt() {\n    return await this.log.getTransactionReceipt();\n  }\n}, dn = class extends Cr {\n  static {\n    a(this, \"ContractEventPayload\");\n  }\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t, n, s, i) {\n    super(e, t, n, new nr(i, e.interface, s));\n    let o = e.interface.decodeEventLog(s, this.log.data, this.log.topics);\n    P(this, { args: o, fragment: s });\n  }\n  /**\n   *  The event name.\n   */\n  get eventName() {\n    return this.fragment.name;\n  }\n  /**\n   *  The event signature.\n   */\n  get eventSignature() {\n    return this.fragment.format();\n  }\n};\n\n// node_modules/ethers/lib.esm/contract/contract.js\nvar Ml = BigInt(0);\nfunction Hl(r) {\n  return r && typeof r.call == \"function\";\n}\na(Hl, \"canCall\");\nfunction _l(r) {\n  return r && typeof r.estimateGas == \"function\";\n}\na(_l, \"canEstimate\");\nfunction ho(r) {\n  return r && typeof r.resolveName == \"function\";\n}\na(ho, \"canResolve\");\nfunction zl(r) {\n  return r && typeof r.sendTransaction == \"function\";\n}\na(zl, \"canSend\");\nfunction Vl(r) {\n  if (r != null) {\n    if (ho(r))\n      return r;\n    if (r.provider)\n      return r.provider;\n  }\n}\na(Vl, \"getResolver\");\nvar rc = class {\n  static {\n    a(this, \"PreparedTopicFilter\");\n  }\n  #e;\n  fragment;\n  constructor(e, t, n) {\n    if (P(this, { fragment: t }), t.inputs.length < n.length)\n      throw new Error(\"too many arguments\");\n    let s = xn(e.runner, \"resolveName\"), i = ho(s) ? s : null;\n    this.#e = (async function() {\n      let o = await Promise.all(t.inputs.map((c, f) => n[f] == null ? null : c.walkAsync(n[f], (u, d) => u === \"address\" ? Array.isArray(d) ? Promise.all(d.map((x) => le(x, i))) : le(d, i) : d)));\n      return e.interface.encodeFilterTopics(t, o);\n    })();\n  }\n  getTopicFilter() {\n    return this.#e;\n  }\n};\nfunction xn(r, e) {\n  return r == null ? null : typeof r[e] == \"function\" ? r : r.provider && typeof r.provider[e] == \"function\" ? r.provider : null;\n}\na(xn, \"getRunner\");\nfunction hn(r) {\n  return r == null ? null : r.provider || null;\n}\na(hn, \"getProvider\");\nasync function xo(r, e) {\n  let t = se.dereference(r, \"overrides\");\n  h(typeof t == \"object\", \"invalid overrides parameter\", \"overrides\", r);\n  let n = it(t);\n  return h(n.to == null || (e || []).indexOf(\"to\") >= 0, \"cannot override to\", \"overrides.to\", n.to), h(n.data == null || (e || []).indexOf(\"data\") >= 0, \"cannot override data\", \"overrides.data\", n.data), n.from && (n.from = n.from), n;\n}\na(xo, \"copyOverrides\");\nasync function ic(r, e, t) {\n  let n = xn(r, \"resolveName\"), s = ho(n) ? n : null;\n  return await Promise.all(e.map((i, o) => i.walkAsync(t[o], (c, f) => (f = se.dereference(f, c), c === \"address\" ? le(f, s) : f))));\n}\na(ic, \"resolveArgs\");\nfunction Hx(r) {\n  let e = /* @__PURE__ */ a(async function(o) {\n    let c = await xo(o, [\"data\"]);\n    c.to = await r.getAddress(), c.from && (c.from = await le(c.from, Vl(r.runner)));\n    let f = r.interface, l = k(c.value || Ml, \"overrides.value\") === Ml, u = (c.data || \"0x\") === \"0x\";\n    f.fallback && !f.fallback.payable && f.receive && !u && !l && h(!1, \"cannot send data to receive or send value to non-payable fallback\", \"overrides\", o), h(f.fallback || u, \"cannot send data to receive-only contract\", \"overrides.data\", c.data);\n    let d = f.receive || f.fallback && f.fallback.payable;\n    return h(d || l, \"cannot send value to non-payable fallback\", \"overrides.value\", c.value), h(f.fallback || u, \"cannot send data to receive-only contract\", \"overrides.data\", c.data), c;\n  }, \"populateTransaction\"), t = /* @__PURE__ */ a(async function(o) {\n    let c = xn(r.runner, \"call\");\n    b(Hl(c), \"contract runner does not support calling\", \"UNSUPPORTED_OPERATION\", { operation: \"call\" });\n    let f = await e(o);\n    try {\n      return await c.call(f);\n    } catch (l) {\n      throw xr(l) && l.data ? r.interface.makeError(l.data, f) : l;\n    }\n  }, \"staticCall\"), n = /* @__PURE__ */ a(async function(o) {\n    let c = r.runner;\n    b(zl(c), \"contract runner does not support sending transactions\", \"UNSUPPORTED_OPERATION\", { operation: \"sendTransaction\" });\n    let f = await c.sendTransaction(await e(o)), l = hn(r.runner);\n    return new sr(r.interface, l, f);\n  }, \"send\"), s = /* @__PURE__ */ a(async function(o) {\n    let c = xn(r.runner, \"estimateGas\");\n    return b(_l(c), \"contract runner does not support gas estimation\", \"UNSUPPORTED_OPERATION\", { operation: \"estimateGas\" }), await c.estimateGas(await e(o));\n  }, \"estimateGas\"), i = /* @__PURE__ */ a(async (o) => await n(o), \"method\");\n  return P(i, {\n    _contract: r,\n    estimateGas: s,\n    populateTransaction: e,\n    send: n,\n    staticCall: t\n  }), i;\n}\na(Hx, \"buildWrappedFallback\");\nfunction _x(r, e) {\n  let t = /* @__PURE__ */ a(function(...l) {\n    let u = r.interface.getFunction(e, l);\n    return b(u, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"fragment\",\n      info: { key: e, args: l }\n    }), u;\n  }, \"getFragment\"), n = /* @__PURE__ */ a(async function(...l) {\n    let u = t(...l), d = {};\n    if (u.inputs.length + 1 === l.length && (d = await xo(l.pop()), d.from && (d.from = await le(d.from, Vl(r.runner)))), u.inputs.length !== l.length)\n      throw new Error(\"internal error: fragment inputs doesn't match arguments; should not happen\");\n    let x = await ic(r.runner, u.inputs, l);\n    return Object.assign({}, d, await oe({\n      to: r.getAddress(),\n      data: r.interface.encodeFunctionData(u, x)\n    }));\n  }, \"populateTransaction\"), s = /* @__PURE__ */ a(async function(...l) {\n    let u = await c(...l);\n    return u.length === 1 ? u[0] : u;\n  }, \"staticCall\"), i = /* @__PURE__ */ a(async function(...l) {\n    let u = r.runner;\n    b(zl(u), \"contract runner does not support sending transactions\", \"UNSUPPORTED_OPERATION\", { operation: \"sendTransaction\" });\n    let d = await u.sendTransaction(await n(...l)), x = hn(r.runner);\n    return new sr(r.interface, x, d);\n  }, \"send\"), o = /* @__PURE__ */ a(async function(...l) {\n    let u = xn(r.runner, \"estimateGas\");\n    return b(_l(u), \"contract runner does not support gas estimation\", \"UNSUPPORTED_OPERATION\", { operation: \"estimateGas\" }), await u.estimateGas(await n(...l));\n  }, \"estimateGas\"), c = /* @__PURE__ */ a(async function(...l) {\n    let u = xn(r.runner, \"call\");\n    b(Hl(u), \"contract runner does not support calling\", \"UNSUPPORTED_OPERATION\", { operation: \"call\" });\n    let d = await n(...l), x = \"0x\";\n    try {\n      x = await u.call(d);\n    } catch (g) {\n      throw xr(g) && g.data ? r.interface.makeError(g.data, d) : g;\n    }\n    let p = t(...l);\n    return r.interface.decodeFunctionResult(p, x);\n  }, \"staticCallResult\"), f = /* @__PURE__ */ a(async (...l) => t(...l).constant ? await s(...l) : await i(...l), \"method\");\n  return P(f, {\n    name: r.interface.getFunctionName(e),\n    _contract: r,\n    _key: e,\n    getFragment: t,\n    estimateGas: o,\n    populateTransaction: n,\n    send: i,\n    staticCall: s,\n    staticCallResult: c\n  }), Object.defineProperty(f, \"fragment\", {\n    configurable: !1,\n    enumerable: !0,\n    get: /* @__PURE__ */ a(() => {\n      let l = r.interface.getFunction(e);\n      return b(l, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"fragment\",\n        info: { key: e }\n      }), l;\n    }, \"get\")\n  }), f;\n}\na(_x, \"buildWrappedMethod\");\nfunction zx(r, e) {\n  let t = /* @__PURE__ */ a(function(...s) {\n    let i = r.interface.getEvent(e, s);\n    return b(i, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"fragment\",\n      info: { key: e, args: s }\n    }), i;\n  }, \"getFragment\"), n = /* @__PURE__ */ a(function(...s) {\n    return new rc(r, t(...s), s);\n  }, \"method\");\n  return P(n, {\n    name: r.interface.getEventName(e),\n    _contract: r,\n    _key: e,\n    getFragment: t\n  }), Object.defineProperty(n, \"fragment\", {\n    configurable: !1,\n    enumerable: !0,\n    get: /* @__PURE__ */ a(() => {\n      let s = r.interface.getEvent(e);\n      return b(s, \"no matching fragment\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"fragment\",\n        info: { key: e }\n      }), s;\n    }, \"get\")\n  }), n;\n}\na(zx, \"buildWrappedEvent\");\nvar uo = Symbol.for(\"_ethersInternal_contract\"), Kl = /* @__PURE__ */ new WeakMap();\nfunction Vx(r, e) {\n  Kl.set(r[uo], e);\n}\na(Vx, \"setInternal\");\nfunction et(r) {\n  return Kl.get(r[uo]);\n}\na(et, \"getInternal\");\nfunction Kx(r) {\n  return r && typeof r == \"object\" && \"getTopicFilter\" in r && typeof r.getTopicFilter == \"function\" && r.fragment;\n}\na(Kx, \"isDeferred\");\nasync function oc(r, e) {\n  let t, n = null;\n  if (Array.isArray(e)) {\n    let i = /* @__PURE__ */ a(function(o) {\n      if (z(o, 32))\n        return o;\n      let c = r.interface.getEvent(o);\n      return h(c, \"unknown fragment\", \"name\", o), c.topicHash;\n    }, \"topicHashify\");\n    t = e.map((o) => o == null ? null : Array.isArray(o) ? o.map(i) : i(o));\n  } else e === \"*\" ? t = [null] : typeof e == \"string\" ? z(e, 32) ? t = [e] : (n = r.interface.getEvent(e), h(n, \"unknown fragment\", \"event\", e), t = [n.topicHash]) : Kx(e) ? t = await e.getTopicFilter() : \"fragment\" in e ? (n = e.fragment, t = [n.topicHash]) : h(!1, \"unknown event name\", \"event\", e);\n  t = t.map((i) => {\n    if (i == null)\n      return null;\n    if (Array.isArray(i)) {\n      let o = Array.from(new Set(i.map((c) => c.toLowerCase())).values());\n      return o.length === 1 ? o[0] : (o.sort(), o);\n    }\n    return i.toLowerCase();\n  });\n  let s = t.map((i) => i == null ? \"null\" : Array.isArray(i) ? i.join(\"|\") : i).join(\"&\");\n  return { fragment: n, tag: s, topics: t };\n}\na(oc, \"getSubInfo\");\nasync function Qs(r, e) {\n  let { subs: t } = et(r);\n  return t.get((await oc(r, e)).tag) || null;\n}\na(Qs, \"hasSub\");\nasync function Gl(r, e, t) {\n  let n = hn(r.runner);\n  b(n, \"contract runner does not support subscribing\", \"UNSUPPORTED_OPERATION\", { operation: e });\n  let { fragment: s, tag: i, topics: o } = await oc(r, t), { addr: c, subs: f } = et(r), l = f.get(i);\n  if (!l) {\n    let d = { address: c || r, topics: o }, x = /* @__PURE__ */ a((y) => {\n      let A = s;\n      if (A == null)\n        try {\n          A = r.interface.getEvent(y.topics[0]);\n        } catch {\n        }\n      if (A) {\n        let B = A, N = s ? r.interface.decodeEventLog(s, y.data, y.topics) : [];\n        sc(r, t, N, (D) => new dn(r, D, t, B, y));\n      } else\n        sc(r, t, [], (B) => new Cr(r, B, t, y));\n    }, \"listener\"), p = [];\n    l = { tag: i, listeners: [], start: /* @__PURE__ */ a(() => {\n      p.length || p.push(n.on(d, x));\n    }, \"start\"), stop: /* @__PURE__ */ a(async () => {\n      if (p.length == 0)\n        return;\n      let y = p;\n      p = [], await Promise.all(y), n.off(d, x);\n    }, \"stop\") }, f.set(i, l);\n  }\n  return l;\n}\na(Gl, \"getSub\");\nvar nc = Promise.resolve();\nasync function Qx(r, e, t, n) {\n  await nc;\n  let s = await Qs(r, e);\n  if (!s)\n    return !1;\n  let i = s.listeners.length;\n  return s.listeners = s.listeners.filter(({ listener: o, once: c }) => {\n    let f = Array.from(t);\n    n && f.push(n(c ? null : o));\n    try {\n      o.call(r, ...f);\n    } catch {\n    }\n    return !c;\n  }), s.listeners.length === 0 && (s.stop(), et(r).subs.delete(s.tag)), i > 0;\n}\na(Qx, \"_emit\");\nasync function sc(r, e, t, n) {\n  try {\n    await nc;\n  } catch {\n  }\n  let s = Qx(r, e, t, n);\n  return nc = s, await s;\n}\na(sc, \"emit\");\nvar lo = [\"then\"], ir = class r {\n  static {\n    a(this, \"BaseContract\");\n  }\n  /**\n   *  The target to connect to.\n   *\n   *  This can be an address, ENS name or any [[Addressable]], such as\n   *  another contract. To get the resovled address, use the ``getAddress``\n   *  method.\n   */\n  target;\n  /**\n   *  The contract Interface.\n   */\n  interface;\n  /**\n   *  The connected runner. This is generally a [[Provider]] or a\n   *  [[Signer]], which dictates what operations are supported.\n   *\n   *  For example, a **Contract** connected to a [[Provider]] may\n   *  only execute read-only operations.\n   */\n  runner;\n  /**\n   *  All the Events available on this contract.\n   */\n  filters;\n  /**\n   *  @_ignore:\n   */\n  [uo];\n  /**\n   *  The fallback or receive function if any.\n   */\n  fallback;\n  /**\n   *  Creates a new contract connected to %%target%% with the %%abi%% and\n   *  optionally connected to a %%runner%% to perform operations on behalf\n   *  of.\n   */\n  constructor(e, t, n, s) {\n    h(typeof e == \"string\" || jn(e), \"invalid value for Contract target\", \"target\", e), n == null && (n = null);\n    let i = tr.from(t);\n    P(this, { target: e, runner: n, interface: i }), Object.defineProperty(this, uo, { value: {} });\n    let o, c = null, f = null;\n    if (s) {\n      let d = hn(n);\n      f = new sr(this.interface, d, s);\n    }\n    let l = /* @__PURE__ */ new Map();\n    if (typeof e == \"string\")\n      if (z(e))\n        c = e, o = Promise.resolve(e);\n      else {\n        let d = xn(n, \"resolveName\");\n        if (!ho(d))\n          throw Q(\"contract runner does not support name resolution\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"resolveName\"\n          });\n        o = d.resolveName(e).then((x) => {\n          if (x == null)\n            throw Q(\"an ENS name used for a contract target must be correctly configured\", \"UNCONFIGURED_NAME\", {\n              value: e\n            });\n          return et(this).addr = x, x;\n        });\n      }\n    else\n      o = e.getAddress().then((d) => {\n        if (d == null)\n          throw new Error(\"TODO\");\n        return et(this).addr = d, d;\n      });\n    Vx(this, { addrPromise: o, addr: c, deployTx: f, subs: l });\n    let u = new Proxy({}, {\n      get: /* @__PURE__ */ a((d, x, p) => {\n        if (typeof x == \"symbol\" || lo.indexOf(x) >= 0)\n          return Reflect.get(d, x, p);\n        try {\n          return this.getEvent(x);\n        } catch (g) {\n          if (!$(g, \"INVALID_ARGUMENT\") || g.argument !== \"key\")\n            throw g;\n        }\n      }, \"get\"),\n      has: /* @__PURE__ */ a((d, x) => lo.indexOf(x) >= 0 ? Reflect.has(d, x) : Reflect.has(d, x) || this.interface.hasEvent(String(x)), \"has\")\n    });\n    return P(this, { filters: u }), P(this, {\n      fallback: i.receive || i.fallback ? Hx(this) : null\n    }), new Proxy(this, {\n      get: /* @__PURE__ */ a((d, x, p) => {\n        if (typeof x == \"symbol\" || x in d || lo.indexOf(x) >= 0)\n          return Reflect.get(d, x, p);\n        try {\n          return d.getFunction(x);\n        } catch (g) {\n          if (!$(g, \"INVALID_ARGUMENT\") || g.argument !== \"key\")\n            throw g;\n        }\n      }, \"get\"),\n      has: /* @__PURE__ */ a((d, x) => typeof x == \"symbol\" || x in d || lo.indexOf(x) >= 0 ? Reflect.has(d, x) : d.interface.hasFunction(x), \"has\")\n    });\n  }\n  /**\n   *  Return a new Contract instance with the same target and ABI, but\n   *  a different %%runner%%.\n   */\n  connect(e) {\n    return new r(this.target, this.interface, e);\n  }\n  /**\n   *  Return a new Contract instance with the same ABI and runner, but\n   *  a different %%target%%.\n   */\n  attach(e) {\n    return new r(e, this.interface, this.runner);\n  }\n  /**\n   *  Return the resolved address of this Contract.\n   */\n  async getAddress() {\n    return await et(this).addrPromise;\n  }\n  /**\n   *  Return the deployed bytecode or null if no bytecode is found.\n   */\n  async getDeployedCode() {\n    let e = hn(this.runner);\n    b(e, \"runner does not support .provider\", \"UNSUPPORTED_OPERATION\", { operation: \"getDeployedCode\" });\n    let t = await e.getCode(await this.getAddress());\n    return t === \"0x\" ? null : t;\n  }\n  /**\n   *  Resolve to this Contract once the bytecode has been deployed, or\n   *  resolve immediately if already deployed.\n   */\n  async waitForDeployment() {\n    let e = this.deploymentTransaction();\n    if (e)\n      return await e.wait(), this;\n    if (await this.getDeployedCode() != null)\n      return this;\n    let n = hn(this.runner);\n    return b(n != null, \"contract runner does not support .provider\", \"UNSUPPORTED_OPERATION\", { operation: \"waitForDeployment\" }), new Promise((s, i) => {\n      let o = /* @__PURE__ */ a(async () => {\n        try {\n          if (await this.getDeployedCode() != null)\n            return s(this);\n          n.once(\"block\", o);\n        } catch (c) {\n          i(c);\n        }\n      }, \"checkCode\");\n      o();\n    });\n  }\n  /**\n   *  Return the transaction used to deploy this contract.\n   *\n   *  This is only available if this instance was returned from a\n   *  [[ContractFactory]].\n   */\n  deploymentTransaction() {\n    return et(this).deployTx;\n  }\n  /**\n   *  Return the function for a given name. This is useful when a contract\n   *  method name conflicts with a JavaScript name such as ``prototype`` or\n   *  when using a Contract programatically.\n   */\n  getFunction(e) {\n    return typeof e != \"string\" && (e = e.format()), _x(this, e);\n  }\n  /**\n   *  Return the event for a given name. This is useful when a contract\n   *  event name conflicts with a JavaScript name such as ``prototype`` or\n   *  when using a Contract programatically.\n   */\n  getEvent(e) {\n    return typeof e != \"string\" && (e = e.format()), zx(this, e);\n  }\n  /**\n   *  @_ignore:\n   */\n  async queryTransaction(e) {\n    throw new Error(\"@TODO\");\n  }\n  /*\n      // @TODO: this is a non-backwards compatible change, but will be added\n      //        in v7 and in a potential SmartContract class in an upcoming\n      //        v6 release\n      async getTransactionReceipt(hash: string): Promise<null | ContractTransactionReceipt> {\n          const provider = getProvider(this.runner);\n          assert(provider, \"contract runner does not have a provider\",\n              \"UNSUPPORTED_OPERATION\", { operation: \"queryTransaction\" });\n  \n          const receipt = await provider.getTransactionReceipt(hash);\n          if (receipt == null) { return null; }\n  \n          return new ContractTransactionReceipt(this.interface, provider, receipt);\n      }\n      */\n  /**\n   *  Provide historic access to event data for %%event%% in the range\n   *  %%fromBlock%% (default: ``0``) to %%toBlock%% (default: ``\"latest\"``)\n   *  inclusive.\n   */\n  async queryFilter(e, t, n) {\n    t == null && (t = 0), n == null && (n = \"latest\");\n    let { addr: s, addrPromise: i } = et(this), o = s || await i, { fragment: c, topics: f } = await oc(this, e), l = { address: o, topics: f, fromBlock: t, toBlock: n }, u = hn(this.runner);\n    return b(u, \"contract runner does not have a provider\", \"UNSUPPORTED_OPERATION\", { operation: \"queryFilter\" }), (await u.getLogs(l)).map((d) => {\n      let x = c;\n      if (x == null)\n        try {\n          x = this.interface.getEvent(d.topics[0]);\n        } catch {\n        }\n      if (x)\n        try {\n          return new nr(d, this.interface, x);\n        } catch (p) {\n          return new Ir(d, p);\n        }\n      return new $e(d, u);\n    });\n  }\n  /**\n   *  Add an event %%listener%% for the %%event%%.\n   */\n  async on(e, t) {\n    let n = await Gl(this, \"on\", e);\n    return n.listeners.push({ listener: t, once: !1 }), n.start(), this;\n  }\n  /**\n   *  Add an event %%listener%% for the %%event%%, but remove the listener\n   *  after it is fired once.\n   */\n  async once(e, t) {\n    let n = await Gl(this, \"once\", e);\n    return n.listeners.push({ listener: t, once: !0 }), n.start(), this;\n  }\n  /**\n   *  Emit an %%event%% calling all listeners with %%args%%.\n   *\n   *  Resolves to ``true`` if any listeners were called.\n   */\n  async emit(e, ...t) {\n    return await sc(this, e, t, null);\n  }\n  /**\n   *  Resolves to the number of listeners of %%event%% or the total number\n   *  of listeners if unspecified.\n   */\n  async listenerCount(e) {\n    if (e) {\n      let s = await Qs(this, e);\n      return s ? s.listeners.length : 0;\n    }\n    let { subs: t } = et(this), n = 0;\n    for (let { listeners: s } of t.values())\n      n += s.length;\n    return n;\n  }\n  /**\n   *  Resolves to the listeners subscribed to %%event%% or all listeners\n   *  if unspecified.\n   */\n  async listeners(e) {\n    if (e) {\n      let s = await Qs(this, e);\n      return s ? s.listeners.map(({ listener: i }) => i) : [];\n    }\n    let { subs: t } = et(this), n = [];\n    for (let { listeners: s } of t.values())\n      n = n.concat(s.map(({ listener: i }) => i));\n    return n;\n  }\n  /**\n   *  Remove the %%listener%% from the listeners for %%event%% or remove\n   *  all listeners if unspecified.\n   */\n  async off(e, t) {\n    let n = await Qs(this, e);\n    if (!n)\n      return this;\n    if (t) {\n      let s = n.listeners.map(({ listener: i }) => i).indexOf(t);\n      s >= 0 && n.listeners.splice(s, 1);\n    }\n    return (t == null || n.listeners.length === 0) && (n.stop(), et(this).subs.delete(n.tag)), this;\n  }\n  /**\n   *  Remove all the listeners for %%event%% or remove all listeners if\n   *  unspecified.\n   */\n  async removeAllListeners(e) {\n    if (e) {\n      let t = await Qs(this, e);\n      if (!t)\n        return this;\n      t.stop(), et(this).subs.delete(t.tag);\n    } else {\n      let { subs: t } = et(this);\n      for (let { tag: n, stop: s } of t.values())\n        s(), t.delete(n);\n    }\n    return this;\n  }\n  /**\n   *  Alias for [on].\n   */\n  async addListener(e, t) {\n    return await this.on(e, t);\n  }\n  /**\n   *  Alias for [off].\n   */\n  async removeListener(e, t) {\n    return await this.off(e, t);\n  }\n  /**\n   *  Create a new Class for the %%abi%%.\n   */\n  static buildClass(e) {\n    class t extends r {\n      static {\n        a(this, \"CustomContract\");\n      }\n      constructor(s, i = null) {\n        super(s, e, i);\n      }\n    }\n    return t;\n  }\n  /**\n   *  Create a new BaseContract with a specified Interface.\n   */\n  static from(e, t, n) {\n    return n == null && (n = null), new this(e, t, n);\n  }\n};\nfunction Jx() {\n  return ir;\n}\na(Jx, \"_ContractBase\");\nvar We = class extends Jx() {\n  static {\n    a(this, \"Contract\");\n  }\n};\n\n// node_modules/ethers/lib.esm/contract/factory.js\nvar Js = class r {\n  static {\n    a(this, \"ContractFactory\");\n  }\n  /**\n   *  The Contract Interface.\n   */\n  interface;\n  /**\n   *  The Contract deployment bytecode. Often called the initcode.\n   */\n  bytecode;\n  /**\n   *  The ContractRunner to deploy the Contract as.\n   */\n  runner;\n  /**\n   *  Create a new **ContractFactory** with %%abi%% and %%bytecode%%,\n   *  optionally connected to %%runner%%.\n   *\n   *  The %%bytecode%% may be the ``bytecode`` property within the\n   *  standard Solidity JSON output.\n   */\n  constructor(e, t, n) {\n    let s = tr.from(e);\n    t instanceof Uint8Array ? t = w(E(t)) : (typeof t == \"object\" && (t = t.object), t.startsWith(\"0x\") || (t = \"0x\" + t), t = w(E(t))), P(this, {\n      bytecode: t,\n      interface: s,\n      runner: n || null\n    });\n  }\n  attach(e) {\n    return new ir(e, this.interface, this.runner);\n  }\n  /**\n   *  Resolves to the transaction to deploy the contract, passing %%args%%\n   *  into the constructor.\n   */\n  async getDeployTransaction(...e) {\n    let t = {}, n = this.interface.deploy;\n    if (n.inputs.length + 1 === e.length && (t = await xo(e.pop())), n.inputs.length !== e.length)\n      throw new Error(\"incorrect number of arguments to constructor\");\n    let s = await ic(this.runner, n.inputs, e), i = F([this.bytecode, this.interface.encodeDeploy(s)]);\n    return Object.assign({}, t, { data: i });\n  }\n  /**\n   *  Resolves to the Contract deployed by passing %%args%% into the\n   *  constructor.\n   *\n   *  This will resolve to the Contract before it has been deployed to the\n   *  network, so the [[BaseContract-waitForDeployment]] should be used before\n   *  sending any transactions to it.\n   */\n  async deploy(...e) {\n    let t = await this.getDeployTransaction(...e);\n    b(this.runner && typeof this.runner.sendTransaction == \"function\", \"factory runner does not support sending transactions\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"sendTransaction\"\n    });\n    let n = await this.runner.sendTransaction(t), s = tn(n);\n    return new ir(s, this.interface, this.runner, n);\n  }\n  /**\n   *  Return a new **ContractFactory** with the same ABI and bytecode,\n   *  but connected to %%runner%%.\n   */\n  connect(e) {\n    return new r(this.interface, this.bytecode, e);\n  }\n  /**\n   *  Create a new **ContractFactory** from the standard Solidity JSON output.\n   */\n  static fromSolidity(e, t) {\n    h(e != null, \"bad compiler output\", \"output\", e), typeof e == \"string\" && (e = JSON.parse(e));\n    let n = e.abi, s = \"\";\n    return e.bytecode ? s = e.bytecode : e.evm && e.evm.bytecode && (s = e.evm.bytecode), new this(n, s, t);\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/ens-resolver.js\nfunction ac(r) {\n  return r.match(/^ipfs:\\/\\/ipfs\\//i) ? r = r.substring(12) : r.match(/^ipfs:\\/\\//i) ? r = r.substring(7) : h(!1, \"unsupported IPFS format\", \"link\", r), `https://gateway.ipfs.io/ipfs/${r}`;\n}\na(ac, \"getIpfsLink\");\nvar as = class {\n  static {\n    a(this, \"MulticoinProviderPlugin\");\n  }\n  /**\n   *  The name.\n   */\n  name;\n  /**\n   *  Creates a new **MulticoinProviderPluing** for %%name%%.\n   */\n  constructor(e) {\n    P(this, { name: e });\n  }\n  connect(e) {\n    return this;\n  }\n  /**\n   *  Returns ``true`` if %%coinType%% is supported by this plugin.\n   */\n  supportsCoinType(e) {\n    return !1;\n  }\n  /**\n   *  Resolves to the encoded %%address%% for %%coinType%%.\n   */\n  async encodeAddress(e, t) {\n    throw new Error(\"unsupported coin\");\n  }\n  /**\n   *  Resolves to the decoded %%data%% for %%coinType%%.\n   */\n  async decodeAddress(e, t) {\n    throw new Error(\"unsupported coin\");\n  }\n};\nvar Jl = new RegExp(\"^(ipfs)://(.*)$\", \"i\"), Ql = [\n  new RegExp(\"^(https)://(.*)$\", \"i\"),\n  new RegExp(\"^(data):(.*)$\", \"i\"),\n  Jl,\n  new RegExp(\"^eip155:[0-9]+/(erc[0-9]+):(.*)$\", \"i\")\n], Or = class r {\n  static {\n    a(this, \"EnsResolver\");\n  }\n  /**\n   *  The connected provider.\n   */\n  provider;\n  /**\n   *  The address of the resolver.\n   */\n  address;\n  /**\n   *  The name this resolver was resolved against.\n   */\n  name;\n  // For EIP-2544 names, the ancestor that provided the resolver\n  #e;\n  #t;\n  constructor(e, t, n) {\n    P(this, { provider: e, address: t, name: n }), this.#e = null, this.#t = new We(t, [\n      \"function supportsInterface(bytes4) view returns (bool)\",\n      \"function resolve(bytes, bytes) view returns (bytes)\",\n      \"function addr(bytes32) view returns (address)\",\n      \"function addr(bytes32, uint) view returns (bytes)\",\n      \"function text(bytes32, string) view returns (string)\",\n      \"function contenthash(bytes32) view returns (bytes)\"\n    ], e);\n  }\n  /**\n   *  Resolves to true if the resolver supports wildcard resolution.\n   */\n  async supportsWildcard() {\n    return this.#e == null && (this.#e = (async () => {\n      try {\n        return await this.#t.supportsInterface(\"0x9061b923\");\n      } catch (e) {\n        if ($(e, \"CALL_EXCEPTION\"))\n          return !1;\n        throw this.#e = null, e;\n      }\n    })()), await this.#e;\n  }\n  async #r(e, t) {\n    t = (t || []).slice();\n    let n = this.#t.interface;\n    t.unshift(Br(this.name));\n    let s = null;\n    await this.supportsWildcard() && (s = n.getFunction(e), b(s, \"missing fragment\", \"UNKNOWN_ERROR\", {\n      info: { funcName: e }\n    }), t = [\n      zs(this.name, 255),\n      n.encodeFunctionData(s, t)\n    ], e = \"resolve(bytes,bytes)\"), t.push({\n      enableCcipRead: !0\n    });\n    try {\n      let i = await this.#t[e](...t);\n      return s ? n.decodeFunctionResult(s, i)[0] : i;\n    } catch (i) {\n      if (!$(i, \"CALL_EXCEPTION\"))\n        throw i;\n    }\n    return null;\n  }\n  /**\n   *  Resolves to the address for %%coinType%% or null if the\n   *  provided %%coinType%% has not been configured.\n   */\n  async getAddress(e) {\n    if (e == null && (e = 60), e === 60)\n      try {\n        let i = await this.#r(\"addr(bytes32)\");\n        return i == null || i === Pt ? null : i;\n      } catch (i) {\n        if ($(i, \"CALL_EXCEPTION\"))\n          return null;\n        throw i;\n      }\n    if (e >= 0 && e < 2147483648) {\n      let i = e + 2147483648, o = await this.#r(\"addr(bytes32,uint)\", [i]);\n      if (z(o, 20))\n        return U(o);\n    }\n    let t = null;\n    for (let i of this.provider.plugins)\n      if (i instanceof as && i.supportsCoinType(e)) {\n        t = i;\n        break;\n      }\n    if (t == null)\n      return null;\n    let n = await this.#r(\"addr(bytes32,uint)\", [e]);\n    if (n == null || n === \"0x\")\n      return null;\n    let s = await t.decodeAddress(e, n);\n    if (s != null)\n      return s;\n    b(!1, \"invalid coin data\", \"UNSUPPORTED_OPERATION\", {\n      operation: `getAddress(${e})`,\n      info: { coinType: e, data: n }\n    });\n  }\n  /**\n   *  Resolves to the EIP-634 text record for %%key%%, or ``null``\n   *  if unconfigured.\n   */\n  async getText(e) {\n    let t = await this.#r(\"text(bytes32,string)\", [e]);\n    return t == null || t === \"0x\" ? null : t;\n  }\n  /**\n   *  Rsolves to the content-hash or ``null`` if unconfigured.\n   */\n  async getContentHash() {\n    let e = await this.#r(\"contenthash(bytes32)\");\n    if (e == null || e === \"0x\")\n      return null;\n    let t = e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);\n    if (t) {\n      let s = t[1] === \"e3010170\" ? \"ipfs\" : \"ipns\", i = parseInt(t[4], 16);\n      if (t[5].length === i * 2)\n        return `${s}://${Qr(\"0x\" + t[2])}`;\n    }\n    let n = e.match(/^0xe40101fa011b20([0-9a-f]*)$/);\n    if (n && n[1].length === 64)\n      return `bzz://${n[1]}`;\n    b(!1, \"invalid or unsupported content hash data\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"getContentHash()\",\n      info: { data: e }\n    });\n  }\n  /**\n   *  Resolves to the avatar url or ``null`` if the avatar is either\n   *  unconfigured or incorrectly configured (e.g. references an NFT\n   *  not owned by the address).\n   *\n   *  If diagnosing issues with configurations, the [[_getAvatar]]\n   *  method may be useful.\n   */\n  async getAvatar() {\n    return (await this._getAvatar()).url;\n  }\n  /**\n   *  When resolving an avatar, there are many steps involved, such\n   *  fetching metadata and possibly validating ownership of an\n   *  NFT.\n   *\n   *  This method can be used to examine each step and the value it\n   *  was working from.\n   */\n  async _getAvatar() {\n    let e = [{ type: \"name\", value: this.name }];\n    try {\n      let t = await this.getText(\"avatar\");\n      if (t == null)\n        return e.push({ type: \"!avatar\", value: \"\" }), { url: null, linkage: e };\n      e.push({ type: \"avatar\", value: t });\n      for (let n = 0; n < Ql.length; n++) {\n        let s = t.match(Ql[n]);\n        if (s == null)\n          continue;\n        let i = s[1].toLowerCase();\n        switch (i) {\n          case \"https\":\n          case \"data\":\n            return e.push({ type: \"url\", value: t }), { linkage: e, url: t };\n          case \"ipfs\": {\n            let o = ac(t);\n            return e.push({ type: \"ipfs\", value: t }), e.push({ type: \"url\", value: o }), { linkage: e, url: o };\n          }\n          case \"erc721\":\n          case \"erc1155\": {\n            let o = i === \"erc721\" ? \"tokenURI(uint256)\" : \"uri(uint256)\";\n            e.push({ type: i, value: t });\n            let c = await this.getAddress();\n            if (c == null)\n              return e.push({ type: \"!owner\", value: \"\" }), { url: null, linkage: e };\n            let f = (s[2] || \"\").split(\"/\");\n            if (f.length !== 2)\n              return e.push({ type: `!${i}caip`, value: s[2] || \"\" }), { url: null, linkage: e };\n            let l = f[1], u = new We(f[0], [\n              // ERC-721\n              \"function tokenURI(uint) view returns (string)\",\n              \"function ownerOf(uint) view returns (address)\",\n              // ERC-1155\n              \"function uri(uint) view returns (string)\",\n              \"function balanceOf(address, uint256) view returns (uint)\"\n            ], this.provider);\n            if (i === \"erc721\") {\n              let m = await u.ownerOf(l);\n              if (c !== m)\n                return e.push({ type: \"!owner\", value: m }), { url: null, linkage: e };\n              e.push({ type: \"owner\", value: m });\n            } else if (i === \"erc1155\") {\n              let m = await u.balanceOf(c, l);\n              if (!m)\n                return e.push({ type: \"!balance\", value: \"0\" }), { url: null, linkage: e };\n              e.push({ type: \"balance\", value: m.toString() });\n            }\n            let d = await u[o](l);\n            if (d == null || d === \"0x\")\n              return e.push({ type: \"!metadata-url\", value: \"\" }), { url: null, linkage: e };\n            e.push({ type: \"metadata-url-base\", value: d }), i === \"erc1155\" && (d = d.replace(\"{id}\", Be(l, 32).substring(2)), e.push({ type: \"metadata-url-expanded\", value: d })), d.match(/^ipfs:/i) && (d = ac(d)), e.push({ type: \"metadata-url\", value: d });\n            let x = {}, p = await new ne(d).send();\n            p.assertOk();\n            try {\n              x = p.bodyJson;\n            } catch {\n              try {\n                e.push({ type: \"!metadata\", value: p.bodyText });\n              } catch {\n                let A = p.body;\n                return A && e.push({ type: \"!metadata\", value: w(A) }), { url: null, linkage: e };\n              }\n              return { url: null, linkage: e };\n            }\n            if (!x)\n              return e.push({ type: \"!metadata\", value: \"\" }), { url: null, linkage: e };\n            e.push({ type: \"metadata\", value: JSON.stringify(x) });\n            let g = x.image;\n            if (typeof g != \"string\")\n              return e.push({ type: \"!imageUrl\", value: \"\" }), { url: null, linkage: e };\n            if (!g.match(/^(https:\\/\\/|data:)/i)) {\n              if (g.match(Jl) == null)\n                return e.push({ type: \"!imageUrl-ipfs\", value: g }), { url: null, linkage: e };\n              e.push({ type: \"imageUrl-ipfs\", value: g }), g = ac(g);\n            }\n            return e.push({ type: \"url\", value: g }), { linkage: e, url: g };\n          }\n        }\n      }\n    } catch {\n    }\n    return { linkage: e, url: null };\n  }\n  static async getEnsAddress(e) {\n    let t = await e.getNetwork(), n = t.getPlugin(\"org.ethers.plugins.network.Ens\");\n    return b(n, \"network does not support ENS\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"getEnsAddress\",\n      info: { network: t }\n    }), n.address;\n  }\n  static async #n(e, t) {\n    let n = await r.getEnsAddress(e);\n    try {\n      let i = await new We(n, [\n        \"function resolver(bytes32) view returns (address)\"\n      ], e).resolver(Br(t), {\n        enableCcipRead: !0\n      });\n      return i === Pt ? null : i;\n    } catch (s) {\n      throw s;\n    }\n    return null;\n  }\n  /**\n   *  Resolve to the ENS resolver for %%name%% using %%provider%% or\n   *  ``null`` if unconfigured.\n   */\n  static async fromName(e, t) {\n    let n = t;\n    for (; ; ) {\n      if (n === \"\" || n === \".\" || t !== \"eth\" && n === \"eth\")\n        return null;\n      let s = await r.#n(e, n);\n      if (s != null) {\n        let i = new r(e, s, t);\n        return n !== t && !await i.supportsWildcard() ? null : i;\n      }\n      n = n.split(\".\").slice(1).join(\".\");\n    }\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/format.js\nvar Wl = BigInt(0);\nfunction Z(r, e) {\n  return (function(t) {\n    return t == null ? e : r(t);\n  });\n}\na(Z, \"allowNull\");\nfunction Ws(r, e) {\n  return ((t) => {\n    if (e && t == null)\n      return null;\n    if (!Array.isArray(t))\n      throw new Error(\"not an array\");\n    return t.map((n) => r(n));\n  });\n}\na(Ws, \"arrayOf\");\nfunction js(r, e) {\n  return ((t) => {\n    let n = {};\n    for (let s in r) {\n      let i = s;\n      if (e && s in e && !(i in t)) {\n        for (let o of e[s])\n          if (o in t) {\n            i = o;\n            break;\n          }\n      }\n      try {\n        let o = r[s](t[i]);\n        o !== void 0 && (n[s] = o);\n      } catch (o) {\n        let c = o instanceof Error ? o.message : \"not-an-error\";\n        b(!1, `invalid value for value.${s} (${c})`, \"BAD_DATA\", { value: t });\n      }\n    }\n    return n;\n  });\n}\na(js, \"object\");\nfunction Wx(r) {\n  switch (r) {\n    case !0:\n    case \"true\":\n      return !0;\n    case !1:\n    case \"false\":\n      return !1;\n  }\n  h(!1, `invalid boolean; ${JSON.stringify(r)}`, \"value\", r);\n}\na(Wx, \"formatBoolean\");\nfunction cs(r) {\n  return h(z(r, !0), \"invalid data\", \"value\", r), r;\n}\na(cs, \"formatData\");\nfunction Se(r) {\n  return h(z(r, 32), \"invalid hash\", \"value\", r), r;\n}\na(Se, \"formatHash\");\nvar jx = js({\n  address: U,\n  blockHash: Se,\n  blockNumber: S,\n  data: cs,\n  index: S,\n  removed: Z(Wx, !1),\n  topics: Ws(Se),\n  transactionHash: Se,\n  transactionIndex: S\n}, {\n  index: [\"logIndex\"]\n});\nfunction jl(r) {\n  return jx(r);\n}\na(jl, \"formatLog\");\nvar Zx = js({\n  hash: Z(Se),\n  parentHash: Se,\n  parentBeaconBlockRoot: Z(Se, null),\n  number: S,\n  timestamp: S,\n  nonce: Z(cs),\n  difficulty: k,\n  gasLimit: k,\n  gasUsed: k,\n  stateRoot: Z(Se, null),\n  receiptsRoot: Z(Se, null),\n  blobGasUsed: Z(k, null),\n  excessBlobGas: Z(k, null),\n  miner: Z(U),\n  prevRandao: Z(Se, null),\n  extraData: cs,\n  baseFeePerGas: Z(k)\n}, {\n  prevRandao: [\"mixHash\"]\n});\nfunction Zl(r) {\n  let e = Zx(r);\n  return e.transactions = r.transactions.map((t) => typeof t == \"string\" ? t : cc(t)), e;\n}\na(Zl, \"formatBlock\");\nvar qx = js({\n  transactionIndex: S,\n  blockNumber: S,\n  transactionHash: Se,\n  address: U,\n  topics: Ws(Se),\n  data: cs,\n  index: S,\n  blockHash: Se\n}, {\n  index: [\"logIndex\"]\n});\nfunction Yx(r) {\n  return qx(r);\n}\na(Yx, \"formatReceiptLog\");\nvar Xx = js({\n  to: Z(U, null),\n  from: Z(U, null),\n  contractAddress: Z(U, null),\n  // should be allowNull(hash), but broken-EIP-658 support is handled in receipt\n  index: S,\n  root: Z(w),\n  gasUsed: k,\n  blobGasUsed: Z(k, null),\n  logsBloom: Z(cs),\n  blockHash: Se,\n  hash: Se,\n  logs: Ws(Yx),\n  blockNumber: S,\n  //confirmations: allowNull(getNumber, null),\n  cumulativeGasUsed: k,\n  effectiveGasPrice: Z(k),\n  blobGasPrice: Z(k, null),\n  status: Z(S),\n  type: Z(S, 0)\n}, {\n  effectiveGasPrice: [\"gasPrice\"],\n  hash: [\"transactionHash\"],\n  index: [\"transactionIndex\"]\n});\nfunction ql(r) {\n  return Xx(r);\n}\na(ql, \"formatTransactionReceipt\");\nfunction cc(r) {\n  r.to && k(r.to) === Wl && (r.to = \"0x0000000000000000000000000000000000000000\");\n  let e = js({\n    hash: Se,\n    // Some nodes do not return this, usually test nodes (like Ganache)\n    index: Z(S, void 0),\n    type: /* @__PURE__ */ a((t) => t === \"0x\" || t == null ? 0 : S(t), \"type\"),\n    accessList: Z(Ce, null),\n    blobVersionedHashes: Z(Ws(Se, !0), null),\n    authorizationList: Z(Ws((t) => {\n      let n;\n      if (t.signature)\n        n = t.signature;\n      else {\n        let s = t.yParity;\n        s === \"0x1b\" ? s = 0 : s === \"0x1c\" && (s = 1), n = Object.assign({}, t, { yParity: s });\n      }\n      return {\n        address: U(t.address),\n        chainId: k(t.chainId),\n        nonce: k(t.nonce),\n        signature: we.from(n)\n      };\n    }, !1), null),\n    blockHash: Z(Se, null),\n    blockNumber: Z(S, null),\n    transactionIndex: Z(S, null),\n    from: U,\n    // either (gasPrice) or (maxPriorityFeePerGas + maxFeePerGas) must be set\n    gasPrice: Z(k),\n    maxPriorityFeePerGas: Z(k),\n    maxFeePerGas: Z(k),\n    maxFeePerBlobGas: Z(k, null),\n    gasLimit: k,\n    to: Z(U, null),\n    value: k,\n    nonce: S,\n    data: cs,\n    creates: Z(U, null),\n    chainId: Z(k, null)\n  }, {\n    data: [\"input\"],\n    gasLimit: [\"gas\"],\n    index: [\"transactionIndex\"]\n  })(r);\n  if (e.to == null && e.creates == null && (e.creates = tn(e)), (r.type === 1 || r.type === 2) && r.accessList == null && (e.accessList = []), r.signature ? e.signature = we.from(r.signature) : e.signature = we.from(r), e.chainId == null) {\n    let t = e.signature.legacyChainId;\n    t != null && (e.chainId = t);\n  }\n  return e.blockHash && k(e.blockHash) === Wl && (e.blockHash = null), e;\n}\na(cc, \"formatTransactionResponse\");\n\n// node_modules/ethers/lib.esm/providers/plugins-network.js\nvar $x = \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\", Tt = class r {\n  static {\n    a(this, \"NetworkPlugin\");\n  }\n  /**\n   *  The name of the plugin.\n   *\n   *  It is recommended to use reverse-domain-notation, which permits\n   *  unique names with a known authority as well as hierarchal entries.\n   */\n  name;\n  /**\n   *  Creates a new **NetworkPlugin**.\n   */\n  constructor(e) {\n    P(this, { name: e });\n  }\n  /**\n   *  Creates a copy of this plugin.\n   */\n  clone() {\n    return new r(this.name);\n  }\n}, Sr = class r extends Tt {\n  static {\n    a(this, \"GasCostPlugin\");\n  }\n  /**\n   *  The block number to treat these values as valid from.\n   *\n   *  This allows a hardfork to have updated values included as well as\n   *  mulutiple hardforks to be supported.\n   */\n  effectiveBlock;\n  /**\n   *  The transactions base fee.\n   */\n  txBase;\n  /**\n   *  The fee for creating a new account.\n   */\n  txCreate;\n  /**\n   *  The fee per zero-byte in the data.\n   */\n  txDataZero;\n  /**\n   *  The fee per non-zero-byte in the data.\n   */\n  txDataNonzero;\n  /**\n   *  The fee per storage key in the [[link-eip-2930]] access list.\n   */\n  txAccessListStorageKey;\n  /**\n   *  The fee per address in the [[link-eip-2930]] access list.\n   */\n  txAccessListAddress;\n  /**\n   *  Creates a new GasCostPlugin from %%effectiveBlock%% until the\n   *  latest block or another GasCostPlugin supercedes that block number,\n   *  with the associated %%costs%%.\n   */\n  constructor(e, t) {\n    e == null && (e = 0), super(`org.ethers.network.plugins.GasCost#${e || 0}`);\n    let n = { effectiveBlock: e };\n    function s(i, o) {\n      let c = (t || {})[i];\n      c == null && (c = o), h(typeof c == \"number\", `invalud value for ${i}`, \"costs\", t), n[i] = c;\n    }\n    a(s, \"set\"), s(\"txBase\", 21e3), s(\"txCreate\", 32e3), s(\"txDataZero\", 4), s(\"txDataNonzero\", 16), s(\"txAccessListStorageKey\", 1900), s(\"txAccessListAddress\", 2400), P(this, n);\n  }\n  clone() {\n    return new r(this.effectiveBlock, this);\n  }\n}, Ur = class r extends Tt {\n  static {\n    a(this, \"EnsPlugin\");\n  }\n  /**\n   *  The ENS Registrty Contract address.\n   */\n  address;\n  /**\n   *  The chain ID that the ENS contract lives on.\n   */\n  targetNetwork;\n  /**\n   *  Creates a new **EnsPlugin** connected to %%address%% on the\n   *  %%targetNetwork%%. The default ENS address and mainnet is used\n   *  if unspecified.\n   */\n  constructor(e, t) {\n    super(\"org.ethers.plugins.network.Ens\"), P(this, {\n      address: e || $x,\n      targetNetwork: t ?? 1\n    });\n  }\n  clone() {\n    return new r(this.address, this.targetNetwork);\n  }\n}, Zs = class r extends Tt {\n  static {\n    a(this, \"FeeDataNetworkPlugin\");\n  }\n  #e;\n  /**\n   *  The fee data function provided to the constructor.\n   */\n  get feeDataFunc() {\n    return this.#e;\n  }\n  /**\n   *  Creates a new **FeeDataNetworkPlugin**.\n   */\n  constructor(e) {\n    super(\"org.ethers.plugins.network.FeeData\"), this.#e = e;\n  }\n  /**\n   *  Resolves to the fee data.\n   */\n  async getFeeData(e) {\n    return await this.#e(e);\n  }\n  clone() {\n    return new r(this.#e);\n  }\n}, pn = class extends Tt {\n  static {\n    a(this, \"FetchUrlFeeDataNetworkPlugin\");\n  }\n  #e;\n  #t;\n  /**\n   *  The URL to initialize the FetchRequest with in %%processFunc%%.\n   */\n  get url() {\n    return this.#e;\n  }\n  /**\n   *  The callback to use when computing the FeeData.\n   */\n  get processFunc() {\n    return this.#t;\n  }\n  /**\n   *  Creates a new **FetchUrlFeeDataNetworkPlugin** which will\n   *  be used when computing the fee data for the network.\n   */\n  constructor(e, t) {\n    super(\"org.ethers.plugins.network.FetchUrlFeeDataPlugin\"), this.#e = e, this.#t = t;\n  }\n  // We are immutable, so we can serve as our own clone\n  clone() {\n    return this;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/network.js\nvar fc = /* @__PURE__ */ new Map(), J = class r {\n  static {\n    a(this, \"Network\");\n  }\n  #e;\n  #t;\n  #r;\n  /**\n   *  Creates a new **Network** for %%name%% and %%chainId%%.\n   */\n  constructor(e, t) {\n    this.#e = e, this.#t = k(t), this.#r = /* @__PURE__ */ new Map();\n  }\n  /**\n   *  Returns a JSON-compatible representation of a Network.\n   */\n  toJSON() {\n    return { name: this.name, chainId: String(this.chainId) };\n  }\n  /**\n   *  The network common name.\n   *\n   *  This is the canonical name, as networks migh have multiple\n   *  names.\n   */\n  get name() {\n    return this.#e;\n  }\n  set name(e) {\n    this.#e = e;\n  }\n  /**\n   *  The network chain ID.\n   */\n  get chainId() {\n    return this.#t;\n  }\n  set chainId(e) {\n    this.#t = k(e, \"chainId\");\n  }\n  /**\n   *  Returns true if %%other%% matches this network. Any chain ID\n   *  must match, and if no chain ID is present, the name must match.\n   *\n   *  This method does not currently check for additional properties,\n   *  such as ENS address or plug-in compatibility.\n   */\n  matches(e) {\n    if (e == null)\n      return !1;\n    if (typeof e == \"string\") {\n      try {\n        return this.chainId === k(e);\n      } catch {\n      }\n      return this.name === e;\n    }\n    if (typeof e == \"number\" || typeof e == \"bigint\") {\n      try {\n        return this.chainId === k(e);\n      } catch {\n      }\n      return !1;\n    }\n    if (typeof e == \"object\") {\n      if (e.chainId != null) {\n        try {\n          return this.chainId === k(e.chainId);\n        } catch {\n        }\n        return !1;\n      }\n      return e.name != null ? this.name === e.name : !1;\n    }\n    return !1;\n  }\n  /**\n   *  Returns the list of plugins currently attached to this Network.\n   */\n  get plugins() {\n    return Array.from(this.#r.values());\n  }\n  /**\n   *  Attach a new %%plugin%% to this Network. The network name\n   *  must be unique, excluding any fragment.\n   */\n  attachPlugin(e) {\n    if (this.#r.get(e.name))\n      throw new Error(`cannot replace existing plugin: ${e.name} `);\n    return this.#r.set(e.name, e.clone()), this;\n  }\n  /**\n   *  Return the plugin, if any, matching %%name%% exactly. Plugins\n   *  with fragments will not be returned unless %%name%% includes\n   *  a fragment.\n   */\n  getPlugin(e) {\n    return this.#r.get(e) || null;\n  }\n  /**\n   *  Gets a list of all plugins that match %%name%%, with otr without\n   *  a fragment.\n   */\n  getPlugins(e) {\n    return this.plugins.filter((t) => t.name.split(\"#\")[0] === e);\n  }\n  /**\n   *  Create a copy of this Network.\n   */\n  clone() {\n    let e = new r(this.name, this.chainId);\n    return this.plugins.forEach((t) => {\n      e.attachPlugin(t.clone());\n    }), e;\n  }\n  /**\n   *  Compute the intrinsic gas required for a transaction.\n   *\n   *  A GasCostPlugin can be attached to override the default\n   *  values.\n   */\n  computeIntrinsicGas(e) {\n    let t = this.getPlugin(\"org.ethers.plugins.network.GasCost\") || new Sr(), n = t.txBase;\n    if (e.to == null && (n += t.txCreate), e.data)\n      for (let s = 2; s < e.data.length; s += 2)\n        e.data.substring(s, s + 2) === \"00\" ? n += t.txDataZero : n += t.txDataNonzero;\n    if (e.accessList) {\n      let s = Ce(e.accessList);\n      for (let i in s)\n        n += t.txAccessListAddress + t.txAccessListStorageKey * s[i].storageKeys.length;\n    }\n    return n;\n  }\n  /**\n   *  Returns a new Network for the %%network%% name or chainId.\n   */\n  static from(e) {\n    if (ep(), e == null)\n      return r.from(\"mainnet\");\n    if (typeof e == \"number\" && (e = BigInt(e)), typeof e == \"string\" || typeof e == \"bigint\") {\n      let t = fc.get(e);\n      if (t)\n        return t();\n      if (typeof e == \"bigint\")\n        return new r(\"unknown\", e);\n      h(!1, \"unknown network\", \"network\", e);\n    }\n    if (typeof e.clone == \"function\")\n      return e.clone();\n    if (typeof e == \"object\") {\n      h(typeof e.name == \"string\" && typeof e.chainId == \"number\", \"invalid network object name or chainId\", \"network\", e);\n      let t = new r(e.name, e.chainId);\n      return (e.ensAddress || e.ensNetwork != null) && t.attachPlugin(new Ur(e.ensAddress, e.ensNetwork)), t;\n    }\n    h(!1, \"invalid network\", \"network\", e);\n  }\n  /**\n   *  Register %%nameOrChainId%% with a function which returns\n   *  an instance of a Network representing that chain.\n   */\n  static register(e, t) {\n    typeof e == \"number\" && (e = BigInt(e));\n    let n = fc.get(e);\n    n && h(!1, `conflicting network for ${JSON.stringify(n.name)}`, \"nameOrChainId\", e), fc.set(e, t);\n  }\n};\nfunction Yl(r, e) {\n  let t = String(r);\n  if (!t.match(/^[0-9.]+$/))\n    throw new Error(`invalid gwei value: ${r}`);\n  let n = t.split(\".\");\n  if (n.length === 1 && n.push(\"\"), n.length !== 2)\n    throw new Error(`invalid gwei value: ${r}`);\n  for (; n[1].length < e; )\n    n[1] += \"0\";\n  if (n[1].length > 9) {\n    let s = BigInt(n[1].substring(0, 9));\n    n[1].substring(9).match(/^0+$/) || s++, n[1] = s.toString();\n  }\n  return BigInt(n[0] + n[1]);\n}\na(Yl, \"parseUnits\");\nfunction Xl(r) {\n  return new pn(r, async (e, t, n) => {\n    n.setHeader(\"User-Agent\", \"ethers\");\n    let s;\n    try {\n      let [i, o] = await Promise.all([\n        n.send(),\n        e()\n      ]);\n      s = i;\n      let c = s.bodyJson.standard;\n      return {\n        gasPrice: o.gasPrice,\n        maxFeePerGas: Yl(c.maxFee, 9),\n        maxPriorityFeePerGas: Yl(c.maxPriorityFee, 9)\n      };\n    } catch (i) {\n      b(!1, `error encountered with polygon gas station (${JSON.stringify(n.url)})`, \"SERVER_ERROR\", { request: n, response: s, error: i });\n    }\n  });\n}\na(Xl, \"getGasStationPlugin\");\nvar $l = !1;\nfunction ep() {\n  if ($l)\n    return;\n  $l = !0;\n  function r(e, t, n) {\n    let s = /* @__PURE__ */ a(function() {\n      let i = new J(e, t);\n      return n.ensNetwork != null && i.attachPlugin(new Ur(null, n.ensNetwork)), i.attachPlugin(new Sr()), (n.plugins || []).forEach((o) => {\n        i.attachPlugin(o);\n      }), i;\n    }, \"func\");\n    J.register(e, s), J.register(t, s), n.altNames && n.altNames.forEach((i) => {\n      J.register(i, s);\n    });\n  }\n  a(r, \"registerEth\"), r(\"mainnet\", 1, { ensNetwork: 1, altNames: [\"homestead\"] }), r(\"ropsten\", 3, { ensNetwork: 3 }), r(\"rinkeby\", 4, { ensNetwork: 4 }), r(\"goerli\", 5, { ensNetwork: 5 }), r(\"kovan\", 42, { ensNetwork: 42 }), r(\"sepolia\", 11155111, { ensNetwork: 11155111 }), r(\"holesky\", 17e3, { ensNetwork: 17e3 }), r(\"classic\", 61, {}), r(\"classicKotti\", 6, {}), r(\"arbitrum\", 42161, {\n    ensNetwork: 1\n  }), r(\"arbitrum-goerli\", 421613, {}), r(\"arbitrum-sepolia\", 421614, {}), r(\"base\", 8453, { ensNetwork: 1 }), r(\"base-goerli\", 84531, {}), r(\"base-sepolia\", 84532, {}), r(\"bnb\", 56, { ensNetwork: 1 }), r(\"bnbt\", 97, {}), r(\"linea\", 59144, { ensNetwork: 1 }), r(\"linea-goerli\", 59140, {}), r(\"linea-sepolia\", 59141, {}), r(\"matic\", 137, {\n    ensNetwork: 1,\n    plugins: [\n      Xl(\"https://gasstation.polygon.technology/v2\")\n    ]\n  }), r(\"matic-amoy\", 80002, {}), r(\"matic-mumbai\", 80001, {\n    altNames: [\"maticMumbai\", \"maticmum\"],\n    plugins: [\n      Xl(\"https://gasstation-testnet.polygon.technology/v2\")\n    ]\n  }), r(\"optimism\", 10, {\n    ensNetwork: 1,\n    plugins: []\n  }), r(\"optimism-goerli\", 420, {}), r(\"optimism-sepolia\", 11155420, {}), r(\"xdai\", 100, { ensNetwork: 1 });\n}\na(ep, \"injectCommonNetworks\");\n\n// node_modules/ethers/lib.esm/providers/subscriber-polling.js\nfunction lc(r) {\n  return JSON.parse(JSON.stringify(r));\n}\na(lc, \"copy\");\nvar po = class {\n  static {\n    a(this, \"PollingBlockSubscriber\");\n  }\n  #e;\n  #t;\n  #r;\n  // The most recent block we have scanned for events. The value -2\n  // indicates we still need to fetch an initial block number\n  #n;\n  /**\n   *  Create a new **PollingBlockSubscriber** attached to %%provider%%.\n   */\n  constructor(e) {\n    this.#e = e, this.#t = null, this.#r = 4e3, this.#n = -2;\n  }\n  /**\n   *  The polling interval.\n   */\n  get pollingInterval() {\n    return this.#r;\n  }\n  set pollingInterval(e) {\n    this.#r = e;\n  }\n  async #s() {\n    try {\n      let e = await this.#e.getBlockNumber();\n      if (this.#n === -2) {\n        this.#n = e;\n        return;\n      }\n      if (e !== this.#n) {\n        for (let t = this.#n + 1; t <= e; t++) {\n          if (this.#t == null)\n            return;\n          await this.#e.emit(\"block\", t);\n        }\n        this.#n = e;\n      }\n    } catch {\n    }\n    this.#t != null && (this.#t = this.#e._setTimeout(this.#s.bind(this), this.#r));\n  }\n  start() {\n    this.#t || (this.#t = this.#e._setTimeout(this.#s.bind(this), this.#r), this.#s());\n  }\n  stop() {\n    this.#t && (this.#e._clearTimeout(this.#t), this.#t = null);\n  }\n  pause(e) {\n    this.stop(), e && (this.#n = -2);\n  }\n  resume() {\n    this.start();\n  }\n}, qs = class {\n  static {\n    a(this, \"OnBlockSubscriber\");\n  }\n  #e;\n  #t;\n  #r;\n  /**\n   *  Create a new **OnBlockSubscriber** attached to %%provider%%.\n   */\n  constructor(e) {\n    this.#e = e, this.#r = !1, this.#t = (t) => {\n      this._poll(t, this.#e);\n    };\n  }\n  /**\n   *  Called on every new block.\n   */\n  async _poll(e, t) {\n    throw new Error(\"sub-classes must override this\");\n  }\n  start() {\n    this.#r || (this.#r = !0, this.#t(-2), this.#e.on(\"block\", this.#t));\n  }\n  stop() {\n    this.#r && (this.#r = !1, this.#e.off(\"block\", this.#t));\n  }\n  pause(e) {\n    this.stop();\n  }\n  resume() {\n    this.start();\n  }\n}, mo = class extends qs {\n  static {\n    a(this, \"PollingBlockTagSubscriber\");\n  }\n  #e;\n  #t;\n  constructor(e, t) {\n    super(e), this.#e = t, this.#t = -2;\n  }\n  pause(e) {\n    e && (this.#t = -2), super.pause(e);\n  }\n  async _poll(e, t) {\n    let n = await t.getBlock(this.#e);\n    n != null && (this.#t === -2 ? this.#t = n.number : n.number > this.#t && (t.emit(this.#e, n.number), this.#t = n.number));\n  }\n}, bo = class extends qs {\n  static {\n    a(this, \"PollingOrphanSubscriber\");\n  }\n  #e;\n  constructor(e, t) {\n    super(e), this.#e = lc(t);\n  }\n  async _poll(e, t) {\n    throw new Error(\"@TODO\");\n  }\n}, go = class extends qs {\n  static {\n    a(this, \"PollingTransactionSubscriber\");\n  }\n  #e;\n  /**\n   *  Create a new **PollingTransactionSubscriber** attached to\n   *  %%provider%%, listening for %%hash%%.\n   */\n  constructor(e, t) {\n    super(e), this.#e = t;\n  }\n  async _poll(e, t) {\n    let n = await t.getTransactionReceipt(this.#e);\n    n && t.emit(this.#e, n);\n  }\n}, Lr = class {\n  static {\n    a(this, \"PollingEventSubscriber\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  // The most recent block we have scanned for events. The value -2\n  // indicates we still need to fetch an initial block number\n  #s;\n  /**\n   *  Create a new **PollingTransactionSubscriber** attached to\n   *  %%provider%%, listening for %%filter%%.\n   */\n  constructor(e, t) {\n    this.#e = e, this.#t = lc(t), this.#r = this.#o.bind(this), this.#n = !1, this.#s = -2;\n  }\n  async #o(e) {\n    if (this.#s === -2)\n      return;\n    let t = lc(this.#t);\n    t.fromBlock = this.#s + 1, t.toBlock = e;\n    let n = await this.#e.getLogs(t);\n    if (n.length === 0) {\n      this.#s < e - 60 && (this.#s = e - 60);\n      return;\n    }\n    for (let s of n)\n      this.#e.emit(this.#t, s), this.#s = s.blockNumber;\n  }\n  start() {\n    this.#n || (this.#n = !0, this.#s === -2 && this.#e.getBlockNumber().then((e) => {\n      this.#s = e;\n    }), this.#e.on(\"block\", this.#r));\n  }\n  stop() {\n    this.#n && (this.#n = !1, this.#e.off(\"block\", this.#r));\n  }\n  pause(e) {\n    this.stop(), e && (this.#s = -2);\n  }\n  resume() {\n    this.start();\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/abstract-provider.js\nvar tp = BigInt(2), rp = 10;\nfunction yo(r) {\n  return r && typeof r.then == \"function\";\n}\na(yo, \"isPromise\");\nfunction wo(r, e) {\n  return r + \":\" + JSON.stringify(e, (t, n) => {\n    if (n == null)\n      return \"null\";\n    if (typeof n == \"bigint\")\n      return `bigint:${n.toString()}`;\n    if (typeof n == \"string\")\n      return n.toLowerCase();\n    if (typeof n == \"object\" && !Array.isArray(n)) {\n      let s = Object.keys(n);\n      return s.sort(), s.reduce((i, o) => (i[o] = n[o], i), {});\n    }\n    return n;\n  });\n}\na(wo, \"getTag\");\nvar It = class {\n  static {\n    a(this, \"UnmanagedSubscriber\");\n  }\n  /**\n   *  The name fof the event.\n   */\n  name;\n  /**\n   *  Create a new UnmanagedSubscriber with %%name%%.\n   */\n  constructor(e) {\n    P(this, { name: e });\n  }\n  start() {\n  }\n  stop() {\n  }\n  pause(e) {\n  }\n  resume() {\n  }\n};\nfunction np(r) {\n  return JSON.parse(JSON.stringify(r));\n}\na(np, \"copy\");\nfunction hc(r) {\n  return r = Array.from(new Set(r).values()), r.sort(), r;\n}\na(hc, \"concisify\");\nasync function uc(r, e) {\n  if (r == null)\n    throw new Error(\"invalid event\");\n  if (Array.isArray(r) && (r = { topics: r }), typeof r == \"string\")\n    switch (r) {\n      case \"block\":\n      case \"debug\":\n      case \"error\":\n      case \"finalized\":\n      case \"network\":\n      case \"pending\":\n      case \"safe\":\n        return { type: r, tag: r };\n    }\n  if (z(r, 32)) {\n    let t = r.toLowerCase();\n    return { type: \"transaction\", tag: wo(\"tx\", { hash: t }), hash: t };\n  }\n  if (r.orphan) {\n    let t = r;\n    return { type: \"orphan\", tag: wo(\"orphan\", t), filter: np(t) };\n  }\n  if (r.address || r.topics) {\n    let t = r, n = {\n      topics: (t.topics || []).map((s) => s == null ? null : Array.isArray(s) ? hc(s.map((i) => i.toLowerCase())) : s.toLowerCase())\n    };\n    if (t.address) {\n      let s = [], i = [], o = /* @__PURE__ */ a((c) => {\n        z(c) ? s.push(c) : i.push((async () => {\n          s.push(await le(c, e));\n        })());\n      }, \"addAddress\");\n      Array.isArray(t.address) ? t.address.forEach(o) : o(t.address), i.length && await Promise.all(i), n.address = hc(s.map((c) => c.toLowerCase()));\n    }\n    return { filter: n, tag: wo(\"event\", n), type: \"event\" };\n  }\n  h(!1, \"unknown ProviderEvent\", \"event\", r);\n}\na(uc, \"getSubscription\");\nfunction dc() {\n  return (/* @__PURE__ */ new Date()).getTime();\n}\na(dc, \"getTime\");\nvar sp = {\n  cacheTimeout: 250,\n  pollingInterval: 4e3\n}, ot = class {\n  static {\n    a(this, \"AbstractProvider\");\n  }\n  #e;\n  #t;\n  // null=unpaused, true=paused+dropWhilePaused, false=paused\n  #r;\n  #n;\n  #s;\n  #o;\n  #i;\n  // The most recent block number if running an event or -1 if no \"block\" event\n  #a;\n  #u;\n  #f;\n  #x;\n  #p;\n  /**\n   *  Create a new **AbstractProvider** connected to %%network%%, or\n   *  use the various network detection capabilities to discover the\n   *  [[Network]] if necessary.\n   */\n  constructor(e, t) {\n    if (this.#p = Object.assign({}, sp, t || {}), e === \"any\")\n      this.#o = !0, this.#s = null;\n    else if (e) {\n      let n = J.from(e);\n      this.#o = !1, this.#s = Promise.resolve(n), setTimeout(() => {\n        this.emit(\"network\", n, null);\n      }, 0);\n    } else\n      this.#o = !1, this.#s = null;\n    this.#a = -1, this.#i = /* @__PURE__ */ new Map(), this.#e = /* @__PURE__ */ new Map(), this.#t = /* @__PURE__ */ new Map(), this.#r = null, this.#n = !1, this.#u = 1, this.#f = /* @__PURE__ */ new Map(), this.#x = !1;\n  }\n  get pollingInterval() {\n    return this.#p.pollingInterval;\n  }\n  /**\n   *  Returns ``this``, to allow an **AbstractProvider** to implement\n   *  the [[ContractRunner]] interface.\n   */\n  get provider() {\n    return this;\n  }\n  /**\n   *  Returns all the registered plug-ins.\n   */\n  get plugins() {\n    return Array.from(this.#t.values());\n  }\n  /**\n   *  Attach a new plug-in.\n   */\n  attachPlugin(e) {\n    if (this.#t.get(e.name))\n      throw new Error(`cannot replace existing plugin: ${e.name} `);\n    return this.#t.set(e.name, e.connect(this)), this;\n  }\n  /**\n   *  Get a plugin by name.\n   */\n  getPlugin(e) {\n    return this.#t.get(e) || null;\n  }\n  /**\n   *  Prevent any CCIP-read operation, regardless of whether requested\n   *  in a [[call]] using ``enableCcipRead``.\n   */\n  get disableCcipRead() {\n    return this.#x;\n  }\n  set disableCcipRead(e) {\n    this.#x = !!e;\n  }\n  // Shares multiple identical requests made during the same 250ms\n  async #c(e) {\n    let t = this.#p.cacheTimeout;\n    if (t < 0)\n      return await this._perform(e);\n    let n = wo(e.method, e), s = this.#i.get(n);\n    return s || (s = this._perform(e), this.#i.set(n, s), setTimeout(() => {\n      this.#i.get(n) === s && this.#i.delete(n);\n    }, t)), await s;\n  }\n  /**\n   *  Resolves to the data for executing the CCIP-read operations.\n   */\n  async ccipReadFetch(e, t, n) {\n    if (this.disableCcipRead || n.length === 0 || e.to == null)\n      return null;\n    let s = e.to.toLowerCase(), i = t.toLowerCase(), o = [];\n    for (let c = 0; c < n.length; c++) {\n      let f = n[c], l = f.replace(\"{sender}\", s).replace(\"{data}\", i), u = new ne(l);\n      f.indexOf(\"{data}\") === -1 && (u.body = { data: i, sender: s }), this.emit(\"debug\", { action: \"sendCcipReadFetchRequest\", request: u, index: c, urls: n });\n      let d = \"unknown error\", x;\n      try {\n        x = await u.send();\n      } catch (p) {\n        o.push(p.message), this.emit(\"debug\", { action: \"receiveCcipReadFetchError\", request: u, result: { error: p } });\n        continue;\n      }\n      try {\n        let p = x.bodyJson;\n        if (p.data)\n          return this.emit(\"debug\", { action: \"receiveCcipReadFetchResult\", request: u, result: p }), p.data;\n        p.message && (d = p.message), this.emit(\"debug\", { action: \"receiveCcipReadFetchError\", request: u, result: p });\n      } catch {\n      }\n      b(x.statusCode < 400 || x.statusCode >= 500, `response not found during CCIP fetch: ${d}`, \"OFFCHAIN_FAULT\", { reason: \"404_MISSING_RESOURCE\", transaction: e, info: { url: f, errorMessage: d } }), o.push(d);\n    }\n    b(!1, `error encountered during CCIP fetch: ${o.map((c) => JSON.stringify(c)).join(\", \")}`, \"OFFCHAIN_FAULT\", {\n      reason: \"500_SERVER_ERROR\",\n      transaction: e,\n      info: { urls: n, errorMessages: o }\n    });\n  }\n  /**\n   *  Provides the opportunity for a sub-class to wrap a block before\n   *  returning it, to add additional properties or an alternate\n   *  sub-class of [[Block]].\n   */\n  _wrapBlock(e, t) {\n    return new un(Zl(e), this);\n  }\n  /**\n   *  Provides the opportunity for a sub-class to wrap a log before\n   *  returning it, to add additional properties or an alternate\n   *  sub-class of [[Log]].\n   */\n  _wrapLog(e, t) {\n    return new $e(jl(e), this);\n  }\n  /**\n   *  Provides the opportunity for a sub-class to wrap a transaction\n   *  receipt before returning it, to add additional properties or an\n   *  alternate sub-class of [[TransactionReceipt]].\n   */\n  _wrapTransactionReceipt(e, t) {\n    return new rr(ql(e), this);\n  }\n  /**\n   *  Provides the opportunity for a sub-class to wrap a transaction\n   *  response before returning it, to add additional properties or an\n   *  alternate sub-class of [[TransactionResponse]].\n   */\n  _wrapTransactionResponse(e, t) {\n    return new Dt(cc(e), this);\n  }\n  /**\n   *  Resolves to the Network, forcing a network detection using whatever\n   *  technique the sub-class requires.\n   *\n   *  Sub-classes **must** override this.\n   */\n  _detectNetwork() {\n    b(!1, \"sub-classes must implement this\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"_detectNetwork\"\n    });\n  }\n  /**\n   *  Sub-classes should use this to perform all built-in operations. All\n   *  methods sanitizes and normalizes the values passed into this.\n   *\n   *  Sub-classes **must** override this.\n   */\n  async _perform(e) {\n    b(!1, `unsupported method: ${e.method}`, \"UNSUPPORTED_OPERATION\", {\n      operation: e.method,\n      info: e\n    });\n  }\n  // State\n  async getBlockNumber() {\n    let e = S(await this.#c({ method: \"getBlockNumber\" }), \"%response\");\n    return this.#a >= 0 && (this.#a = e), e;\n  }\n  /**\n   *  Returns or resolves to the address for %%address%%, resolving ENS\n   *  names and [[Addressable]] objects and returning if already an\n   *  address.\n   */\n  _getAddress(e) {\n    return le(e, this);\n  }\n  /**\n   *  Returns or resolves to a valid block tag for %%blockTag%%, resolving\n   *  negative values and returning if already a valid block tag.\n   */\n  _getBlockTag(e) {\n    if (e == null)\n      return \"latest\";\n    switch (e) {\n      case \"earliest\":\n        return \"0x0\";\n      case \"finalized\":\n      case \"latest\":\n      case \"pending\":\n      case \"safe\":\n        return e;\n    }\n    if (z(e))\n      return z(e, 32) ? e : Pe(e);\n    if (typeof e == \"bigint\" && (e = S(e, \"blockTag\")), typeof e == \"number\")\n      return e >= 0 ? Pe(e) : this.#a >= 0 ? Pe(this.#a + e) : this.getBlockNumber().then((t) => Pe(t + e));\n    h(!1, \"invalid blockTag\", \"blockTag\", e);\n  }\n  /**\n   *  Returns or resolves to a filter for %%filter%%, resolving any ENS\n   *  names or [[Addressable]] object and returning if already a valid\n   *  filter.\n   */\n  _getFilter(e) {\n    let t = (e.topics || []).map((f) => f == null ? null : Array.isArray(f) ? hc(f.map((l) => l.toLowerCase())) : f.toLowerCase()), n = \"blockHash\" in e ? e.blockHash : void 0, s = /* @__PURE__ */ a((f, l, u) => {\n      let d;\n      switch (f.length) {\n        case 0:\n          break;\n        case 1:\n          d = f[0];\n          break;\n        default:\n          f.sort(), d = f;\n      }\n      if (n && (l != null || u != null))\n        throw new Error(\"invalid filter\");\n      let x = {};\n      return d && (x.address = d), t.length && (x.topics = t), l && (x.fromBlock = l), u && (x.toBlock = u), n && (x.blockHash = n), x;\n    }, \"resolve\"), i = [];\n    if (e.address)\n      if (Array.isArray(e.address))\n        for (let f of e.address)\n          i.push(this._getAddress(f));\n      else\n        i.push(this._getAddress(e.address));\n    let o;\n    \"fromBlock\" in e && (o = this._getBlockTag(e.fromBlock));\n    let c;\n    return \"toBlock\" in e && (c = this._getBlockTag(e.toBlock)), i.filter((f) => typeof f != \"string\").length || o != null && typeof o != \"string\" || c != null && typeof c != \"string\" ? Promise.all([Promise.all(i), o, c]).then((f) => s(f[0], f[1], f[2])) : s(i, o, c);\n  }\n  /**\n   *  Returns or resolves to a transaction for %%request%%, resolving\n   *  any ENS names or [[Addressable]] and returning if already a valid\n   *  transaction.\n   */\n  _getTransactionRequest(e) {\n    let t = it(e), n = [];\n    if ([\"to\", \"from\"].forEach((s) => {\n      if (t[s] == null)\n        return;\n      let i = le(t[s], this);\n      yo(i) ? n.push((async function() {\n        t[s] = await i;\n      })()) : t[s] = i;\n    }), t.blockTag != null) {\n      let s = this._getBlockTag(t.blockTag);\n      yo(s) ? n.push((async function() {\n        t.blockTag = await s;\n      })()) : t.blockTag = s;\n    }\n    return n.length ? (async function() {\n      return await Promise.all(n), t;\n    })() : t;\n  }\n  async getNetwork() {\n    if (this.#s == null) {\n      let s = (async () => {\n        try {\n          let i = await this._detectNetwork();\n          return this.emit(\"network\", i, null), i;\n        } catch (i) {\n          throw this.#s === s && (this.#s = null), i;\n        }\n      })();\n      return this.#s = s, (await s).clone();\n    }\n    let e = this.#s, [t, n] = await Promise.all([\n      e,\n      this._detectNetwork()\n      // The actual connected network\n    ]);\n    return t.chainId !== n.chainId && (this.#o ? (this.emit(\"network\", n, t), this.#s === e && (this.#s = Promise.resolve(n))) : b(!1, `network changed: ${t.chainId} => ${n.chainId} `, \"NETWORK_ERROR\", {\n      event: \"changed\"\n    })), t.clone();\n  }\n  async getFeeData() {\n    let e = await this.getNetwork(), t = /* @__PURE__ */ a(async () => {\n      let { _block: s, gasPrice: i, priorityFee: o } = await oe({\n        _block: this.#b(\"latest\", !1),\n        gasPrice: (async () => {\n          try {\n            let u = await this.#c({ method: \"getGasPrice\" });\n            return k(u, \"%response\");\n          } catch {\n          }\n          return null;\n        })(),\n        priorityFee: (async () => {\n          try {\n            let u = await this.#c({ method: \"getPriorityFee\" });\n            return k(u, \"%response\");\n          } catch {\n          }\n          return null;\n        })()\n      }), c = null, f = null, l = this._wrapBlock(s, e);\n      return l && l.baseFeePerGas && (f = o ?? BigInt(\"1000000000\"), c = l.baseFeePerGas * tp + f), new Tr(i, c, f);\n    }, \"getFeeDataFunc\"), n = e.getPlugin(\"org.ethers.plugins.network.FetchUrlFeeDataPlugin\");\n    if (n) {\n      let s = new ne(n.url), i = await n.processFunc(t, this, s);\n      return new Tr(i.gasPrice, i.maxFeePerGas, i.maxPriorityFeePerGas);\n    }\n    return await t();\n  }\n  async estimateGas(e) {\n    let t = this._getTransactionRequest(e);\n    return yo(t) && (t = await t), k(await this.#c({\n      method: \"estimateGas\",\n      transaction: t\n    }), \"%response\");\n  }\n  async #l(e, t, n) {\n    b(n < rp, \"CCIP read exceeded maximum redirections\", \"OFFCHAIN_FAULT\", {\n      reason: \"TOO_MANY_REDIRECTS\",\n      transaction: Object.assign({}, e, { blockTag: t, enableCcipRead: !0 })\n    });\n    let s = it(e);\n    try {\n      return w(await this._perform({ method: \"call\", transaction: s, blockTag: t }));\n    } catch (i) {\n      if (!this.disableCcipRead && xr(i) && i.data && n >= 0 && t === \"latest\" && s.to != null && Y(i.data, 0, 4) === \"0x556f1830\") {\n        let o = i.data, c = await le(s.to, this), f;\n        try {\n          f = fp(Y(i.data, 4));\n        } catch (d) {\n          b(!1, d.message, \"OFFCHAIN_FAULT\", {\n            reason: \"BAD_DATA\",\n            transaction: s,\n            info: { data: o }\n          });\n        }\n        b(f.sender.toLowerCase() === c.toLowerCase(), \"CCIP Read sender mismatch\", \"CALL_EXCEPTION\", {\n          action: \"call\",\n          data: o,\n          reason: \"OffchainLookup\",\n          transaction: s,\n          invocation: null,\n          revert: {\n            signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n            name: \"OffchainLookup\",\n            args: f.errorArgs\n          }\n        });\n        let l = await this.ccipReadFetch(s, f.calldata, f.urls);\n        b(l != null, \"CCIP Read failed to fetch data\", \"OFFCHAIN_FAULT\", {\n          reason: \"FETCH_FAILED\",\n          transaction: s,\n          info: { data: i.data, errorArgs: f.errorArgs }\n        });\n        let u = {\n          to: c,\n          data: F([f.selector, cp([l, f.extraData])])\n        };\n        this.emit(\"debug\", { action: \"sendCcipReadCall\", transaction: u });\n        try {\n          let d = await this.#l(u, t, n + 1);\n          return this.emit(\"debug\", { action: \"receiveCcipReadCallResult\", transaction: Object.assign({}, u), result: d }), d;\n        } catch (d) {\n          throw this.emit(\"debug\", { action: \"receiveCcipReadCallError\", transaction: Object.assign({}, u), error: d }), d;\n        }\n      }\n      throw i;\n    }\n  }\n  async #d(e) {\n    let { value: t } = await oe({\n      network: this.getNetwork(),\n      value: e\n    });\n    return t;\n  }\n  async call(e) {\n    let { tx: t, blockTag: n } = await oe({\n      tx: this._getTransactionRequest(e),\n      blockTag: this._getBlockTag(e.blockTag)\n    });\n    return await this.#d(this.#l(t, n, e.enableCcipRead ? 0 : -1));\n  }\n  // Account\n  async #h(e, t, n) {\n    let s = this._getAddress(t), i = this._getBlockTag(n);\n    return (typeof s != \"string\" || typeof i != \"string\") && ([s, i] = await Promise.all([s, i])), await this.#d(this.#c(Object.assign(e, { address: s, blockTag: i })));\n  }\n  async getBalance(e, t) {\n    return k(await this.#h({ method: \"getBalance\" }, e, t), \"%response\");\n  }\n  async getTransactionCount(e, t) {\n    return S(await this.#h({ method: \"getTransactionCount\" }, e, t), \"%response\");\n  }\n  async getCode(e, t) {\n    return w(await this.#h({ method: \"getCode\" }, e, t));\n  }\n  async getStorage(e, t, n) {\n    let s = k(t, \"position\");\n    return w(await this.#h({ method: \"getStorage\", position: s }, e, n));\n  }\n  // Write\n  async broadcastTransaction(e) {\n    let { blockNumber: t, hash: n, network: s } = await oe({\n      blockNumber: this.getBlockNumber(),\n      hash: this._perform({\n        method: \"broadcastTransaction\",\n        signedTransaction: e\n      }),\n      network: this.getNetwork()\n    }), i = Xe.from(e);\n    if (i.hash !== n)\n      throw new Error(\"@TODO: the returned hash did not match\");\n    return this._wrapTransactionResponse(i, s).replaceableTransaction(t);\n  }\n  async #b(e, t) {\n    if (z(e, 32))\n      return await this.#c({\n        method: \"getBlock\",\n        blockHash: e,\n        includeTransactions: t\n      });\n    let n = this._getBlockTag(e);\n    return typeof n != \"string\" && (n = await n), await this.#c({\n      method: \"getBlock\",\n      blockTag: n,\n      includeTransactions: t\n    });\n  }\n  // Queries\n  async getBlock(e, t) {\n    let { network: n, params: s } = await oe({\n      network: this.getNetwork(),\n      params: this.#b(e, !!t)\n    });\n    return s == null ? null : this._wrapBlock(s, n);\n  }\n  async getTransaction(e) {\n    let { network: t, params: n } = await oe({\n      network: this.getNetwork(),\n      params: this.#c({ method: \"getTransaction\", hash: e })\n    });\n    return n == null ? null : this._wrapTransactionResponse(n, t);\n  }\n  async getTransactionReceipt(e) {\n    let { network: t, params: n } = await oe({\n      network: this.getNetwork(),\n      params: this.#c({ method: \"getTransactionReceipt\", hash: e })\n    });\n    if (n == null)\n      return null;\n    if (n.gasPrice == null && n.effectiveGasPrice == null) {\n      let s = await this.#c({ method: \"getTransaction\", hash: e });\n      if (s == null)\n        throw new Error(\"report this; could not find tx or effectiveGasPrice\");\n      n.effectiveGasPrice = s.gasPrice;\n    }\n    return this._wrapTransactionReceipt(n, t);\n  }\n  async getTransactionResult(e) {\n    let { result: t } = await oe({\n      network: this.getNetwork(),\n      result: this.#c({ method: \"getTransactionResult\", hash: e })\n    });\n    return t == null ? null : w(t);\n  }\n  // Bloom-filter Queries\n  async getLogs(e) {\n    let t = this._getFilter(e);\n    yo(t) && (t = await t);\n    let { network: n, params: s } = await oe({\n      network: this.getNetwork(),\n      params: this.#c({ method: \"getLogs\", filter: t })\n    });\n    return s.map((i) => this._wrapLog(i, n));\n  }\n  // ENS\n  _getProvider(e) {\n    b(!1, \"provider cannot connect to target network\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"_getProvider()\"\n    });\n  }\n  async getResolver(e) {\n    return await Or.fromName(this, e);\n  }\n  async getAvatar(e) {\n    let t = await this.getResolver(e);\n    return t ? await t.getAvatar() : null;\n  }\n  async resolveName(e) {\n    let t = await this.getResolver(e);\n    return t ? await t.getAddress() : null;\n  }\n  async lookupAddress(e) {\n    e = U(e);\n    let t = Br(e.substring(2).toLowerCase() + \".addr.reverse\");\n    try {\n      let n = await Or.getEnsAddress(this), i = await new We(n, [\n        \"function resolver(bytes32) view returns (address)\"\n      ], this).resolver(t);\n      if (i == null || i === Pt)\n        return null;\n      let c = await new We(i, [\n        \"function name(bytes32) view returns (string)\"\n      ], this).name(t);\n      return await this.resolveName(c) !== e ? null : c;\n    } catch (n) {\n      if ($(n, \"BAD_DATA\") && n.value === \"0x\" || $(n, \"CALL_EXCEPTION\"))\n        return null;\n      throw n;\n    }\n    return null;\n  }\n  async waitForTransaction(e, t, n) {\n    let s = t ?? 1;\n    return s === 0 ? this.getTransactionReceipt(e) : new Promise(async (i, o) => {\n      let c = null, f = /* @__PURE__ */ a((async (l) => {\n        try {\n          let u = await this.getTransactionReceipt(e);\n          if (u != null && l - u.blockNumber + 1 >= s) {\n            i(u), c && (clearTimeout(c), c = null);\n            return;\n          }\n        } catch (u) {\n          console.log(\"EEE\", u);\n        }\n        this.once(\"block\", f);\n      }), \"listener\");\n      n != null && (c = setTimeout(() => {\n        c != null && (c = null, this.off(\"block\", f), o(Q(\"timeout\", \"TIMEOUT\", { reason: \"timeout\" })));\n      }, n)), f(await this.getBlockNumber());\n    });\n  }\n  async waitForBlock(e) {\n    b(!1, \"not implemented yet\", \"NOT_IMPLEMENTED\", {\n      operation: \"waitForBlock\"\n    });\n  }\n  /**\n   *  Clear a timer created using the [[_setTimeout]] method.\n   */\n  _clearTimeout(e) {\n    let t = this.#f.get(e);\n    t && (t.timer && clearTimeout(t.timer), this.#f.delete(e));\n  }\n  /**\n   *  Create a timer that will execute %%func%% after at least %%timeout%%\n   *  (in ms). If %%timeout%% is unspecified, then %%func%% will execute\n   *  in the next event loop.\n   *\n   *  [Pausing](AbstractProvider-paused) the provider will pause any\n   *  associated timers.\n   */\n  _setTimeout(e, t) {\n    t == null && (t = 0);\n    let n = this.#u++, s = /* @__PURE__ */ a(() => {\n      this.#f.delete(n), e();\n    }, \"func\");\n    if (this.paused)\n      this.#f.set(n, { timer: null, func: s, time: t });\n    else {\n      let i = setTimeout(s, t);\n      this.#f.set(n, { timer: i, func: s, time: dc() });\n    }\n    return n;\n  }\n  /**\n   *  Perform %%func%% on each subscriber.\n   */\n  _forEachSubscriber(e) {\n    for (let t of this.#e.values())\n      e(t.subscriber);\n  }\n  /**\n   *  Sub-classes may override this to customize subscription\n   *  implementations.\n   */\n  _getSubscriber(e) {\n    switch (e.type) {\n      case \"debug\":\n      case \"error\":\n      case \"network\":\n        return new It(e.type);\n      case \"block\": {\n        let t = new po(this);\n        return t.pollingInterval = this.pollingInterval, t;\n      }\n      case \"safe\":\n      case \"finalized\":\n        return new mo(this, e.type);\n      case \"event\":\n        return new Lr(this, e.filter);\n      case \"transaction\":\n        return new go(this, e.hash);\n      case \"orphan\":\n        return new bo(this, e.filter);\n    }\n    throw new Error(`unsupported event: ${e.type}`);\n  }\n  /**\n   *  If a [[Subscriber]] fails and needs to replace itself, this\n   *  method may be used.\n   *\n   *  For example, this is used for providers when using the\n   *  ``eth_getFilterChanges`` method, which can return null if state\n   *  filters are not supported by the backend, allowing the Subscriber\n   *  to swap in a [[PollingEventSubscriber]].\n   */\n  _recoverSubscriber(e, t) {\n    for (let n of this.#e.values())\n      if (n.subscriber === e) {\n        n.started && n.subscriber.stop(), n.subscriber = t, n.started && t.start(), this.#r != null && t.pause(this.#r);\n        break;\n      }\n  }\n  async #m(e, t) {\n    let n = await uc(e, this);\n    return n.type === \"event\" && t && t.length > 0 && t[0].removed === !0 && (n = await uc({ orphan: \"drop-log\", log: t[0] }, this)), this.#e.get(n.tag) || null;\n  }\n  async #g(e) {\n    let t = await uc(e, this), n = t.tag, s = this.#e.get(n);\n    return s || (s = { subscriber: this._getSubscriber(t), tag: n, addressableMap: /* @__PURE__ */ new WeakMap(), nameMap: /* @__PURE__ */ new Map(), started: !1, listeners: [] }, this.#e.set(n, s)), s;\n  }\n  async on(e, t) {\n    let n = await this.#g(e);\n    return n.listeners.push({ listener: t, once: !1 }), n.started || (n.subscriber.start(), n.started = !0, this.#r != null && n.subscriber.pause(this.#r)), this;\n  }\n  async once(e, t) {\n    let n = await this.#g(e);\n    return n.listeners.push({ listener: t, once: !0 }), n.started || (n.subscriber.start(), n.started = !0, this.#r != null && n.subscriber.pause(this.#r)), this;\n  }\n  async emit(e, ...t) {\n    let n = await this.#m(e, t);\n    if (!n || n.listeners.length === 0)\n      return !1;\n    let s = n.listeners.length;\n    return n.listeners = n.listeners.filter(({ listener: i, once: o }) => {\n      let c = new Qt(this, o ? null : i, e);\n      try {\n        i.call(this, ...t, c);\n      } catch {\n      }\n      return !o;\n    }), n.listeners.length === 0 && (n.started && n.subscriber.stop(), this.#e.delete(n.tag)), s > 0;\n  }\n  async listenerCount(e) {\n    if (e) {\n      let n = await this.#m(e);\n      return n ? n.listeners.length : 0;\n    }\n    let t = 0;\n    for (let { listeners: n } of this.#e.values())\n      t += n.length;\n    return t;\n  }\n  async listeners(e) {\n    if (e) {\n      let n = await this.#m(e);\n      return n ? n.listeners.map(({ listener: s }) => s) : [];\n    }\n    let t = [];\n    for (let { listeners: n } of this.#e.values())\n      t = t.concat(n.map(({ listener: s }) => s));\n    return t;\n  }\n  async off(e, t) {\n    let n = await this.#m(e);\n    if (!n)\n      return this;\n    if (t) {\n      let s = n.listeners.map(({ listener: i }) => i).indexOf(t);\n      s >= 0 && n.listeners.splice(s, 1);\n    }\n    return (!t || n.listeners.length === 0) && (n.started && n.subscriber.stop(), this.#e.delete(n.tag)), this;\n  }\n  async removeAllListeners(e) {\n    if (e) {\n      let { tag: t, started: n, subscriber: s } = await this.#g(e);\n      n && s.stop(), this.#e.delete(t);\n    } else\n      for (let [t, { started: n, subscriber: s }] of this.#e)\n        n && s.stop(), this.#e.delete(t);\n    return this;\n  }\n  // Alias for \"on\"\n  async addListener(e, t) {\n    return await this.on(e, t);\n  }\n  // Alias for \"off\"\n  async removeListener(e, t) {\n    return this.off(e, t);\n  }\n  /**\n   *  If this provider has been destroyed using the [[destroy]] method.\n   *\n   *  Once destroyed, all resources are reclaimed, internal event loops\n   *  and timers are cleaned up and no further requests may be sent to\n   *  the provider.\n   */\n  get destroyed() {\n    return this.#n;\n  }\n  /**\n   *  Sub-classes may use this to shutdown any sockets or release their\n   *  resources and reject any pending requests.\n   *\n   *  Sub-classes **must** call ``super.destroy()``.\n   */\n  destroy() {\n    this.removeAllListeners();\n    for (let e of this.#f.keys())\n      this._clearTimeout(e);\n    this.#n = !0;\n  }\n  /**\n   *  Whether the provider is currently paused.\n   *\n   *  A paused provider will not emit any events, and generally should\n   *  not make any requests to the network, but that is up to sub-classes\n   *  to manage.\n   *\n   *  Setting ``paused = true`` is identical to calling ``.pause(false)``,\n   *  which will buffer any events that occur while paused until the\n   *  provider is unpaused.\n   */\n  get paused() {\n    return this.#r != null;\n  }\n  set paused(e) {\n    !!e !== this.paused && (this.paused ? this.resume() : this.pause(!1));\n  }\n  /**\n   *  Pause the provider. If %%dropWhilePaused%%, any events that occur\n   *  while paused are dropped, otherwise all events will be emitted once\n   *  the provider is unpaused.\n   */\n  pause(e) {\n    if (this.#a = -1, this.#r != null) {\n      if (this.#r == !!e)\n        return;\n      b(!1, \"cannot change pause type; resume first\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"pause\"\n      });\n    }\n    this._forEachSubscriber((t) => t.pause(e)), this.#r = !!e;\n    for (let t of this.#f.values())\n      t.timer && clearTimeout(t.timer), t.time = dc() - t.time;\n  }\n  /**\n   *  Resume the provider.\n   */\n  resume() {\n    if (this.#r != null) {\n      this._forEachSubscriber((e) => e.resume()), this.#r = null;\n      for (let e of this.#f.values()) {\n        let t = e.time;\n        t < 0 && (t = 0), e.time = dc(), setTimeout(e.func, t);\n      }\n    }\n  }\n};\nfunction ip(r, e) {\n  try {\n    let t = xc(r, e);\n    if (t)\n      return He(t);\n  } catch {\n  }\n  return null;\n}\na(ip, \"_parseString\");\nfunction xc(r, e) {\n  if (r === \"0x\")\n    return null;\n  try {\n    let t = S(Y(r, e, e + 32)), n = S(Y(r, t, t + 32));\n    return Y(r, t + 32, t + 32 + n);\n  } catch {\n  }\n  return null;\n}\na(xc, \"_parseBytes\");\nfunction eu(r) {\n  let e = X(r);\n  if (e.length > 32)\n    throw new Error(\"internal; should not happen\");\n  let t = new Uint8Array(32);\n  return t.set(e, 32 - e.length), t;\n}\na(eu, \"numPad\");\nfunction op(r) {\n  if (r.length % 32 === 0)\n    return r;\n  let e = new Uint8Array(Math.ceil(r.length / 32) * 32);\n  return e.set(r), e;\n}\na(op, \"bytesPad\");\nvar ap = new Uint8Array([]);\nfunction cp(r) {\n  let e = [], t = 0;\n  for (let n = 0; n < r.length; n++)\n    e.push(ap), t += 32;\n  for (let n = 0; n < r.length; n++) {\n    let s = E(r[n]);\n    e[n] = eu(t), e.push(eu(s.length)), e.push(op(s)), t += 32 + Math.ceil(s.length / 32) * 32;\n  }\n  return F(e);\n}\na(cp, \"encodeBytes\");\nvar tu = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\nfunction fp(r) {\n  let e = {\n    sender: \"\",\n    urls: [],\n    calldata: \"\",\n    selector: \"\",\n    extraData: \"\",\n    errorArgs: []\n  };\n  b(Qe(r) >= 160, \"insufficient OffchainLookup data\", \"OFFCHAIN_FAULT\", {\n    reason: \"insufficient OffchainLookup data\"\n  });\n  let t = Y(r, 0, 32);\n  b(Y(t, 0, 12) === Y(tu, 0, 12), \"corrupt OffchainLookup sender\", \"OFFCHAIN_FAULT\", {\n    reason: \"corrupt OffchainLookup sender\"\n  }), e.sender = Y(t, 12);\n  try {\n    let n = [], s = S(Y(r, 32, 64)), i = S(Y(r, s, s + 32)), o = Y(r, s + 32);\n    for (let c = 0; c < i; c++) {\n      let f = ip(o, c * 32);\n      if (f == null)\n        throw new Error(\"abort\");\n      n.push(f);\n    }\n    e.urls = n;\n  } catch {\n    b(!1, \"corrupt OffchainLookup urls\", \"OFFCHAIN_FAULT\", {\n      reason: \"corrupt OffchainLookup urls\"\n    });\n  }\n  try {\n    let n = xc(r, 64);\n    if (n == null)\n      throw new Error(\"abort\");\n    e.calldata = n;\n  } catch {\n    b(!1, \"corrupt OffchainLookup calldata\", \"OFFCHAIN_FAULT\", {\n      reason: \"corrupt OffchainLookup calldata\"\n    });\n  }\n  b(Y(r, 100, 128) === Y(tu, 0, 28), \"corrupt OffchainLookup callbaackSelector\", \"OFFCHAIN_FAULT\", {\n    reason: \"corrupt OffchainLookup callbaackSelector\"\n  }), e.selector = Y(r, 96, 100);\n  try {\n    let n = xc(r, 128);\n    if (n == null)\n      throw new Error(\"abort\");\n    e.extraData = n;\n  } catch {\n    b(!1, \"corrupt OffchainLookup extraData\", \"OFFCHAIN_FAULT\", {\n      reason: \"corrupt OffchainLookup extraData\"\n    });\n  }\n  return e.errorArgs = \"sender,urls,calldata,selector,extraData\".split(/,/).map((n) => e[n]), e;\n}\na(fp, \"parseOffchainLookup\");\n\n// node_modules/ethers/lib.esm/providers/abstract-signer.js\nfunction mn(r, e) {\n  if (r.provider)\n    return r.provider;\n  b(!1, \"missing provider\", \"UNSUPPORTED_OPERATION\", { operation: e });\n}\na(mn, \"checkProvider\");\nasync function ru(r, e) {\n  let t = it(e);\n  if (t.to != null && (t.to = le(t.to, r)), t.from != null) {\n    let n = t.from;\n    t.from = Promise.all([\n      r.getAddress(),\n      le(n, r)\n    ]).then(([s, i]) => (h(s.toLowerCase() === i.toLowerCase(), \"transaction from mismatch\", \"tx.from\", i), s));\n  } else\n    t.from = r.getAddress();\n  return await oe(t);\n}\na(ru, \"populate\");\nvar at = class {\n  static {\n    a(this, \"AbstractSigner\");\n  }\n  /**\n   *  The provider this signer is connected to.\n   */\n  provider;\n  /**\n   *  Creates a new Signer connected to %%provider%%.\n   */\n  constructor(e) {\n    P(this, { provider: e || null });\n  }\n  async getNonce(e) {\n    return mn(this, \"getTransactionCount\").getTransactionCount(await this.getAddress(), e);\n  }\n  async populateCall(e) {\n    return await ru(this, e);\n  }\n  async populateTransaction(e) {\n    let t = mn(this, \"populateTransaction\"), n = await ru(this, e);\n    n.nonce == null && (n.nonce = await this.getNonce(\"pending\")), n.gasLimit == null && (n.gasLimit = await this.estimateGas(n));\n    let s = await this.provider.getNetwork();\n    if (n.chainId != null) {\n      let o = k(n.chainId);\n      h(o === s.chainId, \"transaction chainId mismatch\", \"tx.chainId\", e.chainId);\n    } else\n      n.chainId = s.chainId;\n    let i = n.maxFeePerGas != null || n.maxPriorityFeePerGas != null;\n    if (n.gasPrice != null && (n.type === 2 || i) ? h(!1, \"eip-1559 transaction do not support gasPrice\", \"tx\", e) : (n.type === 0 || n.type === 1) && i && h(!1, \"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas\", \"tx\", e), (n.type === 2 || n.type == null) && n.maxFeePerGas != null && n.maxPriorityFeePerGas != null)\n      n.type = 2;\n    else if (n.type === 0 || n.type === 1) {\n      let o = await t.getFeeData();\n      b(o.gasPrice != null, \"network does not support gasPrice\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"getGasPrice\"\n      }), n.gasPrice == null && (n.gasPrice = o.gasPrice);\n    } else {\n      let o = await t.getFeeData();\n      if (n.type == null)\n        if (o.maxFeePerGas != null && o.maxPriorityFeePerGas != null)\n          if (n.authorizationList && n.authorizationList.length ? n.type = 4 : n.type = 2, n.gasPrice != null) {\n            let c = n.gasPrice;\n            delete n.gasPrice, n.maxFeePerGas = c, n.maxPriorityFeePerGas = c;\n          } else\n            n.maxFeePerGas == null && (n.maxFeePerGas = o.maxFeePerGas), n.maxPriorityFeePerGas == null && (n.maxPriorityFeePerGas = o.maxPriorityFeePerGas);\n        else o.gasPrice != null ? (b(!i, \"network does not support EIP-1559\", \"UNSUPPORTED_OPERATION\", {\n          operation: \"populateTransaction\"\n        }), n.gasPrice == null && (n.gasPrice = o.gasPrice), n.type = 0) : b(!1, \"failed to get consistent fee data\", \"UNSUPPORTED_OPERATION\", {\n          operation: \"signer.getFeeData\"\n        });\n      else (n.type === 2 || n.type === 3 || n.type === 4) && (n.maxFeePerGas == null && (n.maxFeePerGas = o.maxFeePerGas), n.maxPriorityFeePerGas == null && (n.maxPriorityFeePerGas = o.maxPriorityFeePerGas));\n    }\n    return await oe(n);\n  }\n  async populateAuthorization(e) {\n    let t = Object.assign({}, e);\n    return t.chainId == null && (t.chainId = (await mn(this, \"getNetwork\").getNetwork()).chainId), t.nonce == null && (t.nonce = await this.getNonce()), t;\n  }\n  async estimateGas(e) {\n    return mn(this, \"estimateGas\").estimateGas(await this.populateCall(e));\n  }\n  async call(e) {\n    return mn(this, \"call\").call(await this.populateCall(e));\n  }\n  async resolveName(e) {\n    return await mn(this, \"resolveName\").resolveName(e);\n  }\n  async sendTransaction(e) {\n    let t = mn(this, \"sendTransaction\"), n = await this.populateTransaction(e);\n    delete n.from;\n    let s = Xe.from(n);\n    return await t.broadcastTransaction(await this.signTransaction(s));\n  }\n  // @TODO: in v7 move this to be abstract\n  authorize(e) {\n    b(!1, \"authorization not implemented for this signer\", \"UNSUPPORTED_OPERATION\", { operation: \"authorize\" });\n  }\n}, bn = class r extends at {\n  static {\n    a(this, \"VoidSigner\");\n  }\n  /**\n   *  The signer address.\n   */\n  address;\n  /**\n   *  Creates a new **VoidSigner** with %%address%% attached to\n   *  %%provider%%.\n   */\n  constructor(e, t) {\n    super(t), P(this, { address: e });\n  }\n  async getAddress() {\n    return this.address;\n  }\n  connect(e) {\n    return new r(this.address, e);\n  }\n  #e(e, t) {\n    b(!1, `VoidSigner cannot sign ${e}`, \"UNSUPPORTED_OPERATION\", { operation: t });\n  }\n  async signTransaction(e) {\n    this.#e(\"transactions\", \"signTransaction\");\n  }\n  async signMessage(e) {\n    this.#e(\"messages\", \"signMessage\");\n  }\n  async signTypedData(e, t, n) {\n    this.#e(\"typed-data\", \"signTypedData\");\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/community.js\nvar nu = /* @__PURE__ */ new Set();\nfunction Ue(r) {\n  nu.has(r) || (nu.add(r), console.log(\"========= NOTICE =========\"), console.log(`Request-Rate Exceeded for ${r} (this message will not be repeated)`), console.log(\"\"), console.log(\"The default API keys for each service are provided as a highly-throttled,\"), console.log(\"community resource for low-traffic projects and early prototyping.\"), console.log(\"\"), console.log(\"While your application will continue to function, we highly recommended\"), console.log(\"signing up for your own API keys to improve performance, increase your\"), console.log(\"request rate/limit and enable other perks, such as metrics and advanced APIs.\"), console.log(\"\"), console.log(\"For more details: https://docs.ethers.org/api-keys/\"), console.log(\"==========================\"));\n}\na(Ue, \"showThrottleMessage\");\n\n// node_modules/ethers/lib.esm/providers/subscriber-filterid.js\nfunction lp(r) {\n  return JSON.parse(JSON.stringify(r));\n}\na(lp, \"copy\");\nvar Ao = class {\n  static {\n    a(this, \"FilterIdSubscriber\");\n  }\n  #e;\n  #t;\n  #r;\n  #n;\n  #s;\n  #o;\n  /**\n   *  Creates a new **FilterIdSubscriber** which will used [[_subscribe]]\n   *  and [[_emitResults]] to setup the subscription and provide the event\n   *  to the %%provider%%.\n   */\n  constructor(e) {\n    this.#e = e, this.#t = null, this.#r = this.#i.bind(this), this.#n = !1, this.#s = null, this.#o = !1;\n  }\n  /**\n   *  Sub-classes **must** override this to begin the subscription.\n   */\n  _subscribe(e) {\n    throw new Error(\"subclasses must override this\");\n  }\n  /**\n   *  Sub-classes **must** override this handle the events.\n   */\n  _emitResults(e, t) {\n    throw new Error(\"subclasses must override this\");\n  }\n  /**\n   *  Sub-classes **must** override this handle recovery on errors.\n   */\n  _recover(e) {\n    throw new Error(\"subclasses must override this\");\n  }\n  async #i(e) {\n    try {\n      this.#t == null && (this.#t = this._subscribe(this.#e));\n      let t = null;\n      try {\n        t = await this.#t;\n      } catch (i) {\n        if (!$(i, \"UNSUPPORTED_OPERATION\") || i.operation !== \"eth_newFilter\")\n          throw i;\n      }\n      if (t == null) {\n        this.#t = null, this.#e._recoverSubscriber(this, this._recover(this.#e));\n        return;\n      }\n      let n = await this.#e.getNetwork();\n      if (this.#s || (this.#s = n), this.#s.chainId !== n.chainId)\n        throw new Error(\"chaid changed\");\n      if (this.#o)\n        return;\n      let s = await this.#e.send(\"eth_getFilterChanges\", [t]);\n      await this._emitResults(this.#e, s);\n    } catch (t) {\n      console.log(\"@TODO\", t);\n    }\n    this.#e.once(\"block\", this.#r);\n  }\n  #a() {\n    let e = this.#t;\n    e && (this.#t = null, e.then((t) => {\n      this.#e.destroyed || this.#e.send(\"eth_uninstallFilter\", [t]);\n    }));\n  }\n  start() {\n    this.#n || (this.#n = !0, this.#i(-2));\n  }\n  stop() {\n    this.#n && (this.#n = !1, this.#o = !0, this.#a(), this.#e.off(\"block\", this.#r));\n  }\n  pause(e) {\n    e && this.#a(), this.#e.off(\"block\", this.#r);\n  }\n  resume() {\n    this.start();\n  }\n}, Eo = class extends Ao {\n  static {\n    a(this, \"FilterIdEventSubscriber\");\n  }\n  #e;\n  /**\n   *  Creates a new **FilterIdEventSubscriber** attached to %%provider%%\n   *  listening for %%filter%%.\n   */\n  constructor(e, t) {\n    super(e), this.#e = lp(t);\n  }\n  _recover(e) {\n    return new Lr(e, this.#e);\n  }\n  async _subscribe(e) {\n    return await e.send(\"eth_newFilter\", [this.#e]);\n  }\n  async _emitResults(e, t) {\n    for (let n of t)\n      e.emit(this.#e, e._wrapLog(n, e._network));\n  }\n}, Po = class extends Ao {\n  static {\n    a(this, \"FilterIdPendingSubscriber\");\n  }\n  async _subscribe(e) {\n    return await e.send(\"eth_newPendingTransactionFilter\", []);\n  }\n  async _emitResults(e, t) {\n    for (let n of t)\n      e.emit(\"pending\", n);\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-jsonrpc.js\nvar up = \"bigint,boolean,function,number,string,symbol\".split(/,/g);\nfunction ko(r) {\n  if (r == null || up.indexOf(typeof r) >= 0 || typeof r.getAddress == \"function\")\n    return r;\n  if (Array.isArray(r))\n    return r.map(ko);\n  if (typeof r == \"object\")\n    return Object.keys(r).reduce((e, t) => (e[t] = r[t], e), {});\n  throw new Error(`should not happen: ${r} (${typeof r})`);\n}\na(ko, \"deepCopy\");\nfunction dp(r) {\n  return new Promise((e) => {\n    setTimeout(e, r);\n  });\n}\na(dp, \"stall\");\nfunction fs(r) {\n  return r && r.toLowerCase();\n}\na(fs, \"getLowerCase\");\nfunction su(r) {\n  return r && typeof r.pollingInterval == \"number\";\n}\na(su, \"isPollable\");\nvar iu = {\n  polling: !1,\n  staticNetwork: null,\n  batchStallTime: 10,\n  batchMaxSize: 1 << 20,\n  batchMaxCount: 100,\n  cacheTimeout: 250,\n  pollingInterval: 4e3\n}, Dr = class extends at {\n  static {\n    a(this, \"JsonRpcSigner\");\n  }\n  address;\n  constructor(e, t) {\n    super(e), t = U(t), P(this, { address: t });\n  }\n  connect(e) {\n    b(!1, \"cannot reconnect JsonRpcSigner\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"signer.connect\"\n    });\n  }\n  async getAddress() {\n    return this.address;\n  }\n  // JSON-RPC will automatially fill in nonce, etc. so we just check from\n  async populateTransaction(e) {\n    return await this.populateCall(e);\n  }\n  // Returns just the hash of the transaction after sent, which is what\n  // the bare JSON-RPC API does;\n  async sendUncheckedTransaction(e) {\n    let t = ko(e), n = [];\n    if (t.from) {\n      let i = t.from;\n      n.push((async () => {\n        let o = await le(i, this.provider);\n        h(o != null && o.toLowerCase() === this.address.toLowerCase(), \"from address mismatch\", \"transaction\", e), t.from = o;\n      })());\n    } else\n      t.from = this.address;\n    if (t.gasLimit == null && n.push((async () => {\n      t.gasLimit = await this.provider.estimateGas({ ...t, from: this.address });\n    })()), t.to != null) {\n      let i = t.to;\n      n.push((async () => {\n        t.to = await le(i, this.provider);\n      })());\n    }\n    n.length && await Promise.all(n);\n    let s = this.provider.getRpcTransaction(t);\n    return this.provider.send(\"eth_sendTransaction\", [s]);\n  }\n  async sendTransaction(e) {\n    let t = await this.provider.getBlockNumber(), n = await this.sendUncheckedTransaction(e);\n    return await new Promise((s, i) => {\n      let o = [1e3, 100], c = 0, f = /* @__PURE__ */ a(async () => {\n        try {\n          let l = await this.provider.getTransaction(n);\n          if (l != null) {\n            s(l.replaceableTransaction(t));\n            return;\n          }\n        } catch (l) {\n          if ($(l, \"CANCELLED\") || $(l, \"BAD_DATA\") || $(l, \"NETWORK_ERROR\") || $(l, \"UNSUPPORTED_OPERATION\")) {\n            l.info == null && (l.info = {}), l.info.sendTransactionHash = n, i(l);\n            return;\n          }\n          if ($(l, \"INVALID_ARGUMENT\") && (c++, l.info == null && (l.info = {}), l.info.sendTransactionHash = n, c > 10)) {\n            i(l);\n            return;\n          }\n          this.provider.emit(\"error\", Q(\"failed to fetch transation after sending (will try again)\", \"UNKNOWN_ERROR\", { error: l }));\n        }\n        this.provider._setTimeout(() => {\n          f();\n        }, o.pop() || 4e3);\n      }, \"checkTx\");\n      f();\n    });\n  }\n  async signTransaction(e) {\n    let t = ko(e);\n    if (t.from) {\n      let s = await le(t.from, this.provider);\n      h(s != null && s.toLowerCase() === this.address.toLowerCase(), \"from address mismatch\", \"transaction\", e), t.from = s;\n    } else\n      t.from = this.address;\n    let n = this.provider.getRpcTransaction(t);\n    return await this.provider.send(\"eth_signTransaction\", [n]);\n  }\n  async signMessage(e) {\n    let t = typeof e == \"string\" ? re(e) : e;\n    return await this.provider.send(\"personal_sign\", [\n      w(t),\n      this.address.toLowerCase()\n    ]);\n  }\n  async signTypedData(e, t, n) {\n    let s = ko(n), i = await nt.resolveNames(e, t, s, async (o) => {\n      let c = await le(o);\n      return h(c != null, \"TypedData does not support null address\", \"value\", o), c;\n    });\n    return await this.provider.send(\"eth_signTypedData_v4\", [\n      this.address.toLowerCase(),\n      JSON.stringify(nt.getPayload(i.domain, t, i.value))\n    ]);\n  }\n  async unlock(e) {\n    return this.provider.send(\"personal_unlockAccount\", [\n      this.address.toLowerCase(),\n      e,\n      null\n    ]);\n  }\n  // https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign\n  async _legacySignMessage(e) {\n    let t = typeof e == \"string\" ? re(e) : e;\n    return await this.provider.send(\"eth_sign\", [\n      this.address.toLowerCase(),\n      w(t)\n    ]);\n  }\n}, Fr = class extends ot {\n  static {\n    a(this, \"JsonRpcApiProvider\");\n  }\n  #e;\n  // The next ID to use for the JSON-RPC ID field\n  #t;\n  // Payloads are queued and triggered in batches using the drainTimer\n  #r;\n  #n;\n  #s;\n  #o;\n  #i;\n  #a() {\n    if (this.#n)\n      return;\n    let e = this._getOption(\"batchMaxCount\") === 1 ? 0 : this._getOption(\"batchStallTime\");\n    this.#n = setTimeout(() => {\n      this.#n = null;\n      let t = this.#r;\n      for (this.#r = []; t.length; ) {\n        let n = [t.shift()];\n        for (; t.length && n.length !== this.#e.batchMaxCount; )\n          if (n.push(t.shift()), JSON.stringify(n.map((i) => i.payload)).length > this.#e.batchMaxSize) {\n            t.unshift(n.pop());\n            break;\n          }\n        (async () => {\n          let s = n.length === 1 ? n[0].payload : n.map((i) => i.payload);\n          this.emit(\"debug\", { action: \"sendRpcPayload\", payload: s });\n          try {\n            let i = await this._send(s);\n            this.emit(\"debug\", { action: \"receiveRpcResult\", result: i });\n            for (let { resolve: o, reject: c, payload: f } of n) {\n              if (this.destroyed) {\n                c(Q(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: f.method }));\n                continue;\n              }\n              let l = i.filter((u) => u.id === f.id)[0];\n              if (l == null) {\n                let u = Q(\"missing response for request\", \"BAD_DATA\", {\n                  value: i,\n                  info: { payload: f }\n                });\n                this.emit(\"error\", u), c(u);\n                continue;\n              }\n              if (\"error\" in l) {\n                c(this.getRpcError(f, l));\n                continue;\n              }\n              o(l.result);\n            }\n          } catch (i) {\n            this.emit(\"debug\", { action: \"receiveRpcError\", error: i });\n            for (let { reject: o } of n)\n              o(i);\n          }\n        })();\n      }\n    }, e);\n  }\n  constructor(e, t) {\n    super(e, t), this.#t = 1, this.#e = Object.assign({}, iu, t || {}), this.#r = [], this.#n = null, this.#o = null, this.#i = null;\n    {\n      let s = null, i = new Promise((o) => {\n        s = o;\n      });\n      this.#s = { promise: i, resolve: s };\n    }\n    let n = this._getOption(\"staticNetwork\");\n    typeof n == \"boolean\" ? (h(!n || e !== \"any\", \"staticNetwork cannot be used on special network 'any'\", \"options\", t), n && e != null && (this.#o = J.from(e))) : n && (h(e == null || n.matches(e), \"staticNetwork MUST match network object\", \"options\", t), this.#o = n);\n  }\n  /**\n   *  Returns the value associated with the option %%key%%.\n   *\n   *  Sub-classes can use this to inquire about configuration options.\n   */\n  _getOption(e) {\n    return this.#e[e];\n  }\n  /**\n   *  Gets the [[Network]] this provider has committed to. On each call, the network\n   *  is detected, and if it has changed, the call will reject.\n   */\n  get _network() {\n    return b(this.#o, \"network is not available yet\", \"NETWORK_ERROR\"), this.#o;\n  }\n  /**\n   *  Resolves to the non-normalized value by performing %%req%%.\n   *\n   *  Sub-classes may override this to modify behavior of actions,\n   *  and should generally call ``super._perform`` as a fallback.\n   */\n  async _perform(e) {\n    if (e.method === \"call\" || e.method === \"estimateGas\") {\n      let n = e.transaction;\n      if (n && n.type != null && k(n.type) && n.maxFeePerGas == null && n.maxPriorityFeePerGas == null) {\n        let s = await this.getFeeData();\n        s.maxFeePerGas == null && s.maxPriorityFeePerGas == null && (e = Object.assign({}, e, {\n          transaction: Object.assign({}, n, { type: void 0 })\n        }));\n      }\n    }\n    let t = this.getRpcRequest(e);\n    return t != null ? await this.send(t.method, t.args) : super._perform(e);\n  }\n  /**\n   *  Sub-classes may override this; it detects the *actual* network that\n   *  we are **currently** connected to.\n   *\n   *  Keep in mind that [[send]] may only be used once [[ready]], otherwise the\n   *  _send primitive must be used instead.\n   */\n  async _detectNetwork() {\n    let e = this._getOption(\"staticNetwork\");\n    if (e)\n      if (e === !0) {\n        if (this.#o)\n          return this.#o;\n      } else\n        return e;\n    return this.#i ? await this.#i : this.ready ? (this.#i = (async () => {\n      try {\n        let t = J.from(k(await this.send(\"eth_chainId\", [])));\n        return this.#i = null, t;\n      } catch (t) {\n        throw this.#i = null, t;\n      }\n    })(), await this.#i) : (this.#i = (async () => {\n      let t = {\n        id: this.#t++,\n        method: \"eth_chainId\",\n        params: [],\n        jsonrpc: \"2.0\"\n      };\n      this.emit(\"debug\", { action: \"sendRpcPayload\", payload: t });\n      let n;\n      try {\n        n = (await this._send(t))[0], this.#i = null;\n      } catch (s) {\n        throw this.#i = null, this.emit(\"debug\", { action: \"receiveRpcError\", error: s }), s;\n      }\n      if (this.emit(\"debug\", { action: \"receiveRpcResult\", result: n }), \"result\" in n)\n        return J.from(k(n.result));\n      throw this.getRpcError(t, n);\n    })(), await this.#i);\n  }\n  /**\n   *  Sub-classes **MUST** call this. Until [[_start]] has been called, no calls\n   *  will be passed to [[_send]] from [[send]]. If it is overridden, then\n   *  ``super._start()`` **MUST** be called.\n   *\n   *  Calling it multiple times is safe and has no effect.\n   */\n  _start() {\n    this.#s == null || this.#s.resolve == null || (this.#s.resolve(), this.#s = null, (async () => {\n      for (; this.#o == null && !this.destroyed; )\n        try {\n          this.#o = await this._detectNetwork();\n        } catch (e) {\n          if (this.destroyed)\n            break;\n          console.log(\"JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)\"), this.emit(\"error\", Q(\"failed to bootstrap network detection\", \"NETWORK_ERROR\", { event: \"initial-network-discovery\", info: { error: e } })), await dp(1e3);\n        }\n      this.#a();\n    })());\n  }\n  /**\n   *  Resolves once the [[_start]] has been called. This can be used in\n   *  sub-classes to defer sending data until the connection has been\n   *  established.\n   */\n  async _waitUntilReady() {\n    if (this.#s != null)\n      return await this.#s.promise;\n  }\n  /**\n   *  Return a Subscriber that will manage the %%sub%%.\n   *\n   *  Sub-classes may override this to modify the behavior of\n   *  subscription management.\n   */\n  _getSubscriber(e) {\n    return e.type === \"pending\" ? new Po(this) : e.type === \"event\" ? this._getOption(\"polling\") ? new Lr(this, e.filter) : new Eo(this, e.filter) : e.type === \"orphan\" && e.filter.orphan === \"drop-log\" ? new It(\"orphan\") : super._getSubscriber(e);\n  }\n  /**\n   *  Returns true only if the [[_start]] has been called.\n   */\n  get ready() {\n    return this.#s == null;\n  }\n  /**\n   *  Returns %%tx%% as a normalized JSON-RPC transaction request,\n   *  which has all values hexlified and any numeric values converted\n   *  to Quantity values.\n   */\n  getRpcTransaction(e) {\n    let t = {};\n    return [\"chainId\", \"gasLimit\", \"gasPrice\", \"type\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"nonce\", \"value\"].forEach((n) => {\n      if (e[n] == null)\n        return;\n      let s = n;\n      n === \"gasLimit\" && (s = \"gas\"), t[s] = Pe(k(e[n], `tx.${n}`));\n    }), [\"from\", \"to\", \"data\"].forEach((n) => {\n      e[n] != null && (t[n] = w(e[n]));\n    }), e.accessList && (t.accessList = Ce(e.accessList)), e.blobVersionedHashes && (t.blobVersionedHashes = e.blobVersionedHashes.map((n) => n.toLowerCase())), e.authorizationList && (t.authorizationList = e.authorizationList.map((n) => {\n      let s = nn(n);\n      return {\n        address: s.address,\n        nonce: Pe(s.nonce),\n        chainId: Pe(s.chainId),\n        yParity: Pe(s.signature.yParity),\n        r: Pe(s.signature.r),\n        s: Pe(s.signature.s)\n      };\n    })), t;\n  }\n  /**\n   *  Returns the request method and arguments required to perform\n   *  %%req%%.\n   */\n  getRpcRequest(e) {\n    switch (e.method) {\n      case \"chainId\":\n        return { method: \"eth_chainId\", args: [] };\n      case \"getBlockNumber\":\n        return { method: \"eth_blockNumber\", args: [] };\n      case \"getGasPrice\":\n        return { method: \"eth_gasPrice\", args: [] };\n      case \"getPriorityFee\":\n        return { method: \"eth_maxPriorityFeePerGas\", args: [] };\n      case \"getBalance\":\n        return {\n          method: \"eth_getBalance\",\n          args: [fs(e.address), e.blockTag]\n        };\n      case \"getTransactionCount\":\n        return {\n          method: \"eth_getTransactionCount\",\n          args: [fs(e.address), e.blockTag]\n        };\n      case \"getCode\":\n        return {\n          method: \"eth_getCode\",\n          args: [fs(e.address), e.blockTag]\n        };\n      case \"getStorage\":\n        return {\n          method: \"eth_getStorageAt\",\n          args: [\n            fs(e.address),\n            \"0x\" + e.position.toString(16),\n            e.blockTag\n          ]\n        };\n      case \"broadcastTransaction\":\n        return {\n          method: \"eth_sendRawTransaction\",\n          args: [e.signedTransaction]\n        };\n      case \"getBlock\":\n        if (\"blockTag\" in e)\n          return {\n            method: \"eth_getBlockByNumber\",\n            args: [e.blockTag, !!e.includeTransactions]\n          };\n        if (\"blockHash\" in e)\n          return {\n            method: \"eth_getBlockByHash\",\n            args: [e.blockHash, !!e.includeTransactions]\n          };\n        break;\n      case \"getTransaction\":\n        return {\n          method: \"eth_getTransactionByHash\",\n          args: [e.hash]\n        };\n      case \"getTransactionReceipt\":\n        return {\n          method: \"eth_getTransactionReceipt\",\n          args: [e.hash]\n        };\n      case \"call\":\n        return {\n          method: \"eth_call\",\n          args: [this.getRpcTransaction(e.transaction), e.blockTag]\n        };\n      case \"estimateGas\":\n        return {\n          method: \"eth_estimateGas\",\n          args: [this.getRpcTransaction(e.transaction)]\n        };\n      case \"getLogs\":\n        return e.filter && e.filter.address != null && (Array.isArray(e.filter.address) ? e.filter.address = e.filter.address.map(fs) : e.filter.address = fs(e.filter.address)), { method: \"eth_getLogs\", args: [e.filter] };\n    }\n    return null;\n  }\n  /**\n   *  Returns an ethers-style Error for the given JSON-RPC error\n   *  %%payload%%, coalescing the various strings and error shapes\n   *  that different nodes return, coercing them into a machine-readable\n   *  standardized error.\n   */\n  getRpcError(e, t) {\n    let { method: n } = e, { error: s } = t;\n    if (n === \"eth_estimateGas\" && s.message) {\n      let c = s.message;\n      if (!c.match(/revert/i) && c.match(/insufficient funds/i))\n        return Q(\"insufficient funds\", \"INSUFFICIENT_FUNDS\", {\n          transaction: e.params[0],\n          info: { payload: e, error: s }\n        });\n      if (c.match(/nonce/i) && c.match(/too low/i))\n        return Q(\"nonce has already been used\", \"NONCE_EXPIRED\", {\n          transaction: e.params[0],\n          info: { payload: e, error: s }\n        });\n    }\n    if (n === \"eth_call\" || n === \"eth_estimateGas\") {\n      let c = pc(s), f = st.getBuiltinCallException(n === \"eth_call\" ? \"call\" : \"estimateGas\", e.params[0], c ? c.data : null);\n      return f.info = { error: s, payload: e }, f;\n    }\n    let i = JSON.stringify(hp(s));\n    if (typeof s.message == \"string\" && s.message.match(/user denied|ethers-user-denied/i))\n      return Q(\"user rejected action\", \"ACTION_REJECTED\", {\n        action: {\n          eth_sign: \"signMessage\",\n          personal_sign: \"signMessage\",\n          eth_signTypedData_v4: \"signTypedData\",\n          eth_signTransaction: \"signTransaction\",\n          eth_sendTransaction: \"sendTransaction\",\n          eth_requestAccounts: \"requestAccess\",\n          wallet_requestAccounts: \"requestAccess\"\n        }[n] || \"unknown\",\n        reason: \"rejected\",\n        info: { payload: e, error: s }\n      });\n    if (n === \"eth_sendRawTransaction\" || n === \"eth_sendTransaction\") {\n      let c = e.params[0];\n      if (i.match(/insufficient funds|base fee exceeds gas limit/i))\n        return Q(\"insufficient funds for intrinsic transaction cost\", \"INSUFFICIENT_FUNDS\", {\n          transaction: c,\n          info: { error: s }\n        });\n      if (i.match(/nonce/i) && i.match(/too low/i))\n        return Q(\"nonce has already been used\", \"NONCE_EXPIRED\", { transaction: c, info: { error: s } });\n      if (i.match(/replacement transaction/i) && i.match(/underpriced/i))\n        return Q(\"replacement fee too low\", \"REPLACEMENT_UNDERPRICED\", { transaction: c, info: { error: s } });\n      if (i.match(/only replay-protected/i))\n        return Q(\"legacy pre-eip-155 transactions not supported\", \"UNSUPPORTED_OPERATION\", {\n          operation: n,\n          info: { transaction: c, info: { error: s } }\n        });\n    }\n    let o = !!i.match(/the method .* does not exist/i);\n    return o || s && s.details && s.details.startsWith(\"Unauthorized method:\") && (o = !0), o ? Q(\"unsupported operation\", \"UNSUPPORTED_OPERATION\", {\n      operation: e.method,\n      info: { error: s, payload: e }\n    }) : Q(\"could not coalesce error\", \"UNKNOWN_ERROR\", { error: s, payload: e });\n  }\n  /**\n   *  Requests the %%method%% with %%params%% via the JSON-RPC protocol\n   *  over the underlying channel. This can be used to call methods\n   *  on the backend that do not have a high-level API within the Provider\n   *  API.\n   *\n   *  This method queues requests according to the batch constraints\n   *  in the options, assigns the request a unique ID.\n   *\n   *  **Do NOT override** this method in sub-classes; instead\n   *  override [[_send]] or force the options values in the\n   *  call to the constructor to modify this method's behavior.\n   */\n  send(e, t) {\n    if (this.destroyed)\n      return Promise.reject(Q(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: e }));\n    let n = this.#t++, s = new Promise((i, o) => {\n      this.#r.push({\n        resolve: i,\n        reject: o,\n        payload: { method: e, params: t, id: n, jsonrpc: \"2.0\" }\n      });\n    });\n    return this.#a(), s;\n  }\n  /**\n   *  Resolves to the [[Signer]] account for  %%address%% managed by\n   *  the client.\n   *\n   *  If the %%address%% is a number, it is used as an index in the\n   *  the accounts from [[listAccounts]].\n   *\n   *  This can only be used on clients which manage accounts (such as\n   *  Geth with imported account or MetaMask).\n   *\n   *  Throws if the account doesn't exist.\n   */\n  async getSigner(e) {\n    e == null && (e = 0);\n    let t = this.send(\"eth_accounts\", []);\n    if (typeof e == \"number\") {\n      let s = await t;\n      if (e >= s.length)\n        throw new Error(\"no such account\");\n      return new Dr(this, s[e]);\n    }\n    let { accounts: n } = await oe({\n      network: this.getNetwork(),\n      accounts: t\n    });\n    e = U(e);\n    for (let s of n)\n      if (U(s) === e)\n        return new Dr(this, e);\n    throw new Error(\"invalid account\");\n  }\n  async listAccounts() {\n    return (await this.send(\"eth_accounts\", [])).map((t) => new Dr(this, t));\n  }\n  destroy() {\n    this.#n && (clearTimeout(this.#n), this.#n = null);\n    for (let { payload: e, reject: t } of this.#r)\n      t(Q(\"provider destroyed; cancelled request\", \"UNSUPPORTED_OPERATION\", { operation: e.method }));\n    this.#r = [], super.destroy();\n  }\n}, Ys = class extends Fr {\n  static {\n    a(this, \"JsonRpcApiPollingProvider\");\n  }\n  #e;\n  constructor(e, t) {\n    super(e, t);\n    let n = this._getOption(\"pollingInterval\");\n    n == null && (n = iu.pollingInterval), this.#e = n;\n  }\n  _getSubscriber(e) {\n    let t = super._getSubscriber(e);\n    return su(t) && (t.pollingInterval = this.#e), t;\n  }\n  /**\n   *  The polling interval (default: 4000 ms)\n   */\n  get pollingInterval() {\n    return this.#e;\n  }\n  set pollingInterval(e) {\n    if (!Number.isInteger(e) || e < 0)\n      throw new Error(\"invalid interval\");\n    this.#e = e, this._forEachSubscriber((t) => {\n      su(t) && (t.pollingInterval = this.#e);\n    });\n  }\n}, de = class extends Ys {\n  static {\n    a(this, \"JsonRpcProvider\");\n  }\n  #e;\n  constructor(e, t, n) {\n    e == null && (e = \"http://localhost:8545\"), super(t, n), typeof e == \"string\" ? this.#e = new ne(e) : this.#e = e.clone();\n  }\n  _getConnection() {\n    return this.#e.clone();\n  }\n  async send(e, t) {\n    return await this._start(), await super.send(e, t);\n  }\n  async _send(e) {\n    let t = this._getConnection();\n    t.body = JSON.stringify(e), t.setHeader(\"content-type\", \"application/json\");\n    let n = await t.send();\n    n.assertOk();\n    let s = n.bodyJson;\n    return Array.isArray(s) || (s = [s]), s;\n  }\n};\nfunction pc(r) {\n  if (r == null)\n    return null;\n  if (typeof r.message == \"string\" && r.message.match(/revert/i) && z(r.data))\n    return { message: r.message, data: r.data };\n  if (typeof r == \"object\") {\n    for (let e in r) {\n      let t = pc(r[e]);\n      if (t)\n        return t;\n    }\n    return null;\n  }\n  if (typeof r == \"string\")\n    try {\n      return pc(JSON.parse(r));\n    } catch {\n    }\n  return null;\n}\na(pc, \"spelunkData\");\nfunction mc(r, e) {\n  if (r != null) {\n    if (typeof r.message == \"string\" && e.push(r.message), typeof r == \"object\")\n      for (let t in r)\n        mc(r[t], e);\n    if (typeof r == \"string\")\n      try {\n        return mc(JSON.parse(r), e);\n      } catch {\n      }\n  }\n}\na(mc, \"_spelunkMessage\");\nfunction hp(r) {\n  let e = [];\n  return mc(r, e), e;\n}\na(hp, \"spelunkMessage\");\n\n// node_modules/ethers/lib.esm/providers/provider-ankr.js\nvar No = \"9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972\";\nfunction xp(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"rpc.ankr.com/eth\";\n    case \"goerli\":\n      return \"rpc.ankr.com/eth_goerli\";\n    case \"sepolia\":\n      return \"rpc.ankr.com/eth_sepolia\";\n    case \"arbitrum\":\n      return \"rpc.ankr.com/arbitrum\";\n    case \"base\":\n      return \"rpc.ankr.com/base\";\n    case \"base-goerli\":\n      return \"rpc.ankr.com/base_goerli\";\n    case \"base-sepolia\":\n      return \"rpc.ankr.com/base_sepolia\";\n    case \"bnb\":\n      return \"rpc.ankr.com/bsc\";\n    case \"bnbt\":\n      return \"rpc.ankr.com/bsc_testnet_chapel\";\n    case \"matic\":\n      return \"rpc.ankr.com/polygon\";\n    case \"matic-mumbai\":\n      return \"rpc.ankr.com/polygon_mumbai\";\n    case \"optimism\":\n      return \"rpc.ankr.com/optimism\";\n    case \"optimism-goerli\":\n      return \"rpc.ankr.com/optimism_testnet\";\n    case \"optimism-sepolia\":\n      return \"rpc.ankr.com/optimism_sepolia\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(xp, \"getHost\");\nvar gn = class r extends de {\n  static {\n    a(this, \"AnkrProvider\");\n  }\n  /**\n   *  The API key for the Ankr connection.\n   */\n  apiKey;\n  /**\n   *  Create a new **AnkrProvider**.\n   *\n   *  By default connecting to ``mainnet`` with a highly throttled\n   *  API key.\n   */\n  constructor(e, t) {\n    e == null && (e = \"mainnet\");\n    let n = J.from(e);\n    t == null && (t = No);\n    let s = { polling: !0, staticNetwork: n }, i = r.getRequest(n, t);\n    super(i, n, s), P(this, { apiKey: t });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.apiKey);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  /**\n   *  Returns a prepared request for connecting to %%network%% with\n   *  %%apiKey%%.\n   */\n  static getRequest(e, t) {\n    t == null && (t = No);\n    let n = new ne(`https://${xp(e.name)}/${t}`);\n    return n.allowGzip = !0, t === No && (n.retryFunc = async (s, i, o) => (Ue(\"AnkrProvider\"), !0)), n;\n  }\n  getRpcError(e, t) {\n    return e.method === \"eth_sendRawTransaction\" && t && t.error && t.error.message === \"INTERNAL_ERROR: could not replace existing tx\" && (t.error.message = \"replacement transaction underpriced\"), super.getRpcError(e, t);\n  }\n  isCommunityResource() {\n    return this.apiKey === No;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-alchemy.js\nvar Bo = \"_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC\";\nfunction pp(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"eth-mainnet.alchemyapi.io\";\n    case \"goerli\":\n      return \"eth-goerli.g.alchemy.com\";\n    case \"sepolia\":\n      return \"eth-sepolia.g.alchemy.com\";\n    case \"arbitrum\":\n      return \"arb-mainnet.g.alchemy.com\";\n    case \"arbitrum-goerli\":\n      return \"arb-goerli.g.alchemy.com\";\n    case \"arbitrum-sepolia\":\n      return \"arb-sepolia.g.alchemy.com\";\n    case \"base\":\n      return \"base-mainnet.g.alchemy.com\";\n    case \"base-goerli\":\n      return \"base-goerli.g.alchemy.com\";\n    case \"base-sepolia\":\n      return \"base-sepolia.g.alchemy.com\";\n    case \"matic\":\n      return \"polygon-mainnet.g.alchemy.com\";\n    case \"matic-amoy\":\n      return \"polygon-amoy.g.alchemy.com\";\n    case \"matic-mumbai\":\n      return \"polygon-mumbai.g.alchemy.com\";\n    case \"optimism\":\n      return \"opt-mainnet.g.alchemy.com\";\n    case \"optimism-goerli\":\n      return \"opt-goerli.g.alchemy.com\";\n    case \"optimism-sepolia\":\n      return \"opt-sepolia.g.alchemy.com\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(pp, \"getHost\");\nvar yn = class r extends de {\n  static {\n    a(this, \"AlchemyProvider\");\n  }\n  apiKey;\n  constructor(e, t) {\n    e == null && (e = \"mainnet\");\n    let n = J.from(e);\n    t == null && (t = Bo);\n    let s = r.getRequest(n, t);\n    super(s, n, { staticNetwork: n }), P(this, { apiKey: t });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.apiKey);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  async _perform(e) {\n    if (e.method === \"getTransactionResult\") {\n      let { trace: t, tx: n } = await oe({\n        trace: this.send(\"trace_transaction\", [e.hash]),\n        tx: this.getTransaction(e.hash)\n      });\n      if (t == null || n == null)\n        return null;\n      let s, i = !1;\n      try {\n        s = t[0].result.output, i = t[0].error === \"Reverted\";\n      } catch {\n      }\n      if (s)\n        return b(!i, \"an error occurred during transaction executions\", \"CALL_EXCEPTION\", {\n          action: \"getTransactionResult\",\n          data: s,\n          reason: null,\n          transaction: n,\n          invocation: null,\n          revert: null\n          // @TODO\n        }), s;\n      b(!1, \"could not parse trace result\", \"BAD_DATA\", { value: t });\n    }\n    return await super._perform(e);\n  }\n  isCommunityResource() {\n    return this.apiKey === Bo;\n  }\n  static getRequest(e, t) {\n    t == null && (t = Bo);\n    let n = new ne(`https://${pp(e.name)}/v2/${t}`);\n    return n.allowGzip = !0, t === Bo && (n.retryFunc = async (s, i, o) => (Ue(\"alchemy\"), !0)), n;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-chainstack.js\nfunction Ro(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"39f1d67cedf8b7831010a665328c9197\";\n    case \"arbitrum\":\n      return \"0550c209db33c3abf4cc927e1e18cea1\";\n    case \"bnb\":\n      return \"98b5a77e531614387366f6fc5da097f8\";\n    case \"matic\":\n      return \"cd9d4d70377471aa7c142ec4a4205249\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(Ro, \"getApiKey\");\nfunction mp(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"ethereum-mainnet.core.chainstack.com\";\n    case \"arbitrum\":\n      return \"arbitrum-mainnet.core.chainstack.com\";\n    case \"bnb\":\n      return \"bsc-mainnet.core.chainstack.com\";\n    case \"matic\":\n      return \"polygon-mainnet.core.chainstack.com\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(mp, \"getHost\");\nvar wn = class r extends de {\n  static {\n    a(this, \"ChainstackProvider\");\n  }\n  /**\n   *  The API key for the Chainstack connection.\n   */\n  apiKey;\n  /**\n   *  Creates a new **ChainstackProvider**.\n   */\n  constructor(e, t) {\n    e == null && (e = \"mainnet\");\n    let n = J.from(e);\n    t == null && (t = Ro(n.name));\n    let s = r.getRequest(n, t);\n    super(s, n, { staticNetwork: n }), P(this, { apiKey: t });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.apiKey);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  isCommunityResource() {\n    return this.apiKey === Ro(this._network.name);\n  }\n  /**\n   *  Returns a prepared request for connecting to %%network%%\n   *  with %%apiKey%% and %%projectSecret%%.\n   */\n  static getRequest(e, t) {\n    t == null && (t = Ro(e.name));\n    let n = new ne(`https://${mp(e.name)}/${t}`);\n    return n.allowGzip = !0, t === Ro(e.name) && (n.retryFunc = async (s, i, o) => (Ue(\"ChainstackProvider\"), !0)), n;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-cloudflare.js\nvar An = class extends de {\n  static {\n    a(this, \"CloudflareProvider\");\n  }\n  constructor(e) {\n    e == null && (e = \"mainnet\");\n    let t = J.from(e);\n    h(t.name === \"mainnet\", \"unsupported network\", \"network\", e), super(\"https://cloudflare-eth.com/\", t, { staticNetwork: t });\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-etherscan.js\nvar ou = 2e3;\nfunction bp(r) {\n  return r && typeof r.then == \"function\";\n}\na(bp, \"isPromise\");\nvar au = \"org.ethers.plugins.provider.Etherscan\", Xs = class r extends Tt {\n  static {\n    a(this, \"EtherscanPlugin\");\n  }\n  /**\n   *  The Etherscan API base URL.\n   */\n  baseUrl;\n  /**\n   *  Creates a new **EtherscanProvider** which will use\n   *  %%baseUrl%%.\n   */\n  constructor(e) {\n    super(au), P(this, { baseUrl: e });\n  }\n  clone() {\n    return new r(this.baseUrl);\n  }\n}, gp = [\"enableCcipRead\"], yp = 1, En = class extends ot {\n  static {\n    a(this, \"EtherscanProvider\");\n  }\n  /**\n   *  The connected network.\n   */\n  network;\n  /**\n   *  The API key or null if using the community provided bandwidth.\n   */\n  apiKey;\n  #e;\n  /**\n   *  Creates a new **EtherscanBaseProvider**.\n   */\n  constructor(e, t) {\n    let n = t ?? null;\n    super();\n    let s = J.from(e);\n    this.#e = s.getPlugin(au), P(this, { apiKey: n, network: s });\n  }\n  /**\n   *  Returns the base URL.\n   *\n   *  If an [[EtherscanPlugin]] is configured on the\n   *  [[EtherscanBaseProvider_network]], returns the plugin's\n   *  baseUrl.\n   *\n   *  Deprecated; for Etherscan v2 the base is no longer a simply\n   *  host, but instead a URL including a chainId parameter. Changing\n   *  this to return a URL prefix could break some libraries, so it\n   *  is left intact but will be removed in the future as it is unused.\n   */\n  getBaseUrl() {\n    if (this.#e)\n      return this.#e.baseUrl;\n    switch (this.network.name) {\n      case \"mainnet\":\n        return \"https://api.etherscan.io\";\n      case \"goerli\":\n        return \"https://api-goerli.etherscan.io\";\n      case \"sepolia\":\n        return \"https://api-sepolia.etherscan.io\";\n      case \"holesky\":\n        return \"https://api-holesky.etherscan.io\";\n      case \"arbitrum\":\n        return \"https://api.arbiscan.io\";\n      case \"arbitrum-goerli\":\n        return \"https://api-goerli.arbiscan.io\";\n      case \"base\":\n        return \"https://api.basescan.org\";\n      case \"base-sepolia\":\n        return \"https://api-sepolia.basescan.org\";\n      case \"bnb\":\n        return \"https://api.bscscan.com\";\n      case \"bnbt\":\n        return \"https://api-testnet.bscscan.com\";\n      case \"matic\":\n        return \"https://api.polygonscan.com\";\n      case \"matic-amoy\":\n        return \"https://api-amoy.polygonscan.com\";\n      case \"matic-mumbai\":\n        return \"https://api-testnet.polygonscan.com\";\n      case \"optimism\":\n        return \"https://api-optimistic.etherscan.io\";\n      case \"optimism-goerli\":\n        return \"https://api-goerli-optimistic.etherscan.io\";\n      default:\n    }\n    h(!1, \"unsupported network\", \"network\", this.network);\n  }\n  /**\n   *  Returns the URL for the %%module%% and %%params%%.\n   */\n  getUrl(e, t) {\n    let n = Object.keys(t).reduce((s, i) => {\n      let o = t[i];\n      return o != null && (s += `&${i}=${o}`), s;\n    }, \"\");\n    return this.apiKey && (n += `&apikey=${this.apiKey}`), `https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${e}${n}`;\n  }\n  /**\n   *  Returns the URL for using POST requests.\n   */\n  getPostUrl() {\n    return `https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`;\n  }\n  /**\n   *  Returns the parameters for using POST requests.\n   */\n  getPostData(e, t) {\n    return t.module = e, t.apikey = this.apiKey, t.chainid = this.network.chainId, t;\n  }\n  async detectNetwork() {\n    return this.network;\n  }\n  /**\n   *  Resolves to the result of calling %%module%% with %%params%%.\n   *\n   *  If %%post%%, the request is made as a POST request.\n   */\n  async fetch(e, t, n) {\n    let s = yp++, i = n ? this.getPostUrl() : this.getUrl(e, t), o = n ? this.getPostData(e, t) : null;\n    this.emit(\"debug\", { action: \"sendRequest\", id: s, url: i, payload: o });\n    let c = new ne(i);\n    c.setThrottleParams({ slotInterval: 1e3 }), c.retryFunc = (u, d, x) => (this.isCommunityResource() && Ue(\"Etherscan\"), Promise.resolve(!0)), c.processFunc = async (u, d) => {\n      let x = d.hasBody() ? JSON.parse(He(d.body)) : {}, p = (typeof x.result == \"string\" ? x.result : \"\").toLowerCase().indexOf(\"rate limit\") >= 0;\n      return e === \"proxy\" ? x && x.status == 0 && x.message == \"NOTOK\" && p && (this.emit(\"debug\", { action: \"receiveError\", id: s, reason: \"proxy-NOTOK\", error: x }), d.throwThrottleError(x.result, ou)) : p && (this.emit(\"debug\", { action: \"receiveError\", id: s, reason: \"null result\", error: x.result }), d.throwThrottleError(x.result, ou)), d;\n    }, o && (c.setHeader(\"content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\"), c.body = Object.keys(o).map((u) => `${u}=${o[u]}`).join(\"&\"));\n    let f = await c.send();\n    try {\n      f.assertOk();\n    } catch (u) {\n      this.emit(\"debug\", { action: \"receiveError\", id: s, error: u, reason: \"assertOk\" }), b(!1, \"response error\", \"SERVER_ERROR\", { request: c, response: f });\n    }\n    f.hasBody() || (this.emit(\"debug\", { action: \"receiveError\", id: s, error: \"missing body\", reason: \"null body\" }), b(!1, \"missing response\", \"SERVER_ERROR\", { request: c, response: f }));\n    let l = JSON.parse(He(f.body));\n    return e === \"proxy\" ? (l.jsonrpc != \"2.0\" && (this.emit(\"debug\", { action: \"receiveError\", id: s, result: l, reason: \"invalid JSON-RPC\" }), b(!1, \"invalid JSON-RPC response (missing jsonrpc='2.0')\", \"SERVER_ERROR\", { request: c, response: f, info: { result: l } })), l.error && (this.emit(\"debug\", { action: \"receiveError\", id: s, result: l, reason: \"JSON-RPC error\" }), b(!1, \"error response\", \"SERVER_ERROR\", { request: c, response: f, info: { result: l } })), this.emit(\"debug\", { action: \"receiveRequest\", id: s, result: l }), l.result) : l.status == 0 && (l.message === \"No records found\" || l.message === \"No transactions found\") ? (this.emit(\"debug\", { action: \"receiveRequest\", id: s, result: l }), l.result) : ((l.status != 1 || typeof l.message == \"string\" && !l.message.match(/^OK/)) && (this.emit(\"debug\", { action: \"receiveError\", id: s, result: l }), b(!1, \"error response\", \"SERVER_ERROR\", { request: c, response: f, info: { result: l } })), this.emit(\"debug\", { action: \"receiveRequest\", id: s, result: l }), l.result);\n  }\n  /**\n   *  Returns %%transaction%% normalized for the Etherscan API.\n   */\n  _getTransactionPostData(e) {\n    let t = {};\n    for (let n in e) {\n      if (gp.indexOf(n) >= 0 || e[n] == null)\n        continue;\n      let s = e[n];\n      if (!(n === \"type\" && s === 0) && !(n === \"blockTag\" && s === \"latest\")) {\n        if ({ type: !0, gasLimit: !0, gasPrice: !0, maxFeePerGs: !0, maxPriorityFeePerGas: !0, nonce: !0, value: !0 }[n])\n          s = Pe(s);\n        else if (n === \"accessList\")\n          s = \"[\" + Ce(s).map((i) => `{address:\"${i.address}\",storageKeys:[\"${i.storageKeys.join('\",\"')}\"]}`).join(\",\") + \"]\";\n        else if (n === \"blobVersionedHashes\") {\n          if (s.length === 0)\n            continue;\n          b(!1, \"Etherscan API does not support blobVersionedHashes\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"_getTransactionPostData\",\n            info: { transaction: e }\n          });\n        } else\n          s = w(s);\n        t[n] = s;\n      }\n    }\n    return t;\n  }\n  /**\n   *  Throws the normalized Etherscan error.\n   */\n  _checkError(e, t, n) {\n    let s = \"\";\n    if ($(t, \"SERVER_ERROR\")) {\n      try {\n        s = t.info.result.error.message;\n      } catch {\n      }\n      if (!s)\n        try {\n          s = t.info.message;\n        } catch {\n        }\n    }\n    if (e.method === \"estimateGas\" && !s.match(/revert/i) && s.match(/insufficient funds/i) && b(!1, \"insufficient funds\", \"INSUFFICIENT_FUNDS\", {\n      transaction: e.transaction\n    }), (e.method === \"call\" || e.method === \"estimateGas\") && s.match(/execution reverted/i)) {\n      let i = \"\";\n      try {\n        i = t.info.result.error.data;\n      } catch {\n      }\n      let o = st.getBuiltinCallException(e.method, e.transaction, i);\n      throw o.info = { request: e, error: t }, o;\n    }\n    if (s && e.method === \"broadcastTransaction\") {\n      let i = Xe.from(e.signedTransaction);\n      s.match(/replacement/i) && s.match(/underpriced/i) && b(!1, \"replacement fee too low\", \"REPLACEMENT_UNDERPRICED\", {\n        transaction: i\n      }), s.match(/insufficient funds/) && b(!1, \"insufficient funds for intrinsic transaction cost\", \"INSUFFICIENT_FUNDS\", {\n        transaction: i\n      }), s.match(/same hash was already imported|transaction nonce is too low|nonce too low/) && b(!1, \"nonce has already been used\", \"NONCE_EXPIRED\", {\n        transaction: i\n      });\n    }\n    throw t;\n  }\n  async _detectNetwork() {\n    return this.network;\n  }\n  async _perform(e) {\n    switch (e.method) {\n      case \"chainId\":\n        return this.network.chainId;\n      case \"getBlockNumber\":\n        return this.fetch(\"proxy\", { action: \"eth_blockNumber\" });\n      case \"getGasPrice\":\n        return this.fetch(\"proxy\", { action: \"eth_gasPrice\" });\n      case \"getPriorityFee\":\n        if (this.network.name === \"mainnet\")\n          return \"1000000000\";\n        if (this.network.name === \"optimism\")\n          return \"1000000\";\n        throw new Error(\"fallback onto the AbstractProvider default\");\n      /* Working with Etherscan to get this added:\n      try {\n          const test = await this.fetch(\"proxy\", {\n              action: \"eth_maxPriorityFeePerGas\"\n          });\n          console.log(test);\n          return test;\n      } catch (e) {\n          console.log(\"DEBUG\", e);\n          throw e;\n      }\n      */\n      /* This might be safe; but due to rounding neither myself\n         or Etherscan are necessarily comfortable with this. :)\n      try {\n          const result = await this.fetch(\"gastracker\", { action: \"gasoracle\" });\n          console.log(result);\n          const gasPrice = parseUnits(result.SafeGasPrice, \"gwei\");\n          const baseFee = parseUnits(result.suggestBaseFee, \"gwei\");\n          const priorityFee = gasPrice - baseFee;\n          if (priorityFee < 0) { throw new Error(\"negative priority fee; defer to abstract provider default\"); }\n          return priorityFee;\n      } catch (error) {\n          console.log(\"DEBUG\", error);\n          throw error;\n      }\n      */\n      case \"getBalance\":\n        return this.fetch(\"account\", {\n          action: \"balance\",\n          address: e.address,\n          tag: e.blockTag\n        });\n      case \"getTransactionCount\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_getTransactionCount\",\n          address: e.address,\n          tag: e.blockTag\n        });\n      case \"getCode\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_getCode\",\n          address: e.address,\n          tag: e.blockTag\n        });\n      case \"getStorage\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_getStorageAt\",\n          address: e.address,\n          position: e.position,\n          tag: e.blockTag\n        });\n      case \"broadcastTransaction\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_sendRawTransaction\",\n          hex: e.signedTransaction\n        }, !0).catch((t) => this._checkError(e, t, e.signedTransaction));\n      case \"getBlock\":\n        if (\"blockTag\" in e)\n          return this.fetch(\"proxy\", {\n            action: \"eth_getBlockByNumber\",\n            tag: e.blockTag,\n            boolean: e.includeTransactions ? \"true\" : \"false\"\n          });\n        b(!1, \"getBlock by blockHash not supported by Etherscan\", \"UNSUPPORTED_OPERATION\", {\n          operation: \"getBlock(blockHash)\"\n        });\n      case \"getTransaction\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_getTransactionByHash\",\n          txhash: e.hash\n        });\n      case \"getTransactionReceipt\":\n        return this.fetch(\"proxy\", {\n          action: \"eth_getTransactionReceipt\",\n          txhash: e.hash\n        });\n      case \"call\": {\n        if (e.blockTag !== \"latest\")\n          throw new Error(\"EtherscanProvider does not support blockTag for call\");\n        let t = this._getTransactionPostData(e.transaction);\n        t.module = \"proxy\", t.action = \"eth_call\";\n        try {\n          return await this.fetch(\"proxy\", t, !0);\n        } catch (n) {\n          return this._checkError(e, n, e.transaction);\n        }\n      }\n      case \"estimateGas\": {\n        let t = this._getTransactionPostData(e.transaction);\n        t.module = \"proxy\", t.action = \"eth_estimateGas\";\n        try {\n          return await this.fetch(\"proxy\", t, !0);\n        } catch (n) {\n          return this._checkError(e, n, e.transaction);\n        }\n      }\n      /*\n                  case \"getLogs\": {\n                      // Needs to complain if more than one address is passed in\n                      const args: Record<string, any> = { action: \"getLogs\" }\n      \n                      if (params.filter.fromBlock) {\n                          args.fromBlock = checkLogTag(params.filter.fromBlock);\n                      }\n      \n                      if (params.filter.toBlock) {\n                          args.toBlock = checkLogTag(params.filter.toBlock);\n                      }\n      \n                      if (params.filter.address) {\n                          args.address = params.filter.address;\n                      }\n      \n                      // @TODO: We can handle slightly more complicated logs using the logs API\n                      if (params.filter.topics && params.filter.topics.length > 0) {\n                          if (params.filter.topics.length > 1) {\n                              logger.throwError(\"unsupported topic count\", Logger.Errors.UNSUPPORTED_OPERATION, { topics: params.filter.topics });\n                          }\n                          if (params.filter.topics.length === 1) {\n                              const topic0 = params.filter.topics[0];\n                              if (typeof(topic0) !== \"string\" || topic0.length !== 66) {\n                                  logger.throwError(\"unsupported topic format\", Logger.Errors.UNSUPPORTED_OPERATION, { topic0: topic0 });\n                              }\n                              args.topic0 = topic0;\n                          }\n                      }\n      \n                      const logs: Array<any> = await this.fetch(\"logs\", args);\n      \n                      // Cache txHash => blockHash\n                      let blocks: { [tag: string]: string } = {};\n      \n                      // Add any missing blockHash to the logs\n                      for (let i = 0; i < logs.length; i++) {\n                          const log = logs[i];\n                          if (log.blockHash != null) { continue; }\n                          if (blocks[log.blockNumber] == null) {\n                              const block = await this.getBlock(log.blockNumber);\n                              if (block) {\n                                  blocks[log.blockNumber] = block.hash;\n                              }\n                          }\n      \n                          log.blockHash = blocks[log.blockNumber];\n                      }\n      \n                      return logs;\n                  }\n      */\n      default:\n        break;\n    }\n    return super._perform(e);\n  }\n  async getNetwork() {\n    return this.network;\n  }\n  /**\n   *  Resolves to the current price of ether.\n   *\n   *  This returns ``0`` on any network other than ``mainnet``.\n   */\n  async getEtherPrice() {\n    return this.network.name !== \"mainnet\" ? 0 : parseFloat((await this.fetch(\"stats\", { action: \"ethprice\" })).ethusd);\n  }\n  /**\n   *  Resolves to a [Contract]] for %%address%%, using the\n   *  Etherscan API to retreive the Contract ABI.\n   */\n  async getContract(e) {\n    let t = this._getAddress(e);\n    bp(t) && (t = await t);\n    try {\n      let n = await this.fetch(\"contract\", {\n        action: \"getabi\",\n        address: t\n      }), s = JSON.parse(n);\n      return new We(t, s, this);\n    } catch {\n      return null;\n    }\n  }\n  isCommunityResource() {\n    return this.apiKey == null;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/ws-browser.js\nfunction wp() {\n  if (typeof self < \"u\")\n    return self;\n  if (typeof window < \"u\")\n    return window;\n  if (typeof global < \"u\")\n    return global;\n  throw new Error(\"unable to locate global object\");\n}\na(wp, \"getGlobal\");\nvar cu = wp().WebSocket;\n\n// node_modules/ethers/lib.esm/providers/provider-socket.js\nvar Mr = class {\n  static {\n    a(this, \"SocketSubscriber\");\n  }\n  #e;\n  #t;\n  /**\n   *  The filter.\n   */\n  get filter() {\n    return JSON.parse(this.#t);\n  }\n  #r;\n  #n;\n  #s;\n  /**\n   *  Creates a new **SocketSubscriber** attached to %%provider%% listening\n   *  to %%filter%%.\n   */\n  constructor(e, t) {\n    this.#e = e, this.#t = JSON.stringify(t), this.#r = null, this.#n = null, this.#s = null;\n  }\n  start() {\n    this.#r = this.#e.send(\"eth_subscribe\", this.filter).then((e) => (this.#e._register(e, this), e));\n  }\n  stop() {\n    this.#r.then((e) => {\n      this.#e.destroyed || this.#e.send(\"eth_unsubscribe\", [e]);\n    }), this.#r = null;\n  }\n  // @TODO: pause should trap the current blockNumber, unsub, and on resume use getLogs\n  //        and resume\n  pause(e) {\n    b(e, \"preserve logs while paused not supported by SocketSubscriber yet\", \"UNSUPPORTED_OPERATION\", { operation: \"pause(false)\" }), this.#n = !!e;\n  }\n  resume() {\n    this.#n = null;\n  }\n  /**\n   *  @_ignore:\n   */\n  _handleMessage(e) {\n    if (this.#r != null && this.#n === null) {\n      let t = this.#s;\n      t == null ? t = this._emit(this.#e, e) : t = t.then(async () => {\n        await this._emit(this.#e, e);\n      }), this.#s = t.then(() => {\n        this.#s === t && (this.#s = null);\n      });\n    }\n  }\n  /**\n   *  Sub-classes **must** override this to emit the events on the\n   *  provider.\n   */\n  async _emit(e, t) {\n    throw new Error(\"sub-classes must implemente this; _emit\");\n  }\n}, ls = class extends Mr {\n  static {\n    a(this, \"SocketBlockSubscriber\");\n  }\n  /**\n   *  @_ignore:\n   */\n  constructor(e) {\n    super(e, [\"newHeads\"]);\n  }\n  async _emit(e, t) {\n    e.emit(\"block\", parseInt(t.number));\n  }\n}, us = class extends Mr {\n  static {\n    a(this, \"SocketPendingSubscriber\");\n  }\n  /**\n   *  @_ignore:\n   */\n  constructor(e) {\n    super(e, [\"newPendingTransactions\"]);\n  }\n  async _emit(e, t) {\n    e.emit(\"pending\", t);\n  }\n}, ds = class extends Mr {\n  static {\n    a(this, \"SocketEventSubscriber\");\n  }\n  #e;\n  /**\n   *  The filter.\n   */\n  get logFilter() {\n    return JSON.parse(this.#e);\n  }\n  /**\n   *  @_ignore:\n   */\n  constructor(e, t) {\n    super(e, [\"logs\", t]), this.#e = JSON.stringify(t);\n  }\n  async _emit(e, t) {\n    e.emit(this.logFilter, e._wrapLog(t, e._network));\n  }\n}, Pn = class extends Fr {\n  static {\n    a(this, \"SocketProvider\");\n  }\n  #e;\n  // Maps each filterId to its subscriber\n  #t;\n  // If any events come in before a subscriber has finished\n  // registering, queue them\n  #r;\n  /**\n   *  Creates a new **SocketProvider** connected to %%network%%.\n   *\n   *  If unspecified, the network will be discovered.\n   */\n  constructor(e, t) {\n    let n = Object.assign({}, t ?? {});\n    h(n.batchMaxCount == null || n.batchMaxCount === 1, \"sockets-based providers do not support batches\", \"options.batchMaxCount\", t), n.batchMaxCount = 1, n.staticNetwork == null && (n.staticNetwork = !0), super(e, n), this.#e = /* @__PURE__ */ new Map(), this.#t = /* @__PURE__ */ new Map(), this.#r = /* @__PURE__ */ new Map();\n  }\n  // This value is only valid after _start has been called\n  /*\n  get _network(): Network {\n      if (this.#network == null) {\n          throw new Error(\"this shouldn't happen\");\n      }\n      return this.#network.clone();\n  }\n  */\n  _getSubscriber(e) {\n    switch (e.type) {\n      case \"close\":\n        return new It(\"close\");\n      case \"block\":\n        return new ls(this);\n      case \"pending\":\n        return new us(this);\n      case \"event\":\n        return new ds(this, e.filter);\n      case \"orphan\":\n        if (e.filter.orphan === \"drop-log\")\n          return new It(\"drop-log\");\n    }\n    return super._getSubscriber(e);\n  }\n  /**\n   *  Register a new subscriber. This is used internalled by Subscribers\n   *  and generally is unecessary unless extending capabilities.\n   */\n  _register(e, t) {\n    this.#t.set(e, t);\n    let n = this.#r.get(e);\n    if (n) {\n      for (let s of n)\n        t._handleMessage(s);\n      this.#r.delete(e);\n    }\n  }\n  async _send(e) {\n    h(!Array.isArray(e), \"WebSocket does not support batch send\", \"payload\", e);\n    let t = new Promise((n, s) => {\n      this.#e.set(e.id, { payload: e, resolve: n, reject: s });\n    });\n    return await this._waitUntilReady(), await this._write(JSON.stringify(e)), [await t];\n  }\n  // Sub-classes must call this once they are connected\n  /*\n      async _start(): Promise<void> {\n          if (this.#ready) { return; }\n  \n          for (const { payload } of this.#callbacks.values()) {\n              await this._write(JSON.stringify(payload));\n          }\n  \n          this.#ready = (async function() {\n              await super._start();\n          })();\n      }\n      */\n  /**\n   *  Sub-classes **must** call this with messages received over their\n   *  transport to be processed and dispatched.\n   */\n  async _processMessage(e) {\n    let t = JSON.parse(e);\n    if (t && typeof t == \"object\" && \"id\" in t) {\n      let n = this.#e.get(t.id);\n      if (n == null) {\n        this.emit(\"error\", Q(\"received result for unknown id\", \"UNKNOWN_ERROR\", {\n          reasonCode: \"UNKNOWN_ID\",\n          result: t\n        }));\n        return;\n      }\n      this.#e.delete(t.id), n.resolve(t);\n    } else if (t && t.method === \"eth_subscription\") {\n      let n = t.params.subscription, s = this.#t.get(n);\n      if (s)\n        s._handleMessage(t.params.result);\n      else {\n        let i = this.#r.get(n);\n        i == null && (i = [], this.#r.set(n, i)), i.push(t.params.result);\n      }\n    } else {\n      this.emit(\"error\", Q(\"received unexpected message\", \"UNKNOWN_ERROR\", {\n        reasonCode: \"UNEXPECTED_MESSAGE\",\n        result: t\n      }));\n      return;\n    }\n  }\n  /**\n   *  Sub-classes **must** override this to send %%message%% over their\n   *  transport.\n   */\n  async _write(e) {\n    throw new Error(\"sub-classes must override this\");\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-websocket.js\nvar or = class extends Pn {\n  static {\n    a(this, \"WebSocketProvider\");\n  }\n  #e;\n  #t;\n  get websocket() {\n    if (this.#t == null)\n      throw new Error(\"websocket closed\");\n    return this.#t;\n  }\n  constructor(e, t, n) {\n    super(t, n), typeof e == \"string\" ? (this.#e = () => new cu(e), this.#t = this.#e()) : typeof e == \"function\" ? (this.#e = e, this.#t = e()) : (this.#e = null, this.#t = e), this.websocket.onopen = async () => {\n      try {\n        await this._start(), this.resume();\n      } catch (s) {\n        console.log(\"failed to start WebsocketProvider\", s);\n      }\n    }, this.websocket.onmessage = (s) => {\n      this._processMessage(s.data);\n    };\n  }\n  async _write(e) {\n    this.websocket.send(e);\n  }\n  async destroy() {\n    this.#t != null && (this.#t.close(), this.#t = null), super.destroy();\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-infura.js\nvar $s = \"84842078b09946638c03157f83405213\";\nfunction Ap(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"mainnet.infura.io\";\n    case \"goerli\":\n      return \"goerli.infura.io\";\n    case \"sepolia\":\n      return \"sepolia.infura.io\";\n    case \"arbitrum\":\n      return \"arbitrum-mainnet.infura.io\";\n    case \"arbitrum-goerli\":\n      return \"arbitrum-goerli.infura.io\";\n    case \"arbitrum-sepolia\":\n      return \"arbitrum-sepolia.infura.io\";\n    case \"base\":\n      return \"base-mainnet.infura.io\";\n    case \"base-goerlia\":\n    // @TODO: Remove this typo in the future!\n    case \"base-goerli\":\n      return \"base-goerli.infura.io\";\n    case \"base-sepolia\":\n      return \"base-sepolia.infura.io\";\n    case \"bnb\":\n      return \"bsc-mainnet.infura.io\";\n    case \"bnbt\":\n      return \"bsc-testnet.infura.io\";\n    case \"linea\":\n      return \"linea-mainnet.infura.io\";\n    case \"linea-goerli\":\n      return \"linea-goerli.infura.io\";\n    case \"linea-sepolia\":\n      return \"linea-sepolia.infura.io\";\n    case \"matic\":\n      return \"polygon-mainnet.infura.io\";\n    case \"matic-amoy\":\n      return \"polygon-amoy.infura.io\";\n    case \"matic-mumbai\":\n      return \"polygon-mumbai.infura.io\";\n    case \"optimism\":\n      return \"optimism-mainnet.infura.io\";\n    case \"optimism-goerli\":\n      return \"optimism-goerli.infura.io\";\n    case \"optimism-sepolia\":\n      return \"optimism-sepolia.infura.io\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(Ap, \"getHost\");\nvar hs = class extends or {\n  static {\n    a(this, \"InfuraWebSocketProvider\");\n  }\n  /**\n   *  The Project ID for the INFURA connection.\n   */\n  projectId;\n  /**\n   *  The Project Secret.\n   *\n   *  If null, no authenticated requests are made. This should not\n   *  be used outside of private contexts.\n   */\n  projectSecret;\n  /**\n   *  Creates a new **InfuraWebSocketProvider**.\n   */\n  constructor(e, t) {\n    let n = new Gr(e, t), s = n._getConnection();\n    b(!s.credentials, \"INFURA WebSocket project secrets unsupported\", \"UNSUPPORTED_OPERATION\", { operation: \"InfuraProvider.getWebSocketProvider()\" });\n    let i = s.url.replace(/^http/i, \"ws\").replace(\"/v3/\", \"/ws/v3/\");\n    super(i, n._network), P(this, {\n      projectId: n.projectId,\n      projectSecret: n.projectSecret\n    });\n  }\n  isCommunityResource() {\n    return this.projectId === $s;\n  }\n}, Gr = class r extends de {\n  static {\n    a(this, \"InfuraProvider\");\n  }\n  /**\n   *  The Project ID for the INFURA connection.\n   */\n  projectId;\n  /**\n   *  The Project Secret.\n   *\n   *  If null, no authenticated requests are made. This should not\n   *  be used outside of private contexts.\n   */\n  projectSecret;\n  /**\n   *  Creates a new **InfuraProvider**.\n   */\n  constructor(e, t, n) {\n    e == null && (e = \"mainnet\");\n    let s = J.from(e);\n    t == null && (t = $s), n == null && (n = null);\n    let i = r.getRequest(s, t, n);\n    super(i, s, { staticNetwork: s }), P(this, { projectId: t, projectSecret: n });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.projectId, this.projectSecret);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  isCommunityResource() {\n    return this.projectId === $s;\n  }\n  /**\n   *  Creates a new **InfuraWebSocketProvider**.\n   */\n  static getWebSocketProvider(e, t) {\n    return new hs(e, t);\n  }\n  /**\n   *  Returns a prepared request for connecting to %%network%%\n   *  with %%projectId%% and %%projectSecret%%.\n   */\n  static getRequest(e, t, n) {\n    t == null && (t = $s), n == null && (n = null);\n    let s = new ne(`https://${Ap(e.name)}/v3/${t}`);\n    return s.allowGzip = !0, n && s.setCredentials(\"\", n), t === $s && (s.retryFunc = async (i, o, c) => (Ue(\"InfuraProvider\"), !0)), s;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-quicknode.js\nvar vo = \"919b412a057b5e9c9b6dce193c5a60242d6efadb\";\nfunction Ep(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"ethers.quiknode.pro\";\n    case \"goerli\":\n      return \"ethers.ethereum-goerli.quiknode.pro\";\n    case \"sepolia\":\n      return \"ethers.ethereum-sepolia.quiknode.pro\";\n    case \"holesky\":\n      return \"ethers.ethereum-holesky.quiknode.pro\";\n    case \"arbitrum\":\n      return \"ethers.arbitrum-mainnet.quiknode.pro\";\n    case \"arbitrum-goerli\":\n      return \"ethers.arbitrum-goerli.quiknode.pro\";\n    case \"arbitrum-sepolia\":\n      return \"ethers.arbitrum-sepolia.quiknode.pro\";\n    case \"base\":\n      return \"ethers.base-mainnet.quiknode.pro\";\n    case \"base-goerli\":\n      return \"ethers.base-goerli.quiknode.pro\";\n    case \"base-spolia\":\n      return \"ethers.base-sepolia.quiknode.pro\";\n    case \"bnb\":\n      return \"ethers.bsc.quiknode.pro\";\n    case \"bnbt\":\n      return \"ethers.bsc-testnet.quiknode.pro\";\n    case \"matic\":\n      return \"ethers.matic.quiknode.pro\";\n    case \"matic-mumbai\":\n      return \"ethers.matic-testnet.quiknode.pro\";\n    case \"optimism\":\n      return \"ethers.optimism.quiknode.pro\";\n    case \"optimism-goerli\":\n      return \"ethers.optimism-goerli.quiknode.pro\";\n    case \"optimism-sepolia\":\n      return \"ethers.optimism-sepolia.quiknode.pro\";\n    case \"xdai\":\n      return \"ethers.xdai.quiknode.pro\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(Ep, \"getHost\");\nvar kn = class r extends de {\n  static {\n    a(this, \"QuickNodeProvider\");\n  }\n  /**\n   *  The API token.\n   */\n  token;\n  /**\n   *  Creates a new **QuickNodeProvider**.\n   */\n  constructor(e, t) {\n    e == null && (e = \"mainnet\");\n    let n = J.from(e);\n    t == null && (t = vo);\n    let s = r.getRequest(n, t);\n    super(s, n, { staticNetwork: n }), P(this, { token: t });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.token);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  isCommunityResource() {\n    return this.token === vo;\n  }\n  /**\n   *  Returns a new request prepared for %%network%% and the\n   *  %%token%%.\n   */\n  static getRequest(e, t) {\n    t == null && (t = vo);\n    let n = new ne(`https://${Ep(e.name)}/${t}`);\n    return n.allowGzip = !0, t === vo && (n.retryFunc = async (s, i, o) => (Ue(\"QuickNodeProvider\"), !0)), n;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-fallback.js\nvar Pp = BigInt(\"1\"), kp = BigInt(\"2\");\nfunction Np(r) {\n  for (let e = r.length - 1; e > 0; e--) {\n    let t = Math.floor(Math.random() * (e + 1)), n = r[e];\n    r[e] = r[t], r[t] = n;\n  }\n}\na(Np, \"shuffle\");\nfunction Bp(r) {\n  return new Promise((e) => {\n    setTimeout(e, r);\n  });\n}\na(Bp, \"stall\");\nfunction wc() {\n  return (/* @__PURE__ */ new Date()).getTime();\n}\na(wc, \"getTime\");\nfunction bc(r) {\n  return JSON.stringify(r, (e, t) => typeof t == \"bigint\" ? { type: \"bigint\", value: t.toString() } : t);\n}\na(bc, \"stringify\");\nvar fu = { stallTimeout: 400, priority: 1, weight: 1 }, lu = {\n  blockNumber: -2,\n  requests: 0,\n  lateResponses: 0,\n  errorResponses: 0,\n  outOfSync: -1,\n  unsupportedEvents: 0,\n  rollingDuration: 0,\n  score: 0,\n  _network: null,\n  _updateNumber: null,\n  _totalTime: 0,\n  _lastFatalError: null,\n  _lastFatalErrorTimestamp: 0\n};\nasync function Rp(r, e) {\n  for (; (r.blockNumber < 0 || r.blockNumber < e) && (r._updateNumber || (r._updateNumber = (async () => {\n    try {\n      let t = await r.provider.getBlockNumber();\n      t > r.blockNumber && (r.blockNumber = t);\n    } catch (t) {\n      r.blockNumber = -2, r._lastFatalError = t, r._lastFatalErrorTimestamp = wc();\n    }\n    r._updateNumber = null;\n  })()), await r._updateNumber, r.outOfSync++, !r._lastFatalError); )\n    ;\n}\na(Rp, \"waitForSync\");\nfunction xs(r) {\n  if (r == null)\n    return \"null\";\n  if (Array.isArray(r))\n    return \"[\" + r.map(xs).join(\",\") + \"]\";\n  if (typeof r == \"object\" && typeof r.toJSON == \"function\")\n    return xs(r.toJSON());\n  switch (typeof r) {\n    case \"boolean\":\n    case \"symbol\":\n      return r.toString();\n    case \"bigint\":\n    case \"number\":\n      return BigInt(r).toString();\n    case \"string\":\n      return JSON.stringify(r);\n    case \"object\": {\n      let e = Object.keys(r);\n      return e.sort(), \"{\" + e.map((t) => `${JSON.stringify(t)}:${xs(r[t])}`).join(\",\") + \"}\";\n    }\n  }\n  throw console.log(\"Could not serialize\", r), new Error(\"Hmm...\");\n}\na(xs, \"_normalize\");\nfunction gc(r, e) {\n  if (\"error\" in e) {\n    let n = e.error, s;\n    return $(n, \"CALL_EXCEPTION\") ? s = xs(Object.assign({}, n, {\n      shortMessage: void 0,\n      reason: void 0,\n      info: void 0\n    })) : s = xs(n), { tag: s, value: n };\n  }\n  let t = e.result;\n  return { tag: xs(t), value: t };\n}\na(gc, \"normalizeResult\");\nfunction To(r, e) {\n  let t = /* @__PURE__ */ new Map();\n  for (let { value: s, tag: i, weight: o } of e) {\n    let c = t.get(i) || { value: s, weight: 0 };\n    c.weight += o, t.set(i, c);\n  }\n  let n = null;\n  for (let s of t.values())\n    s.weight >= r && (!n || s.weight > n.weight) && (n = s);\n  if (n)\n    return n.value;\n}\na(To, \"checkQuorum\");\nfunction Ac(r, e) {\n  let t = 0, n = /* @__PURE__ */ new Map(), s = null, i = [];\n  for (let { value: c, tag: f, weight: l } of e)\n    if (c instanceof Error) {\n      let u = n.get(f) || { value: c, weight: 0 };\n      u.weight += l, n.set(f, u), (s == null || u.weight > s.weight) && (s = u);\n    } else\n      i.push(BigInt(c)), t += l;\n  if (t < r)\n    return s && s.weight >= r ? s.value : void 0;\n  i.sort((c, f) => c < f ? -1 : f > c ? 1 : 0);\n  let o = Math.floor(i.length / 2);\n  return i.length % 2 ? i[o] : (i[o - 1] + i[o] + Pp) / kp;\n}\na(Ac, \"getMedian\");\nfunction yc(r, e) {\n  let t = To(r, e);\n  if (t !== void 0)\n    return t;\n  for (let n of e)\n    if (n.value)\n      return n.value;\n}\na(yc, \"getAnyResult\");\nfunction vp(r, e) {\n  if (r === 1)\n    return S(Ac(r, e), \"%internal\");\n  let t = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ a((o, c) => {\n    let f = t.get(o) || { result: o, weight: 0 };\n    f.weight += c, t.set(o, f);\n  }, \"add\");\n  for (let { weight: o, value: c } of e) {\n    let f = S(c);\n    n(f - 1, o), n(f, o), n(f + 1, o);\n  }\n  let s = 0, i;\n  for (let { weight: o, result: c } of t.values())\n    o >= r && (o > s || i != null && o === s && c > i) && (s = o, i = c);\n  return i;\n}\na(vp, \"getFuzzyMode\");\nvar Nn = class extends ot {\n  static {\n    a(this, \"FallbackProvider\");\n  }\n  /**\n   *  The number of backends that must agree on a value before it is\n   *  accpeted.\n   */\n  quorum;\n  /**\n   *  @_ignore:\n   */\n  eventQuorum;\n  /**\n   *  @_ignore:\n   */\n  eventWorkers;\n  #e;\n  #t;\n  #r;\n  /**\n   *  Creates a new **FallbackProvider** with %%providers%% connected to\n   *  %%network%%.\n   *\n   *  If a [[Provider]] is included in %%providers%%, defaults are used\n   *  for the configuration.\n   */\n  constructor(e, t, n) {\n    super(t, n), this.#e = e.map((s) => s instanceof ot ? Object.assign({ provider: s }, fu, lu) : Object.assign({}, fu, s, lu)), this.#t = -2, this.#r = null, n && n.quorum != null ? this.quorum = n.quorum : this.quorum = Math.ceil(this.#e.reduce((s, i) => (s += i.weight, s), 0) / 2), this.eventQuorum = 1, this.eventWorkers = 1, h(this.quorum <= this.#e.reduce((s, i) => s + i.weight, 0), \"quorum exceed provider weight\", \"quorum\", this.quorum);\n  }\n  get providerConfigs() {\n    return this.#e.map((e) => {\n      let t = Object.assign({}, e);\n      for (let n in t)\n        n[0] === \"_\" && delete t[n];\n      return t;\n    });\n  }\n  async _detectNetwork() {\n    return J.from(k(await this._perform({ method: \"chainId\" })));\n  }\n  // @TODO: Add support to select providers to be the event subscriber\n  //_getSubscriber(sub: Subscription): Subscriber {\n  //    throw new Error(\"@TODO\");\n  //}\n  /**\n   *  Transforms a %%req%% into the correct method call on %%provider%%.\n   */\n  async _translatePerform(e, t) {\n    switch (t.method) {\n      case \"broadcastTransaction\":\n        return await e.broadcastTransaction(t.signedTransaction);\n      case \"call\":\n        return await e.call(Object.assign({}, t.transaction, { blockTag: t.blockTag }));\n      case \"chainId\":\n        return (await e.getNetwork()).chainId;\n      case \"estimateGas\":\n        return await e.estimateGas(t.transaction);\n      case \"getBalance\":\n        return await e.getBalance(t.address, t.blockTag);\n      case \"getBlock\": {\n        let n = \"blockHash\" in t ? t.blockHash : t.blockTag;\n        return await e.getBlock(n, t.includeTransactions);\n      }\n      case \"getBlockNumber\":\n        return await e.getBlockNumber();\n      case \"getCode\":\n        return await e.getCode(t.address, t.blockTag);\n      case \"getGasPrice\":\n        return (await e.getFeeData()).gasPrice;\n      case \"getPriorityFee\":\n        return (await e.getFeeData()).maxPriorityFeePerGas;\n      case \"getLogs\":\n        return await e.getLogs(t.filter);\n      case \"getStorage\":\n        return await e.getStorage(t.address, t.position, t.blockTag);\n      case \"getTransaction\":\n        return await e.getTransaction(t.hash);\n      case \"getTransactionCount\":\n        return await e.getTransactionCount(t.address, t.blockTag);\n      case \"getTransactionReceipt\":\n        return await e.getTransactionReceipt(t.hash);\n      case \"getTransactionResult\":\n        return await e.getTransactionResult(t.hash);\n    }\n  }\n  // Grab the next (random) config that is not already part of\n  // the running set\n  #n(e) {\n    let t = Array.from(e).map((s) => s.config), n = this.#e.slice();\n    Np(n), n.sort((s, i) => s.priority - i.priority);\n    for (let s of n)\n      if (!s._lastFatalError && t.indexOf(s) === -1)\n        return s;\n    return null;\n  }\n  // Adds a new runner (if available) to running.\n  #s(e, t) {\n    let n = this.#n(e);\n    if (n == null)\n      return null;\n    let s = {\n      config: n,\n      result: null,\n      didBump: !1,\n      perform: null,\n      staller: null\n    }, i = wc();\n    return s.perform = (async () => {\n      try {\n        n.requests++;\n        let c = await this._translatePerform(n.provider, t);\n        s.result = { result: c };\n      } catch (c) {\n        n.errorResponses++, s.result = { error: c };\n      }\n      let o = wc() - i;\n      n._totalTime += o, n.rollingDuration = 0.95 * n.rollingDuration + 0.05 * o, s.perform = null;\n    })(), s.staller = (async () => {\n      await Bp(n.stallTimeout), s.staller = null;\n    })(), e.add(s), s;\n  }\n  // Initializes the blockNumber and network for each runner and\n  // blocks until initialized\n  async #o() {\n    let e = this.#r;\n    if (!e) {\n      let t = [];\n      this.#e.forEach((n) => {\n        t.push((async () => {\n          await Rp(n, 0), n._lastFatalError || (n._network = await n.provider.getNetwork());\n        })());\n      }), this.#r = e = (async () => {\n        await Promise.all(t);\n        let n = null;\n        for (let s of this.#e) {\n          if (s._lastFatalError)\n            continue;\n          let i = s._network;\n          n == null ? n = i.chainId : i.chainId !== n && b(!1, \"cannot mix providers on different networks\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"new FallbackProvider\"\n          });\n        }\n      })();\n    }\n    await e;\n  }\n  async #i(e, t) {\n    let n = [];\n    for (let s of e)\n      if (s.result != null) {\n        let { tag: i, value: o } = gc(t.method, s.result);\n        n.push({ tag: i, value: o, weight: s.config.weight });\n      }\n    if (!(n.reduce((s, i) => s + i.weight, 0) < this.quorum)) {\n      switch (t.method) {\n        case \"getBlockNumber\": {\n          this.#t === -2 && (this.#t = Math.ceil(S(Ac(this.quorum, this.#e.filter((i) => !i._lastFatalError).map((i) => ({\n            value: i.blockNumber,\n            tag: S(i.blockNumber).toString(),\n            weight: i.weight\n          }))))));\n          let s = vp(this.quorum, n);\n          return s === void 0 ? void 0 : (s > this.#t && (this.#t = s), this.#t);\n        }\n        case \"getGasPrice\":\n        case \"getPriorityFee\":\n        case \"estimateGas\":\n          return Ac(this.quorum, n);\n        case \"getBlock\":\n          return \"blockTag\" in t && t.blockTag === \"pending\" ? yc(this.quorum, n) : To(this.quorum, n);\n        case \"call\":\n        case \"chainId\":\n        case \"getBalance\":\n        case \"getTransactionCount\":\n        case \"getCode\":\n        case \"getStorage\":\n        case \"getTransaction\":\n        case \"getTransactionReceipt\":\n        case \"getLogs\":\n          return To(this.quorum, n);\n        case \"broadcastTransaction\":\n          return yc(this.quorum, n);\n      }\n      b(!1, \"unsupported method\", \"UNSUPPORTED_OPERATION\", {\n        operation: `_perform(${bc(t.method)})`\n      });\n    }\n  }\n  async #a(e, t) {\n    if (e.size === 0)\n      throw new Error(\"no runners?!\");\n    let n = [], s = 0;\n    for (let o of e) {\n      if (o.perform && n.push(o.perform), o.staller) {\n        n.push(o.staller);\n        continue;\n      }\n      o.didBump || (o.didBump = !0, s++);\n    }\n    let i = await this.#i(e, t);\n    if (i !== void 0) {\n      if (i instanceof Error)\n        throw i;\n      return i;\n    }\n    for (let o = 0; o < s; o++)\n      this.#s(e, t);\n    return b(n.length > 0, \"quorum not met\", \"SERVER_ERROR\", {\n      request: \"%sub-requests\",\n      info: { request: t, results: Array.from(e).map((o) => bc(o.result)) }\n    }), await Promise.race(n), await this.#a(e, t);\n  }\n  async _perform(e) {\n    if (e.method === \"broadcastTransaction\") {\n      let i = this.#e.map((f) => null), o = this.#e.map(async ({ provider: f, weight: l }, u) => {\n        try {\n          let d = await f._perform(e);\n          i[u] = Object.assign(gc(e.method, { result: d }), { weight: l });\n        } catch (d) {\n          i[u] = Object.assign(gc(e.method, { error: d }), { weight: l });\n        }\n      });\n      for (; ; ) {\n        let f = i.filter((d) => d != null);\n        for (let { value: d } of f)\n          if (!(d instanceof Error))\n            return d;\n        let l = To(this.quorum, i.filter((d) => d != null));\n        if ($(l, \"INSUFFICIENT_FUNDS\"))\n          throw l;\n        let u = o.filter((d, x) => i[x] == null);\n        if (u.length === 0)\n          break;\n        await Promise.race(u);\n      }\n      let c = yc(this.quorum, i);\n      if (b(c !== void 0, \"problem multi-broadcasting\", \"SERVER_ERROR\", {\n        request: \"%sub-requests\",\n        info: { request: e, results: i.map(bc) }\n      }), c instanceof Error)\n        throw c;\n      return c;\n    }\n    await this.#o();\n    let t = /* @__PURE__ */ new Set(), n = 0;\n    for (; ; ) {\n      let i = this.#s(t, e);\n      if (i == null || (n += i.config.weight, n >= this.quorum))\n        break;\n    }\n    let s = await this.#a(t, e);\n    for (let i of t)\n      i.perform && i.result == null && i.config.lateResponses++;\n    return s;\n  }\n  async destroy() {\n    for (let { provider: e } of this.#e)\n      e.destroy();\n    super.destroy();\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/default-provider.js\nfunction Tp(r) {\n  return r && typeof r.send == \"function\" && typeof r.close == \"function\";\n}\na(Tp, \"isWebSocketLike\");\nvar Ip = \"goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt\".split(\" \");\nfunction Ec(r, e) {\n  e == null && (e = {});\n  let t = /* @__PURE__ */ a((o) => e[o] === \"-\" ? !1 : typeof e.exclusive == \"string\" ? o === e.exclusive : Array.isArray(e.exclusive) ? e.exclusive.indexOf(o) !== -1 : !0, \"allowService\");\n  if (typeof r == \"string\" && r.match(/^https?:/))\n    return new de(r);\n  if (typeof r == \"string\" && r.match(/^wss?:/) || Tp(r))\n    return new or(r);\n  let n = null;\n  try {\n    n = J.from(r);\n  } catch {\n  }\n  let s = [];\n  if (t(\"publicPolygon\") && n && (n.name === \"matic\" ? s.push(new de(\"https://polygon-rpc.com/\", n, { staticNetwork: n })) : n.name === \"matic-amoy\" && s.push(new de(\"https://rpc-amoy.polygon.technology/\", n, { staticNetwork: n }))), t(\"alchemy\"))\n    try {\n      s.push(new yn(r, e.alchemy));\n    } catch {\n    }\n  if (t(\"ankr\") && e.ankr != null)\n    try {\n      s.push(new gn(r, e.ankr));\n    } catch {\n    }\n  if (t(\"chainstack\"))\n    try {\n      s.push(new wn(r, e.chainstack));\n    } catch {\n    }\n  if (t(\"cloudflare\"))\n    try {\n      s.push(new An(r));\n    } catch {\n    }\n  if (t(\"etherscan\"))\n    try {\n      s.push(new En(r, e.etherscan));\n    } catch {\n    }\n  if (t(\"infura\"))\n    try {\n      let o = e.infura, c;\n      typeof o == \"object\" && (c = o.projectSecret, o = o.projectId), s.push(new Gr(r, o, c));\n    } catch {\n    }\n  if (t(\"quicknode\"))\n    try {\n      let o = e.quicknode;\n      s.push(new kn(r, o));\n    } catch {\n    }\n  if (b(s.length, \"unsupported default network\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"getDefaultProvider\"\n  }), s.length === 1)\n    return s[0];\n  let i = Math.floor(s.length / 2);\n  return i > 2 && (i = 2), n && Ip.indexOf(n.name) !== -1 && (i = 1), e && e.quorum && (i = e.quorum), new Nn(s, void 0, { quorum: i });\n}\na(Ec, \"getDefaultProvider\");\n\n// node_modules/ethers/lib.esm/providers/signer-noncemanager.js\nvar ei = class r extends at {\n  static {\n    a(this, \"NonceManager\");\n  }\n  /**\n   *  The Signer being managed.\n   */\n  signer;\n  #e;\n  #t;\n  /**\n   *  Creates a new **NonceManager** to manage %%signer%%.\n   */\n  constructor(e) {\n    super(e.provider), P(this, { signer: e }), this.#e = null, this.#t = 0;\n  }\n  async getAddress() {\n    return this.signer.getAddress();\n  }\n  connect(e) {\n    return new r(this.signer.connect(e));\n  }\n  async getNonce(e) {\n    if (e === \"pending\") {\n      this.#e == null && (this.#e = super.getNonce(\"pending\"));\n      let t = this.#t;\n      return await this.#e + t;\n    }\n    return super.getNonce(e);\n  }\n  /**\n   *  Manually increment the nonce. This may be useful when managng\n   *  offline transactions.\n   */\n  increment() {\n    this.#t++;\n  }\n  /**\n   *  Resets the nonce, causing the **NonceManager** to reload the current\n   *  nonce from the blockchain on the next transaction.\n   */\n  reset() {\n    this.#t = 0, this.#e = null;\n  }\n  async sendTransaction(e) {\n    let t = this.getNonce(\"pending\");\n    return this.increment(), e = await this.signer.populateTransaction(e), e.nonce = await t, await this.signer.sendTransaction(e);\n  }\n  signTransaction(e) {\n    return this.signer.signTransaction(e);\n  }\n  signMessage(e) {\n    return this.signer.signMessage(e);\n  }\n  signTypedData(e, t, n) {\n    return this.signer.signTypedData(e, t, n);\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-browser.js\nvar ti = class r extends Ys {\n  static {\n    a(this, \"BrowserProvider\");\n  }\n  #e;\n  #t;\n  /**\n   *  Connect to the %%ethereum%% provider, optionally forcing the\n   *  %%network%%.\n   */\n  constructor(e, t, n) {\n    let s = Object.assign({}, n ?? {}, { batchMaxCount: 1 });\n    h(e && e.request, \"invalid EIP-1193 provider\", \"ethereum\", e), super(t, s), this.#t = null, n && n.providerInfo && (this.#t = n.providerInfo), this.#e = async (i, o) => {\n      let c = { method: i, params: o };\n      this.emit(\"debug\", { action: \"sendEip1193Request\", payload: c });\n      try {\n        let f = await e.request(c);\n        return this.emit(\"debug\", { action: \"receiveEip1193Result\", result: f }), f;\n      } catch (f) {\n        let l = new Error(f.message);\n        throw l.code = f.code, l.data = f.data, l.payload = c, this.emit(\"debug\", { action: \"receiveEip1193Error\", error: l }), l;\n      }\n    };\n  }\n  get providerInfo() {\n    return this.#t;\n  }\n  async send(e, t) {\n    return await this._start(), await super.send(e, t);\n  }\n  async _send(e) {\n    h(!Array.isArray(e), \"EIP-1193 does not support batch request\", \"payload\", e);\n    try {\n      let t = await this.#e(e.method, e.params || []);\n      return [{ id: e.id, result: t }];\n    } catch (t) {\n      return [{\n        id: e.id,\n        error: { code: t.code, data: t.data, message: t.message }\n      }];\n    }\n  }\n  getRpcError(e, t) {\n    switch (t = JSON.parse(JSON.stringify(t)), t.error.code || -1) {\n      case 4001:\n        t.error.message = `ethers-user-denied: ${t.error.message}`;\n        break;\n      case 4200:\n        t.error.message = `ethers-unsupported: ${t.error.message}`;\n        break;\n    }\n    return super.getRpcError(e, t);\n  }\n  /**\n   *  Resolves to ``true`` if the provider manages the %%address%%.\n   */\n  async hasSigner(e) {\n    e == null && (e = 0);\n    let t = await this.send(\"eth_accounts\", []);\n    return typeof e == \"number\" ? t.length > e : (e = e.toLowerCase(), t.filter((n) => n.toLowerCase() === e).length !== 0);\n  }\n  async getSigner(e) {\n    if (e == null && (e = 0), !await this.hasSigner(e))\n      try {\n        await this.#e(\"eth_requestAccounts\", []);\n      } catch (t) {\n        let n = t.payload;\n        throw this.getRpcError(n, { id: n.id, error: t });\n      }\n    return await super.getSigner(e);\n  }\n  /**\n   *  Discover and connect to a Provider in the Browser using the\n   *  [[link-eip-6963]] discovery mechanism. If no providers are\n   *  present, ``null`` is resolved.\n   */\n  static async discover(e) {\n    if (e == null && (e = {}), e.provider)\n      return new r(e.provider);\n    let t = e.window ? e.window : typeof window < \"u\" ? window : null;\n    if (t == null)\n      return null;\n    let n = e.anyProvider;\n    if (n && t.ethereum)\n      return new r(t.ethereum);\n    if (!(\"addEventListener\" in t && \"dispatchEvent\" in t && \"removeEventListener\" in t))\n      return null;\n    let s = e.timeout ? e.timeout : 300;\n    return s === 0 ? null : await new Promise((i, o) => {\n      let c = [], f = /* @__PURE__ */ a((d) => {\n        c.push(d.detail), n && l();\n      }, \"addProvider\"), l = /* @__PURE__ */ a(() => {\n        if (clearTimeout(u), c.length)\n          if (e && e.filter) {\n            let d = e.filter(c.map((x) => Object.assign({}, x.info)));\n            if (d == null)\n              i(null);\n            else if (d instanceof r)\n              i(d);\n            else {\n              let x = null;\n              if (d.uuid && (x = c.filter((g) => d.uuid === g.info.uuid)[0]), x) {\n                let { provider: p, info: g } = x;\n                i(new r(p, void 0, {\n                  providerInfo: g\n                }));\n              } else\n                o(Q(\"filter returned unknown info\", \"UNSUPPORTED_OPERATION\", {\n                  value: d\n                }));\n            }\n          } else {\n            let { provider: d, info: x } = c[0];\n            i(new r(d, void 0, {\n              providerInfo: x\n            }));\n          }\n        else\n          i(null);\n        t.removeEventListener(\"eip6963:announceProvider\", f);\n      }, \"finalize\"), u = setTimeout(() => {\n        l();\n      }, s);\n      t.addEventListener(\"eip6963:announceProvider\", f), t.dispatchEvent(new Event(\"eip6963:requestProvider\"));\n    });\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-blockscout.js\nfunction Cp(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"https://eth.blockscout.com/api/eth-rpc\";\n    case \"sepolia\":\n      return \"https://eth-sepolia.blockscout.com/api/eth-rpc\";\n    case \"holesky\":\n      return \"https://eth-holesky.blockscout.com/api/eth-rpc\";\n    case \"classic\":\n      return \"https://etc.blockscout.com/api/eth-rpc\";\n    case \"arbitrum\":\n      return \"https://arbitrum.blockscout.com/api/eth-rpc\";\n    case \"base\":\n      return \"https://base.blockscout.com/api/eth-rpc\";\n    case \"base-sepolia\":\n      return \"https://base-sepolia.blockscout.com/api/eth-rpc\";\n    case \"matic\":\n      return \"https://polygon.blockscout.com/api/eth-rpc\";\n    case \"optimism\":\n      return \"https://optimism.blockscout.com/api/eth-rpc\";\n    case \"optimism-sepolia\":\n      return \"https://optimism-sepolia.blockscout.com/api/eth-rpc\";\n    case \"xdai\":\n      return \"https://gnosis.blockscout.com/api/eth-rpc\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(Cp, \"getUrl\");\nvar ri = class r extends de {\n  static {\n    a(this, \"BlockscoutProvider\");\n  }\n  /**\n   *  The API key.\n   */\n  apiKey;\n  /**\n   *  Creates a new **BlockscoutProvider**.\n   */\n  constructor(e, t) {\n    e == null && (e = \"mainnet\");\n    let n = J.from(e);\n    t == null && (t = null);\n    let s = r.getRequest(n);\n    super(s, n, { staticNetwork: n }), P(this, { apiKey: t });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.apiKey);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  isCommunityResource() {\n    return this.apiKey === null;\n  }\n  getRpcRequest(e) {\n    let t = super.getRpcRequest(e);\n    return t && t.method === \"eth_estimateGas\" && t.args.length == 1 && (t.args = t.args.slice(), t.args.push(\"latest\")), t;\n  }\n  getRpcError(e, t) {\n    let n = t ? t.error : null;\n    if (n && n.code === -32015 && !z(n.data || \"\", !0)) {\n      let s = {\n        \"assert(false)\": \"01\",\n        \"arithmetic underflow or overflow\": \"11\",\n        \"division or modulo by zero\": \"12\",\n        \"out-of-bounds array access; popping on an empty array\": \"31\",\n        \"out-of-bounds access of an array or bytesN\": \"32\"\n      }, i = \"\";\n      n.message === \"VM execution error.\" ? i = s[n.data] || \"\" : s[n.message || \"\"] && (i = s[n.message || \"\"]), i && (n.message += ` (reverted: ${n.data})`, n.data = \"0x4e487b7100000000000000000000000000000000000000000000000000000000000000\" + i);\n    } else n && n.code === -32e3 && n.message === \"wrong transaction nonce\" && (n.message += \" (nonce too low)\");\n    return super.getRpcError(e, t);\n  }\n  /**\n   *  Returns a prepared request for connecting to %%network%%\n   *  with %%apiKey%%.\n   */\n  static getRequest(e) {\n    let t = new ne(Cp(e.name));\n    return t.allowGzip = !0, t;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-pocket.js\nvar Io = \"62e1ad51b37b8e00394bda3b\";\nfunction Op(r) {\n  switch (r) {\n    case \"mainnet\":\n      return \"eth-mainnet.gateway.pokt.network\";\n    case \"goerli\":\n      return \"eth-goerli.gateway.pokt.network\";\n    case \"matic\":\n      return \"poly-mainnet.gateway.pokt.network\";\n    case \"matic-mumbai\":\n      return \"polygon-mumbai-rpc.gateway.pokt.network\";\n  }\n  h(!1, \"unsupported network\", \"network\", r);\n}\na(Op, \"getHost\");\nvar ni = class r extends de {\n  static {\n    a(this, \"PocketProvider\");\n  }\n  /**\n   *  The Application ID for the Pocket connection.\n   */\n  applicationId;\n  /**\n   *  The Application Secret for making authenticated requests\n   *  to the Pocket connection.\n   */\n  applicationSecret;\n  /**\n   *  Create a new **PocketProvider**.\n   *\n   *  By default connecting to ``mainnet`` with a highly throttled\n   *  API key.\n   */\n  constructor(e, t, n) {\n    e == null && (e = \"mainnet\");\n    let s = J.from(e);\n    t == null && (t = Io), n == null && (n = null);\n    let i = { staticNetwork: s }, o = r.getRequest(s, t, n);\n    super(o, s, i), P(this, { applicationId: t, applicationSecret: n });\n  }\n  _getProvider(e) {\n    try {\n      return new r(e, this.applicationId, this.applicationSecret);\n    } catch {\n    }\n    return super._getProvider(e);\n  }\n  /**\n   *  Returns a prepared request for connecting to %%network%% with\n   *  %%applicationId%%.\n   */\n  static getRequest(e, t, n) {\n    t == null && (t = Io);\n    let s = new ne(`https://${Op(e.name)}/v1/lb/${t}`);\n    return s.allowGzip = !0, n && s.setCredentials(\"\", n), t === Io && (s.retryFunc = async (i, o, c) => (Ue(\"PocketProvider\"), !0)), s;\n  }\n  isCommunityResource() {\n    return this.applicationId === Io;\n  }\n};\n\n// node_modules/ethers/lib.esm/providers/provider-ipcsocket-browser.js\nvar Pc = void 0;\n\n// node_modules/ethers/lib.esm/wallet/base-wallet.js\nvar ar = class r extends at {\n  static {\n    a(this, \"BaseWallet\");\n  }\n  /**\n   *  The wallet address.\n   */\n  address;\n  #e;\n  /**\n   *  Creates a new BaseWallet for %%privateKey%%, optionally\n   *  connected to %%provider%%.\n   *\n   *  If %%provider%% is not specified, only offline methods can\n   *  be used.\n   */\n  constructor(e, t) {\n    super(t), h(e && typeof e.sign == \"function\", \"invalid private key\", \"privateKey\", \"[ REDACTED ]\"), this.#e = e;\n    let n = Nt(this.signingKey.publicKey);\n    P(this, { address: n });\n  }\n  // Store private values behind getters to reduce visibility\n  // in console.log\n  /**\n   *  The [[SigningKey]] used for signing payloads.\n   */\n  get signingKey() {\n    return this.#e;\n  }\n  /**\n   *  The private key for this wallet.\n   */\n  get privateKey() {\n    return this.signingKey.privateKey;\n  }\n  async getAddress() {\n    return this.address;\n  }\n  connect(e) {\n    return new r(this.#e, e);\n  }\n  async signTransaction(e) {\n    e = it(e);\n    let { to: t, from: n } = await oe({\n      to: e.to ? le(e.to, this) : void 0,\n      from: e.from ? le(e.from, this) : void 0\n    });\n    t != null && (e.to = t), n != null && (e.from = n), e.from != null && (h(U(e.from) === this.address, \"transaction from address mismatch\", \"tx.from\", e.from), delete e.from);\n    let s = Xe.from(e);\n    return s.signature = this.signingKey.sign(s.unsignedHash), s.serialized;\n  }\n  async signMessage(e) {\n    return this.signMessageSync(e);\n  }\n  // @TODO: Add a secialized signTx and signTyped sync that enforces\n  // all parameters are known?\n  /**\n   *  Returns the signature for %%message%% signed with this wallet.\n   */\n  signMessageSync(e) {\n    return this.signingKey.sign(ts(e)).serialized;\n  }\n  /**\n   *  Returns the Authorization for %%auth%%.\n   */\n  authorizeSync(e) {\n    h(typeof e.address == \"string\", \"invalid address for authorizeSync\", \"auth.address\", e);\n    let t = this.signingKey.sign(qn(e));\n    return Object.assign({}, {\n      address: U(e.address),\n      nonce: k(e.nonce || 0),\n      chainId: k(e.chainId || 0)\n    }, { signature: t });\n  }\n  /**\n   *  Resolves to the Authorization for %%auth%%.\n   */\n  async authorize(e) {\n    return e = Object.assign({}, e, {\n      address: await le(e.address, this)\n    }), this.authorizeSync(await this.populateAuthorization(e));\n  }\n  async signTypedData(e, t, n) {\n    let s = await nt.resolveNames(e, t, n, async (i) => {\n      b(this.provider != null, \"cannot resolve ENS names without a provider\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"resolveName\",\n        info: { name: i }\n      });\n      let o = await this.provider.resolveName(i);\n      return b(o != null, \"unconfigured ENS name\", \"UNCONFIGURED_NAME\", {\n        value: i\n      }), o;\n    });\n    return this.signingKey.sign(nt.hash(s.domain, t, s.value)).serialized;\n  }\n};\n\n// node_modules/ethers/lib.esm/wordlists/decode-owl.js\nvar Co = \" !#$%&'()*+,-./<=>?@[]^_`{|}~\", Sp = /^[a-z]*$/i;\nfunction uu(r, e) {\n  let t = 97;\n  return r.reduce((n, s) => (s === e ? t++ : s.match(Sp) ? n.push(String.fromCharCode(t) + s) : (t = 97, n.push(s)), n), []);\n}\na(uu, \"unfold\");\nfunction Up(r, e) {\n  for (let s = Co.length - 1; s >= 0; s--)\n    r = r.split(Co[s]).join(e.substring(2 * s, 2 * s + 2));\n  let t = [], n = r.replace(/(:|([0-9])|([A-Z][a-z]*))/g, (s, i, o, c) => {\n    if (o)\n      for (let f = parseInt(o); f >= 0; f--)\n        t.push(\";\");\n    else\n      t.push(i.toLowerCase());\n    return \"\";\n  });\n  if (n)\n    throw new Error(`leftovers: ${JSON.stringify(n)}`);\n  return uu(uu(t, \";\"), \":\");\n}\na(Up, \"decode\");\nfunction Oo(r) {\n  return h(r[0] === \"0\", \"unsupported auwl data\", \"data\", r), Up(r.substring(1 + 2 * Co.length), r.substring(1, 1 + 2 * Co.length));\n}\na(Oo, \"decodeOwl\");\n\n// node_modules/ethers/lib.esm/wordlists/wordlist.js\nvar Bn = class {\n  static {\n    a(this, \"Wordlist\");\n  }\n  locale;\n  /**\n   *  Creates a new Wordlist instance.\n   *\n   *  Sub-classes MUST call this if they provide their own constructor,\n   *  passing in the locale string of the language.\n   *\n   *  Generally there is no need to create instances of a Wordlist,\n   *  since each language-specific Wordlist creates an instance and\n   *  there is no state kept internally, so they are safe to share.\n   */\n  constructor(e) {\n    P(this, { locale: e });\n  }\n  /**\n   *  Sub-classes may override this to provide a language-specific\n   *  method for spliting %%phrase%% into individual words.\n   *\n   *  By default, %%phrase%% is split using any sequences of\n   *  white-space as defined by regular expressions (i.e. ``/\\s+/``).\n   */\n  split(e) {\n    return e.toLowerCase().split(/\\s+/g);\n  }\n  /**\n   *  Sub-classes may override this to provider a language-specific\n   *  method for joining %%words%% into a phrase.\n   *\n   *  By default, %%words%% are joined by a single space.\n   */\n  join(e) {\n    return e.join(\" \");\n  }\n};\n\n// node_modules/ethers/lib.esm/wordlists/wordlist-owl.js\nvar cr = class extends Bn {\n  static {\n    a(this, \"WordlistOwl\");\n  }\n  #e;\n  #t;\n  /**\n   *  Creates a new Wordlist for %%locale%% using the OWL %%data%%\n   *  and validated against the %%checksum%%.\n   */\n  constructor(e, t, n) {\n    super(e), this.#e = t, this.#t = n, this.#r = null;\n  }\n  /**\n   *  The OWL-encoded data.\n   */\n  get _data() {\n    return this.#e;\n  }\n  /**\n   *  Decode all the words for the wordlist.\n   */\n  _decodeWords() {\n    return Oo(this.#e);\n  }\n  #r;\n  #n() {\n    if (this.#r == null) {\n      let e = this._decodeWords();\n      if (Oe(e.join(`\n`) + `\n`) !== this.#t)\n        throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);\n      this.#r = e;\n    }\n    return this.#r;\n  }\n  getWord(e) {\n    let t = this.#n();\n    return h(e >= 0 && e < t.length, `invalid word index: ${e}`, \"index\", e), t[e];\n  }\n  getWordIndex(e) {\n    return this.#n().indexOf(e);\n  }\n};\n\n// node_modules/ethers/lib.esm/wordlists/lang-en.js\nvar Lp = \"0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO\", Dp = \"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60\", kc = null, je = class r extends cr {\n  static {\n    a(this, \"LangEn\");\n  }\n  /**\n   *  Creates a new instance of the English language Wordlist.\n   *\n   *  This should be unnecessary most of the time as the exported\n   *  [[langEn]] should suffice.\n   *\n   *  @_ignore:\n   */\n  constructor() {\n    super(\"en\", Lp, Dp);\n  }\n  /**\n   *  Returns a singleton instance of a ``LangEn``, creating it\n   *  if this is the first time being called.\n   */\n  static wordlist() {\n    return kc == null && (kc = new r()), kc;\n  }\n};\n\n// node_modules/ethers/lib.esm/wallet/mnemonic.js\nfunction du(r) {\n  return (1 << r) - 1 << 8 - r & 255;\n}\na(du, \"getUpperMask\");\nfunction Fp(r) {\n  return (1 << r) - 1 & 255;\n}\na(Fp, \"getLowerMask\");\nfunction Nc(r, e) {\n  Vr(\"NFKD\"), e == null && (e = je.wordlist());\n  let t = e.split(r);\n  h(t.length % 3 === 0 && t.length >= 12 && t.length <= 24, \"invalid mnemonic length\", \"mnemonic\", \"[ REDACTED ]\");\n  let n = new Uint8Array(Math.ceil(11 * t.length / 8)), s = 0;\n  for (let l = 0; l < t.length; l++) {\n    let u = e.getWordIndex(t[l].normalize(\"NFKD\"));\n    h(u >= 0, `invalid mnemonic word at index ${l}`, \"mnemonic\", \"[ REDACTED ]\");\n    for (let d = 0; d < 11; d++)\n      u & 1 << 10 - d && (n[s >> 3] |= 1 << 7 - s % 8), s++;\n  }\n  let i = 32 * t.length / 3, o = t.length / 3, c = du(o), f = E(ye(n.slice(0, i / 8)))[0] & c;\n  return h(f === (n[n.length - 1] & c), \"invalid mnemonic checksum\", \"mnemonic\", \"[ REDACTED ]\"), w(n.slice(0, i / 8));\n}\na(Nc, \"mnemonicToEntropy\");\nfunction Bc(r, e) {\n  h(r.length % 4 === 0 && r.length >= 16 && r.length <= 32, \"invalid entropy size\", \"entropy\", \"[ REDACTED ]\"), e == null && (e = je.wordlist());\n  let t = [0], n = 11;\n  for (let o = 0; o < r.length; o++)\n    n > 8 ? (t[t.length - 1] <<= 8, t[t.length - 1] |= r[o], n -= 8) : (t[t.length - 1] <<= n, t[t.length - 1] |= r[o] >> 8 - n, t.push(r[o] & Fp(8 - n)), n += 3);\n  let s = r.length / 4, i = parseInt(ye(r).substring(2, 4), 16) & du(s);\n  return t[t.length - 1] <<= s, t[t.length - 1] |= i >> 8 - s, e.join(t.map((o) => e.getWord(o)));\n}\na(Bc, \"entropyToMnemonic\");\nvar Rc = {}, Ft = class r {\n  static {\n    a(this, \"Mnemonic\");\n  }\n  /**\n   *  The mnemonic phrase of 12, 15, 18, 21 or 24 words.\n   *\n   *  Use the [[wordlist]] ``split`` method to get the individual words.\n   */\n  phrase;\n  /**\n   *  The password used for this mnemonic. If no password is used this\n   *  is the empty string (i.e. ``\"\"``) as per the specification.\n   */\n  password;\n  /**\n   *  The wordlist for this mnemonic.\n   */\n  wordlist;\n  /**\n   *  The underlying entropy which the mnemonic encodes.\n   */\n  entropy;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i) {\n    s == null && (s = \"\"), i == null && (i = je.wordlist()), ve(e, Rc, \"Mnemonic\"), P(this, { phrase: n, password: s, wordlist: i, entropy: t });\n  }\n  /**\n   *  Returns the seed for the mnemonic.\n   */\n  computeSeed() {\n    let e = re(\"mnemonic\" + this.password, \"NFKD\");\n    return ze(re(this.phrase, \"NFKD\"), e, 2048, 64, \"sha512\");\n  }\n  /**\n   *  Creates a new Mnemonic for the %%phrase%%.\n   *\n   *  The default %%password%% is the empty string and the default\n   *  wordlist is the [English wordlists](LangEn).\n   */\n  static fromPhrase(e, t, n) {\n    let s = Nc(e, n);\n    return e = Bc(E(s), n), new r(Rc, s, e, t, n);\n  }\n  /**\n   *  Create a new **Mnemonic** from the %%entropy%%.\n   *\n   *  The default %%password%% is the empty string and the default\n   *  wordlist is the [English wordlists](LangEn).\n   */\n  static fromEntropy(e, t, n) {\n    let s = E(e, \"entropy\"), i = Bc(s, n);\n    return new r(Rc, w(s), i, t, n);\n  }\n  /**\n   *  Returns the phrase for %%mnemonic%%.\n   */\n  static entropyToPhrase(e, t) {\n    let n = E(e, \"entropy\");\n    return Bc(n, t);\n  }\n  /**\n   *  Returns the entropy for %%phrase%%.\n   */\n  static phraseToEntropy(e, t) {\n    return Nc(e, t);\n  }\n  /**\n   *  Returns true if %%phrase%% is a valid [[link-bip-39]] phrase.\n   *\n   *  This checks all the provided words belong to the %%wordlist%%,\n   *  that the length is valid and the checksum is correct.\n   */\n  static isValidMnemonic(e, t) {\n    try {\n      return Nc(e, t), !0;\n    } catch {\n    }\n    return !1;\n  }\n};\n\n// node_modules/aes-js/lib.esm/aes.js\nvar Le = function(r, e, t, n) {\n  if (t === \"a\" && !n) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof e == \"function\" ? r !== e || !n : !e.has(r)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return t === \"m\" ? n : t === \"a\" ? n.call(r) : n ? n.value : e.get(r);\n}, vc = function(r, e, t, n, s) {\n  if (n === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (n === \"a\" && !s) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof e == \"function\" ? r !== e || !s : !e.has(r)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return n === \"a\" ? s.call(r, t) : s ? s.value = t : e.set(r, t), t;\n}, Uo, ft, Mt, Mp = { 16: 10, 24: 12, 32: 14 }, Gp = [1, 2, 4, 8, 16, 32, 64, 128, 27, 54, 108, 216, 171, 77, 154, 47, 94, 188, 99, 198, 151, 53, 106, 212, 179, 125, 250, 239, 197, 145], ct = [99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22], So = [82, 9, 106, 213, 48, 54, 165, 56, 191, 64, 163, 158, 129, 243, 215, 251, 124, 227, 57, 130, 155, 47, 255, 135, 52, 142, 67, 68, 196, 222, 233, 203, 84, 123, 148, 50, 166, 194, 35, 61, 238, 76, 149, 11, 66, 250, 195, 78, 8, 46, 161, 102, 40, 217, 36, 178, 118, 91, 162, 73, 109, 139, 209, 37, 114, 248, 246, 100, 134, 104, 152, 22, 212, 164, 92, 204, 93, 101, 182, 146, 108, 112, 72, 80, 253, 237, 185, 218, 94, 21, 70, 87, 167, 141, 157, 132, 144, 216, 171, 0, 140, 188, 211, 10, 247, 228, 88, 5, 184, 179, 69, 6, 208, 44, 30, 143, 202, 63, 15, 2, 193, 175, 189, 3, 1, 19, 138, 107, 58, 145, 17, 65, 79, 103, 220, 234, 151, 242, 207, 206, 240, 180, 230, 115, 150, 172, 116, 34, 231, 173, 53, 133, 226, 249, 55, 232, 28, 117, 223, 110, 71, 241, 26, 113, 29, 41, 197, 137, 111, 183, 98, 14, 170, 24, 190, 27, 252, 86, 62, 75, 198, 210, 121, 32, 154, 219, 192, 254, 120, 205, 90, 244, 31, 221, 168, 51, 136, 7, 199, 49, 177, 18, 16, 89, 39, 128, 236, 95, 96, 81, 127, 169, 25, 181, 74, 13, 45, 229, 122, 159, 147, 201, 156, 239, 160, 224, 59, 77, 174, 42, 245, 176, 200, 235, 187, 60, 131, 83, 153, 97, 23, 43, 4, 126, 186, 119, 214, 38, 225, 105, 20, 99, 85, 33, 12, 125], Hp = [3328402341, 4168907908, 4000806809, 4135287693, 4294111757, 3597364157, 3731845041, 2445657428, 1613770832, 33620227, 3462883241, 1445669757, 3892248089, 3050821474, 1303096294, 3967186586, 2412431941, 528646813, 2311702848, 4202528135, 4026202645, 2992200171, 2387036105, 4226871307, 1101901292, 3017069671, 1604494077, 1169141738, 597466303, 1403299063, 3832705686, 2613100635, 1974974402, 3791519004, 1033081774, 1277568618, 1815492186, 2118074177, 4126668546, 2211236943, 1748251740, 1369810420, 3521504564, 4193382664, 3799085459, 2883115123, 1647391059, 706024767, 134480908, 2512897874, 1176707941, 2646852446, 806885416, 932615841, 168101135, 798661301, 235341577, 605164086, 461406363, 3756188221, 3454790438, 1311188841, 2142417613, 3933566367, 302582043, 495158174, 1479289972, 874125870, 907746093, 3698224818, 3025820398, 1537253627, 2756858614, 1983593293, 3084310113, 2108928974, 1378429307, 3722699582, 1580150641, 327451799, 2790478837, 3117535592, 0, 3253595436, 1075847264, 3825007647, 2041688520, 3059440621, 3563743934, 2378943302, 1740553945, 1916352843, 2487896798, 2555137236, 2958579944, 2244988746, 3151024235, 3320835882, 1336584933, 3992714006, 2252555205, 2588757463, 1714631509, 293963156, 2319795663, 3925473552, 67240454, 4269768577, 2689618160, 2017213508, 631218106, 1269344483, 2723238387, 1571005438, 2151694528, 93294474, 1066570413, 563977660, 1882732616, 4059428100, 1673313503, 2008463041, 2950355573, 1109467491, 537923632, 3858759450, 4260623118, 3218264685, 2177748300, 403442708, 638784309, 3287084079, 3193921505, 899127202, 2286175436, 773265209, 2479146071, 1437050866, 4236148354, 2050833735, 3362022572, 3126681063, 840505643, 3866325909, 3227541664, 427917720, 2655997905, 2749160575, 1143087718, 1412049534, 999329963, 193497219, 2353415882, 3354324521, 1807268051, 672404540, 2816401017, 3160301282, 369822493, 2916866934, 3688947771, 1681011286, 1949973070, 336202270, 2454276571, 201721354, 1210328172, 3093060836, 2680341085, 3184776046, 1135389935, 3294782118, 965841320, 831886756, 3554993207, 4068047243, 3588745010, 2345191491, 1849112409, 3664604599, 26054028, 2983581028, 2622377682, 1235855840, 3630984372, 2891339514, 4092916743, 3488279077, 3395642799, 4101667470, 1202630377, 268961816, 1874508501, 4034427016, 1243948399, 1546530418, 941366308, 1470539505, 1941222599, 2546386513, 3421038627, 2715671932, 3899946140, 1042226977, 2521517021, 1639824860, 227249030, 260737669, 3765465232, 2084453954, 1907733956, 3429263018, 2420656344, 100860677, 4160157185, 470683154, 3261161891, 1781871967, 2924959737, 1773779408, 394692241, 2579611992, 974986535, 664706745, 3655459128, 3958962195, 731420851, 571543859, 3530123707, 2849626480, 126783113, 865375399, 765172662, 1008606754, 361203602, 3387549984, 2278477385, 2857719295, 1344809080, 2782912378, 59542671, 1503764984, 160008576, 437062935, 1707065306, 3622233649, 2218934982, 3496503480, 2185314755, 697932208, 1512910199, 504303377, 2075177163, 2824099068, 1841019862, 739644986], _p = [2781242211, 2230877308, 2582542199, 2381740923, 234877682, 3184946027, 2984144751, 1418839493, 1348481072, 50462977, 2848876391, 2102799147, 434634494, 1656084439, 3863849899, 2599188086, 1167051466, 2636087938, 1082771913, 2281340285, 368048890, 3954334041, 3381544775, 201060592, 3963727277, 1739838676, 4250903202, 3930435503, 3206782108, 4149453988, 2531553906, 1536934080, 3262494647, 484572669, 2923271059, 1783375398, 1517041206, 1098792767, 49674231, 1334037708, 1550332980, 4098991525, 886171109, 150598129, 2481090929, 1940642008, 1398944049, 1059722517, 201851908, 1385547719, 1699095331, 1587397571, 674240536, 2704774806, 252314885, 3039795866, 151914247, 908333586, 2602270848, 1038082786, 651029483, 1766729511, 3447698098, 2682942837, 454166793, 2652734339, 1951935532, 775166490, 758520603, 3000790638, 4004797018, 4217086112, 4137964114, 1299594043, 1639438038, 3464344499, 2068982057, 1054729187, 1901997871, 2534638724, 4121318227, 1757008337, 0, 750906861, 1614815264, 535035132, 3363418545, 3988151131, 3201591914, 1183697867, 3647454910, 1265776953, 3734260298, 3566750796, 3903871064, 1250283471, 1807470800, 717615087, 3847203498, 384695291, 3313910595, 3617213773, 1432761139, 2484176261, 3481945413, 283769337, 100925954, 2180939647, 4037038160, 1148730428, 3123027871, 3813386408, 4087501137, 4267549603, 3229630528, 2315620239, 2906624658, 3156319645, 1215313976, 82966005, 3747855548, 3245848246, 1974459098, 1665278241, 807407632, 451280895, 251524083, 1841287890, 1283575245, 337120268, 891687699, 801369324, 3787349855, 2721421207, 3431482436, 959321879, 1469301956, 4065699751, 2197585534, 1199193405, 2898814052, 3887750493, 724703513, 2514908019, 2696962144, 2551808385, 3516813135, 2141445340, 1715741218, 2119445034, 2872807568, 2198571144, 3398190662, 700968686, 3547052216, 1009259540, 2041044702, 3803995742, 487983883, 1991105499, 1004265696, 1449407026, 1316239930, 504629770, 3683797321, 168560134, 1816667172, 3837287516, 1570751170, 1857934291, 4014189740, 2797888098, 2822345105, 2754712981, 936633572, 2347923833, 852879335, 1133234376, 1500395319, 3084545389, 2348912013, 1689376213, 3533459022, 3762923945, 3034082412, 4205598294, 133428468, 634383082, 2949277029, 2398386810, 3913789102, 403703816, 3580869306, 2297460856, 1867130149, 1918643758, 607656988, 4049053350, 3346248884, 1368901318, 600565992, 2090982877, 2632479860, 557719327, 3717614411, 3697393085, 2249034635, 2232388234, 2430627952, 1115438654, 3295786421, 2865522278, 3633334344, 84280067, 33027830, 303828494, 2747425121, 1600795957, 4188952407, 3496589753, 2434238086, 1486471617, 658119965, 3106381470, 953803233, 334231800, 3005978776, 857870609, 3151128937, 1890179545, 2298973838, 2805175444, 3056442267, 574365214, 2450884487, 550103529, 1233637070, 4289353045, 2018519080, 2057691103, 2399374476, 4166623649, 2148108681, 387583245, 3664101311, 836232934, 3330556482, 3100665960, 3280093505, 2955516313, 2002398509, 287182607, 3413881008, 4238890068, 3597515707, 975967766], zp = [1671808611, 2089089148, 2006576759, 2072901243, 4061003762, 1807603307, 1873927791, 3310653893, 810573872, 16974337, 1739181671, 729634347, 4263110654, 3613570519, 2883997099, 1989864566, 3393556426, 2191335298, 3376449993, 2106063485, 4195741690, 1508618841, 1204391495, 4027317232, 2917941677, 3563566036, 2734514082, 2951366063, 2629772188, 2767672228, 1922491506, 3227229120, 3082974647, 4246528509, 2477669779, 644500518, 911895606, 1061256767, 4144166391, 3427763148, 878471220, 2784252325, 3845444069, 4043897329, 1905517169, 3631459288, 827548209, 356461077, 67897348, 3344078279, 593839651, 3277757891, 405286936, 2527147926, 84871685, 2595565466, 118033927, 305538066, 2157648768, 3795705826, 3945188843, 661212711, 2999812018, 1973414517, 152769033, 2208177539, 745822252, 439235610, 455947803, 1857215598, 1525593178, 2700827552, 1391895634, 994932283, 3596728278, 3016654259, 695947817, 3812548067, 795958831, 2224493444, 1408607827, 3513301457, 0, 3979133421, 543178784, 4229948412, 2982705585, 1542305371, 1790891114, 3410398667, 3201918910, 961245753, 1256100938, 1289001036, 1491644504, 3477767631, 3496721360, 4012557807, 2867154858, 4212583931, 1137018435, 1305975373, 861234739, 2241073541, 1171229253, 4178635257, 33948674, 2139225727, 1357946960, 1011120188, 2679776671, 2833468328, 1374921297, 2751356323, 1086357568, 2408187279, 2460827538, 2646352285, 944271416, 4110742005, 3168756668, 3066132406, 3665145818, 560153121, 271589392, 4279952895, 4077846003, 3530407890, 3444343245, 202643468, 322250259, 3962553324, 1608629855, 2543990167, 1154254916, 389623319, 3294073796, 2817676711, 2122513534, 1028094525, 1689045092, 1575467613, 422261273, 1939203699, 1621147744, 2174228865, 1339137615, 3699352540, 577127458, 712922154, 2427141008, 2290289544, 1187679302, 3995715566, 3100863416, 339486740, 3732514782, 1591917662, 186455563, 3681988059, 3762019296, 844522546, 978220090, 169743370, 1239126601, 101321734, 611076132, 1558493276, 3260915650, 3547250131, 2901361580, 1655096418, 2443721105, 2510565781, 3828863972, 2039214713, 3878868455, 3359869896, 928607799, 1840765549, 2374762893, 3580146133, 1322425422, 2850048425, 1823791212, 1459268694, 4094161908, 3928346602, 1706019429, 2056189050, 2934523822, 135794696, 3134549946, 2022240376, 628050469, 779246638, 472135708, 2800834470, 3032970164, 3327236038, 3894660072, 3715932637, 1956440180, 522272287, 1272813131, 3185336765, 2340818315, 2323976074, 1888542832, 1044544574, 3049550261, 1722469478, 1222152264, 50660867, 4127324150, 236067854, 1638122081, 895445557, 1475980887, 3117443513, 2257655686, 3243809217, 489110045, 2662934430, 3778599393, 4162055160, 2561878936, 288563729, 1773916777, 3648039385, 2391345038, 2493985684, 2612407707, 505560094, 2274497927, 3911240169, 3460925390, 1442818645, 678973480, 3749357023, 2358182796, 2717407649, 2306869641, 219617805, 3218761151, 3862026214, 1120306242, 1756942440, 1103331905, 2578459033, 762796589, 252780047, 2966125488, 1425844308, 3151392187, 372911126], Vp = [1667474886, 2088535288, 2004326894, 2071694838, 4075949567, 1802223062, 1869591006, 3318043793, 808472672, 16843522, 1734846926, 724270422, 4278065639, 3621216949, 2880169549, 1987484396, 3402253711, 2189597983, 3385409673, 2105378810, 4210693615, 1499065266, 1195886990, 4042263547, 2913856577, 3570689971, 2728590687, 2947541573, 2627518243, 2762274643, 1920112356, 3233831835, 3082273397, 4261223649, 2475929149, 640051788, 909531756, 1061110142, 4160160501, 3435941763, 875846760, 2779116625, 3857003729, 4059105529, 1903268834, 3638064043, 825316194, 353713962, 67374088, 3351728789, 589522246, 3284360861, 404236336, 2526454071, 84217610, 2593830191, 117901582, 303183396, 2155911963, 3806477791, 3958056653, 656894286, 2998062463, 1970642922, 151591698, 2206440989, 741110872, 437923380, 454765878, 1852748508, 1515908788, 2694904667, 1381168804, 993742198, 3604373943, 3014905469, 690584402, 3823320797, 791638366, 2223281939, 1398011302, 3520161977, 0, 3991743681, 538992704, 4244381667, 2981218425, 1532751286, 1785380564, 3419096717, 3200178535, 960056178, 1246420628, 1280103576, 1482221744, 3486468741, 3503319995, 4025428677, 2863326543, 4227536621, 1128514950, 1296947098, 859002214, 2240123921, 1162203018, 4193849577, 33687044, 2139062782, 1347481760, 1010582648, 2678045221, 2829640523, 1364325282, 2745433693, 1077985408, 2408548869, 2459086143, 2644360225, 943212656, 4126475505, 3166494563, 3065430391, 3671750063, 555836226, 269496352, 4294908645, 4092792573, 3537006015, 3452783745, 202118168, 320025894, 3974901699, 1600119230, 2543297077, 1145359496, 387397934, 3301201811, 2812801621, 2122220284, 1027426170, 1684319432, 1566435258, 421079858, 1936954854, 1616945344, 2172753945, 1330631070, 3705438115, 572679748, 707427924, 2425400123, 2290647819, 1179044492, 4008585671, 3099120491, 336870440, 3739122087, 1583276732, 185277718, 3688593069, 3772791771, 842159716, 976899700, 168435220, 1229577106, 101059084, 606366792, 1549591736, 3267517855, 3553849021, 2897014595, 1650632388, 2442242105, 2509612081, 3840161747, 2038008818, 3890688725, 3368567691, 926374254, 1835907034, 2374863873, 3587531953, 1313788572, 2846482505, 1819063512, 1448540844, 4109633523, 3941213647, 1701162954, 2054852340, 2930698567, 134748176, 3132806511, 2021165296, 623210314, 774795868, 471606328, 2795958615, 3031746419, 3334885783, 3907527627, 3722280097, 1953799400, 522133822, 1263263126, 3183336545, 2341176845, 2324333839, 1886425312, 1044267644, 3048588401, 1718004428, 1212733584, 50529542, 4143317495, 235803164, 1633788866, 892690282, 1465383342, 3115962473, 2256965911, 3250673817, 488449850, 2661202215, 3789633753, 4177007595, 2560144171, 286339874, 1768537042, 3654906025, 2391705863, 2492770099, 2610673197, 505291324, 2273808917, 3924369609, 3469625735, 1431699370, 673740880, 3755965093, 2358021891, 2711746649, 2307489801, 218961690, 3217021541, 3873845719, 1111672452, 1751693520, 1094828930, 2576986153, 757954394, 252645662, 2964376443, 1414855848, 3149649517, 370555436], Kp = [1374988112, 2118214995, 437757123, 975658646, 1001089995, 530400753, 2902087851, 1273168787, 540080725, 2910219766, 2295101073, 4110568485, 1340463100, 3307916247, 641025152, 3043140495, 3736164937, 632953703, 1172967064, 1576976609, 3274667266, 2169303058, 2370213795, 1809054150, 59727847, 361929877, 3211623147, 2505202138, 3569255213, 1484005843, 1239443753, 2395588676, 1975683434, 4102977912, 2572697195, 666464733, 3202437046, 4035489047, 3374361702, 2110667444, 1675577880, 3843699074, 2538681184, 1649639237, 2976151520, 3144396420, 4269907996, 4178062228, 1883793496, 2403728665, 2497604743, 1383856311, 2876494627, 1917518562, 3810496343, 1716890410, 3001755655, 800440835, 2261089178, 3543599269, 807962610, 599762354, 33778362, 3977675356, 2328828971, 2809771154, 4077384432, 1315562145, 1708848333, 101039829, 3509871135, 3299278474, 875451293, 2733856160, 92987698, 2767645557, 193195065, 1080094634, 1584504582, 3178106961, 1042385657, 2531067453, 3711829422, 1306967366, 2438237621, 1908694277, 67556463, 1615861247, 429456164, 3602770327, 2302690252, 1742315127, 2968011453, 126454664, 3877198648, 2043211483, 2709260871, 2084704233, 4169408201, 0, 159417987, 841739592, 504459436, 1817866830, 4245618683, 260388950, 1034867998, 908933415, 168810852, 1750902305, 2606453969, 607530554, 202008497, 2472011535, 3035535058, 463180190, 2160117071, 1641816226, 1517767529, 470948374, 3801332234, 3231722213, 1008918595, 303765277, 235474187, 4069246893, 766945465, 337553864, 1475418501, 2943682380, 4003061179, 2743034109, 4144047775, 1551037884, 1147550661, 1543208500, 2336434550, 3408119516, 3069049960, 3102011747, 3610369226, 1113818384, 328671808, 2227573024, 2236228733, 3535486456, 2935566865, 3341394285, 496906059, 3702665459, 226906860, 2009195472, 733156972, 2842737049, 294930682, 1206477858, 2835123396, 2700099354, 1451044056, 573804783, 2269728455, 3644379585, 2362090238, 2564033334, 2801107407, 2776292904, 3669462566, 1068351396, 742039012, 1350078989, 1784663195, 1417561698, 4136440770, 2430122216, 775550814, 2193862645, 2673705150, 1775276924, 1876241833, 3475313331, 3366754619, 270040487, 3902563182, 3678124923, 3441850377, 1851332852, 3969562369, 2203032232, 3868552805, 2868897406, 566021896, 4011190502, 3135740889, 1248802510, 3936291284, 699432150, 832877231, 708780849, 3332740144, 899835584, 1951317047, 4236429990, 3767586992, 866637845, 4043610186, 1106041591, 2144161806, 395441711, 1984812685, 1139781709, 3433712980, 3835036895, 2664543715, 1282050075, 3240894392, 1181045119, 2640243204, 25965917, 4203181171, 4211818798, 3009879386, 2463879762, 3910161971, 1842759443, 2597806476, 933301370, 1509430414, 3943906441, 3467192302, 3076639029, 3776767469, 2051518780, 2631065433, 1441952575, 404016761, 1942435775, 1408749034, 1610459739, 3745345300, 2017778566, 3400528769, 3110650942, 941896748, 3265478751, 371049330, 3168937228, 675039627, 4279080257, 967311729, 135050206, 3635733660, 1683407248, 2076935265, 3576870512, 1215061108, 3501741890], Qp = [1347548327, 1400783205, 3273267108, 2520393566, 3409685355, 4045380933, 2880240216, 2471224067, 1428173050, 4138563181, 2441661558, 636813900, 4233094615, 3620022987, 2149987652, 2411029155, 1239331162, 1730525723, 2554718734, 3781033664, 46346101, 310463728, 2743944855, 3328955385, 3875770207, 2501218972, 3955191162, 3667219033, 768917123, 3545789473, 692707433, 1150208456, 1786102409, 2029293177, 1805211710, 3710368113, 3065962831, 401639597, 1724457132, 3028143674, 409198410, 2196052529, 1620529459, 1164071807, 3769721975, 2226875310, 486441376, 2499348523, 1483753576, 428819965, 2274680428, 3075636216, 598438867, 3799141122, 1474502543, 711349675, 129166120, 53458370, 2592523643, 2782082824, 4063242375, 2988687269, 3120694122, 1559041666, 730517276, 2460449204, 4042459122, 2706270690, 3446004468, 3573941694, 533804130, 2328143614, 2637442643, 2695033685, 839224033, 1973745387, 957055980, 2856345839, 106852767, 1371368976, 4181598602, 1033297158, 2933734917, 1179510461, 3046200461, 91341917, 1862534868, 4284502037, 605657339, 2547432937, 3431546947, 2003294622, 3182487618, 2282195339, 954669403, 3682191598, 1201765386, 3917234703, 3388507166, 0, 2198438022, 1211247597, 2887651696, 1315723890, 4227665663, 1443857720, 507358933, 657861945, 1678381017, 560487590, 3516619604, 975451694, 2970356327, 261314535, 3535072918, 2652609425, 1333838021, 2724322336, 1767536459, 370938394, 182621114, 3854606378, 1128014560, 487725847, 185469197, 2918353863, 3106780840, 3356761769, 2237133081, 1286567175, 3152976349, 4255350624, 2683765030, 3160175349, 3309594171, 878443390, 1988838185, 3704300486, 1756818940, 1673061617, 3403100636, 272786309, 1075025698, 545572369, 2105887268, 4174560061, 296679730, 1841768865, 1260232239, 4091327024, 3960309330, 3497509347, 1814803222, 2578018489, 4195456072, 575138148, 3299409036, 446754879, 3629546796, 4011996048, 3347532110, 3252238545, 4270639778, 915985419, 3483825537, 681933534, 651868046, 2755636671, 3828103837, 223377554, 2607439820, 1649704518, 3270937875, 3901806776, 1580087799, 4118987695, 3198115200, 2087309459, 2842678573, 3016697106, 1003007129, 2802849917, 1860738147, 2077965243, 164439672, 4100872472, 32283319, 2827177882, 1709610350, 2125135846, 136428751, 3874428392, 3652904859, 3460984630, 3572145929, 3593056380, 2939266226, 824852259, 818324884, 3224740454, 930369212, 2801566410, 2967507152, 355706840, 1257309336, 4148292826, 243256656, 790073846, 2373340630, 1296297904, 1422699085, 3756299780, 3818836405, 457992840, 3099667487, 2135319889, 77422314, 1560382517, 1945798516, 788204353, 1521706781, 1385356242, 870912086, 325965383, 2358957921, 2050466060, 2388260884, 2313884476, 4006521127, 901210569, 3990953189, 1014646705, 1503449823, 1062597235, 2031621326, 3212035895, 3931371469, 1533017514, 350174575, 2256028891, 2177544179, 1052338372, 741876788, 1606591296, 1914052035, 213705253, 2334669897, 1107234197, 1899603969, 3725069491, 2631447780, 2422494913, 1635502980, 1893020342, 1950903388, 1120974935], Jp = [2807058932, 1699970625, 2764249623, 1586903591, 1808481195, 1173430173, 1487645946, 59984867, 4199882800, 1844882806, 1989249228, 1277555970, 3623636965, 3419915562, 1149249077, 2744104290, 1514790577, 459744698, 244860394, 3235995134, 1963115311, 4027744588, 2544078150, 4190530515, 1608975247, 2627016082, 2062270317, 1507497298, 2200818878, 567498868, 1764313568, 3359936201, 2305455554, 2037970062, 1047239e3, 1910319033, 1337376481, 2904027272, 2892417312, 984907214, 1243112415, 830661914, 861968209, 2135253587, 2011214180, 2927934315, 2686254721, 731183368, 1750626376, 4246310725, 1820824798, 4172763771, 3542330227, 48394827, 2404901663, 2871682645, 671593195, 3254988725, 2073724613, 145085239, 2280796200, 2779915199, 1790575107, 2187128086, 472615631, 3029510009, 4075877127, 3802222185, 4107101658, 3201631749, 1646252340, 4270507174, 1402811438, 1436590835, 3778151818, 3950355702, 3963161475, 4020912224, 2667994737, 273792366, 2331590177, 104699613, 95345982, 3175501286, 2377486676, 1560637892, 3564045318, 369057872, 4213447064, 3919042237, 1137477952, 2658625497, 1119727848, 2340947849, 1530455833, 4007360968, 172466556, 266959938, 516552836, 0, 2256734592, 3980931627, 1890328081, 1917742170, 4294704398, 945164165, 3575528878, 958871085, 3647212047, 2787207260, 1423022939, 775562294, 1739656202, 3876557655, 2530391278, 2443058075, 3310321856, 547512796, 1265195639, 437656594, 3121275539, 719700128, 3762502690, 387781147, 218828297, 3350065803, 2830708150, 2848461854, 428169201, 122466165, 3720081049, 1627235199, 648017665, 4122762354, 1002783846, 2117360635, 695634755, 3336358691, 4234721005, 4049844452, 3704280881, 2232435299, 574624663, 287343814, 612205898, 1039717051, 840019705, 2708326185, 793451934, 821288114, 1391201670, 3822090177, 376187827, 3113855344, 1224348052, 1679968233, 2361698556, 1058709744, 752375421, 2431590963, 1321699145, 3519142200, 2734591178, 188127444, 2177869557, 3727205754, 2384911031, 3215212461, 2648976442, 2450346104, 3432737375, 1180849278, 331544205, 3102249176, 4150144569, 2952102595, 2159976285, 2474404304, 766078933, 313773861, 2570832044, 2108100632, 1668212892, 3145456443, 2013908262, 418672217, 3070356634, 2594734927, 1852171925, 3867060991, 3473416636, 3907448597, 2614737639, 919489135, 164948639, 2094410160, 2997825956, 590424639, 2486224549, 1723872674, 3157750862, 3399941250, 3501252752, 3625268135, 2555048196, 3673637356, 1343127501, 4130281361, 3599595085, 2957853679, 1297403050, 81781910, 3051593425, 2283490410, 532201772, 1367295589, 3926170974, 895287692, 1953757831, 1093597963, 492483431, 3528626907, 1446242576, 1192455638, 1636604631, 209336225, 344873464, 1015671571, 669961897, 3375740769, 3857572124, 2973530695, 3747192018, 1933530610, 3464042516, 935293895, 3454686199, 2858115069, 1863638845, 3683022916, 4085369519, 3292445032, 875313188, 1080017571, 3279033885, 621591778, 1233856572, 2504130317, 24197544, 3017672716, 3835484340, 3247465558, 2220981195, 3060847922, 1551124588, 1463996600], Wp = [4104605777, 1097159550, 396673818, 660510266, 2875968315, 2638606623, 4200115116, 3808662347, 821712160, 1986918061, 3430322568, 38544885, 3856137295, 718002117, 893681702, 1654886325, 2975484382, 3122358053, 3926825029, 4274053469, 796197571, 1290801793, 1184342925, 3556361835, 2405426947, 2459735317, 1836772287, 1381620373, 3196267988, 1948373848, 3764988233, 3385345166, 3263785589, 2390325492, 1480485785, 3111247143, 3780097726, 2293045232, 548169417, 3459953789, 3746175075, 439452389, 1362321559, 1400849762, 1685577905, 1806599355, 2174754046, 137073913, 1214797936, 1174215055, 3731654548, 2079897426, 1943217067, 1258480242, 529487843, 1437280870, 3945269170, 3049390895, 3313212038, 923313619, 679998e3, 3215307299, 57326082, 377642221, 3474729866, 2041877159, 133361907, 1776460110, 3673476453, 96392454, 878845905, 2801699524, 777231668, 4082475170, 2330014213, 4142626212, 2213296395, 1626319424, 1906247262, 1846563261, 562755902, 3708173718, 1040559837, 3871163981, 1418573201, 3294430577, 114585348, 1343618912, 2566595609, 3186202582, 1078185097, 3651041127, 3896688048, 2307622919, 425408743, 3371096953, 2081048481, 1108339068, 2216610296, 0, 2156299017, 736970802, 292596766, 1517440620, 251657213, 2235061775, 2933202493, 758720310, 265905162, 1554391400, 1532285339, 908999204, 174567692, 1474760595, 4002861748, 2610011675, 3234156416, 3693126241, 2001430874, 303699484, 2478443234, 2687165888, 585122620, 454499602, 151849742, 2345119218, 3064510765, 514443284, 4044981591, 1963412655, 2581445614, 2137062819, 19308535, 1928707164, 1715193156, 4219352155, 1126790795, 600235211, 3992742070, 3841024952, 836553431, 1669664834, 2535604243, 3323011204, 1243905413, 3141400786, 4180808110, 698445255, 2653899549, 2989552604, 2253581325, 3252932727, 3004591147, 1891211689, 2487810577, 3915653703, 4237083816, 4030667424, 2100090966, 865136418, 1229899655, 953270745, 3399679628, 3557504664, 4118925222, 2061379749, 3079546586, 2915017791, 983426092, 2022837584, 1607244650, 2118541908, 2366882550, 3635996816, 972512814, 3283088770, 1568718495, 3499326569, 3576539503, 621982671, 2895723464, 410887952, 2623762152, 1002142683, 645401037, 1494807662, 2595684844, 1335535747, 2507040230, 4293295786, 3167684641, 367585007, 3885750714, 1865862730, 2668221674, 2960971305, 2763173681, 1059270954, 2777952454, 2724642869, 1320957812, 2194319100, 2429595872, 2815956275, 77089521, 3973773121, 3444575871, 2448830231, 1305906550, 4021308739, 2857194700, 2516901860, 3518358430, 1787304780, 740276417, 1699839814, 1592394909, 2352307457, 2272556026, 188821243, 1729977011, 3687994002, 274084841, 3594982253, 3613494426, 2701949495, 4162096729, 322734571, 2837966542, 1640576439, 484830689, 1202797690, 3537852828, 4067639125, 349075736, 3342319475, 4157467219, 4255800159, 1030690015, 1155237496, 2951971274, 1757691577, 607398968, 2738905026, 499347990, 3794078908, 1011452712, 227885567, 2818666809, 213114376, 3034881240, 1455525988, 3414450555, 850817237, 1817998408, 3092726480], jp = [0, 235474187, 470948374, 303765277, 941896748, 908933415, 607530554, 708780849, 1883793496, 2118214995, 1817866830, 1649639237, 1215061108, 1181045119, 1417561698, 1517767529, 3767586992, 4003061179, 4236429990, 4069246893, 3635733660, 3602770327, 3299278474, 3400528769, 2430122216, 2664543715, 2362090238, 2193862645, 2835123396, 2801107407, 3035535058, 3135740889, 3678124923, 3576870512, 3341394285, 3374361702, 3810496343, 3977675356, 4279080257, 4043610186, 2876494627, 2776292904, 3076639029, 3110650942, 2472011535, 2640243204, 2403728665, 2169303058, 1001089995, 899835584, 666464733, 699432150, 59727847, 226906860, 530400753, 294930682, 1273168787, 1172967064, 1475418501, 1509430414, 1942435775, 2110667444, 1876241833, 1641816226, 2910219766, 2743034109, 2976151520, 3211623147, 2505202138, 2606453969, 2302690252, 2269728455, 3711829422, 3543599269, 3240894392, 3475313331, 3843699074, 3943906441, 4178062228, 4144047775, 1306967366, 1139781709, 1374988112, 1610459739, 1975683434, 2076935265, 1775276924, 1742315127, 1034867998, 866637845, 566021896, 800440835, 92987698, 193195065, 429456164, 395441711, 1984812685, 2017778566, 1784663195, 1683407248, 1315562145, 1080094634, 1383856311, 1551037884, 101039829, 135050206, 437757123, 337553864, 1042385657, 807962610, 573804783, 742039012, 2531067453, 2564033334, 2328828971, 2227573024, 2935566865, 2700099354, 3001755655, 3168937228, 3868552805, 3902563182, 4203181171, 4102977912, 3736164937, 3501741890, 3265478751, 3433712980, 1106041591, 1340463100, 1576976609, 1408749034, 2043211483, 2009195472, 1708848333, 1809054150, 832877231, 1068351396, 766945465, 599762354, 159417987, 126454664, 361929877, 463180190, 2709260871, 2943682380, 3178106961, 3009879386, 2572697195, 2538681184, 2236228733, 2336434550, 3509871135, 3745345300, 3441850377, 3274667266, 3910161971, 3877198648, 4110568485, 4211818798, 2597806476, 2497604743, 2261089178, 2295101073, 2733856160, 2902087851, 3202437046, 2968011453, 3936291284, 3835036895, 4136440770, 4169408201, 3535486456, 3702665459, 3467192302, 3231722213, 2051518780, 1951317047, 1716890410, 1750902305, 1113818384, 1282050075, 1584504582, 1350078989, 168810852, 67556463, 371049330, 404016761, 841739592, 1008918595, 775550814, 540080725, 3969562369, 3801332234, 4035489047, 4269907996, 3569255213, 3669462566, 3366754619, 3332740144, 2631065433, 2463879762, 2160117071, 2395588676, 2767645557, 2868897406, 3102011747, 3069049960, 202008497, 33778362, 270040487, 504459436, 875451293, 975658646, 675039627, 641025152, 2084704233, 1917518562, 1615861247, 1851332852, 1147550661, 1248802510, 1484005843, 1451044056, 933301370, 967311729, 733156972, 632953703, 260388950, 25965917, 328671808, 496906059, 1206477858, 1239443753, 1543208500, 1441952575, 2144161806, 1908694277, 1675577880, 1842759443, 3610369226, 3644379585, 3408119516, 3307916247, 4011190502, 3776767469, 4077384432, 4245618683, 2809771154, 2842737049, 3144396420, 3043140495, 2673705150, 2438237621, 2203032232, 2370213795], Zp = [0, 185469197, 370938394, 487725847, 741876788, 657861945, 975451694, 824852259, 1483753576, 1400783205, 1315723890, 1164071807, 1950903388, 2135319889, 1649704518, 1767536459, 2967507152, 3152976349, 2801566410, 2918353863, 2631447780, 2547432937, 2328143614, 2177544179, 3901806776, 3818836405, 4270639778, 4118987695, 3299409036, 3483825537, 3535072918, 3652904859, 2077965243, 1893020342, 1841768865, 1724457132, 1474502543, 1559041666, 1107234197, 1257309336, 598438867, 681933534, 901210569, 1052338372, 261314535, 77422314, 428819965, 310463728, 3409685355, 3224740454, 3710368113, 3593056380, 3875770207, 3960309330, 4045380933, 4195456072, 2471224067, 2554718734, 2237133081, 2388260884, 3212035895, 3028143674, 2842678573, 2724322336, 4138563181, 4255350624, 3769721975, 3955191162, 3667219033, 3516619604, 3431546947, 3347532110, 2933734917, 2782082824, 3099667487, 3016697106, 2196052529, 2313884476, 2499348523, 2683765030, 1179510461, 1296297904, 1347548327, 1533017514, 1786102409, 1635502980, 2087309459, 2003294622, 507358933, 355706840, 136428751, 53458370, 839224033, 957055980, 605657339, 790073846, 2373340630, 2256028891, 2607439820, 2422494913, 2706270690, 2856345839, 3075636216, 3160175349, 3573941694, 3725069491, 3273267108, 3356761769, 4181598602, 4063242375, 4011996048, 3828103837, 1033297158, 915985419, 730517276, 545572369, 296679730, 446754879, 129166120, 213705253, 1709610350, 1860738147, 1945798516, 2029293177, 1239331162, 1120974935, 1606591296, 1422699085, 4148292826, 4233094615, 3781033664, 3931371469, 3682191598, 3497509347, 3446004468, 3328955385, 2939266226, 2755636671, 3106780840, 2988687269, 2198438022, 2282195339, 2501218972, 2652609425, 1201765386, 1286567175, 1371368976, 1521706781, 1805211710, 1620529459, 2105887268, 1988838185, 533804130, 350174575, 164439672, 46346101, 870912086, 954669403, 636813900, 788204353, 2358957921, 2274680428, 2592523643, 2441661558, 2695033685, 2880240216, 3065962831, 3182487618, 3572145929, 3756299780, 3270937875, 3388507166, 4174560061, 4091327024, 4006521127, 3854606378, 1014646705, 930369212, 711349675, 560487590, 272786309, 457992840, 106852767, 223377554, 1678381017, 1862534868, 1914052035, 2031621326, 1211247597, 1128014560, 1580087799, 1428173050, 32283319, 182621114, 401639597, 486441376, 768917123, 651868046, 1003007129, 818324884, 1503449823, 1385356242, 1333838021, 1150208456, 1973745387, 2125135846, 1673061617, 1756818940, 2970356327, 3120694122, 2802849917, 2887651696, 2637442643, 2520393566, 2334669897, 2149987652, 3917234703, 3799141122, 4284502037, 4100872472, 3309594171, 3460984630, 3545789473, 3629546796, 2050466060, 1899603969, 1814803222, 1730525723, 1443857720, 1560382517, 1075025698, 1260232239, 575138148, 692707433, 878443390, 1062597235, 243256656, 91341917, 409198410, 325965383, 3403100636, 3252238545, 3704300486, 3620022987, 3874428392, 3990953189, 4042459122, 4227665663, 2460449204, 2578018489, 2226875310, 2411029155, 3198115200, 3046200461, 2827177882, 2743944855], qp = [0, 218828297, 437656594, 387781147, 875313188, 958871085, 775562294, 590424639, 1750626376, 1699970625, 1917742170, 2135253587, 1551124588, 1367295589, 1180849278, 1265195639, 3501252752, 3720081049, 3399941250, 3350065803, 3835484340, 3919042237, 4270507174, 4085369519, 3102249176, 3051593425, 2734591178, 2952102595, 2361698556, 2177869557, 2530391278, 2614737639, 3145456443, 3060847922, 2708326185, 2892417312, 2404901663, 2187128086, 2504130317, 2555048196, 3542330227, 3727205754, 3375740769, 3292445032, 3876557655, 3926170974, 4246310725, 4027744588, 1808481195, 1723872674, 1910319033, 2094410160, 1608975247, 1391201670, 1173430173, 1224348052, 59984867, 244860394, 428169201, 344873464, 935293895, 984907214, 766078933, 547512796, 1844882806, 1627235199, 2011214180, 2062270317, 1507497298, 1423022939, 1137477952, 1321699145, 95345982, 145085239, 532201772, 313773861, 830661914, 1015671571, 731183368, 648017665, 3175501286, 2957853679, 2807058932, 2858115069, 2305455554, 2220981195, 2474404304, 2658625497, 3575528878, 3625268135, 3473416636, 3254988725, 3778151818, 3963161475, 4213447064, 4130281361, 3599595085, 3683022916, 3432737375, 3247465558, 3802222185, 4020912224, 4172763771, 4122762354, 3201631749, 3017672716, 2764249623, 2848461854, 2331590177, 2280796200, 2431590963, 2648976442, 104699613, 188127444, 472615631, 287343814, 840019705, 1058709744, 671593195, 621591778, 1852171925, 1668212892, 1953757831, 2037970062, 1514790577, 1463996600, 1080017571, 1297403050, 3673637356, 3623636965, 3235995134, 3454686199, 4007360968, 3822090177, 4107101658, 4190530515, 2997825956, 3215212461, 2830708150, 2779915199, 2256734592, 2340947849, 2627016082, 2443058075, 172466556, 122466165, 273792366, 492483431, 1047239e3, 861968209, 612205898, 695634755, 1646252340, 1863638845, 2013908262, 1963115311, 1446242576, 1530455833, 1277555970, 1093597963, 1636604631, 1820824798, 2073724613, 1989249228, 1436590835, 1487645946, 1337376481, 1119727848, 164948639, 81781910, 331544205, 516552836, 1039717051, 821288114, 669961897, 719700128, 2973530695, 3157750862, 2871682645, 2787207260, 2232435299, 2283490410, 2667994737, 2450346104, 3647212047, 3564045318, 3279033885, 3464042516, 3980931627, 3762502690, 4150144569, 4199882800, 3070356634, 3121275539, 2904027272, 2686254721, 2200818878, 2384911031, 2570832044, 2486224549, 3747192018, 3528626907, 3310321856, 3359936201, 3950355702, 3867060991, 4049844452, 4234721005, 1739656202, 1790575107, 2108100632, 1890328081, 1402811438, 1586903591, 1233856572, 1149249077, 266959938, 48394827, 369057872, 418672217, 1002783846, 919489135, 567498868, 752375421, 209336225, 24197544, 376187827, 459744698, 945164165, 895287692, 574624663, 793451934, 1679968233, 1764313568, 2117360635, 1933530610, 1343127501, 1560637892, 1243112415, 1192455638, 3704280881, 3519142200, 3336358691, 3419915562, 3907448597, 3857572124, 4075877127, 4294704398, 3029510009, 3113855344, 2927934315, 2744104290, 2159976285, 2377486676, 2594734927, 2544078150], Yp = [0, 151849742, 303699484, 454499602, 607398968, 758720310, 908999204, 1059270954, 1214797936, 1097159550, 1517440620, 1400849762, 1817998408, 1699839814, 2118541908, 2001430874, 2429595872, 2581445614, 2194319100, 2345119218, 3034881240, 3186202582, 2801699524, 2951971274, 3635996816, 3518358430, 3399679628, 3283088770, 4237083816, 4118925222, 4002861748, 3885750714, 1002142683, 850817237, 698445255, 548169417, 529487843, 377642221, 227885567, 77089521, 1943217067, 2061379749, 1640576439, 1757691577, 1474760595, 1592394909, 1174215055, 1290801793, 2875968315, 2724642869, 3111247143, 2960971305, 2405426947, 2253581325, 2638606623, 2487810577, 3808662347, 3926825029, 4044981591, 4162096729, 3342319475, 3459953789, 3576539503, 3693126241, 1986918061, 2137062819, 1685577905, 1836772287, 1381620373, 1532285339, 1078185097, 1229899655, 1040559837, 923313619, 740276417, 621982671, 439452389, 322734571, 137073913, 19308535, 3871163981, 4021308739, 4104605777, 4255800159, 3263785589, 3414450555, 3499326569, 3651041127, 2933202493, 2815956275, 3167684641, 3049390895, 2330014213, 2213296395, 2566595609, 2448830231, 1305906550, 1155237496, 1607244650, 1455525988, 1776460110, 1626319424, 2079897426, 1928707164, 96392454, 213114376, 396673818, 514443284, 562755902, 679998e3, 865136418, 983426092, 3708173718, 3557504664, 3474729866, 3323011204, 4180808110, 4030667424, 3945269170, 3794078908, 2507040230, 2623762152, 2272556026, 2390325492, 2975484382, 3092726480, 2738905026, 2857194700, 3973773121, 3856137295, 4274053469, 4157467219, 3371096953, 3252932727, 3673476453, 3556361835, 2763173681, 2915017791, 3064510765, 3215307299, 2156299017, 2307622919, 2459735317, 2610011675, 2081048481, 1963412655, 1846563261, 1729977011, 1480485785, 1362321559, 1243905413, 1126790795, 878845905, 1030690015, 645401037, 796197571, 274084841, 425408743, 38544885, 188821243, 3613494426, 3731654548, 3313212038, 3430322568, 4082475170, 4200115116, 3780097726, 3896688048, 2668221674, 2516901860, 2366882550, 2216610296, 3141400786, 2989552604, 2837966542, 2687165888, 1202797690, 1320957812, 1437280870, 1554391400, 1669664834, 1787304780, 1906247262, 2022837584, 265905162, 114585348, 499347990, 349075736, 736970802, 585122620, 972512814, 821712160, 2595684844, 2478443234, 2293045232, 2174754046, 3196267988, 3079546586, 2895723464, 2777952454, 3537852828, 3687994002, 3234156416, 3385345166, 4142626212, 4293295786, 3841024952, 3992742070, 174567692, 57326082, 410887952, 292596766, 777231668, 660510266, 1011452712, 893681702, 1108339068, 1258480242, 1343618912, 1494807662, 1715193156, 1865862730, 1948373848, 2100090966, 2701949495, 2818666809, 3004591147, 3122358053, 2235061775, 2352307457, 2535604243, 2653899549, 3915653703, 3764988233, 4219352155, 4067639125, 3444575871, 3294430577, 3746175075, 3594982253, 836553431, 953270745, 600235211, 718002117, 367585007, 484830689, 133361907, 251657213, 2041877159, 1891211689, 1806599355, 1654886325, 1568718495, 1418573201, 1335535747, 1184342925];\nfunction Tc(r) {\n  let e = [];\n  for (let t = 0; t < r.length; t += 4)\n    e.push(r[t] << 24 | r[t + 1] << 16 | r[t + 2] << 8 | r[t + 3]);\n  return e;\n}\na(Tc, \"convertToInt32\");\nvar si = class r {\n  static {\n    a(this, \"AES\");\n  }\n  get key() {\n    return Le(this, Uo, \"f\").slice();\n  }\n  constructor(e) {\n    if (Uo.set(this, void 0), ft.set(this, void 0), Mt.set(this, void 0), !(this instanceof r))\n      throw Error(\"AES must be instanitated with `new`\");\n    vc(this, Uo, new Uint8Array(e), \"f\");\n    let t = Mp[this.key.length];\n    if (t == null)\n      throw new TypeError(\"invalid key size (must be 16, 24 or 32 bytes)\");\n    vc(this, Mt, [], \"f\"), vc(this, ft, [], \"f\");\n    for (let u = 0; u <= t; u++)\n      Le(this, Mt, \"f\").push([0, 0, 0, 0]), Le(this, ft, \"f\").push([0, 0, 0, 0]);\n    let n = (t + 1) * 4, s = this.key.length / 4, i = Tc(this.key), o;\n    for (let u = 0; u < s; u++)\n      o = u >> 2, Le(this, Mt, \"f\")[o][u % 4] = i[u], Le(this, ft, \"f\")[t - o][u % 4] = i[u];\n    let c = 0, f = s, l;\n    for (; f < n; ) {\n      if (l = i[s - 1], i[0] ^= ct[l >> 16 & 255] << 24 ^ ct[l >> 8 & 255] << 16 ^ ct[l & 255] << 8 ^ ct[l >> 24 & 255] ^ Gp[c] << 24, c += 1, s != 8)\n        for (let p = 1; p < s; p++)\n          i[p] ^= i[p - 1];\n      else {\n        for (let p = 1; p < s / 2; p++)\n          i[p] ^= i[p - 1];\n        l = i[s / 2 - 1], i[s / 2] ^= ct[l & 255] ^ ct[l >> 8 & 255] << 8 ^ ct[l >> 16 & 255] << 16 ^ ct[l >> 24 & 255] << 24;\n        for (let p = s / 2 + 1; p < s; p++)\n          i[p] ^= i[p - 1];\n      }\n      let u = 0, d, x;\n      for (; u < s && f < n; )\n        d = f >> 2, x = f % 4, Le(this, Mt, \"f\")[d][x] = i[u], Le(this, ft, \"f\")[t - d][x] = i[u++], f++;\n    }\n    for (let u = 1; u < t; u++)\n      for (let d = 0; d < 4; d++)\n        l = Le(this, ft, \"f\")[u][d], Le(this, ft, \"f\")[u][d] = jp[l >> 24 & 255] ^ Zp[l >> 16 & 255] ^ qp[l >> 8 & 255] ^ Yp[l & 255];\n  }\n  encrypt(e) {\n    if (e.length != 16)\n      throw new TypeError(\"invalid plaintext size (must be 16 bytes)\");\n    let t = Le(this, Mt, \"f\").length - 1, n = [0, 0, 0, 0], s = Tc(e);\n    for (let c = 0; c < 4; c++)\n      s[c] ^= Le(this, Mt, \"f\")[0][c];\n    for (let c = 1; c < t; c++) {\n      for (let f = 0; f < 4; f++)\n        n[f] = Hp[s[f] >> 24 & 255] ^ _p[s[(f + 1) % 4] >> 16 & 255] ^ zp[s[(f + 2) % 4] >> 8 & 255] ^ Vp[s[(f + 3) % 4] & 255] ^ Le(this, Mt, \"f\")[c][f];\n      s = n.slice();\n    }\n    let i = new Uint8Array(16), o = 0;\n    for (let c = 0; c < 4; c++)\n      o = Le(this, Mt, \"f\")[t][c], i[4 * c] = (ct[s[c] >> 24 & 255] ^ o >> 24) & 255, i[4 * c + 1] = (ct[s[(c + 1) % 4] >> 16 & 255] ^ o >> 16) & 255, i[4 * c + 2] = (ct[s[(c + 2) % 4] >> 8 & 255] ^ o >> 8) & 255, i[4 * c + 3] = (ct[s[(c + 3) % 4] & 255] ^ o) & 255;\n    return i;\n  }\n  decrypt(e) {\n    if (e.length != 16)\n      throw new TypeError(\"invalid ciphertext size (must be 16 bytes)\");\n    let t = Le(this, ft, \"f\").length - 1, n = [0, 0, 0, 0], s = Tc(e);\n    for (let c = 0; c < 4; c++)\n      s[c] ^= Le(this, ft, \"f\")[0][c];\n    for (let c = 1; c < t; c++) {\n      for (let f = 0; f < 4; f++)\n        n[f] = Kp[s[f] >> 24 & 255] ^ Qp[s[(f + 3) % 4] >> 16 & 255] ^ Jp[s[(f + 2) % 4] >> 8 & 255] ^ Wp[s[(f + 1) % 4] & 255] ^ Le(this, ft, \"f\")[c][f];\n      s = n.slice();\n    }\n    let i = new Uint8Array(16), o = 0;\n    for (let c = 0; c < 4; c++)\n      o = Le(this, ft, \"f\")[t][c], i[4 * c] = (So[s[c] >> 24 & 255] ^ o >> 24) & 255, i[4 * c + 1] = (So[s[(c + 3) % 4] >> 16 & 255] ^ o >> 16) & 255, i[4 * c + 2] = (So[s[(c + 2) % 4] >> 8 & 255] ^ o >> 8) & 255, i[4 * c + 3] = (So[s[(c + 1) % 4] & 255] ^ o) & 255;\n    return i;\n  }\n};\nUo = /* @__PURE__ */ new WeakMap(), ft = /* @__PURE__ */ new WeakMap(), Mt = /* @__PURE__ */ new WeakMap();\n\n// node_modules/aes-js/lib.esm/mode.js\nvar Gt = class {\n  static {\n    a(this, \"ModeOfOperation\");\n  }\n  constructor(e, t, n) {\n    if (n && !(this instanceof n))\n      throw new Error(`${e} must be instantiated with \"new\"`);\n    Object.defineProperties(this, {\n      aes: { enumerable: !0, value: new si(t) },\n      name: { enumerable: !0, value: e }\n    });\n  }\n};\n\n// node_modules/aes-js/lib.esm/mode-cbc.js\nvar Lo = function(r, e, t, n, s) {\n  if (n === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (n === \"a\" && !s) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof e == \"function\" ? r !== e || !s : !e.has(r)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return n === \"a\" ? s.call(r, t) : s ? s.value = t : e.set(r, t), t;\n}, ps = function(r, e, t, n) {\n  if (t === \"a\" && !n) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof e == \"function\" ? r !== e || !n : !e.has(r)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return t === \"m\" ? n : t === \"a\" ? n.call(r) : n ? n.value : e.get(r);\n}, ii, fr, oi = class r extends Gt {\n  static {\n    a(this, \"CBC\");\n  }\n  constructor(e, t) {\n    if (super(\"ECC\", e, r), ii.set(this, void 0), fr.set(this, void 0), t) {\n      if (t.length % 16)\n        throw new TypeError(\"invalid iv size (must be 16 bytes)\");\n      Lo(this, ii, new Uint8Array(t), \"f\");\n    } else\n      Lo(this, ii, new Uint8Array(16), \"f\");\n    Lo(this, fr, this.iv, \"f\");\n  }\n  get iv() {\n    return new Uint8Array(ps(this, ii, \"f\"));\n  }\n  encrypt(e) {\n    if (e.length % 16)\n      throw new TypeError(\"invalid plaintext size (must be multiple of 16 bytes)\");\n    let t = new Uint8Array(e.length);\n    for (let n = 0; n < e.length; n += 16) {\n      for (let s = 0; s < 16; s++)\n        ps(this, fr, \"f\")[s] ^= e[n + s];\n      Lo(this, fr, this.aes.encrypt(ps(this, fr, \"f\")), \"f\"), t.set(ps(this, fr, \"f\"), n);\n    }\n    return t;\n  }\n  decrypt(e) {\n    if (e.length % 16)\n      throw new TypeError(\"invalid ciphertext size (must be multiple of 16 bytes)\");\n    let t = new Uint8Array(e.length);\n    for (let n = 0; n < e.length; n += 16) {\n      let s = this.aes.decrypt(e.subarray(n, n + 16));\n      for (let i = 0; i < 16; i++)\n        t[n + i] = s[i] ^ ps(this, fr, \"f\")[i], ps(this, fr, \"f\")[i] = e[n + i];\n    }\n    return t;\n  }\n};\nii = /* @__PURE__ */ new WeakMap(), fr = /* @__PURE__ */ new WeakMap();\n\n// node_modules/aes-js/lib.esm/mode-cfb.js\nvar Ic = function(r, e, t, n) {\n  if (t === \"a\" && !n) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof e == \"function\" ? r !== e || !n : !e.has(r)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return t === \"m\" ? n : t === \"a\" ? n.call(r) : n ? n.value : e.get(r);\n}, Xp, $p, Do, em;\n$p = /* @__PURE__ */ new WeakMap(), Do = /* @__PURE__ */ new WeakMap(), Xp = /* @__PURE__ */ new WeakSet(), em = /* @__PURE__ */ a(function(e) {\n  let t = this.segmentSize / 8;\n  Ic(this, Do, \"f\").set(Ic(this, Do, \"f\").subarray(t)), Ic(this, Do, \"f\").set(e.subarray(0, t), 16 - t);\n}, \"_CFB_shift\");\n\n// node_modules/aes-js/lib.esm/mode-ctr.js\nvar ms = function(r, e, t, n, s) {\n  if (n === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (n === \"a\" && !s) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof e == \"function\" ? r !== e || !s : !e.has(r)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return n === \"a\" ? s.call(r, t) : s ? s.value = t : e.set(r, t), t;\n}, lt = function(r, e, t, n) {\n  if (t === \"a\" && !n) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof e == \"function\" ? r !== e || !n : !e.has(r)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return t === \"m\" ? n : t === \"a\" ? n.call(r) : n ? n.value : e.get(r);\n}, ai, Rn, ut, Hr = class r extends Gt {\n  static {\n    a(this, \"CTR\");\n  }\n  constructor(e, t) {\n    super(\"CTR\", e, r), ai.set(this, void 0), Rn.set(this, void 0), ut.set(this, void 0), ms(this, ut, new Uint8Array(16), \"f\"), lt(this, ut, \"f\").fill(0), ms(this, ai, lt(this, ut, \"f\"), \"f\"), ms(this, Rn, 16, \"f\"), t == null && (t = 1), typeof t == \"number\" ? this.setCounterValue(t) : this.setCounterBytes(t);\n  }\n  get counter() {\n    return new Uint8Array(lt(this, ut, \"f\"));\n  }\n  setCounterValue(e) {\n    if (!Number.isInteger(e) || e < 0 || e > Number.MAX_SAFE_INTEGER)\n      throw new TypeError(\"invalid counter initial integer value\");\n    for (let t = 15; t >= 0; --t)\n      lt(this, ut, \"f\")[t] = e % 256, e = Math.floor(e / 256);\n  }\n  setCounterBytes(e) {\n    if (e.length !== 16)\n      throw new TypeError(\"invalid counter initial Uint8Array value length\");\n    lt(this, ut, \"f\").set(e);\n  }\n  increment() {\n    for (let e = 15; e >= 0; e--)\n      if (lt(this, ut, \"f\")[e] === 255)\n        lt(this, ut, \"f\")[e] = 0;\n      else {\n        lt(this, ut, \"f\")[e]++;\n        break;\n      }\n  }\n  encrypt(e) {\n    var t, n;\n    let s = new Uint8Array(e);\n    for (let i = 0; i < s.length; i++)\n      lt(this, Rn, \"f\") === 16 && (ms(this, ai, this.aes.encrypt(lt(this, ut, \"f\")), \"f\"), ms(this, Rn, 0, \"f\"), this.increment()), s[i] ^= lt(this, ai, \"f\")[ms(this, Rn, (n = lt(this, Rn, \"f\"), t = n++, n), \"f\"), t];\n    return s;\n  }\n  decrypt(e) {\n    return this.encrypt(e);\n  }\n};\nai = /* @__PURE__ */ new WeakMap(), Rn = /* @__PURE__ */ new WeakMap(), ut = /* @__PURE__ */ new WeakMap();\n\n// node_modules/aes-js/lib.esm/mode-ofb.js\nvar tm, rm, nm;\ntm = /* @__PURE__ */ new WeakMap(), rm = /* @__PURE__ */ new WeakMap(), nm = /* @__PURE__ */ new WeakMap();\n\n// node_modules/aes-js/lib.esm/padding.js\nfunction Cc(r) {\n  if (r.length < 16)\n    throw new TypeError(\"PKCS#7 invalid length\");\n  let e = r[r.length - 1];\n  if (e > 16)\n    throw new TypeError(\"PKCS#7 padding byte out of range\");\n  let t = r.length - e;\n  for (let n = 0; n < e; n++)\n    if (r[t + n] !== e)\n      throw new TypeError(\"PKCS#7 invalid padding byte\");\n  return new Uint8Array(r.subarray(0, t));\n}\na(Cc, \"pkcs7Strip\");\n\n// node_modules/ethers/lib.esm/wallet/utils.js\nfunction Oc(r) {\n  return typeof r == \"string\" && !r.startsWith(\"0x\") && (r = \"0x\" + r), fe(r);\n}\na(Oc, \"looseArrayify\");\nfunction bs(r, e) {\n  for (r = String(r); r.length < e; )\n    r = \"0\" + r;\n  return r;\n}\na(bs, \"zpad\");\nfunction vn(r) {\n  return typeof r == \"string\" ? re(r, \"NFKC\") : fe(r);\n}\na(vn, \"getPassword\");\nfunction xe(r, e) {\n  let t = e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);\n  h(t != null, \"invalid path\", \"path\", e);\n  let n = t[1], s = t[3], i = t[4] === \"!\", o = r;\n  for (let c of n.toLowerCase().split(\".\")) {\n    if (Array.isArray(o)) {\n      if (!c.match(/^[0-9]+$/))\n        break;\n      o = o[parseInt(c)];\n    } else if (typeof o == \"object\") {\n      let f = null;\n      for (let l in o)\n        if (l.toLowerCase() === c) {\n          f = o[l];\n          break;\n        }\n      o = f;\n    } else\n      o = null;\n    if (o == null)\n      break;\n  }\n  if (h(!i || o != null, \"missing required value\", \"path\", n), s && o != null) {\n    if (s === \"int\") {\n      if (typeof o == \"string\" && o.match(/^-?[0-9]+$/))\n        return parseInt(o);\n      if (Number.isSafeInteger(o))\n        return o;\n    }\n    if (s === \"number\" && typeof o == \"string\" && o.match(/^-?[0-9.]*$/))\n      return parseFloat(o);\n    if (s === \"data\" && typeof o == \"string\")\n      return Oc(o);\n    if (s === \"array\" && Array.isArray(o) || s === typeof o)\n      return o;\n    h(!1, `wrong type found for ${s} `, \"path\", n);\n  }\n  return o;\n}\na(xe, \"spelunk\");\n\n// node_modules/ethers/lib.esm/wallet/json-keystore.js\nvar xu = \"m/44'/60'/0'/0/0\";\nfunction gs(r) {\n  try {\n    let e = JSON.parse(r);\n    if ((e.version != null ? parseInt(e.version) : 0) === 3)\n      return !0;\n  } catch {\n  }\n  return !1;\n}\na(gs, \"isKeystoreJson\");\nfunction sm(r, e, t) {\n  if (xe(r, \"crypto.cipher:string\") === \"aes-128-ctr\") {\n    let s = xe(r, \"crypto.cipherparams.iv:data!\"), i = new Hr(e, s);\n    return w(i.decrypt(t));\n  }\n  b(!1, \"unsupported cipher\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"decrypt\"\n  });\n}\na(sm, \"decrypt\");\nfunction Fo(r, e) {\n  let t = E(e), n = xe(r, \"crypto.ciphertext:data!\"), s = w(G(F([t.slice(16, 32), n]))).substring(2);\n  h(s === xe(r, \"crypto.mac:string!\").toLowerCase(), \"incorrect password\", \"password\", \"[ REDACTED ]\");\n  let i = sm(r, t.slice(0, 16), n), o = Nt(i);\n  if (r.address) {\n    let l = r.address.toLowerCase();\n    l.startsWith(\"0x\") || (l = \"0x\" + l), h(U(l) === o, \"keystore address/privateKey mismatch\", \"address\", r.address);\n  }\n  let c = { address: o, privateKey: i };\n  if (xe(r, \"x-ethers.version:string\") === \"0.1\") {\n    let l = t.slice(32, 64), u = xe(r, \"x-ethers.mnemonicCiphertext:data!\"), d = xe(r, \"x-ethers.mnemonicCounter:data!\"), x = new Hr(l, d);\n    c.mnemonic = {\n      path: xe(r, \"x-ethers.path:string\") || xu,\n      locale: xe(r, \"x-ethers.locale:string\") || \"en\",\n      entropy: w(E(x.decrypt(u)))\n    };\n  }\n  return c;\n}\na(Fo, \"getAccount\");\nfunction pu(r) {\n  let e = xe(r, \"crypto.kdf:string\");\n  if (e && typeof e == \"string\") {\n    if (e.toLowerCase() === \"scrypt\") {\n      let t = xe(r, \"crypto.kdfparams.salt:data!\"), n = xe(r, \"crypto.kdfparams.n:int!\"), s = xe(r, \"crypto.kdfparams.r:int!\"), i = xe(r, \"crypto.kdfparams.p:int!\");\n      h(n > 0 && (n & n - 1) === 0, \"invalid kdf.N\", \"kdf.N\", n), h(s > 0 && i > 0, \"invalid kdf\", \"kdf\", e);\n      let o = xe(r, \"crypto.kdfparams.dklen:int!\");\n      return h(o === 32, \"invalid kdf.dklen\", \"kdf.dflen\", o), { name: \"scrypt\", salt: t, N: n, r: s, p: i, dkLen: 64 };\n    } else if (e.toLowerCase() === \"pbkdf2\") {\n      let t = xe(r, \"crypto.kdfparams.salt:data!\"), n = xe(r, \"crypto.kdfparams.prf:string!\"), s = n.split(\"-\").pop();\n      h(s === \"sha256\" || s === \"sha512\", \"invalid kdf.pdf\", \"kdf.pdf\", n);\n      let i = xe(r, \"crypto.kdfparams.c:int!\"), o = xe(r, \"crypto.kdfparams.dklen:int!\");\n      return h(o === 32, \"invalid kdf.dklen\", \"kdf.dklen\", o), { name: \"pbkdf2\", salt: t, count: i, dkLen: o, algorithm: s };\n    }\n  }\n  h(!1, \"unsupported key-derivation function\", \"kdf\", e);\n}\na(pu, \"getDecryptKdfParams\");\nfunction ci(r, e) {\n  let t = JSON.parse(r), n = vn(e), s = pu(t);\n  if (s.name === \"pbkdf2\") {\n    let { salt: d, count: x, dkLen: p, algorithm: g } = s, m = ze(n, d, x, p, g);\n    return Fo(t, m);\n  }\n  b(s.name === \"scrypt\", \"cannot be reached\", \"UNKNOWN_ERROR\", { params: s });\n  let { salt: i, N: o, r: c, p: f, dkLen: l } = s, u = Et(n, i, o, c, f, l);\n  return Fo(t, u);\n}\na(ci, \"decryptKeystoreJsonSync\");\nfunction hu(r) {\n  return new Promise((e) => {\n    setTimeout(() => {\n      e();\n    }, r);\n  });\n}\na(hu, \"stall\");\nasync function fi(r, e, t) {\n  let n = JSON.parse(r), s = vn(e), i = pu(n);\n  if (i.name === \"pbkdf2\") {\n    t && (t(0), await hu(0));\n    let { salt: x, count: p, dkLen: g, algorithm: m } = i, y = ze(s, x, p, g, m);\n    return t && (t(1), await hu(0)), Fo(n, y);\n  }\n  b(i.name === \"scrypt\", \"cannot be reached\", \"UNKNOWN_ERROR\", { params: i });\n  let { salt: o, N: c, r: f, p: l, dkLen: u } = i, d = await At(s, o, c, f, l, u, t);\n  return Fo(n, d);\n}\na(fi, \"decryptKeystoreJson\");\nfunction mu(r) {\n  let e = r.salt != null ? E(r.salt, \"options.salt\") : Me(32), t = 1 << 17, n = 8, s = 1;\n  return r.scrypt && (r.scrypt.N && (t = r.scrypt.N), r.scrypt.r && (n = r.scrypt.r), r.scrypt.p && (s = r.scrypt.p)), h(typeof t == \"number\" && t > 0 && Number.isSafeInteger(t) && (BigInt(t) & BigInt(t - 1)) === BigInt(0), \"invalid scrypt N parameter\", \"options.N\", t), h(typeof n == \"number\" && n > 0 && Number.isSafeInteger(n), \"invalid scrypt r parameter\", \"options.r\", n), h(typeof s == \"number\" && s > 0 && Number.isSafeInteger(s), \"invalid scrypt p parameter\", \"options.p\", s), { name: \"scrypt\", dkLen: 32, salt: e, N: t, r: n, p: s };\n}\na(mu, \"getEncryptKdfParams\");\nfunction bu(r, e, t, n) {\n  let s = E(t.privateKey, \"privateKey\"), i = n.iv != null ? E(n.iv, \"options.iv\") : Me(16);\n  h(i.length === 16, \"invalid options.iv length\", \"options.iv\", n.iv);\n  let o = n.uuid != null ? E(n.uuid, \"options.uuid\") : Me(16);\n  h(o.length === 16, \"invalid options.uuid length\", \"options.uuid\", n.iv);\n  let c = r.slice(0, 16), f = r.slice(16, 32), l = new Hr(c, i), u = E(l.encrypt(s)), d = G(F([f, u])), x = {\n    address: t.address.substring(2).toLowerCase(),\n    id: vs(o),\n    version: 3,\n    Crypto: {\n      cipher: \"aes-128-ctr\",\n      cipherparams: {\n        iv: w(i).substring(2)\n      },\n      ciphertext: w(u).substring(2),\n      kdf: \"scrypt\",\n      kdfparams: {\n        salt: w(e.salt).substring(2),\n        n: e.N,\n        dklen: 32,\n        p: e.p,\n        r: e.r\n      },\n      mac: d.substring(2)\n    }\n  };\n  if (t.mnemonic) {\n    let p = n.client != null ? n.client : `ethers/${Ln}`, g = t.mnemonic.path || xu, m = t.mnemonic.locale || \"en\", y = r.slice(32, 64), A = E(t.mnemonic.entropy, \"account.mnemonic.entropy\"), B = Me(16), N = new Hr(y, B), D = E(N.encrypt(A)), v = /* @__PURE__ */ new Date(), L = \"UTC--\" + (v.getUTCFullYear() + \"-\" + bs(v.getUTCMonth() + 1, 2) + \"-\" + bs(v.getUTCDate(), 2) + \"T\" + bs(v.getUTCHours(), 2) + \"-\" + bs(v.getUTCMinutes(), 2) + \"-\" + bs(v.getUTCSeconds(), 2) + \".0Z\") + \"--\" + x.address;\n    x[\"x-ethers\"] = {\n      client: p,\n      gethFilename: L,\n      path: g,\n      locale: m,\n      mnemonicCounter: w(B).substring(2),\n      mnemonicCiphertext: w(D).substring(2),\n      version: \"0.1\"\n    };\n  }\n  return JSON.stringify(x);\n}\na(bu, \"_encryptKeystore\");\nfunction Tn(r, e, t) {\n  t == null && (t = {});\n  let n = vn(e), s = mu(t), i = Et(n, s.salt, s.N, s.r, s.p, 64);\n  return bu(E(i), s, r, t);\n}\na(Tn, \"encryptKeystoreJsonSync\");\nasync function In(r, e, t) {\n  t == null && (t = {});\n  let n = vn(e), s = mu(t), i = await At(n, s.salt, s.N, s.r, s.p, 64, t.progressCallback);\n  return bu(E(i), s, r, t);\n}\na(In, \"encryptKeystoreJson\");\n\n// node_modules/ethers/lib.esm/wallet/hdwallet.js\nvar ys = \"m/44'/60'/0'/0/0\", im = new Uint8Array([66, 105, 116, 99, 111, 105, 110, 32, 115, 101, 101, 100]), _t = 2147483648, om = BigInt(\"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\"), am = \"0123456789abcdef\";\nfunction Mo(r, e) {\n  let t = \"\";\n  for (; r; )\n    t = am[r % 16] + t, r = Math.trunc(r / 16);\n  for (; t.length < e * 2; )\n    t = \"0\" + t;\n  return \"0x\" + t;\n}\na(Mo, \"zpad\");\nfunction Sc(r) {\n  let e = E(r), t = Y(ye(ye(e)), 0, 4), n = F([e, t]);\n  return Qr(n);\n}\na(Sc, \"encodeBase58Check\");\nvar Ht = {};\nfunction gu(r, e, t, n) {\n  let s = new Uint8Array(37);\n  r & _t ? (b(n != null, \"cannot derive child of neutered node\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"deriveChild\"\n  }), s.set(E(n), 1)) : s.set(E(t));\n  for (let o = 24; o >= 0; o -= 8)\n    s[33 + (o >> 3)] = r >> 24 - o & 255;\n  let i = E(yt(\"sha512\", e, s));\n  return { IL: i.slice(0, 32), IR: i.slice(32) };\n}\na(gu, \"ser_I\");\nfunction yu(r, e) {\n  let t = e.split(\"/\");\n  h(t.length > 0, \"invalid path\", \"path\", e), t[0] === \"m\" && (h(r.depth === 0, `cannot derive root path (i.e. path starting with \"m/\") for a node at non-zero depth ${r.depth}`, \"path\", e), t.shift());\n  let n = r;\n  for (let s = 0; s < t.length; s++) {\n    let i = t[s];\n    if (i.match(/^[0-9]+'$/)) {\n      let o = parseInt(i.substring(0, i.length - 1));\n      h(o < _t, \"invalid path index\", `path[${s}]`, i), n = n.deriveChild(_t + o);\n    } else if (i.match(/^[0-9]+$/)) {\n      let o = parseInt(i);\n      h(o < _t, \"invalid path index\", `path[${s}]`, i), n = n.deriveChild(o);\n    } else\n      h(!1, \"invalid path component\", `path[${s}]`, i);\n  }\n  return n;\n}\na(yu, \"derivePath\");\nvar lr = class r extends ar {\n  static {\n    a(this, \"HDNodeWallet\");\n  }\n  /**\n   *  The compressed public key.\n   */\n  publicKey;\n  /**\n   *  The fingerprint.\n   *\n   *  A fingerprint allows quick qay to detect parent and child nodes,\n   *  but developers should be prepared to deal with collisions as it\n   *  is only 4 bytes.\n   */\n  fingerprint;\n  /**\n   *  The parent fingerprint.\n   */\n  parentFingerprint;\n  /**\n   *  The mnemonic used to create this HD Node, if available.\n   *\n   *  Sources such as extended keys do not encode the mnemonic, in\n   *  which case this will be ``null``.\n   */\n  mnemonic;\n  /**\n   *  The chaincode, which is effectively a public key used\n   *  to derive children.\n   */\n  chainCode;\n  /**\n   *  The derivation path of this wallet.\n   *\n   *  Since extended keys do not provide full path details, this\n   *  may be ``null``, if instantiated from a source that does not\n   *  encode it.\n   */\n  path;\n  /**\n   *  The child index of this wallet. Values over ``2 *\\* 31`` indicate\n   *  the node is hardened.\n   */\n  index;\n  /**\n   *  The depth of this wallet, which is the number of components\n   *  in its path.\n   */\n  depth;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i, o, c, f, l) {\n    super(t, l), ve(e, Ht, \"HDNodeWallet\"), P(this, { publicKey: t.compressedPublicKey });\n    let u = Y(wt(ye(this.publicKey)), 0, 4);\n    P(this, {\n      parentFingerprint: n,\n      fingerprint: u,\n      chainCode: s,\n      path: i,\n      index: o,\n      depth: c\n    }), P(this, { mnemonic: f });\n  }\n  connect(e) {\n    return new r(Ht, this.signingKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, this.mnemonic, e);\n  }\n  #e() {\n    let e = { address: this.address, privateKey: this.privateKey }, t = this.mnemonic;\n    return this.path && t && t.wordlist.locale === \"en\" && t.password === \"\" && (e.mnemonic = {\n      path: this.path,\n      locale: \"en\",\n      entropy: t.entropy\n    }), e;\n  }\n  /**\n   *  Resolves to a [JSON Keystore Wallet](json-wallets) encrypted with\n   *  %%password%%.\n   *\n   *  If %%progressCallback%% is specified, it will receive periodic\n   *  updates as the encryption process progreses.\n   */\n  async encrypt(e, t) {\n    return await In(this.#e(), e, { progressCallback: t });\n  }\n  /**\n   *  Returns a [JSON Keystore Wallet](json-wallets) encryped with\n   *  %%password%%.\n   *\n   *  It is preferred to use the [async version](encrypt) instead,\n   *  which allows a [[ProgressCallback]] to keep the user informed.\n   *\n   *  This method will block the event loop (freezing all UI) until\n   *  it is complete, which may be a non-trivial duration.\n   */\n  encryptSync(e) {\n    return Tn(this.#e(), e);\n  }\n  /**\n   *  The extended key.\n   *\n   *  This key will begin with the prefix ``xpriv`` and can be used to\n   *  reconstruct this HD Node to derive its children.\n   */\n  get extendedKey() {\n    return b(this.depth < 256, \"Depth too deep\", \"UNSUPPORTED_OPERATION\", { operation: \"extendedKey\" }), Sc(F([\n      \"0x0488ADE4\",\n      Mo(this.depth, 1),\n      this.parentFingerprint,\n      Mo(this.index, 4),\n      this.chainCode,\n      F([\"0x00\", this.privateKey])\n    ]));\n  }\n  /**\n   *  Returns true if this wallet has a path, providing a Type Guard\n   *  that the path is non-null.\n   */\n  hasPath() {\n    return this.path != null;\n  }\n  /**\n   *  Returns a neutered HD Node, which removes the private details\n   *  of an HD Node.\n   *\n   *  A neutered node has no private key, but can be used to derive\n   *  child addresses and other public data about the HD Node.\n   */\n  neuter() {\n    return new Cn(Ht, this.address, this.publicKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, this.provider);\n  }\n  /**\n   *  Return the child for %%index%%.\n   */\n  deriveChild(e) {\n    let t = S(e, \"index\");\n    h(t <= 4294967295, \"invalid index\", \"index\", t);\n    let n = this.path;\n    n && (n += \"/\" + (t & ~_t), t & _t && (n += \"'\"));\n    let { IR: s, IL: i } = gu(t, this.chainCode, this.publicKey, this.privateKey), o = new Ie(Be((tt(i) + BigInt(this.privateKey)) % om, 32));\n    return new r(Ht, o, this.fingerprint, w(s), n, t, this.depth + 1, this.mnemonic, this.provider);\n  }\n  /**\n   *  Return the HDNode for %%path%% from this node.\n   */\n  derivePath(e) {\n    return yu(this, e);\n  }\n  static #t(e, t) {\n    h(dt(e), \"invalid seed\", \"seed\", \"[REDACTED]\");\n    let n = E(e, \"seed\");\n    h(n.length >= 16 && n.length <= 64, \"invalid seed\", \"seed\", \"[REDACTED]\");\n    let s = E(yt(\"sha512\", im, n)), i = new Ie(w(s.slice(0, 32)));\n    return new r(Ht, i, \"0x00000000\", w(s.slice(32)), \"m\", 0, 0, t, null);\n  }\n  /**\n   *  Creates a new HD Node from %%extendedKey%%.\n   *\n   *  If the %%extendedKey%% will either have a prefix or ``xpub`` or\n   *  ``xpriv``, returning a neutered HD Node ([[HDNodeVoidWallet]])\n   *  or full HD Node ([[HDNodeWallet) respectively.\n   */\n  static fromExtendedKey(e) {\n    let t = X(ks(e));\n    h(t.length === 82 || Sc(t.slice(0, 78)) === e, \"invalid extended key\", \"extendedKey\", \"[ REDACTED ]\");\n    let n = t[4], s = w(t.slice(5, 9)), i = parseInt(w(t.slice(9, 13)).substring(2), 16), o = w(t.slice(13, 45)), c = t.slice(45, 78);\n    switch (w(t.slice(0, 4))) {\n      // Public Key\n      case \"0x0488b21e\":\n      case \"0x043587cf\": {\n        let f = w(c);\n        return new Cn(Ht, Nt(f), f, s, o, null, i, n, null);\n      }\n      // Private Key\n      case \"0x0488ade4\":\n      case \"0x04358394 \":\n        if (c[0] !== 0)\n          break;\n        return new r(Ht, new Ie(c.slice(1)), s, o, null, i, n, null, null);\n    }\n    h(!1, \"invalid extended key prefix\", \"extendedKey\", \"[ REDACTED ]\");\n  }\n  /**\n   *  Creates a new random HDNode.\n   */\n  static createRandom(e, t, n) {\n    e == null && (e = \"\"), t == null && (t = ys), n == null && (n = je.wordlist());\n    let s = Ft.fromEntropy(Me(16), e, n);\n    return r.#t(s.computeSeed(), s).derivePath(t);\n  }\n  /**\n   *  Create an HD Node from %%mnemonic%%.\n   */\n  static fromMnemonic(e, t) {\n    return t || (t = ys), r.#t(e.computeSeed(), e).derivePath(t);\n  }\n  /**\n   *  Creates an HD Node from a mnemonic %%phrase%%.\n   */\n  static fromPhrase(e, t, n, s) {\n    t == null && (t = \"\"), n == null && (n = ys), s == null && (s = je.wordlist());\n    let i = Ft.fromPhrase(e, t, s);\n    return r.#t(i.computeSeed(), i).derivePath(n);\n  }\n  /**\n   *  Creates an HD Node from a %%seed%%.\n   */\n  static fromSeed(e) {\n    return r.#t(e, null);\n  }\n}, Cn = class r extends bn {\n  static {\n    a(this, \"HDNodeVoidWallet\");\n  }\n  /**\n   *  The compressed public key.\n   */\n  publicKey;\n  /**\n   *  The fingerprint.\n   *\n   *  A fingerprint allows quick qay to detect parent and child nodes,\n   *  but developers should be prepared to deal with collisions as it\n   *  is only 4 bytes.\n   */\n  fingerprint;\n  /**\n   *  The parent node fingerprint.\n   */\n  parentFingerprint;\n  /**\n   *  The chaincode, which is effectively a public key used\n   *  to derive children.\n   */\n  chainCode;\n  /**\n   *  The derivation path of this wallet.\n   *\n   *  Since extended keys do not provider full path details, this\n   *  may be ``null``, if instantiated from a source that does not\n   *  enocde it.\n   */\n  path;\n  /**\n   *  The child index of this wallet. Values over ``2 *\\* 31`` indicate\n   *  the node is hardened.\n   */\n  index;\n  /**\n   *  The depth of this wallet, which is the number of components\n   *  in its path.\n   */\n  depth;\n  /**\n   *  @private\n   */\n  constructor(e, t, n, s, i, o, c, f, l) {\n    super(t, l), ve(e, Ht, \"HDNodeVoidWallet\"), P(this, { publicKey: n });\n    let u = Y(wt(ye(n)), 0, 4);\n    P(this, {\n      publicKey: n,\n      fingerprint: u,\n      parentFingerprint: s,\n      chainCode: i,\n      path: o,\n      index: c,\n      depth: f\n    });\n  }\n  connect(e) {\n    return new r(Ht, this.address, this.publicKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, e);\n  }\n  /**\n   *  The extended key.\n   *\n   *  This key will begin with the prefix ``xpub`` and can be used to\n   *  reconstruct this neutered key to derive its children addresses.\n   */\n  get extendedKey() {\n    return b(this.depth < 256, \"Depth too deep\", \"UNSUPPORTED_OPERATION\", { operation: \"extendedKey\" }), Sc(F([\n      \"0x0488B21E\",\n      Mo(this.depth, 1),\n      this.parentFingerprint,\n      Mo(this.index, 4),\n      this.chainCode,\n      this.publicKey\n    ]));\n  }\n  /**\n   *  Returns true if this wallet has a path, providing a Type Guard\n   *  that the path is non-null.\n   */\n  hasPath() {\n    return this.path != null;\n  }\n  /**\n   *  Return the child for %%index%%.\n   */\n  deriveChild(e) {\n    let t = S(e, \"index\");\n    h(t <= 4294967295, \"invalid index\", \"index\", t);\n    let n = this.path;\n    n && (n += \"/\" + (t & ~_t), t & _t && (n += \"'\"));\n    let { IR: s, IL: i } = gu(t, this.chainCode, this.publicKey, null), o = Ie.addPoints(i, this.publicKey, !0), c = Nt(o);\n    return new r(Ht, c, o, this.fingerprint, w(s), n, t, this.depth + 1, this.provider);\n  }\n  /**\n   *  Return the signer for %%path%% from this node.\n   */\n  derivePath(e) {\n    return yu(this, e);\n  }\n};\nfunction Uc(r) {\n  let e = S(r, \"index\");\n  return h(e >= 0 && e < _t, \"invalid account index\", \"index\", e), `m/44'/60'/${e}'/0/0`;\n}\na(Uc, \"getAccountPath\");\nfunction Lc(r) {\n  let e = S(r, \"index\");\n  return h(e >= 0 && e < _t, \"invalid account index\", \"index\", e), `m/44'/60'/0'/0/${e}`;\n}\na(Lc, \"getIndexedAccountPath\");\n\n// node_modules/ethers/lib.esm/wallet/json-crowdsale.js\nfunction ws(r) {\n  try {\n    if (JSON.parse(r).encseed)\n      return !0;\n  } catch {\n  }\n  return !1;\n}\na(ws, \"isCrowdsaleJson\");\nfunction As(r, e) {\n  let t = JSON.parse(r), n = vn(e), s = U(xe(t, \"ethaddr:string!\")), i = Oc(xe(t, \"encseed:string!\"));\n  h(i && i.length % 16 === 0, \"invalid encseed\", \"json\", r);\n  let o = E(ze(n, n, 2e3, 32, \"sha256\")).slice(0, 16), c = i.slice(0, 16), f = i.slice(16), l = new oi(o, c), u = Cc(E(l.decrypt(f))), d = \"\";\n  for (let x = 0; x < u.length; x++)\n    d += String.fromCharCode(u[x]);\n  return { address: s, privateKey: Oe(d) };\n}\na(As, \"decryptCrowdsaleJson\");\n\n// node_modules/ethers/lib.esm/wallet/wallet.js\nfunction wu(r) {\n  return new Promise((e) => {\n    setTimeout(() => {\n      e();\n    }, r);\n  });\n}\na(wu, \"stall\");\nvar li = class r extends ar {\n  static {\n    a(this, \"Wallet\");\n  }\n  /**\n   *  Create a new wallet for the private %%key%%, optionally connected\n   *  to %%provider%%.\n   */\n  constructor(e, t) {\n    typeof e == \"string\" && !e.startsWith(\"0x\") && (e = \"0x\" + e);\n    let n = typeof e == \"string\" ? new Ie(e) : e;\n    super(n, t);\n  }\n  connect(e) {\n    return new r(this.signingKey, e);\n  }\n  /**\n   *  Resolves to a [JSON Keystore Wallet](json-wallets) encrypted with\n   *  %%password%%.\n   *\n   *  If %%progressCallback%% is specified, it will receive periodic\n   *  updates as the encryption process progreses.\n   */\n  async encrypt(e, t) {\n    let n = { address: this.address, privateKey: this.privateKey };\n    return await In(n, e, { progressCallback: t });\n  }\n  /**\n   *  Returns a [JSON Keystore Wallet](json-wallets) encryped with\n   *  %%password%%.\n   *\n   *  It is preferred to use the [async version](encrypt) instead,\n   *  which allows a [[ProgressCallback]] to keep the user informed.\n   *\n   *  This method will block the event loop (freezing all UI) until\n   *  it is complete, which may be a non-trivial duration.\n   */\n  encryptSync(e) {\n    let t = { address: this.address, privateKey: this.privateKey };\n    return Tn(t, e);\n  }\n  static #e(e) {\n    if (h(e, \"invalid JSON wallet\", \"json\", \"[ REDACTED ]\"), \"mnemonic\" in e && e.mnemonic && e.mnemonic.locale === \"en\") {\n      let n = Ft.fromEntropy(e.mnemonic.entropy), s = lr.fromMnemonic(n, e.mnemonic.path);\n      if (s.address === e.address && s.privateKey === e.privateKey)\n        return s;\n      console.log(\"WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key\");\n    }\n    let t = new r(e.privateKey);\n    return h(t.address === e.address, \"address/privateKey mismatch\", \"json\", \"[ REDACTED ]\"), t;\n  }\n  /**\n   *  Creates (asynchronously) a **Wallet** by decrypting the %%json%%\n   *  with %%password%%.\n   *\n   *  If %%progress%% is provided, it is called periodically during\n   *  decryption so that any UI can be updated.\n   */\n  static async fromEncryptedJson(e, t, n) {\n    let s = null;\n    return gs(e) ? s = await fi(e, t, n) : ws(e) && (n && (n(0), await wu(0)), s = As(e, t), n && (n(1), await wu(0))), r.#e(s);\n  }\n  /**\n   *  Creates a **Wallet** by decrypting the %%json%% with %%password%%.\n   *\n   *  The [[fromEncryptedJson]] method is preferred, as this method\n   *  will lock up and freeze the UI during decryption, which may take\n   *  some time.\n   */\n  static fromEncryptedJsonSync(e, t) {\n    let n = null;\n    return gs(e) ? n = ci(e, t) : ws(e) ? n = As(e, t) : h(!1, \"invalid JSON wallet\", \"json\", \"[ REDACTED ]\"), r.#e(n);\n  }\n  /**\n   *  Creates a new random [[HDNodeWallet]] using the available\n   *  [cryptographic random source](randomBytes).\n   *\n   *  If there is no crytographic random source, this will throw.\n   */\n  static createRandom(e) {\n    let t = lr.createRandom();\n    return e ? t.connect(e) : t;\n  }\n  /**\n   *  Creates a [[HDNodeWallet]] for %%phrase%%.\n   */\n  static fromPhrase(e, t) {\n    let n = lr.fromPhrase(e);\n    return t ? n.connect(t) : n;\n  }\n};\n\n// node_modules/ethers/lib.esm/wordlists/bit-reader.js\nvar cm = \")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\";\nfunction Au(r, e) {\n  let t = (1 << r) - 1, n = [], s = 0, i = 0, o = 0;\n  for (let c = 0; c < e.length; c++)\n    for (s = s << 6 | cm.indexOf(e[c]), i += 6; i >= r; ) {\n      let f = s >> i - r;\n      s &= (1 << i - r) - 1, i -= r, f === 0 ? o += t : (n.push(f + o), o = 0);\n    }\n  return n;\n}\na(Au, \"decodeBits\");\n\n// node_modules/ethers/lib.esm/wordlists/decode-owla.js\nfunction Eu(r, e) {\n  let t = Oo(r).join(\",\");\n  return e.split(/,/g).forEach((n) => {\n    let s = n.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);\n    h(s !== null, \"internal error parsing accents\", \"accents\", e);\n    let i = 0, o = Au(parseInt(s[3]), s[4]), c = parseInt(s[2]), f = new RegExp(`([${s[1]}])`, \"g\");\n    t = t.replace(f, (l, u) => (--o[i] === 0 && (u = String.fromCharCode(u.charCodeAt(0), c), i++), u));\n  }), t.split(\",\");\n}\na(Eu, \"decodeOwlA\");\n\n// node_modules/ethers/lib.esm/wordlists/wordlist-owla.js\nvar ui = class extends cr {\n  static {\n    a(this, \"WordlistOwlA\");\n  }\n  #e;\n  /**\n   *  Creates a new Wordlist for %%locale%% using the OWLA %%data%%\n   *  and %%accent%% data and validated against the %%checksum%%.\n   */\n  constructor(e, t, n, s) {\n    super(e, t, s), this.#e = n;\n  }\n  /**\n   *  The OWLA-encoded accent data.\n   */\n  get _accent() {\n    return this.#e;\n  }\n  /**\n   *  Decode all the words for the wordlist.\n   */\n  _decodeWords() {\n    return Eu(this._data, this._accent);\n  }\n};\n\n// node_modules/ethers/lib.esm/wordlists/wordlists-browser.js\nvar Dc = {\n  en: je.wordlist()\n};\n\nexport {\n  Ln as a,\n  oe as b,\n  P as c,\n  $ as d,\n  xr as e,\n  Q as f,\n  b as g,\n  h,\n  zr as i,\n  Vr as j,\n  ve as k,\n  E as l,\n  fe as m,\n  z as n,\n  dt as o,\n  w as p,\n  F as q,\n  Qe as r,\n  Y as s,\n  Ho as t,\n  ge as u,\n  zt as v,\n  Vt as w,\n  Kt as x,\n  Ze as y,\n  k as z,\n  Kr as A,\n  tt as B,\n  S as C,\n  Ps as D,\n  Be as E,\n  X as F,\n  Pe as G,\n  Qr as H,\n  ks as I,\n  Ns as J,\n  Bs as K,\n  Qt as L,\n  mi as M,\n  re as N,\n  He as O,\n  zo as P,\n  Mn as Q,\n  ne as R,\n  xt as S,\n  pr as T,\n  Jt as U,\n  _e as V,\n  wi as W,\n  Ai as X,\n  Qo as Y,\n  Jo as Z,\n  vs as _,\n  mt as $,\n  ki as aa,\n  yt as ba,\n  G as ca,\n  wt as da,\n  ze as ea,\n  Me as fa,\n  At as ga,\n  Et as ha,\n  ye as ia,\n  qr as ja,\n  Pt as ka,\n  Jn as la,\n  ya as ma,\n  wa as na,\n  Aa as oa,\n  Ea as pa,\n  Pa as qa,\n  ka as ra,\n  Us as sa,\n  we as ta,\n  Ie as ua,\n  Tf as va,\n  U as wa,\n  Ba as xa,\n  tn as ya,\n  Ra as za,\n  jn as Aa,\n  Ta as Ba,\n  le as Ca,\n  se as Da,\n  Ce as Ea,\n  nn as Fa,\n  Nt as Ga,\n  Bt as Ha,\n  Xe as Ia,\n  qn as Ja,\n  Ua as Ka,\n  Oe as La,\n  ao as Ma,\n  Ja as Na,\n  Br as Oa,\n  zs as Pa,\n  ts as Qa,\n  Wa as Ra,\n  Vs as Sa,\n  ja as Ta,\n  Za as Ua,\n  nt as Va,\n  Xa as Wa,\n  me as Xa,\n  Lt as Ya,\n  er as Za,\n  Ke as _a,\n  Ot as $a,\n  St as ab,\n  fn as bb,\n  Ut as cb,\n  Rr as db,\n  st as eb,\n  ec as fb,\n  tc as gb,\n  rs as hb,\n  ns as ib,\n  ss as jb,\n  ln as kb,\n  tr as lb,\n  Tr as mb,\n  it as nb,\n  un as ob,\n  $e as pb,\n  rr as qb,\n  Dt as rb,\n  nr as sb,\n  Ir as tb,\n  os as ub,\n  sr as vb,\n  Cr as wb,\n  dn as xb,\n  ir as yb,\n  We as zb,\n  Js as Ab,\n  as as Bb,\n  Or as Cb,\n  Tt as Db,\n  Sr as Eb,\n  Ur as Fb,\n  Zs as Gb,\n  pn as Hb,\n  J as Ib,\n  It as Jb,\n  ot as Kb,\n  at as Lb,\n  bn as Mb,\n  Ue as Nb,\n  Dr as Ob,\n  Fr as Pb,\n  de as Qb,\n  gn as Rb,\n  yn as Sb,\n  wn as Tb,\n  An as Ub,\n  Xs as Vb,\n  En as Wb,\n  Mr as Xb,\n  ls as Yb,\n  us as Zb,\n  ds as _b,\n  Pn as $b,\n  or as ac,\n  hs as bc,\n  Gr as cc,\n  kn as dc,\n  Nn as ec,\n  Ec as fc,\n  ei as gc,\n  ti as hc,\n  ri as ic,\n  ni as jc,\n  Pc as kc,\n  ar as lc,\n  Bn as mc,\n  cr as nc,\n  je as oc,\n  Ft as pc,\n  gs as qc,\n  ci as rc,\n  fi as sc,\n  Tn as tc,\n  In as uc,\n  ys as vc,\n  lr as wc,\n  Cn as xc,\n  Uc as yc,\n  Lc as zc,\n  ws as Ac,\n  As as Bc,\n  li as Cc,\n  ui as Dc,\n  Dc as Ec,\n  Pu as Fc\n};\n/*! Bundled license information:\n\n@noble/hashes/esm/utils.js:\n  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)\n\n@noble/curves/esm/abstract/utils.js:\n@noble/curves/esm/abstract/modular.js:\n@noble/curves/esm/abstract/curve.js:\n@noble/curves/esm/abstract/weierstrass.js:\n@noble/curves/esm/_shortw_utils.js:\n@noble/curves/esm/secp256k1.js:\n  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)\n\naes-js/lib.esm/aes.js:\n  (*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. *)\n*/\n//# sourceMappingURL=OXIBDITK.js.map\n","environment":"isolate"},{"path":"missions.js","source":"import {\n  b as A\n} from \"./_deps/5GK4PSQG.js\";\nimport {\n  a as I\n} from \"./_deps/HHLKWD3J.js\";\nimport {\n  h\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as _,\n  c as m\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as p\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/missions.ts\nvar b = {\n  daily_login: { type: \"coins\", amount: 100 },\n  first_pve_win: { type: \"coins\", amount: 50 },\n  first_pvp_match: { type: \"coins\", amount: 100 },\n  play_3_games: { type: \"coins\", amount: 100 },\n  win_5_games: { type: \"coins\", amount: 200 },\n  streak_3: { type: \"coins\", amount: 150 },\n  streak_5: { type: \"coins\", amount: 300 },\n  streak_10: { type: \"coins\", amount: 750 },\n  vibefid_minted: { type: \"coins\", amount: 5e3 },\n  welcome_gift: { type: \"coins\", amount: 500 },\n  claim_vibe_badge: { type: \"badge\", amount: 0 }\n  // VIBE badge - +20% bonus coins in Wanted Cast\n}, B = _({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], t = d.toLowerCase();\n    return await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (e) => e.eq(\"playerAddress\", t)).filter(\n      (e) => e.or(\n        e.eq(e.field(\"date\"), a),\n        e.eq(e.field(\"date\"), \"once\")\n      )\n    ).collect();\n  }, \"handler\")\n}), S = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], t = d.toLowerCase();\n    return await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (e) => e.eq(\"playerAddress\", t)).filter(\n      (e) => e.and(\n        e.eq(e.field(\"date\"), a),\n        e.eq(e.field(\"missionType\"), \"daily_login\")\n      )\n    ).first() ? { success: !0, alreadyExists: !0 } : (await s.db.insert(\"personalMissions\", {\n      playerAddress: t,\n      date: a,\n      missionType: \"daily_login\",\n      completed: !0,\n      claimed: !1,\n      reward: b.daily_login.amount,\n      completedAt: Date.now()\n    }), { success: !0, created: !0 });\n  }, \"handler\")\n}), $ = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], t = d.toLowerCase();\n    await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (e) => e.eq(\"playerAddress\", t)).filter(\n      (e) => e.and(\n        e.eq(e.field(\"date\"), a),\n        e.eq(e.field(\"missionType\"), \"first_pve_win\")\n      )\n    ).first() || await s.db.insert(\"personalMissions\", {\n      playerAddress: t,\n      date: a,\n      missionType: \"first_pve_win\",\n      completed: !0,\n      claimed: !1,\n      reward: b.first_pve_win.amount,\n      completedAt: Date.now()\n    });\n  }, \"handler\")\n}), x = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], t = d.toLowerCase();\n    await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (e) => e.eq(\"playerAddress\", t)).filter(\n      (e) => e.and(\n        e.eq(e.field(\"date\"), a),\n        e.eq(e.field(\"missionType\"), \"first_pvp_match\")\n      )\n    ).first() || await s.db.insert(\"personalMissions\", {\n      playerAddress: t,\n      date: a,\n      missionType: \"first_pvp_match\",\n      completed: !0,\n      claimed: !1,\n      reward: b.first_pvp_match.amount,\n      completedAt: Date.now()\n    });\n  }, \"handler\")\n}), k = m({\n  args: {\n    playerAddress: i.string(),\n    streak: i.union(i.literal(3), i.literal(5), i.literal(10))\n  },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d, streak: a }) => {\n    let t = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], l = d.toLowerCase(), e = `streak_${a}`;\n    await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (n) => n.eq(\"playerAddress\", l)).filter(\n      (n) => n.and(\n        n.eq(n.field(\"date\"), t),\n        n.eq(n.field(\"missionType\"), e)\n      )\n    ).first() || await s.db.insert(\"personalMissions\", {\n      playerAddress: l,\n      date: t,\n      missionType: e,\n      completed: !0,\n      claimed: !1,\n      reward: b[e].amount,\n      completedAt: Date.now()\n    });\n  }, \"handler\")\n}), L = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = d.toLowerCase();\n    await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (l) => l.eq(\"playerAddress\", a)).filter(\n      (l) => l.and(\n        l.eq(l.field(\"date\"), \"once\"),\n        l.eq(l.field(\"missionType\"), \"vibefid_minted\")\n      )\n    ).first() || (await s.db.insert(\"personalMissions\", {\n      playerAddress: a,\n      date: \"once\",\n      // One-time mission\n      missionType: \"vibefid_minted\",\n      completed: !0,\n      claimed: !1,\n      reward: b.vibefid_minted.amount,\n      completedAt: Date.now()\n    }), console.log(\"\\u{1F3B4} VibeFID mint mission created for\", a));\n  }, \"handler\")\n}), V = m({\n  args: {\n    playerAddress: i.string(),\n    missionId: i.id(\"personalMissions\"),\n    language: i.optional(i.union(\n      i.literal(\"pt-BR\"),\n      i.literal(\"en\"),\n      i.literal(\"es\"),\n      i.literal(\"hi\"),\n      i.literal(\"ru\"),\n      i.literal(\"zh-CN\"),\n      i.literal(\"id\"),\n      i.literal(\"fr\"),\n      i.literal(\"ja\"),\n      i.literal(\"it\")\n    )),\n    skipCoins: i.optional(i.boolean())\n    // If true, only calculate reward without adding coins\n  },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d, missionId: a, language: t, skipCoins: l }) => {\n    let e = d.toLowerCase(), r = await s.db.get(a);\n    if (!r)\n      throw new Error(\"Mission not found\");\n    if (r.playerAddress !== e)\n      throw new Error(\"Mission does not belong to this player\");\n    if (r.claimed)\n      throw new Error(\"Mission already claimed\");\n    if (!r.completed)\n      throw new Error(\"Mission not completed yet\");\n    let n = await s.db.query(\"profiles\").withIndex(\"by_address\", (w) => w.eq(\"address\", e)).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    let y = b[r.missionType];\n    if (!y)\n      throw new Error(`Unknown mission type: ${r.missionType}`);\n    let c = t ? A(y.amount, t) : y.amount, f = n.coins || 0;\n    if (!l) {\n      let w = n.coins || 0;\n      f = w + c;\n      let g = (n.lifetimeEarned || 0) + c, o = n.stats?.aura ?? 500, u = 3;\n      await s.db.patch(n._id, {\n        coins: f,\n        lifetimeEarned: g,\n        stats: {\n          ...n.stats,\n          aura: o + u\n          // Award aura for mission completion\n        }\n      }), await h(\n        s,\n        e,\n        \"earn\",\n        c,\n        w,\n        f,\n        \"claimMission\",\n        String(a),\n        // Convert Convex ID to string\n        { missionType: r.missionType }\n      ), await I(s, {\n        address: e,\n        type: \"earn\",\n        amount: c,\n        source: \"mission\",\n        description: `Claimed mission: ${r.missionType}`,\n        balanceBefore: w,\n        balanceAfter: f\n      }), console.log(`\\u{1F4B0} Mission reward: ${c} TESTVBMS + ${u} aura for ${e}. Balance: ${w} \\u2192 ${f}, Aura: ${o} \\u2192 ${o + u}`);\n    }\n    return await s.db.patch(a, {\n      claimed: !0,\n      claimedAt: Date.now()\n    }), {\n      success: !0,\n      reward: c,\n      newBalance: f,\n      missionType: r.missionType\n    };\n  }, \"handler\")\n}), z = m({\n  args: {\n    playerAddress: i.string(),\n    language: i.optional(i.union(\n      i.literal(\"pt-BR\"),\n      i.literal(\"en\"),\n      i.literal(\"es\"),\n      i.literal(\"hi\"),\n      i.literal(\"ru\"),\n      i.literal(\"zh-CN\"),\n      i.literal(\"id\"),\n      i.literal(\"fr\"),\n      i.literal(\"ja\"),\n      i.literal(\"it\")\n    ))\n  },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d, language: a }) => {\n    let t = d.toLowerCase(), l = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], e = await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (o) => o.eq(\"playerAddress\", t)).filter(\n      (o) => o.and(\n        o.eq(o.field(\"completed\"), !0),\n        o.eq(o.field(\"claimed\"), !1),\n        o.or(\n          o.eq(o.field(\"date\"), l),\n          o.eq(o.field(\"date\"), \"once\")\n        )\n      )\n    ).collect();\n    if (e.length === 0)\n      return {\n        success: !0,\n        claimed: 0,\n        totalReward: 0\n      };\n    let r = await s.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", t)).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    let n = e.reduce((o, u) => {\n      let T = a ? A(u.reward, a) : u.reward;\n      return o + T;\n    }, 0), y = r.coins || 0, c = y + n, f = (r.lifetimeEarned || 0) + n;\n    await s.db.patch(r._id, {\n      coins: c,\n      lifetimeEarned: f\n    }), await s.db.insert(\"coinTransactions\", {\n      address: t,\n      amount: n,\n      type: \"earn\",\n      source: \"mission_batch\",\n      description: `Claimed ${e.length} missions`,\n      timestamp: Date.now(),\n      balanceBefore: y,\n      balanceAfter: c\n    });\n    let w = e.map((o) => o.missionType).join(\", \");\n    await h(\n      s,\n      t,\n      \"earn\",\n      n,\n      y,\n      c,\n      \"mission_batch\",\n      `${e.length}_missions`,\n      { reason: `Claimed ${e.length} missions: ${w}` }\n    ), console.log(`\\u{1F4B0} Mission rewards added to balance: ${n} TESTVBMS for ${t}. Balance: ${y} \\u2192 ${c}`);\n    let g = Date.now();\n    for (let o of e)\n      await s.db.patch(o._id, {\n        claimed: !0,\n        claimedAt: g\n      });\n    return {\n      success: !0,\n      claimed: e.length,\n      totalReward: n,\n      newBalance: c\n    };\n  }, \"handler\")\n}), R = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = d.toLowerCase(), t = await s.db.query(\"profiles\").withIndex(\"by_address\", (e) => e.eq(\"address\", a)).first();\n    return t ? t.hasReceivedWelcomeGift ? { created: !1 } : (await s.db.patch(t._id, {\n      hasReceivedWelcomeGift: !0\n    }), await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (e) => e.eq(\"playerAddress\", a)).filter(\n      (e) => e.and(\n        e.eq(e.field(\"date\"), \"once\"),\n        e.eq(e.field(\"missionType\"), \"welcome_gift\")\n      )\n    ).first() ? { created: !1 } : (await s.db.insert(\"personalMissions\", {\n      playerAddress: a,\n      date: \"once\",\n      missionType: \"welcome_gift\",\n      completed: !0,\n      // Auto-completed\n      claimed: !1,\n      // Not claimed yet\n      reward: 500,\n      completedAt: Date.now()\n    }), console.log(`\\u{1F381} Created welcome_gift mission for ${a}`), { created: !0 })) : { created: !1 };\n  }, \"handler\")\n}), q = _({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = d.toLowerCase(), t = await s.db.query(\"farcasterCards\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).collect(), e = (await s.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first())?.hasVibeBadge === !0, r = t.length > 0;\n    return {\n      eligible: r && !e,\n      hasVibeFIDCards: r,\n      hasBadge: e,\n      vibeFIDCount: t.length\n    };\n  }, \"handler\")\n}), F = m({\n  args: { playerAddress: i.string() },\n  handler: /* @__PURE__ */ p(async (s, { playerAddress: d }) => {\n    let a = d.toLowerCase(), t = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", a)).first();\n    if (!t)\n      throw new Error(\"Profile not found\");\n    if (t.hasVibeBadge === !0)\n      throw new Error(\"VIBE badge already claimed\");\n    if ((await s.db.query(\"farcasterCards\").withIndex(\"by_address\", (r) => r.eq(\"address\", a)).collect()).length === 0)\n      throw new Error(\"No VibeFID cards found. Mint a VibeFID first to claim the VIBE badge!\");\n    return await s.db.patch(t._id, {\n      hasVibeBadge: !0\n    }), await s.db.query(\"personalMissions\").withIndex(\"by_player_date\", (r) => r.eq(\"playerAddress\", a)).filter(\n      (r) => r.and(\n        r.eq(r.field(\"date\"), \"once\"),\n        r.eq(r.field(\"missionType\"), \"claim_vibe_badge\")\n      )\n    ).first() || await s.db.insert(\"personalMissions\", {\n      playerAddress: a,\n      date: \"once\",\n      missionType: \"claim_vibe_badge\",\n      completed: !0,\n      claimed: !0,\n      reward: 0,\n      // Badge reward, not coins\n      completedAt: Date.now(),\n      claimedAt: Date.now()\n    }), console.log(`\\u2728 VIBE badge claimed by ${a} (+20% Wanted Cast bonus)`), {\n      success: !0,\n      message: \"VIBE badge claimed! You now receive +20% bonus coins in Wanted Cast.\"\n    };\n  }, \"handler\")\n});\nexport {\n  q as checkVibeBadgeEligibility,\n  z as claimAllMissions,\n  V as claimMission,\n  F as claimVibeBadge,\n  R as ensureWelcomeGift,\n  B as getPlayerMissions,\n  S as markDailyLogin,\n  $ as markFirstPveWin,\n  x as markFirstPvpMatch,\n  L as markVibeFIDMinted,\n  k as markWinStreak\n};\n//# sourceMappingURL=missions.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/missions.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"MISSION_REWARDS\", \"getPlayerMissions\", \"query\", \"v\", \"__name\", \"ctx\", \"playerAddress\", \"today\", \"normalizedAddress\", \"q\", \"markDailyLogin\", \"mutation\", \"markFirstPveWin\", \"markFirstPvpMatch\", \"markWinStreak\", \"streak\", \"missionType\", \"markVibeFIDMinted\", \"claimMission\", \"missionId\", \"language\", \"skipCoins\", \"mission\", \"profile\", \"rewardInfo\", \"boostedReward\", \"applyLanguageBoost\", \"newBalance\", \"currentBalance\", \"newLifetimeEarned\", \"currentAura\", \"auraReward\", \"createAuditLog\", \"logTransaction\", \"claimAllMissions\", \"missions\", \"totalReward\", \"sum\", \"m\", \"missionTypes\", \"now\", \"ensureWelcomeGift\", \"checkVibeBadgeEligibility\", \"vibeFIDCards\", \"hasBadge\", \"hasVibeFIDCards\", \"claimVibeBadge\"]\n}\n"},{"path":"mostWanted.js","source":"import {\n  a as y,\n  c as p\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as t\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as f\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/mostWanted.ts\nvar S = y({\n  args: {\n    limit: t.optional(t.number()),\n    offset: t.optional(t.number())\n  },\n  handler: /* @__PURE__ */ f(async (r, n) => {\n    let a = Math.min(n.limit || 12, 2e4), o = n.offset || 0, c = await r.db.query(\"farcasterCards\").take(1e4), u = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], s = await r.db.query(\"cardVotes\").withIndex(\"by_date\", (e) => e.eq(\"date\", u)).take(5e4), i = /* @__PURE__ */ new Map();\n    for (let e of s) {\n      let l = i.get(e.cardFid) || 0;\n      i.set(e.cardFid, l + e.voteCount);\n    }\n    let d = c.filter((e) => e.contractAddress).map((e) => ({\n      _id: e._id,\n      fid: e.fid,\n      username: e.username,\n      displayName: e.displayName,\n      pfpUrl: e.pfpUrl,\n      cardImageUrl: e.cardImageUrl,\n      rarity: e.rarity,\n      mintScore: e.neynarScore,\n      currentScore: e.latestNeynarScore ?? e.neynarScore,\n      scoreDiff: (e.latestNeynarScore ?? e.neynarScore) - e.neynarScore,\n      votes: i.get(e.fid) || 0\n    })).sort((e, l) => l.scoreDiff - e.scoreDiff);\n    return {\n      cards: d.slice(o, o + a),\n      totalCount: d.length,\n      hasMore: o + a < d.length\n    };\n  }, \"handler\")\n}), h = p({\n  args: {\n    fid: t.number(),\n    score: t.number()\n  },\n  handler: /* @__PURE__ */ f(async (r, { fid: n, score: a }) => {\n    let o = await r.db.query(\"farcasterCards\").withIndex(\"by_fid\", (c) => c.eq(\"fid\", n)).first();\n    return o ? (await r.db.patch(o._id, {\n      latestNeynarScore: a,\n      latestScoreCheckedAt: Date.now()\n    }), { success: !0 }) : { success: !1, error: \"Card not found\" };\n  }, \"handler\")\n}), w = p({\n  args: {\n    updates: t.array(t.object({\n      fid: t.number(),\n      score: t.number()\n    }))\n  },\n  handler: /* @__PURE__ */ f(async (r, { updates: n }) => {\n    let a = 0, o = 0;\n    for (let { fid: c, score: u } of n) {\n      let s = await r.db.query(\"farcasterCards\").withIndex(\"by_fid\", (d) => d.eq(\"fid\", c)).first();\n      if (!s) continue;\n      let i = s.latestNeynarScore ?? s.neynarScore;\n      if (Math.abs(i - u) < 1e-4) {\n        o++;\n        continue;\n      }\n      await r.db.patch(s._id, {\n        latestNeynarScore: u,\n        latestScoreCheckedAt: Date.now()\n      }), a++;\n    }\n    return { success: !0, updatedCount: a, skippedCount: o };\n  }, \"handler\")\n}), g = y({\n  args: {},\n  handler: /* @__PURE__ */ f(async (r) => (await r.db.query(\"farcasterCards\").take(1e4)).map((a) => a.fid), \"handler\")\n});\nexport {\n  w as batchUpdateScores,\n  g as getFidsForScoreUpdate,\n  S as getRanking,\n  h as updateLatestScore\n};\n//# sourceMappingURL=mostWanted.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/mostWanted.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;AAYO,IAAMA,IAAaC,EAAM;AAAA,EAC9B,MAAM;AAAA,IACJ,OAAOC,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,IAC5B,QAAQA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,EAC/B;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,MAAS;AAC5B,QAAMC,IAAQ,KAAK,IAAID,EAAK,SAAS,IAAI,GAAK,GACxCE,IAASF,EAAK,UAAU,GAGxBG,IAAQ,MAAMJ,EAAI,GACrB,MAAM,gBAAgB,EACtB,KAAK,GAAK,GAIPK,KAAQ,oBAAI,KAAK,GAAE,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,GAC7CC,IAAW,MAAMN,EAAI,GACxB,MAAM,WAAW,EACjB,UAAU,WAAW,CAACO,MAAMA,EAAE,GAAG,QAAQF,CAAK,CAAC,EAC/C,KAAK,GAAK,GAGPG,IAAU,oBAAI,IAAoB;AACxC,aAAWC,KAAQH,GAAU;AAC3B,UAAMI,IAAUF,EAAQ,IAAIC,EAAK,OAAO,KAAK;AAC7C,MAAAD,EAAQ,IAAIC,EAAK,SAASC,IAAUD,EAAK,SAAS;AAAA,IACpD;AAGA,QAAME,IAAWP,EACd,OAAO,CAAAQ,MAAKA,EAAE,eAAe,EAC7B,IAAI,CAAAC,OAAS;AAAA,MACZ,KAAKA,EAAK;AAAA,MACV,KAAKA,EAAK;AAAA,MACV,UAAUA,EAAK;AAAA,MACf,aAAaA,EAAK;AAAA,MAClB,QAAQA,EAAK;AAAA,MACb,cAAcA,EAAK;AAAA,MACnB,QAAQA,EAAK;AAAA,MACb,WAAWA,EAAK;AAAA,MAChB,cAAcA,EAAK,qBAAqBA,EAAK;AAAA,MAC7C,YAAYA,EAAK,qBAAqBA,EAAK,eAAeA,EAAK;AAAA,MAC/D,OAAOL,EAAQ,IAAIK,EAAK,GAAG,KAAK;AAAA,IAClC,EAAE,EACD,KAAK,CAACC,GAAGC,MAAMA,EAAE,YAAYD,EAAE,SAAS;AAE3C,WAAO;AAAA,MACL,OAAOH,EAAS,MAAMR,GAAQA,IAASD,CAAK;AAAA,MAC5C,YAAYS,EAAS;AAAA,MACrB,SAASR,IAASD,IAAQS,EAAS;AAAA,IACrC;AAAA,EACF,GA/CS;AAgDX,CAAC,GAMYK,IAAoBC,EAAS;AAAA,EACxC,MAAM;AAAA,IACJ,KAAKnB,EAAE,OAAO;AAAA,IACd,OAAOA,EAAE,OAAO;AAAA,EAClB;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,KAAAkB,GAAK,OAAAC,EAAM,MAAM;AACtC,QAAMN,IAAO,MAAMb,EAAI,GACpB,MAAM,gBAAgB,EACtB,UAAU,UAAU,CAACO,MAAMA,EAAE,GAAG,OAAOW,CAAG,CAAC,EAC3C,MAAM;AAET,WAAKL,KAEL,MAAMb,EAAI,GAAG,MAAMa,EAAK,KAAK;AAAA,MAC3B,mBAAmBM;AAAA,MACnB,sBAAsB,KAAK,IAAI;AAAA,IACjC,CAAC,GAEM,EAAE,SAAS,GAAK,KAPL,EAAE,SAAS,IAAO,OAAO,iBAAiB;AAAA,EAQ9D,GAdS;AAeX,CAAC,GAMYC,IAAoBH,EAAS;AAAA,EACxC,MAAM;AAAA,IACJ,SAASnB,EAAE,MAAMA,EAAE,OAAO;AAAA,MACxB,KAAKA,EAAE,OAAO;AAAA,MACd,OAAOA,EAAE,OAAO;AAAA,IAClB,CAAC,CAAC;AAAA,EACJ;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,SAAAqB,EAAQ,MAAM;AACnC,QAAIC,IAAe,GACfC,IAAe;AAEnB,aAAW,EAAE,KAAAL,GAAK,OAAAC,EAAM,KAAKE,GAAS;AACpC,UAAMR,IAAO,MAAMb,EAAI,GACpB,MAAM,gBAAgB,EACtB,UAAU,UAAU,CAACO,MAAMA,EAAE,GAAG,OAAOW,CAAG,CAAC,EAC3C,MAAM;AAET,UAAI,CAACL,EAAM;AAGX,UAAMW,IAAYX,EAAK,qBAAqBA,EAAK;AACjD,UAAI,KAAK,IAAIW,IAAYL,CAAK,IAAI,MAAQ;AACxC,QAAAI;AACA;AAAA,MACF;AAEA,YAAMvB,EAAI,GAAG,MAAMa,EAAK,KAAK;AAAA,QAC3B,mBAAmBM;AAAA,QACnB,sBAAsB,KAAK,IAAI;AAAA,MACjC,CAAC,GAEDG;AAAA,IACF;AAEA,WAAO,EAAE,SAAS,IAAM,cAAAA,GAAc,cAAAC,EAAa;AAAA,EACrD,GA5BS;AA6BX,CAAC,GAKYE,IAAwB5B,EAAM;AAAA,EACzC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAE,EAAA,OAAOC,OAEA,MAAMA,EAAI,GAAG,MAAM,gBAAgB,EAAE,KAAK,GAAK,GAChD,IAAI,CAAAY,MAAKA,EAAE,GAAG,GAHpB;AAKX,CAAC;\",\n  \"names\": [\"getRanking\", \"query\", \"v\", \"__name\", \"ctx\", \"args\", \"limit\", \"offset\", \"cards\", \"today\", \"allVotes\", \"q\", \"voteMap\", \"vote\", \"current\", \"withDiff\", \"c\", \"card\", \"a\", \"b\", \"updateLatestScore\", \"mutation\", \"fid\", \"score\", \"batchUpdateScores\", \"updates\", \"updatedCount\", \"skippedCount\", \"lastScore\", \"getFidsForScoreUpdate\"]\n}\n"},{"path":"neynarScore.js","source":"import {\n  a as k,\n  c as C\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as l\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as u\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/neynarScore.ts\nvar _ = C({\n  args: {\n    fid: l.number(),\n    username: l.string(),\n    score: l.number(),\n    rarity: l.string()\n  },\n  handler: /* @__PURE__ */ u(async (o, { fid: n, username: r, score: c, rarity: t }) => {\n    let e = await o.db.query(\"neynarScoreHistory\").withIndex(\"by_fid\", (d) => d.eq(\"fid\", n)).order(\"desc\").first();\n    if (e && Math.abs(e.score - c) < 1e-4)\n      return console.log(\"Score unchanged for FID \" + n + \": \" + c), { success: !0, saved: !1, reason: \"score_unchanged\" };\n    await o.db.insert(\"neynarScoreHistory\", {\n      fid: n,\n      username: r,\n      score: c,\n      rarity: t,\n      checkedAt: Date.now()\n    });\n    let a = e ? e.score : \"N/A\";\n    return console.log(\"Score saved for FID \" + n + \": \" + a + \" -> \" + c), { success: !0, saved: !0 };\n  }, \"handler\")\n}), I = k({\n  args: {},\n  handler: /* @__PURE__ */ u(async (o) => await o.db.query(\"neynarScoreHistory\").order(\"desc\").take(20), \"handler\")\n}), x = k({\n  args: { fid: l.number() },\n  handler: /* @__PURE__ */ u(async (o, { fid: n }) => {\n    let r = await o.db.query(\"farcasterCards\").withIndex(\"by_fid\", (f) => f.eq(\"fid\", n)).first(), c = await o.db.query(\"neynarScoreHistory\").withIndex(\"by_fid\", (f) => f.eq(\"fid\", n)).order(\"desc\").take(50);\n    if (!r || !r.neynarScore) {\n      if (c.length === 0) return null;\n      let f = [...c].sort((w, H) => w.checkedAt - H.checkedAt), h = f[0], g = f[f.length - 1], S = g.score - h.score, A = h.score > 0 ? (S / h.score * 100).toFixed(1) : \"0\";\n      return {\n        firstCheck: { score: h.score, rarity: h.rarity, checkedAt: h.checkedAt },\n        latestCheck: { score: g.score, rarity: g.rarity, checkedAt: g.checkedAt },\n        totalChecks: c.length,\n        scoreDiff: S,\n        percentChange: A,\n        history: c.slice(0, 10)\n      };\n    }\n    let t = {\n      _id: \"mint\",\n      fid: r.fid,\n      username: r.username,\n      score: r.neynarScore,\n      rarity: r.rarity,\n      checkedAt: r.mintedAt || r._creationTime\n    };\n    if (c.length === 0)\n      return {\n        firstCheck: { score: r.neynarScore, rarity: r.rarity, checkedAt: t.checkedAt },\n        latestCheck: { score: r.neynarScore, rarity: r.rarity, checkedAt: t.checkedAt },\n        totalChecks: 1,\n        scoreDiff: 0,\n        percentChange: \"0\",\n        history: [t],\n        isMintTimeOnly: !0,\n        mintRarity: r.rarity\n        // Original mint rarity\n      };\n    let e = [...c, t].sort((f, h) => f.checkedAt - h.checkedAt), s = [...c].sort((f, h) => f.checkedAt - h.checkedAt)[0]?.rarity || r.rarity, i = t, y = e[e.length - 1], m = y.score - i.score, p = i.score > 0 ? (m / i.score * 100).toFixed(1) : \"0\", b = e.slice(-10).reverse();\n    return {\n      firstCheck: { score: i.score, rarity: s, checkedAt: i.checkedAt },\n      latestCheck: { score: y.score, rarity: y.rarity, checkedAt: y.checkedAt },\n      totalChecks: e.length,\n      scoreDiff: m,\n      percentChange: p,\n      history: b,\n      mintTimeScore: r.neynarScore,\n      mintRarity: s\n      // Original mint rarity from oldest history entry\n    };\n  }, \"handler\")\n}), v = C({\n  args: {},\n  handler: /* @__PURE__ */ u(async (o) => {\n    let n = await o.db.query(\"farcasterCards\").collect(), r = 0, c = 0;\n    for (let t of n) {\n      if (await o.db.query(\"neynarScoreHistory\").withIndex(\"by_fid\", (a) => a.eq(\"fid\", t.fid)).first()) {\n        c++;\n        continue;\n      }\n      await o.db.insert(\"neynarScoreHistory\", {\n        fid: t.fid,\n        username: t.username,\n        score: t.neynarScore,\n        rarity: t.rarity,\n        checkedAt: t.mintedAt || t._creationTime\n      }), r++;\n    }\n    return { success: !0, backfilledCount: r, skippedCount: c };\n  }, \"handler\")\n}), M = C({\n  args: {},\n  handler: /* @__PURE__ */ u(async (o) => {\n    let n = await o.db.query(\"neynarScoreHistory\").collect(), r = /* @__PURE__ */ new Map();\n    for (let t of n) {\n      let e = r.get(t.fid) || [];\n      e.push(t), r.set(t.fid, e);\n    }\n    let c = 0;\n    for (let [t, e] of r) {\n      let a = e.sort((s, i) => s.checkedAt - i.checkedAt), d = null;\n      for (let s of a)\n        d !== null && Math.abs(s.score - d) < 1e-4 ? (await o.db.delete(s._id), c++) : d = s.score;\n    }\n    return console.log(\"Cleanup complete: \" + c + \" duplicates deleted\"), { success: !0, deletedCount: c };\n  }, \"handler\")\n}), U = k({\n  args: { limit: l.optional(l.number()) },\n  handler: /* @__PURE__ */ u(async (o, n) => {\n    let r = n.limit || 10, c = await o.db.query(\"farcasterCards\").collect(), t = [];\n    for (let e of c) {\n      let a = await o.db.query(\"neynarScoreHistory\").withIndex(\"by_fid\", (y) => y.eq(\"fid\", e.fid)).order(\"desc\").first();\n      if (!a) continue;\n      let d = e.neynarScore, s = a.score, i = s - d;\n      i > 0 && t.push({\n        fid: e.fid,\n        username: e.username,\n        displayName: e.displayName,\n        pfpUrl: e.pfpUrl,\n        cardImageUrl: e.cardImageUrl,\n        mintScore: d,\n        currentScore: s,\n        scoreDiff: i,\n        percentChange: (i / d * 100).toFixed(1),\n        rarity: e.rarity,\n        currentRarity: a.rarity,\n        lastChecked: a.checkedAt\n      });\n    }\n    return t.sort((e, a) => a.scoreDiff - e.scoreDiff), t.slice(0, r);\n  }, \"handler\")\n}), F = k({\n  args: {\n    limit: l.optional(l.number()),\n    offset: l.optional(l.number())\n  },\n  handler: /* @__PURE__ */ u(async (o, n) => {\n    let r = Math.min(n.limit || 12, 50), c = n.offset || 0, t = await o.db.query(\"farcasterCards\").order(\"desc\").collect(), e = [];\n    for (let s of t) {\n      let i = await o.db.query(\"neynarScoreHistory\").withIndex(\"by_fid\", (b) => b.eq(\"fid\", s.fid)).order(\"desc\").first(), y = s.neynarScore, m = i?.score || y, p = m - y;\n      e.push({\n        _id: s._id,\n        fid: s.fid,\n        username: s.username,\n        displayName: s.displayName,\n        pfpUrl: s.pfpUrl,\n        cardImageUrl: s.cardImageUrl,\n        rarity: s.rarity,\n        mintScore: y,\n        currentScore: m,\n        scoreDiff: p,\n        percentChange: y > 0 ? p / y * 100 : 0,\n        hasScoreHistory: !!i\n      });\n    }\n    e.sort((s, i) => i.scoreDiff - s.scoreDiff);\n    let a = e.slice(c, c + r), d = e.length;\n    return {\n      cards: a,\n      totalCount: d,\n      hasMore: c + r < d\n    };\n  }, \"handler\")\n});\nexport {\n  v as backfillScoreHistory,\n  M as cleanupDuplicateScores,\n  I as getAllScoreHistory,\n  F as getMostWantedRanking,\n  U as getMostWantedRising,\n  x as getScoreHistory,\n  _ as saveScoreCheck\n};\n//# sourceMappingURL=neynarScore.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/neynarScore.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"saveScoreCheck\", \"mutation\", \"v\", \"__name\", \"ctx\", \"fid\", \"username\", \"score\", \"rarity\", \"lastCheck\", \"q\", \"prevScore\", \"getAllScoreHistory\", \"query\", \"getScoreHistory\", \"card\", \"history\", \"sorted\", \"a\", \"b\", \"firstCheck\", \"latestCheck\", \"scoreDiff\", \"percentChange\", \"mintTimeEntry\", \"allEntries\", \"mintRarity\", \"recentHistory\", \"backfillScoreHistory\", \"cards\", \"backfilledCount\", \"skippedCount\", \"cleanupDuplicateScores\", \"allHistory\", \"byFid\", \"entry\", \"list\", \"deletedCount\", \"entries\", \"getMostWantedRising\", \"args\", \"limit\", \"results\", \"mintScore\", \"currentScore\", \"getMostWantedRanking\", \"offset\", \"allCards\", \"cardsWithScoreChange\", \"paginatedCards\", \"totalCount\"]\n}\n"},{"path":"nftCollections.js","source":"import {\n  a as r,\n  d as c\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as n\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as i\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/nftCollections.ts\nvar u = r({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => await t.db.query(\"nftCollections\").withIndex(\"by_active\", (e) => e.eq(\"active\", !0)).collect(), \"handler\")\n}), w = r({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => await t.db.query(\"nftCollections\").collect(), \"handler\")\n}), f = c({\n  args: {\n    collectionId: n.string(),\n    name: n.string(),\n    shortName: n.string(),\n    contractAddress: n.string(),\n    chain: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, e) => {\n    if (await t.db.query(\"nftCollections\").withIndex(\"by_collection_id\", (s) => s.eq(\"collectionId\", e.collectionId)).first())\n      throw new Error(`Collection with ID \"${e.collectionId}\" already exists`);\n    return { success: !0, id: await t.db.insert(\"nftCollections\", {\n      ...e,\n      active: !0,\n      createdAt: Date.now()\n    }) };\n  }, \"handler\")\n}), C = c({\n  args: {\n    collectionId: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, e) => {\n    let o = await t.db.query(\"nftCollections\").withIndex(\"by_collection_id\", (l) => l.eq(\"collectionId\", e.collectionId)).first();\n    if (!o)\n      throw new Error(`Collection \"${e.collectionId}\" not found`);\n    return await t.db.delete(o._id), { success: !0 };\n  }, \"handler\")\n}), h = c({\n  args: {\n    collectionId: n.string()\n  },\n  handler: /* @__PURE__ */ i(async (t, e) => {\n    let o = await t.db.query(\"nftCollections\").withIndex(\"by_collection_id\", (l) => l.eq(\"collectionId\", e.collectionId)).first();\n    if (!o)\n      throw new Error(`Collection \"${e.collectionId}\" not found`);\n    return await t.db.patch(o._id, {\n      active: !o.active\n    }), { success: !0, active: !o.active };\n  }, \"handler\")\n}), g = c({\n  args: {},\n  handler: /* @__PURE__ */ i(async (t) => await t.db.query(\"nftCollections\").first() ? { success: !1, message: \"Collections already initialized\" } : (await t.db.insert(\"nftCollections\", {\n    collectionId: \"vbms\",\n    name: \"Vibe Most Wanted\",\n    shortName: \"VBMS\",\n    contractAddress: \"0xF14C1dC8Ce5fE65413379F76c43fA1460C31E728\",\n    chain: \"base\",\n    active: !0,\n    createdAt: Date.now()\n  }), { success: !0, message: \"Initialized with VBMS collection\" }), \"handler\")\n});\nexport {\n  f as addCollection,\n  u as getActiveCollections,\n  w as getAllCollections,\n  g as initializeCollections,\n  C as removeCollection,\n  h as toggleCollection\n};\n//# sourceMappingURL=nftCollections.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/nftCollections.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getActiveCollections\", \"query\", \"__name\", \"ctx\", \"q\", \"getAllCollections\", \"addCollection\", \"internalMutation\", \"v\", \"args\", \"removeCollection\", \"collection\", \"toggleCollection\", \"initializeCollections\"]\n}\n"},{"path":"nftGifts.js","source":"import {\n  a,\n  c as l\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as o\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/nftGifts.ts\nvar u = l({\n  args: {\n    senderFid: e.number(),\n    senderAddress: e.string(),\n    recipientFid: e.number(),\n    recipientAddress: e.string(),\n    contractAddress: e.string(),\n    collectionId: e.string(),\n    collectionName: e.string(),\n    tokenId: e.string(),\n    nftName: e.optional(e.string()),\n    nftImageUrl: e.optional(e.string()),\n    txHash: e.string(),\n    messageId: e.optional(e.id(\"cardVotes\"))\n  },\n  handler: /* @__PURE__ */ o(async (n, t) => {\n    let r = Date.now(), d = await n.db.query(\"nftGifts\").withIndex(\"by_txHash\", (i) => i.eq(\"txHash\", t.txHash)).first();\n    return d ? { success: !1, error: \"Gift already recorded\", giftId: d._id } : { success: !0, giftId: await n.db.insert(\"nftGifts\", {\n      senderFid: t.senderFid,\n      senderAddress: t.senderAddress.toLowerCase(),\n      recipientFid: t.recipientFid,\n      recipientAddress: t.recipientAddress.toLowerCase(),\n      contractAddress: t.contractAddress.toLowerCase(),\n      collectionId: t.collectionId,\n      collectionName: t.collectionName,\n      tokenId: t.tokenId,\n      nftName: t.nftName,\n      nftImageUrl: t.nftImageUrl,\n      txHash: t.txHash,\n      messageId: t.messageId,\n      status: \"confirmed\",\n      // Assume confirmed since we're called after TX success\n      createdAt: r,\n      confirmedAt: r\n    }) };\n  }, \"handler\")\n}), I = a({\n  args: {\n    senderFid: e.number(),\n    limit: e.optional(e.number())\n  },\n  handler: /* @__PURE__ */ o(async (n, t) => {\n    let r = t.limit || 20, d = await n.db.query(\"nftGifts\").withIndex(\"by_sender\", (i) => i.eq(\"senderFid\", t.senderFid)).order(\"desc\").take(r);\n    return await Promise.all(\n      d.map(async (i) => {\n        let c = await n.db.query(\"farcasterCards\").withIndex(\"by_fid\", (f) => f.eq(\"fid\", i.recipientFid)).first();\n        return {\n          ...i,\n          recipientUsername: c?.username || `FID ${i.recipientFid}`,\n          recipientPfpUrl: c?.pfpUrl || \"\"\n        };\n      })\n    );\n  }, \"handler\")\n}), F = a({\n  args: {\n    recipientFid: e.number(),\n    limit: e.optional(e.number())\n  },\n  handler: /* @__PURE__ */ o(async (n, t) => {\n    let r = t.limit || 20, d = await n.db.query(\"nftGifts\").withIndex(\"by_recipient\", (i) => i.eq(\"recipientFid\", t.recipientFid)).order(\"desc\").take(r);\n    return await Promise.all(\n      d.map(async (i) => {\n        let c = await n.db.query(\"farcasterCards\").withIndex(\"by_fid\", (f) => f.eq(\"fid\", i.senderFid)).first();\n        return {\n          ...i,\n          senderUsername: c?.username || `FID ${i.senderFid}`,\n          senderPfpUrl: c?.pfpUrl || \"\"\n        };\n      })\n    );\n  }, \"handler\")\n}), h = a({\n  args: { recipientFid: e.number() },\n  handler: /* @__PURE__ */ o(async (n, t) => {\n    let r = Date.now() - 6048e5;\n    return (await n.db.query(\"nftGifts\").withIndex(\"by_recipient\", (s) => s.eq(\"recipientFid\", t.recipientFid)).filter((s) => s.gt(s.field(\"createdAt\"), r)).collect()).length;\n  }, \"handler\")\n});\nexport {\n  F as getReceivedGifts,\n  I as getSentGifts,\n  h as getUnreadGiftCount,\n  u as recordNFTGift\n};\n//# sourceMappingURL=nftGifts.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/nftGifts.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"recordNFTGift\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"now\", \"existing\", \"q\", \"getSentGifts\", \"query\", \"limit\", \"gifts\", \"gift\", \"recipientCard\", \"getReceivedGifts\", \"senderCard\", \"getUnreadGiftCount\", \"oneWeekAgo\"]\n}\n"},{"path":"notifications.js","source":"import {\n  b as w\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as $,\n  b,\n  c as k,\n  e as x,\n  f as h\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/notifications.ts\nvar M = $({\n  args: { fid: i.string() },\n  handler: /* @__PURE__ */ c(async (e, { fid: n }) => await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (t) => t.eq(\"fid\", n)).first(), \"handler\")\n}), U = b({\n  args: { fid: i.string() },\n  handler: /* @__PURE__ */ c(async (e, { fid: n }) => await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (t) => t.eq(\"fid\", n)).first(), \"handler\")\n}), q = b({\n  args: { fid: i.string() },\n  handler: /* @__PURE__ */ c(async (e, { fid: n }) => await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (t) => t.eq(\"fid\", n)).take(10), \"handler\")\n}), O = b({\n  args: {},\n  handler: /* @__PURE__ */ c(async (e) => await e.db.query(\"notificationTokens\").take(5e4), \"handler\")\n});\nfunction F(e) {\n  return e.includes(\"neynar\") ? \"neynar\" : \"warpcast\";\n}\nc(F, \"getPlatformFromUrl\");\nvar V = k({\n  args: {\n    fid: i.string(),\n    token: i.string(),\n    url: i.string(),\n    app: i.optional(i.string())\n    // \"vbms\" or \"vibefid\"\n  },\n  handler: /* @__PURE__ */ c(async (e, { fid: n, token: o, url: t, app: s }) => {\n    let a = Date.now(), r = F(t), d = s || \"vbms\", u = await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (l) => l.eq(\"fid\", n)).take(10), f = u.find((l) => l.platform === r && l.app === d);\n    if (f)\n      return await e.db.patch(f._id, {\n        token: o,\n        url: t,\n        platform: r,\n        app: d,\n        lastUpdated: a\n      }), console.log(`\\u2705 Updated ${r}/${d} notification token for FID ${n}`), f._id;\n    {\n      let l = u.find((g) => g.platform === r && !g.app);\n      if (l)\n        return await e.db.patch(l._id, {\n          app: d,\n          token: o,\n          url: t,\n          platform: r,\n          lastUpdated: a\n        }), console.log(`\\u{1F504} Migrated legacy token for FID ${n} to ${r}/${d}`), l._id;\n      let y = await e.db.insert(\"notificationTokens\", {\n        fid: n,\n        token: o,\n        url: t,\n        platform: r,\n        app: d,\n        createdAt: a,\n        lastUpdated: a\n      });\n      return console.log(`\\u2705 Created ${r}/${d} notification token for FID ${n}`), y;\n    }\n  }, \"handler\")\n}), j = k({\n  args: { fid: i.string() },\n  handler: /* @__PURE__ */ c(async (e, { fid: n }) => {\n    let o = await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (t) => t.eq(\"fid\", n)).first();\n    return o ? (await e.db.delete(o._id), console.log(`\\u274C Removed notification token for FID ${n}`), !0) : (console.log(`\\u26A0\\uFE0F No token found for FID ${n}`), !1);\n  }, \"handler\")\n}), z = k({\n  args: {\n    tokens: i.array(\n      i.object({\n        fid: i.string(),\n        token: i.string(),\n        url: i.string(),\n        createdAt: i.optional(i.number())\n      })\n    )\n  },\n  handler: /* @__PURE__ */ c(async (e, { tokens: n }) => {\n    let o = 0, t = 0;\n    for (let s of n) {\n      let a = Date.now(), r = await e.db.query(\"notificationTokens\").withIndex(\"by_fid\", (d) => d.eq(\"fid\", s.fid)).first();\n      r ? (await e.db.patch(r._id, {\n        token: s.token,\n        url: s.url,\n        lastUpdated: a\n      }), t++) : (await e.db.insert(\"notificationTokens\", {\n        fid: s.fid,\n        token: s.token,\n        url: s.url,\n        createdAt: s.createdAt || a,\n        lastUpdated: a\n      }), o++);\n    }\n    return console.log(`\\u2705 Imported ${o} tokens, updated ${t} tokens`), { imported: o, updated: t };\n  }, \"handler\")\n});\nasync function _(e, n, o, t = \"https://vibemostwanted.xyz\") {\n  let s = process.env.NEYNAR_API_KEY;\n  if (!s)\n    return console.error(\"\\u274C NEYNAR_API_KEY not configured\"), { success_count: 0, failure_count: e.length || 0, not_attempted_count: 0 };\n  try {\n    let a = {\n      target_fids: e,\n      notification: {\n        title: n.slice(0, 32),\n        body: o.slice(0, 128),\n        target_url: t,\n        uuid: crypto.randomUUID()\n      }\n    }, r = await fetch(\"https://api.neynar.com/v2/farcaster/frame/notifications/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-api-key\": s\n      },\n      body: JSON.stringify(a)\n    });\n    if (!r.ok) {\n      let u = await r.text();\n      return console.error(`\\u274C Neynar API error: ${r.status} - ${u}`), { success_count: 0, failure_count: e.length || 0, not_attempted_count: 0 };\n    }\n    let d = await r.json();\n    return {\n      success_count: d.success_count || 0,\n      failure_count: d.failure_count || 0,\n      not_attempted_count: d.not_attempted_count || 0\n    };\n  } catch (a) {\n    return console.error(`\\u274C Neynar fetch error: ${a.message}`), { success_count: 0, failure_count: e.length || 0, not_attempted_count: 0 };\n  }\n}\nc(_, \"sendViaNeynar\");\nvar K = {\n  common: 720 * 60 * 1e3,\n  // 12 hours\n  rare: 1440 * 60 * 1e3,\n  // 1 day\n  epic: 2880 * 60 * 1e3,\n  // 2 days\n  legendary: 5760 * 60 * 1e3,\n  // 4 days\n  mythic: 7200 * 60 * 1e3,\n  // 5 days\n  vibefid: 0\n  // Infinite\n}, T = 3600 * 1e3, E = 360 * 60 * 1e3, W = h({\n  args: {},\n  // @ts-ignore\n  handler: /* @__PURE__ */ c(async (e) => {\n    let { api: n } = await import(\"./_deps/4SZP7OOE.js\");\n    try {\n      console.log(\"\\u26A1 Checking for low energy raid decks...\");\n      let o = await e.runQuery(w.notifications.getAllRaidDecks);\n      (!o || o.length === 0) && console.log(\"\\u26A0\\uFE0F No raid decks found\"), console.log(`\\u{1F4CA} Found ${o.length} raid decks to check`);\n      let t = Date.now(), s = 0, a = 0, r = 0, d = 100;\n      for (let u = 0; u < o.length; u++) {\n        let f = o[u], l = 0, y = 0;\n        for (let g of f.cardEnergy) {\n          if (g.energyExpiresAt === 0) continue;\n          let p = g.energyExpiresAt - t;\n          p <= 0 ? y++ : p <= T && l++;\n        }\n        if (!(l === 0 && y === 0)) {\n          try {\n            let g = await e.runQuery(\n              w.notificationsHelpers.getLastLowEnergyNotification,\n              { address: f.address }\n            );\n            if (g && t - g.lastNotifiedAt < E) {\n              let v = Math.round((E - (t - g.lastNotifiedAt)) / 36e5);\n              console.log(`\\u23ED\\uFE0F Skipping ${f.address} - notified ${v}h ago (cooldown: 6h)`), r++;\n              continue;\n            }\n            let p = await e.runQuery(w.notifications.getProfileByAddress, {\n              address: f.address\n            });\n            if (!p) {\n              console.log(`\\u26A0\\uFE0F No profile found for ${f.address}`);\n              continue;\n            }\n            let m = p.fid || (p.farcasterFid ? p.farcasterFid.toString() : null);\n            if (!m) {\n              console.log(`\\u26A0\\uFE0F No FID found for ${f.address}`);\n              continue;\n            }\n            let I = parseInt(m);\n            if (isNaN(I)) {\n              console.log(`\\u26A0\\uFE0F Invalid FID for ${f.address}: ${m}`);\n              continue;\n            }\n            if (y > 0) {\n              console.log(`\\u23ED\\uFE0F Skipping expired cards notification for ${f.address} - using UI indicator instead`);\n              continue;\n            }\n            let A = \"\\u26A1 Low Energy Warning!\", D = Math.round(T / 6e4), S = `${l} card${l > 1 ? \"s\" : \"\"} will run out of energy in less than ${D} minutes!`;\n            (await _([I], A, S, \"https://vibemostwanted.xyz\")).success_count > 0 ? (s++, await e.runMutation(w.notificationsHelpers.updateLowEnergyNotification, {\n              address: f.address,\n              lowEnergyCount: l,\n              expiredCount: y\n            }), console.log(`\\u2705 Sent low energy notification to FID ${m}`)) : (a++, console.log(`\\u274C Failed for FID ${m}`));\n          } catch (g) {\n            console.error(`\\u274C Exception for ${f.address}:`, g), a++;\n          }\n          u < o.length - 1 && await P(d);\n        }\n      }\n      return console.log(`\\u{1F4CA} Low energy notifications: ${s} sent, ${a} failed, ${r} skipped (cooldown), ${o.length} total`), { sent: s, failed: a, skipped: r, total: o.length };\n    } catch (o) {\n      throw console.error(\"\\u274C Error in sendLowEnergyNotifications:\", o), o;\n    }\n  }, \"handler\")\n}), H = b({\n  args: {},\n  handler: /* @__PURE__ */ c(async (e) => await e.db.query(\"raidAttacks\").take(200), \"handler\")\n}), Q = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ c(async (e, { address: n }) => await e.db.query(\"profiles\").withIndex(\"by_address\", (t) => t.eq(\"address\", n.toLowerCase())).first(), \"handler\")\n}), J = h({\n  args: {},\n  // @ts-ignore\n  handler: /* @__PURE__ */ c(async (e) => {\n    try {\n      console.log(\"\\u{1F4EC} Sending daily login reminder via Neynar...\");\n      let t = await _([], \"\\u{1F4B0} Daily Login Bonus!\", \"Claim your free coins! Don't miss today's reward \\u{1F381}\", \"https://vibemostwanted.xyz\");\n      return console.log(`\\u{1F4CA} Daily login: ${t.success_count} sent, ${t.failure_count} failed`), { sent: t.success_count, failed: t.failure_count, total: t.success_count + t.failure_count + t.not_attempted_count };\n    } catch (n) {\n      throw console.error(\"\\u274C Error in sendDailyLoginReminder:\", n), n;\n    }\n  }, \"handler\")\n}), G = h({\n  args: {\n    castAuthor: i.string(),\n    warpcastUrl: i.string(),\n    winnerUsername: i.optional(i.string())\n  },\n  // @ts-ignore\n  handler: /* @__PURE__ */ c(async (e, { castAuthor: n, warpcastUrl: o, winnerUsername: t }) => {\n    try {\n      console.log(\"\\u{1F3AC} Sending featured cast notification via Neynar...\");\n      let s = \"\\u{1F3AF} New Wanted Cast!\", a = t ? `@${t} won the auction! @${n} is now WANTED! Interact to earn VBMS \\u{1F4B0}` : `@${n} is now WANTED! Interact to earn VBMS tokens! \\u{1F4B0}`, r = await _([], s, a, \"https://vibemostwanted.xyz\");\n      return console.log(`\\u{1F4CA} Featured cast notification: ${r.success_count} sent, ${r.failure_count} failed`), { sent: r.success_count, failed: r.failure_count, total: r.success_count + r.failure_count + r.not_attempted_count };\n    } catch (s) {\n      throw console.error(\"\\u274C Error in sendFeaturedCastNotification:\", s), s;\n    }\n  }, \"handler\")\n}), X = h({\n  args: {\n    winnerFid: i.number(),\n    winnerUsername: i.string(),\n    bidAmount: i.number(),\n    castAuthor: i.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, { winnerFid: n, winnerUsername: o, bidAmount: t, castAuthor: s }) => {\n    let a = \"\\u{1F3C6} Your Cast Won!\", r = `Congrats @${o}! Your bid of ${t.toLocaleString()} VBMS won! @${s} is now WANTED!`;\n    console.log(`\\u{1F3C6} Sending winner notification to FID ${n} (@${o})...`);\n    let u = (await _([n], a, r, \"https://vibemostwanted.xyz\")).success_count > 0;\n    return console.log(`\\u{1F3C6} Winner notification: ${u ? \"sent\" : \"failed\"}`), { sent: u, neynarSent: u, warpcastSent: !1 };\n  }, \"handler\")\n}), Z = h({\n  args: {\n    fid: i.number(),\n    title: i.string(),\n    body: i.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, { fid: n, title: o, body: t }) => {\n    if (!process.env.NEYNAR_API_KEY)\n      return { error: \"NEYNAR_API_KEY not set\" };\n    let s = crypto.randomUUID(), a = {\n      target_fids: [n],\n      notification: {\n        title: o,\n        body: t,\n        target_url: \"https://vibemostwanted.xyz\",\n        uuid: s\n      }\n    };\n    console.log(`\\u{1F9EA} TEST: Sending to FID ${n} via Neynar...`), console.log(\"\\u{1F9EA} Payload:\", JSON.stringify(a));\n    try {\n      let r = await fetch(\"https://api.neynar.com/v2/farcaster/frame/notifications/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": process.env.NEYNAR_API_KEY\n        },\n        body: JSON.stringify(a)\n      }), d = await r.json();\n      return console.log(`\\u{1F9EA} Response (${r.status}):`, JSON.stringify(d)), { status: r.status, result: d };\n    } catch (r) {\n      return console.log(\"\\u{1F9EA} Error:\", r?.message || r), { error: r?.message || \"Unknown error\" };\n    }\n  }, \"handler\")\n});\nfunction P(e) {\n  return new Promise((n) => setTimeout(n, e));\n}\nc(P, \"sleep\");\nvar N = [\n  {\n    title: \"\\u{1F3AF} Pro Tip\",\n    body: \"Attack players from the leaderboard to steal their coins! The higher their rank, the bigger the reward! \\u{1F451}\"\n  },\n  {\n    title: \"\\u{1F6E1}\\uFE0F Defense Strategy\",\n    body: \"Set up your Defense Deck to protect your coins when offline! Choose your 5 best cards wisely! \\u{1F0CF}\"\n  },\n  {\n    title: \"\\u26A1 Power Boost Tip\",\n    body: \"Open more packs to get stronger cards! Higher power = more wins = more coins! \\u{1F4B0}\"\n  },\n  {\n    title: \"\\u{1F916} Mecha Arena Tip\",\n    body: \"Build your Mecha and battle in the Arena! Bet $VBMS and crush your opponents with powerful combos! \\u2694\\uFE0F\"\n  },\n  {\n    title: \"\\u{1F381} Daily Free Card!\",\n    body: \"Visit the Shop to claim your FREE card every day! No VBMS needed - just tap and collect! \\u{1F0CF}\"\n  }\n], tt = h({\n  args: {},\n  // @ts-ignore\n  handler: /* @__PURE__ */ c(async (e) => {\n    let { api: n } = await import(\"./_deps/4SZP7OOE.js\");\n    try {\n      console.log(\"\\u{1F4A1} Starting periodic tip notification via Neynar...\");\n      let o = await e.runQuery(w.notificationsHelpers.getTipState);\n      if (!o._id) {\n        let r = await e.runMutation(n.notificationsHelpers.initTipState);\n        o = { currentTipIndex: 0, lastSentAt: Date.now(), _id: r };\n      }\n      let t = N[o.currentTipIndex % N.length], s = await _([], t.title, t.body, \"https://vibemostwanted.xyz\"), a = (o.currentTipIndex + 1) % N.length;\n      return await e.runMutation(n.notificationsHelpers.updateTipState, {\n        tipStateId: o._id,\n        currentTipIndex: a\n      }), console.log(`\\u{1F4CA} Periodic tip: ${s.success_count} sent, ${s.failure_count} failed`), console.log(`\\u{1F4DD} Sent tip ${o.currentTipIndex + 1}/${N.length}: \"${t.title}\"`), { sent: s.success_count, failed: s.failure_count, total: s.success_count + s.failure_count + s.not_attempted_count, tipIndex: o.currentTipIndex };\n    } catch (o) {\n      throw console.error(\"\\u274C Error in sendPeriodicTip:\", o), o;\n    }\n  }, \"handler\")\n}), et = k({\n  args: {},\n  handler: /* @__PURE__ */ c(async (e) => (console.log(\"\\u{1F4A1} Scheduling periodic tip notification...\"), await e.scheduler.runAfter(0, w.notifications.sendPeriodicTip, {}), { scheduled: !0 }), \"handler\")\n}), ot = k({\n  args: {},\n  handler: /* @__PURE__ */ c(async (e) => (console.log(\"\\u{1F4B0} Scheduling daily login reminder...\"), await e.scheduler.runAfter(0, w.notifications.sendDailyLoginReminder, {}), { scheduled: !0 }), \"handler\")\n}), nt = x({\n  args: {\n    title: i.string(),\n    body: i.string()\n  },\n  handler: /* @__PURE__ */ c(async (e, { title: n, body: o }) => {\n    try {\n      console.log(`\\u{1F4EC} Sending custom notification via Neynar: \"${n}\"`);\n      let t = await _([], n, o, \"https://vibemostwanted.xyz\");\n      return console.log(`\\u{1F4CA} Custom notification: ${t.success_count} sent, ${t.failure_count} failed`), { sent: t.success_count, failed: t.failure_count, total: t.success_count + t.failure_count + t.not_attempted_count };\n    } catch (t) {\n      throw console.error(\"\\u274C Error in sendCustomNotification:\", t), t;\n    }\n  }, \"handler\")\n}), rt = h({\n  args: {\n    bossName: i.string(),\n    bossRarity: i.string(),\n    totalContributors: i.number(),\n    contributorAddresses: i.array(i.string())\n  },\n  // @ts-ignore\n  handler: /* @__PURE__ */ c(async (e, { bossName: n, bossRarity: o, totalContributors: t, contributorAddresses: s }) => {\n    try {\n      console.log(\"\\u{1F409} Sending boss defeated notifications for: \" + n);\n      let a = [];\n      for (let y of s)\n        try {\n          let g = await e.runQuery(w.notifications.getProfileByAddress, { address: y });\n          if (!g) continue;\n          let p = g.fid || (g.farcasterFid ? g.farcasterFid.toString() : null);\n          if (!p) continue;\n          let m = parseInt(p);\n          isNaN(m) || a.push(m);\n        } catch (g) {\n          console.error(\"\\u274C Error getting FID for \" + y + \":\", g);\n        }\n      if (a.length === 0)\n        return console.log(\"\\u26A0\\uFE0F No contributor FIDs found\"), { sent: 0, failed: 0, total: t };\n      let d = {\n        common: \"\\u26AA\",\n        rare: \"\\u{1F535}\",\n        epic: \"\\u{1F7E3}\",\n        legendary: \"\\u{1F7E1}\",\n        mythic: \"\\u{1F534}\"\n      }[o.toLowerCase()] || \"\\u26AB\", u = \"\\u{1F389} Boss Defeated!\", f = d + \" \" + n + \" was slain! Claim your reward now! \\u{1F4B0}\", l = await _(a, u, f, \"https://vibemostwanted.xyz\");\n      return console.log(\"\\u{1F4CA} Boss defeated notifications: \" + l.success_count + \" sent, \" + l.failure_count + \" failed out of \" + t + \" contributors\"), { sent: l.success_count, failed: l.failure_count, total: t };\n    } catch (a) {\n      throw console.error(\"\\u274C Error in sendBossDefeatedNotifications:\", a), a;\n    }\n  }, \"handler\")\n}), it = h({\n  args: {\n    recipientFid: i.number(),\n    hasAudio: i.boolean()\n  },\n  handler: /* @__PURE__ */ c(async (e, { recipientFid: n, hasAudio: o }) => {\n    let t = \"\\u{1F48C} New VibeMail!\", s = o ? \"Someone sent you a message with a sound! \\u{1F3B5} Check your inbox\" : \"Someone sent you an anonymous message! Check your inbox\", a = process.env.NEYNAR_API_KEY_VIBEFID || process.env.NEYNAR_API_KEY;\n    if (!a)\n      return console.log(\"\\u{1F4F1} No NEYNAR_API_KEY_VIBEFID configured\"), { sent: !1 };\n    try {\n      let r = crypto.randomUUID(), u = await fetch(\"https://api.neynar.com/v2/farcaster/frame/notifications/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": a\n        },\n        body: JSON.stringify({\n          target_fids: [n],\n          notification: { title: t, body: s, target_url: \"https://vibefid.xyz\", uuid: r }\n        })\n      });\n      if (u.ok)\n        return console.log(`\\u2705 VibeMail notification sent to FID ${n}`), { sent: !0 };\n      {\n        let f = await u.text();\n        return console.log(`\\u274C VibeMail notification failed: ${f}`), { sent: !1 };\n      }\n    } catch (r) {\n      return console.log(`\\u274C VibeMail notification error: ${r.message}`), { sent: !1 };\n    }\n  }, \"handler\")\n});\nexport {\n  H as getAllRaidDecks,\n  O as getAllTokens,\n  q as getAllTokensByFidInternal,\n  Q as getProfileByAddress,\n  M as getTokenByFid,\n  U as getTokenByFidInternal,\n  z as importTokens,\n  j as removeToken,\n  V as saveToken,\n  rt as sendBossDefeatedNotifications,\n  nt as sendCustomNotification,\n  J as sendDailyLoginReminder,\n  G as sendFeaturedCastNotification,\n  W as sendLowEnergyNotifications,\n  tt as sendPeriodicTip,\n  it as sendVibemailNotification,\n  X as sendWinnerNotification,\n  Z as testNeynarNotification,\n  ot as triggerDailyLoginReminder,\n  et as triggerPeriodicTip\n};\n//# sourceMappingURL=notifications.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/notifications.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getTokenByFid\", \"query\", \"v\", \"__name\", \"ctx\", \"fid\", \"q\", \"getTokenByFidInternal\", \"internalQuery\", \"getAllTokensByFidInternal\", \"getAllTokens\", \"getPlatformFromUrl\", \"url\", \"saveToken\", \"mutation\", \"token\", \"app\", \"now\", \"platform\", \"appName\", \"allTokens\", \"existing\", \"t\", \"legacyToken\", \"newId\", \"removeToken\", \"importTokens\", \"tokens\", \"imported\", \"updated\", \"tokenData\", \"sendViaNeynar\", \"targetFids\", \"title\", \"body\", \"targetUrl\", \"apiKey\", \"payload\", \"response\", \"errorText\", \"result\", \"error\", \"ENERGY_DURATION_BY_RARITY\", \"LOW_ENERGY_THRESHOLD\", \"NOTIFICATION_COOLDOWN\", \"sendLowEnergyNotifications\", \"internalAction\", \"api\", \"raidDecks\", \"internal\", \"sent\", \"failed\", \"skipped\", \"DELAY_MS\", \"i\", \"deck\", \"lowEnergyCards\", \"expiredCards\", \"cardEnergy\", \"remaining\", \"lastNotification\", \"hoursLeft\", \"profile\", \"fidNumber\", \"minutes\", \"sleep\", \"getAllRaidDecks\", \"getProfileByAddress\", \"address\", \"sendDailyLoginReminder\", \"sendFeaturedCastNotification\", \"castAuthor\", \"warpcastUrl\", \"winnerUsername\", \"sendWinnerNotification\", \"winnerFid\", \"bidAmount\", \"testNeynarNotification\", \"uuid\", \"ms\", \"resolve\", \"GAMING_TIPS\", \"sendPeriodicTip\", \"tipState\", \"currentTip\", \"nextTipIndex\", \"triggerPeriodicTip\", \"triggerDailyLoginReminder\", \"sendCustomNotification\", \"action\", \"sendBossDefeatedNotifications\", \"bossName\", \"bossRarity\", \"totalContributors\", \"contributorAddresses\", \"contributorFids\", \"rarityEmoji\", \"sendVibemailNotification\", \"recipientFid\", \"hasAudio\"]\n}\n"},{"path":"notificationsHelpers.js","source":"import {\n  a as c,\n  b as s,\n  c as d,\n  d as f\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as o\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/notificationsHelpers.ts\nvar y = s({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => await t.db.query(\"notificationTokens\").take(5e4), \"handler\")\n}), g = s({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => await t.db.query(\"notificationTokens\").take(5e4), \"handler\")\n}), k = s({\n  args: {\n    limit: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ o(async (t, e) => {\n    let n = e.limit || 500, a = await t.db.query(\"notificationTokens\").take(n);\n    return {\n      tokens: a,\n      count: a.length,\n      hasMore: a.length === n\n    };\n  }, \"handler\")\n}), b = s({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => {\n    let e = await t.db.query(\"tipRotationState\").first();\n    return e || { currentTipIndex: 0, lastSentAt: Date.now(), _id: null };\n  }, \"handler\")\n}), m = d({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => {\n    let e = await t.db.query(\"tipRotationState\").first();\n    return e ? e._id : await t.db.insert(\"tipRotationState\", {\n      currentTipIndex: 0,\n      lastSentAt: Date.now()\n    });\n  }, \"handler\")\n}), h = d({\n  args: {\n    tipStateId: r.id(\"tipRotationState\"),\n    currentTipIndex: r.number()\n  },\n  handler: /* @__PURE__ */ o(async (t, { tipStateId: e, currentTipIndex: n }) => {\n    await t.db.patch(e, {\n      currentTipIndex: n,\n      lastSentAt: Date.now()\n    });\n  }, \"handler\")\n}), T = 360 * 60 * 1e3, I = s({\n  args: { address: r.string() },\n  handler: /* @__PURE__ */ o(async (t, { address: e }) => await t.db.query(\"lowEnergyNotifications\").withIndex(\"by_address\", (a) => a.eq(\"address\", e.toLowerCase())).first(), \"handler\")\n}), S = f({\n  args: {\n    address: r.string(),\n    lowEnergyCount: r.number(),\n    expiredCount: r.number()\n  },\n  handler: /* @__PURE__ */ o(async (t, { address: e, lowEnergyCount: n, expiredCount: a }) => {\n    let i = await t.db.query(\"lowEnergyNotifications\").withIndex(\"by_address\", (u) => u.eq(\"address\", e.toLowerCase())).first(), l = Date.now();\n    i ? await t.db.patch(i._id, {\n      lastNotifiedAt: l,\n      lowEnergyCount: n,\n      expiredCount: a\n    }) : await t.db.insert(\"lowEnergyNotifications\", {\n      address: e.toLowerCase(),\n      lastNotifiedAt: l,\n      lowEnergyCount: n,\n      expiredCount: a\n    });\n  }, \"handler\")\n}), q = d({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => {\n    let e = await t.db.query(\"notificationTokens\").take(5e3), n = 0, a = 0;\n    for (let i of e)\n      i.url.includes(\"/v1/notify\") ? (await t.db.delete(i._id), n++, console.log(`\\u{1F5D1}\\uFE0F Deleted stale token for FID ${i.fid} (old URL)`)) : i.token && !/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i.token) && (await t.db.delete(i._id), a++, console.log(`\\u{1F5D1}\\uFE0F Deleted invalid token for FID ${i.fid} (bad format)`));\n    return console.log(`\\u{1F9F9} Cleanup complete: ${n} old URL tokens, ${a} invalid format tokens deleted`), { deletedOldUrl: n, deletedInvalidFormat: a, total: n + a };\n  }, \"handler\")\n}), x = c({\n  args: {},\n  handler: /* @__PURE__ */ o(async (t) => {\n    let e = await t.db.query(\"notificationTokens\").take(1e4), n = {\n      total: e.length,\n      neynar: 0,\n      warpcastNew: 0,\n      warpcastOld: 0,\n      invalidFormat: 0\n    };\n    for (let a of e)\n      a.url.includes(\"neynar\") ? n.neynar++ : a.url.includes(\"/v1/frame-notifications\") ? n.warpcastNew++ : a.url.includes(\"/v1/notify\") && n.warpcastOld++, a.token && !/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a.token) && n.invalidFormat++;\n    return n;\n  }, \"handler\")\n});\nexport {\n  q as cleanupStaleTokens,\n  y as getAllTokens,\n  k as getAllTokensPaginated,\n  g as getAllTokensPublic,\n  I as getLastLowEnergyNotification,\n  b as getTipState,\n  x as getTokenStats,\n  m as initTipState,\n  S as updateLowEnergyNotification,\n  h as updateTipState\n};\n//# sourceMappingURL=notificationsHelpers.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/notificationsHelpers.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getAllTokens\", \"internalQuery\", \"__name\", \"ctx\", \"getAllTokensPublic\", \"getAllTokensPaginated\", \"v\", \"args\", \"limit\", \"tokens\", \"getTipState\", \"tipState\", \"initTipState\", \"mutation\", \"existing\", \"updateTipState\", \"tipStateId\", \"currentTipIndex\", \"NOTIFICATION_COOLDOWN\", \"getLastLowEnergyNotification\", \"address\", \"q\", \"updateLowEnergyNotification\", \"internalMutation\", \"lowEnergyCount\", \"expiredCount\", \"now\", \"cleanupStaleTokens\", \"deletedOldUrl\", \"deletedInvalidFormat\", \"token\", \"getTokenStats\", \"query\", \"stats\"]\n}\n"},{"path":"pokerBattle.js","source":"import {\n  a as M,\n  b as $\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  b as q,\n  c as T\n} from \"./_deps/IJFCN5IR.js\";\nimport {\n  a as D\n} from \"./_deps/K5WLKJWZ.js\";\nimport {\n  a as k,\n  b as L,\n  c as y,\n  d as A\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as d\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as p\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/pokerBattle.ts\nfunction E(t) {\n  if (!t) return 0;\n  let o = t.power || 0;\n  return t.collection === \"vibefid\" ? Math.floor(o * 5) : t.collection === \"vibe\" ? Math.floor(o * 2) : t.collection === \"nothing\" ? Math.floor(o * 0.5) : o;\n}\np(E, \"getCardDisplayPower\");\nfunction O(t) {\n  let o = [...t], e = new Uint32Array(o.length);\n  crypto.getRandomValues(e);\n  for (let s = o.length - 1; s > 0; s--) {\n    let n = e[s] % (s + 1);\n    [o[s], o[n]] = [o[n], o[s]];\n  }\n  return o;\n}\np(O, \"cryptoShuffle\");\nfunction H(t) {\n  let o = new Uint32Array(1);\n  return crypto.getRandomValues(o), o[0] % t;\n}\np(H, \"cryptoRandomInt\");\nfunction W() {\n  let t = new Uint32Array(1);\n  return crypto.getRandomValues(t), t[0] / 4294967296;\n}\np(W, \"cryptoRandomFloat\");\nvar K = y({\n  args: {\n    address: d.string(),\n    username: d.string(),\n    ante: d.number(),\n    // 2, 10, 50, or 200\n    token: d.union(d.literal(\"VBMS\"), d.literal(\"TESTVBMS\"), d.literal(\"testUSDC\"), d.literal(\"VIBE_NFT\")),\n    blockchainBattleId: d.optional(d.number())\n    // Optional blockchain battle ID\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = Date.now(), s = o.address.toLowerCase(), n = [\"waiting\", \"ready\", \"in-progress\"], r = await t.db.query(\"pokerRooms\").withIndex(\"by_host\", (i) => i.eq(\"hostAddress\", s)).filter(\n      (i) => i.and(\n        i.or(\n          i.eq(i.field(\"status\"), \"waiting\"),\n          i.eq(i.field(\"status\"), \"ready\"),\n          i.eq(i.field(\"status\"), \"in-progress\")\n        ),\n        i.gt(i.field(\"expiresAt\"), e)\n      )\n    ).first(), l = r ? null : await t.db.query(\"pokerRooms\").withIndex(\"by_guest\", (i) => i.eq(\"guestAddress\", s)).filter(\n      (i) => i.and(\n        i.or(\n          i.eq(i.field(\"status\"), \"waiting\"),\n          i.eq(i.field(\"status\"), \"ready\"),\n          i.eq(i.field(\"status\"), \"in-progress\")\n        ),\n        i.gt(i.field(\"expiresAt\"), e)\n      )\n    ).first(), a = r || l;\n    if (a) {\n      let i = a.hostAddress === s, w = a.status, f = i ? a.guestUsername : a.hostUsername;\n      throw new Error(\n        `You already have an active battle! Status: ${w}. ${f ? `Opponent: ${f}. ` : \"\"}Please finish or wait for your current battle to expire before creating a new one.`\n      );\n    }\n    let u = `poker_${s}_${e}`, c = o.ante * 50, g = await t.db.insert(\"pokerRooms\", {\n      roomId: u,\n      status: \"waiting\",\n      ante: o.ante,\n      token: o.token,\n      blockchainBattleId: o.blockchainBattleId,\n      // Store blockchain battle ID\n      hostAddress: o.address.toLowerCase(),\n      hostUsername: o.username,\n      hostReady: !1,\n      hostBankroll: c,\n      hostBoostCoins: 1e3,\n      createdAt: e,\n      expiresAt: e + 600 * 1e3\n      // Expires in 10 minutes\n    });\n    return {\n      success: !0,\n      roomId: u,\n      roomDocId: g,\n      startingBankroll: c\n    };\n  }, \"handler\")\n}), Q = y({\n  args: {\n    roomId: d.string(),\n    address: d.string(),\n    username: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (r) => r.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw new Error(\"Room not found\");\n    if (e.status !== \"waiting\")\n      throw new Error(\"Room is not accepting players\");\n    if (e.guestAddress)\n      throw new Error(\"Room is already full\");\n    if (e.hostAddress === o.address.toLowerCase())\n      throw new Error(\"You are already the host of this room\");\n    let s = e.ante * 50;\n    return await t.db.patch(e._id, {\n      guestAddress: o.address.toLowerCase(),\n      guestUsername: o.username,\n      guestReady: !1,\n      guestBankroll: s,\n      guestBoostCoins: 1e3\n    }), {\n      success: !0,\n      room: {\n        ...e,\n        guestAddress: o.address.toLowerCase(),\n        guestUsername: o.username\n      },\n      startingBankroll: s\n    };\n  }, \"handler\")\n}), Z = y({\n  args: {\n    roomId: d.string(),\n    address: d.string(),\n    deck: d.array(q),\n    // ðŸ”’ SECURITY: Strict schema\n    wagers: d.optional(d.array(T))\n    // ðŸ”’ SECURITY: Strict schema\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (l) => l.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw new Error(\"Room not found\");\n    let s = e.hostAddress === o.address.toLowerCase(), n = e.guestAddress === o.address.toLowerCase();\n    if (!s && !n)\n      throw new Error(\"You are not in this room\");\n    if (o.deck.length !== 10)\n      throw new Error(\"Deck must have exactly 10 cards\");\n    s ? await t.db.patch(e._id, {\n      hostDeck: o.deck,\n      hostReady: !0\n    }) : await t.db.patch(e._id, {\n      guestDeck: o.deck,\n      guestReady: !0\n    });\n    let r = await t.db.get(e._id);\n    return r?.hostReady && r?.guestReady && await t.db.patch(e._id, {\n      status: \"ready\",\n      startedAt: Date.now()\n    }), { success: !0 };\n  }, \"handler\")\n}), J = y({\n  args: {\n    roomId: d.string(),\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (r) => r.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw new Error(\"Room not found\");\n    let s = e.hostAddress === o.address.toLowerCase(), n = e.guestAddress === o.address.toLowerCase();\n    return s ? await t.db.delete(e._id) : n && await t.db.patch(e._id, {\n      guestAddress: void 0,\n      guestUsername: void 0,\n      guestDeck: void 0,\n      guestReady: void 0,\n      guestBankroll: void 0\n    }), { success: !0 };\n  }, \"handler\")\n}), X = y({\n  args: {\n    roomId: d.string(),\n    address: d.string(),\n    username: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (r) => r.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw new Error(\"Room not found\");\n    if (e.status === \"waiting\" || e.status === \"cancelled\" || e.status === \"finished\")\n      throw new Error(\"Cannot spectate this room\");\n    let s = e.spectators || [];\n    return s.some((r) => r.address === o.address.toLowerCase()) || (s.push({\n      address: o.address.toLowerCase(),\n      username: o.username,\n      joinedAt: Date.now()\n    }), await t.db.patch(e._id, {\n      spectators: s\n    })), { success: !0, room: e };\n  }, \"handler\")\n}), ee = y({\n  args: {\n    roomId: d.string(),\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let { roomId: e, address: s } = o, n = s.toLowerCase(), r = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (i) => i.eq(\"roomId\", e)).first();\n    if (!r)\n      throw new Error(\"Room not found\");\n    let a = (r.spectators || []).filter(\n      (i) => i.address !== n\n    ), u = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (i) => i.eq(\"address\", n)).first(), c = 0;\n    if (u && u.balance > 0) {\n      c = u.balance;\n      let i = await t.db.query(\"profiles\").withIndex(\"by_address\", (w) => w.eq(\"address\", n)).first();\n      if (i) {\n        let w = i.coins || 0;\n        await t.db.patch(i._id, {\n          coins: w + c,\n          lifetimeEarned: (i.lifetimeEarned || 0) + c,\n          lastUpdated: Date.now()\n        }), await t.db.insert(\"coinTransactions\", {\n          address: n,\n          amount: c,\n          type: \"earn\",\n          source: \"poker_credits_convert\",\n          description: \"Converted poker betting credits\",\n          timestamp: Date.now(),\n          balanceBefore: w,\n          balanceAfter: w + c\n        });\n      }\n      await t.db.patch(u._id, {\n        balance: 0\n      }), await t.db.insert(\"bettingTransactions\", {\n        address: n,\n        type: \"withdraw\",\n        amount: c,\n        roomId: e,\n        timestamp: Date.now()\n      }), console.log(`\\u{1F4B0} Converted ${c} credits to TESTVBMS for ${n} on leave`);\n    }\n    let m = r.isCpuVsCpu === !0, g = a.length === 0;\n    return m && g ? (await t.db.delete(r._id), console.log(`\\u{1F5D1}\\uFE0F CPU vs CPU room ${e} deleted - last spectator left`), {\n      success: !0,\n      converted: c,\n      roomDeleted: !0,\n      message: `Converted ${c} credits to TESTVBMS. Room closed.`\n    }) : (await t.db.patch(r._id, {\n      spectators: a\n    }), console.log(`\\u{1F441}\\uFE0F Spectator ${n} left room ${e}. ${a.length} remaining.`), {\n      success: !0,\n      converted: c,\n      roomDeleted: !1,\n      remainingSpectators: a.length,\n      message: c > 0 ? `Converted ${c} credits to TESTVBMS` : \"Left room successfully\"\n    });\n  }, \"handler\")\n}), oe = y({\n  args: {\n    roomId: d.string(),\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (r) => r.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw new Error(\"Room not found\");\n    let s = e.hostAddress === o.address.toLowerCase(), n = e.guestAddress === o.address.toLowerCase();\n    if (!s && !n)\n      throw new Error(\"You are not a player in this room\");\n    return e.gameState && e.status === \"in-progress\" ? (console.log(\"[initializeGame] Game already initialized, skipping duplicate write\"), { success: !0, alreadyInitialized: !0 }) : (await t.db.patch(e._id, {\n      gameState: {\n        currentRound: 1,\n        hostScore: 0,\n        guestScore: 0,\n        pot: e.ante * 2,\n        // Both players ante\n        currentBet: 0,\n        phase: \"card-selection\",\n        hostBet: e.ante,\n        guestBet: e.ante\n      },\n      status: \"in-progress\"\n    }), console.log(`\\u{1F3AE} Game initialized: ${o.roomId} - Round 1`), { success: !0 });\n  }, \"handler\")\n}), te = y({\n  args: {\n    roomId: d.string(),\n    address: d.string(),\n    card: d.object({\n      tokenId: d.string(),\n      collection: d.optional(d.string()),\n      power: d.number(),\n      imageUrl: d.string(),\n      name: d.string(),\n      rarity: d.string(),\n      foil: d.optional(d.string()),\n      wear: d.optional(d.string())\n    })\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    console.log(\"[selectCard] Called with:\", {\n      roomId: o.roomId,\n      address: o.address,\n      cardTokenId: o.card?.tokenId,\n      cardPower: o.card?.power\n    });\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (a) => a.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw console.error(`[selectCard] Room not found: ${o.roomId}`), new Error(\"Room not found\");\n    if (!e.gameState)\n      throw console.error(`[selectCard] Game not started in room: ${o.roomId}`), new Error(\"Game not started\");\n    let s = o.address.toLowerCase(), n = e.hostAddress?.toLowerCase() === s, r = e.guestAddress?.toLowerCase() === s;\n    if (console.log(\"[selectCard] Player check:\", {\n      normalizedAddress: s,\n      hostAddress: e.hostAddress?.toLowerCase(),\n      guestAddress: e.guestAddress?.toLowerCase(),\n      isHost: n,\n      isGuest: r\n    }), !n && !r)\n      throw console.error(\"[selectCard] Player not in room:\", {\n        address: s,\n        hostAddress: e.hostAddress,\n        guestAddress: e.guestAddress\n      }), new Error(\"You are not a player in this room\");\n    if (e.gameState.phase !== \"card-selection\")\n      throw console.error(\"[selectCard] Wrong phase:\", {\n        currentPhase: e.gameState.phase,\n        expectedPhase: \"card-selection\"\n      }), new Error(`Not in card selection phase. Current phase: ${e.gameState.phase}`);\n    if (n && e.gameState.hostSelectedCard)\n      return console.log(\"[selectCard] Host already selected card, skipping duplicate write\"), { success: !0, alreadySelected: !0 };\n    if (r && e.gameState.guestSelectedCard)\n      return console.log(\"[selectCard] Guest already selected card, skipping duplicate write\"), { success: !0, alreadySelected: !0 };\n    if (!o.card)\n      throw new Error(\"Card is null or undefined\");\n    if (!o.card.tokenId)\n      throw new Error(\"Card missing tokenId\");\n    if (typeof o.card.power != \"number\")\n      throw new Error(`Card power is not a number: ${typeof o.card.power}`);\n    let l = {\n      ...e.gameState,\n      hostSelectedCard: n ? o.card : e.gameState.hostSelectedCard,\n      guestSelectedCard: r ? o.card : e.gameState.guestSelectedCard\n    };\n    return l.hostSelectedCard && l.guestSelectedCard && (l.phase = \"reveal\", console.log(\"[selectCard] Both players selected, moving to reveal phase\")), await t.db.patch(e._id, { gameState: l }), console.log(`\\u2705 [selectCard] Success: ${n ? \"Host\" : \"Guest\"} selected card in ${o.roomId}`), { success: !0 };\n  }, \"handler\")\n}), se = y({\n  args: {\n    roomId: d.string(),\n    address: d.string(),\n    action: d.union(d.literal(\"BOOST\"), d.literal(\"SHIELD\"), d.literal(\"DOUBLE\"), d.literal(\"SWAP\"), d.literal(\"PASS\"))\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (c) => c.eq(\"roomId\", o.roomId)).first();\n    if (!e || !e.gameState)\n      throw new Error(\"Room not found or game not started\");\n    let s = e.hostAddress === o.address.toLowerCase(), n = e.guestAddress === o.address.toLowerCase();\n    if (!s && !n)\n      throw new Error(\"You are not a player in this room\");\n    if (e.gameState.phase !== \"reveal\")\n      throw new Error(\"Not in reveal phase\");\n    let r = { ...e.gameState };\n    s ? r.hostAction = o.action : r.guestAction = o.action;\n    let l = {\n      BOOST: 100,\n      // +30% power\n      SHIELD: 80,\n      // Block opponent boost\n      DOUBLE: 200,\n      // x2 power (expensive!)\n      SWAP: 0,\n      PASS: 0\n    }, a = e.hostBoostCoins ?? 1e3, u = e.guestBoostCoins ?? 1e3;\n    if (s && o.action !== \"PASS\" && o.action !== \"SWAP\") {\n      let c = l[o.action] || 0;\n      a -= c, console.log(`\\u{1F4B0} Host paid ${c} boost coins for ${o.action}. New balance: ${a}`);\n    }\n    if (n && o.action !== \"PASS\" && o.action !== \"SWAP\") {\n      let c = l[o.action] || 0;\n      u -= c, console.log(`\\u{1F4B0} Guest paid ${c} boost coins for ${o.action}. New balance: ${u}`);\n    }\n    if (r.hostAction && r.guestAction) {\n      let c = e.spectators && e.spectators.length > 0;\n      r.phase = \"resolution\", console.log(`\\u{1F440} ${c ? e.spectators.length : 0} spectators present - moving to resolution`);\n    }\n    return await t.db.patch(e._id, {\n      gameState: r,\n      hostBoostCoins: a,\n      guestBoostCoins: u\n    }), console.log(`\\u26A1 Card action: ${o.action} by ${s ? \"Host\" : \"Guest\"} in ${o.roomId}`), { success: !0 };\n  }, \"handler\")\n}), re = y({\n  args: {\n    roomId: d.string(),\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (R) => R.eq(\"roomId\", o.roomId)).first();\n    if (!e || !e.gameState)\n      throw new Error(\"Room not found or game not started\");\n    let s = e.hostAddress === o.address.toLowerCase(), n = e.guestAddress === o.address.toLowerCase();\n    if (!s && !n)\n      throw new Error(\"You are not a player in this room\");\n    if (e.gameState.phase !== \"resolution\")\n      return console.log(`[resolveRound] Not in resolution phase (${e.gameState.phase}), skipping`), { success: !0, alreadyResolved: !0 };\n    let r = { ...e.gameState }, l = r.hostSelectedCard, a = r.guestSelectedCard, u = r.hostAction, c = r.guestAction;\n    if (!l || !a)\n      return console.warn(\"[resolveRound] Missing cards - skipping resolution\", {\n        hasHostCard: !!l,\n        hasGuestCard: !!a,\n        currentRound: r.currentRound,\n        hostSelectedCard: r.hostSelectedCard,\n        guestSelectedCard: r.guestSelectedCard\n      }), { success: !1, reason: \"Missing card selections\" };\n    let m = E(l), g = E(a), i = u === \"SHIELD\", w = c === \"SHIELD\";\n    console.log(`[resolveRound] Initial - Host: ${m} (${u || \"PASS\"}), Guest: ${g} (${c || \"PASS\"})`), console.log(`[resolveRound] Shields - Host has shield: ${i}, Guest has shield: ${w}`), u === \"BOOST\" && !w && (console.log(`[resolveRound] Host BOOST applied: ${m} \\u2192 ${m * 1.3}`), m *= 1.3), c === \"BOOST\" && !i && (console.log(`[resolveRound] Guest BOOST applied: ${g} \\u2192 ${g * 1.3}`), g *= 1.3), u === \"BOOST\" && w && console.log(\"[resolveRound] Host BOOST BLOCKED by Guest SHIELD\"), c === \"BOOST\" && i && console.log(\"[resolveRound] Guest BOOST BLOCKED by Host SHIELD\"), u === \"DOUBLE\" && !w && (console.log(`[resolveRound] Host CRIT/DOUBLE applied: ${m} \\u2192 ${m * 2}`), m *= 2), c === \"DOUBLE\" && !i && (console.log(`[resolveRound] Guest CRIT/DOUBLE applied: ${g} \\u2192 ${g * 2}`), g *= 2), u === \"DOUBLE\" && w && console.log(\"[resolveRound] Host CRIT/DOUBLE BLOCKED by Guest SHIELD\"), c === \"DOUBLE\" && i && console.log(\"[resolveRound] Guest CRIT/DOUBLE BLOCKED by Host SHIELD\");\n    let f = m === g, b = m > g;\n    console.log(`[resolveRound] Final - Host: ${m}, Guest: ${g}`), console.log(`[resolveRound] Result - Tie: ${f}, HostWins: ${b}, GuestWins: ${!b && !f}`);\n    let I = e.roundHistory || [], C = r.currentRound;\n    f ? (I.push({\n      round: C,\n      winner: \"tie\",\n      playerScore: r.hostScore,\n      opponentScore: r.guestScore\n    }), console.log(`\\u{1F91D} Tie in round ${C}`)) : b ? (r.hostScore += 1, I.push({\n      round: C,\n      winner: \"player\",\n      playerScore: r.hostScore,\n      opponentScore: r.guestScore\n    }), console.log(`\\u{1F3AF} Host won round ${C}`)) : (r.guestScore += 1, I.push({\n      round: C,\n      winner: \"opponent\",\n      playerScore: r.hostScore,\n      opponentScore: r.guestScore\n    }), console.log(`\\u{1F3AF} Guest won round ${C}`));\n    let B = f ? \"tie\" : b ? e.hostAddress : e.guestAddress;\n    if (B && await t.runMutation(M.roundBetting.resolveRoundBets, {\n      roomId: o.roomId,\n      roundNumber: C,\n      winnerAddress: B\n    }), r.hostScore >= 4 || r.guestScore >= 4) {\n      r.phase = \"game-over\";\n      let R = r.hostScore >= 4 ? e.hostAddress : e.guestAddress, h = r.hostScore >= 4 ? e.hostUsername : e.guestUsername, S = Math.round(r.pot * 0.05), v = r.pot - S;\n      return console.log(`\\u{1F3C6} Game Over! Winner: ${h}, Prize: ${v} (pot: ${r.pot}, fee: ${S})`), await t.db.patch(e._id, {\n        gameState: r,\n        roundHistory: I,\n        winnerId: R,\n        winnerUsername: h,\n        finalPot: v,\n        status: \"finished\"\n        // Mark room as finished to prevent further interactions\n      }), { success: !0, gameOver: !0 };\n    }\n    return r.currentRound += 1, r.phase = \"card-selection\", r.currentBet = 0, r.hostSelectedCard = void 0, r.guestSelectedCard = void 0, r.hostAction = void 0, r.guestAction = void 0, r.hostBet = 0, r.guestBet = 0, await t.db.patch(e._id, {\n      gameState: r,\n      roundHistory: I\n    }), console.log(`\\u{1F3C1} Round ${r.currentRound - 1} resolved in ${o.roomId} - No ante deducted for next round`), { success: !0, gameOver: !1 };\n  }, \"handler\")\n}), ne = y({\n  args: {\n    roomId: d.string(),\n    winnerId: d.string(),\n    winnerUsername: d.string(),\n    finalPot: d.number()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (n) => n.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      return console.log(`\\u26A0\\uFE0F Room ${o.roomId} already deleted or not found (this is okay)`), { success: !0, alreadyDeleted: !0 };\n    let s = await t.db.query(\"voiceParticipants\").withIndex(\"by_room\", (n) => n.eq(\"roomId\", o.roomId)).collect();\n    for (let n of s)\n      await t.db.delete(n._id);\n    return s.length > 0 && console.log(`\\u{1F399}\\uFE0F Cleaned ${s.length} voice participants from room ${o.roomId}`), await t.db.delete(e._id), console.log(`\\u{1F5D1}\\uFE0F Room ${o.roomId} deleted. Winner: ${o.winnerUsername} (${o.finalPot} pot)`), { success: !0, alreadyDeleted: !1 };\n  }, \"handler\")\n}), ae = k({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => {\n    let o = Date.now();\n    return await t.db.query(\"pokerRooms\").withIndex(\"by_status\").filter(\n      (s) => s.or(\n        s.eq(s.field(\"status\"), \"waiting\"),\n        s.eq(s.field(\"status\"), \"ready\"),\n        s.eq(s.field(\"status\"), \"in-progress\")\n      )\n    ).filter((s) => s.gt(s.field(\"expiresAt\"), o)).order(\"desc\").take(50);\n  }, \"handler\")\n}), de = k({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (s) => s.eq(\"roomId\", o.roomId)).first(), \"handler\")\n}), ie = k({\n  args: {\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = Date.now(), s = o.address.toLowerCase(), n = [\"waiting\", \"ready\", \"in-progress\"], r = await t.db.query(\"pokerRooms\").withIndex(\"by_host\", (a) => a.eq(\"hostAddress\", s)).filter(\n      (a) => a.and(\n        a.or(\n          a.eq(a.field(\"status\"), \"waiting\"),\n          a.eq(a.field(\"status\"), \"ready\"),\n          a.eq(a.field(\"status\"), \"in-progress\")\n        ),\n        a.gt(a.field(\"expiresAt\"), e)\n      )\n    ).first();\n    return r || await t.db.query(\"pokerRooms\").withIndex(\"by_guest\", (a) => a.eq(\"guestAddress\", s)).filter(\n      (a) => a.and(\n        a.or(\n          a.eq(a.field(\"status\"), \"waiting\"),\n          a.eq(a.field(\"status\"), \"ready\"),\n          a.eq(a.field(\"status\"), \"in-progress\")\n        ),\n        a.gt(a.field(\"expiresAt\"), e)\n      )\n    ).first();\n  }, \"handler\")\n}), ce = A({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => {\n    let o = Date.now(), e = await t.db.query(\"pokerRooms\").take(50), s = 0;\n    for (let n of e)\n      // Expired rooms\n      (n.expiresAt < o || // Cancelled rooms older than 1 minute\n      n.status === \"cancelled\" && n.createdAt < o - 6e4 || // Finished rooms older than 5 minutes\n      n.status === \"finished\" && n.finishedAt && n.finishedAt < o - 3e5) && (await t.db.delete(n._id), s++);\n    return s > 0 && console.log(`\\u{1F9F9} Cleaned up ${s} old poker rooms`), { deleted: s };\n  }, \"handler\")\n}), le = y({\n  args: {\n    roomId: d.string(),\n    bettor: d.string(),\n    bettorUsername: d.string(),\n    betOn: d.string(),\n    // Address of player to bet on OR \"tie\" for draw bet\n    amount: d.number()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    console.log(\"\\u{1F3B2} placeBet called:\", { roomId: o.roomId, bettor: o.bettor, betOn: o.betOn, amount: o.amount });\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (i) => i.eq(\"roomId\", o.roomId)).first();\n    if (!e)\n      throw console.error(`\\u274C Room not found: ${o.roomId}`), new Error(\"Room not found\");\n    if (e.status === \"finished\" || e.status === \"cancelled\")\n      throw console.error(`\\u274C Cannot bet on ${e.status} game`), new Error(\"Cannot bet on finished or cancelled games\");\n    if (![\"card-selection\", \"reveal\", \"resolution\"].includes(e.gameState?.phase || \"\"))\n      throw console.error(`\\u274C Wrong phase for betting: ${e.gameState?.phase}`), new Error(`Betting is only allowed during active rounds. Current phase: ${e.gameState?.phase || \"unknown\"}`);\n    let n = o.betOn.toLowerCase() === \"tie\", r = !n && e.hostAddress === o.betOn.toLowerCase(), l = !n && e.guestAddress === o.betOn.toLowerCase();\n    if (!r && !l && !n)\n      throw console.error(`\\u274C Invalid bet target: ${o.betOn}`), new Error(\"Can only bet on players in the room or tie\");\n    let a = o.bettor.toLowerCase();\n    if (a === e.hostAddress || a === e.guestAddress)\n      throw console.error(`\\u274C Player trying to bet on own game: ${a}`), new Error(\"Players cannot bet on their own games\");\n    let u = await t.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", a)).first();\n    if (!u)\n      throw console.error(`\\u274C Profile not found for bettor: ${a}`), new Error(\"Bettor profile not found. Please create a profile first.\");\n    let c = u.coins || 0;\n    if (c < o.amount)\n      throw new Error(`Insufficient funds. Need ${o.amount} but only have ${c}`);\n    await t.db.patch(u._id, {\n      coins: c - o.amount,\n      lifetimeSpent: (u.lifetimeSpent || 0) + o.amount\n    }), await t.db.insert(\"coinTransactions\", {\n      address: a,\n      amount: -o.amount,\n      type: \"spend\",\n      source: \"poker_bet\",\n      description: `Poker bet on ${o.betOn}`,\n      timestamp: Date.now(),\n      balanceBefore: c,\n      balanceAfter: c - o.amount\n    });\n    let m = n ? 6 : 3, g = n ? \"Tie/Draw\" : r ? e.hostUsername : e.guestUsername || \"\";\n    return await t.db.insert(\"pokerBets\", {\n      roomId: o.roomId,\n      bettor: a,\n      bettorUsername: o.bettorUsername,\n      betOn: o.betOn.toLowerCase(),\n      betOnUsername: g,\n      amount: o.amount,\n      token: e.token,\n      odds: m,\n      status: \"active\",\n      timestamp: Date.now()\n    }), console.log(`\\u{1F4B0} Bet placed: ${o.bettorUsername} bet ${o.amount} on ${g} at ${m}x odds in ${o.roomId}`), {\n      success: !0,\n      newBalance: c - o.amount,\n      odds: m,\n      potentialWin: o.amount * m\n    };\n  }, \"handler\")\n}), ue = y({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (n) => n.eq(\"roomId\", o.roomId)).first();\n    if (!e || !e.gameState)\n      throw new Error(\"Room not found or game not started\");\n    if (e.gameState.phase !== \"spectator-betting\")\n      throw new Error(\"Not in spectator betting phase\");\n    let s = { ...e.gameState };\n    return s.phase = \"resolution\", await t.db.patch(e._id, { gameState: s }), console.log(`\\u{1F3B2} Spectator betting ended for ${o.roomId} - moving to resolution`), { success: !0 };\n  }, \"handler\")\n}), me = y({\n  args: {\n    roomId: d.string(),\n    winnerId: d.string()\n    // Address of the winner OR \"tie\" for draw\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => {\n    let e = await t.db.query(\"pokerBets\").withIndex(\"by_room\", (r) => r.eq(\"roomId\", o.roomId)).filter((r) => r.eq(r.field(\"status\"), \"active\")).collect();\n    if (e.length === 0)\n      return { resolved: 0, totalPaidOut: 0 };\n    let s = 0, n = o.winnerId.toLowerCase();\n    for (let r of e)\n      if (r.betOn === n) {\n        let a = r.odds || 3, u = r.amount * a, c = await t.db.query(\"profiles\").withIndex(\"by_address\", (m) => m.eq(\"address\", r.bettor)).first();\n        if (c) {\n          let m = c.coins || 0;\n          await t.db.patch(c._id, {\n            coins: m + u,\n            lifetimeEarned: (c.lifetimeEarned || 0) + u\n          }), await t.db.insert(\"coinTransactions\", {\n            address: r.bettor,\n            amount: u,\n            type: \"earn\",\n            source: \"poker_bet_win\",\n            description: `Poker bet winnings (x${r.odds})`,\n            timestamp: Date.now(),\n            balanceBefore: m,\n            balanceAfter: m + u\n          }), console.log(`\\u{1F4B0} Poker bet winnings added to balance: ${u} TESTVBMS for ${r.bettor}. Balance: ${m} \\u2192 ${m + u}`), s += u;\n        }\n        await t.db.patch(r._id, {\n          status: \"won\",\n          payout: u,\n          resolvedAt: Date.now()\n        }), console.log(`\\u2705 Bet won: ${r.bettorUsername} won ${u} (bet ${r.amount} on ${r.betOnUsername})`);\n      } else\n        await t.db.patch(r._id, {\n          status: \"lost\",\n          resolvedAt: Date.now()\n        }), console.log(`\\u274C Bet lost: ${r.bettorUsername} lost ${r.amount} (bet on ${r.betOnUsername})`);\n    return console.log(`\\u{1F3B0} Resolved ${e.length} bets for room ${o.roomId} - Total paid out: ${s}`), {\n      resolved: e.length,\n      totalPaidOut: s\n    };\n  }, \"handler\")\n}), pe = k({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => await t.db.query(\"pokerBets\").withIndex(\"by_room\", (s) => s.eq(\"roomId\", o.roomId)).order(\"desc\").take(100), \"handler\")\n}), he = k({\n  args: {\n    roomId: d.string(),\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, o) => await t.db.query(\"pokerBets\").withIndex(\"by_room\", (s) => s.eq(\"roomId\", o.roomId)).filter((s) => s.eq(s.field(\"bettor\"), o.address.toLowerCase())).collect(), \"handler\")\n}), we = L({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => await t.db.query(\"pokerRooms\").take(100), \"handler\")\n}), ge = A({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => {\n    let o = Date.now(), e = await t.db.query(\"pokerRooms\").take(50), s = 0, n = 0;\n    for (let r of e)\n      if (r.expiresAt < o || o - r.createdAt > 36e5) {\n        let l = await t.db.query(\"voiceParticipants\").withIndex(\"by_room\", (a) => a.eq(\"roomId\", r.roomId)).collect();\n        for (let a of l)\n          await t.db.delete(a._id), n++;\n        await t.db.delete(r._id), s++, console.log(`[cleanupOldRooms] Deleted expired/old room ${r.roomId}`);\n      }\n    return n > 0 && console.log(`[cleanupOldRooms] Cleaned ${n} voice participants`), { deletedCount: s, voiceCleanedCount: n };\n  }, \"handler\")\n}), fe = y({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => {\n    let o = Date.now(), e = await t.db.query(\"pokerRooms\").take(50), s = 0, n = 0;\n    for (let r of e)\n      if (r.expiresAt < o || o - r.createdAt > 36e5) {\n        let l = await t.db.query(\"voiceParticipants\").withIndex(\"by_room\", (a) => a.eq(\"roomId\", r.roomId)).collect();\n        for (let a of l)\n          await t.db.delete(a._id), n++;\n        await t.db.delete(r._id), s++, console.log(`[cleanupOldRoomsPublic] Deleted expired/old room ${r.roomId}`);\n      }\n    return { deletedCount: s, voiceCleanedCount: n };\n  }, \"handler\")\n}), be = y({\n  args: {\n    address: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, { address: o }) => {\n    let e = o.toLowerCase();\n    console.log(`[forceDeleteRoomByAddress] Finding rooms for address ${e}...`);\n    let s = await t.db.query(\"pokerRooms\").filter(\n      (r) => r.or(\n        r.eq(r.field(\"hostAddress\"), e),\n        r.eq(r.field(\"guestAddress\"), e)\n      )\n    ).collect();\n    if (s.length === 0)\n      return { deletedCount: 0, message: \"No rooms found for this address\" };\n    let n = 0;\n    for (let r of s) {\n      let l = await t.db.query(\"voiceParticipants\").withIndex(\"by_room\", (a) => a.eq(\"roomId\", r.roomId)).collect();\n      for (let a of l)\n        await t.db.delete(a._id), n++;\n      await t.db.delete(r._id), console.log(`[forceDeleteRoomByAddress] Deleted room ${r.roomId}`);\n    }\n    return { deletedCount: s.length, voiceCleanedCount: n, message: `Deleted ${s.length} room(s)` };\n  }, \"handler\")\n}), ye = A({\n  args: {\n    roomId: d.string()\n    // roomId is a string in pokerRooms table\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o }) => {\n    console.log(`[forceDeleteRoom] Force deleting room #${o}...`);\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (n) => n.eq(\"roomId\", o)).first();\n    if (!e)\n      throw new Error(`Room #${o} not found`);\n    console.log(\"[forceDeleteRoom] Found room:\", e);\n    let s = await t.db.query(\"voiceParticipants\").withIndex(\"by_room\", (n) => n.eq(\"roomId\", o)).collect();\n    for (let n of s)\n      await t.db.delete(n._id);\n    return s.length > 0 && console.log(`[forceDeleteRoom] Cleaned ${s.length} voice participants`), await t.db.delete(e._id), console.log(`[forceDeleteRoom] Room #${o} deleted successfully`), {\n      success: !0,\n      deletedRoom: {\n        roomId: e.roomId,\n        status: e.status,\n        players: [e.hostAddress, e.guestAddress]\n      },\n      voiceCleanedCount: s.length\n    };\n  }, \"handler\")\n}), V = [\n  { name: \"Mecha Alpha\" },\n  { name: \"Mecha Prime\" },\n  { name: \"Mecha Nova\" },\n  { name: \"Mecha Striker\" },\n  { name: \"Mecha Titan\" },\n  { name: \"Mecha Zero\" },\n  { name: \"Mecha Fury\" },\n  { name: \"Mecha Storm\" },\n  { name: \"Mecha Blade\" },\n  { name: \"Mecha Shadow\" }\n];\nfunction U(t) {\n  let o = D[t] || D.gmvbrs;\n  if (!o || o.length < 10) {\n    let s = D.gmvbrs || [];\n    return O(s).slice(0, 10).map((r) => ({\n      tokenId: r.tokenId,\n      name: r.name,\n      image: r.imageUrl,\n      imageUrl: r.imageUrl,\n      power: r.power,\n      rarity: r.rarity,\n      collection: \"gmvbrs\"\n    }));\n  }\n  return O(o).slice(0, 10).map((s) => ({\n    tokenId: s.tokenId,\n    name: s.name,\n    image: s.imageUrl,\n    imageUrl: s.imageUrl,\n    power: s.power,\n    rarity: s.rarity,\n    collection: t\n  }));\n}\np(U, \"generateCpuPokerDeck\");\nvar Ce = y({\n  args: {\n    collection: d.string(),\n    // Which NFT collection to use for CPU decks\n    forceNew: d.optional(d.boolean())\n    // Force create new room even if one exists\n  },\n  handler: /* @__PURE__ */ p(async (t, { collection: o, forceNew: e }) => {\n    let s = Date.now(), n = await t.db.query(\"pokerRooms\").withIndex(\"by_cpu_collection\", (i) => i.eq(\"isCpuVsCpu\", !0).eq(\"cpuCollection\", o)).filter(\n      (i) => i.or(\n        i.eq(i.field(\"status\"), \"waiting\"),\n        i.eq(i.field(\"status\"), \"ready\"),\n        i.eq(i.field(\"status\"), \"in-progress\")\n      )\n    ).first();\n    if (n && !e)\n      return { roomId: n.roomId, isNew: !1 };\n    let r = O(V), l = r[0], a = r[1], u = U(o), c = U(o), m = `cpu-${o}-${Date.now()}`, g = await t.db.insert(\"pokerRooms\", {\n      roomId: m,\n      status: \"in-progress\",\n      // Start immediately\n      ante: 0,\n      // No ante for CPU vs CPU\n      token: \"VBMS\",\n      isCpuVsCpu: !0,\n      cpuCollection: o,\n      // CPU 1 (Host)\n      hostAddress: `cpu1-${o}`.toLowerCase(),\n      hostUsername: l.name,\n      hostDeck: u,\n      hostReady: !0,\n      hostBankroll: 1e3,\n      hostBoostCoins: 1500,\n      // Increased from 10 to 1500 for more boost usage\n      // CPU 2 (Guest)\n      guestAddress: `cpu2-${o}`.toLowerCase(),\n      guestUsername: a.name,\n      guestDeck: c,\n      guestReady: !0,\n      guestBankroll: 1e3,\n      guestBoostCoins: 1500,\n      // Increased from 10 to 1500 for more boost usage\n      // Spectators start empty\n      spectators: [],\n      // Game state - start round 1\n      gameState: {\n        currentRound: 1,\n        hostScore: 0,\n        guestScore: 0,\n        pot: 0,\n        currentBet: 0,\n        phase: \"card-selection\",\n        hostSelectedCard: void 0,\n        guestSelectedCard: void 0,\n        hostAction: void 0,\n        guestAction: void 0,\n        hostBet: void 0,\n        guestBet: void 0,\n        roundWinner: void 0,\n        hostUsedCards: [],\n        guestUsedCards: []\n      },\n      createdAt: s,\n      expiresAt: s + 1800 * 1e3,\n      // 30 minutes\n      finishedAt: void 0\n    });\n    return console.log(`\\u{1F916} CPU vs CPU room created: ${m} (${o})`), await t.scheduler.runAfter(1e3, $.pokerBattle.cpuMakeMove, {\n      roomId: m,\n      isHost: !0\n    }), { roomId: m, isNew: !0 };\n  }, \"handler\")\n}), Se = k({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => (await t.db.query(\"pokerRooms\").withIndex(\"by_cpu_collection\", (e) => e.eq(\"isCpuVsCpu\", !0)).filter(\n    (e) => e.or(\n      e.eq(e.field(\"status\"), \"waiting\"),\n      e.eq(e.field(\"status\"), \"ready\"),\n      e.eq(e.field(\"status\"), \"in-progress\")\n    )\n  ).collect()).map((e) => ({\n    roomId: e.roomId,\n    collection: e.cpuCollection,\n    status: e.status,\n    hostUsername: e.hostUsername,\n    guestUsername: e.guestUsername,\n    spectatorCount: e.spectators?.length || 0,\n    currentRound: e.gameState?.currentRound || 1,\n    hostScore: e.gameState?.hostScore || 0,\n    guestScore: e.gameState?.guestScore || 0\n  })), \"handler\")\n}), Ie = k({\n  args: {},\n  handler: /* @__PURE__ */ p(async () => [\n    \"gmvbrs\",\n    \"vibe\",\n    \"viberuto\",\n    \"meowverse\",\n    \"vibefid\",\n    \"viberotbangers\"\n  ], \"handler\")\n}), Re = A({\n  args: {\n    roomId: d.string(),\n    isHost: d.boolean()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o, isHost: e }) => {\n    let s = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (c) => c.eq(\"roomId\", o)).first();\n    if (!s || !s.isCpuVsCpu) {\n      console.log(`[cpuMakeMove] Room ${o} not found or not CPU vs CPU`);\n      return;\n    }\n    if (s.status === \"finished\" || s.status === \"cancelled\") {\n      console.log(`[cpuMakeMove] Room ${o} is ${s.status}, skipping`);\n      return;\n    }\n    let n = s.gameState;\n    if (!n) return;\n    let r = n.currentRound || 1, l = e ? s.hostDeck : s.guestDeck, a = e ? n.hostUsedCards : n.guestUsedCards, u = e ? n.hostSelectedCard : n.guestSelectedCard;\n    if (n.phase === \"card-selection\" && !u && l) {\n      let c = l.filter((S) => {\n        let v = typeof S.tokenId == \"string\" ? parseInt(S.tokenId, 10) : S.tokenId;\n        return !a?.includes(v);\n      });\n      if (c.length === 0) {\n        console.log(`[cpuMakeMove] No available cards for CPU ${e ? \"host\" : \"guest\"}`);\n        return;\n      }\n      let m = c[H(c.length)], g = typeof m.tokenId == \"string\" ? parseInt(m.tokenId, 10) : m.tokenId, i = [...a || [], g];\n      console.log(`\\u{1F916} CPU ${e ? \"host\" : \"guest\"} selected card: ${m.name} (power: ${m.power})`);\n      let w = e ? s.hostBoostCoins ?? 1500 : s.guestBoostCoins ?? 1500, f = W(), b;\n      f < 0.5 && w >= 100 ? b = \"BOOST\" : f < 0.75 && w >= 80 ? b = \"SHIELD\" : f < 0.85 && w >= 200 ? b = \"DOUBLE\" : b = \"PASS\";\n      let C = {\n        BOOST: 100,\n        SHIELD: 80,\n        DOUBLE: 200,\n        PASS: 0\n      }[b] || 0, B = w - C;\n      console.log(`\\u{1F916} CPU ${e ? \"host\" : \"guest\"} selected action: ${b} (cost: ${C}, balance: ${B})`), await t.db.patch(s._id, {\n        gameState: {\n          ...n,\n          [e ? \"hostSelectedCard\" : \"guestSelectedCard\"]: m,\n          [e ? \"hostUsedCards\" : \"guestUsedCards\"]: i,\n          [e ? \"hostAction\" : \"guestAction\"]: b\n        },\n        [e ? \"hostBoostCoins\" : \"guestBoostCoins\"]: B\n      });\n      let R = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (S) => S.eq(\"roomId\", o)).first();\n      if (!R || !R.gameState) return;\n      if (e ? R.gameState.guestSelectedCard : R.gameState.hostSelectedCard) {\n        let S = Date.now() + 8e3;\n        console.log(\"\\u{1F916} Both CPUs selected - waiting 8s for spectator bets before reveal (will shorten to 3s if bet placed)\"), await t.db.patch(R._id, {\n          gameState: {\n            ...R.gameState,\n            bettingWindowEndsAt: S,\n            revealScheduledFor: S\n            // Mark when reveal should happen\n          }\n        }), await t.scheduler.runAfter(8e3, $.pokerBattle.cpuRevealRound, {\n          roomId: o\n        });\n      } else\n        await t.scheduler.runAfter(800, $.pokerBattle.cpuMakeMove, {\n          roomId: o,\n          isHost: !e\n        });\n    }\n  }, \"handler\")\n}), Ae = A({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o }) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (a) => a.eq(\"roomId\", o)).first();\n    if (!e || !e.isCpuVsCpu) return;\n    let s = e.gameState;\n    if (!s) return;\n    let n = s.currentRound || 1;\n    if (!s.bettingWindowEndsAt) return;\n    let l = Date.now() + 3e3;\n    l < s.bettingWindowEndsAt && (console.log(`\\u26A1 Bet placed! Shortening betting window to 3s for round ${n}`), await t.db.patch(e._id, {\n      gameState: {\n        ...s,\n        bettingWindowEndsAt: l,\n        revealScheduledFor: l\n        // Mark when reveal should happen\n      }\n    }), await t.scheduler.runAfter(3e3, $.pokerBattle.cpuRevealRound, {\n      roomId: o\n    }), console.log(\"\\u23F0 Scheduled new reveal for 3s, original 8s reveal will be skipped\"));\n  }, \"handler\")\n}), $e = A({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o }) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (a) => a.eq(\"roomId\", o)).first();\n    if (!e || !e.isCpuVsCpu || e.status === \"finished\") return;\n    let s = e.gameState;\n    if (!s) return;\n    let n = s.currentRound || 1;\n    if (s.revealScheduledFor && Date.now() < s.revealScheduledFor - 1e3) {\n      console.log(\"\\u23F8\\uFE0F Skipping early reveal - window was shortened, new reveal already scheduled\");\n      return;\n    }\n    if (s.bettingWindowEndsAt && Date.now() < s.bettingWindowEndsAt) {\n      let a = s.bettingWindowEndsAt - Date.now();\n      if (a < 1e3)\n        console.log(`\\u23F0 Betting window closing in ${a}ms, waiting...`);\n      else {\n        console.log(`\\u23F0 Betting window still open, waiting ${a}ms more`), await t.scheduler.runAfter(a, $.pokerBattle.cpuRevealRound, {\n          roomId: o\n        });\n        return;\n      }\n    }\n    let r = s.hostSelectedCard, l = s.guestSelectedCard;\n    !r || !l || (await t.db.patch(e._id, {\n      gameState: {\n        ...s,\n        phase: \"reveal\",\n        bettingWindowEndsAt: void 0\n        // Clear timer to stop countdown\n      }\n    }), await t.scheduler.runAfter(5e3, $.pokerBattle.cpuResolveRound, {\n      roomId: o\n    }));\n  }, \"handler\")\n}), ke = A({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o }) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (h) => h.eq(\"roomId\", o)).first();\n    if (!e || !e.isCpuVsCpu || e.status === \"finished\") return;\n    let s = e.gameState;\n    if (!s) return;\n    let n = s.hostSelectedCard, r = s.guestSelectedCard;\n    if (!n || !r) return;\n    let l = s.hostAction, a = s.guestAction, u = E(n), c = E(r), m = l === \"SHIELD\", g = a === \"SHIELD\";\n    l === \"BOOST\" && !g && (u *= 1.3), a === \"BOOST\" && !m && (c *= 1.3), l === \"DOUBLE\" && !g && (u *= 2), a === \"DOUBLE\" && !m && (c *= 2), console.log(`\\u{1F916} CPU Arena power calculation: Host ${n.power} \\u2192 ${Math.round(u)} (${l || \"PASS\"}), Guest ${r.power} \\u2192 ${Math.round(c)} (${a || \"PASS\"})`);\n    let i = s.hostScore, w = s.guestScore, f;\n    u > c ? (i++, f = \"host\") : c > u ? (w++, f = \"guest\") : f = \"tie\";\n    let b = s.currentRound, I = await t.db.query(\"roundBets\").withIndex(\n      \"by_room_round\",\n      (h) => h.eq(\"roomId\", o).eq(\"roundNumber\", b)\n    ).filter((h) => h.eq(h.field(\"status\"), \"active\")).collect();\n    console.log(`\\u{1F3B0} CPU Arena: Round ${b} result: ${f}, found ${I.length} active bets [roomId: ${o}]`);\n    let C = f === \"tie\" ? \"tie\" : f === \"host\" ? e.hostAddress : e.guestAddress;\n    if (I.length > 0) {\n      for (let h of I) {\n        let S = h.betOn.toLowerCase() === \"tie\";\n        if (f === \"tie\" && S || h.betOn.toLowerCase() === C?.toLowerCase()) {\n          let _ = Math.floor(h.amount * h.odds), P = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (G) => G.eq(\"address\", h.bettor)).first();\n          P && (await t.db.patch(P._id, {\n            balance: P.balance + _\n          }), console.log(`\\u2705 CPU Arena bet won: ${h.bettor} won ${_} credits (${h.amount} \\xD7 ${h.odds}x)`)), await t.db.patch(h._id, {\n            status: \"won\",\n            payout: _,\n            resolvedAt: Date.now()\n          }), await t.db.insert(\"bettingTransactions\", {\n            address: h.bettor,\n            type: \"win\",\n            amount: _,\n            roomId: o,\n            timestamp: Date.now()\n          });\n        } else\n          await t.db.patch(h._id, {\n            status: \"lost\",\n            resolvedAt: Date.now()\n          }), await t.db.insert(\"bettingTransactions\", {\n            address: h.bettor,\n            type: \"loss\",\n            amount: -h.amount,\n            roomId: o,\n            timestamp: Date.now()\n          }), console.log(`\\u274C CPU Arena bet lost: ${h.bettor} lost ${h.amount} credits`);\n      }\n      console.log(`\\u{1F3B0} Resolved ${I.length} bets for round ${b} (winner: ${C})`);\n    }\n    let B = b + 1;\n    if (i >= 4 || w >= 4 || b >= 7) {\n      let h = i > w ? \"host\" : w > i ? \"guest\" : \"tie\";\n      await t.db.patch(e._id, {\n        status: \"finished\",\n        finishedAt: Date.now(),\n        gameState: {\n          ...s,\n          phase: \"game-over\",\n          hostScore: i,\n          guestScore: w,\n          roundWinner: f\n        }\n      }), console.log(`\\u{1F3C6} CPU vs CPU game finished: ${e.hostUsername} ${i} - ${w} ${e.guestUsername}`), e.spectators && e.spectators.length > 0 && await t.scheduler.runAfter(15e3, $.pokerBattle.cpuRestartGame, {\n        roomId: o\n      });\n    } else\n      await t.db.patch(e._id, {\n        gameState: {\n          ...s,\n          phase: \"resolution\",\n          hostScore: i,\n          guestScore: w,\n          roundWinner: f\n        }\n      }), await t.scheduler.runAfter(2500, $.pokerBattle.cpuStartNextRound, {\n        roomId: o,\n        nextRound: B\n      });\n  }, \"handler\")\n}), Be = A({\n  args: {\n    roomId: d.string(),\n    nextRound: d.number()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o, nextRound: e }) => {\n    let s = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (r) => r.eq(\"roomId\", o)).first();\n    if (!s || !s.isCpuVsCpu || s.status === \"finished\") return;\n    let n = s.gameState;\n    n && (await t.db.patch(s._id, {\n      gameState: {\n        ...n,\n        currentRound: e,\n        phase: \"card-selection\",\n        hostSelectedCard: void 0,\n        guestSelectedCard: void 0,\n        hostAction: void 0,\n        guestAction: void 0,\n        roundWinner: void 0,\n        bettingWindowEndsAt: void 0,\n        // Clear to reset timer\n        revealScheduledFor: void 0\n      }\n    }), console.log(`\\u{1F3AE} CPU vs CPU starting round ${e}`), await t.scheduler.runAfter(800, $.pokerBattle.cpuMakeMove, {\n      roomId: o,\n      isHost: !0\n    }));\n  }, \"handler\")\n}), ve = A({\n  args: {\n    roomId: d.string()\n  },\n  handler: /* @__PURE__ */ p(async (t, { roomId: o }) => {\n    let e = await t.db.query(\"pokerRooms\").withIndex(\"by_room_id\", (l) => l.eq(\"roomId\", o)).first();\n    if (!e || !e.isCpuVsCpu) return;\n    if (!e.spectators || e.spectators.length === 0) {\n      await t.db.delete(e._id), console.log(`\\u{1F5D1}\\uFE0F CPU vs CPU room ${o} deleted (no spectators)`);\n      return;\n    }\n    let s = e.cpuCollection || \"gmvbrs\", n = U(s), r = U(s);\n    await t.db.patch(e._id, {\n      status: \"in-progress\",\n      hostDeck: n,\n      guestDeck: r,\n      finishedAt: void 0,\n      gameState: {\n        currentRound: 1,\n        hostScore: 0,\n        guestScore: 0,\n        pot: 0,\n        currentBet: 0,\n        phase: \"card-selection\",\n        hostSelectedCard: void 0,\n        guestSelectedCard: void 0,\n        hostAction: void 0,\n        guestAction: void 0,\n        hostBet: void 0,\n        guestBet: void 0,\n        roundWinner: void 0,\n        hostUsedCards: [],\n        guestUsedCards: []\n      }\n    }), console.log(`\\u{1F504} CPU vs CPU game restarted: ${o}`), await t.scheduler.runAfter(1e3, $.pokerBattle.cpuMakeMove, {\n      roomId: o,\n      isHost: !0\n    });\n  }, \"handler\")\n}), _e = A({\n  args: {},\n  handler: /* @__PURE__ */ p(async (t) => {\n    let o = await t.db.query(\"pokerRooms\").withIndex(\"by_cpu_collection\", (e) => e.eq(\"isCpuVsCpu\", !0)).collect();\n    console.log(`\\u{1F504} Force resetting ${o.length} CPU rooms...`);\n    for (let e of o)\n      await t.db.delete(e._id), console.log(`\\u2705 Deleted room: ${e.roomId}`);\n    return { deleted: o.length };\n  }, \"handler\")\n});\nexport {\n  ce as cleanupOldPokerRooms,\n  ge as cleanupOldRooms,\n  fe as cleanupOldRoomsPublic,\n  Re as cpuMakeMove,\n  ke as cpuResolveRound,\n  ve as cpuRestartGame,\n  $e as cpuRevealRound,\n  Be as cpuStartNextRound,\n  Ce as createCpuVsCpuRoom,\n  K as createPokerRoom,\n  ue as endSpectatorBetting,\n  ne as finishGame,\n  ye as forceDeleteRoom,\n  be as forceDeleteRoomByAddress,\n  _e as forceResetAllCpuRooms,\n  Ie as getAvailableCollections,\n  Se as getCpuVsCpuRooms,\n  ie as getMyPokerRoom,\n  de as getPokerRoom,\n  ae as getPokerRooms,\n  pe as getRoomBets,\n  he as getUserRoomBets,\n  oe as initializeGame,\n  Q as joinPokerRoom,\n  J as leavePokerRoom,\n  ee as leaveSpectate,\n  we as listAllRooms,\n  le as placeBet,\n  me as resolveBets,\n  re as resolveRound,\n  te as selectCard,\n  Z as setPlayerReady,\n  Ae as shortenBettingWindow,\n  X as spectateRoom,\n  se as useCardAction\n};\n//# sourceMappingURL=pokerBattle.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/pokerBattle.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getCardDisplayPower\", \"card\", \"base\", \"__name\", \"cryptoShuffle\", \"array\", \"result\", \"randomBytes\", \"i\", \"j\", \"cryptoRandomInt\", \"max\", \"cryptoRandomFloat\", \"createPokerRoom\", \"mutation\", \"v\", \"ctx\", \"args\", \"now\", \"normalizedAddress\", \"activeStatuses\", \"roomAsHost\", \"q\", \"roomAsGuest\", \"existingRoom\", \"isHost\", \"roomStatus\", \"opponent\", \"roomId\", \"startingBankroll\", \"roomDocId\", \"joinPokerRoom\", \"room\", \"setPlayerReady\", \"deckCardValidator\", \"wagerCardValidator\", \"isGuest\", \"updatedRoom\", \"leavePokerRoom\", \"spectateRoom\", \"spectators\", \"s\", \"leaveSpectate\", \"address\", \"newSpectators\", \"credits\", \"convertedAmount\", \"profile\", \"currentBalance\", \"isCpuRoom\", \"isLastSpectator\", \"initializeGame\", \"selectCard\", \"updatedGameState\", \"useCardAction\", \"gameState\", \"boostCosts\", \"newHostBoostCoins\", \"newGuestBoostCoins\", \"cost\", \"hasSpectators\", \"resolveRound\", \"hostCard\", \"guestCard\", \"hostAction\", \"guestAction\", \"hostPower\", \"guestPower\", \"hostHasShield\", \"guestHasShield\", \"isTie\", \"hostWins\", \"roundHistory\", \"currentRound\", \"roundWinnerAddress\", \"api\", \"finalWinnerId\", \"finalWinnerUsername\", \"houseFee\", \"finalPrize\", \"finishGame\", \"voiceParticipants\", \"p\", \"getPokerRooms\", \"query\", \"getPokerRoom\", \"getMyPokerRoom\", \"addr\", \"validStatuses\", \"cleanupOldPokerRooms\", \"internalMutation\", \"oldRooms\", \"deleted\", \"placeBet\", \"isTieBet\", \"bettorAddr\", \"currentCoins\", \"odds\", \"betOnUsername\", \"endSpectatorBetting\", \"resolveBets\", \"bets\", \"totalPaidOut\", \"winnerAddr\", \"bet\", \"payout\", \"getRoomBets\", \"getUserRoomBets\", \"listAllRooms\", \"internalQuery\", \"cleanupOldRooms\", \"rooms\", \"deletedCount\", \"voiceCleanedCount\", \"cleanupOldRoomsPublic\", \"forceDeleteRoomByAddress\", \"forceDeleteRoom\", \"CPU_BATTLE_NAMES\", \"generateCpuPokerDeck\", \"collection\", \"cards\", \"COLLECTION_CARDS\", \"fallbackCards\", \"createCpuVsCpuRoom\", \"forceNew\", \"shuffledNames\", \"cpu1\", \"cpu2\", \"cpu1Deck\", \"cpu2Deck\", \"internal\", \"getCpuVsCpuRooms\", \"getAvailableCollections\", \"cpuMakeMove\", \"deck\", \"usedCards\", \"selectedCard\", \"availableCards\", \"cardTokenId\", \"randomCard\", \"tokenIdNum\", \"newUsedCards\", \"currentBoostCoins\", \"actionRoll\", \"cpuAction\", \"newBoostCoins\", \"bettingWindowEndsAt\", \"shortenBettingWindow\", \"newEndsAt\", \"cpuRevealRound\", \"remainingTime\", \"cpuResolveRound\", \"newHostScore\", \"newGuestScore\", \"roundWinner\", \"winnerAddress\", \"nextRound\", \"winner\", \"cpuStartNextRound\", \"cpuRestartGame\", \"forceResetAllCpuRooms\"]\n}\n"},{"path":"emergencyRestore.js","source":"import {\n  d as i\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as o\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/emergencyRestore.ts\nvar E = i({\n  args: {\n    address: o.string(),\n    amount: o.number()\n  },\n  handler: /* @__PURE__ */ a(async (s, { address: n, amount: r }) => {\n    let e = await s.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", n.toLowerCase())).first();\n    if (!e)\n      throw new Error(\"Profile not found\");\n    let t = e.coins || 0;\n    return await s.db.patch(e._id, {\n      coins: r\n    }), console.log(`\\u2705 EMERGENCY RESTORE: ${n} TESTVBMS: ${t} \\u2192 ${r}`), {\n      oldBalance: t,\n      newBalance: r,\n      message: `Restored ${r} TESTVBMS`\n    };\n  }, \"handler\")\n});\nexport {\n  E as restoreTESTVBMS\n};\n//# sourceMappingURL=emergencyRestore.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/emergencyRestore.ts\"],\n  \"mappings\": \";;;;;;;;;;;;AAYO,IAAMA,IAAkBC,EAAiB;AAAA,EAC9C,MAAM;AAAA,IACJ,SAASC,EAAE,OAAO;AAAA,IAClB,QAAQA,EAAE,OAAO;AAAA,EACnB;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,SAAAC,GAAS,QAAAC,EAAO,MAAM;AAC3C,QAAMC,IAAU,MAAMH,EAAI,GACvB,MAAM,UAAU,EAChB,UAAU,cAAc,CAACI,MAAMA,EAAE,GAAG,WAAWH,EAAQ,YAAY,CAAC,CAAC,EACrE,MAAM;AAET,QAAI,CAACE;AACH,YAAM,IAAI,MAAM,mBAAmB;AAGrC,QAAME,IAAaF,EAAQ,SAAS;AAEpC,iBAAMH,EAAI,GAAG,MAAMG,EAAQ,KAAK;AAAA,MAC9B,OAAOD;AAAA,IACT,CAAC,GAED,QAAQ,IAAI,6BAAwBD,CAAO,cAAcI,CAAU,WAAMH,CAAM,EAAE,GAE1E;AAAA,MACL,YAAAG;AAAA,MACA,YAAYH;AAAA,MACZ,SAAS,YAAYA,CAAM;AAAA,IAC7B;AAAA,EACF,GAvBS;AAwBX,CAAC;\",\n  \"names\": [\"restoreTESTVBMS\", \"internalMutation\", \"v\", \"__name\", \"ctx\", \"address\", \"amount\", \"profile\", \"q\", \"oldBalance\"]\n}\n"},{"path":"farcasterCards.js","source":"import {\n  b as C\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as w,\n  c as f,\n  d as b\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/farcasterCards.ts\nvar $ = f({\n  args: {\n    // Farcaster Data (from Neynar API)\n    fid: r.number(),\n    username: r.string(),\n    displayName: r.string(),\n    pfpUrl: r.string(),\n    bio: r.string(),\n    neynarScore: r.number(),\n    followerCount: r.number(),\n    followingCount: r.number(),\n    powerBadge: r.boolean(),\n    // Owner\n    address: r.string(),\n    // Card traits (calculated on frontend)\n    rarity: r.string(),\n    foil: r.string(),\n    wear: r.string(),\n    power: r.number(),\n    // Playing card properties\n    suit: r.string(),\n    // \"hearts\", \"diamonds\", \"spades\", \"clubs\"\n    rank: r.string(),\n    // \"2\"-\"10\", \"J\", \"Q\", \"K\", \"A\"\n    suitSymbol: r.string(),\n    // \"â™¥\", \"â™¦\", \"â™ \", \"â™£\"\n    color: r.string(),\n    // \"red\" or \"black\"\n    // Generated image URLs\n    imageUrl: r.string(),\n    // Video (MP4)\n    cardImageUrl: r.optional(r.string()),\n    // Static PNG for sharing\n    shareImageUrl: r.optional(r.string()),\n    // Share image with card + criminal text\n    // Contract\n    contractAddress: r.optional(r.string()),\n    // NFT contract address\n    // Optional: User language preference\n    language: r.optional(r.string())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = e.address.toLowerCase(), i = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (s) => s.eq(\"fid\", e.fid)).first();\n    if (i)\n      throw console.error(`\\u274C DUPLICATE PREVENTION: FID ${e.fid} already exists in database!`), console.error(`   Existing card: ${i.rank}${i.suitSymbol} (${i.rarity}) - ID: ${i._id}`), new Error(\n        `FID ${e.fid} already minted! Each FID can only be minted once. If you believe this is an error, please contact support.`\n      );\n    let n = Date.now(), o = `farcaster_${e.fid}_${n}`, c = await a.db.insert(\"farcasterCards\", {\n      // Farcaster Data\n      fid: e.fid,\n      username: e.username,\n      displayName: e.displayName,\n      pfpUrl: e.pfpUrl,\n      bio: e.bio.slice(0, 200),\n      // Truncate bio\n      // Owner\n      address: t,\n      // Contract\n      contractAddress: e.contractAddress,\n      // Card Properties\n      cardId: o,\n      rarity: e.rarity,\n      foil: e.foil,\n      wear: e.wear,\n      status: \"Rarity Assigned\",\n      // All Farcaster cards have rarity from Neynar score\n      power: e.power,\n      // Playing Card Properties\n      suit: e.suit,\n      rank: e.rank,\n      suitSymbol: e.suitSymbol,\n      color: e.color,\n      // Farcaster Stats\n      neynarScore: e.neynarScore,\n      latestNeynarScore: e.neynarScore,\n      // Initialize with mint score for Most Wanted ranking\n      latestScoreCheckedAt: Date.now(),\n      followerCount: e.followerCount,\n      followingCount: e.followingCount,\n      powerBadge: e.powerBadge,\n      // Generated Images\n      imageUrl: e.imageUrl,\n      // Video (MP4)\n      cardImageUrl: e.cardImageUrl,\n      // Static PNG for sharing\n      shareImageUrl: e.shareImageUrl,\n      // Share image with card + criminal text\n      // Game State\n      equipped: !1,\n      // Metadata\n      mintedAt: Date.now()\n    });\n    console.log(`\\u2705 Farcaster card minted: FID ${e.fid} (${e.rarity}) by ${t}`);\n    try {\n      await a.db.insert(\"neynarScoreHistory\", {\n        fid: e.fid,\n        username: e.username,\n        score: e.neynarScore,\n        rarity: e.rarity,\n        checkedAt: Date.now()\n      }), console.log(`Initial Neynar score saved: ${e.neynarScore}`);\n    } catch (s) {\n      console.error(\"Failed to save initial score:\", s);\n    }\n    try {\n      let s = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], l = `\\u{1F389} **Welcome to VibeFID, ${e.username}!**\n\nYour **${e.rarity}** card has been created!\n\n\\u{1F4F1} **VibeFID** \\u2192 Your Farcaster profile became a collectible card! Power is based on your Neynar Score.\n\n\\u{1F3AE} [Vibe Most Wanted](https://farcaster.xyz/miniapps/0sNKxskaSKsH/vbms---game-and-wanted-cast) \\u2192 Battle with your card in Poker and PvP. Bet VBMS in Mecha Arena and fight Raid Bosses!\n\n\\u{1F0CF} **Partner Collections** \\u2192 Cards from partner projects also work in battles!\n\n\\u{1F3AF} **Wanted Cast** \\u2192 Interact with featured posts and earn VBMS!\n\n\\u{1F4EC} **VibeMail** \\u2192 Your inbox for anonymous messages.\n\nGood luck! \\u{1F680}`;\n      await a.db.insert(\"cardVotes\", {\n        cardFid: e.fid,\n        voterFid: 0,\n        // System\n        voterAddress: \"0x0000000000000000000000000000000000000000\",\n        date: s,\n        createdAt: Date.now(),\n        voteCount: 0,\n        isPaid: !1,\n        message: l,\n        isRead: !1\n      }), await a.scheduler.runAfter(0, C.notifications.sendVibemailNotification, {\n        recipientFid: e.fid,\n        hasAudio: !1\n      }), console.log(`\\u{1F4EC} Welcome VibeMail sent to FID ${e.fid}`);\n    } catch (s) {\n      console.error(\"Failed to send welcome VibeMail:\", s);\n    }\n    try {\n      let s = await a.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", t)).first();\n      if (s) {\n        let l = s.ownedTokenIds || [], u = e.fid.toString();\n        l.includes(u) || (await a.db.patch(s._id, {\n          ownedTokenIds: [...l, u]\n        }), console.log(`\\u2705 Added VibeFID ${u} to profile's ownedTokenIds`));\n      }\n    } catch (s) {\n      console.error(\"Failed to update ownedTokenIds:\", s);\n    }\n    return {\n      success: !0,\n      cardId: o,\n      rarity: e.rarity,\n      power: e.power,\n      message: `Successfully minted ${e.rarity} card for ${e.username}!`\n    };\n  }, \"handler\")\n}), F = w({\n  args: {\n    address: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = e.address.toLowerCase();\n    return await a.db.query(\"farcasterCards\").withIndex(\"by_address\", (n) => n.eq(\"address\", t)).take(100);\n  }, \"handler\")\n}), q = w({\n  args: {\n    fid: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", e.fid)).take(20);\n    return t.length === 0 ? null : t.sort((n, o) => o._creationTime - n._creationTime)[0];\n  }, \"handler\")\n}), g = w({\n  args: {\n    fid: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => (await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).take(50)).sort((i, n) => n._creationTime - i._creationTime), \"handler\")\n}), _ = f({\n  args: {\n    address: r.string(),\n    cardId: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = e.address.toLowerCase(), i = await a.db.query(\"farcasterCards\").withIndex(\"by_address\", (n) => n.eq(\"address\", t)).filter((n) => n.eq(n.field(\"cardId\"), e.cardId)).first();\n    if (!i)\n      throw new Error(\"Card not found or not owned by you\");\n    return await a.db.patch(i._id, {\n      equipped: !i.equipped,\n      lastUsed: Date.now()\n    }), {\n      success: !0,\n      equipped: !i.equipped\n    };\n  }, \"handler\")\n}), D = w({\n  args: {\n    limit: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = Math.min(e.limit || 100, 500);\n    return await a.db.query(\"farcasterCards\").order(\"desc\").take(t);\n  }, \"handler\")\n}), R = w({\n  args: {\n    limit: r.optional(r.number()),\n    cursor: r.optional(r.number())\n    // _creationTime of last item\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = Math.min(e.limit || 50, 100), i = a.db.query(\"farcasterCards\").order(\"desc\");\n    if (e.cursor) {\n      let s = e.cursor;\n      i = i.filter((l) => l.lt(l.field(\"_creationTime\"), s));\n    }\n    let n = await i.take(t + 1), o = n.length > t, c = o ? n.slice(0, t) : n;\n    return {\n      cards: c,\n      nextCursor: o && c.length > 0 ? c[c.length - 1]._creationTime : null,\n      hasMore: o\n    };\n  }, \"handler\")\n}), x = w({\n  args: {\n    searchTerm: r.optional(r.string()),\n    limit: r.optional(r.number()),\n    offset: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = Math.min(e.limit || 12, 50), i = e.offset || 0, n = e.searchTerm?.trim(), o, c = 0;\n    if (!n || n.length === 0) {\n      let l = await a.db.query(\"farcasterCards\").order(\"desc\").take(i + t + 1);\n      o = l.slice(i, i + t), c = l.length > i + t ? i + t + 1 : l.length;\n    } else if (/^\\d+$/.test(n)) {\n      let u = parseInt(n, 10), y = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (p) => p.eq(\"fid\", u)).first();\n      if (y)\n        o = [y], c = 1;\n      else {\n        let m = (await a.db.query(\"farcasterCards\").order(\"desc\").take(500)).filter(\n          (h) => h.fid.toString().includes(n)\n        );\n        o = m.slice(i, i + t), c = m.length;\n      }\n    } else {\n      let u = await a.db.query(\"farcasterCards\").withSearchIndex(\"search_username\", (y) => y.search(\"username\", n)).take(i + t + 50);\n      o = u.slice(i, i + t), c = u.length;\n    }\n    let s = c > i + t;\n    return {\n      cards: o,\n      totalCount: c,\n      hasMore: s,\n      offset: i,\n      limit: t\n    };\n  }, \"handler\")\n}), A = w({\n  args: {\n    rarity: r.string(),\n    limit: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = Math.min(e.limit || 50, 100);\n    return await a.db.query(\"farcasterCards\").withIndex(\"by_rarity\", (n) => n.eq(\"rarity\", e.rarity)).take(t);\n  }, \"handler\")\n}), N = b({\n  args: {},\n  handler: /* @__PURE__ */ d(async (a) => {\n    let e = \"0x60274A138d026E3cB337B40567100FdEC3127565\", t = await a.db.query(\"farcasterCards\").collect(), i = 0;\n    for (let n of t)\n      n.contractAddress?.toLowerCase() === e.toLowerCase() || (await a.db.delete(n._id), i++);\n    return console.log(`\\u{1F5D1}\\uFE0F Deleted ${i} old VibeFID cards from previous contracts`), {\n      success: !0,\n      deletedCount: i\n    };\n  }, \"handler\")\n}), P = b({\n  args: {\n    docId: r.id(\"farcasterCards\")\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.get(e.docId);\n    if (!t)\n      throw new Error(`Card with ID ${e.docId} not found`);\n    return console.log(`\\u{1F5D1}\\uFE0F  Deleting orphan card: FID ${t.fid} (@${t.username}) - ${t.rank}${t.suitSymbol}`), await a.db.delete(e.docId), {\n      success: !0,\n      deleted: {\n        fid: t.fid,\n        username: t.username,\n        suit: t.suitSymbol\n      }\n    };\n  }, \"handler\")\n}), k = b({\n  args: {\n    fid: r.number(),\n    rarity: r.string(),\n    neynarScore: r.number(),\n    power: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    return await a.db.patch(t._id, {\n      rarity: e.rarity,\n      neynarScore: e.neynarScore,\n      power: e.power,\n      upgradedAt: void 0,\n      previousRarity: void 0,\n      previousNeynarScore: void 0\n    }), { success: !0 };\n  }, \"handler\")\n}), E = f({\n  args: {\n    fid: r.number(),\n    newNeynarScore: r.number(),\n    newRarity: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (h) => h.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    let i = [\"Common\", \"Rare\", \"Epic\", \"Legendary\", \"Mythic\"], n = i.indexOf(t.rarity);\n    if (i.indexOf(e.newRarity) <= n)\n      throw new Error(\n        `Cannot upgrade: New rarity (${e.newRarity}) is not higher than current (${t.rarity})`\n      );\n    let c = {\n      Common: 10,\n      Rare: 20,\n      Epic: 50,\n      Legendary: 100,\n      Mythic: 600\n    }, s = {\n      Pristine: 1.8,\n      Mint: 1.4,\n      \"Lightly Played\": 1,\n      \"Moderately Played\": 1,\n      \"Heavily Played\": 1\n    }, l = {\n      Prize: 6,\n      Standard: 2,\n      None: 1\n    }, u = c[e.newRarity] || 10, y = s[t.wear] || 1, p = l[t.foil] || 1, m = Math.round(u * y * p);\n    return await a.db.patch(t._id, {\n      rarity: e.newRarity,\n      neynarScore: e.newNeynarScore,\n      // Update card score to current score at upgrade time\n      power: m,\n      // Mark when upgraded - save history for tracking\n      upgradedAt: Date.now(),\n      previousRarity: t.rarity,\n      previousNeynarScore: t.neynarScore\n      // Save the score before upgrade\n    }), console.log(`\\u2705 Card upgraded: FID ${e.fid} from ${t.rarity} to ${e.newRarity} (Power: ${t.power} \\u2192 ${m})`), {\n      success: !0,\n      fid: e.fid,\n      oldRarity: t.rarity,\n      newRarity: e.newRarity,\n      oldPower: t.power,\n      newPower: m\n    };\n  }, \"handler\")\n}), M = f({\n  args: {\n    fid: r.number(),\n    newNeynarScore: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    return await a.db.patch(t._id, {\n      latestNeynarScore: e.newNeynarScore,\n      latestScoreCheckedAt: Date.now()\n    }), console.log(`\\u2705 Card refreshed: FID ${e.fid} score ${t.neynarScore} \\u2192 ${e.newNeynarScore} (rarity unchanged: ${t.rarity})`), {\n      success: !0,\n      fid: e.fid,\n      rarity: t.rarity,\n      power: t.power,\n      oldScore: t.neynarScore,\n      newScore: e.newNeynarScore\n    };\n  }, \"handler\")\n}), T = w({\n  args: {\n    limit: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = e.limit || 20;\n    return await a.db.query(\"farcasterCards\").order(\"desc\").take(t);\n  }, \"handler\")\n}), B = f({\n  args: {\n    fid: r.number(),\n    imageUrl: r.optional(r.string()),\n    // Video URL (MP4/WebM)\n    cardImageUrl: r.optional(r.string()),\n    // Static PNG\n    shareImageUrl: r.optional(r.string())\n    // Share image with card + criminal text\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    let i = {};\n    return e.imageUrl && (i.imageUrl = e.imageUrl), e.cardImageUrl && (i.cardImageUrl = e.cardImageUrl), e.shareImageUrl && (i.shareImageUrl = e.shareImageUrl), await a.db.patch(t._id, i), console.log(`\\u2705 Card images updated for FID ${e.fid}`), e.imageUrl && console.log(`   Video: ${e.imageUrl}`), e.cardImageUrl && console.log(`   Static: ${e.cardImageUrl}`), e.shareImageUrl && console.log(`   Share: ${e.shareImageUrl}`), {\n      success: !0,\n      fid: e.fid,\n      imageUrl: e.imageUrl,\n      cardImageUrl: e.cardImageUrl,\n      shareImageUrl: e.shareImageUrl\n    };\n  }, \"handler\")\n}), v = f({\n  args: {\n    fid: r.number(),\n    pfpUrl: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    return await a.db.patch(t._id, { pfpUrl: e.pfpUrl }), console.log(`\\u2705 Updated pfpUrl for FID ${e.fid}`), { success: !0, fid: e.fid };\n  }, \"handler\")\n}), V = f({\n  args: {\n    fid: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    return await a.db.delete(t._id), console.log(`\\u{1F5D1}\\uFE0F Deleted unminted card for FID ${e.fid} (${t.username})`), { success: !0, fid: e.fid, username: t.username };\n  }, \"handler\")\n}), L = w({\n  args: {\n    limit: r.optional(r.number())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = Math.min(e.limit || 8, 20);\n    return (await a.db.query(\"farcasterCards\").order(\"desc\").take(t + 10)).filter((o) => o.cardImageUrl).slice(5, 5 + t).map((o) => ({\n      _id: o._id,\n      fid: o.fid,\n      cardImageUrl: o.cardImageUrl\n    }));\n  }, \"handler\")\n}), O = f({\n  args: {\n    fid: r.number(),\n    username: r.string(),\n    displayName: r.string(),\n    pfpUrl: r.string(),\n    bio: r.string(),\n    neynarScore: r.number(),\n    followerCount: r.number(),\n    followingCount: r.number(),\n    powerBadge: r.boolean(),\n    address: r.string(),\n    rarity: r.string(),\n    foil: r.string(),\n    wear: r.string(),\n    power: r.number(),\n    suit: r.string(),\n    rank: r.string(),\n    suitSymbol: r.string(),\n    color: r.string(),\n    imageUrl: r.string(),\n    cardImageUrl: r.optional(r.string()),\n    shareImageUrl: r.optional(r.string()),\n    contractAddress: r.optional(r.string())\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = e.address.toLowerCase();\n    if (await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (c) => c.eq(\"fid\", e.fid)).first())\n      return { success: !1, error: \"Card already exists\", fid: e.fid };\n    let n = Date.now(), o = `farcaster_${e.fid}_${n}`;\n    return await a.db.insert(\"farcasterCards\", {\n      fid: e.fid,\n      username: e.username,\n      displayName: e.displayName,\n      pfpUrl: e.pfpUrl,\n      bio: (e.bio || \"\").slice(0, 200),\n      address: t,\n      contractAddress: e.contractAddress || \"0x60274a138d026e3cb337b40567100fdec3127565\",\n      cardId: o,\n      rarity: e.rarity,\n      foil: e.foil,\n      wear: e.wear,\n      status: \"Rarity Assigned\",\n      power: e.power,\n      suit: e.suit,\n      rank: e.rank,\n      suitSymbol: e.suitSymbol,\n      color: e.color,\n      neynarScore: e.neynarScore,\n      latestNeynarScore: e.neynarScore,\n      latestScoreCheckedAt: n,\n      followerCount: e.followerCount,\n      followingCount: e.followingCount,\n      powerBadge: e.powerBadge,\n      imageUrl: e.imageUrl,\n      cardImageUrl: e.cardImageUrl,\n      shareImageUrl: e.shareImageUrl,\n      // CRITICAL: These required fields were missing before!\n      equipped: !1,\n      mintedAt: n\n    }), console.log(`\\u2705 Reimported card: FID ${e.fid} (@${e.username}) - ${e.rarity}`), { success: !0, fid: e.fid };\n  }, \"handler\")\n}), z = f({\n  args: {\n    fid: r.number(),\n    neynarScore: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`No card found for FID ${e.fid}`);\n    return await a.db.patch(t._id, {\n      neynarScore: e.neynarScore\n    }), console.log(`\\u2705 Updated neynarScore for FID ${e.fid} to ${e.neynarScore}`), { success: !0, fid: e.fid, neynarScore: e.neynarScore };\n  }, \"handler\")\n}), W = f({\n  args: {\n    fid: r.number(),\n    newAddress: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (i) => i.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`Card with FID ${e.fid} not found`);\n    return await a.db.patch(t._id, {\n      address: e.newAddress.toLowerCase()\n    }), { success: !0, fid: e.fid, oldAddress: t.address, newAddress: e.newAddress.toLowerCase() };\n  }, \"handler\")\n}), H = f({\n  args: {\n    fid: r.number(),\n    newRarity: r.string()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (n) => n.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`Card with FID ${e.fid} not found`);\n    let i = t.rarity;\n    return await a.db.patch(t._id, {\n      rarity: e.newRarity\n    }), { success: !0, fid: e.fid, oldRarity: i, newRarity: e.newRarity };\n  }, \"handler\")\n}), Y = f({\n  args: {\n    fid: r.number(),\n    newRarity: r.string(),\n    newPower: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (o) => o.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`Card with FID ${e.fid} not found`);\n    let i = t.rarity, n = t.power;\n    return await a.db.patch(t._id, {\n      rarity: e.newRarity,\n      power: e.newPower\n    }), { success: !0, fid: e.fid, oldRarity: i, newRarity: e.newRarity, oldPower: n, newPower: e.newPower };\n  }, \"handler\")\n}), K = f({\n  args: {\n    fid: r.number(),\n    newFoil: r.string(),\n    newPower: r.number()\n  },\n  handler: /* @__PURE__ */ d(async (a, e) => {\n    let t = await a.db.query(\"farcasterCards\").withIndex(\"by_fid\", (o) => o.eq(\"fid\", e.fid)).first();\n    if (!t)\n      throw new Error(`Card with FID ${e.fid} not found`);\n    let i = t.foil, n = t.power;\n    return await a.db.patch(t._id, {\n      foil: e.newFoil,\n      power: e.newPower\n    }), {\n      success: !0,\n      fid: e.fid,\n      oldFoil: i,\n      newFoil: e.newFoil,\n      oldPower: n,\n      newPower: e.newPower\n    };\n  }, \"handler\")\n});\nexport {\n  N as deleteAllOldVibeFIDCards,\n  P as deleteOrphanCardById,\n  V as deleteUnmintedCard,\n  W as fixCardAddress,\n  K as fixCardFoilAndPower,\n  H as fixCardRarity,\n  Y as fixCardRarityAndPower,\n  D as getAllFarcasterCards,\n  L as getCardImagesOnly,\n  q as getFarcasterCardByFid,\n  F as getFarcasterCardsByAddress,\n  g as getFarcasterCardsByFid,\n  A as getFarcasterCardsByRarity,\n  R as getFarcasterCardsPaginated,\n  T as getRecentFarcasterCards,\n  $ as mintFarcasterCard,\n  M as refreshCardScore,\n  O as reimportCard,\n  k as resetCardRarity,\n  x as searchFarcasterCards,\n  _ as toggleEquipFarcasterCard,\n  B as updateCardImages,\n  v as updateCardPfp,\n  z as updateNeynarScore,\n  E as upgradeCardRarity\n};\n//# sourceMappingURL=farcasterCards.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/farcasterCards.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"mintFarcasterCard\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"normalizedAddress\", \"existingCard\", \"q\", \"timestamp\", \"cardId\", \"cardDocId\", \"error\", \"today\", \"welcomeMessage\", \"internal\", \"profile\", \"currentTokens\", \"fidString\", \"getFarcasterCardsByAddress\", \"query\", \"getFarcasterCardByFid\", \"cards\", \"a\", \"b\", \"getFarcasterCardsByFid\", \"toggleEquipFarcasterCard\", \"card\", \"getAllFarcasterCards\", \"limit\", \"getFarcasterCardsPaginated\", \"cursor\", \"hasMore\", \"items\", \"searchFarcasterCards\", \"offset\", \"searchTerm\", \"totalCount\", \"allRecent\", \"fid\", \"exactMatch\", \"filtered\", \"searchResults\", \"getFarcasterCardsByRarity\", \"maxLimit\", \"deleteAllOldVibeFIDCards\", \"internalMutation\", \"VIBEFID_CURRENT_CONTRACT\", \"allCards\", \"deletedCount\", \"deleteOrphanCardById\", \"resetCardRarity\", \"upgradeCardRarity\", \"rarityOrder\", \"oldRarityIndex\", \"rarityBasePower\", \"wearMultiplier\", \"foilMultiplier\", \"basePower\", \"wearMult\", \"foilMult\", \"newPower\", \"refreshCardScore\", \"getRecentFarcasterCards\", \"updateCardImages\", \"updates\", \"updateCardPfp\", \"deleteUnmintedCard\", \"getCardImagesOnly\", \"reimportCard\", \"updateNeynarScore\", \"fixCardAddress\", \"fixCardRarity\", \"oldRarity\", \"fixCardRarityAndPower\", \"oldPower\", \"fixCardFoilAndPower\", \"oldFoil\"]\n}\n"},{"path":"farcasterCardsAdmin.js","source":"import {\n  b as s,\n  d as l\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/farcasterCardsAdmin.ts\nvar p = l({\n  args: {\n    // Farcaster Data\n    fid: r.number(),\n    username: r.string(),\n    displayName: r.string(),\n    pfpUrl: r.string(),\n    bio: r.string(),\n    neynarScore: r.number(),\n    followerCount: r.number(),\n    followingCount: r.number(),\n    powerBadge: r.boolean(),\n    // Owner\n    address: r.string(),\n    // Card traits\n    rarity: r.string(),\n    foil: r.string(),\n    wear: r.string(),\n    power: r.number(),\n    // Playing card properties\n    suit: r.string(),\n    rank: r.string(),\n    suitSymbol: r.string(),\n    color: r.string(),\n    // IPFS URL from the on-chain NFT\n    imageUrl: r.string()\n  },\n  handler: /* @__PURE__ */ a(async (t, e) => {\n    let n = e.address.toLowerCase();\n    if (await t.db.query(\"farcasterCards\").withIndex(\"by_fid\", (d) => d.eq(\"fid\", e.fid)).first())\n      throw new Error(`Card for FID ${e.fid} already exists in Convex`);\n    let i = Date.now(), o = `farcaster_${e.fid}_${i}`;\n    return await t.db.insert(\"farcasterCards\", {\n      fid: e.fid,\n      username: e.username,\n      displayName: e.displayName,\n      pfpUrl: e.pfpUrl,\n      bio: e.bio.slice(0, 200),\n      address: n,\n      cardId: o,\n      rarity: e.rarity,\n      foil: e.foil,\n      wear: e.wear,\n      status: \"Rarity Assigned\",\n      power: e.power,\n      suit: e.suit,\n      rank: e.rank,\n      suitSymbol: e.suitSymbol,\n      color: e.color,\n      neynarScore: e.neynarScore,\n      followerCount: e.followerCount,\n      followingCount: e.followingCount,\n      powerBadge: e.powerBadge,\n      imageUrl: e.imageUrl,\n      equipped: !1,\n      mintedAt: i\n    }), console.log(`\\u2705 Added metadata for already-minted FID ${e.fid}`), {\n      success: !0,\n      message: `Metadata added for FID ${e.fid}`\n    };\n  }, \"handler\")\n}), w = l({\n  args: {\n    fid: r.number(),\n    foil: r.optional(r.string()),\n    wear: r.optional(r.string()),\n    power: r.optional(r.number()),\n    imageUrl: r.optional(r.string()),\n    cardImageUrl: r.optional(r.string())\n  },\n  handler: /* @__PURE__ */ a(async (t, e) => {\n    let n = await t.db.query(\"farcasterCards\").withIndex(\"by_fid\", (o) => o.eq(\"fid\", e.fid)).collect();\n    if (n.length === 0)\n      throw new Error(`No card found for FID ${e.fid}`);\n    let f = n.sort((o, d) => d._creationTime - o._creationTime)[0], i = {};\n    return e.foil !== void 0 && (i.foil = e.foil), e.wear !== void 0 && (i.wear = e.wear), e.power !== void 0 && (i.power = e.power), e.imageUrl !== void 0 && (i.imageUrl = e.imageUrl), e.cardImageUrl !== void 0 && (i.cardImageUrl = e.cardImageUrl), await t.db.patch(f._id, i), console.log(`Updated FID ${e.fid}:`, i), { success: !0, fid: e.fid, updates: i };\n  }, \"handler\")\n}), y = s({\n  args: {},\n  handler: /* @__PURE__ */ a(async (t) => (await t.db.query(\"farcasterCards\").collect()).map((n) => ({\n    fid: n.fid,\n    imageUrl: n.imageUrl,\n    cardImageUrl: n.cardImageUrl,\n    shareImageUrl: n.shareImageUrl\n  })), \"handler\")\n});\nexport {\n  p as addMintedCardMetadata,\n  y as listAllMintedCards,\n  w as updateCardTraits\n};\n//# sourceMappingURL=farcasterCardsAdmin.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/farcasterCardsAdmin.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"addMintedCardMetadata\", \"internalMutation\", \"v\", \"__name\", \"ctx\", \"args\", \"normalizedAddress\", \"q\", \"timestamp\", \"cardId\", \"updateCardTraits\", \"cards\", \"card\", \"a\", \"b\", \"updates\", \"listAllMintedCards\", \"internalQuery\"]\n}\n"},{"path":"featuredCasts.js","source":"import {\n  a as y,\n  c as h,\n  d as u\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as s\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as o\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/featuredCasts.ts\nvar A = y({\n  args: {},\n  handler: /* @__PURE__ */ o(async (e) => (await e.db.query(\"featuredCasts\").withIndex(\"by_active\", (t) => t.eq(\"active\", !0)).collect()).sort((t, r) => t.order - r.order), \"handler\")\n}), q = u({\n  args: {\n    castHash: s.string(),\n    warpcastUrl: s.string(),\n    order: s.number()\n  },\n  handler: /* @__PURE__ */ o(async (e, a) => {\n    let t = await e.db.query(\"featuredCasts\").withIndex(\"by_order\", (r) => r.eq(\"order\", a.order)).first();\n    return t ? (await e.db.patch(t._id, {\n      castHash: a.castHash,\n      warpcastUrl: a.warpcastUrl,\n      active: !0,\n      addedAt: Date.now()\n    }), t._id) : await e.db.insert(\"featuredCasts\", {\n      castHash: a.castHash,\n      warpcastUrl: a.warpcastUrl,\n      order: a.order,\n      active: !0,\n      addedAt: Date.now()\n    });\n  }, \"handler\")\n}), C = u({\n  args: {\n    order: s.number()\n  },\n  handler: /* @__PURE__ */ o(async (e, a) => {\n    let t = await e.db.query(\"featuredCasts\").withIndex(\"by_order\", (r) => r.eq(\"order\", a.order)).first();\n    t && await e.db.patch(t._id, { active: !1 });\n  }, \"handler\")\n}), g = 300, b = 2, E = y({\n  args: { address: s.string(), castHash: s.string() },\n  handler: /* @__PURE__ */ o(async (e, { address: a, castHash: t }) => {\n    let r = a.toLowerCase(), n = await e.db.query(\"castInteractions\").withIndex(\n      \"by_player_cast\",\n      (i) => i.eq(\"playerAddress\", r).eq(\"castHash\", t)\n    ).collect();\n    return {\n      liked: n.some((i) => i.interactionType === \"like\" && i.claimed),\n      recasted: n.some((i) => i.interactionType === \"recast\" && i.claimed),\n      replied: n.some((i) => i.interactionType === \"reply\" && i.claimed)\n    };\n  }, \"handler\")\n}), x = h({\n  args: {\n    address: s.string(),\n    castHash: s.string(),\n    interactionType: s.union(s.literal(\"like\"), s.literal(\"recast\"), s.literal(\"reply\"))\n  },\n  handler: /* @__PURE__ */ o(async (e, { address: a, castHash: t, interactionType: r }) => {\n    let n = a.toLowerCase();\n    if (await e.db.query(\"castInteractions\").withIndex(\n      \"by_player_cast\",\n      (c) => c.eq(\"playerAddress\", n).eq(\"castHash\", t)\n    ).filter((c) => c.eq(c.field(\"interactionType\"), r)).first())\n      throw new Error(\"Already claimed this reward\");\n    let l = await e.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", n)).first();\n    if (!l)\n      throw new Error(\"Profile not found\");\n    let d = g, w = l.hasVibeBadge === !0;\n    w && (d = d * b);\n    let f = l.coins || 0, p = f + d, m = (l.lifetimeEarned || 0) + d;\n    return await e.db.patch(l._id, {\n      coins: p,\n      lifetimeEarned: m,\n      lastUpdated: Date.now()\n    }), await e.db.insert(\"coinTransactions\", {\n      address: n,\n      amount: d,\n      type: \"earn\",\n      source: \"featured_cast\",\n      description: `Featured cast ${r}`,\n      timestamp: Date.now(),\n      balanceBefore: f,\n      balanceAfter: p\n    }), await e.db.insert(\"castInteractions\", {\n      playerAddress: n,\n      castHash: t,\n      interactionType: r,\n      claimed: !0,\n      claimedAt: Date.now()\n    }), console.log(`\\u{1F3AC} Cast ${r} reward: ${d} TESTVBMS for ${n}${w ? \" (2x VIBE bonus)\" : \"\"}`), {\n      success: !0,\n      reward: d,\n      newBalance: p,\n      interactionType: r,\n      hasVibeBadge: w,\n      bonusApplied: w ? b : 1\n    };\n  }, \"handler\")\n}), B = u({\n  args: { address: s.string() },\n  handler: /* @__PURE__ */ o(async (e, { address: a }) => {\n    let t = a.toLowerCase(), r = await e.db.query(\"castInteractions\").withIndex(\"by_player\", (n) => n.eq(\"playerAddress\", t)).collect();\n    for (let n of r)\n      await e.db.delete(n._id);\n    return console.log(`\\u{1F504} Reset ${r.length} cast interactions for ${t}`), {\n      success: !0,\n      deleted: r.length\n    };\n  }, \"handler\")\n});\nexport {\n  x as claimCastInteractionReward,\n  A as getActiveCasts,\n  E as getCastInteractionProgress,\n  C as removeFeaturedCast,\n  B as resetCastInteractions,\n  q as setFeaturedCast\n};\n//# sourceMappingURL=featuredCasts.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/featuredCasts.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getActiveCasts\", \"query\", \"__name\", \"ctx\", \"q\", \"a\", \"b\", \"setFeaturedCast\", \"internalMutation\", \"v\", \"args\", \"existing\", \"removeFeaturedCast\", \"cast\", \"CAST_INTERACTION_REWARD\", \"VIBE_BADGE_MULTIPLIER\", \"getCastInteractionProgress\", \"address\", \"castHash\", \"normalizedAddress\", \"progress\", \"p\", \"claimCastInteractionReward\", \"mutation\", \"interactionType\", \"profile\", \"reward\", \"hasVibeBadge\", \"currentBalance\", \"newBalance\", \"newLifetimeEarned\", \"resetCastInteractions\", \"interactions\", \"interaction\"]\n}\n"},{"path":"fixAuctionTimer.js","source":"import {\n  b as w\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  d as i\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as u\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/fixAuctionTimer.ts\nvar g = i({\n  args: { auctionId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { auctionId: o }) => {\n    let t = await e.db.get(o);\n    if (!t) throw new Error(\"Auction not found\");\n    if (t.status !== \"bidding\") throw new Error(\"Auction is not in bidding status\");\n    let s = Date.now();\n    return await e.db.patch(t._id, {\n      auctionEndsAt: s - 1e3\n      // Set to 1 second ago\n    }), console.log(`[ADMIN] Forced end auction ${o} - will be processed by next cron`), { success: !0, auctionId: o, newEndTime: s - 1e3 };\n  }, \"handler\")\n}), m = i({\n  args: { auctionId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { auctionId: o }) => {\n    let t = await e.db.get(o);\n    if (!t) throw new Error(\"Auction not found\");\n    if (t.status !== \"active\") throw new Error(\"Auction is not active\");\n    if (!t.castHash || !t.warpcastUrl) throw new Error(\"Auction has no cast data\");\n    let s = Date.now(), r = await e.db.query(\"featuredCasts\").filter((c) => c.eq(c.field(\"castHash\"), t.castHash)).first();\n    if (r)\n      return await e.db.patch(r._id, {\n        active: !0,\n        addedAt: s,\n        auctionId: t._id,\n        warpcastUrl: t.warpcastUrl\n      }), console.log(`[ADMIN] Updated existing featuredCast for ${t.castHash}`), { success: !0, action: \"updated\", castHash: t.castHash };\n    let n = await e.db.query(\"featuredCasts\").filter(\n      (c) => c.and(\n        c.gte(c.field(\"order\"), 100),\n        c.lte(c.field(\"order\"), 101)\n      )\n    ).collect(), a = n.map((c) => c.order), l = [100, 101].find((c) => !a.includes(c));\n    if (l !== void 0)\n      return await e.db.insert(\"featuredCasts\", {\n        castHash: t.castHash,\n        warpcastUrl: t.warpcastUrl,\n        order: l,\n        active: !0,\n        addedAt: s,\n        auctionId: t._id\n      }), console.log(`[ADMIN] Created new featuredCast at slot ${l} for ${t.castHash}`), { success: !0, action: \"created\", slot: l, castHash: t.castHash };\n    n.sort((c, A) => (c.addedAt || 0) - (A.addedAt || 0));\n    let f = n[0];\n    return await e.db.patch(f._id, {\n      castHash: t.castHash,\n      warpcastUrl: t.warpcastUrl,\n      active: !0,\n      addedAt: s,\n      auctionId: t._id\n    }), console.log(`[ADMIN] Replaced oldest slot ${f.order} with ${t.castHash}`), { success: !0, action: \"replaced\", slot: f.order, castHash: t.castHash };\n  }, \"handler\")\n}), y = i({\n  args: {},\n  handler: /* @__PURE__ */ d(async (e) => (await e.scheduler.runAfter(0, w.castAuctions.processAuctionLifecycle, {}), { success: !0, message: \"Scheduled processAuctionLifecycle to run immediately\" }), \"handler\")\n}), I = i({\n  args: {},\n  handler: /* @__PURE__ */ d(async (e) => {\n    let o = Date.now(), t = 0, s = 0, r = await e.db.query(\"castAuctions\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"bidding\")).filter((a) => a.eq(a.field(\"currentBid\"), 0)).collect();\n    for (let a of r)\n      !a.castHash && !a.warpcastUrl && (await e.db.delete(a._id), t++);\n    let n = await e.db.query(\"castAuctions\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"active\")).filter((a) => a.lte(a.field(\"featureEndsAt\"), o)).collect();\n    for (let a of n)\n      await e.db.patch(a._id, { status: \"completed\" }), s++;\n    return console.log(`[CLEANUP] Deleted ${t} empty auctions, completed ${s} expired active auctions`), {\n      success: !0,\n      deletedEmpty: t,\n      completedActive: s\n    };\n  }, \"handler\")\n}), _ = i({\n  args: { keepCount: u.number() },\n  handler: /* @__PURE__ */ d(async (e, { keepCount: o }) => {\n    let t = await e.db.query(\"castAuctions\").withIndex(\"by_status\", (r) => r.eq(\"status\", \"active\")).collect();\n    t.sort((r, n) => (n.featureStartsAt || 0) - (r.featureStartsAt || 0));\n    let s = 0;\n    for (let r = o; r < t.length; r++)\n      await e.db.patch(t[r]._id, { status: \"completed\" }), s++;\n    return console.log(`[CLEANUP] Kept ${o} active auctions, completed ${s} older ones`), {\n      success: !0,\n      kept: Math.min(o, t.length),\n      completed: s\n    };\n  }, \"handler\")\n}), E = i({\n  args: {\n    completeAuctionId: u.string(),\n    activateAuctionId: u.string()\n  },\n  handler: /* @__PURE__ */ d(async (e, { completeAuctionId: o, activateAuctionId: t }) => {\n    let s = Date.now(), r = 1440 * 60 * 1e3, n = await e.db.get(o);\n    n && (await e.db.patch(n._id, { status: \"completed\" }), console.log(`[SWAP] Completed auction ${o}`));\n    let a = await e.db.get(t);\n    return a && (await e.db.patch(a._id, {\n      status: \"active\",\n      featureStartsAt: s,\n      featureEndsAt: s + r\n    }), console.log(`[SWAP] Activated auction ${t}`)), { success: !0, completed: o, activated: t };\n  }, \"handler\")\n}), v = i({\n  args: { auctionId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { auctionId: o }) => {\n    let t = Date.now(), s = 1440 * 60 * 1e3, r = await e.db.get(o);\n    if (!r) throw new Error(\"Auction not found\");\n    return await e.db.patch(r._id, {\n      status: \"active\",\n      featureStartsAt: t,\n      featureEndsAt: t + s\n    }), console.log(`[ADMIN] Reactivated auction ${o}`), { success: !0 };\n  }, \"handler\")\n}), U = i({\n  args: { auctionId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { auctionId: o }) => {\n    let t = Date.now(), s = await e.db.query(\"castAuctionBids\").withIndex(\"by_auction\", (a) => a.eq(\"auctionId\", o)).collect(), r = 0, n = 0;\n    for (let a of s)\n      if (a.status === \"active\") {\n        let l = await e.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", a.bidderAddress.toLowerCase())).first();\n        l && (await e.db.patch(l._id, {\n          coins: (l.coins || 0) + a.bidAmount\n        }), r++, n += a.bidAmount), await e.db.patch(a._id, {\n          status: \"refunded\",\n          refundAmount: a.bidAmount,\n          refundedAt: t\n        });\n      }\n    return console.log(`[REFUND] Processed ${r} refunds totaling ${n} coins`), { success: !0, refundedCount: r, totalRefunded: n };\n  }, \"handler\")\n}), H = i({\n  args: { bidId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { bidId: o }) => {\n    let t = Date.now(), s = await e.db.get(o);\n    if (!s) throw new Error(\"Bid not found\");\n    if (s.status !== \"active\") return { success: !1, reason: \"already refunded\" };\n    let r = await e.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", s.bidderAddress.toLowerCase())).first();\n    return r && await e.db.patch(r._id, {\n      coins: (r.coins || 0) + s.bidAmount\n    }), await e.db.patch(s._id, {\n      status: \"refunded\",\n      refundAmount: s.bidAmount,\n      refundedAt: t\n    }), console.log(`[REFUND] ${s.bidderUsername}: ${s.bidAmount} coins`), { success: !0, username: s.bidderUsername, amount: s.bidAmount };\n  }, \"handler\")\n}), D = i({\n  args: {},\n  handler: /* @__PURE__ */ d(async (e) => {\n    let o = Date.now(), t = await e.db.query(\"castAuctions\").withIndex(\"by_status\", (n) => n.eq(\"status\", \"active\")).collect();\n    t.sort((n, a) => (a.featureStartsAt || 0) - (n.featureStartsAt || 0));\n    let s = t.slice(0, 2), r = await e.db.query(\"featuredCasts\").filter((n) => n.gte(n.field(\"order\"), 100)).collect();\n    for (let n of r)\n      await e.db.delete(n._id);\n    for (let n = 0; n < s.length; n++) {\n      let a = s[n];\n      a.castHash && a.warpcastUrl && await e.db.insert(\"featuredCasts\", {\n        castHash: a.castHash,\n        warpcastUrl: a.warpcastUrl,\n        order: 100 + n,\n        active: !0,\n        addedAt: o,\n        auctionId: a._id\n      });\n    }\n    return console.log(`[SYNC] Synced ${s.length} featured casts`), { success: !0, synced: s.map((n) => n.castHash) };\n  }, \"handler\")\n}), $ = i({\n  args: { auctionId: u.string() },\n  handler: /* @__PURE__ */ d(async (e, { auctionId: o }) => {\n    let t = await e.db.get(o);\n    if (!t) throw new Error(\"Auction not found\");\n    return await e.db.patch(t._id, {\n      winnerAddress: void 0,\n      winnerUsername: void 0,\n      winningBid: void 0,\n      featureStartsAt: void 0,\n      featureEndsAt: void 0\n    }), console.log(`[ADMIN] Cleared loser data from ${o}`), { success: !0 };\n  }, \"handler\")\n});\nexport {\n  m as addMissingFeaturedCast,\n  I as cleanupAuctions,\n  $ as clearLoserData,\n  g as forceEndAuction,\n  y as forceProcessLifecycle,\n  _ as keepOnlyRecentActive,\n  U as processRefundsForAuction,\n  v as reactivateAuction,\n  H as refundSingleBid,\n  E as swapAuctionStatus,\n  D as syncFeaturedCasts\n};\n//# sourceMappingURL=fixAuctionTimer.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/fixAuctionTimer.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"forceEndAuction\", \"internalMutation\", \"v\", \"__name\", \"ctx\", \"auctionId\", \"auction\", \"now\", \"addMissingFeaturedCast\", \"existing\", \"q\", \"allSlots\", \"usedOrders\", \"s\", \"targetOrder\", \"o\", \"a\", \"b\", \"oldest\", \"forceProcessLifecycle\", \"internal\", \"cleanupAuctions\", \"deletedEmpty\", \"completedActive\", \"emptyAuctions\", \"expiredActive\", \"keepOnlyRecentActive\", \"keepCount\", \"activeAuctions\", \"completed\", \"i\", \"swapAuctionStatus\", \"completeAuctionId\", \"activateAuctionId\", \"FEATURE_DURATION\", \"wrongAuction\", \"correctAuction\", \"reactivateAuction\", \"processRefundsForAuction\", \"bids\", \"refundedCount\", \"totalRefunded\", \"bid\", \"profile\", \"refundSingleBid\", \"bidId\", \"syncFeaturedCasts\", \"winners\", \"top2\", \"existingSlots\", \"slot\", \"clearLoserData\"]\n}\n"},{"path":"importData.js","source":"import {\n  d\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport {\n  a as t\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/importData.ts\nvar o = {\n  \"0x12cf353ef7d37ab6c5505ff673116986db7c9102\": {\n    address: \"0x12cf353ef7d37ab6c5505ff673116986db7c9102\",\n    username: \"0xjoonx\",\n    stats: {\n      totalPower: 173,\n      totalCards: 11,\n      openedCards: 11,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    createdAt: 1761234483880,\n    lastUpdated: 1761254595472\n  },\n  \"0x167e316d548cf1613b12cdd7c92e5859053a0039\": {\n    address: \"0x167e316d548cf1613b12cdd7c92e5859053a0039\",\n    username: \"Ted Binion\",\n    defenseDeck: [\"8117\", \"8111\", \"8130\", \"8120\", \"8126\"],\n    stats: {\n      totalPower: 336,\n      totalCards: 50,\n      openedCards: 50,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    userIndex: 9999,\n    createdAt: 1761265484317,\n    lastUpdated: 1761504863082\n  },\n  \"0x28f4a9a2e747ec2cb1b4e235a55dff5be2ef48d6\": {\n    address: \"0x28f4a9a2e747ec2cb1b4e235a55dff5be2ef48d6\",\n    username: \"0xStk\",\n    defenseDeck: [\"8073\", \"8074\", \"8075\", \"8077\", \"8078\"],\n    stats: {\n      totalPower: 229,\n      totalCards: 10,\n      openedCards: 10,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    lastAttackDate: \"2025-10-26\",\n    createdAt: 1761156122616,\n    lastUpdated: 1761508109296\n  },\n  \"0x2a9585da40de004d6ff0f5f12cfe726bd2f98b52\": {\n    address: \"0x2a9585da40de004d6ff0f5f12cfe726bd2f98b52\",\n    username: \"joaovitorhbo\",\n    twitter: \"Lowprofile_eth\",\n    defenseDeck: [\"6483\", \"6729\", \"2522\", \"6923\", \"7948\"],\n    stats: {\n      totalPower: 1604,\n      totalCards: 58,\n      openedCards: 58,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 1,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    lastAttackDate: \"2025-10-26\",\n    createdAt: 1761109636162,\n    lastUpdated: 1761508671244\n  },\n  \"0x921bc01f8b105b831f01ec6619ff915b41de9fa8\": {\n    address: \"0x921bc01f8b105b831f01ec6619ff915b41de9fa8\",\n    username: \"Vipul\",\n    stats: {\n      totalPower: 0,\n      totalCards: 0,\n      openedCards: 0,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    createdAt: 1761246110210,\n    lastUpdated: 1761246110210\n  },\n  \"0x9c9d341658cd8be9023c8b6b6cd2179c720538a0\": {\n    address: \"0x9c9d341658cd8be9023c8b6b6cd2179c720538a0\",\n    username: \"sweet\",\n    twitter: \"0xsweets\",\n    defenseDeck: [\"209\", \"107\", \"2314\", \"2295\", \"2298\"],\n    stats: {\n      totalPower: 975,\n      totalCards: 110,\n      openedCards: 110,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    createdAt: 1761160880320,\n    lastUpdated: 1761504833262\n  },\n  \"0xa12fcb2e0ee6c6e4930edf254a9fa5a17636b67d\": {\n    address: \"0xa12fcb2e0ee6c6e4930edf254a9fa5a17636b67d\",\n    username: \"Jayabs\",\n    twitter: \"jayabs_eth\",\n    defenseDeck: [\"6256\", \"6261\", \"6260\", \"6259\", \"6265\"],\n    stats: {\n      totalPower: 179,\n      totalCards: 20,\n      openedCards: 20,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    userIndex: 9999,\n    createdAt: 1761267394741,\n    lastUpdated: 1761336389853\n  },\n  \"0xbb4c7d8b2e32c7c99d358be999377c208cce53c2\": {\n    address: \"0xbb4c7d8b2e32c7c99d358be999377c208cce53c2\",\n    username: \"Claude\",\n    twitter: \"claudeIAbyjvhbo\",\n    twitterHandle: \"CLAUDINbyJVHBO\",\n    defenseDeck: [\"1\", \"2\", \"3\", \"4\", \"5\"],\n    stats: {\n      totalPower: 19,\n      totalCards: 5,\n      openedCards: 5,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    userIndex: 9999,\n    createdAt: 1761432598523,\n    lastUpdated: 1761450525620,\n    updatedAt: 1761442222362\n  },\n  \"0xc2c3ca34cf5e80c49514acda6a466ed2894483e3\": {\n    address: \"0xc2c3ca34cf5e80c49514acda6a466ed2894483e3\",\n    username: \"Shiro\",\n    stats: {\n      totalPower: 47,\n      totalCards: 38,\n      openedCards: 18,\n      unopenedCards: 20,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    createdAt: 1761185088739,\n    lastUpdated: 1761185704772\n  },\n  \"0xcd7edea4be83d02db5cfe0079847581723bb28b4\": {\n    address: \"0xcd7edea4be83d02db5cfe0079847581723bb28b4\",\n    username: \"BASEDNUKEM\",\n    stats: {\n      totalPower: 0,\n      totalCards: 0,\n      openedCards: 0,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 0,\n      attackWins: 0,\n      attackLosses: 0,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 0,\n    rematchesToday: 0,\n    userIndex: 9999,\n    createdAt: 1761447624213,\n    lastUpdated: 1761447624213\n  },\n  \"0xd024c93588fb2fc5da321eba704d2302d2c9443a\": {\n    address: \"0xd024c93588fb2fc5da321eba704d2302d2c9443a\",\n    username: \"account_test\",\n    defenseDeck: [\"7950\", \"7951\", \"7953\", \"7949\", \"7954\"],\n    stats: {\n      totalPower: 50,\n      totalCards: 8,\n      openedCards: 8,\n      unopenedCards: 0,\n      pveWins: 0,\n      pveLosses: 0,\n      pvpWins: 0,\n      pvpLosses: 1,\n      attackWins: 0,\n      attackLosses: 1,\n      defenseWins: 0,\n      defenseLosses: 0\n    },\n    attacksToday: 1,\n    rematchesToday: 0,\n    lastAttackDate: \"2025-10-26\",\n    createdAt: 1761177069064,\n    lastUpdated: 1761508671390\n  }\n}, f = d({\n  args: {},\n  handler: /* @__PURE__ */ t(async (n) => {\n    let a = 0;\n    for (let [c, r] of Object.entries(o)) {\n      let e = r, s = {\n        address: e.address,\n        username: e.username,\n        stats: e.stats,\n        attacksToday: e.attacksToday,\n        rematchesToday: e.rematchesToday,\n        createdAt: e.createdAt,\n        lastUpdated: e.lastUpdated\n      };\n      e.defenseDeck && (s.defenseDeck = e.defenseDeck), e.lastAttackDate && (s.lastAttackDate = e.lastAttackDate), e.twitter && (s.twitter = e.twitter), e.twitterHandle && (s.twitterHandle = e.twitterHandle), e.userIndex && (s.userIndex = e.userIndex), e.updatedAt && (s.updatedAt = e.updatedAt), await n.db.insert(\"profiles\", s), a++, console.log(`Imported: ${e.username}`);\n    }\n    return { imported: a };\n  }, \"handler\")\n});\nexport {\n  f as importProfiles\n};\n//# sourceMappingURL=importData.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/importData.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"BACKUP_PROFILES\", \"importProfiles\", \"internalMutation\", \"__name\", \"ctx\", \"count\", \"address\", \"profileRaw\", \"profile\", \"profileData\"]\n}\n"},{"path":"languageBoost.js","source":"import {\n  a,\n  b,\n  c,\n  d\n} from \"./_deps/5GK4PSQG.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  b as applyLanguageBoost,\n  d as getBoostMultiplier,\n  c as getBoostPercentage,\n  a as hasLanguageBoost\n};\n//# sourceMappingURL=languageBoost.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"matches.js","source":"import {\n  a as l\n} from \"./_deps/LKY7FFHL.js\";\nimport {\n  b as u\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  b as c\n} from \"./_deps/IJFCN5IR.js\";\nimport {\n  a as i,\n  c as y\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/matches.ts\nvar P = i({\n  args: {\n    address: e.string(),\n    limit: e.optional(e.number())\n  },\n  handler: /* @__PURE__ */ a(async (n, { address: t, limit: s = 50 }) => await n.db.query(\"matches\").withIndex(\"by_player\", (r) => r.eq(\"playerAddress\", l(t))).order(\"desc\").take(s), \"handler\")\n}), A = i({\n  args: {\n    address: e.string(),\n    limit: e.optional(e.number())\n  },\n  handler: /* @__PURE__ */ a(async (n, { address: t, limit: s = 50 }) => (await n.db.query(\"matches\").withIndex(\"by_player\", (r) => r.eq(\"playerAddress\", l(t))).order(\"desc\").take(s)).map((r) => ({\n    _id: r._id,\n    type: r.type,\n    result: r.result,\n    playerPower: r.playerPower,\n    opponentPower: r.opponentPower,\n    opponentAddress: r.opponentAddress,\n    opponentUsername: r.opponentUsername,\n    timestamp: r.timestamp,\n    coinsEarned: r.coinsEarned,\n    entryFeePaid: r.entryFeePaid,\n    difficulty: r.difficulty\n    // ðŸš« EXCLUDED: playerCards, opponentCards (saves ~400KB per query!)\n  })), \"handler\")\n}), k = y({\n  args: {\n    playerAddress: e.string(),\n    type: e.union(\n      e.literal(\"pve\"),\n      e.literal(\"pvp\"),\n      e.literal(\"attack\"),\n      e.literal(\"defense\"),\n      e.literal(\"poker-pvp\"),\n      e.literal(\"poker-cpu\")\n    ),\n    result: e.union(\n      e.literal(\"win\"),\n      e.literal(\"loss\"),\n      e.literal(\"tie\")\n    ),\n    playerPower: e.number(),\n    opponentPower: e.number(),\n    playerCards: e.array(c),\n    // ðŸ”’ SECURITY\n    opponentCards: e.array(c),\n    // ðŸ”’ SECURITY\n    opponentAddress: e.optional(e.string()),\n    opponentUsername: e.optional(e.string()),\n    coinsEarned: e.optional(e.number()),\n    // $TESTVBMS earned from this match\n    entryFeePaid: e.optional(e.number()),\n    // Entry fee paid\n    difficulty: e.optional(e.union(\n      e.literal(\"gey\"),\n      e.literal(\"goofy\"),\n      e.literal(\"gooner\"),\n      e.literal(\"gangster\"),\n      e.literal(\"gigachad\")\n    )),\n    // AI difficulty for PvE\n    playerScore: e.optional(e.number()),\n    // Player's score in poker\n    opponentScore: e.optional(e.number())\n    // Opponent's score in poker\n  },\n  handler: /* @__PURE__ */ a(async (n, t) => {\n    let s = t.playerAddress.toLowerCase(), p = t.opponentAddress?.toLowerCase(), r = await n.db.insert(\"matches\", {\n      playerAddress: s,\n      type: t.type,\n      result: t.result,\n      playerPower: t.playerPower,\n      opponentPower: t.opponentPower,\n      opponentAddress: p,\n      opponentUsername: t.opponentUsername,\n      timestamp: Date.now(),\n      playerCards: t.playerCards,\n      opponentCards: t.opponentCards,\n      coinsEarned: t.coinsEarned,\n      entryFeePaid: t.entryFeePaid,\n      difficulty: t.difficulty,\n      playerScore: t.playerScore,\n      opponentScore: t.opponentScore\n    }), d = await n.db.query(\"profiles\").withIndex(\n      \"by_address\",\n      (o) => o.eq(\"address\", s)\n    ).first();\n    if (d) {\n      let o = { ...d.stats };\n      t.type === \"pve\" || t.type === \"poker-cpu\" ? t.result === \"win\" ? o.pveWins = (o.pveWins || 0) + 1 : t.result === \"loss\" && (o.pveLosses = (o.pveLosses || 0) + 1) : t.result === \"win\" ? o.pvpWins = (o.pvpWins || 0) + 1 : t.result === \"loss\" && (o.pvpLosses = (o.pvpLosses || 0) + 1), await n.db.patch(d._id, {\n        stats: o,\n        lastUpdated: Date.now()\n      });\n    }\n    try {\n      t.type === \"defense\" && t.result === \"win\" && await n.scheduler.runAfter(0, u.quests.updateWeeklyProgress, {\n        address: s,\n        questId: \"weekly_defense_wins\",\n        increment: 1\n      });\n    } catch {\n    }\n    return r;\n  }, \"handler\")\n}), q = i({\n  args: { limit: e.optional(e.number()) },\n  handler: /* @__PURE__ */ a(async (n, { limit: t = 20 }) => await n.db.query(\"matches\").order(\"desc\").take(t), \"handler\")\n}), C = i({\n  args: { address: e.string() },\n  handler: /* @__PURE__ */ a(async (n, { address: t }) => {\n    let s = {\n      total: 0,\n      wins: 0,\n      losses: 0,\n      ties: 0,\n      pve: 0,\n      pvp: 0,\n      attack: 0,\n      defense: 0\n    }, p = n.db.query(\"matches\").withIndex(\"by_player\", (r) => r.eq(\"playerAddress\", l(t)));\n    for await (let r of p)\n      s.total++, r.result === \"win\" ? s.wins++ : r.result === \"loss\" ? s.losses++ : r.result === \"tie\" && s.ties++, r.type === \"pve\" ? s.pve++ : r.type === \"pvp\" ? s.pvp++ : r.type === \"attack\" ? s.attack++ : r.type === \"defense\" && s.defense++;\n    return s;\n  }, \"handler\")\n});\nexport {\n  P as getMatchHistory,\n  A as getMatchHistorySummary,\n  C as getMatchStats,\n  q as getRecentMatches,\n  k as recordMatch\n};\n//# sourceMappingURL=matches.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/matches.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getMatchHistory\", \"query\", \"v\", \"__name\", \"ctx\", \"address\", \"limit\", \"q\", \"normalizeAddress\", \"getMatchHistorySummary\", \"m\", \"recordMatch\", \"mutation\", \"deckCardValidator\", \"args\", \"normalizedPlayerAddress\", \"normalizedOpponentAddress\", \"matchId\", \"profile\", \"newStats\", \"internal\", \"getRecentMatches\", \"getMatchStats\", \"stats\", \"matches\", \"match\"]\n}\n"},{"path":"_deps/LKY7FFHL.js","source":"import {\n  a as e\n} from \"./5B5TEMMX.js\";\n\n// convex/utils.ts\nfunction o(t) {\n  if (!t)\n    throw new Error(\"Address is required\");\n  if (!t.startsWith(\"0x\"))\n    throw new Error(\"Invalid address format: must start with 0x\");\n  if (t.length !== 42)\n    throw new Error(`Invalid address length: expected 42, got ${t.length}`);\n  return t.toLowerCase();\n}\ne(o, \"normalizeAddress\");\nfunction s(t) {\n  return !t || !t.startsWith(\"0x\") || t.length !== 42 ? !1 : /^0x[a-fA-F0-9]{40}$/.test(t);\n}\ne(s, \"isValidAddress\");\nfunction u(t, r) {\n  try {\n    return o(t) === o(r);\n  } catch {\n    return !1;\n  }\n}\ne(u, \"addressesEqual\");\nfunction a() {\n  return (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n}\ne(a, \"getTodayString\");\nfunction g(t) {\n  let r = a(), n = new Date(t).toISOString().split(\"T\")[0];\n  return r === n;\n}\ne(g, \"isToday\");\nfunction l(t) {\n  return t.reduce((r, n) => r + (n.power || 0), 0);\n}\ne(l, \"calculateTotalPower\");\nfunction f(t, r, n, i = \"Value\") {\n  if (t < r || t > n)\n    throw new Error(`${i} must be between ${r} and ${n}, got ${t}`);\n}\ne(f, \"validateRange\");\nfunction c(t, r = \"Field\") {\n  if (!t || t.trim().length === 0)\n    throw new Error(`${r} cannot be empty`);\n}\ne(c, \"validateNotEmpty\");\n\nexport {\n  o as a,\n  s as b,\n  u as c,\n  a as d,\n  g as e,\n  l as f,\n  f as g,\n  c as h\n};\n//# sourceMappingURL=LKY7FFHL.js.map\n","environment":"isolate"},{"path":"cardVotes.js","source":"import {\n  a as d\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as a\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as r\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/cardVotes.ts\nvar u = d({\n  args: { cardFid: a.number() },\n  handler: /* @__PURE__ */ r(async (n, t) => (await n.db.query(\"cardVotes\").withIndex(\n    \"by_card_unread\",\n    (e) => e.eq(\"cardFid\", t.cardFid).eq(\"isRead\", !1)\n  ).filter((e) => e.neq(e.field(\"message\"), void 0)).take(100)).length, \"handler\")\n});\nexport {\n  u as getUnreadMessageCount\n};\n//# sourceMappingURL=cardVotes.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/cardVotes.ts\"],\n  \"mappings\": \";;;;;;;;;;;;AAeO,IAAMA,IAAwBC,EAAM;AAAA,EACzC,MAAM,EAAE,SAASC,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,OAGJ,MAAMD,EAAI,GACtB,MAAM,WAAW,EACjB;AAAA,IAAU;AAAA,IAAkB,CAACE,MAC5BA,EAAE,GAAG,WAAWD,EAAK,OAAO,EAAE,GAAG,UAAU,EAAK;AAAA,EAClD,EACC,OAAO,CAACC,MAAMA,EAAE,IAAIA,EAAE,MAAM,SAAS,GAAG,MAAS,CAAC,EAClD,KAAK,GAAG,GAEG,QAXP;AAaX,CAAC;\",\n  \"names\": [\"getUnreadMessageCount\", \"query\", \"v\", \"__name\", \"ctx\", \"args\", \"q\"]\n}\n"},{"path":"castAuctions.js","source":"import {\n  b as y\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as m,\n  b as E,\n  c as g,\n  d as h\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as c\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as b\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/castAuctions.ts\nasync function U(s, t) {\n  let e = t.toLowerCase(), n = await s.db.query(\"addressLinks\").withIndex(\"by_address\", (i) => i.eq(\"address\", e)).first();\n  return n ? n.primaryAddress : e;\n}\nb(U, \"resolvePrimaryAddress\");\nvar H = 20, N = 1440 * 60 * 1e3;\nfunction _(s = Date.now()) {\n  let t = new Date(s);\n  return t.setUTCHours(H, 0, 0, 0), t.getTime() <= s && t.setUTCDate(t.getUTCDate() + 1), t.getTime();\n}\nb(_, \"getNextResetTime\");\nvar B = 1e7;\nvar I = 2, C = 300 * 1e3, $ = 180 * 1e3, F = m({\n  args: { castHash: c.string() },\n  handler: /* @__PURE__ */ b(async (s, { castHash: t }) => {\n    let e = await s.db.query(\"castAuctions\").withIndex(\"by_castHash\", (i) => i.eq(\"castHash\", t)).filter((i) => i.eq(i.field(\"status\"), \"bidding\")).first();\n    if (!e) return null;\n    let n = await s.db.query(\"castAuctionBids\").withIndex(\n      \"by_auction_status\",\n      (i) => i.eq(\"auctionId\", e._id).eq(\"status\", \"active\")\n    ).take(100);\n    return {\n      exists: !0,\n      auctionId: e._id,\n      slotNumber: e.slotNumber,\n      currentBid: e.currentBid,\n      totalPool: e.currentBid,\n      contributorCount: n.length,\n      contributors: n.map((i) => ({\n        address: i.bidderAddress,\n        username: i.bidderUsername,\n        amount: i.bidAmount\n      })),\n      topBidder: e.bidderUsername,\n      auctionEndsAt: e.auctionEndsAt,\n      castAuthorUsername: e.castAuthorUsername\n    };\n  }, \"handler\")\n}), P = m({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => (await s.db.query(\"castAuctions\").withIndex(\"by_status\", (e) => e.eq(\"status\", \"bidding\")).take(50)).sort((e, n) => (n.currentBid || 0) - (e.currentBid || 0)), \"handler\")\n}), D = m({\n  args: { slotNumber: c.number() },\n  handler: /* @__PURE__ */ b(async (s, { slotNumber: t }) => await s.db.query(\"castAuctions\").withIndex(\"by_slot_status\").filter(\n    (e) => e.and(\n      e.eq(e.field(\"slotNumber\"), t),\n      e.eq(e.field(\"status\"), \"bidding\")\n    )\n  ).first(), \"handler\")\n}), R = m({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => (await s.db.query(\"castAuctions\").withIndex(\"by_status\", (e) => e.eq(\"status\", \"active\")).take(10)).filter((e) => e.castHash && e.warpcastUrl).sort((e, n) => e.slotNumber - n.slotNumber), \"handler\")\n}), L = m({\n  args: { limit: c.optional(c.number()) },\n  handler: /* @__PURE__ */ b(async (s, { limit: t = 50 }) => {\n    let e = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (r) => r.eq(\"status\", \"completed\")).order(\"desc\").take(t);\n    return [...await s.db.query(\"castAuctions\").withIndex(\"by_status\", (r) => r.eq(\"status\", \"active\")).order(\"desc\").take(t), ...e].filter((r) => r.winnerAddress && r.winningBid).sort((r, d) => (d.featureStartsAt || d._creationTime) - (r.featureStartsAt || r._creationTime)).slice(0, t);\n  }, \"handler\")\n}), k = m({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ b(async (s, { address: t }) => {\n    let e = t.toLowerCase();\n    return await s.db.query(\"castAuctionBids\").withIndex(\"by_bidder\", (n) => n.eq(\"bidderAddress\", e)).order(\"desc\").take(50);\n  }, \"handler\")\n}), O = m({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => await s.db.query(\"castAuctionBids\").withIndex(\"by_auction\", (e) => e.eq(\"auctionId\", t)).order(\"desc\").take(20), \"handler\")\n}), z = m({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (n) => n.eq(\"status\", \"bidding\")).take(50), e = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (n) => n.eq(\"status\", \"active\")).take(10);\n    return {\n      // Sort by pool size (highest first) - cast-based ranking\n      bidding: t.sort((n, i) => (i.currentBid || 0) - (n.currentBid || 0)),\n      active: e.sort((n, i) => (i.currentBid || 0) - (n.currentBid || 0))\n    };\n  }, \"handler\")\n}), V = m({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ b(async (s, { address: t }) => {\n    let e = t.toLowerCase(), n = await s.db.query(\"castAuctionBids\").withIndex(\"by_bidder\", (r) => r.eq(\"bidderAddress\", e)).filter((r) => r.eq(r.field(\"status\"), \"pending_refund\")).take(100), i = n.reduce((r, d) => r + (d.refundAmount || d.bidAmount), 0);\n    return {\n      pendingRefunds: n,\n      totalRefund: i,\n      count: n.length\n    };\n  }, \"handler\")\n}), W = m({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ b(async (s, { address: t }) => {\n    let e = t.toLowerCase(), n = Date.now() - 1440 * 60 * 1e3, i = await s.db.query(\"castAuctionBids\").withIndex(\"by_bidder\", (d) => d.eq(\"bidderAddress\", e)).filter(\n      (d) => d.and(\n        d.eq(d.field(\"status\"), \"refunded\"),\n        d.gte(d.field(\"refundedAt\"), n)\n      )\n    ).take(50), r = i.reduce((d, o) => d + (o.refundAmount || o.bidAmount), 0);\n    return {\n      recentRefunds: i,\n      totalRefunded: r,\n      count: i.length\n    };\n  }, \"handler\")\n}), G = m({\n  args: { slotNumber: c.optional(c.number()) },\n  handler: /* @__PURE__ */ b(async (s, { slotNumber: t }) => {\n    let e;\n    if (t !== void 0) {\n      let u = await s.db.query(\"castAuctions\").withIndex(\"by_slot_status\").filter(\n        (a) => a.and(\n          a.eq(a.field(\"slotNumber\"), t),\n          a.eq(a.field(\"status\"), \"bidding\")\n        )\n      ).first();\n      e = u ? [u] : [];\n    } else\n      e = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (u) => u.eq(\"status\", \"bidding\")).take(50);\n    let n = new Set(e.map((u) => u._id)), i = new Map(e.map((u) => [u._id, u])), r = e.map(\n      (u) => s.db.query(\"castAuctionBids\").withIndex(\"by_auction\", (a) => a.eq(\"auctionId\", u._id)).order(\"desc\").take(10)\n    );\n    return (await Promise.all(r)).flatMap((u, a) => {\n      let A = e[a];\n      return u.map((l) => ({\n        ...l,\n        isWinning: l.status === \"active\" && l.bidAmount === A.currentBid\n      }));\n    }).sort((u, a) => a.bidAmount - u.bidAmount);\n  }, \"handler\")\n}), Q = g({\n  args: {\n    address: c.string(),\n    slotNumber: c.number(),\n    bidAmount: c.number(),\n    castHash: c.string(),\n    warpcastUrl: c.string(),\n    castAuthorFid: c.optional(c.number()),\n    castAuthorUsername: c.optional(c.string()),\n    castAuthorPfp: c.optional(c.string()),\n    castText: c.optional(c.string())\n  },\n  handler: /* @__PURE__ */ b(async (s, t) => {\n    let e = await U(s, t.address);\n    if (t.slotNumber < 0 || t.slotNumber >= I)\n      throw new Error(\"Invalid slot number\");\n    let n = await s.db.query(\"castAuctions\").withIndex(\"by_slot_status\").filter(\n      (f) => f.and(\n        f.eq(f.field(\"slotNumber\"), t.slotNumber),\n        f.eq(f.field(\"status\"), \"bidding\")\n      )\n    ).first(), i = Date.now();\n    if (!n) {\n      let f = await s.db.insert(\"castAuctions\", {\n        slotNumber: t.slotNumber,\n        auctionStartedAt: i,\n        auctionEndsAt: _(i),\n        currentBid: 0,\n        status: \"bidding\",\n        createdAt: i\n      });\n      if (n = await s.db.get(f), !n) throw new Error(\"Failed to create auction\");\n    }\n    if (n.auctionEndsAt <= i)\n      throw new Error(\"Auction has ended\");\n    let r = n.currentBid || 0, d = 1e3;\n    if (t.bidAmount < d)\n      throw new Error(\n        `Minimum bid is ${d.toLocaleString()} VBMS`\n      );\n    if (t.bidAmount > B)\n      throw new Error(\n        `Maximum bid is ${B.toLocaleString()} VBMS`\n      );\n    let o = await s.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", e)).first();\n    if (console.log(`[PlaceBid DEBUG] Address: ${e}, Profile found: ${!!o}, Username: ${o?.username}`), !o)\n      throw new Error(`Profile not found for address: ${e}`);\n    let u = o.coins || 0;\n    if (u < t.bidAmount)\n      throw new Error(\n        `Insufficient balance. Need ${t.bidAmount.toLocaleString()} VBMS, have ${u.toLocaleString()}`\n      );\n    let a = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n      (f) => f.and(\n        f.eq(f.field(\"auctionId\"), n._id),\n        f.eq(f.field(\"status\"), \"active\"),\n        f.eq(f.field(\"bidderAddress\"), e)\n      )\n    ).first(), A = 0;\n    if (a && (A = a.bidAmount, await s.db.patch(a._id, {\n      status: \"outbid\",\n      refundedAt: i,\n      refundAmount: A\n    })), n.bidderAddress && n.bidderAddress !== e) {\n      let f = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n        (p) => p.and(\n          p.eq(p.field(\"auctionId\"), n._id),\n          p.eq(p.field(\"status\"), \"active\")\n        )\n      ).first();\n      if (f) {\n        let p = await s.db.query(\"profiles\").withIndex(\"by_address\", (q) => q.eq(\"address\", f.bidderAddress)).first();\n        p && await s.db.patch(p._id, {\n          coins: (p.coins || 0) + f.bidAmount,\n          lastUpdated: i\n        }), await s.db.patch(f._id, {\n          status: \"refunded\",\n          refundedAt: i,\n          refundAmount: f.bidAmount\n        });\n      }\n    }\n    let l = t.bidAmount - A;\n    await s.db.patch(o._id, {\n      coins: u - l,\n      lifetimeSpent: (o.lifetimeSpent || 0) + l,\n      lastUpdated: i\n    }), await s.db.insert(\"coinTransactions\", {\n      address: e,\n      amount: -l,\n      type: \"spend\",\n      source: \"auction_bid\",\n      description: `Auction bid on slot ${t.slotNumber}`,\n      timestamp: i,\n      balanceBefore: u,\n      balanceAfter: u - l\n    }), await s.db.insert(\"castAuctionBids\", {\n      auctionId: n._id,\n      slotNumber: t.slotNumber,\n      bidderAddress: e,\n      bidderUsername: o.username,\n      bidderFid: o.farcasterFid || (o.fid ? Number(o.fid) : void 0),\n      castHash: t.castHash,\n      warpcastUrl: t.warpcastUrl,\n      castAuthorFid: t.castAuthorFid,\n      castAuthorUsername: t.castAuthorUsername,\n      bidAmount: t.bidAmount,\n      previousHighBid: r,\n      status: \"active\",\n      timestamp: i\n    });\n    let w = n.auctionEndsAt;\n    return n.auctionEndsAt - i <= C && (w = i + $), await s.db.patch(n._id, {\n      currentBid: t.bidAmount,\n      bidderAddress: e,\n      bidderUsername: o.username,\n      bidderFid: o.farcasterFid || (o.fid ? Number(o.fid) : void 0),\n      castHash: t.castHash,\n      warpcastUrl: t.warpcastUrl,\n      castAuthorFid: t.castAuthorFid,\n      castAuthorUsername: t.castAuthorUsername,\n      castAuthorPfp: t.castAuthorPfp,\n      castText: t.castText,\n      auctionEndsAt: w,\n      lastBidAt: i\n    }), console.log(\n      `[CastAuction] Bid placed: ${t.bidAmount} VBMS on slot ${t.slotNumber} by ${o.username}`\n    ), {\n      success: !0,\n      bidAmount: t.bidAmount,\n      newBalance: u - l,\n      auctionEndsAt: w,\n      slotNumber: t.slotNumber\n    };\n  }, \"handler\")\n}), X = g({\n  args: {\n    address: c.string(),\n    slotNumber: c.optional(c.number()),\n    // Deprecated, kept for compatibility\n    bidAmount: c.number(),\n    txHash: c.string(),\n    castHash: c.string(),\n    warpcastUrl: c.string(),\n    castAuthorFid: c.optional(c.number()),\n    castAuthorUsername: c.optional(c.string()),\n    castAuthorPfp: c.optional(c.string()),\n    castText: c.optional(c.string())\n  },\n  handler: /* @__PURE__ */ b(async (s, t) => {\n    let e = await U(s, t.address), n = Date.now();\n    if (await s.db.query(\"castAuctionBids\").withIndex(\"by_txHash\", (l) => l.eq(\"txHash\", t.txHash)).first())\n      throw new Error(\"Transaction already used for a bid\");\n    let r = 1e3;\n    if (t.bidAmount < r)\n      throw new Error(`Minimum bid is ${r.toLocaleString()} VBMS`);\n    if (t.bidAmount > B)\n      throw new Error(`Maximum bid is ${B.toLocaleString()} VBMS`);\n    let d = await s.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", e)).first();\n    if (!d)\n      throw new Error(\"Profile not found\");\n    let o = await s.db.query(\"castAuctions\").withIndex(\"by_status\").filter(\n      (l) => l.and(\n        l.eq(l.field(\"status\"), \"bidding\"),\n        l.eq(l.field(\"castHash\"), t.castHash)\n      )\n    ).first();\n    if (!o) {\n      let w = (await s.db.query(\"castAuctions\").withIndex(\"by_status\", (p) => p.eq(\"status\", \"bidding\")).first())?.auctionEndsAt || _(n), f = await s.db.insert(\"castAuctions\", {\n        slotNumber: 0,\n        // Not used anymore, kept for schema compatibility\n        auctionStartedAt: n,\n        auctionEndsAt: w,\n        currentBid: 0,\n        status: \"bidding\",\n        createdAt: n,\n        castHash: t.castHash,\n        warpcastUrl: t.warpcastUrl,\n        castAuthorFid: t.castAuthorFid,\n        castAuthorUsername: t.castAuthorUsername,\n        castAuthorPfp: t.castAuthorPfp,\n        castText: t.castText\n      });\n      if (o = await s.db.get(f), !o) throw new Error(\"Failed to create auction\");\n      console.log(`[CastAuction] New cast auction created for ${t.castHash}`);\n    }\n    if (o.auctionEndsAt <= n)\n      throw new Error(\"Auction has ended\");\n    let u = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n      (l) => l.and(\n        l.eq(l.field(\"auctionId\"), o._id),\n        l.eq(l.field(\"status\"), \"active\"),\n        l.eq(l.field(\"bidderAddress\"), e)\n      )\n    ).first();\n    if (u) {\n      let l = u.bidAmount + t.bidAmount;\n      await s.db.patch(u._id, {\n        bidAmount: l,\n        timestamp: n,\n        txHash: t.txHash\n        // Update to latest tx\n      });\n      let w = (o.currentBid || 0) + t.bidAmount, f = o.auctionEndsAt;\n      return o.auctionEndsAt - n <= C && (f = n + $), await s.db.patch(o._id, {\n        currentBid: w,\n        bidderAddress: e,\n        bidderUsername: d.username,\n        bidderFid: d.farcasterFid || (d.fid ? Number(d.fid) : void 0),\n        auctionEndsAt: f,\n        lastBidAt: n\n      }), console.log(\n        `[CastAuction] Pool contribution UPDATED: ${u.bidAmount} + ${t.bidAmount} = ${l} VBMS for cast ${t.castHash} by ${d.username}`\n      ), {\n        success: !0,\n        bidAmount: t.bidAmount,\n        totalUserBid: l,\n        poolTotal: w,\n        auctionEndsAt: f,\n        castHash: t.castHash,\n        updated: !0\n      };\n    }\n    await s.db.insert(\"castAuctionBids\", {\n      auctionId: o._id,\n      slotNumber: 0,\n      bidderAddress: e,\n      bidderUsername: d.username || e.slice(0, 8),\n      bidderFid: d.farcasterFid || (d.fid ? Number(d.fid) : void 0),\n      castHash: t.castHash,\n      warpcastUrl: t.warpcastUrl,\n      castAuthorFid: t.castAuthorFid,\n      castAuthorUsername: t.castAuthorUsername,\n      bidAmount: t.bidAmount,\n      previousHighBid: o.currentBid,\n      status: \"active\",\n      timestamp: n,\n      txHash: t.txHash,\n      isPoolContribution: !0\n    });\n    let a = (o.currentBid || 0) + t.bidAmount, A = o.auctionEndsAt;\n    return o.auctionEndsAt - n <= C && (A = n + $), await s.db.patch(o._id, {\n      currentBid: a,\n      bidderAddress: e,\n      // Last bidder\n      bidderUsername: d.username,\n      bidderFid: d.farcasterFid || (d.fid ? Number(d.fid) : void 0),\n      auctionEndsAt: A,\n      lastBidAt: n\n    }), console.log(\n      `[CastAuction] Pool contribution: +${t.bidAmount} VBMS to cast ${t.castHash} (total: ${a}) by ${d.username}`\n    ), {\n      success: !0,\n      bidAmount: t.bidAmount,\n      poolTotal: a,\n      auctionEndsAt: A,\n      castHash: t.castHash\n    };\n  }, \"handler\")\n}), j = g({\n  args: {\n    address: c.string(),\n    auctionId: c.id(\"castAuctions\"),\n    bidAmount: c.number(),\n    txHash: c.optional(c.string())\n  },\n  handler: /* @__PURE__ */ b(async (s, t) => {\n    let e = await U(s, t.address), n = Date.now(), i = await s.db.get(t.auctionId);\n    if (!i) throw new Error(\"Auction not found\");\n    if (i.status !== \"bidding\") throw new Error(\"Auction is not active\");\n    if (i.auctionEndsAt <= n) throw new Error(\"Auction has ended\");\n    let r = 1e3;\n    if (t.bidAmount < r)\n      throw new Error(`Minimum pool contribution is ${r.toLocaleString()} VBMS`);\n    let d = await s.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", e)).first();\n    if (console.log(`[AddToPool DEBUG] Address: ${e}, Profile found: ${!!d}, Username: ${d?.username}`), !d) throw new Error(`Profile not found for address: ${e}`);\n    if (t.txHash && await s.db.query(\"castAuctionBids\").withIndex(\"by_txHash\", (A) => A.eq(\"txHash\", t.txHash)).first())\n      throw new Error(\"Transaction already used\");\n    let o = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n      (a) => a.and(\n        a.eq(a.field(\"auctionId\"), t.auctionId),\n        a.eq(a.field(\"status\"), \"active\"),\n        a.eq(a.field(\"bidderAddress\"), e)\n      )\n    ).first();\n    if (o) {\n      let a = o.bidAmount + t.bidAmount;\n      await s.db.patch(o._id, {\n        bidAmount: a,\n        timestamp: n,\n        txHash: t.txHash || o.txHash\n      });\n      let A = (i.currentBid || 0) + t.bidAmount;\n      return await s.db.patch(t.auctionId, {\n        currentBid: A,\n        lastBidAt: n\n      }), console.log(`[CastAuction] Pool contribution UPDATED: ${o.bidAmount} + ${t.bidAmount} = ${a} VBMS by ${d.username}`), {\n        success: !0,\n        contribution: t.bidAmount,\n        totalUserBid: a,\n        newTotal: A,\n        slotNumber: i.slotNumber,\n        updated: !0\n      };\n    }\n    await s.db.insert(\"castAuctionBids\", {\n      auctionId: t.auctionId,\n      slotNumber: i.slotNumber,\n      bidderAddress: e,\n      bidderUsername: d.username || e.slice(0, 8),\n      bidderFid: d.farcasterFid || (d.fid ? Number(d.fid) : void 0),\n      castHash: i.castHash || \"\",\n      warpcastUrl: i.warpcastUrl || \"\",\n      castAuthorFid: i.castAuthorFid,\n      castAuthorUsername: i.castAuthorUsername,\n      bidAmount: t.bidAmount,\n      previousHighBid: i.currentBid,\n      status: \"active\",\n      timestamp: n,\n      txHash: t.txHash,\n      isPoolContribution: !0\n    });\n    let u = (i.currentBid || 0) + t.bidAmount;\n    return await s.db.patch(t.auctionId, {\n      currentBid: u,\n      lastBidAt: n\n    }), console.log(`[CastAuction] Pool contribution: +${t.bidAmount} VBMS to slot ${i.slotNumber} by ${d.username} (total: ${u})`), {\n      success: !0,\n      contribution: t.bidAmount,\n      newTotal: u,\n      slotNumber: i.slotNumber\n    };\n  }, \"handler\")\n}), J = h({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = Date.now();\n    for (let e = 0; e < I; e++)\n      await s.db.query(\"castAuctions\").withIndex(\"by_slot_status\").filter(\n        (i) => i.and(\n          i.eq(i.field(\"slotNumber\"), e),\n          i.eq(i.field(\"status\"), \"bidding\")\n        )\n      ).first() || (await s.db.insert(\"castAuctions\", {\n        slotNumber: e,\n        auctionStartedAt: t,\n        auctionEndsAt: _(t),\n        currentBid: 0,\n        status: \"bidding\",\n        createdAt: t\n      }), console.log(`[CastAuction] Initialized auction for slot ${e}`));\n    return { success: !0, slotsInitialized: I };\n  }, \"handler\")\n}), K = g({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ b(async (s, { address: t }) => {\n    let e = t.toLowerCase(), n = await s.db.query(\"castAuctionBids\").withIndex(\"by_bidder\", (o) => o.eq(\"bidderAddress\", e)).filter((o) => o.eq(o.field(\"status\"), \"pending_refund\")).collect();\n    if (n.length === 0)\n      throw new Error(\"No pending refunds to claim\");\n    let i = n.reduce((o, u) => o + (u.refundAmount || u.bidAmount), 0), r = Date.now(), d = await s.db.query(\"profiles\").withIndex(\"by_address\", (o) => o.eq(\"address\", e)).first();\n    if (!d)\n      throw new Error(\"Profile not found\");\n    await s.db.patch(d._id, {\n      coins: (d.coins || 0) + i,\n      lastUpdated: r\n    });\n    for (let o of n)\n      await s.db.patch(o._id, {\n        status: \"refunded\",\n        refundedAt: r,\n        refundAmount: o.refundAmount || o.bidAmount\n      });\n    return console.log(`[CastAuction] Refund claimed: ${e} - ${i} coins (${n.length} bids)`), {\n      success: !0,\n      totalRefund: i,\n      bidsCount: n.length\n    };\n  }, \"handler\")\n}), Y = g({\n  args: {\n    auctionId: c.string(),\n    bidderAddress: c.string()\n  },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t, bidderAddress: e }) => {\n    let n = e.toLowerCase(), i = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n      (u) => u.and(\n        u.eq(u.field(\"auctionId\"), t),\n        u.eq(u.field(\"status\"), \"active\"),\n        u.eq(u.field(\"bidderAddress\"), n)\n      )\n    ).collect();\n    if (i.length < 2)\n      throw new Error(`No duplicates found. User has ${i.length} bid(s) on this auction.`);\n    i.sort((u, a) => u.timestamp - a.timestamp);\n    let r = i[0], d = i.slice(1), o = i.reduce((u, a) => u + a.bidAmount, 0);\n    await s.db.patch(r._id, {\n      bidAmount: o,\n      timestamp: Date.now()\n    });\n    for (let u of d)\n      await s.db.delete(u._id);\n    return console.log(`[CastAuction] Merged ${i.length} bids into 1: ${o} VBMS for ${r.bidderUsername}`), {\n      success: !0,\n      mergedCount: i.length,\n      totalAmount: o,\n      deletedBids: d.length\n    };\n  }, \"handler\")\n}), Z = E({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = await s.db.query(\"castAuctionBids\").filter((n) => n.eq(n.field(\"status\"), \"refund_requested\")).take(200), e = {};\n    for (let n of t) {\n      let i = n.bidderAddress;\n      e[i] || (e[i] = { total: 0, bids: [] }), e[i].total += n.refundAmount || n.bidAmount, e[i].bids.push(n);\n    }\n    return {\n      requests: t,\n      byAddress: e,\n      totalPending: t.reduce((n, i) => n + (i.refundAmount || i.bidAmount), 0)\n    };\n  }, \"handler\")\n}), tt = g({\n  args: {\n    bidId: c.id(\"castAuctionBids\"),\n    txHash: c.string()\n  },\n  handler: /* @__PURE__ */ b(async (s, { bidId: t, txHash: e }) => {\n    let n = await s.db.get(t);\n    if (!n) throw new Error(\"Bid not found\");\n    if (n.status !== \"refund_requested\")\n      throw new Error(\"Bid is not in refund_requested status\");\n    return await s.db.patch(t, {\n      status: \"refunded\",\n      refundTxHash: e,\n      refundedAt: Date.now()\n    }), console.log(`[CastAuction] Refund processed: ${n.bidderAddress} - ${n.refundAmount || n.bidAmount} VBMS (tx: ${e})`), { success: !0 };\n  }, \"handler\")\n}), et = g({\n  args: {\n    address: c.string(),\n    txHash: c.string()\n  },\n  handler: /* @__PURE__ */ b(async (s, { address: t, txHash: e }) => {\n    let n = t.toLowerCase(), i = await s.db.query(\"castAuctionBids\").withIndex(\"by_bidder\", (o) => o.eq(\"bidderAddress\", n)).filter((o) => o.eq(o.field(\"status\"), \"refund_requested\")).collect();\n    if (i.length === 0)\n      throw new Error(\"No refund requests for this address\");\n    let r = i.reduce((o, u) => o + (u.refundAmount || u.bidAmount), 0), d = Date.now();\n    for (let o of i)\n      await s.db.patch(o._id, {\n        status: \"refunded\",\n        refundTxHash: e,\n        refundedAt: d\n      });\n    return console.log(`[CastAuction] Batch refund processed: ${n} - ${r} VBMS (${i.length} bids, tx: ${e})`), {\n      success: !0,\n      totalRefunded: r,\n      bidsCount: i.length\n    };\n  }, \"handler\")\n}), st = h({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => {\n    let e = await s.db.get(t);\n    if (!e || e.status !== \"bidding\") return;\n    let n = Date.now();\n    if (e.auctionEndsAt > n) return;\n    if (!e.bidderAddress || e.currentBid === 0) {\n      await s.db.patch(t, {\n        status: \"completed\"\n      }), await s.db.insert(\"castAuctions\", {\n        slotNumber: e.slotNumber,\n        auctionStartedAt: n,\n        auctionEndsAt: _(n),\n        currentBid: 0,\n        status: \"bidding\",\n        createdAt: n\n      }), console.log(\n        `[CastAuction] No bids on slot ${e.slotNumber}, starting new auction`\n      );\n      return;\n    }\n    let i = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction_status\").filter(\n      (r) => r.and(\n        r.eq(r.field(\"auctionId\"), t),\n        r.eq(r.field(\"status\"), \"active\")\n      )\n    ).first();\n    i && await s.db.patch(i._id, { status: \"won\" }), await s.db.patch(t, {\n      status: \"pending_feature\",\n      winnerAddress: e.bidderAddress,\n      winnerUsername: e.bidderUsername,\n      winningBid: e.currentBid\n    }), console.log(\n      `[CastAuction] Auction finalized: Slot ${e.slotNumber}, Winner: ${e.bidderUsername}, Bid: ${e.currentBid} VBMS`\n    );\n  }, \"handler\")\n}), nt = h({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => {\n    let e = await s.db.get(t);\n    if (!e || e.status !== \"pending_feature\") return;\n    let n = Date.now();\n    if (!e.castHash || !e.warpcastUrl) {\n      console.error(`[CastAuction] \\u274C Auction ${t} has no cast data! Skipping featuredCasts addition.`), await s.db.patch(t, {\n        status: \"active\",\n        featureStartsAt: n,\n        featureEndsAt: n + N\n      });\n      return;\n    }\n    let i = await s.db.query(\"featuredCasts\").withIndex(\"by_active\").filter(\n      (a) => a.and(\n        a.eq(a.field(\"active\"), !0),\n        a.gte(a.field(\"order\"), 100),\n        a.lte(a.field(\"order\"), 101)\n      )\n    ).collect();\n    console.log(`[CastAuction] \\u{1F4CA} Found ${i.length} active featured slots`);\n    let r, d = null, o = 2, u = [100, 101];\n    if (i.length < o) {\n      let a = i.map((A) => A.order);\n      r = u.find((A) => !a.includes(A)) || 100, console.log(`[CastAuction] \\u{1F4CD} Using new slot ${r} (${i.length}/${o} slots used)`);\n    } else\n      i.sort((a, A) => (a.addedAt || 0) - (A.addedAt || 0)), d = i[0], r = d.order, console.log(`[CastAuction] \\u{1F504} Replacing oldest slot ${r} (addedAt: ${d.addedAt})`);\n    if (d) {\n      if (d.auctionId) {\n        let a = await s.db.get(d.auctionId);\n        a && a.status === \"active\" && (await s.db.patch(d.auctionId, {\n          status: \"completed\"\n        }), console.log(`[CastAuction] \\u{1F504} Marked old auction ${d.auctionId} as completed`));\n      }\n      await s.db.patch(d._id, {\n        castHash: e.castHash,\n        warpcastUrl: e.warpcastUrl,\n        active: !0,\n        addedAt: n,\n        auctionId: t\n      }), console.log(`[CastAuction] \\u2705 Replaced slot ${r} (oldest) with new winner: ${e.castHash}`);\n    } else\n      await s.db.insert(\"featuredCasts\", {\n        castHash: e.castHash,\n        warpcastUrl: e.warpcastUrl,\n        order: r,\n        active: !0,\n        addedAt: n,\n        auctionId: t\n      }), console.log(`[CastAuction] \\u2705 Created new slot ${r} with winner: ${e.castHash}`);\n    await s.db.patch(t, {\n      status: \"active\",\n      featureStartsAt: n,\n      featureEndsAt: n + N\n    }), console.log(\n      `[CastAuction] \\u{1F389} Cast now featured: Slot ${r} - ${e.castHash} by @${e.castAuthorUsername}`\n    );\n    try {\n      await s.scheduler.runAfter(0, y.notifications.sendFeaturedCastNotification, {\n        castAuthor: e.castAuthorUsername || \"unknown\",\n        warpcastUrl: e.warpcastUrl || \"https://vibemostwanted.xyz\",\n        winnerUsername: e.bidderUsername\n      });\n    } catch (a) {\n      console.error(\"[CastAuction] \\u26A0\\uFE0F Failed to schedule notification:\", a);\n    }\n    if (e.bidderFid)\n      try {\n        await s.scheduler.runAfter(500, y.notifications.sendWinnerNotification, {\n          winnerFid: e.bidderFid,\n          winnerUsername: e.bidderUsername || \"winner\",\n          bidAmount: e.currentBid || 0,\n          castAuthor: e.castAuthorUsername || \"unknown\"\n        });\n      } catch (a) {\n        console.error(\"[CastAuction] \\u26A0\\uFE0F Failed to send winner notification:\", a);\n      }\n  }, \"handler\")\n}), it = h({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => {\n    let e = await s.db.get(t);\n    if (!e || e.status !== \"active\") return;\n    await s.db.patch(t, {\n      status: \"completed\"\n    });\n    let n = Date.now();\n    await s.db.insert(\"castAuctions\", {\n      slotNumber: e.slotNumber,\n      auctionStartedAt: n,\n      auctionEndsAt: _(n),\n      currentBid: 0,\n      status: \"bidding\",\n      createdAt: n\n    }), console.log(\n      `[CastAuction] Feature ended, new auction started for slot ${e.slotNumber}`\n    );\n  }, \"handler\")\n}), at = h({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => {\n    let e = await s.db.get(t);\n    if (!e || e.status !== \"bidding\") return;\n    let n = Date.now();\n    await s.db.patch(t, {\n      status: \"completed\"\n    });\n    let r = (await s.db.query(\"castAuctionBids\").withIndex(\"by_auction\", (l) => l.eq(\"auctionId\", t)).collect()).filter((l) => l.status === \"active\"), o = [...new Set(r.map((l) => l.bidderAddress.toLowerCase()))].map(\n      (l) => s.db.query(\"profiles\").withIndex(\"by_address\", (w) => w.eq(\"address\", l)).first()\n    ), u = await Promise.all(o), a = new Map(\n      u.filter(Boolean).map((l) => [l.address.toLowerCase(), l])\n    ), A = 0;\n    for (let l of r) {\n      let w = a.get(l.bidderAddress.toLowerCase());\n      w && (await s.db.patch(w._id, {\n        coins: (w.coins || 0) + l.bidAmount\n      }), A++), await s.db.patch(l._id, {\n        status: \"refunded\",\n        refundAmount: l.bidAmount,\n        refundedAt: n\n      });\n    }\n    console.log(\n      `[CastAuction] Auction LOST: ${e.castHash} with ${e.currentBid} VBMS - ${A} bids refunded automatically`\n    );\n  }, \"handler\")\n}), dt = h({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = Date.now(), e = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"bidding\")).filter((a) => a.lte(a.field(\"auctionEndsAt\"), t)).collect(), n = e.filter((a) => a.currentBid > 0), i = e.filter((a) => !a.currentBid || a.currentBid === 0);\n    n.sort((a, A) => (A.currentBid || 0) - (a.currentBid || 0));\n    let r = null, d = 0;\n    for (let a = 0; a < n.length; a++) {\n      let A = n[a];\n      a === 0 ? (await s.scheduler.runAfter(0, y.castAuctions.finalizeAuction, {\n        auctionId: A._id\n      }), r = A._id, console.log(`[CastAuction] \\u{1F3C6} TOP 1 WINNER: ${A.castHash} with ${A.currentBid} VBMS`)) : (await s.scheduler.runAfter(1e3, y.castAuctions.markAuctionLostSafe, {\n        auctionId: A._id\n      }), d++);\n    }\n    for (let a of i)\n      await s.scheduler.runAfter(0, y.castAuctions.finalizeAuction, {\n        auctionId: a._id\n      });\n    let o = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"pending_feature\")).collect();\n    for (let a of o)\n      await s.scheduler.runAfter(0, y.castAuctions.activateFeaturedCast, {\n        auctionId: a._id\n      });\n    let u = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"active\")).filter((a) => a.lte(a.field(\"featureEndsAt\"), t)).collect();\n    for (let a of u)\n      await s.scheduler.runAfter(0, y.castAuctions.completeFeaturedCast, {\n        auctionId: a._id\n      });\n    return {\n      finalized: n.length + i.length,\n      winner: r,\n      losersRefunded: d,\n      activated: o.length,\n      completed: u.length\n    };\n  }, \"handler\")\n}), ot = h({\n  args: { address: c.string(), amount: c.number() },\n  handler: /* @__PURE__ */ b(async (s, { address: t, amount: e }) => {\n    let n = t.toLowerCase(), i = Date.now(), r = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (u) => u.eq(\"status\", \"bidding\")).first();\n    if (!r) {\n      let u = await s.db.insert(\"castAuctions\", {\n        slotNumber: 99,\n        auctionStartedAt: i,\n        auctionEndsAt: i + 864e5,\n        currentBid: 0,\n        status: \"bidding\",\n        createdAt: i\n      });\n      r = await s.db.get(u);\n    }\n    if (!r) throw new Error(\"Failed to create test auction\");\n    let d = await s.db.query(\"profiles\").withIndex(\"by_address\", (u) => u.eq(\"address\", n)).first(), o = await s.db.insert(\"castAuctionBids\", {\n      auctionId: r._id,\n      slotNumber: 99,\n      bidderAddress: n,\n      bidderUsername: d?.username || \"test\",\n      bidderFid: d?.farcasterFid,\n      castHash: \"test-hash\",\n      warpcastUrl: \"https://warpcast.com/test\",\n      bidAmount: e,\n      previousHighBid: 0,\n      status: \"pending_refund\",\n      timestamp: i,\n      refundAmount: e\n    });\n    return console.log(`[TEST] Created pending_refund bid for ${n}: ${e} coins`), { success: !0, bidId: o };\n  }, \"handler\")\n}), rt = h({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (d) => d.eq(\"status\", \"active\")).collect(), e = await s.db.query(\"featuredCasts\").withIndex(\"by_active\", (d) => d.eq(\"active\", !0)).collect(), n = e.map((d) => d.auctionId).filter(Boolean), i = t.filter((d) => !n.includes(d._id)), r = 0;\n    for (let d of i)\n      await s.db.patch(d._id, { status: \"completed\" }), console.log(`[Cleanup] Marked orphan auction ${d._id} (@${d.castAuthorUsername}) as completed`), r++;\n    return {\n      activeCount: t.length,\n      featuredCount: e.length,\n      orphansFixed: r\n    };\n  }, \"handler\")\n}), ut = h({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = _(), e = await s.db.query(\"castAuctions\").withIndex(\"by_status\", (i) => i.eq(\"status\", \"bidding\")).collect(), n = 0;\n    for (let i of e)\n      await s.db.patch(i._id, { auctionEndsAt: t }), n++;\n    return console.log(), { updated: n, nextReset: t, nextResetISO: new Date(t).toISOString() };\n  }, \"handler\")\n}), ct = h({\n  args: {},\n  handler: /* @__PURE__ */ b(async (s) => {\n    let t = \"0x01968929bb4411542a4075916604cf8802cba49b\", n = (await s.db.query(\"castAuctions\").withIndex(\"by_status\", (r) => r.eq(\"status\", \"completed\")).collect()).filter((r) => r.castHash === t), i = 0;\n    for (let r of n)\n      await s.db.delete(r._id), i++;\n    return { deleted: i, total: n.length };\n  }, \"handler\")\n}), lt = h({\n  args: { bidId: c.id(\"castAuctionBids\") },\n  handler: /* @__PURE__ */ b(async (s, { bidId: t }) => {\n    let e = Date.now(), n = await s.db.get(t);\n    if (!n || n.status !== \"active\") return;\n    let i = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", n.bidderAddress.toLowerCase())).first();\n    i && await s.db.patch(i._id, {\n      coins: (i.coins || 0) + n.bidAmount\n    }), await s.db.patch(n._id, {\n      status: \"refunded\",\n      refundAmount: n.bidAmount,\n      refundedAt: e\n    }), console.log(`[CastAuction] Refunded ${n.bidderUsername}: ${n.bidAmount} coins`);\n  }, \"handler\")\n}), bt = h({\n  args: { auctionId: c.id(\"castAuctions\") },\n  handler: /* @__PURE__ */ b(async (s, { auctionId: t }) => {\n    let e = await s.db.get(t);\n    if (!e || e.status !== \"bidding\") return;\n    await s.db.patch(t, {\n      status: \"completed\"\n    });\n    let n = await s.db.query(\"castAuctionBids\").withIndex(\"by_auction\", (i) => i.eq(\"auctionId\", t)).take(50);\n    for (let i = 0; i < n.length; i++)\n      n[i].status === \"active\" && await s.scheduler.runAfter(i * 200, y.castAuctions.refundBid, {\n        bidId: n[i]._id\n      });\n    console.log(`[CastAuction] Auction LOST: ${e.castHash} - scheduled ${n.length} refunds`);\n  }, \"handler\")\n});\nexport {\n  nt as activateFeaturedCast,\n  j as addToPool,\n  F as checkExistingCast,\n  ct as cleanDuplicateHistory,\n  rt as cleanupOrphanAuctions,\n  it as completeFeaturedCast,\n  Y as consolidateDuplicateBids,\n  st as finalizeAuction,\n  P as getActiveAuctions,\n  z as getAllAuctionStates,\n  Z as getAllRefundRequests,\n  D as getAuctionForSlot,\n  L as getAuctionHistory,\n  O as getBidHistory,\n  G as getCurrentBidders,\n  k as getMyBids,\n  V as getPendingRefunds,\n  W as getRecentRefunds,\n  R as getWinningCasts,\n  J as initializeAuctions,\n  at as markAuctionLost,\n  bt as markAuctionLostSafe,\n  Q as placeBid,\n  X as placeBidWithVBMS,\n  dt as processAuctionLifecycle,\n  tt as processRefund,\n  et as processRefundBatch,\n  lt as refundBid,\n  K as requestRefund,\n  ot as testCreatePendingRefund,\n  ut as updateAuctionsToFixedTime\n};\n//# sourceMappingURL=castAuctions.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/castAuctions.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"resolvePrimaryAddress\", \"ctx\", \"address\", \"normalizedAddress\", \"link\", \"q\", \"__name\", \"AUCTION_RESET_HOUR_UTC\", \"FEATURE_DURATION_MS\", \"getNextResetTime\", \"now\", \"date\", \"MAXIMUM_BID\", \"TOTAL_SLOTS\", \"ANTI_SNIPE_WINDOW_MS\", \"ANTI_SNIPE_EXTENSION_MS\", \"checkExistingCast\", \"query\", \"v\", \"__name\", \"ctx\", \"castHash\", \"auction\", \"q\", \"contributions\", \"c\", \"getActiveAuctions\", \"a\", \"b\", \"getAuctionForSlot\", \"slotNumber\", \"getWinningCasts\", \"getAuctionHistory\", \"limit\", \"completed\", \"getMyBids\", \"address\", \"normalizedAddress\", \"getBidHistory\", \"auctionId\", \"getAllAuctionStates\", \"bidding\", \"active\", \"getPendingRefunds\", \"pendingRefunds\", \"totalRefund\", \"sum\", \"bid\", \"getRecentRefunds\", \"oneDayAgo\", \"recentRefunds\", \"totalRefunded\", \"getCurrentBidders\", \"auctions\", \"auctionIds\", \"auctionMap\", \"bidPromises\", \"bids\", \"idx\", \"placeBid\", \"mutation\", \"args\", \"resolvePrimaryAddress\", \"now\", \"getNextResetTime\", \"currentBid\", \"POOL_MINIMUM\", \"MAXIMUM_BID\", \"profile\", \"currentCoins\", \"existingBid\", \"refundAmount\", \"previousBid\", \"prevBidderProfile\", \"netDeduction\", \"newEndTime\", \"placeBidWithVBMS\", \"auctionEndsAt\", \"newBidAmount\", \"newPoolTotal\", \"addToPool\", \"newTotal\", \"initializeAuctions\", \"internalMutation\", \"slot\", \"requestRefund\", \"consolidateDuplicateBids\", \"bidderAddress\", \"userBids\", \"keepBid\", \"bidsToMerge\", \"totalAmount\", \"getAllRefundRequests\", \"internalQuery\", \"requests\", \"byAddress\", \"req\", \"addr\", \"r\", \"processRefund\", \"bidId\", \"txHash\", \"processRefundBatch\", \"total\", \"finalizeAuction\", \"winningBid\", \"activateFeaturedCast\", \"FEATURE_DURATION_MS\", \"allFeaturedSlots\", \"targetOrder\", \"existingFeatured\", \"MAX_SLOTS\", \"SLOT_RANGE\", \"usedOrders\", \"s\", \"o\", \"oldAuction\", \"internal\", \"notifError\", \"winnerNotifError\", \"completeFeaturedCast\", \"markAuctionLost\", \"activeBids\", \"profilePromises\", \"profiles\", \"profileMap\", \"p\", \"refundedCount\", \"bidderProfile\", \"processAuctionLifecycle\", \"endedAuctions\", \"auctionsWithBids\", \"auctionsWithoutBids\", \"winnerId\", \"losersRefunded\", \"i\", \"pendingFeatures\", \"expiredFeatures\", \"testCreatePendingRefund\", \"amount\", \"testAuction\", \"cleanupOrphanAuctions\", \"activeAuctions\", \"featuredCasts\", \"featuredAuctionIds\", \"f\", \"orphans\", \"cleanedCount\", \"orphan\", \"updateAuctionsToFixedTime\", \"nextReset\", \"updated\", \"cleanDuplicateHistory\", \"raplesCastHash\", \"raplesAuctions\", \"deleted\", \"refundBid\", \"markAuctionLostSafe\"]\n}\n"},{"path":"coinAudit.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g,\n  h\n} from \"./_deps/QS6BMXBV.js\";\nimport \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  h as createAuditLog,\n  e as getAllAuditLogs,\n  g as getFlaggedAccounts,\n  c as getPlayerAuditSummary,\n  b as getPlayerAuditTrail,\n  d as getRecentSuspiciousActivity,\n  f as getSecurityAlerts,\n  a as logTransaction\n};\n//# sourceMappingURL=coinAudit.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"coinsInbox.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g\n} from \"./_deps/HHLKWD3J.js\";\nimport \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  c as claimAllCoinsFromInbox,\n  d as getInboxStatus,\n  f as getTransactionHistory,\n  e as hasUnclaimedCoins,\n  g as logCoinTransaction,\n  a as logTransaction,\n  b as sendCoinsToInbox\n};\n//# sourceMappingURL=coinsInbox.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"crons.js","source":"import {\n  b as e\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  h as a\n} from \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\n\n// convex/crons.ts\nvar o = a();\no.interval(\n  \"cleanup old poker rooms\",\n  { minutes: 15 },\n  e.pokerBattle.cleanupOldPokerRooms\n);\no.interval(\n  \"raid boss auto attacks\",\n  { minutes: 15 },\n  e.raidBoss.processAutoAttacks\n);\no.interval(\n  \"raid boss defeat transition\",\n  { minutes: 2 },\n  e.raidBoss.defeatBossAndSpawnNext\n);\no.hourly(\n  \"raid boss low energy notifications\",\n  { minuteUTC: 30 },\n  e.notifications.sendLowEnergyNotifications\n);\no.daily(\n  \"update leaderboard cache\",\n  { hourUTC: 0, minuteUTC: 0 },\n  e.quests.updateLeaderboardCache\n);\no.daily(\n  \"update full leaderboard cache\",\n  { hourUTC: 0, minuteUTC: 5 },\n  e.profiles.updateLeaderboardFullCache\n);\no.interval(\n  \"process cast auctions\",\n  { minutes: 5 },\n  e.castAuctions.processAuctionLifecycle\n);\nvar r = o;\nexport {\n  r as default\n};\n//# sourceMappingURL=crons.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/crons.ts\"],\n  \"mappings\": \";;;;;;;;;;AAGA,IAAMA,IAAQC,EAAS;AAGvBD,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG;AAAA,EACdE,EAAS,YAAY;AACvB;AAUAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG;AAAA,EACdE,EAAS,SAAS;AACpB;AAIAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,EAAE;AAAA,EACbE,EAAS,SAAS;AACpB;AAGAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,WAAW,GAAG;AAAA,EAChBE,EAAS,cAAc;AACzB;AAIAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG,WAAW,EAAE;AAAA,EAC3BE,EAAS,OAAO;AAClB;AAIAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG,WAAW,EAAE;AAAA,EAC3BE,EAAS,SAAS;AACpB;AAIAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,EAAE;AAAA,EACbE,EAAS,aAAa;AACxB;AAEA,IAAOC,IAAQH;\",\n  \"names\": [\"crons\", \"cronJobs\", \"internal\", \"crons_default\"]\n}\n"},{"path":"cryptoActions.js","source":"import {\n  e as n\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as o\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as c\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/cryptoActions.ts\nvar f = n({\n  args: {\n    message: o.string(),\n    signature: o.string(),\n    expectedAddress: o.string()\n  },\n  handler: /* @__PURE__ */ c(async (d, { message: t, signature: a, expectedAddress: i }) => {\n    try {\n      let { verifyMessage: s } = await import(\"./_deps/GNMXU3CQ.js\");\n      if (!a.startsWith(\"0x\") || a.length !== 132)\n        return console.error(\"\\u274C Invalid signature format\"), {\n          success: !1,\n          error: \"Invalid signature format\"\n        };\n      let e = i.toLowerCase();\n      if (!e.startsWith(\"0x\") || e.length !== 42)\n        return console.error(\"\\u274C Invalid address format\"), {\n          success: !1,\n          error: \"Invalid address format\"\n        };\n      if (!t || t.length === 0)\n        return console.error(\"\\u274C Empty message\"), {\n          success: !1,\n          error: \"Empty message\"\n        };\n      let r = s(t, a);\n      return console.log(\"\\u{1F510} Signature verification:\", {\n        expected: e,\n        recovered: r.toLowerCase(),\n        match: r.toLowerCase() === e\n      }), r.toLowerCase() !== e ? (console.error(\"\\u274C Address mismatch\"), {\n        success: !1,\n        error: \"Signature does not match expected address\",\n        recoveredAddress: r.toLowerCase()\n      }) : (console.log(\"\\u2705 Signature verified successfully\"), {\n        success: !0,\n        recoveredAddress: r.toLowerCase()\n      });\n    } catch (s) {\n      return console.error(\"\\u274C Signature verification error:\", s), {\n        success: !1,\n        error: s.message || \"Failed to verify signature\"\n      };\n    }\n  }, \"handler\")\n});\nexport {\n  f as verifyEthereumSignature\n};\n//# sourceMappingURL=cryptoActions.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/cryptoActions.ts\"],\n  \"mappings\": \";;;;;;;;;;;;AAeO,IAAMA,IAA0BC,EAAO;AAAA,EAC5C,MAAM;AAAA,IACJ,SAASC,EAAE,OAAO;AAAA,IAClB,WAAWA,EAAE,OAAO;AAAA,IACpB,iBAAiBA,EAAE,OAAO;AAAA,EAC5B;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAK,EAAE,SAAAC,GAAS,WAAAC,GAAW,iBAAAC,EAAgB,MAAM;AAC/D,QAAI;AAEF,UAAM,EAAE,eAAAC,EAAc,IAAI,MAAM,OAAO,qBAAQ;AAG/C,UAAI,CAACF,EAAU,WAAW,IAAI,KAAKA,EAAU,WAAW;AACtD,uBAAQ,MAAM,iCAA4B,GACnC;AAAA,UACL,SAAS;AAAA,UACT,OAAO;AAAA,QACT;AAGF,UAAMG,IAAqBF,EAAgB,YAAY;AACvD,UAAI,CAACE,EAAmB,WAAW,IAAI,KAAKA,EAAmB,WAAW;AACxE,uBAAQ,MAAM,+BAA0B,GACjC;AAAA,UACL,SAAS;AAAA,UACT,OAAO;AAAA,QACT;AAGF,UAAI,CAACJ,KAAWA,EAAQ,WAAW;AACjC,uBAAQ,MAAM,sBAAiB,GACxB;AAAA,UACL,SAAS;AAAA,UACT,OAAO;AAAA,QACT;AAIF,UAAMK,IAAmBF,EAAcH,GAASC,CAAS;AASzD,aAPA,QAAQ,IAAI,qCAA8B;AAAA,QACxC,UAAUG;AAAA,QACV,WAAWC,EAAiB,YAAY;AAAA,QACxC,OAAOA,EAAiB,YAAY,MAAMD;AAAA,MAC5C,CAAC,GAGGC,EAAiB,YAAY,MAAMD,KACrC,QAAQ,MAAM,yBAAoB,GAC3B;AAAA,QACL,SAAS;AAAA,QACT,OAAO;AAAA,QACP,kBAAkBC,EAAiB,YAAY;AAAA,MACjD,MAGF,QAAQ,IAAI,wCAAmC,GACxC;AAAA,QACL,SAAS;AAAA,QACT,kBAAkBA,EAAiB,YAAY;AAAA,MACjD;AAAA,IACF,SAASC,GAAY;AACnB,qBAAQ,MAAM,wCAAmCA,CAAK,GAC/C;AAAA,QACL,SAAS;AAAA,QACT,OAAOA,EAAM,WAAW;AAAA,MAC1B;AAAA,IACF;AAAA,EACF,GA9DS;AA+DX,CAAC;\",\n  \"names\": [\"verifyEthereumSignature\", \"action\", \"v\", \"__name\", \"ctx\", \"message\", \"signature\", \"expectedAddress\", \"verifyMessage\", \"normalizedExpected\", \"recoveredAddress\", \"error\"]\n}\n"},{"path":"economy.js","source":"import {\n  b as Q\n} from \"./_deps/5GK4PSQG.js\";\nimport {\n  a as ye,\n  b as W\n} from \"./_deps/AWJMSRP7.js\";\nimport {\n  a as le\n} from \"./_deps/HHLKWD3J.js\";\nimport {\n  b as de\n} from \"./_deps/IJFCN5IR.js\";\nimport {\n  h as U\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as ie,\n  c as C,\n  d as oe\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as s\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as _\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/economy.ts\nvar H = 1500, he = 30, me = 10, be = {\n  gey: 2,\n  // was 5\n  goofy: 5,\n  // was 15\n  gooner: 10,\n  // was 30\n  gangster: 20,\n  // was 60\n  gigachad: 40\n  // was 120\n}, F = 100, fe = -20, X = 1.2;\nvar z = {\n  // Win bonuses based on how many ranks higher the opponent is\n  diff50Plus: 2,\n  // Opponent 50+ ranks higher = 2.0x (100 â†’ 200 coins)\n  diff20to49: 1.5,\n  // Opponent 20-49 ranks higher = 1.5x (100 â†’ 150 coins)\n  diff10to19: 1.3,\n  // Opponent 10-19 ranks higher = 1.3x (100 â†’ 130 coins)\n  diff5to9: 1.15,\n  // Opponent 5-9 ranks higher = 1.15x (100 â†’ 115 coins)\n  default: 1\n  // Less than 5 ranks difference = no bonus\n}, Y = {\n  // Loss penalty reduction based on how many ranks higher the opponent is\n  diff50Plus: 0.4,\n  // Opponent 50+ ranks higher = 60% penalty reduction (-20 â†’ -8)\n  diff20to49: 0.5,\n  // Opponent 20-49 ranks higher = 50% reduction (-20 â†’ -10)\n  diff10to19: 0.65,\n  // Opponent 10-19 ranks higher = 35% reduction (-20 â†’ -13)\n  diff5to9: 0.8,\n  // Opponent 5-9 ranks higher = 20% reduction (-20 â†’ -16)\n  default: 1\n  // Less than 5 ranks difference = full penalty\n}, ce = {\n  attack: 0,\n  // No entry fee for leaderboard attacks\n  pvp: 20\n  // Reduced from 40 to 20\n}, O = {\n  firstPve: 50,\n  firstPvp: 100,\n  login: 25,\n  streak3: 150,\n  streak5: 300,\n  streak10: 750\n}, Be = C({\n  args: {\n    address: s.string()\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t }) => {\n    let o = await e.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", t.toLowerCase())).first();\n    if (!o)\n      throw new Error(\"Profile not found\");\n    if (o.coins !== void 0)\n      return;\n    let r = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n    await e.db.patch(o._id, {\n      coins: 0,\n      lifetimeEarned: 0,\n      lifetimeSpent: 0,\n      dailyLimits: {\n        pveWins: 0,\n        pvpMatches: 0,\n        lastResetDate: r,\n        firstPveBonus: !1,\n        firstPvpBonus: !1,\n        loginBonus: !1,\n        streakBonus: !1\n      },\n      winStreak: 0,\n      lastWinTimestamp: 0\n    });\n  }, \"handler\")\n}), De = ie({\n  args: {\n    address: s.string()\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t }) => {\n    let o = await e.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", t.toLowerCase())).first();\n    if (!o)\n      return null;\n    if (o.coins === void 0)\n      return {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0],\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        dailyEarned: 0,\n        canEarnMore: !0\n      };\n    let r = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], a = o.dailyLimits?.lastResetDate === r ? K(o) : 0, n = a < H;\n    return {\n      coins: o.coins,\n      lifetimeEarned: o.lifetimeEarned || 0,\n      lifetimeSpent: o.lifetimeSpent || 0,\n      dailyLimits: o.dailyLimits,\n      winStreak: o.winStreak || 0,\n      dailyEarned: a,\n      canEarnMore: n\n    };\n  }, \"handler\")\n});\nfunction K(e) {\n  let t = e.dailyLimits;\n  if (!t) return 0;\n  let o = 0;\n  return o += t.pveWins * 30, o += t.pvpMatches * 60, t.firstPveBonus && (o += O.firstPve), t.firstPvpBonus && (o += O.firstPvp), t.loginBonus && (o += O.login), t.streakBonus && (o += O.streak3), o;\n}\n_(K, \"calculateDailyEarned\");\nvar Ee = oe({\n  args: { cursor: s.optional(s.number()) },\n  handler: /* @__PURE__ */ _(async (e, t) => {\n    let o = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], r = 200, i = 0, a = e.db.query(\"profiles\").order(\"asc\");\n    if (t.cursor) {\n      let l = t.cursor;\n      a = a.filter((w) => w.gt(w.field(\"_creationTime\"), l));\n    }\n    let n = await a.take(r);\n    if (n.length === 0)\n      return console.log(\"[ResetDailyLimits] \\u2705 Complete! No more profiles to process.\"), { success: !0, resetsApplied: 0, done: !0 };\n    for (let l of n)\n      l.dailyLimits && l.dailyLimits.lastResetDate !== o && (await e.db.patch(l._id, {\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: o,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        }\n      }), i++);\n    if (n.length === r) {\n      let l = n[n.length - 1];\n      await e.scheduler.runAfter(100, W.economy.resetDailyLimits, {\n        cursor: l._creationTime\n      }), console.log(`[ResetDailyLimits] \\u{1F4E6} Batch done: ${i} resets. Scheduling next batch...`);\n    } else\n      console.log(`[ResetDailyLimits] \\u2705 Final batch: ${i} resets. All profiles processed!`);\n    return { success: !0, resetsApplied: i, done: n.length < r };\n  }, \"handler\")\n});\nfunction ee(e, t, o) {\n  let r = t - e;\n  return o ? r <= 0 ? z.default : r >= 500 ? z.diff50Plus : r >= 200 ? z.diff20to49 : r >= 100 ? z.diff10to19 : r >= 50 ? z.diff5to9 : z.default : r <= 0 ? Y.default : r >= 500 ? Y.diff50Plus : r >= 200 ? Y.diff20to49 : r >= 100 ? Y.diff10to19 : r >= 50 ? Y.diff5to9 : Y.default;\n}\n_(ee, \"calculateAuraMultiplier\");\nasync function te(e, t) {\n  let o = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n  return !t.dailyLimits || t.dailyLimits.lastResetDate !== o ? (await e.db.patch(t._id, {\n    dailyLimits: {\n      pveWins: 0,\n      pvpMatches: 0,\n      lastResetDate: o,\n      firstPveBonus: !1,\n      firstPvpBonus: !1,\n      loginBonus: !1,\n      streakBonus: !1\n    },\n    rematchesToday: 0\n    // Reset revenge match count\n  }), {\n    pveWins: 0,\n    pvpMatches: 0,\n    lastResetDate: o,\n    firstPveBonus: !1,\n    firstPvpBonus: !1,\n    loginBonus: !1,\n    streakBonus: !1\n  }) : t.dailyLimits;\n}\n_(te, \"checkAndResetDailyLimits\");\nvar Te = ie({\n  args: {\n    playerAddress: s.string(),\n    opponentAddress: s.string()\n  },\n  handler: /* @__PURE__ */ _(async (e, { playerAddress: t, opponentAddress: o }) => {\n    let r = await e.db.query(\"profiles\").withIndex(\"by_address\", (v) => v.eq(\"address\", t.toLowerCase())).first();\n    if (!r)\n      throw new Error(\"Player profile not found\");\n    let i = await e.db.query(\"profiles\").withIndex(\"by_address\", (v) => v.eq(\"address\", o.toLowerCase())).first();\n    if (!i)\n      throw new Error(\"Opponent profile not found\");\n    let a = r.stats?.aura ?? 500, n = i.stats?.aura ?? 500, l = ee(a, n, !0), w = ee(a, n, !1), m = F, b = Math.round(m * l), P = b - m, E = fe, u = Math.round(E * w), B = Math.abs(u - E), h = r.winStreak || 0, d = h + 1, p = 0, f = \"\";\n    d === 3 ? (p = O.streak3, f = \"3-Win Streak Bonus\") : d === 5 ? (p = O.streak5, f = \"5-Win Streak Bonus\") : d === 10 && (p = O.streak10, f = \"10-Win Streak Bonus\");\n    let L = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], y = r.dailyLimits || {\n      lastResetDate: \"\",\n      firstPvpBonus: !1,\n      pveWins: 0,\n      pvpMatches: 0\n    }, k = y.lastResetDate === L && !y.firstPvpBonus ? O.firstPvp : 0, S = t.toLowerCase(), T = o.toLowerCase(), j = await e.db.query(\"matches\").withIndex(\"by_player\", (v) => v.eq(\"playerAddress\", T)).filter(\n      (v) => v.and(\n        v.eq(v.field(\"opponentAddress\"), S),\n        v.eq(v.field(\"result\"), \"win\")\n      )\n    ).order(\"desc\").first() !== null, ae = 0, se = b;\n    j && (ae = Math.round(b * (X - 1)), se = Math.round(b * X));\n    let ne = se + p + k;\n    return {\n      // ðŸš€ OPTIMIZED: Return aura values instead of expensive rank calculations\n      opponentAura: n,\n      playerAura: a,\n      auraDiff: n - a,\n      // Positive = opponent stronger\n      currentStreak: h,\n      isRevenge: j,\n      // Flag if this is a revenge match\n      // Win scenario\n      win: {\n        baseReward: m,\n        rankingBonus: P,\n        rankingMultiplier: l,\n        revengeBonus: ae,\n        // +20% revenge bonus if applicable\n        firstPvpBonus: k,\n        streakBonus: p,\n        streakMessage: f,\n        totalReward: ne\n      },\n      // Loss scenario\n      loss: {\n        basePenalty: E,\n        penaltyReduction: B,\n        rankingMultiplier: w,\n        totalPenalty: u\n      },\n      // Current player state\n      playerCoins: r.coins || 0\n    };\n  }, \"handler\")\n}), Le = C({\n  args: {\n    address: s.string(),\n    difficulty: s.union(\n      s.literal(\"gey\"),\n      s.literal(\"goofy\"),\n      s.literal(\"gooner\"),\n      s.literal(\"gangster\"),\n      s.literal(\"gigachad\")\n    ),\n    won: s.boolean(),\n    language: s.optional(s.union(\n      s.literal(\"pt-BR\"),\n      s.literal(\"en\"),\n      s.literal(\"es\"),\n      s.literal(\"hi\"),\n      s.literal(\"ru\"),\n      s.literal(\"zh-CN\"),\n      s.literal(\"id\"),\n      s.literal(\"fr\"),\n      s.literal(\"ja\"),\n      s.literal(\"it\")\n    )),\n    skipCoins: s.optional(s.boolean())\n    // If true, only calculate reward without adding coins\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, difficulty: o, won: r, language: i, skipCoins: a }) => {\n    let n = await e.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", t.toLowerCase())).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    if (n.coins === void 0) {\n      let d = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(n._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: d,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let p = await e.db.get(n._id);\n      if (!p) throw new Error(\"Failed to initialize economy\");\n      n = p;\n    }\n    let l = await te(e, n), w = Date.now(), m = n.lastPvEAward || 0, b = w - m, P = 1e4;\n    if (b < P) {\n      let d = Math.ceil((P - b) / 1e3);\n      throw new Error(`Too fast! Please wait ${d}s before playing again`);\n    }\n    await e.db.patch(n._id, {\n      lastPvEAward: w\n    });\n    try {\n      await e.scheduler.runAfter(0, ye.quests.updatePveStreak, {\n        address: t.toLowerCase(),\n        won: r\n      });\n    } catch (d) {\n      console.error(\"\\u274C Failed to track PvE streak:\", d);\n    }\n    if (!r)\n      return { awarded: 0, reason: \"Lost the battle\" };\n    if (l.pveWins >= he)\n      return { awarded: 0, reason: \"Daily PvE win limit reached\" };\n    let u = be[o], B = [];\n    if (i && (u = Q(u, i)), !l.firstPveBonus) {\n      let d = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (f) => f.eq(\"playerAddress\", t.toLowerCase())).filter(\n        (f) => f.and(\n          f.eq(f.field(\"date\"), d),\n          f.eq(f.field(\"missionType\"), \"first_pve_win\")\n        )\n      ).first() || await e.db.insert(\"personalMissions\", {\n        playerAddress: t.toLowerCase(),\n        date: d,\n        missionType: \"first_pve_win\",\n        completed: !0,\n        claimed: !1,\n        reward: 50,\n        // MISSION_REWARDS.first_pve_win\n        completedAt: Date.now()\n      }), l.firstPveBonus = !0;\n    }\n    let h = K(n);\n    if (h + u > H) {\n      let d = Math.max(0, H - h);\n      if (d === 0)\n        return { awarded: 0, reason: \"Daily cap reached\" };\n      u = d;\n    }\n    if (!a) {\n      let d = n.coins || 0, p = n.stats?.aura ?? 500, f = r ? 5 : 0;\n      await e.db.patch(n._id, {\n        coins: d + u,\n        lifetimeEarned: (n.lifetimeEarned || 0) + u,\n        stats: {\n          ...n.stats,\n          aura: p + f\n          // Award aura for PvE win\n        },\n        dailyLimits: {\n          ...l,\n          pveWins: l.pveWins + 1\n        }\n        // lastPvEAward already updated immediately after rate limit check (line 491)\n      }), await le(e, {\n        address: t,\n        type: \"earn\",\n        amount: u,\n        source: \"pve\",\n        description: `Won PvE battle (${o})`,\n        balanceBefore: d,\n        balanceAfter: d + u\n      }), await U(\n        e,\n        t,\n        \"earn\",\n        u,\n        d,\n        d + u,\n        \"pve_reward\",\n        o,\n        { difficulty: o, reason: \"PvE battle win\" }\n      ), console.log(`\\u{1F4B0} PvE reward: ${u} TESTVBMS + ${f} aura for ${t}. Balance: ${d} \\u2192 ${d + u}, Aura: ${p} \\u2192 ${p + f}`);\n    }\n    try {\n      await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n        address: t.toLowerCase(),\n        questId: \"weekly_total_matches\",\n        increment: 1\n      }), console.log(`\\u2705 Weekly quest tracked: PvE match for ${t.toLowerCase()}`);\n    } catch (d) {\n      console.error(\"\\u274C Failed to track weekly quest:\", d);\n    }\n    return {\n      awarded: u,\n      bonuses: B,\n      dailyEarned: h + u,\n      remaining: H - (h + u)\n    };\n  }, \"handler\")\n}), Ie = C({\n  args: {\n    address: s.string(),\n    won: s.boolean(),\n    opponentAddress: s.optional(s.string()),\n    // âœ… NEW: For ranking bonus calculation\n    language: s.optional(s.union(\n      s.literal(\"pt-BR\"),\n      s.literal(\"en\"),\n      s.literal(\"es\"),\n      s.literal(\"hi\"),\n      s.literal(\"ru\"),\n      s.literal(\"zh-CN\"),\n      s.literal(\"id\"),\n      s.literal(\"fr\"),\n      s.literal(\"ja\"),\n      s.literal(\"it\")\n    ))\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, won: o, opponentAddress: r, language: i }) => {\n    let a = await e.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", t.toLowerCase())).first();\n    if (!a)\n      throw new Error(\"Profile not found\");\n    if (a.coins === void 0) {\n      let d = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(a._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: d,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let p = await e.db.get(a._id);\n      if (!p) throw new Error(\"Failed to initialize economy\");\n      a = p;\n    }\n    let n = await te(e, a), l = Date.now(), w = a.lastPvPAward || 0, m = l - w, b = 15e3;\n    if (m < b) {\n      let d = Math.ceil((b - m) / 1e3);\n      throw new Error(`Too fast! Please wait ${d}s before next match`);\n    }\n    if (await e.db.patch(a._id, {\n      lastPvPAward: l\n    }), n.pvpMatches >= me)\n      return { awarded: 0, reason: \"Daily PvP match limit reached\" };\n    let P = 1, E = 500;\n    if (r) {\n      let d = await e.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", r.toLowerCase())).first(), p = a.stats?.aura ?? 500;\n      E = d?.stats?.aura ?? 500, P = ee(p, E, o);\n    }\n    let u = a.winStreak || 0, B = [], h = 0;\n    if (o) {\n      u++;\n      let d = i ? Q(F, i) : F;\n      if (h = Math.round(d * P), P > 1 && r) {\n        let y = h - F;\n        B.push(`Strong Opponent Bonus +${y} (${P.toFixed(1)}x)`);\n      }\n      if (!n.firstPvpBonus) {\n        let y = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n        await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (k) => k.eq(\"playerAddress\", t.toLowerCase())).filter((k) => k.and(k.eq(k.field(\"date\"), y), k.eq(k.field(\"missionType\"), \"first_pvp_match\"))).first() || await e.db.insert(\"personalMissions\", {\n          playerAddress: t.toLowerCase(),\n          date: y,\n          missionType: \"first_pvp_match\",\n          completed: !0,\n          claimed: !1,\n          reward: 100,\n          completedAt: Date.now()\n        }), n.firstPvpBonus = !0;\n      }\n      if (u === 3 || u === 5 || u === 10) {\n        let y = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], $ = `streak_${u}`, k = { streak_3: 150, streak_5: 300, streak_10: 750 };\n        await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (T) => T.eq(\"playerAddress\", t.toLowerCase())).filter((T) => T.and(T.eq(T.field(\"date\"), y), T.eq(T.field(\"missionType\"), $))).first() || await e.db.insert(\"personalMissions\", {\n          playerAddress: t.toLowerCase(),\n          date: y,\n          missionType: $,\n          completed: !0,\n          claimed: !1,\n          reward: k[$],\n          completedAt: Date.now()\n        }), u === 3 && (n.streakBonus = !0);\n      }\n      let p = a.coins || 0, f = a.stats?.aura ?? 500, L = 10;\n      await e.db.patch(a._id, {\n        coins: p + h,\n        lifetimeEarned: (a.lifetimeEarned || 0) + h,\n        stats: {\n          ...a.stats,\n          aura: f + L\n          // Award aura for PvP win\n        },\n        winStreak: u,\n        lastWinTimestamp: Date.now(),\n        dailyLimits: {\n          ...n,\n          pvpMatches: n.pvpMatches + 1\n        }\n        // lastPvPAward already updated immediately after rate limit check (line 652)\n      }), await le(e, {\n        address: t,\n        type: \"earn\",\n        amount: h,\n        source: \"pvp\",\n        description: \"Won PvP battle\",\n        balanceBefore: p,\n        balanceAfter: p + h\n      }), await U(\n        e,\n        t,\n        \"earn\",\n        h,\n        p,\n        p + h,\n        \"pvp_reward\",\n        `streak_${u}`,\n        { reason: \"PvP battle win\" }\n      ), console.log(`\\u{1F4B0} PvP reward: ${h} TESTVBMS + ${L} aura for ${t}. Balance: ${p} \\u2192 ${p + h}, Aura: ${f} \\u2192 ${f + L}`);\n      try {\n        await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n          address: t.toLowerCase(),\n          questId: \"weekly_total_matches\",\n          increment: 1\n        }), console.log(`\\u2705 Weekly quest tracked: PvP match (WIN) for ${t.toLowerCase()}`);\n      } catch (y) {\n        console.error(\"\\u274C Failed to track weekly quest:\", y);\n      }\n      return {\n        awarded: h,\n        bonuses: B,\n        winStreak: u,\n        opponentAura: E,\n        // âœ… Include opponent aura in response\n        rankingMultiplier: P\n        // âœ… Include multiplier in response\n      };\n    } else {\n      u = 0;\n      let d = fe, p = Math.round(d * P), f = a.coins || 0, L = Math.max(0, f + p), y = a.stats?.aura ?? 500, k = Math.max(0, y + -5);\n      if (P < 1 && r) {\n        let S = Math.abs(p - d);\n        B.push(`Strong Opponent Penalty Reduced -${S} (${(P * 100).toFixed(0)}% penalty)`);\n      }\n      await e.db.patch(a._id, {\n        coins: L,\n        lifetimeSpent: (a.lifetimeSpent || 0) + Math.abs(p),\n        stats: {\n          ...a.stats,\n          aura: k\n          // Lose aura for PvP loss\n        },\n        winStreak: u,\n        lastWinTimestamp: Date.now(),\n        // lastPvPAward already updated immediately after rate limit check (line 652)\n        dailyLimits: {\n          ...n,\n          pvpMatches: n.pvpMatches + 1\n        }\n      }), await e.db.insert(\"coinTransactions\", {\n        address: t.toLowerCase(),\n        amount: p,\n        // negative\n        type: \"spend\",\n        source: \"pvp_loss\",\n        description: \"PvP battle loss penalty\",\n        timestamp: Date.now(),\n        balanceBefore: f,\n        balanceAfter: L\n      });\n      try {\n        await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n          address: t.toLowerCase(),\n          questId: \"weekly_total_matches\",\n          increment: 1\n        }), console.log(`\\u2705 Weekly quest tracked: PvP match (LOSS) for ${t.toLowerCase()}`);\n      } catch (S) {\n        console.error(\"\\u274C Failed to track weekly quest:\", S);\n      }\n      return {\n        awarded: p,\n        // Negative value (reduced if high-rank opponent)\n        bonuses: B,\n        // âœ… Now includes penalty reduction message\n        winStreak: u,\n        opponentAura: E,\n        // âœ… Include opponent aura in response\n        rankingMultiplier: P,\n        // âœ… Include multiplier in response\n        dailyEarned: K(a),\n        remaining: H - K(a)\n      };\n    }\n  }, \"handler\")\n}), Me = C({\n  args: {\n    address: s.string(),\n    mode: s.union(s.literal(\"attack\"), s.literal(\"pvp\"))\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, mode: o }) => {\n    let r = await e.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", t.toLowerCase())).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    if (r.coins === void 0)\n      return { success: !1, reason: \"Economy not initialized\" };\n    let i = ce[o];\n    if ((r.coins || 0) < i)\n      return { success: !1, reason: \"Insufficient balance\", required: i, current: r.coins };\n    let a = r.coins || 0, n = a - i;\n    return await e.db.patch(r._id, {\n      coins: n,\n      lifetimeSpent: (r.lifetimeSpent || 0) + i\n    }), await e.db.insert(\"coinTransactions\", {\n      address: t.toLowerCase(),\n      type: \"spend\",\n      amount: i,\n      source: \"battle\",\n      description: \"Battle entry fee\",\n      balanceBefore: a,\n      balanceAfter: n,\n      timestamp: Date.now()\n    }), { success: !0, charged: i, newBalance: n };\n  }, \"handler\")\n}), $e = C({\n  args: {\n    address: s.string()\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t }) => {\n    let o = await e.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", t.toLowerCase())).first();\n    if (!o)\n      throw new Error(\"Profile not found\");\n    if (o.coins === void 0) {\n      let n = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(o._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: n,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let l = await e.db.get(o._id);\n      if (!l) throw new Error(\"Failed to initialize economy\");\n      o = l;\n    }\n    let r = await te(e, o);\n    if (r.loginBonus)\n      return { awarded: 0, reason: \"Mission already created today\" };\n    let i = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n    return await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (n) => n.eq(\"playerAddress\", t.toLowerCase())).filter((n) => n.and(n.eq(n.field(\"date\"), i), n.eq(n.field(\"missionType\"), \"daily_login\"))).first() || await e.db.insert(\"personalMissions\", {\n      playerAddress: t.toLowerCase(),\n      date: i,\n      missionType: \"daily_login\",\n      completed: !0,\n      claimed: !1,\n      reward: 25,\n      completedAt: Date.now()\n    }), await e.db.patch(o._id, {\n      dailyLimits: {\n        ...r,\n        loginBonus: !0\n      }\n    }), { awarded: 0, reason: \"Mission created - check Missions tab to claim!\", newBalance: o.coins || 0 };\n  }, \"handler\")\n}), Ce = C({\n  args: {\n    address: s.string(),\n    type: s.string()\n    // \"dailyShare\"\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, type: o }) => {\n    let r = t.toLowerCase(), i = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], a = await e.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", r)).first();\n    if (!a)\n      return { success: !1, message: \"Profile not found\" };\n    let n = a.lastShareDate === i && a.dailyShares || 0;\n    if (n >= 1)\n      return { success: !1, message: \"You already claimed your daily share bonus! Come back tomorrow.\" };\n    let l = 50, w = a.coins || 0, m = w + l;\n    return await e.db.patch(a._id, {\n      coins: m,\n      lifetimeEarned: (a.lifetimeEarned || 0) + l,\n      lastShareDate: i,\n      dailyShares: n + 1,\n      hasSharedProfile: !0\n    }), await e.db.insert(\"coinTransactions\", {\n      address: t.toLowerCase(),\n      amount: l,\n      type: \"earn\",\n      source: \"daily_share\",\n      description: \"Daily share bonus\",\n      timestamp: Date.now(),\n      balanceBefore: w,\n      balanceAfter: m\n    }), await U(\n      e,\n      r,\n      \"earn\",\n      l,\n      w,\n      m,\n      \"daily_share\",\n      i,\n      { reason: \"Daily share bonus\" }\n    ), {\n      success: !0,\n      message: `+${l} coins for sharing! Share daily for more rewards!`,\n      awarded: l,\n      newBalance: m\n    };\n  }, \"handler\")\n}), Re = C({\n  args: {\n    address: s.string(),\n    mode: s.union(s.literal(\"pvp\"), s.literal(\"attack\"))\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, mode: o }) => {\n    let r = await e.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", t.toLowerCase())).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    if (r.coins === void 0) {\n      let n = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(r._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: n,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let l = await e.db.get(r._id);\n      if (!l) throw new Error(\"Failed to initialize economy\");\n      r = l;\n    }\n    let i = o === \"pvp\" ? ce.pvp : ce.attack, a = r.coins || 0;\n    if (a < i)\n      throw new Error(`Insufficient funds. Need ${i} coins but only have ${a}`);\n    return await e.db.patch(r._id, {\n      coins: a - i,\n      lifetimeSpent: (r.lifetimeSpent || 0) + i\n    }), await e.db.insert(\"coinTransactions\", {\n      address: t.toLowerCase(),\n      amount: -i,\n      type: \"spend\",\n      source: `${o}_entry`,\n      description: `${o.toUpperCase()} entry fee`,\n      timestamp: Date.now(),\n      balanceBefore: a,\n      balanceAfter: a - i\n    }), console.log(`\\u{1F4B8} Entry fee paid: ${i} $TESTVBMS for ${o} mode by ${t}`), {\n      paid: i,\n      newBalance: a - i\n    };\n  }, \"handler\")\n}), qe = oe({\n  args: {\n    address: s.string(),\n    amount: s.number(),\n    reason: s.string()\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, amount: o, reason: r }) => {\n    let i = await e.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", t.toLowerCase())).first();\n    if (!i)\n      throw new Error(\"Profile not found\");\n    if (i.coins === void 0) {\n      let l = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(i._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: l,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let w = await e.db.get(i._id);\n      if (!w) throw new Error(\"Failed to initialize economy\");\n      i = w;\n    }\n    let a = i.coins || 0, n = a + o;\n    return await e.db.patch(i._id, {\n      coins: n,\n      lifetimeEarned: (i.lifetimeEarned || 0) + o\n    }), await U(\n      e,\n      t,\n      \"earn\",\n      o,\n      a,\n      n,\n      \"addCoins\",\n      void 0,\n      { reason: r }\n    ), await e.db.insert(\"coinTransactions\", {\n      address: t.toLowerCase(),\n      amount: o,\n      type: \"bonus\",\n      source: \"admin_add\",\n      description: r || \"Admin added coins\",\n      timestamp: Date.now(),\n      balanceBefore: a,\n      balanceAfter: n\n    }), console.log(`\\u{1F4B0} Added ${o} coins to ${t}: ${r}`), {\n      added: o,\n      newBalance: n,\n      reason: r\n    };\n  }, \"handler\")\n}), We = C({\n  args: {\n    // Player info\n    playerAddress: s.string(),\n    playerPower: s.number(),\n    playerCards: s.array(de),\n    // ðŸ”’ SECURITY\n    playerUsername: s.string(),\n    // Match result\n    result: s.union(\n      s.literal(\"win\"),\n      s.literal(\"loss\"),\n      s.literal(\"tie\")\n    ),\n    // Opponent info\n    opponentAddress: s.string(),\n    opponentUsername: s.string(),\n    opponentPower: s.number(),\n    opponentCards: s.array(de),\n    // ðŸ”’ SECURITY\n    // Economy\n    entryFeePaid: s.optional(s.number()),\n    language: s.optional(s.union(\n      s.literal(\"pt-BR\"),\n      s.literal(\"en\"),\n      s.literal(\"es\"),\n      s.literal(\"hi\"),\n      s.literal(\"ru\"),\n      s.literal(\"zh-CN\"),\n      s.literal(\"id\"),\n      s.literal(\"fr\"),\n      s.literal(\"ja\"),\n      s.literal(\"it\")\n    )),\n    skipCoins: s.optional(s.boolean())\n    // If true, only calculate reward without adding coins (for wins only)\n  },\n  handler: /* @__PURE__ */ _(async (e, t) => {\n    let o = /^0x[a-fA-F0-9]{40}$/;\n    if (!o.test(t.playerAddress))\n      throw new Error(\"Invalid player address format\");\n    if (!o.test(t.opponentAddress))\n      throw new Error(\"Invalid opponent address format\");\n    let r = t.playerAddress.toLowerCase(), i = t.opponentAddress.toLowerCase(), a = await e.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", r)).first();\n    if (!a)\n      throw new Error(\"Player profile not found\");\n    if (a.coins === void 0) {\n      let c = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(a._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: c,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let g = await e.db.get(a._id);\n      if (!g) throw new Error(\"Failed to initialize economy\");\n      a = g;\n    }\n    let n = await te(e, a), l = Date.now(), w = a.lastPvPAward || 0, m = l - w, b = 15e3;\n    if (m < b) {\n      let c = Math.ceil((b - m) / 1e3);\n      throw new Error(`Too fast! Please wait ${c}s before next attack`);\n    }\n    if (await e.db.patch(a._id, {\n      lastPvPAward: l\n    }), n.pvpMatches >= me)\n      throw new Error(\"Daily PvP match limit reached\");\n    let P = await e.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", i)).first(), E = a.stats?.aura ?? 500, u = P?.stats?.aura ?? 500, B = t.result === \"win\", h = ee(E, u, B), p = await e.db.query(\"matches\").withIndex(\"by_player\", (c) => c.eq(\"playerAddress\", i)).filter(\n      (c) => c.and(\n        c.eq(c.field(\"opponentAddress\"), r),\n        c.eq(c.field(\"result\"), \"win\")\n      )\n    ).order(\"desc\").first() !== null, f = a.winStreak || 0, L = [], y = 0, $ = a.coins || 0;\n    if (B) {\n      f++;\n      let c = t.language ? Q(F, t.language) : F, g = Math.round(c * h);\n      if (p) {\n        let A = Math.round(g * (X - 1));\n        y = Math.round(g * X), L.push(`\\u2694\\uFE0F Revenge Bonus +${A} (${((X - 1) * 100).toFixed(0)}%)`);\n      } else\n        y = g;\n      if (h > 1) {\n        let A = g - F;\n        L.push(`Strong Opponent Bonus +${A} (${h.toFixed(1)}x)`);\n      }\n      if (!n.firstPvpBonus) {\n        let A = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n        await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (I) => I.eq(\"playerAddress\", t.playerAddress.toLowerCase())).filter((I) => I.and(I.eq(I.field(\"date\"), A), I.eq(I.field(\"missionType\"), \"first_pvp_match\"))).first() || await e.db.insert(\"personalMissions\", {\n          playerAddress: t.playerAddress.toLowerCase(),\n          date: A,\n          missionType: \"first_pvp_match\",\n          completed: !0,\n          claimed: !1,\n          reward: 100,\n          completedAt: Date.now()\n        }), n.firstPvpBonus = !0;\n      }\n      if (f === 3 || f === 5 || f === 10) {\n        let A = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], D = `streak_${f}`, I = { streak_3: 150, streak_5: 300, streak_10: 750 };\n        await e.db.query(\"personalMissions\").withIndex(\"by_player_date\", (R) => R.eq(\"playerAddress\", t.playerAddress.toLowerCase())).filter((R) => R.and(R.eq(R.field(\"date\"), A), R.eq(R.field(\"missionType\"), D))).first() || await e.db.insert(\"personalMissions\", {\n          playerAddress: t.playerAddress.toLowerCase(),\n          date: A,\n          missionType: D,\n          completed: !0,\n          claimed: !1,\n          reward: I[D],\n          completedAt: Date.now()\n        }), f === 3 && (n.streakBonus = !0);\n      }\n      console.log(`\\u{1F4EC} Attack reward will be added to inbox: ${y} TESTVBMS for ${r}`), $ = a.coins || 0;\n    } else if (t.result === \"loss\") {\n      f = 0;\n      let c = fe, g = Math.round(c * h);\n      if (y = g, h < 1) {\n        let M = Math.abs(g - c);\n        L.push(`Strong Opponent Penalty Reduced -${M} (${(h * 100).toFixed(0)}% penalty)`);\n      }\n      let A = a.coins || 0, D = Math.abs(g), I = 0, N = 0;\n      A >= D ? (I = D, $ = A - D) : (I = A, $ = 0, N = D - A);\n      let R = Math.round(D * 0.05), G = D - R, q = await e.db.query(\"profiles\").withIndex(\"by_address\", (M) => M.eq(\"address\", i)).first();\n      if (q) {\n        if (q.coins === void 0) {\n          let M = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n          await e.db.patch(q._id, {\n            coins: 0,\n            lifetimeEarned: 0,\n            lifetimeSpent: 0,\n            dailyLimits: {\n              pveWins: 0,\n              pvpMatches: 0,\n              lastResetDate: M,\n              firstPveBonus: !1,\n              firstPvpBonus: !1,\n              loginBonus: !1,\n              streakBonus: !1\n            }\n          }), q = await e.db.get(q._id);\n        }\n        if (q) {\n          let M = q.coinsInbox || 0, x = M + G;\n          await e.db.patch(q._id, {\n            coinsInbox: x,\n            lifetimeEarned: (q.lifetimeEarned || 0) + G\n          });\n          try {\n            await e.db.insert(\"coinTransactions\", {\n              address: i,\n              type: \"earn\",\n              amount: G,\n              source: \"defense_win\",\n              description: `Defense Win vs ${t.playerUsername} (+${G} TESTVBMS to inbox)`,\n              balanceBefore: M,\n              balanceAfter: x,\n              timestamp: Date.now()\n            });\n          } catch (J) {\n            console.error(\"\\u26A0\\uFE0F Failed to record defense transaction:\", J);\n          }\n          console.log(`\\u{1F4EC} Defense reward sent to inbox: ${G} TESTVBMS for ${i}. Inbox: ${M} \\u2192 ${x}`);\n        }\n      }\n      if (N > 0) {\n        let M = a.coinsInbox || 0, x = a.poolDebt || 0, J = Math.min(M, N), pe = Math.max(0, M - N), ue = N - J, we = x + ue;\n        await e.db.patch(a._id, {\n          coinsInbox: pe,\n          poolDebt: we\n          // Track remaining debt separately\n        }), console.log(`\\u{1F4B8} Attacker ${r} penalty: ${D} (${I} from coins, ${J} from inbox, ${ue} pool debt). Inbox: ${M} \\u2192 ${pe}, Debt: ${x} \\u2192 ${we}`);\n      } else\n        console.log(`\\u{1F4B8} Attacker ${r} penalty: ${D} (all from coins)`);\n    }\n    let k = await e.db.insert(\"matches\", {\n      playerAddress: r,\n      type: \"attack\",\n      result: t.result,\n      playerPower: t.playerPower,\n      opponentPower: t.opponentPower,\n      opponentAddress: i,\n      opponentUsername: t.opponentUsername,\n      timestamp: Date.now(),\n      playerCards: t.playerCards,\n      opponentCards: t.opponentCards,\n      coinsEarned: y,\n      entryFeePaid: t.entryFeePaid\n    }), S = { ...a.stats }, T = a.stats?.aura ?? 500, V = 0;\n    if (t.result === \"win\") {\n      S.attackWins = (S.attackWins || 0) + 1, S.pvpWins = (S.pvpWins || 0) + 1, V = 20, S.aura = T + V;\n      let c = await e.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", i)).first();\n      if (c) {\n        let g = c.stats?.aura ?? 500, A = 20, D = Math.max(0, g - A);\n        await e.db.patch(c._id, {\n          stats: {\n            ...c.stats,\n            aura: D,\n            defenseWins: c.stats?.defenseWins || 0,\n            defenseLosses: (c.stats?.defenseLosses || 0) + 1\n            // Track defense loss\n          }\n        }), console.log(`\\u2694\\uFE0F Aura transfer: Attacker ${r} +${V} (${T} \\u2192 ${T + V}), Defender ${i} -${A} (${g} \\u2192 ${D})`);\n      }\n    } else if (t.result === \"loss\") {\n      S.attackLosses = (S.attackLosses || 0) + 1, S.pvpLosses = (S.pvpLosses || 0) + 1, V = 0, S.aura = T;\n      let c = await e.db.query(\"profiles\").withIndex(\"by_address\", (g) => g.eq(\"address\", i)).first();\n      c && await e.db.patch(c._id, {\n        stats: {\n          ...c.stats,\n          defenseWins: (c.stats?.defenseWins || 0) + 1,\n          // Track defense win\n          defenseLosses: c.stats?.defenseLosses || 0\n        }\n      });\n    }\n    let j = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], ne = (a.lastAttackDate || \"\") !== j ? 1 : (a.attacksToday || 0) + 1, v = {\n      coins: $,\n      lifetimeEarned: B ? (a.lifetimeEarned || 0) + y : a.lifetimeEarned,\n      lifetimeSpent: !B && y < 0 ? (a.lifetimeSpent || 0) + Math.abs(y) : a.lifetimeSpent,\n      winStreak: f,\n      lastWinTimestamp: Date.now(),\n      // lastPvPAward already updated immediately after rate limit check (line 1174)\n      stats: S,\n      dailyLimits: {\n        ...n,\n        pvpMatches: n.pvpMatches + 1\n      },\n      rematchesToday: p ? (a.rematchesToday || 0) + 1 : a.rematchesToday,\n      lastUpdated: Date.now(),\n      // Attack tracking\n      attacksToday: ne,\n      lastAttackDate: j\n    };\n    if (B && !t.skipCoins) {\n      let c = a.coins || 0;\n      v.coins = c + y, console.log(`\\u{1F4B0} Attack reward added to balance: ${y} TESTVBMS. Balance: ${c} \\u2192 ${v.coins}`);\n      try {\n        await e.db.insert(\"coinTransactions\", {\n          address: r,\n          type: \"earn\",\n          amount: y,\n          source: \"attack_win\",\n          description: `Attack Win vs ${t.opponentUsername} (+${y} TESTVBMS)`,\n          balanceBefore: c,\n          balanceAfter: v.coins,\n          timestamp: Date.now()\n        }), await U(\n          e,\n          r,\n          \"earn\",\n          y,\n          c,\n          v.coins,\n          \"attack_win\",\n          t.opponentAddress,\n          { reason: `Attack win vs ${t.opponentUsername}` }\n        );\n      } catch (g) {\n        console.error(\"\\u26A0\\uFE0F Failed to record attack transaction:\", g);\n      }\n    }\n    await e.db.patch(a._id, v);\n    let Z = await e.db.get(a._id), re = Z && {\n      ...Z,\n      hasDefenseDeck: (Z.defenseDeck?.length || 0) === 5\n    };\n    try {\n      await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n        address: r,\n        questId: \"weekly_total_matches\",\n        increment: 1\n      }), B && await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n        address: r,\n        questId: \"weekly_attack_wins\",\n        increment: 1\n      }), B || (await e.scheduler.runAfter(0, W.quests.updateWeeklyProgress, {\n        address: i,\n        questId: \"weekly_defense_wins\",\n        increment: 1\n      }), console.log(`\\u{1F6E1}\\uFE0F Weekly quest tracked: Defense win for ${i}`)), console.log(`\\u2705 Weekly quests tracked: Attack ${t.result} for ${r}`);\n    } catch (c) {\n      console.error(\"\\u274C Failed to track weekly quests:\", c);\n    }\n    return console.log(\"\\u269B\\uFE0F ATOMIC: Attack result recorded successfully\", {\n      matchId: k,\n      result: t.result,\n      coinsAwarded: y,\n      newBalance: $,\n      newStreak: f\n    }), {\n      success: !0,\n      matchId: k,\n      coinsAwarded: y,\n      bonuses: L,\n      winStreak: f,\n      opponentAura: u,\n      rankingMultiplier: h,\n      profile: re,\n      // Return updated profile with hasDefenseDeck computed\n      dailyEarned: K(re),\n      remaining: H - K(re)\n    };\n  }, \"handler\")\n}), Oe = C({\n  args: {\n    address: s.string(),\n    type: s.union(s.literal(\"victory\"), s.literal(\"profile\"), s.literal(\"dailyShare\"))\n  },\n  handler: /* @__PURE__ */ _(async (e, t) => {\n    let { address: o, type: r } = t, i = await e.db.query(\"profiles\").withIndex(\"by_address\", (n) => n.eq(\"address\", o.toLowerCase())).first();\n    if (!i)\n      throw new Error(\"Profile not found\");\n    let a = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n    if (r === \"profile\") {\n      if (i.hasSharedProfile)\n        return {\n          success: !1,\n          message: \"Profile share bonus already claimed\",\n          coinsAwarded: 0\n        };\n      let n = 250, l = i.coinsInbox || 0, w = l + n, m = (i.lifetimeEarned || 0) + n, b = (i.totalShareBonus || 0) + n;\n      return await e.db.patch(i._id, {\n        coinsInbox: w,\n        lifetimeEarned: m,\n        totalShareBonus: b,\n        hasSharedProfile: !0,\n        lastUpdated: Date.now()\n      }), console.log(`\\u{1F4EC} Profile share bonus sent to inbox: ${n} TESTVBMS for ${o}. Inbox: ${l} \\u2192 ${w}`), {\n        success: !0,\n        message: \"Profile share bonus claimed!\",\n        coinsAwarded: n,\n        newBalance: w\n      };\n    }\n    if (r === \"dailyShare\") {\n      if (i.lastShareDate === a)\n        return {\n          success: !1,\n          message: \"Daily share bonus already claimed today\",\n          coinsAwarded: 0\n        };\n      let n = 50, l = i.coinsInbox || 0, w = l + n, m = (i.lifetimeEarned || 0) + n, b = (i.totalShareBonus || 0) + n;\n      return await e.db.patch(i._id, {\n        coinsInbox: w,\n        lifetimeEarned: m,\n        totalShareBonus: b,\n        lastShareDate: a,\n        dailyShares: (i.dailyShares || 0) + 1,\n        lastUpdated: Date.now()\n      }), console.log(`\\u{1F4EC} Daily share bonus sent to inbox: ${n} TESTVBMS for ${o}. Inbox: ${l} \\u2192 ${w}`), {\n        success: !0,\n        message: \"Daily share bonus claimed! +50 coins\",\n        coinsAwarded: n,\n        newBalance: w\n      };\n    }\n    if (r === \"victory\") {\n      let n = i.lastShareDate === a && i.dailyShares || 0;\n      if (n >= 3)\n        return {\n          success: !1,\n          message: \"Daily share limit reached (3/3)\",\n          coinsAwarded: 0,\n          remaining: 0\n        };\n      let l = 10, w = i.coinsInbox || 0, m = w + l, b = (i.lifetimeEarned || 0) + l, P = (i.totalShareBonus || 0) + l, E = n + 1;\n      return await e.db.patch(i._id, {\n        coinsInbox: m,\n        lifetimeEarned: b,\n        totalShareBonus: P,\n        dailyShares: E,\n        lastShareDate: a,\n        lastUpdated: Date.now()\n      }), console.log(`\\u{1F4EC} Victory share bonus sent to inbox: ${l} TESTVBMS for ${o}. Inbox: ${w} \\u2192 ${m}`), {\n        success: !0,\n        message: `Share bonus claimed! (+${l} coins)`,\n        coinsAwarded: l,\n        newBalance: m,\n        remaining: 3 - E\n      };\n    }\n    throw new Error(\"Invalid share type\");\n  }, \"handler\")\n}), Fe = C({\n  args: {\n    address: s.string(),\n    matchId: s.id(\"matches\")\n  },\n  handler: /* @__PURE__ */ _(async (e, { address: t, matchId: o }) => {\n    let r = await e.db.query(\"profiles\").withIndex(\"by_address\", (m) => m.eq(\"address\", t.toLowerCase())).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    let i = await e.db.get(o);\n    if (!i)\n      throw new Error(\"Match not found\");\n    if (i.playerAddress.toLowerCase() !== t.toLowerCase())\n      throw new Error(\"Unauthorized: Match does not belong to this player\");\n    if (i.rewardsClaimed)\n      throw new Error(\"Rewards already claimed for this match\");\n    let a = i.coinsEarned || 0;\n    if (r.coins === void 0) {\n      let m = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n      await e.db.patch(r._id, {\n        coins: 0,\n        lifetimeEarned: 0,\n        lifetimeSpent: 0,\n        dailyLimits: {\n          pveWins: 0,\n          pvpMatches: 0,\n          lastResetDate: m,\n          firstPveBonus: !1,\n          firstPvpBonus: !1,\n          loginBonus: !1,\n          streakBonus: !1\n        },\n        winStreak: 0,\n        lastWinTimestamp: 0\n      });\n      let b = await e.db.get(r._id);\n      if (!b) throw new Error(\"Failed to initialize economy\");\n      r = b;\n    }\n    let n = r.coins || 0, l = n + a, w = (r.lifetimeEarned || 0) + a;\n    return console.log(\"[awardPokerCoins] Adding coins:\", {\n      address: t.toLowerCase(),\n      matchId: o,\n      oldCoins: n,\n      amount: a,\n      newCoins: l\n    }), await e.db.patch(r._id, {\n      coins: l,\n      lifetimeEarned: w,\n      lastUpdated: Date.now()\n    }), await e.db.patch(o, {\n      rewardsClaimed: !0,\n      claimedAt: Date.now(),\n      claimType: \"immediate\"\n    }), {\n      success: !0,\n      amount: a,\n      newBalance: l\n    };\n  }, \"handler\")\n});\nexport {\n  qe as addCoins,\n  Fe as awardPokerCoins,\n  Le as awardPvECoins,\n  Ie as awardPvPCoins,\n  Oe as awardShareBonus,\n  Me as chargeEntryFee,\n  $e as claimLoginBonus,\n  Ce as claimShareBonus,\n  De as getPlayerEconomy,\n  Be as initializeEconomy,\n  Re as payEntryFee,\n  Te as previewPvPRewards,\n  We as recordAttackResult,\n  Ee as resetDailyLimits\n};\n//# sourceMappingURL=economy.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/economy.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"DAILY_CAP\", \"PVE_WIN_LIMIT\", \"PVP_MATCH_LIMIT\", \"PVE_REWARDS\", \"PVP_WIN_REWARD\", \"PVP_LOSS_PENALTY\", \"REVENGE_BONUS\", \"RANKING_BONUS_BY_DIFF\", \"PENALTY_REDUCTION_BY_DIFF\", \"ENTRY_FEES\", \"BONUSES\", \"initializeEconomy\", \"mutation\", \"v\", \"__name\", \"ctx\", \"address\", \"profile\", \"q\", \"today\", \"getPlayerEconomy\", \"query\", \"dailyEarned\", \"calculateDailyEarned\", \"canEarnMore\", \"DAILY_CAP\", \"limits\", \"total\", \"resetDailyLimits\", \"internalMutation\", \"args\", \"BATCH_SIZE\", \"resetsApplied\", \"cursorValue\", \"batch\", \"lastProfile\", \"internal\", \"calculateAuraMultiplier\", \"playerAura\", \"opponentAura\", \"isWin\", \"auraDiff\", \"checkAndResetDailyLimits\", \"ctx\", \"profile\", \"today\", \"__name\", \"previewPvPRewards\", \"query\", \"v\", \"playerAddress\", \"opponentAddress\", \"player\", \"q\", \"opponent\", \"playerAura\", \"opponentAura\", \"winMultiplier\", \"calculateAuraMultiplier\", \"lossMultiplier\", \"baseWinReward\", \"PVP_WIN_REWARD\", \"winReward\", \"winBonus\", \"baseLossPenalty\", \"PVP_LOSS_PENALTY\", \"lossPenalty\", \"penaltyReduction\", \"currentStreak\", \"nextStreak\", \"streakBonus\", \"streakMessage\", \"BONUSES\", \"dailyLimits\", \"firstPvpBonus\", \"normalizedPlayerAddress\", \"normalizedOpponentAddress\", \"isRevenge\", \"revengeBonus\", \"rewardWithRevenge\", \"REVENGE_BONUS\", \"totalWinReward\", \"awardPvECoins\", \"mutation\", \"address\", \"difficulty\", \"won\", \"language\", \"skipCoins\", \"updatedProfile\", \"now\", \"lastAward\", \"timeSinceLastAward\", \"RATE_LIMIT_MS\", \"waitTime\", \"api\", \"error\", \"PVE_WIN_LIMIT\", \"totalReward\", \"PVE_REWARDS\", \"bonuses\", \"applyLanguageBoost\", \"dailyEarned\", \"calculateDailyEarned\", \"DAILY_CAP\", \"remaining\", \"currentBalance\", \"currentAura\", \"auraReward\", \"logTransaction\", \"createAuditLog\", \"internal\", \"awardPvPCoins\", \"nowPvP\", \"lastPvPAward\", \"timeSinceLastPvPAward\", \"PVP_RATE_LIMIT_MS\", \"PVP_MATCH_LIMIT\", \"rankingMultiplier\", \"opponentProfile\", \"newStreak\", \"boostedBase\", \"bonusAmount\", \"missionType\", \"rewards\", \"basePenalty\", \"penalty\", \"currentCoins\", \"newCoins\", \"newAura\", \"reduction\", \"chargeEntryFee\", \"mode\", \"fee\", \"ENTRY_FEES\", \"balanceBefore\", \"balanceAfter\", \"claimLoginBonus\", \"claimShareBonus\", \"type\", \"normalizedAddress\", \"dailyShares\", \"shareReward\", \"payEntryFee\", \"addCoins\", \"internalMutation\", \"amount\", \"reason\", \"recordAttackResult\", \"deckCardValidator\", \"args\", \"addressRegex\", \"nowAttack\", \"ATTACK_RATE_LIMIT_MS\", \"rewardBeforeRevenge\", \"penaltyAmount\", \"coinsDeducted\", \"inboxDebt\", \"poolFee\", \"defenderReward\", \"defenderProfile\", \"currentDefenderInbox\", \"newDefenderInbox\", \"txError\", \"currentInbox\", \"currentPoolDebt\", \"inboxDeduction\", \"newInbox\", \"remainingDebt\", \"newPoolDebt\", \"matchId\", \"newStats\", \"auraChange\", \"defenderAura\", \"auraLoss\", \"newDefenderAura\", \"todayUTC\", \"newAttacksToday\", \"updateData\", \"profileWithDefenseDeck\", \"awardShareBonus\", \"bonus\", \"newLifetimeEarned\", \"newTotalShareBonus\", \"newDailyShares\", \"awardPokerCoins\", \"match\", \"oldCoins\", \"lifetimeEarned\"]\n}\n"},{"path":"_deps/5GK4PSQG.js","source":"import {\n  a as o\n} from \"./5B5TEMMX.js\";\n\n// convex/languageBoost.ts\nfunction t(e) {\n  return e === \"zh-CN\";\n}\no(t, \"hasLanguageBoost\");\nfunction u(e, n) {\n  if (!t(n))\n    return e;\n  let r = Math.floor(e * 1.05);\n  return console.log(`\\u{1F1E8}\\u{1F1F3} Social Credit Boost Applied! ${e} \\u2192 ${r} (+5%)`), r;\n}\no(u, \"applyLanguageBoost\");\nfunction p(e) {\n  return t(e) ? 5 : 0;\n}\no(p, \"getBoostPercentage\");\nfunction a(e) {\n  return t(e) ? 1.05 : 1;\n}\no(a, \"getBoostMultiplier\");\n\nexport {\n  t as a,\n  u as b,\n  p as c,\n  a as d\n};\n//# sourceMappingURL=5GK4PSQG.js.map\n","environment":"isolate"},{"path":"_deps/AWJMSRP7.js","source":"import {\n  g as o,\n  i as n\n} from \"./6EQFL5ZL.js\";\n\n// convex/_generated/api.js\nvar e = o, p = o, r = n();\n\nexport {\n  e as a,\n  p as b,\n  r as c\n};\n//# sourceMappingURL=AWJMSRP7.js.map\n","environment":"isolate"},{"path":"economyVBMS.js","source":"import {\n  a as f,\n  c as l\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/economyVBMS.ts\nvar p = {\n  pvp: 20\n  // 20 VBMS per PvP match\n}, u = 100, w = -20, x = l({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { address: t }) => {\n    let e = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", t.toLowerCase())).first();\n    if (!e)\n      throw new Error(\"Profile not found\");\n    let o = p.pvp, n = e.coinsInbox || 0;\n    if (n < o)\n      return {\n        success: !1,\n        reason: \"Insufficient VBMS\",\n        required: o,\n        current: n\n      };\n    let a = n - o;\n    return await s.db.patch(e._id, {\n      coinsInbox: a\n    }), console.log(`\\u{1F4B8} ${t} paid ${o} VBMS entry fee. Inbox: ${n} \\u2192 ${a}`), {\n      success: !0,\n      charged: o,\n      newInbox: a\n    };\n  }, \"handler\")\n}), I = l({\n  args: {\n    address: i.string(),\n    won: i.boolean(),\n    opponentAddress: i.optional(i.string())\n  },\n  handler: /* @__PURE__ */ d(async (s, { address: t, won: e, opponentAddress: o }) => {\n    let n = await s.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", t.toLowerCase())).first();\n    if (!n)\n      throw new Error(\"Profile not found\");\n    let a = n.coinsInbox || 0, r = 0;\n    e ? r = u + p.pvp : r = w;\n    let c = a + r;\n    return await s.db.patch(n._id, {\n      coinsInbox: c,\n      lifetimeEarned: (n.lifetimeEarned || 0) + Math.max(0, r)\n    }), r > 0 && await s.db.insert(\"coinTransactions\", {\n      address: t.toLowerCase(),\n      amount: r,\n      type: \"earn\",\n      source: \"pvp_vbms\",\n      description: `PvP VBMS reward (${e ? \"win\" : \"draw\"})`,\n      timestamp: Date.now(),\n      balanceBefore: n.coinsInbox || 0,\n      balanceAfter: c\n    }), console.log(`${e ? \"\\u{1F3C6}\" : \"\\u{1F480}\"} ${t} ${e ? \"won\" : \"lost\"} PvP: ${r > 0 ? \"+\" : \"\"}${r} VBMS. Inbox: ${a} \\u2192 ${c}`), {\n      success: !0,\n      reward: r,\n      newInbox: c,\n      won: e\n    };\n  }, \"handler\")\n}), y = f({\n  args: {\n    address: i.string()\n  },\n  handler: /* @__PURE__ */ d(async (s, { address: t }) => {\n    let e = await s.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", t.toLowerCase())).first();\n    if (!e)\n      return {\n        inbox: 0,\n        claimedTokens: 0,\n        canPlayPvP: !1\n      };\n    let o = e.coinsInbox || 0, n = o >= p.pvp;\n    return {\n      inbox: o,\n      claimedTokens: e.claimedTokens || 0,\n      canPlayPvP: n,\n      minimumRequired: p.pvp\n    };\n  }, \"handler\")\n});\nexport {\n  I as awardPvPVBMS,\n  x as chargeVBMSEntryFee,\n  y as getVBMSBalance\n};\n//# sourceMappingURL=economyVBMS.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/economyVBMS.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"VBMS_ENTRY_FEES\", \"VBMS_PVP_WIN_REWARD\", \"VBMS_PVP_LOSS_PENALTY\", \"chargeVBMSEntryFee\", \"mutation\", \"v\", \"__name\", \"ctx\", \"address\", \"profile\", \"q\", \"fee\", \"currentInbox\", \"newInbox\", \"awardPvPVBMS\", \"won\", \"opponentAddress\", \"reward\", \"getVBMSBalance\", \"query\", \"inbox\", \"canPlayPvP\"]\n}\n"},{"path":"baccarat.js","source":"import {\n  h as $\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as A,\n  c as _\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as m\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/baccarat.ts\nvar S = 3e4, E = 10, T = 1e3, v = {\n  PLAYER: 1.8,\n  // 0.8:1 (was 1:1)\n  BANKER: 1.7,\n  // 0.7:1 (was 0.95:1)\n  TIE: 5\n  // 4:1 (was 8:1)\n}, R = {\n  A: 1,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 5,\n  6: 6,\n  7: 7,\n  8: 8,\n  9: 9,\n  10: 0,\n  J: 0,\n  Q: 0,\n  K: 0\n}, O = [\"hearts\", \"diamonds\", \"clubs\", \"spades\"], L = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\nfunction P() {\n  let t = [];\n  for (let s of O)\n    for (let r of L)\n      t.push({\n        suit: s,\n        rank: r,\n        value: R[r]\n      });\n  for (let s = t.length - 1; s > 0; s--) {\n    let r = Math.floor(Math.random() * (s + 1));\n    [t[s], t[r]] = [t[r], t[s]];\n  }\n  return t;\n}\nm(P, \"createDeck\");\nfunction y(t) {\n  return t.reduce((r, d) => r + d.value, 0) % 10;\n}\nm(y, \"calculateHandValue\");\nfunction C(t, s, r, d) {\n  if (t >= 8 || s >= 8)\n    return { playerDraws: !1, bankerDraws: !1 };\n  let a = t <= 5, e = !1;\n  if (!r)\n    e = s <= 5;\n  else if (d !== void 0)\n    switch (s) {\n      case 0:\n      case 1:\n      case 2:\n        e = !0;\n        break;\n      case 3:\n        e = d !== 8;\n        break;\n      case 4:\n        e = [2, 3, 4, 5, 6, 7].includes(d);\n        break;\n      case 5:\n        e = [4, 5, 6, 7].includes(d);\n        break;\n      case 6:\n        e = [6, 7].includes(d);\n        break;\n      case 7:\n        e = !1;\n        break;\n    }\n  return { playerDraws: a, bankerDraws: e };\n}\nm(C, \"shouldDrawThirdCard\");\nfunction M(t, s) {\n  return t > s ? \"player\" : s > t ? \"banker\" : \"tie\";\n}\nm(M, \"determineWinner\");\nfunction N() {\n  return `bac_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\nm(N, \"generateTableId\");\nvar W = A({\n  args: {},\n  handler: /* @__PURE__ */ m(async (t) => {\n    let s = await t.db.query(\"baccaratTables\").withIndex(\"by_status\", (r) => r.eq(\"status\", \"waiting\")).first();\n    if (s) {\n      let r = await t.db.query(\"baccaratBets\").withIndex(\"by_table\", (d) => d.eq(\"tableId\", s.tableId)).collect();\n      return {\n        ...s,\n        bets: r,\n        timeRemaining: Math.max(0, s.bettingEndsAt - Date.now())\n      };\n    }\n    return null;\n  }, \"handler\")\n}), K = A({\n  args: { tableId: h.string() },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let r = await t.db.query(\"baccaratTables\").withIndex(\"by_table_id\", (a) => a.eq(\"tableId\", s.tableId)).first();\n    if (!r) return null;\n    let d = await t.db.query(\"baccaratBets\").withIndex(\"by_table\", (a) => a.eq(\"tableId\", s.tableId)).collect();\n    return {\n      ...r,\n      bets: d,\n      timeRemaining: r.status === \"waiting\" ? Math.max(0, r.bettingEndsAt - Date.now()) : 0\n    };\n  }, \"handler\")\n}), G = A({\n  args: { address: h.string() },\n  handler: /* @__PURE__ */ m(async (t, s) => await t.db.query(\"baccaratBets\").withIndex(\"by_player\", (d) => d.eq(\"playerAddress\", s.address.toLowerCase())).order(\"desc\").take(50), \"handler\")\n}), J = A({\n  args: {},\n  handler: /* @__PURE__ */ m(async (t) => await t.db.query(\"baccaratHistory\").withIndex(\"by_finished\").order(\"desc\").take(20), \"handler\")\n}), Q = A({\n  args: { address: h.string() },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let r = s.address.toLowerCase(), d = /* @__PURE__ */ new Date(), a = new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime(), o = (await t.db.query(\"bettingTransactions\").withIndex(\"by_address\", (n) => n.eq(\"address\", r)).filter(\n      (n) => n.and(\n        n.gte(n.field(\"timestamp\"), a),\n        n.eq(n.field(\"type\"), \"bet\")\n      )\n    ).collect()).filter((n) => n.roomId?.startsWith(\"pve_\"));\n    return {\n      count: o.length,\n      todayStart: a,\n      lastPlayedAt: o.length > 0 ? o[0].timestamp : null\n    };\n  }, \"handler\")\n}), j = _({\n  args: {},\n  handler: /* @__PURE__ */ m(async (t) => {\n    let s = await t.db.query(\"baccaratTables\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"waiting\")).first();\n    if (s)\n      return s.tableId;\n    let r = N(), d = Date.now();\n    return await t.db.insert(\"baccaratTables\", {\n      tableId: r,\n      status: \"waiting\",\n      bettingEndsAt: d + S,\n      totalPot: 0,\n      totalBets: 0,\n      playerBets: 0,\n      bankerBets: 0,\n      tieBets: 0,\n      createdAt: d\n    }), r;\n  }, \"handler\")\n}), F = _({\n  args: {\n    tableId: h.string(),\n    address: h.string(),\n    username: h.string(),\n    betOn: h.union(h.literal(\"player\"), h.literal(\"banker\"), h.literal(\"tie\")),\n    amount: h.number()\n  },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let { tableId: r, address: d, username: a, betOn: e, amount: o } = s, n = d.toLowerCase(), c = Date.now();\n    if (o < E)\n      throw new Error(`Minimum bet is ${E} credits`);\n    if (o > T)\n      throw new Error(`Maximum bet is ${T} credits`);\n    let b = await t.db.query(\"baccaratTables\").withIndex(\"by_table_id\", (u) => u.eq(\"tableId\", r)).first();\n    if (!b)\n      throw new Error(\"Table not found\");\n    if (b.status !== \"waiting\")\n      throw new Error(\"Betting is closed for this round\");\n    if (c > b.bettingEndsAt)\n      throw new Error(\"Betting time has expired\");\n    if (await t.db.query(\"baccaratBets\").withIndex(\n      \"by_table_player\",\n      (u) => u.eq(\"tableId\", r).eq(\"playerAddress\", n)\n    ).first())\n      throw new Error(\"You already placed a bet this round\");\n    let f = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (u) => u.eq(\"address\", n)).first();\n    if (!f)\n      throw new Error(\"No betting credits. Deposit VBMS first!\");\n    if (f.balance < o)\n      throw new Error(`Insufficient credits. You have ${f.balance} credits`);\n    return await t.db.patch(f._id, {\n      balance: f.balance - o\n    }), await t.db.insert(\"baccaratBets\", {\n      tableId: r,\n      playerAddress: n,\n      playerUsername: a,\n      betOn: e,\n      amount: o,\n      status: \"pending\",\n      placedAt: c\n    }), await t.db.patch(b._id, {\n      totalPot: b.totalPot + o,\n      totalBets: b.totalBets + 1,\n      playerBets: e === \"player\" ? b.playerBets + o : b.playerBets,\n      bankerBets: e === \"banker\" ? b.bankerBets + o : b.bankerBets,\n      tieBets: e === \"tie\" ? b.tieBets + o : b.tieBets\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: n,\n      type: \"bet\",\n      amount: -o,\n      roomId: r,\n      timestamp: c\n    }), { success: !0, newBalance: f.balance - o };\n  }, \"handler\")\n}), X = _({\n  args: { tableId: h.string() },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let { tableId: r } = s, d = Date.now(), a = await t.db.query(\"baccaratTables\").withIndex(\"by_table_id\", (i) => i.eq(\"tableId\", r)).first();\n    if (!a)\n      throw new Error(\"Table not found\");\n    if (a.status === \"finished\")\n      return console.log(`\\u{1F3B4} Table ${r} already resolved, returning cached result`), {\n        winner: a.winner,\n        playerScore: a.playerScore,\n        bankerScore: a.bankerScore,\n        playerCards: a.playerCards,\n        bankerCards: a.bankerCards,\n        winnersCount: 0,\n        totalPayout: 0,\n        alreadyResolved: !0\n      };\n    if (a.status !== \"waiting\")\n      throw new Error(\"Table is not in waiting state\");\n    let e = P(), o = 0, n = [e[o++], e[o++]], c = [e[o++], e[o++]], b = y(n), w = y(c), f = C(b, w, !1);\n    if (f.playerDraws) {\n      let i = e[o++];\n      n.push(i), b = y(n), C(\n        y(n.slice(0, 2)),\n        w,\n        !0,\n        i.value\n      ).bankerDraws && (c.push(e[o++]), w = y(c));\n    } else f.bankerDraws && (c.push(e[o++]), w = y(c));\n    let u = M(b, w);\n    await t.db.patch(a._id, {\n      status: \"finished\",\n      playerCards: n,\n      bankerCards: c,\n      playerScore: b,\n      bankerScore: w,\n      winner: u,\n      dealtAt: d,\n      finishedAt: d\n    });\n    let B = await t.db.query(\"baccaratBets\").withIndex(\"by_table\", (i) => i.eq(\"tableId\", r)).collect(), g = 0, k = 0;\n    for (let i of B) {\n      let p = \"lost\", l = 0;\n      if (u === \"tie\" ? i.betOn === \"tie\" ? (p = \"won\", l = i.amount * 9, k++) : (p = \"push\", l = i.amount) : i.betOn === u && (p = \"won\", u === \"banker\" ? l = i.amount + Math.floor(i.amount * 0.95) : l = i.amount * 2, k++), await t.db.patch(i._id, {\n        status: p,\n        payout: l > 0 ? l : void 0,\n        resolvedAt: d\n      }), l > 0) {\n        let I = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (D) => D.eq(\"address\", i.playerAddress)).first();\n        I ? await t.db.patch(I._id, {\n          balance: I.balance + l\n        }) : await t.db.insert(\"bettingCredits\", {\n          address: i.playerAddress,\n          balance: l,\n          totalDeposited: 0,\n          totalWithdrawn: 0,\n          lastDeposit: d\n        }), await t.db.insert(\"bettingTransactions\", {\n          address: i.playerAddress,\n          type: \"win\",\n          amount: l,\n          roomId: r,\n          timestamp: d\n        }), g += l;\n      }\n    }\n    return await t.db.insert(\"baccaratHistory\", {\n      tableId: r,\n      winner: u,\n      playerScore: b,\n      bankerScore: w,\n      playerCards: n,\n      bankerCards: c,\n      totalPot: a.totalPot,\n      totalBets: a.totalBets,\n      winnersCount: k,\n      totalPayout: g,\n      finishedAt: d\n    }), {\n      winner: u,\n      playerScore: b,\n      bankerScore: w,\n      playerCards: n,\n      bankerCards: c,\n      winnersCount: k,\n      totalPayout: g\n    };\n  }, \"handler\")\n}), z = _({\n  args: {\n    address: h.string()\n  },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let r = s.address.toLowerCase(), d = Date.now(), a = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (c) => c.eq(\"address\", r)).first();\n    if (!a || a.balance <= 0)\n      throw new Error(\"No credits to cash out\");\n    let e = a.balance;\n    await t.db.patch(a._id, {\n      balance: 0,\n      totalWithdrawn: (a.totalWithdrawn || 0) + e\n    });\n    let o = await t.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", r)).first();\n    if (!o)\n      throw new Error(\"Profile not found\");\n    let n = o.coins || 0;\n    return await t.db.patch(o._id, {\n      coins: n + e,\n      lifetimeEarned: (o.lifetimeEarned || 0) + e,\n      lastUpdated: d\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: r,\n      type: \"withdraw\",\n      amount: e,\n      timestamp: d\n    }), await t.db.insert(\"coinTransactions\", {\n      address: r,\n      type: \"earn\",\n      source: \"baccarat_cashout\",\n      description: `Cashed out ${e} betting credits`,\n      amount: e,\n      balanceBefore: n,\n      balanceAfter: n + e,\n      timestamp: d\n    }), await $(\n      t,\n      r,\n      \"earn\",\n      e,\n      n,\n      n + e,\n      \"baccarat_cashout\",\n      void 0,\n      { reason: \"Betting credits cashout\" }\n    ), console.log(`\\u{1F4B0} Baccarat cashout: ${r} cashed out ${e} credits`), {\n      success: !0,\n      cashedOut: e,\n      newBalance: n + e\n    };\n  }, \"handler\")\n}), V = _({\n  args: {},\n  handler: /* @__PURE__ */ m(async (t) => {\n    let s = Date.now(), r = await t.db.query(\"baccaratTables\").withIndex(\"by_status\", (a) => a.eq(\"status\", \"waiting\")).filter((a) => a.lt(a.field(\"bettingEndsAt\"), s)).take(10), d = [];\n    for (let a of r)\n      if (a.totalBets > 0) {\n        let e = P(), o = 0, n = [e[o++], e[o++]], c = [e[o++], e[o++]], b = y(n), w = y(c), f = C(b, w, !1);\n        if (f.playerDraws) {\n          let i = e[o++];\n          n.push(i), b = y(n), C(\n            y(n.slice(0, 2)),\n            w,\n            !0,\n            i.value\n          ).bankerDraws && (c.push(e[o++]), w = y(c));\n        } else f.bankerDraws && (c.push(e[o++]), w = y(c));\n        let u = M(b, w);\n        await t.db.patch(a._id, {\n          status: \"finished\",\n          playerCards: n,\n          bankerCards: c,\n          playerScore: b,\n          bankerScore: w,\n          winner: u,\n          dealtAt: s,\n          finishedAt: s\n        });\n        let B = await t.db.query(\"baccaratBets\").withIndex(\"by_table\", (i) => i.eq(\"tableId\", a.tableId)).collect(), g = 0, k = 0;\n        for (let i of B) {\n          let p = \"lost\", l = 0;\n          if (u === \"tie\" ? i.betOn === \"tie\" ? (p = \"won\", l = i.amount * 9, k++) : (p = \"push\", l = i.amount) : i.betOn === u && (p = \"won\", l = u === \"banker\" ? i.amount + Math.floor(i.amount * 0.95) : i.amount * 2, k++), await t.db.patch(i._id, {\n            status: p,\n            payout: l > 0 ? l : void 0,\n            resolvedAt: s\n          }), l > 0) {\n            let I = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (D) => D.eq(\"address\", i.playerAddress)).first();\n            I ? await t.db.patch(I._id, {\n              balance: I.balance + l\n            }) : await t.db.insert(\"bettingCredits\", {\n              address: i.playerAddress,\n              balance: l,\n              totalDeposited: 0,\n              totalWithdrawn: 0,\n              lastDeposit: s\n            }), await t.db.insert(\"bettingTransactions\", {\n              address: i.playerAddress,\n              type: \"win\",\n              amount: l,\n              roomId: a.tableId,\n              timestamp: s\n            }), g += l;\n          }\n        }\n        await t.db.insert(\"baccaratHistory\", {\n          tableId: a.tableId,\n          winner: u,\n          playerScore: b,\n          bankerScore: w,\n          playerCards: n,\n          bankerCards: c,\n          totalPot: a.totalPot,\n          totalBets: a.totalBets,\n          winnersCount: k,\n          totalPayout: g,\n          finishedAt: s\n        }), d.push(a.tableId);\n      } else\n        await t.db.patch(a._id, {\n          status: \"finished\",\n          finishedAt: s\n        }), d.push(a.tableId);\n    return { resolved: d };\n  }, \"handler\")\n}), Z = _({\n  args: {\n    address: h.string(),\n    username: h.string(),\n    betOn: h.union(h.literal(\"player\"), h.literal(\"banker\"), h.literal(\"tie\")),\n    amount: h.number()\n  },\n  handler: /* @__PURE__ */ m(async (t, s) => {\n    let { address: r, username: d, betOn: a, amount: e } = s, o = r.toLowerCase(), n = Date.now();\n    if (e < E)\n      throw new Error(`Minimum bet is ${E} credits`);\n    if (e > T)\n      throw new Error(`Maximum bet is ${T} credits`);\n    let c = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (q) => q.eq(\"address\", o)).first();\n    if (!c)\n      throw new Error(\"No betting credits. Deposit VBMS first!\");\n    if (c.balance < e)\n      throw new Error(`Insufficient credits. You have ${c.balance} credits`);\n    await t.db.patch(c._id, {\n      balance: c.balance - e\n    });\n    let b = P(), w = 0, f = [b[w++], b[w++]], u = [b[w++], b[w++]], B = y(f), g = y(u), k = C(B, g, !1);\n    if (k.playerDraws) {\n      let q = b[w++];\n      f.push(q), B = y(f), C(\n        y(f.slice(0, 2)),\n        g,\n        !0,\n        q.value\n      ).bankerDraws && (u.push(b[w++]), g = y(u));\n    } else k.bankerDraws && (u.push(b[w++]), g = y(u));\n    let i = M(B, g), p = \"lost\", l = 0;\n    i === \"tie\" ? a === \"tie\" ? (p = \"won\", l = Math.floor(e * v.TIE)) : (p = \"push\", l = e) : a === i && (p = \"won\", i === \"banker\" ? l = Math.floor(e * v.BANKER) : l = Math.floor(e * v.PLAYER)), l > 0 && await t.db.patch(c._id, {\n      balance: c.balance - e + l\n    });\n    let I = `pve_${n}_${Math.random().toString(36).substr(2, 9)}`;\n    await t.db.insert(\"baccaratHistory\", {\n      tableId: I,\n      winner: i,\n      playerScore: B,\n      bankerScore: g,\n      playerCards: f,\n      bankerCards: u,\n      totalPot: e,\n      totalBets: 1,\n      winnersCount: p === \"won\" ? 1 : 0,\n      totalPayout: l,\n      finishedAt: n\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: o,\n      type: \"bet\",\n      amount: -e,\n      roomId: I,\n      timestamp: n\n    }), l > 0 && await t.db.insert(\"bettingTransactions\", {\n      address: o,\n      type: p === \"won\" ? \"win\" : \"refund\",\n      amount: l,\n      roomId: I,\n      timestamp: n\n    });\n    let D = c.balance - e + l;\n    return console.log(`\\u{1F3B4} PvE Baccarat: ${d} bet ${e} on ${a}, ${p}! Payout: ${l}`), {\n      gameId: I,\n      winner: i,\n      playerScore: B,\n      bankerScore: g,\n      playerCards: f,\n      bankerCards: u,\n      betOn: a,\n      betAmount: e,\n      status: p,\n      payout: l,\n      newBalance: D\n    };\n  }, \"handler\")\n});\nexport {\n  z as cashOut,\n  V as checkAndResolveExpiredTables,\n  j as createOrGetTable,\n  X as dealAndResolve,\n  W as getCurrentTable,\n  Q as getDailyPlays,\n  G as getPlayerHistory,\n  J as getRecentHistory,\n  K as getTable,\n  F as placeBet,\n  Z as playPvE\n};\n//# sourceMappingURL=baccarat.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/baccarat.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;;;;AAoBA,IAAMA,IAAmB,KACnBC,IAAU,IACVC,IAAU,KAIVC,IAAU;AAAA,EACd,QAAQ;AAAA;AAAA,EACR,QAAQ;AAAA;AAAA,EACR,KAAK;AAAA;AACP,GAGMC,IAAsC;AAAA,EAC1C,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EACrC,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EAC7B,IAAM;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAAA,EAAG,GAAK;AAChC,GAEMC,IAAQ,CAAC,UAAU,YAAY,SAAS,QAAQ,GAChDC,IAAQ,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,GAAG;AAO/E,SAASC,IAAa;AACpB,MAAMC,IAAwD,CAAC;AAC/D,WAAWC,KAAQJ;AACjB,aAAWK,KAAQJ;AACjB,MAAAE,EAAK,KAAK;AAAA,QACR,MAAAC;AAAA,QACA,MAAAC;AAAA,QACA,OAAON,EAAYM,CAAI;AAAA,MACzB,CAAC;AAIL,WAASC,IAAIH,EAAK,SAAS,GAAGG,IAAI,GAAGA,KAAK;AACxC,QAAMC,IAAI,KAAK,MAAM,KAAK,OAAO,KAAKD,IAAI,EAAE;AAC5C,KAACH,EAAKG,CAAC,GAAGH,EAAKI,CAAC,CAAC,IAAI,CAACJ,EAAKI,CAAC,GAAGJ,EAAKG,CAAC,CAAC;AAAA,EACxC;AACA,SAAOH;AACT;AAjBSK,EAAAN,GAAA;AAoBT,SAASO,EAAmBC,GAAoC;AAE9D,SADYA,EAAM,OAAO,CAACC,GAAKC,MAASD,IAAMC,EAAK,OAAO,CAAC,IAC9C;AACf;AAHSJ,EAAAC,GAAA;AAMT,SAASI,EACPC,GACAC,GACAC,GACAC,GACgD;AAEhD,MAAIH,KAAe,KAAKC,KAAe;AACrC,WAAO,EAAE,aAAa,IAAO,aAAa,GAAM;AAIlD,MAAMG,IAAcJ,KAAe,GAG/BK,IAAc;AAElB,MAAI,CAACH;AAEH,IAAAG,IAAcJ,KAAe;AAAA,WACpBE,MAAyB;AAElC,YAAQF,GAAa;AAAA,MACnB,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,QAAAI,IAAc;AACd;AAAA,MACF,KAAK;AACH,QAAAA,IAAcF,MAAyB;AACvC;AAAA,MACF,KAAK;AACH,QAAAE,IAAc,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,SAASF,CAAoB;AAC9D;AAAA,MACF,KAAK;AACH,QAAAE,IAAc,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,SAASF,CAAoB;AACxD;AAAA,MACF,KAAK;AACH,QAAAE,IAAc,CAAC,GAAG,CAAC,EAAE,SAASF,CAAoB;AAClD;AAAA,MACF,KAAK;AACH,QAAAE,IAAc;AACd;AAAA,IACJ;AAGF,SAAO,EAAE,aAAAD,GAAa,aAAAC,EAAY;AACpC;AA/CSX,EAAAK,GAAA;AAkDT,SAASO,EAAgBN,GAAqBC,GAAkD;AAC9F,SAAID,IAAcC,IAAoB,WAClCA,IAAcD,IAAoB,WAC/B;AACT;AAJSN,EAAAY,GAAA;AAOT,SAASC,IAA0B;AACjC,SAAO,OAAO,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AACrE;AAFSb,EAAAa,GAAA;AASF,IAAMC,IAAkBC,EAAM;AAAA,EACnC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAf,EAAA,OAAOgB,MAAQ;AAEtB,QAAMC,IAAc,MAAMD,EAAI,GAC3B,MAAM,gBAAgB,EACtB,UAAU,aAAa,CAACE,MAAMA,EAAE,GAAG,UAAU,SAAS,CAAC,EACvD,MAAM;AAET,QAAID,GAAa;AAEf,UAAME,IAAO,MAAMH,EAAI,GACpB,MAAM,cAAc,EACpB,UAAU,YAAY,CAACE,MAAMA,EAAE,GAAG,WAAWD,EAAY,OAAO,CAAC,EACjE,QAAQ;AAEX,aAAO;AAAA,QACL,GAAGA;AAAA,QACH,MAAAE;AAAA,QACA,eAAe,KAAK,IAAI,GAAGF,EAAY,gBAAgB,KAAK,IAAI,CAAC;AAAA,MACnE;AAAA,IACF;AAEA,WAAO;AAAA,EACT,GAtBS;AAuBX,CAAC,GAGYG,IAAWL,EAAM;AAAA,EAC5B,MAAM,EAAE,SAASM,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAMC,IAAQ,MAAMP,EAAI,GACrB,MAAM,gBAAgB,EACtB,UAAU,eAAe,CAACE,MAAMA,EAAE,GAAG,WAAWI,EAAK,OAAO,CAAC,EAC7D,MAAM;AAET,QAAI,CAACC,EAAO,QAAO;AAEnB,QAAMJ,IAAO,MAAMH,EAAI,GACpB,MAAM,cAAc,EACpB,UAAU,YAAY,CAACE,MAAMA,EAAE,GAAG,WAAWI,EAAK,OAAO,CAAC,EAC1D,QAAQ;AAEX,WAAO;AAAA,MACL,GAAGC;AAAA,MACH,MAAAJ;AAAA,MACA,eAAeI,EAAM,WAAW,YAC5B,KAAK,IAAI,GAAGA,EAAM,gBAAgB,KAAK,IAAI,CAAC,IAC5C;AAAA,IACN;AAAA,EACF,GApBS;AAqBX,CAAC,GAGYC,IAAmBT,EAAM;AAAA,EACpC,MAAM,EAAE,SAASM,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MACN,MAAMN,EAAI,GACpB,MAAM,cAAc,EACpB,UAAU,aAAa,CAACE,MAAMA,EAAE,GAAG,iBAAiBI,EAAK,QAAQ,YAAY,CAAC,CAAC,EAC/E,MAAM,MAAM,EACZ,KAAK,EAAE,GALH;AASX,CAAC,GAGYG,IAAmBV,EAAM;AAAA,EACpC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAf,EAAA,OAAOgB,MACE,MAAMA,EAAI,GACvB,MAAM,iBAAiB,EACvB,UAAU,aAAa,EACvB,MAAM,MAAM,EACZ,KAAK,EAAE,GALH;AASX,CAAC,GAGYU,IAAgBX,EAAM;AAAA,EACjC,MAAM,EAAE,SAASM,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAMK,IAAgBL,EAAK,QAAQ,YAAY,GAGzCM,IAAM,oBAAI,KAAK,GACfC,IAAa,IAAI,KAAKD,EAAI,YAAY,GAAGA,EAAI,SAAS,GAAGA,EAAI,QAAQ,CAAC,EAAE,QAAQ,GAgBhFE,KAZY,MAAMd,EAAI,GACzB,MAAM,qBAAqB,EAC3B,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWS,CAAa,CAAC,EAC7D;AAAA,MAAO,CAACT,MACPA,EAAE;AAAA,QACAA,EAAE,IAAIA,EAAE,MAAM,WAAW,GAAGW,CAAU;AAAA,QACtCX,EAAE,GAAGA,EAAE,MAAM,MAAM,GAAG,KAAK;AAAA,MAC7B;AAAA,IACF,EACC,QAAQ,GAGgB,OAAO,CAAAa,MAAMA,EAAG,QAAQ,WAAW,MAAM,CAAC;AAErE,WAAO;AAAA,MACL,OAAOD,EAAS;AAAA,MAChB,YAAAD;AAAA,MACA,cAAcC,EAAS,SAAS,IAAIA,EAAS,CAAC,EAAE,YAAY;AAAA,IAC9D;AAAA,EACF,GA5BS;AA6BX,CAAC,GAOYE,IAAmBC,EAAS;AAAA,EACvC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAjC,EAAA,OAAOgB,MAAQ;AAEtB,QAAMkB,IAAgB,MAAMlB,EAAI,GAC7B,MAAM,gBAAgB,EACtB,UAAU,aAAa,CAACE,MAAMA,EAAE,GAAG,UAAU,SAAS,CAAC,EACvD,MAAM;AAET,QAAIgB;AACF,aAAOA,EAAc;AAIvB,QAAMC,IAAUtB,EAAgB,GAC1Be,IAAM,KAAK,IAAI;AAErB,iBAAMZ,EAAI,GAAG,OAAO,kBAAkB;AAAA,MACpC,SAAAmB;AAAA,MACA,QAAQ;AAAA,MACR,eAAeP,IAAMzC;AAAA,MACrB,UAAU;AAAA,MACV,WAAW;AAAA,MACX,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,WAAWyC;AAAA,IACb,CAAC,GAEMO;AAAA,EACT,GA5BS;AA6BX,CAAC,GAGYC,IAAWH,EAAS;AAAA,EAC/B,MAAM;AAAA,IACJ,SAASZ,EAAE,OAAO;AAAA,IAClB,SAASA,EAAE,OAAO;AAAA,IAClB,UAAUA,EAAE,OAAO;AAAA,IACnB,OAAOA,EAAE,MAAMA,EAAE,QAAQ,QAAQ,GAAGA,EAAE,QAAQ,QAAQ,GAAGA,EAAE,QAAQ,KAAK,CAAC;AAAA,IACzE,QAAQA,EAAE,OAAO;AAAA,EACnB;AAAA,EACA,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAM,EAAE,SAAAa,GAAS,SAAAE,GAAS,UAAAC,GAAU,OAAAC,GAAO,QAAAC,EAAO,IAAIlB,GAChDK,IAAgBU,EAAQ,YAAY,GACpCT,IAAM,KAAK,IAAI;AAGrB,QAAIY,IAASpD;AACX,YAAM,IAAI,MAAM,kBAAkBA,CAAO,UAAU;AAErD,QAAIoD,IAASnD;AACX,YAAM,IAAI,MAAM,kBAAkBA,CAAO,UAAU;AAIrD,QAAMkC,IAAQ,MAAMP,EAAI,GACrB,MAAM,gBAAgB,EACtB,UAAU,eAAe,CAACE,MAAMA,EAAE,GAAG,WAAWiB,CAAO,CAAC,EACxD,MAAM;AAET,QAAI,CAACZ;AACH,YAAM,IAAI,MAAM,iBAAiB;AAGnC,QAAIA,EAAM,WAAW;AACnB,YAAM,IAAI,MAAM,kCAAkC;AAGpD,QAAIK,IAAML,EAAM;AACd,YAAM,IAAI,MAAM,0BAA0B;AAW5C,QAPoB,MAAMP,EAAI,GAC3B,MAAM,cAAc,EACpB;AAAA,MAAU;AAAA,MAAmB,CAACE,MAC7BA,EAAE,GAAG,WAAWiB,CAAO,EAAE,GAAG,iBAAiBR,CAAa;AAAA,IAC5D,EACC,MAAM;AAGP,YAAM,IAAI,MAAM,qCAAqC;AAIvD,QAAMc,IAAU,MAAMzB,EAAI,GACvB,MAAM,gBAAgB,EACtB,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWS,CAAa,CAAC,EAC7D,MAAM;AAET,QAAI,CAACc;AACH,YAAM,IAAI,MAAM,yCAAyC;AAG3D,QAAIA,EAAQ,UAAUD;AACpB,YAAM,IAAI,MAAM,kCAAkCC,EAAQ,OAAO,UAAU;AAI7E,iBAAMzB,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,MAC9B,SAASA,EAAQ,UAAUD;AAAA,IAC7B,CAAC,GAGD,MAAMxB,EAAI,GAAG,OAAO,gBAAgB;AAAA,MAClC,SAAAmB;AAAA,MACA,eAAAR;AAAA,MACA,gBAAgBW;AAAA,MAChB,OAAAC;AAAA,MACA,QAAAC;AAAA,MACA,QAAQ;AAAA,MACR,UAAUZ;AAAA,IACZ,CAAC,GAGD,MAAMZ,EAAI,GAAG,MAAMO,EAAM,KAAK;AAAA,MAC5B,UAAUA,EAAM,WAAWiB;AAAA,MAC3B,WAAWjB,EAAM,YAAY;AAAA,MAC7B,YAAYgB,MAAU,WAAWhB,EAAM,aAAaiB,IAASjB,EAAM;AAAA,MACnE,YAAYgB,MAAU,WAAWhB,EAAM,aAAaiB,IAASjB,EAAM;AAAA,MACnE,SAASgB,MAAU,QAAQhB,EAAM,UAAUiB,IAASjB,EAAM;AAAA,IAC5D,CAAC,GAGD,MAAMP,EAAI,GAAG,OAAO,uBAAuB;AAAA,MACzC,SAASW;AAAA,MACT,MAAM;AAAA,MACN,QAAQ,CAACa;AAAA,MACT,QAAQL;AAAA,MACR,WAAWP;AAAA,IACb,CAAC,GAEM,EAAE,SAAS,IAAM,YAAYa,EAAQ,UAAUD,EAAO;AAAA,EAC/D,GA5FS;AA6FX,CAAC,GAIYE,IAAiBT,EAAS;AAAA,EACrC,MAAM,EAAE,SAASZ,EAAE,OAAO,EAAE;AAAA,EAC5B,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAM,EAAE,SAAAa,EAAQ,IAAIb,GACdM,IAAM,KAAK,IAAI,GAGfL,IAAQ,MAAMP,EAAI,GACrB,MAAM,gBAAgB,EACtB,UAAU,eAAe,CAACE,MAAMA,EAAE,GAAG,WAAWiB,CAAO,CAAC,EACxD,MAAM;AAET,QAAI,CAACZ;AACH,YAAM,IAAI,MAAM,iBAAiB;AAInC,QAAIA,EAAM,WAAW;AACnB,qBAAQ,IAAI,mBAAYY,CAAO,4CAA4C,GACpE;AAAA,QACL,QAAQZ,EAAM;AAAA,QACd,aAAaA,EAAM;AAAA,QACnB,aAAaA,EAAM;AAAA,QACnB,aAAaA,EAAM;AAAA,QACnB,aAAaA,EAAM;AAAA,QACnB,cAAc;AAAA,QACd,aAAa;AAAA,QACb,iBAAiB;AAAA,MACnB;AAGF,QAAIA,EAAM,WAAW;AACnB,YAAM,IAAI,MAAM,+BAA+B;AAIjD,QAAM5B,IAAOD,EAAW,GACpBiD,IAAY,GAGVC,IAAc,CAACjD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GACnDE,IAAc,CAAClD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GAErDrC,IAAcL,EAAmB2C,CAAW,GAC5CrC,IAAcN,EAAmB4C,CAAW,GAG1CC,IAAazC,EAAoBC,GAAaC,GAAa,EAAK;AAEtE,QAAIuC,EAAW,aAAa;AAC1B,UAAMC,IAAYpD,EAAKgD,GAAW;AAClC,MAAAC,EAAY,KAAKG,CAAS,GAC1BzC,IAAcL,EAAmB2C,CAAW,GAGxBvC;AAAA,QAClBJ,EAAmB2C,EAAY,MAAM,GAAG,CAAC,CAAC;AAAA,QAC1CrC;AAAA,QACA;AAAA,QACAwC,EAAU;AAAA,MACZ,EAEgB,gBACdF,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAAA,IAEhD,MAAO,CAAIC,EAAW,gBAEpBD,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAK9C,QAAMG,IAASpC,EAAgBN,GAAaC,CAAW;AAGvD,UAAMS,EAAI,GAAG,MAAMO,EAAM,KAAK;AAAA,MAC5B,QAAQ;AAAA,MACR,aAAAqB;AAAA,MACA,aAAAC;AAAA,MACA,aAAAvC;AAAA,MACA,aAAAC;AAAA,MACA,QAAAyC;AAAA,MACA,SAASpB;AAAA,MACT,YAAYA;AAAA,IACd,CAAC;AAGD,QAAMT,IAAO,MAAMH,EAAI,GACpB,MAAM,cAAc,EACpB,UAAU,YAAY,CAACE,MAAMA,EAAE,GAAG,WAAWiB,CAAO,CAAC,EACrD,QAAQ,GAEPc,IAAc,GACdC,IAAe;AAGnB,aAAWC,KAAOhC,GAAM;AACtB,UAAIiC,IAAkC,QAClCC,IAAS;AAiCb,UA/BIL,MAAW,QACTG,EAAI,UAAU,SAEhBC,IAAS,OACTC,IAASF,EAAI,SAAS,GACtBD,QAGAE,IAAS,QACTC,IAASF,EAAI,UAENA,EAAI,UAAUH,MACvBI,IAAS,OACLJ,MAAW,WAEbK,IAASF,EAAI,SAAS,KAAK,MAAMA,EAAI,SAAS,IAAI,IAGlDE,IAASF,EAAI,SAAS,GAExBD,MAIF,MAAMlC,EAAI,GAAG,MAAMmC,EAAI,KAAK;AAAA,QAC1B,QAAAC;AAAA,QACA,QAAQC,IAAS,IAAIA,IAAS;AAAA,QAC9B,YAAYzB;AAAA,MACd,CAAC,GAGGyB,IAAS,GAAG;AACd,YAAMZ,IAAU,MAAMzB,EAAI,GACvB,MAAM,gBAAgB,EACtB,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWiC,EAAI,aAAa,CAAC,EACjE,MAAM;AAET,QAAIV,IACF,MAAMzB,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,UAC9B,SAASA,EAAQ,UAAUY;AAAA,QAC7B,CAAC,IAGD,MAAMrC,EAAI,GAAG,OAAO,kBAAkB;AAAA,UACpC,SAASmC,EAAI;AAAA,UACb,SAASE;AAAA,UACT,gBAAgB;AAAA,UAChB,gBAAgB;AAAA,UAChB,aAAazB;AAAA,QACf,CAAC,GAIH,MAAMZ,EAAI,GAAG,OAAO,uBAAuB;AAAA,UACzC,SAASmC,EAAI;AAAA,UACb,MAAM;AAAA,UACN,QAAQE;AAAA,UACR,QAAQlB;AAAA,UACR,WAAWP;AAAA,QACb,CAAC,GAEDqB,KAAeI;AAAA,MACjB;AAAA,IACF;AAGA,iBAAMrC,EAAI,GAAG,OAAO,mBAAmB;AAAA,MACrC,SAAAmB;AAAA,MACA,QAAAa;AAAA,MACA,aAAA1C;AAAA,MACA,aAAAC;AAAA,MACA,aAAAqC;AAAA,MACA,aAAAC;AAAA,MACA,UAAUtB,EAAM;AAAA,MAChB,WAAWA,EAAM;AAAA,MACjB,cAAA2B;AAAA,MACA,aAAAD;AAAA,MACA,YAAYrB;AAAA,IACd,CAAC,GAEM;AAAA,MACL,QAAAoB;AAAA,MACA,aAAA1C;AAAA,MACA,aAAAC;AAAA,MACA,aAAAqC;AAAA,MACA,aAAAC;AAAA,MACA,cAAAK;AAAA,MACA,aAAAD;AAAA,IACF;AAAA,EACF,GA7LS;AA8LX,CAAC,GAGYK,IAAUrB,EAAS;AAAA,EAC9B,MAAM;AAAA,IACJ,SAASZ,EAAE,OAAO;AAAA,EACpB;AAAA,EACA,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAMK,IAAgBL,EAAK,QAAQ,YAAY,GACzCM,IAAM,KAAK,IAAI,GAGfa,IAAU,MAAMzB,EAAI,GACvB,MAAM,gBAAgB,EACtB,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWS,CAAa,CAAC,EAC7D,MAAM;AAET,QAAI,CAACc,KAAWA,EAAQ,WAAW;AACjC,YAAM,IAAI,MAAM,wBAAwB;AAG1C,QAAMD,IAASC,EAAQ;AAGvB,UAAMzB,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,MAC9B,SAAS;AAAA,MACT,iBAAiBA,EAAQ,kBAAkB,KAAKD;AAAA,IAClD,CAAC;AAGD,QAAMe,IAAU,MAAMvC,EAAI,GACvB,MAAM,UAAU,EAChB,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWS,CAAa,CAAC,EAC7D,MAAM;AAET,QAAI,CAAC4B;AACH,YAAM,IAAI,MAAM,mBAAmB;AAGrC,QAAMC,IAAeD,EAAQ,SAAS;AACtC,iBAAMvC,EAAI,GAAG,MAAMuC,EAAQ,KAAK;AAAA,MAC9B,OAAOC,IAAehB;AAAA,MACtB,iBAAiBe,EAAQ,kBAAkB,KAAKf;AAAA,MAChD,aAAaZ;AAAA,IACf,CAAC,GAGD,MAAMZ,EAAI,GAAG,OAAO,uBAAuB;AAAA,MACzC,SAASW;AAAA,MACT,MAAM;AAAA,MACN,QAAAa;AAAA,MACA,WAAWZ;AAAA,IACb,CAAC,GAED,MAAMZ,EAAI,GAAG,OAAO,oBAAoB;AAAA,MACtC,SAASW;AAAA,MACT,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,aAAa,cAAca,CAAM;AAAA,MACjC,QAAAA;AAAA,MACA,eAAegB;AAAA,MACf,cAAcA,IAAehB;AAAA,MAC7B,WAAWZ;AAAA,IACb,CAAC,GAGD,MAAM6B;AAAA,MACJzC;AAAA,MACAW;AAAA,MACA;AAAA,MACAa;AAAA,MACAgB;AAAA,MACAA,IAAehB;AAAA,MACf;AAAA,MACA;AAAA,MACA,EAAE,QAAQ,0BAA0B;AAAA,IACtC,GAEA,QAAQ,IAAI,+BAAwBb,CAAa,eAAea,CAAM,UAAU,GAEzE;AAAA,MACL,SAAS;AAAA,MACT,WAAWA;AAAA,MACX,YAAYgB,IAAehB;AAAA,IAC7B;AAAA,EACF,GA9ES;AA+EX,CAAC,GAGYkB,IAA+BzB,EAAS;AAAA,EACnD,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAjC,EAAA,OAAOgB,MAAQ;AACtB,QAAMY,IAAM,KAAK,IAAI,GAGf+B,IAAgB,MAAM3C,EAAI,GAC7B,MAAM,gBAAgB,EACtB,UAAU,aAAa,CAACE,MAAMA,EAAE,GAAG,UAAU,SAAS,CAAC,EACvD,OAAO,CAACA,MAAMA,EAAE,GAAGA,EAAE,MAAM,eAAe,GAAGU,CAAG,CAAC,EACjD,KAAK,EAAE,GAEJgC,IAAW,CAAC;AAElB,aAAWrC,KAASoC;AAElB,UAAIpC,EAAM,YAAY,GAAG;AAEvB,YAAM5B,IAAOD,EAAW,GACpBiD,IAAY,GAEVC,IAAc,CAACjD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GACnDE,IAAc,CAAClD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GAErDrC,IAAcL,EAAmB2C,CAAW,GAC5CrC,IAAcN,EAAmB4C,CAAW,GAE1CC,IAAazC,EAAoBC,GAAaC,GAAa,EAAK;AAEtE,YAAIuC,EAAW,aAAa;AAC1B,cAAMC,IAAYpD,EAAKgD,GAAW;AAClC,UAAAC,EAAY,KAAKG,CAAS,GAC1BzC,IAAcL,EAAmB2C,CAAW,GAExBvC;AAAA,YAClBJ,EAAmB2C,EAAY,MAAM,GAAG,CAAC,CAAC;AAAA,YAC1CrC;AAAA,YACA;AAAA,YACAwC,EAAU;AAAA,UACZ,EAEgB,gBACdF,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAAA,QAEhD,MAAO,CAAIC,EAAW,gBAEpBD,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAI9C,YAAMG,IAASpC,EAAgBN,GAAaC,CAAW;AAEvD,cAAMS,EAAI,GAAG,MAAMO,EAAM,KAAK;AAAA,UAC5B,QAAQ;AAAA,UACR,aAAAqB;AAAA,UACA,aAAAC;AAAA,UACA,aAAAvC;AAAA,UACA,aAAAC;AAAA,UACA,QAAAyC;AAAA,UACA,SAASpB;AAAA,UACT,YAAYA;AAAA,QACd,CAAC;AAGD,YAAMT,IAAO,MAAMH,EAAI,GACpB,MAAM,cAAc,EACpB,UAAU,YAAY,CAACE,MAAMA,EAAE,GAAG,WAAWK,EAAM,OAAO,CAAC,EAC3D,QAAQ,GAEP0B,IAAc,GACdC,IAAe;AAEnB,iBAAWC,KAAOhC,GAAM;AACtB,cAAIiC,IAAkC,QAClCC,IAAS;AAyBb,cAvBIL,MAAW,QACTG,EAAI,UAAU,SAChBC,IAAS,OACTC,IAASF,EAAI,SAAS,GACtBD,QAEAE,IAAS,QACTC,IAASF,EAAI,UAENA,EAAI,UAAUH,MACvBI,IAAS,OACTC,IAASL,MAAW,WAChBG,EAAI,SAAS,KAAK,MAAMA,EAAI,SAAS,IAAI,IACzCA,EAAI,SAAS,GACjBD,MAGF,MAAMlC,EAAI,GAAG,MAAMmC,EAAI,KAAK;AAAA,YAC1B,QAAAC;AAAA,YACA,QAAQC,IAAS,IAAIA,IAAS;AAAA,YAC9B,YAAYzB;AAAA,UACd,CAAC,GAEGyB,IAAS,GAAG;AACd,gBAAMZ,IAAU,MAAMzB,EAAI,GACvB,MAAM,gBAAgB,EACtB,UAAU,cAAc,CAACE,MAAMA,EAAE,GAAG,WAAWiC,EAAI,aAAa,CAAC,EACjE,MAAM;AAET,YAAIV,IACF,MAAMzB,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,cAC9B,SAASA,EAAQ,UAAUY;AAAA,YAC7B,CAAC,IAED,MAAMrC,EAAI,GAAG,OAAO,kBAAkB;AAAA,cACpC,SAASmC,EAAI;AAAA,cACb,SAASE;AAAA,cACT,gBAAgB;AAAA,cAChB,gBAAgB;AAAA,cAChB,aAAazB;AAAA,YACf,CAAC,GAGH,MAAMZ,EAAI,GAAG,OAAO,uBAAuB;AAAA,cACzC,SAASmC,EAAI;AAAA,cACb,MAAM;AAAA,cACN,QAAQE;AAAA,cACR,QAAQ9B,EAAM;AAAA,cACd,WAAWK;AAAA,YACb,CAAC,GAEDqB,KAAeI;AAAA,UACjB;AAAA,QACF;AAEA,cAAMrC,EAAI,GAAG,OAAO,mBAAmB;AAAA,UACrC,SAASO,EAAM;AAAA,UACf,QAAAyB;AAAA,UACA,aAAA1C;AAAA,UACA,aAAAC;AAAA,UACA,aAAAqC;AAAA,UACA,aAAAC;AAAA,UACA,UAAUtB,EAAM;AAAA,UAChB,WAAWA,EAAM;AAAA,UACjB,cAAA2B;AAAA,UACA,aAAAD;AAAA,UACA,YAAYrB;AAAA,QACd,CAAC,GAEDgC,EAAS,KAAKrC,EAAM,OAAO;AAAA,MAC7B;AAEE,cAAMP,EAAI,GAAG,MAAMO,EAAM,KAAK;AAAA,UAC5B,QAAQ;AAAA,UACR,YAAYK;AAAA,QACd,CAAC,GACDgC,EAAS,KAAKrC,EAAM,OAAO;AAI/B,WAAO,EAAE,UAAAqC,EAAS;AAAA,EACpB,GA7JS;AA8JX,CAAC,GAUYC,IAAU5B,EAAS;AAAA,EAC9B,MAAM;AAAA,IACJ,SAASZ,EAAE,OAAO;AAAA,IAClB,UAAUA,EAAE,OAAO;AAAA,IACnB,OAAOA,EAAE,MAAMA,EAAE,QAAQ,QAAQ,GAAGA,EAAE,QAAQ,QAAQ,GAAGA,EAAE,QAAQ,KAAK,CAAC;AAAA,IACzE,QAAQA,EAAE,OAAO;AAAA,EACnB;AAAA,EACA,SAAS,gBAAArB,EAAA,OAAOgB,GAAKM,MAAS;AAC5B,QAAM,EAAE,SAAAe,GAAS,UAAAC,GAAU,OAAAC,GAAO,QAAAC,EAAO,IAAIlB,GACvCK,IAAgBU,EAAQ,YAAY,GACpCT,IAAM,KAAK,IAAI;AAGrB,QAAIY,IAASpD;AACX,YAAM,IAAI,MAAM,kBAAkBA,CAAO,UAAU;AAErD,QAAIoD,IAASnD;AACX,YAAM,IAAI,MAAM,kBAAkBA,CAAO,UAAU;AAIrD,QAAMoD,IAAU,MAAMzB,EAAI,GACvB,MAAM,gBAAgB,EACtB,UAAU,cAAc,CAAC,MAAM,EAAE,GAAG,WAAWW,CAAa,CAAC,EAC7D,MAAM;AAET,QAAI,CAACc;AACH,YAAM,IAAI,MAAM,yCAAyC;AAG3D,QAAIA,EAAQ,UAAUD;AACpB,YAAM,IAAI,MAAM,kCAAkCC,EAAQ,OAAO,UAAU;AAI7E,UAAMzB,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,MAC9B,SAASA,EAAQ,UAAUD;AAAA,IAC7B,CAAC;AAGD,QAAM7C,IAAOD,EAAW,GACpBiD,IAAY,GAGVC,IAAc,CAACjD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GACnDE,IAAc,CAAClD,EAAKgD,GAAW,GAAGhD,EAAKgD,GAAW,CAAC,GAErDrC,IAAcL,EAAmB2C,CAAW,GAC5CrC,IAAcN,EAAmB4C,CAAW,GAG1CC,IAAazC,EAAoBC,GAAaC,GAAa,EAAK;AAEtE,QAAIuC,EAAW,aAAa;AAC1B,UAAMC,IAAYpD,EAAKgD,GAAW;AAClC,MAAAC,EAAY,KAAKG,CAAS,GAC1BzC,IAAcL,EAAmB2C,CAAW,GAExBvC;AAAA,QAClBJ,EAAmB2C,EAAY,MAAM,GAAG,CAAC,CAAC;AAAA,QAC1CrC;AAAA,QACA;AAAA,QACAwC,EAAU;AAAA,MACZ,EAEgB,gBACdF,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAAA,IAEhD,MAAO,CAAIC,EAAW,gBAEpBD,EAAY,KAAKlD,EAAKgD,GAAW,CAAC,GAClCpC,IAAcN,EAAmB4C,CAAW;AAK9C,QAAMG,IAASpC,EAAgBN,GAAaC,CAAW,GAGnD6C,IAAkC,QAClCC,IAAS;AAEb,IAAIL,MAAW,QACTT,MAAU,SACZa,IAAS,OACTC,IAAS,KAAK,MAAMb,IAASlD,EAAQ,GAAG,MAExC8D,IAAS,QACTC,IAASb,KAEFD,MAAUS,MACnBI,IAAS,OACLJ,MAAW,WACbK,IAAS,KAAK,MAAMb,IAASlD,EAAQ,MAAM,IAE3C+D,IAAS,KAAK,MAAMb,IAASlD,EAAQ,MAAM,IAK3C+D,IAAS,KACX,MAAMrC,EAAI,GAAG,MAAMyB,EAAQ,KAAK;AAAA,MAC9B,SAASA,EAAQ,UAAUD,IAASa;AAAA,IACtC,CAAC;AAIH,QAAMS,IAAS,OAAOlC,CAAG,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AAGpE,UAAMZ,EAAI,GAAG,OAAO,mBAAmB;AAAA,MACrC,SAAS8C;AAAA,MACT,QAAAd;AAAA,MACA,aAAA1C;AAAA,MACA,aAAAC;AAAA,MACA,aAAAqC;AAAA,MACA,aAAAC;AAAA,MACA,UAAUL;AAAA,MACV,WAAW;AAAA,MACX,cAAcY,MAAW,QAAQ,IAAI;AAAA,MACrC,aAAaC;AAAA,MACb,YAAYzB;AAAA,IACd,CAAC,GAGD,MAAMZ,EAAI,GAAG,OAAO,uBAAuB;AAAA,MACzC,SAASW;AAAA,MACT,MAAM;AAAA,MACN,QAAQ,CAACa;AAAA,MACT,QAAQsB;AAAA,MACR,WAAWlC;AAAA,IACb,CAAC,GAEGyB,IAAS,KACX,MAAMrC,EAAI,GAAG,OAAO,uBAAuB;AAAA,MACzC,SAASW;AAAA,MACT,MAAMyB,MAAW,QAAQ,QAAQ;AAAA,MACjC,QAAQC;AAAA,MACR,QAAQS;AAAA,MACR,WAAWlC;AAAA,IACb,CAAC;AAGH,QAAMmC,IAAatB,EAAQ,UAAUD,IAASa;AAE9C,mBAAQ,IAAI,2BAAoBf,CAAQ,QAAQE,CAAM,OAAOD,CAAK,KAAKa,CAAM,aAAaC,CAAM,EAAE,GAE3F;AAAA,MACL,QAAAS;AAAA,MACA,QAAAd;AAAA,MACA,aAAA1C;AAAA,MACA,aAAAC;AAAA,MACA,aAAAqC;AAAA,MACA,aAAAC;AAAA,MACA,OAAAN;AAAA,MACA,WAAWC;AAAA,MACX,QAAAY;AAAA,MACA,QAAAC;AAAA,MACA,YAAAU;AAAA,IACF;AAAA,EACF,GA1JS;AA2JX,CAAC;\",\n  \"names\": [\"BETTING_DURATION\", \"MIN_BET\", \"MAX_BET\", \"PAYOUTS\", \"CARD_VALUES\", \"SUITS\", \"RANKS\", \"createDeck\", \"deck\", \"suit\", \"rank\", \"i\", \"j\", \"__name\", \"calculateHandValue\", \"cards\", \"acc\", \"card\", \"shouldDrawThirdCard\", \"playerScore\", \"bankerScore\", \"playerHasThirdCard\", \"playerThirdCardValue\", \"playerDraws\", \"bankerDraws\", \"determineWinner\", \"generateTableId\", \"getCurrentTable\", \"query\", \"ctx\", \"activeTable\", \"q\", \"bets\", \"getTable\", \"v\", \"args\", \"table\", \"getPlayerHistory\", \"getRecentHistory\", \"getDailyPlays\", \"playerAddress\", \"now\", \"todayStart\", \"pveGames\", \"tx\", \"createOrGetTable\", \"mutation\", \"existingTable\", \"tableId\", \"placeBet\", \"address\", \"username\", \"betOn\", \"amount\", \"credits\", \"dealAndResolve\", \"deckIndex\", \"playerCards\", \"bankerCards\", \"firstCheck\", \"thirdCard\", \"winner\", \"totalPayout\", \"winnersCount\", \"bet\", \"status\", \"payout\", \"cashOut\", \"profile\", \"currentCoins\", \"createAuditLog\", \"checkAndResolveExpiredTables\", \"expiredTables\", \"resolved\", \"playPvE\", \"gameId\", \"newBalance\"]\n}\n"},{"path":"backup.js","source":"import {\n  b as i\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as s\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/backup.ts\nvar p = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 100;\n    return await e.db.query(\"profiles\").take(t);\n  }, \"handler\")\n}), h = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 100;\n    return await e.db.query(\"matches\").take(t);\n  }, \"handler\")\n}), g = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 100;\n    return await e.db.query(\"achievements\").take(t);\n  }, \"handler\")\n}), y = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 100;\n    return await e.db.query(\"questProgress\").take(t);\n  }, \"handler\")\n}), b = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 50;\n    return await e.db.query(\"rooms\").take(t);\n  }, \"handler\")\n}), k = i({\n  args: { limit: r.optional(r.number()) },\n  handler: /* @__PURE__ */ s(async (e, a) => {\n    let t = a.limit || 100;\n    try {\n      return await e.db.query(\"weeklyRewards\").take(t);\n    } catch {\n      return [];\n    }\n  }, \"handler\")\n}), S = i({\n  args: {},\n  handler: /* @__PURE__ */ s(async (e) => {\n    let [\n      t,\n      l,\n      n,\n      o,\n      m,\n      u\n    ] = await Promise.all([\n      e.db.query(\"profiles\").take(50),\n      e.db.query(\"matches\").take(50),\n      e.db.query(\"achievements\").take(50),\n      e.db.query(\"questProgress\").take(50),\n      e.db.query(\"rooms\").take(50),\n      e.db.query(\"weeklyRewards\").take(50).catch(() => [])\n    ]);\n    return {\n      timestamp: Date.now(),\n      profiles: t,\n      matches: l,\n      achievements: n,\n      questProgress: o,\n      rooms: m,\n      weeklyRewards: u,\n      stats: {\n        profilesSampled: t.length,\n        matchesSampled: l.length,\n        achievementsSampled: n.length,\n        questProgressSampled: o.length,\n        roomsSampled: m.length,\n        weeklyRewardsSampled: u.length\n      },\n      note: \"This is a sample backup. Use individual queries with pagination for full backup.\"\n    };\n  }, \"handler\")\n});\nexport {\n  g as getAllAchievements,\n  h as getAllMatches,\n  p as getAllProfiles,\n  b as getAllPvPRooms,\n  y as getAllQuestProgress,\n  k as getAllWeeklyRewards,\n  S as getCompleteBackup\n};\n//# sourceMappingURL=backup.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/backup.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getAllProfiles\", \"internalQuery\", \"v\", \"__name\", \"ctx\", \"args\", \"limit\", \"getAllMatches\", \"getAllAchievements\", \"getAllQuestProgress\", \"getAllPvPRooms\", \"getAllWeeklyRewards\", \"getCompleteBackup\", \"profiles\", \"matches\", \"achievements\", \"questProgress\", \"rooms\", \"weeklyRewards\"]\n}\n"},{"path":"bettingCredits.js","source":"import {\n  a as q,\n  c as C\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as c\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as h\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/bettingCredits.ts\nvar I = 1e4, A = C({\n  args: {\n    address: c.string(),\n    amount: c.number(),\n    txHash: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let { address: a, amount: e, txHash: n } = d, r = a.toLowerCase();\n    if (e > I)\n      throw new Error(`Maximum entry is ${I} VBMS`);\n    if (await t.db.query(\"bettingCredits\").withIndex(\"by_txHash\", (b) => b.eq(\"txHash\", n)).first())\n      throw new Error(\"Transaction already processed\");\n    let o = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (b) => b.eq(\"address\", r)).first(), g = o?.balance || 0;\n    if (g + e > I)\n      throw new Error(`Maximum balance is ${I} credits. You have ${g} credits.`);\n    return o ? await t.db.patch(o._id, {\n      balance: o.balance + e,\n      lastDeposit: Date.now()\n    }) : await t.db.insert(\"bettingCredits\", {\n      address: r,\n      balance: e,\n      totalDeposited: e,\n      totalWithdrawn: 0,\n      lastDeposit: Date.now(),\n      txHash: n\n      // Store this tx\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: r,\n      type: \"deposit\",\n      amount: e,\n      txHash: n,\n      timestamp: Date.now()\n    }), {\n      success: !0,\n      newBalance: o ? o.balance + e : e\n    };\n  }, \"handler\")\n}), O = q({\n  args: {\n    address: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let a = d.address.toLowerCase(), e = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first();\n    return {\n      balance: e?.balance || 0,\n      totalDeposited: e?.totalDeposited || 0,\n      totalWithdrawn: e?.totalWithdrawn || 0\n    };\n  }, \"handler\")\n}), T = C({\n  args: {\n    address: c.string(),\n    roomId: c.string(),\n    betOn: c.string(),\n    // Player address to bet on\n    amount: c.number()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let { address: a, roomId: e, betOn: n, amount: r } = d, w = a.toLowerCase(), o = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (l) => l.eq(\"address\", w)).first();\n    if (!o || o.balance < r)\n      throw new Error(\"Insufficient betting credits\");\n    await t.db.patch(o._id, {\n      balance: o.balance - r\n    });\n    let g = await t.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", w)).first(), b = n.toLowerCase(), i = await t.db.query(\"profiles\").withIndex(\"by_address\", (l) => l.eq(\"address\", b)).first();\n    return await t.db.insert(\"pokerBets\", {\n      roomId: e,\n      bettor: w,\n      bettorUsername: g?.username || \"\",\n      betOn: b,\n      betOnUsername: i?.username || \"\",\n      amount: r,\n      token: \"VBMS\",\n      status: \"active\",\n      timestamp: Date.now()\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: w,\n      type: \"bet\",\n      amount: -r,\n      roomId: e,\n      timestamp: Date.now()\n    }), {\n      success: !0,\n      newBalance: o.balance - r\n    };\n  }, \"handler\")\n}), L = C({\n  args: {\n    roomId: c.string(),\n    winnerAddress: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let { roomId: a, winnerAddress: e } = d, n = e.toLowerCase(), r = await t.db.query(\"pokerBets\").withIndex(\"by_room\", (s) => s.eq(\"roomId\", a)).filter((s) => s.eq(s.field(\"status\"), \"active\")).collect();\n    if (r.length === 0)\n      return {\n        success: !0,\n        betsResolved: 0,\n        totalPool: 0,\n        totalPaidOut: 0,\n        houseFee: 0\n      };\n    let w = r.reduce((s, m) => s + m.amount, 0), o = w * 0.05, g = w - o, b = r.filter((s) => s.betOn.toLowerCase() === n), i = r.filter((s) => s.betOn.toLowerCase() !== n), l = b.reduce((s, m) => s + m.amount, 0), _ = 0;\n    for (let s of b) {\n      let m = l > 0 ? s.amount / l * g : 0;\n      _ += m;\n      let f = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (y) => y.eq(\"address\", s.bettor)).first(), p = f?.balance || 0, u = Math.floor(m) + p;\n      if (await t.db.patch(s._id, {\n        status: \"won\",\n        payout: Math.floor(m),\n        resolvedAt: Date.now()\n      }), f && await t.db.patch(f._id, {\n        balance: 0\n      }), u > 0) {\n        let y = await t.db.query(\"profiles\").withIndex(\"by_address\", (B) => B.eq(\"address\", s.bettor)).first();\n        if (y) {\n          let B = y.coins || 0;\n          await t.db.patch(y._id, {\n            coins: B + u,\n            lifetimeEarned: (y.lifetimeEarned || 0) + u,\n            lastUpdated: Date.now()\n          }), await t.db.insert(\"coinTransactions\", {\n            address: s.bettor,\n            amount: u,\n            type: \"earn\",\n            source: \"betting_win\",\n            description: \"Betting winnings\",\n            timestamp: Date.now(),\n            balanceBefore: B,\n            balanceAfter: B + u\n          });\n        }\n      }\n      await t.db.insert(\"bettingTransactions\", {\n        address: s.bettor,\n        type: \"win\",\n        amount: u,\n        roomId: a,\n        timestamp: Date.now()\n      });\n    }\n    for (let s of i) {\n      let m = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (p) => p.eq(\"address\", s.bettor)).first(), f = m?.balance || 0;\n      if (await t.db.patch(s._id, {\n        status: \"lost\",\n        resolvedAt: Date.now()\n      }), m && await t.db.patch(m._id, {\n        balance: 0\n      }), f > 0) {\n        let p = await t.db.query(\"profiles\").withIndex(\"by_address\", (u) => u.eq(\"address\", s.bettor)).first();\n        if (p) {\n          let u = p.coins || 0;\n          await t.db.patch(p._id, {\n            coins: u + f,\n            lifetimeEarned: (p.lifetimeEarned || 0) + f,\n            lastUpdated: Date.now()\n          }), await t.db.insert(\"coinTransactions\", {\n            address: s.bettor,\n            amount: f,\n            type: \"earn\",\n            source: \"betting_refund\",\n            description: \"Betting credits refund\",\n            timestamp: Date.now(),\n            balanceBefore: u,\n            balanceAfter: u + f\n          });\n        }\n      }\n      await t.db.insert(\"bettingTransactions\", {\n        address: s.bettor,\n        type: \"loss\",\n        amount: -s.amount,\n        roomId: a,\n        timestamp: Date.now()\n      });\n    }\n    return console.log(`\\u{1F3B0} Bets resolved for room ${a}:`, {\n      totalBets: r.length,\n      totalPool: w,\n      houseFee: o,\n      prizePool: g,\n      winners: b.length,\n      totalPaidOut: _\n    }), {\n      success: !0,\n      betsResolved: r.length,\n      totalPool: w,\n      totalPaidOut: Math.floor(_),\n      houseFee: Math.floor(o)\n    };\n  }, \"handler\")\n}), E = q({\n  args: {\n    roomId: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => await t.db.query(\"pokerBets\").withIndex(\"by_room\", (e) => e.eq(\"roomId\", d.roomId)).collect(), \"handler\")\n}), M = q({\n  args: {\n    address: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let a = d.address.toLowerCase();\n    return await t.db.query(\"pokerBets\").withIndex(\"by_bettor\", (n) => n.eq(\"bettor\", a)).order(\"desc\").take(50);\n  }, \"handler\")\n}), z = q({\n  args: {\n    address: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let a = d.address.toLowerCase(), e = await t.db.query(\"pokerBets\").withIndex(\"by_bettor\", (i) => i.eq(\"bettor\", a)).collect(), n = e.filter((i) => i.status === \"won\"), r = e.filter((i) => i.status === \"lost\"), w = e.filter((i) => i.status === \"active\"), o = e.reduce((i, l) => i + l.amount, 0), g = n.reduce((i, l) => i + (l.payout || 0), 0), b = r.reduce((i, l) => i + l.amount, 0);\n    return {\n      totalBets: e.length,\n      wonBets: n.length,\n      lostBets: r.length,\n      activeBets: w.length,\n      totalWagered: o,\n      totalWinnings: g,\n      totalLosses: b,\n      netProfit: g - b - o,\n      winRate: e.length > 0 ? n.length / (n.length + r.length) * 100 : 0\n    };\n  }, \"handler\")\n}), P = C({\n  args: {\n    address: c.string()\n  },\n  handler: /* @__PURE__ */ h(async (t, d) => {\n    let a = d.address.toLowerCase(), e = await t.db.query(\"bettingCredits\").withIndex(\"by_address\", (n) => n.eq(\"address\", a)).first();\n    return e ? {\n      success: !1,\n      message: \"You already have betting credits\",\n      balance: e.balance\n    } : (await t.db.insert(\"bettingCredits\", {\n      address: a,\n      balance: 100,\n      totalDeposited: 0,\n      totalWithdrawn: 0,\n      lastDeposit: Date.now()\n    }), await t.db.insert(\"bettingTransactions\", {\n      address: a,\n      type: \"deposit\",\n      amount: 100,\n      timestamp: Date.now()\n    }), console.log(`\\u{1F381} Free starter credits claimed: ${a}`), {\n      success: !0,\n      message: \"100 free betting credits claimed!\",\n      balance: 100\n    });\n  }, \"handler\")\n});\nexport {\n  A as addBettingCredits,\n  P as claimStarterCredits,\n  O as getBettingCredits,\n  z as getBettingStats,\n  M as getMyBets,\n  E as getRoomBets,\n  T as placeBetWithCredits,\n  L as resolveBets\n};\n//# sourceMappingURL=bettingCredits.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/bettingCredits.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"MAX_BETTING_CREDITS\", \"addBettingCredits\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"address\", \"amount\", \"txHash\", \"normalizedAddress\", \"q\", \"credits\", \"currentBalance\", \"getBettingCredits\", \"query\", \"placeBetWithCredits\", \"roomId\", \"betOn\", \"bettorProfile\", \"betOnNormalized\", \"betOnProfile\", \"resolveBets\", \"winnerAddress\", \"normalizedWinner\", \"bets\", \"totalPool\", \"sum\", \"bet\", \"houseFee\", \"prizePool\", \"winningBets\", \"b\", \"losingBets\", \"totalOnWinner\", \"totalPaidOut\", \"payout\", \"remainingCredits\", \"totalToInbox\", \"profile\", \"getRoomBets\", \"getMyBets\", \"getBettingStats\", \"wonBets\", \"lostBets\", \"activeBets\", \"totalWagered\", \"totalWinnings\", \"totalLosses\", \"claimStarterCredits\", \"existing\"]\n}\n"},{"path":"blacklist.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g,\n  h,\n  i,\n  j,\n  k,\n  l\n} from \"./_deps/55EWY3YS.js\";\nimport \"./_deps/HHLKWD3J.js\";\nimport \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  a as EXPLOITER_BLACKLIST,\n  i as adminRemoveBlacklistedDefenseDecks,\n  d as checkBan,\n  f as checkBlacklist,\n  c as getBlacklistInfo,\n  k as getExploiterShameCounts,\n  e as getShameList,\n  j as getShameStatus,\n  b as isBlacklisted,\n  h as removeBlacklistedDefenseDecks,\n  g as resetExploiterBalances,\n  l as shameExploiter\n};\n//# sourceMappingURL=blacklist.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"_deps/55EWY3YS.js","source":"import {\n  a as g\n} from \"./HHLKWD3J.js\";\nimport {\n  a as r,\n  c as y,\n  d as S\n} from \"./3SBKGJDS.js\";\nimport {\n  h as m\n} from \"./34SVKERO.js\";\nimport {\n  a as o\n} from \"./5B5TEMMX.js\";\n\n// convex/blacklist.ts\nvar t = {\n  // ===== EXPLOIT #1: Race Condition (Dec 10-12, 2025) =====\n  \"0x0395df57f73ae2029fc27a152cd87070bcfbd4a4\": { username: \"faqih\", fid: 1063904, amountStolen: 1283500, claims: 156 },\n  \"0xbb367d00000f5e37ac702aab769725c299be2fc3\": { username: \"aliselalujp\", fid: 272115, amountStolen: 1096804, claims: 128 },\n  \"0x0e14598940443b91d097b5fd6a89b5808fe35a6b\": { username: \"fvgf\", fid: 1328239, amountStolen: 1094400, claims: 132 },\n  \"0x0230cf1cf5bf2537eb385772ff72edd5db45320d\": { username: \"ndmcm\", fid: 1129881, amountStolen: 1094400, claims: 132 },\n  \"0x9ab292251cfb32b8f405ae43a9851aba61696ded\": { username: \"ral\", fid: 1276961, amountStolen: 1094400, claims: 132 },\n  \"0xd4c3afc6adce7622400759d5194e5497b162e39d\": { username: \"fransiska\", fid: 1156056, amountStolen: 1090100, claims: 124 },\n  \"0xa43ae3956ecb0ce00c69576153a34db42d265cc6\": { username: \"jessica\", fid: 520832, amountStolen: 993303, claims: 114 },\n  \"0x04c6d801f529b8d4f118edb2722d5986d25a6ebf\": { username: \"khajoel\", fid: 528311, amountStolen: 991800, claims: 114 },\n  \"0xff793f745cb0f1131f0614bf54f4c4310f33f0ce\": { username: \"azwar\", fid: 544479, amountStolen: 991800, claims: 114 },\n  \"0x4ab24dac98c86778e2c837e5fa37ec5a2fdbffc0\": { username: \"uenxnx\", fid: 1322032, amountStolen: 803900, claims: 97 },\n  \"0xf73e59d03d45a227e5a37aace702599c15d7e64d\": { username: \"rapoer\", fid: 1168341, amountStolen: 455900, claims: 47 },\n  \"0xc85a10e41fdea999556f8779ea83e6cd1c5d0ded\": { username: \"desri\", fid: 518884, amountStolen: 303400, claims: 37 },\n  \"0x0f6cfb4f54fec1deca1f43f9c0294ff945b16eb9\": { username: \"venombaseeth\", fid: 308907, amountStolen: 270700, claims: 34 },\n  \"0x8cc9746c2bb68bd8f51e30ad96f67596b25b141b\": { username: \"hdhxhx\", fid: 1483990, amountStolen: 98400, claims: 12 },\n  \"0xdeb2f2f02d2d5a2be558868ca8f31440c73d3091\": { username: \"jxjsjsjxj\", fid: 1439850, amountStolen: 98400, claims: 12 },\n  \"0x2cb84569b69265eea55a8ceb361549548ca99749\": { username: \"aaggwgxgch\", fid: 1420345, amountStolen: 98400, claims: 12 },\n  \"0xcd890b0f59d7d1a98ffdf133d6b99458324e6621\": { username: \"nxnckck\", fid: 1328839, amountStolen: 98400, claims: 12 },\n  \"0xcda1b44a39cd827156334c69552d8ecdc697646f\": { username: \"hshdjxjck\", fid: 1328834, amountStolen: 98400, claims: 12 },\n  \"0x32c3446427e4481096dd96e6573aaf1fbbb9cff8\": { username: \"jsjxjxjd\", fid: 1328624, amountStolen: 98400, claims: 12 },\n  \"0xce1899674ac0b4137a5bb819e3849794a768eaf0\": { username: \"9\", fid: 1249352, amountStolen: 98400, claims: 12 },\n  \"0x0d2450ada31e8dfd414e744bc3d250280dca202e\": { username: \"komeng\", fid: 1031800, amountStolen: 95700, claims: 11 },\n  \"0x1915a871dea94e538a3c9ec671574ffdee6e7c45\": { username: \"miya\", fid: 252536, amountStolen: 95700, claims: 11 },\n  \"0x705d7d414c6d94a8d1a06aeffc7cd92882480bd9\": { username: \"wow\", fid: 443434, amountStolen: 60900, claims: 7 },\n  // ===== EXPLOIT #2: Referral Farming (Dec 21, 2025) - 86 addresses =====\n  \"0x93ab9ef9c10bdd9db53e8ec325a42118e0ac1486\": { username: \"dobronx\", fid: 0, amountStolen: 4115e3, claims: 100 },\n  \"0x94e7f886caf987a0029e37ac820982c80a13c148\": { username: \"pakhaji\", fid: 0, amountStolen: 4115e3, claims: 100 },\n  \"0x42a6b996b0547d2d3743b79dde377d98818abd32\": { username: \"yolo\", fid: 0, amountStolen: 149e4, claims: 59 },\n  \"0x844a8e4da76bd08761f36bdba1f9746d58f9480d\": { username: \"gm\", fid: 0, amountStolen: 1202500, claims: 52 },\n  \"0x1a2495bf4ed2aaf46e4834ea21d66109fa243f33\": { username: \"dbd\", fid: 0, amountStolen: 1152500, claims: 50 },\n  \"0x4a2ba466a447d6a2010f4acfa7625db3c3c7cfc9\": { username: \"tyrionn\", fid: 0, amountStolen: 925e3, claims: 46 },\n  \"0x986686aced770960fe8a55d37545ebd90102ca97\": { username: \"berly\", fid: 0, amountStolen: 832500, claims: 43 },\n  \"0x8f1af8261edae03a3680d1359228d2dac34eaec5\": { username: \"anonnux\", fid: 0, amountStolen: 79e4, claims: 52 },\n  \"0xb4909a4c636c45943c72921542ece5cd5d228cdb\": { username: \"nody69\", fid: 0, amountStolen: 75e4, claims: 40 },\n  \"0x8c84464ac8a4110285cf83d76b0c91d50ecf5fd9\": { username: \"ycbibvcyrvyb\", fid: 0, amountStolen: 75e4, claims: 45 },\n  \"0xe95dd130f8a1ac6e6c6fd8ac0dd9d14a80b3bc4c\": { username: \"jamie\", fid: 0, amountStolen: 75e4, claims: 40 },\n  \"0x4d1ef290857226044b0a9c6916ef4b624967bb12\": { username: \"gyfjiybyb\", fid: 0, amountStolen: 675e3, claims: 38 },\n  \"0xc48e66a008cc7195c048d8b3a95bc48f96c26fd2\": { username: \"basreng\", fid: 0, amountStolen: 675e3, claims: 38 },\n  \"0x8dcfeaba1109ab99d11069c33c8e20bfd64a3ced\": { username: \"ofkdbd\", fid: 0, amountStolen: 632500, claims: 37 },\n  \"0xbcfbc3e9d1eac6684bc92d9ab6d117bf1c83675f\": { username: \"xenna\", fid: 0, amountStolen: 632500, claims: 37 },\n  \"0xf494e397fd54efea84f39b51df06811b1657c373\": { username: \"raees18\", fid: 0, amountStolen: 632500, claims: 37 },\n  \"0x03bf270d1c8429a0b378410c0ca9a07ca258cf79\": { username: \"rendy\", fid: 0, amountStolen: 592500, claims: 35 },\n  \"0x2e4078e117fc3cf837042f063c522d6521f8baa3\": { username: \"tayyeba\", fid: 0, amountStolen: 592500, claims: 35 },\n  \"0x9a50ff911c2500b494995e4419be65df3214d1d4\": { username: \"basdabonezzz\", fid: 0, amountStolen: 592500, claims: 35 },\n  \"0x72fe79e122f447a3ba3d600d33cb74e5e01f2649\": { username: \"tkjfjf\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x92deaf8a0d953cdd64df5232939ab04ab5699604\": { username: \"bdbs\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0xa24f8ca04e013911c4af840822119836f1624050\": { username: \"boli\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x5dfc840a696e207ea58f8c87be8fa808aaab366d\": { username: \"raa\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x6e3b59af52ce6f21fdb29ca2f730331f13a1952a\": { username: \"foom\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x4c7c8691b50dd0f070c25165b6ae839c8bcf3ee9\": { username: \"xennaberryl\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x2b0e2df099eee131becf3f4549a87944227c64e9\": { username: \"bdbsvdvs\", fid: 0, amountStolen: 555e3, claims: 37 },\n  \"0x79189269b91c91d3db41d33e3c266f4b704230b0\": { username: \"tsaqieff\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x5678fb8b977d85a499b3d979fad7f38282d1441d\": { username: \"irurh\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0xfc84fc61ef5cc8677118a56f9c1b155fe3db97ea\": { username: \"ltot\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x27471fb793704bfa67e00e357258c40880b2d9d5\": { username: \"bsbsbsur\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0xf5fa00bc2ad069b8d1e06770ee640b3f53b73e4d\": { username: \"oyykbt\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0xc16f0b36e296d4fa710a1cde7a7cc73033b45875\": { username: \"vavsvs\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0xe98d89c1c63ca79f75260fb48003aad4a63ff303\": { username: \"bsbshs\", fid: 0, amountStolen: 555e3, claims: 34 },\n  \"0x7ebc13e06ad0e52ec74c58aa2cc8eebf43e1cd23\": { username: \"pyynf\", fid: 0, amountStolen: 555e3, claims: 38 },\n  \"0x3b2848c24046708b86bea8f86a69fbd942ebcf3e\": { username: \"tare\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0x7de544a076e163a8050d4b7cd0d67464836b54e9\": { username: \"haji\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0xbb3d7721ab44d5a2e4d509d0223d77581d18911b\": { username: \"kulay\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0xcbf6e8efc0720c7fd99bce14b7fa5578af75a870\": { username: \"soft\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0x9a9eaa9c7569ac36087b9685c989aeb5ae89ea8a\": { username: \"uma\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x588dcd65f44572f3e5ce323b4570e30025da755a\": { username: \"omaga\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x987d2f1cf8ea90a75ad11851ad356380124eda4c\": { username: \"berryl\", fid: 0, amountStolen: 52e4, claims: 34 },\n  \"0x9d56d4e3ff49ccca7e0f9590c64ffd262e8c83c0\": { username: \"bebehd\", fid: 0, amountStolen: 52e4, claims: 35 },\n  \"0x8dd19c3f844095ca321a10f6d95d621f6bd26ba3\": { username: \"haha\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0xe9cf12695d5613143f5c90f98dec50299648cf91\": { username: \"gilame\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0xd68b474126ab6042391db26cdf86e6a4da12ce36\": { username: \"bsbs\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x826acbaf69cb9878fb1188e07558908285f556ae\": { username: \"bankrbot\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x6216b24345b8ad3b8fbcaf5c37262b07781a29ef\": { username: \"khaleed\", fid: 0, amountStolen: 52e4, claims: 33 },\n  \"0x17b0e93e326f5221fad0b9f8f873a40303a3565a\": { username: \"jonsnow\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x067a3c235b8c7f2127c5ea504ab253ac7bd3ab18\": { username: \"kim\", fid: 0, amountStolen: 52e4, claims: 32 },\n  \"0x5c51fb6fb7dbd99aa0c3ff05b6b33cd1fcd0e1c0\": { username: \"haruto\", fid: 0, amountStolen: 457500, claims: 30 },\n  \"0x40bc7906e5dd887d0df7a04c125b8ee99ffb999b\": { username: \"renz420\", fid: 0, amountStolen: 422500, claims: 29 },\n  \"0x34d1163f8f3d44c38bacbb6a8c86acb62cd7e4fb\": { username: \"mexxeth\", fid: 0, amountStolen: 39e4, claims: 42 },\n  \"0xc1fc1b3c4818ba8d93b1ecfe3363c967d44efe6c\": { username: \"ombray\", fid: 0, amountStolen: 322500, claims: 23 },\n  \"0x0d8c3bdc2ed9e10668ec802cd704e724376158fc\": { username: \"gunvir\", fid: 0, amountStolen: 322500, claims: 25 },\n  \"0xb5387885faa8194b59837549b67ad6fe97697dcb\": { username: \"qowhec\", fid: 0, amountStolen: 322500, claims: 34 },\n  \"0xbde56569fbdce28d41291b46ca4f028e38f99253\": { username: \"pythvsvs\", fid: 0, amountStolen: 27e4, claims: 34 },\n  \"0xa813827e94fe2b454eda32659c80bf36d6b0ae74\": { username: \"yeowheidh\", fid: 0, amountStolen: 192500, claims: 17 },\n  \"0xf61738769e634185320e5dad9666cbb2dd065c32\": { username: \"clode\", fid: 0, amountStolen: 125e3, claims: 13 },\n  \"0xc4bf1e049382d321cbbed969a9204729709eba2f\": { username: \"bcbxhdud\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x324c6c79d03220912261ca5c386446090f6bdc4c\": { username: \"dimes\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xd32dde19b55d0c632cd304c730ef5f3417969424\": { username: \"sabarud\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xd9b2247601de128197000f38c930826bdc62fa4c\": { username: \"hrvssv\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xdff23fcd7af0f1fbb918b47d59c14479040dcc9a\": { username: \"bbvv\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x125197f8aa760f88172f436b566ded5a47d74c7f\": { username: \"moxiee1\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xaef2bf99f130643e81326f8dac7d7ab766c8bdc5\": { username: \"raes2\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xa2c94b5516eaad532767faaec8a66072b98420fc\": { username: \"jrbdbx\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x6d1c81460fa07ca4f394b0071aca07826139ac62\": { username: \"bevsvs\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x192de512fd906d4dc2b2fba88efef5c6964060dd\": { username: \"yegevs\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x54e4e67954cbcec69e1e6b1c14ddba2b15eb837e\": { username: \"poytr\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x804dae25c43e679ff852b3fd8a626d3f190862d3\": { username: \"uevsvs\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xb6f5270216adde7896b4a026af92dae9bf0a1b6f\": { username: \"hrrgvee\", fid: 0, amountStolen: 107500, claims: 12 },\n  \"0x27a9deac0fd33059251a29217c6f558fa0460f0e\": { username: \"bsbsvawjd\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x68fba4da5b56b5a72f80d2e737e64d636fb4f3b0\": { username: \"rose\", fid: 0, amountStolen: 107500, claims: 12 },\n  \"0xf147fedadcf61b49d9e71e0c747fdc1b67cc78d1\": { username: \"vdvsvs\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x05414727a5ad7dbef2cc8bcc1548424803d87e27\": { username: \"ulane\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0xa45a920f28725a48d8efece069182f72e804880a\": { username: \"prhevsbz\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x04016e6017b45eb96bbdd045225458e90315f5bf\": { username: \"gesvvsvw\", fid: 0, amountStolen: 107500, claims: 11 },\n  \"0x5072d874d43f3b35ba830e45daab1cc3f6fb462c\": { username: \"nius\", fid: 0, amountStolen: 107500, claims: 12 },\n  \"0xc7afb4a1a2f821ad160c29e7370cd73824ec5b58\": { username: \"hanzwwe\", fid: 0, amountStolen: 92500, claims: 13 },\n  \"0x14e9915cc24eafa11c304a6d53eb142fc0dee55a\": { username: \"fasheng\", fid: 0, amountStolen: 92500, claims: 17 },\n  \"0x384636c26ea99d347196dd8339bab542e15a44da\": { username: \"kebejj\", fid: 0, amountStolen: 35e3, claims: 5 },\n  \"0xb8d364933c26a82b46e9533742fe15c20264881a\": { username: \"ansatt\", fid: 0, amountStolen: 35e3, claims: 5 },\n  \"0x3ae4fa9293265527f9c8d76b83910eaaba20f1cb\": { username: \"salmane\", fid: 0, amountStolen: 22500, claims: 4 }\n};\nfunction w(n) {\n  return n.toLowerCase() in t;\n}\no(w, \"isBlacklisted\");\nfunction k(n) {\n  return t[n.toLowerCase()] || null;\n}\no(k, \"getBlacklistInfo\");\nvar E = r({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ o(async (n, { address: s }) => {\n    if (!s) return { isBanned: !1 };\n    let d = s.toLowerCase(), e = t[d];\n    return e ? {\n      isBanned: !0,\n      username: e.username,\n      amountStolen: e.amountStolen,\n      reason: `Your account was permanently banned for exploiting ${e.amountStolen.toLocaleString()} VBMS in December 2025.`,\n      exploitDate: \"December 10-12, 2025\"\n    } : { isBanned: !1 };\n  }, \"handler\")\n}), A = r({\n  handler: /* @__PURE__ */ o(async () => {\n    let n = Object.entries(t).map(([e, a]) => ({\n      address: e,\n      ...a\n    })).sort((e, a) => a.amountStolen - e.amountStolen), s = n.reduce((e, a) => e + a.amountStolen, 0), d = n.reduce((e, a) => e + a.claims, 0);\n    return {\n      exploiters: n,\n      summary: {\n        totalExploiters: n.length,\n        totalStolen: s,\n        totalClaims: d,\n        exploitDate: \"December 10-12, 2025\",\n        exploitType: \"Race Condition - Multiple Signature Generation\"\n      }\n    };\n  }, \"handler\")\n}), C = r({\n  args: { address: m.string() },\n  handler: /* @__PURE__ */ o(async (n, { address: s }) => {\n    let d = s.toLowerCase(), e = t[d];\n    return e ? {\n      isBlacklisted: !0,\n      reason: \"VBMS Exploit - December 2025\",\n      ...e\n    } : {\n      isBlacklisted: !1\n    };\n  }, \"handler\")\n}), B = S({\n  handler: /* @__PURE__ */ o(async (n) => {\n    let s = 0;\n    for (let d of Object.keys(t)) {\n      let e = await n.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", d)).first();\n      e && (e.coins || 0) > 0 && (await n.db.patch(e._id, {\n        coins: 0,\n        coinsInbox: 0\n      }), s++, console.log(`\\u{1F6AB} Reset balance for exploiter: ${d} (${t[d].username})`));\n    }\n    return { resetCount: s };\n  }, \"handler\")\n}), q = S({\n  handler: /* @__PURE__ */ o(async (n) => {\n    let s = 0, d = [];\n    for (let e of Object.keys(t)) {\n      let a = await n.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", e)).first();\n      if (a && a.defenseDeck && a.defenseDeck.length > 0) {\n        let c = a.defenseDeck.length;\n        await n.db.patch(a._id, {\n          defenseDeck: [],\n          // Clear defense deck\n          hasFullDefenseDeck: !1\n          // ðŸš€ BANDWIDTH FIX\n        }), s++, d.push({\n          address: e,\n          username: t[e].username,\n          deckSize: c\n        }), console.log(`\\u{1F6AB} Removed defense deck from exploiter: ${e} (${t[e].username}) - had ${c} cards`);\n      }\n    }\n    return { removedCount: s, removed: d };\n  }, \"handler\")\n}), z = S({\n  args: {},\n  handler: /* @__PURE__ */ o(async (n) => {\n    let s = 0, d = [];\n    for (let e of Object.keys(t)) {\n      let a = await n.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", e)).first();\n      if (a && a.defenseDeck && a.defenseDeck.length > 0) {\n        let c = a.defenseDeck.length;\n        await n.db.patch(a._id, {\n          defenseDeck: [],\n          // Clear defense deck\n          hasFullDefenseDeck: !1\n          // ðŸš€ BANDWIDTH FIX\n        }), s++, d.push({\n          address: e,\n          username: t[e].username,\n          deckSize: c\n        }), console.log(`\\u{1F6AB} Removed defense deck from exploiter: ${e} (${t[e].username}) - had ${c} cards`);\n      }\n    }\n    return { removedCount: s, removed: d };\n  }, \"handler\")\n}), f = 100, u = 10, _ = r({\n  args: { playerAddress: m.string() },\n  handler: /* @__PURE__ */ o(async (n, { playerAddress: s }) => {\n    let d = s.toLowerCase(), e = await n.db.query(\"shameClicks\").withIndex(\"by_shamer\", (x) => x.eq(\"shamerAddress\", d)).take(20), a = e.length, c = Math.max(0, u - a), i = e.map((x) => x.exploiterAddress);\n    return {\n      totalShamesGiven: a,\n      remainingShames: c,\n      shamedExploiters: i,\n      maxShames: u,\n      rewardPerShame: f\n    };\n  }, \"handler\")\n}), $ = r({\n  handler: /* @__PURE__ */ o(async (n) => {\n    let s = await n.db.query(\"shameClicks\").order(\"desc\").take(1e3), d = {};\n    for (let e of s) {\n      let a = e.exploiterAddress;\n      d[a] = (d[a] || 0) + 1;\n    }\n    return d;\n  }, \"handler\")\n}), L = y({\n  args: {\n    playerAddress: m.string(),\n    exploiterAddress: m.string()\n  },\n  handler: /* @__PURE__ */ o(async (n, { playerAddress: s, exploiterAddress: d }) => {\n    let e = s.toLowerCase(), a = d.toLowerCase();\n    if (!w(a))\n      throw new Error(\"This address is not on the shame list\");\n    let c = await n.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", e)).first();\n    if (!c)\n      throw new Error(\"Player profile not found\");\n    if (w(e))\n      throw new Error(\"Exploiters cannot participate in shaming\");\n    let i = await n.db.query(\"shameClicks\").withIndex(\"by_shamer\", (b) => b.eq(\"shamerAddress\", e)).take(20);\n    if (i.length >= u)\n      throw new Error(`You've reached the maximum of ${u} shames`);\n    if (i.find((b) => b.exploiterAddress === a))\n      throw new Error(\"You've already shamed this exploiter\");\n    await n.db.insert(\"shameClicks\", {\n      shamerAddress: e,\n      exploiterAddress: a,\n      timestamp: Date.now()\n    });\n    let h = c.coins || 0, l = h + f;\n    await n.db.patch(c._id, {\n      coins: l,\n      lifetimeEarned: (c.lifetimeEarned || 0) + f\n    }), await n.db.insert(\"coinTransactions\", {\n      address: e,\n      amount: f,\n      type: \"earn\",\n      source: \"shame_reward\",\n      description: `Shame reward for reporting ${a.slice(0, 8)}...`,\n      timestamp: Date.now(),\n      balanceBefore: h,\n      balanceAfter: l\n    });\n    let p = k(a);\n    return await g(n, {\n      address: e,\n      type: \"bonus\",\n      amount: f,\n      source: \"shame\",\n      description: `Shamed exploiter @${p?.username || \"unknown\"}`,\n      balanceBefore: h,\n      balanceAfter: l\n    }), console.log(`\\u{1F514} ${e} shamed @${p?.username}! +${f} VBMS. New balance: ${l}`), {\n      success: !0,\n      reward: f,\n      newBalance: l,\n      remainingShames: u - i.length - 1,\n      exploiterUsername: p?.username\n    };\n  }, \"handler\")\n});\n\nexport {\n  t as a,\n  w as b,\n  k as c,\n  E as d,\n  A as e,\n  C as f,\n  B as g,\n  q as h,\n  z as i,\n  _ as j,\n  $ as k,\n  L as l\n};\n//# sourceMappingURL=55EWY3YS.js.map\n","environment":"isolate"},{"path":"blockchainVerify.js","source":"import {\n  a,\n  b,\n  c\n} from \"./_deps/XHHFSPHN.js\";\nimport \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  c as isFreeOperationHash,\n  b as isValidTxHash,\n  a as verifyTransaction\n};\n//# sourceMappingURL=blockchainVerify.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"_deps/XHHFSPHN.js","source":"import {\n  f as h\n} from \"./3SBKGJDS.js\";\nimport {\n  h as c\n} from \"./34SVKERO.js\";\nimport {\n  a as p\n} from \"./5B5TEMMX.js\";\n\n// convex/blockchainVerify.ts\nvar y = {\n  VBMSToken: \"0xb03439567cd22f278b21e1ffcdfb8e1696763827\",\n  VBMSPoolTroll: \"0x062b914668f3fd35c3ae02e699cb82e1cf4be18b\"\n}, A = \"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\", B = h({\n  args: {\n    txHash: c.string(),\n    expectedFrom: c.string(),\n    expectedTo: c.string(),\n    expectedAmountWei: c.string(),\n    // BigInt as string\n    isERC20: c.optional(c.boolean())\n  },\n  handler: /* @__PURE__ */ p(async (n, m) => {\n    let { txHash: l, expectedFrom: u, expectedTo: d, expectedAmountWei: i, isERC20: T } = m, a = process.env.BASESCAN_API_KEY;\n    if (!a) {\n      return console.error(\"[BlockchainVerify] BASESCAN_API_KEY not configured\"), { isValid: !1, error: \"Blockchain verification not configured\" };\n      return console.warn(\"[BlockchainVerify] Skipping verification in development\"), { isValid: !0 };\n    }\n    try {\n      let s = `https://api.basescan.org/api?module=proxy&action=eth_getTransactionByHash&txhash=${l}&apikey=${a}`, g = await (await fetch(s)).json();\n      if (!g.result || g.result === null)\n        return { isValid: !1, error: \"Transaction not found\" };\n      let t = g.result;\n      if (!t.blockNumber)\n        return { isValid: !1, error: \"Transaction not confirmed yet\" };\n      if (T)\n        return await b(l, u, d, i, a);\n      let r = t.from?.toLowerCase(), o = t.to?.toLowerCase(), e = BigInt(t.value || \"0\"), f = BigInt(i);\n      return r !== u.toLowerCase() ? {\n        isValid: !1,\n        error: `From address mismatch: expected ${u}, got ${r}`,\n        actualFrom: r,\n        actualTo: o,\n        actualAmount: e.toString()\n      } : o !== d.toLowerCase() ? {\n        isValid: !1,\n        error: `To address mismatch: expected ${d}, got ${o}`,\n        actualFrom: r,\n        actualTo: o,\n        actualAmount: e.toString()\n      } : e < f ? {\n        isValid: !1,\n        error: `Amount mismatch: expected ${f}, got ${e}`,\n        actualFrom: r,\n        actualTo: o,\n        actualAmount: e.toString()\n      } : (console.log(`[BlockchainVerify] \\u2705 TX ${l} verified: ${r} \\u2192 ${o}, ${e} wei`), {\n        isValid: !0,\n        actualFrom: r,\n        actualTo: o,\n        actualAmount: e.toString()\n      });\n    } catch (s) {\n      return console.error(`[BlockchainVerify] Error verifying TX ${l}:`, s), { isValid: !1, error: s.message };\n    }\n  }, \"handler\")\n});\nasync function b(n, m, l, u, d) {\n  try {\n    let i = `https://api.basescan.org/api?module=proxy&action=eth_getTransactionReceipt&txhash=${n}&apikey=${d}`, a = await (await fetch(i)).json();\n    if (!a.result || a.result === null)\n      return { isValid: !1, error: \"Transaction receipt not found\" };\n    let s = a.result;\n    if (s.status !== \"0x1\")\n      return { isValid: !1, error: \"Transaction failed\" };\n    let V = s.logs || [], g = BigInt(u);\n    for (let t of V) {\n      if (t.address?.toLowerCase() !== y.VBMSToken.toLowerCase() || t.topics?.[0] !== A)\n        continue;\n      let r = t.topics?.[1], o = t.topics?.[2];\n      if (!r || !o) continue;\n      let e = \"0x\" + r.slice(26).toLowerCase(), f = \"0x\" + o.slice(26).toLowerCase(), x = BigInt(t.data);\n      if (e === m.toLowerCase() && f === l.toLowerCase() && !(x < g))\n        return console.log(`[BlockchainVerify] \\u2705 ERC20 TX ${n} verified: ${e} \\u2192 ${f}, ${x} VBMS`), {\n          isValid: !0,\n          actualFrom: e,\n          actualTo: f,\n          actualAmount: x.toString()\n        };\n    }\n    return {\n      isValid: !1,\n      error: \"No matching VBMS transfer found in transaction logs\"\n    };\n  } catch (i) {\n    return console.error(`[BlockchainVerify] Error verifying ERC20 TX ${n}:`, i), { isValid: !1, error: i.message };\n  }\n}\np(b, \"verifyERC20Transfer\");\nfunction w(n) {\n  return /^0x[a-fA-F0-9]{64}$/.test(n);\n}\np(w, \"isValidTxHash\");\nfunction R(n) {\n  return n === \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n}\np(R, \"isFreeOperationHash\");\n\nexport {\n  B as a,\n  w as b,\n  R as c\n};\n//# sourceMappingURL=XHHFSPHN.js.map\n","environment":"isolate"},{"path":"cardPacks.js","source":"import {\n  a as P\n} from \"./_deps/HHLKWD3J.js\";\nimport {\n  h as C\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  a as b,\n  b as q,\n  c as m,\n  d as g\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as i\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as l\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/cardPacks.ts\nfunction A() {\n  let a = new Uint32Array(1);\n  return crypto.getRandomValues(a), a[0] / 4294967296;\n}\nl(A, \"cryptoRandomFloat\");\nfunction _(a) {\n  let e = new Uint32Array(1);\n  return crypto.getRandomValues(e), e[0] % a;\n}\nl(_, \"cryptoRandomInt\");\nvar w = {\n  starter: {\n    name: \"Starter Pack\",\n    description: \"Welcome pack for new players\",\n    cards: 3,\n    price: 0,\n    // Free\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  basic: {\n    name: \"Basic Pack\",\n    description: \"1 card per pack\",\n    cards: 1,\n    price: 1e3,\n    // 1k coins = 1 card\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  premium: {\n    name: \"Premium Pack\",\n    description: \"Better odds for rare and epic\",\n    cards: 5,\n    price: 1e4,\n    // 10k coins - 5x mais caro\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  elite: {\n    name: \"Elite Pack\",\n    description: \"Best odds - Guaranteed rare or better\",\n    cards: 5,\n    price: 1e5,\n    // 100k coins - EQUIVALENTE A 1 PACK NFT REAL!\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  boosted: {\n    name: \"Luck Boost Pack\",\n    description: \"1 card with better odds\",\n    cards: 1,\n    price: 5e3,\n    // 5x basic price for better odds on 1 card\n    // NERFED: ROI ~0.68x (was 1.07x) - 82/14/3.5/0.5\n    rarityOdds: { Common: 82, Rare: 14, Epic: 3.5, Legendary: 0.5 }\n  },\n  mission: {\n    name: \"Mission Reward\",\n    description: \"Earned from completing missions\",\n    cards: 2,\n    price: 0,\n    // Earned, not bought\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  achievement: {\n    name: \"Achievement Pack\",\n    description: \"Special achievement reward\",\n    cards: 3,\n    price: 0,\n    // Earned, not bought\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  },\n  dailyFree: {\n    name: \"Daily Free Pack\",\n    description: \"Free daily shot - claim once per day!\",\n    cards: 1,\n    price: 0,\n    // FREE!\n    rarityOdds: { Common: 93, Rare: 6, Epic: 0.8, Legendary: 0.2 }\n  }\n};\nfunction I(a) {\n  let e = Object.values(a).reduce((r, t) => r + t, 0), n = A() * e;\n  for (let [r, t] of Object.entries(a))\n    if (n -= t, n <= 0) return r;\n  return \"common\";\n}\nl(I, \"rollRarity\");\nvar R = {\n  common: 3,\n  // proxy (5), (6), (7)\n  rare: 3,\n  // proxy, proxy (1), (8)\n  epic: 3,\n  // proxy (1), (2), (3)\n  legendary: 2\n  // proxy, proxy (4)\n};\nvar L = { None: 92, Standard: 7, Prize: 1 }, v = { None: 96, Standard: 3.5, Prize: 0.5 };\nvar x = { Pristine: 2, Mint: 10, \"Lightly Played\": 33, \"Moderately Played\": 35, \"Heavily Played\": 20 };\nfunction D(a, e, n) {\n  let r = {\n    Common: 5,\n    Rare: 20,\n    Epic: 80,\n    Legendary: 240,\n    Mythic: 800\n  }, t = {\n    Pristine: 1.8,\n    Mint: 1.4,\n    \"Lightly Played\": 1,\n    \"Moderately Played\": 1,\n    \"Heavily Played\": 1\n  }, o = {\n    Prize: 15,\n    Standard: 2.5,\n    None: 1\n  }, s = r[a] || 5, d = t[e] || 1, c = n && o[n] || 1, y = s * d * c * 0.5;\n  return Math.max(1, Math.round(y));\n}\nl(D, \"calculateCardPower\");\nfunction E(a, e) {\n  let n = a.toLowerCase(), r = R[n] || 1, t = _(r), s = I(e === \"boosted\" ? v : L), d = I(x), c = `${a}_${t}_${s}_${d}_${Date.now()}`, y = `/cards/${a.toLowerCase()}/`, p = {\n    common: [\"proxy (5).png\", \"proxy (6).png\", \"proxy (7).png\"],\n    rare: [\"proxy.png\", \"proxy (1).png\", \"proxy (8).png\"],\n    epic: [\"proxy (1).png\", \"proxy (2).png\", \"proxy (3).png\"],\n    legendary: [\"proxy.png\", \"proxy (4).png\"]\n  }, u = p[n]?.[t] || p[n]?.[0] || \"proxy (5).png\", f = D(a, d, s !== \"None\" ? s : void 0);\n  return {\n    cardId: c,\n    suit: a,\n    // Using rarity as identifier\n    rank: u.replace(\".png\", \"\"),\n    // Image name as rank\n    variant: \"default\",\n    rarity: a,\n    imageUrl: `${y}${encodeURIComponent(u)}`,\n    badgeType: \"FREE_CARD\",\n    foil: s !== \"None\" ? s : void 0,\n    // Only include if special\n    wear: d,\n    power: f\n    // Power calculated EXACTLY same as NFT\n  };\n}\nl(E, \"generateRandomCard\");\nvar z = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => (await a.db.query(\"cardPacks\").withIndex(\"by_address\", (r) => r.eq(\"address\", e.address.toLowerCase())).filter((r) => r.gt(r.field(\"unopened\"), 0)).take(100)).map((r) => ({\n    ...r,\n    packInfo: w[r.packType]\n  })), \"handler\")\n}), H = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async () => [\n    { type: \"basic\", ...w.basic }\n  ], \"handler\")\n}), Y = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => await a.db.query(\"cardInventory\").withIndex(\"by_address\", (r) => r.eq(\"address\", e.address.toLowerCase())).take(1e3), \"handler\")\n}), j = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = [], t = await a.db.query(\"profiles\").withIndex(\"by_address\", (s) => s.eq(\"address\", n)).first();\n    if (t?.defenseDeck)\n      for (let s of t.defenseDeck)\n        typeof s == \"object\" && s !== null && \"tokenId\" in s && s.collection === \"free\" && r.push(s.tokenId);\n    let o = await a.db.query(\"raidAttacks\").withIndex(\"by_address\", (s) => s.eq(\"address\", n)).first();\n    if (o?.deck)\n      for (let s of o.deck)\n        s.isFreeCard && s.tokenId && (r.includes(s.tokenId) || r.push(s.tokenId));\n    return r;\n  }, \"handler\")\n}), G = q({\n  args: {},\n  handler: /* @__PURE__ */ l(async (a) => {\n    let e = await a.db.query(\"cardInventory\").collect(), n = e.reduce((o, s) => o + s.quantity, 0), r = new Set(e.map((o) => o.address)).size, t = {\n      common: 0,\n      rare: 0,\n      epic: 0,\n      legendary: 0\n    };\n    return e.forEach((o) => {\n      let s = o.rarity.toLowerCase();\n      s in t && (t[s] += o.quantity);\n    }), {\n      totalCards: n,\n      uniqueCards: e.length,\n      uniquePlayers: r,\n      byRarity: t\n    };\n  }, \"handler\")\n}), W = q({\n  args: {},\n  handler: /* @__PURE__ */ l(async (a) => {\n    let e = await a.db.query(\"cardInventory\").take(20);\n    return {\n      sampleSize: e.length,\n      note: \"This is a sample. Use admin tools for full counts.\",\n      cards: e.map((n) => ({\n        id: n._id,\n        address: n.address,\n        cardId: n.cardId,\n        rarity: n.rarity,\n        imageUrl: n.imageUrl,\n        quantity: n.quantity,\n        power: n.power\n      }))\n    };\n  }, \"handler\")\n}), Q = g({\n  args: {},\n  handler: /* @__PURE__ */ l(async (a) => {\n    let e = await a.db.query(\"cardInventory\").collect(), n = 0;\n    for (let r of e) {\n      let t = r.address.toLowerCase();\n      r.address !== t && (await a.db.patch(r._id, {\n        address: t\n      }), n++);\n    }\n    return {\n      success: !0,\n      totalCards: e.length,\n      updatedCards: n,\n      message: `Normalized ${n} card addresses to lowercase!`\n    };\n  }, \"handler\")\n}), J = m({\n  args: {\n    address: i.string(),\n    packType: i.union(i.literal(\"basic\"), i.literal(\"premium\"), i.literal(\"elite\")),\n    quantity: i.number()\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = w[e.packType];\n    if (!r || r.price === 0)\n      throw new Error(\"This pack type cannot be purchased\");\n    let t = r.price * e.quantity, o = await a.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", n)).first();\n    if (!o)\n      throw new Error(\"Profile not found\");\n    let s = o.coins || 0;\n    if (s < t)\n      throw new Error(`Not enough coins. Need ${t} coins, have ${s} coins`);\n    await a.db.patch(o._id, {\n      coins: s - t,\n      lifetimeSpent: (o.lifetimeSpent || 0) + t\n    }), await a.db.insert(\"coinTransactions\", {\n      address: n,\n      amount: -t,\n      type: \"spend\",\n      source: `buy_pack_${e.packType}`,\n      description: `Bought ${e.quantity}x ${e.packType} pack`,\n      timestamp: Date.now(),\n      balanceBefore: s,\n      balanceAfter: s - t\n    });\n    let d = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (c) => c.eq(\"address\", n).eq(\"packType\", e.packType)).first();\n    return d ? await a.db.patch(d._id, {\n      unopened: d.unopened + e.quantity\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: e.packType,\n      unopened: e.quantity,\n      earnedAt: Date.now()\n    }), {\n      success: !0,\n      packsReceived: e.quantity,\n      coinsSpent: t,\n      remainingCoins: s - t\n    };\n  }, \"handler\")\n}), X = m({\n  args: {\n    address: i.string(),\n    packType: i.union(i.literal(\"basic\"), i.literal(\"premium\"), i.literal(\"elite\"), i.literal(\"boosted\")),\n    quantity: i.number(),\n    txHash: i.string(),\n    // Transaction hash for verification\n    vbmsAmount: i.optional(i.number())\n    // VBMS amount spent (from API)\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = e.packType, t = w[r];\n    if (!t || t.price === 0)\n      throw new Error(\"This pack type cannot be purchased\");\n    if (!await a.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", n)).first())\n      throw new Error(\"Profile not found\");\n    let s = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (c) => c.eq(\"address\", n).eq(\"packType\", r)).first();\n    s ? await a.db.patch(s._id, {\n      unopened: s.unopened + e.quantity\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: r,\n      unopened: e.quantity,\n      earnedAt: Date.now()\n    });\n    let d = e.vbmsAmount || t.price * e.quantity;\n    return await a.db.insert(\"coinTransactions\", {\n      address: n,\n      amount: d,\n      type: \"spend\",\n      source: `buy_pack_${r}_vbms`,\n      description: `Bought ${e.quantity}x ${r} pack with ${d.toLocaleString()} VBMS`,\n      timestamp: Date.now(),\n      balanceBefore: 0,\n      balanceAfter: 0,\n      txHash: e.txHash\n    }), console.log(`\\u{1F48E} VBMS Purchase: ${n} bought ${e.quantity}x ${e.packType} (stored as ${r}) packs (tx: ${e.txHash.slice(0, 10)}...)`), {\n      success: !0,\n      packsReceived: e.quantity,\n      txHash: e.txHash\n    };\n  }, \"handler\")\n}), Z = m({\n  args: {\n    address: i.string(),\n    packId: i.id(\"cardPacks\")\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = await a.db.get(e.packId);\n    if (!r)\n      throw new Error(\"Pack not found\");\n    if (r.address !== n)\n      throw new Error(\"Not your pack\");\n    if (r.unopened <= 0)\n      throw new Error(\"No unopened packs\");\n    let t = w[r.packType];\n    if (!t)\n      throw new Error(\"Invalid pack type\");\n    let o = [];\n    for (let s = 0; s < t.cards; s++) {\n      let d = I(t.rarityOdds), c = E(d, r.packType), y = await a.db.query(\"cardInventory\").withIndex(\"by_address\", (p) => p.eq(\"address\", n)).filter((p) => p.eq(p.field(\"cardId\"), c.cardId)).first();\n      y ? (await a.db.patch(y._id, {\n        quantity: y.quantity + 1\n      }), o.push({ ...c, isDuplicate: !0, quantity: 1 })) : (await a.db.insert(\"cardInventory\", {\n        address: n,\n        ...c,\n        quantity: 1,\n        equipped: !1,\n        obtainedAt: Date.now(),\n        sourcePackType: r.packType\n        // Track pack origin for burn value\n      }), o.push({ ...c, isDuplicate: !1, quantity: 1 }));\n    }\n    return await a.db.patch(e.packId, {\n      unopened: r.unopened - 1\n    }), {\n      success: !0,\n      cards: o,\n      packType: r.packType,\n      packsRemaining: r.unopened - 1\n    };\n  }, \"handler\")\n}), ee = m({\n  args: {\n    address: i.string(),\n    packId: i.id(\"cardPacks\")\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = await a.db.get(e.packId);\n    if (!r)\n      throw new Error(\"Pack not found\");\n    if (r.address !== n)\n      throw new Error(\"Not your pack\");\n    if (r.unopened <= 0)\n      throw new Error(\"No unopened packs\");\n    let t = w[r.packType];\n    if (!t)\n      throw new Error(\"Invalid pack type\");\n    let o = [], s = r.unopened;\n    for (let d = 0; d < s; d++)\n      for (let c = 0; c < t.cards; c++) {\n        let y = I(t.rarityOdds), p = E(y, r.packType), u = await a.db.query(\"cardInventory\").withIndex(\"by_address\", (f) => f.eq(\"address\", n)).filter((f) => f.eq(f.field(\"cardId\"), p.cardId)).first();\n        u ? (await a.db.patch(u._id, {\n          quantity: u.quantity + 1\n        }), o.push({ ...p, isDuplicate: !0, quantity: 1 })) : (await a.db.insert(\"cardInventory\", {\n          address: n,\n          ...p,\n          quantity: 1,\n          equipped: !1,\n          obtainedAt: Date.now(),\n          sourcePackType: r.packType\n          // Track pack origin for burn value\n        }), o.push({ ...p, isDuplicate: !1, quantity: 1 }));\n      }\n    return await a.db.patch(e.packId, {\n      unopened: 0\n    }), {\n      success: !0,\n      cards: o,\n      packType: r.packType,\n      packsOpened: s,\n      packsRemaining: 0\n    };\n  }, \"handler\")\n}), ae = m({\n  args: {\n    address: i.string(),\n    packType: i.string(),\n    quantity: i.number(),\n    sourceId: i.optional(i.string())\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase();\n    if (!(e.packType in w))\n      throw new Error(\"Invalid pack type\");\n    let r = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (t) => t.eq(\"address\", n).eq(\"packType\", e.packType)).first();\n    return r ? await a.db.patch(r._id, {\n      unopened: r.unopened + e.quantity\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: e.packType,\n      unopened: e.quantity,\n      sourceId: e.sourceId,\n      earnedAt: Date.now()\n    }), {\n      success: !0,\n      packsAwarded: e.quantity\n    };\n  }, \"handler\")\n}), re = m({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase();\n    return await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (t) => t.eq(\"address\", n).eq(\"packType\", \"starter\")).first() ? { success: !1, message: \"Starter pack already claimed\" } : (await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: \"starter\",\n      unopened: 1,\n      earnedAt: Date.now()\n    }), { success: !0, message: \"Starter pack awarded!\" });\n  }, \"handler\")\n}), te = m({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = Date.now(), t = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0], o = await a.db.query(\"profiles\").withIndex(\"by_address\", (d) => d.eq(\"address\", n)).first();\n    if (!o)\n      return { success: !1, message: \"Profile not found\" };\n    if (o.hasClaimedSharePack)\n      return {\n        success: !1,\n        message: \"You already claimed your FREE pack for sharing! Daily shares give tokens instead.\"\n      };\n    let s = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (d) => d.eq(\"address\", n).eq(\"packType\", \"basic\")).first();\n    return s ? await a.db.patch(s._id, {\n      unopened: s.unopened + 1\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: \"basic\",\n      unopened: 1,\n      earnedAt: r\n    }), await a.db.patch(o._id, {\n      hasClaimedSharePack: !0,\n      hasSharedProfile: !0\n    }), {\n      success: !0,\n      message: \"FREE pack awarded for sharing! Open it in the Shop. Daily shares give tokens.\"\n    };\n  }, \"handler\")\n}), ne = g({\n  args: {},\n  handler: /* @__PURE__ */ l(async (a) => {\n    let e = {\n      common: [\"proxy (5).png\", \"proxy (6).png\", \"proxy (7).png\"],\n      rare: [\"proxy.png\", \"proxy (1).png\", \"proxy (8).png\"],\n      epic: [\"proxy (1).png\", \"proxy (2).png\", \"proxy (3).png\"],\n      legendary: [\"proxy.png\", \"proxy (4).png\"]\n    }, n = await a.db.query(\"cardInventory\").collect(), r = 0, t = [];\n    for (let o of n) {\n      let s = o.rarity.toLowerCase(), d = e[s];\n      if (d && d.length > 0) {\n        let c = o.imageUrl.includes(\" \"), y = o.imageUrl.includes(\"proxy-\");\n        if (c || y) {\n          let u = _(d.length), f = d[u], k = `/cards/${s}/${encodeURIComponent(f)}`;\n          await a.db.patch(o._id, {\n            imageUrl: k\n          }), t.push(`${o.cardId}: ${o.imageUrl} -> ${k}`), r++;\n        }\n      }\n    }\n    return {\n      success: !0,\n      updatedCards: r,\n      totalCards: n.length,\n      updates: t.slice(0, 10),\n      // First 10 updates for logging\n      message: r > 0 ? `Updated ${r} cards with corrected image URLs!` : `All ${n.length} cards already have correct URLs!`\n    };\n  }, \"handler\")\n}), se = g({\n  args: { username: i.string() },\n  handler: /* @__PURE__ */ l(async (a, { username: e }) => {\n    let n = await a.db.query(\"profiles\").withIndex(\"by_username\", (d) => d.eq(\"username\", e.toLowerCase())).first();\n    if (!n)\n      return {\n        success: !1,\n        error: `Profile not found for username: ${e}`\n      };\n    let r = n.address;\n    console.log(\"\\u{1F50D} Found profile:\", { username: e, address: r });\n    let t = await a.db.query(\"cardInventory\").withIndex(\"by_address\", (d) => d.eq(\"address\", r)).collect();\n    console.log(\"\\u{1F3B4} User has\", t.length, \"cards\");\n    let o = 0;\n    for (let d of t)\n      await a.db.delete(d._id), o++;\n    console.log(\"\\u{1F5D1}\\uFE0F Deleted\", o, \"cards\");\n    let s = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (d) => d.eq(\"address\", r).eq(\"packType\", \"basic\")).first();\n    return s ? (await a.db.patch(s._id, {\n      unopened: s.unopened + 1\n    }), console.log(\"\\u{1F381} Added 1 pack to existing pack (total:\", s.unopened + 1, \")\")) : (await a.db.insert(\"cardPacks\", {\n      address: r,\n      packType: \"basic\",\n      unopened: 1,\n      sourceId: \"reset_compensation\",\n      earnedAt: Date.now()\n    }), console.log(\"\\u{1F381} Created new pack with 1 unopened\")), {\n      success: !0,\n      username: e,\n      address: r,\n      cardsDeleted: o,\n      packGiven: !0\n    };\n  }, \"handler\")\n}), B = {\n  Common: 0.2,\n  // 20% of pack price\n  Rare: 1.1,\n  // 110% of pack price\n  Epic: 4,\n  // 4x pack price\n  Legendary: 40\n  // 40x pack price\n}, F = {\n  Prize: 5,\n  // 5x burn value for Prize foil (nerfed from 10x)\n  Standard: 1.5,\n  // 1.5x burn value for Standard foil (nerfed from 2x)\n  None: 1\n  // Normal burn value\n}, T = 1e3;\nfunction U(a) {\n  if (!a) return T;\n  let e = w[a];\n  return e && e.price > 0 ? e.price : T;\n}\nl(U, \"getPackPrice\");\nvar M = {\n  Common: 200,\n  // 20% of basic pack price (1000)\n  Rare: 1100,\n  // 110% of basic pack price\n  Epic: 4e3,\n  // 4x basic pack price\n  Legendary: 4e4\n  // 40x basic pack price\n};\nfunction S(a, e, n) {\n  let r = U(n), t = B[a] || 0.2, o = e && e !== \"None\" && F[e] || 1;\n  return Math.round(r * t * o);\n}\nl(S, \"calculateBurnValue\");\nvar oe = m({\n  args: {\n    address: i.string(),\n    cardId: i.id(\"cardInventory\")\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = await a.db.get(e.cardId);\n    if (!r)\n      throw new Error(\"Card not found\");\n    if (r.address !== n)\n      throw new Error(\"Not your card\");\n    let t = S(r.rarity, r.foil, r.sourcePackType), o = await a.db.query(\"profiles\").withIndex(\"by_address\", (c) => c.eq(\"address\", n)).first();\n    if (!o)\n      throw new Error(\"Profile not found\");\n    r.quantity > 1 ? await a.db.patch(e.cardId, {\n      quantity: r.quantity - 1\n    }) : await a.db.delete(e.cardId);\n    let s = o.coins || 0, d = o.lifetimeEarned || 0;\n    return await a.db.patch(o._id, {\n      coins: s + t,\n      lifetimeEarned: d + t\n    }), await P(a, {\n      address: n,\n      type: \"earn\",\n      amount: t,\n      source: \"burn_card\",\n      description: `Burned ${r.rarity} card for ${t} TESTVBMS`,\n      balanceBefore: s,\n      balanceAfter: s + t\n    }), await C(\n      a,\n      n,\n      \"earn\",\n      t,\n      s,\n      s + t,\n      \"burn_card\",\n      e.cardId.toString(),\n      { reason: `Burned ${r.rarity} card` }\n    ), console.log(`\\u{1F525} BURN: ${n} burned ${r.rarity} card for ${t} VBMS`), {\n      success: !0,\n      burnedRarity: r.rarity,\n      vbmsReceived: t,\n      newBalance: s + t\n    };\n  }, \"handler\")\n}), de = m({\n  args: {\n    address: i.string(),\n    cardIds: i.array(i.id(\"cardInventory\"))\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase();\n    if (e.cardIds.length === 0)\n      throw new Error(\"No cards selected\");\n    if (e.cardIds.length > 50)\n      throw new Error(\"Maximum 50 cards per burn\");\n    let r = await a.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", n)).first();\n    if (!r)\n      throw new Error(\"Profile not found\");\n    let t = 0, o = [], s = {};\n    for (let p of e.cardIds) {\n      let u = await a.db.get(p);\n      if (!u || u.address !== n) continue;\n      let f = S(u.rarity, u.foil, u.sourcePackType);\n      t += f;\n      let k = u.foil && u.foil !== \"None\" ? `_${u.foil}` : \"\", $ = u.sourcePackType ? `_${u.sourcePackType}` : \"\", h = `${u.rarity}${k}${$}`;\n      s[h] || (s[h] = { count: 0, vbms: 0, packType: u.sourcePackType }), s[h].count += 1, s[h].vbms += f, u.quantity > 1 ? await a.db.patch(p, {\n        quantity: u.quantity - 1\n      }) : await a.db.delete(p);\n    }\n    for (let [p, u] of Object.entries(s)) {\n      let f = p.split(\"_\"), k = f.slice(0, f[1] === \"Prize\" || f[1] === \"Standard\" ? 2 : 1).join(\"_\");\n      o.push({\n        rarity: k,\n        count: u.count,\n        vbms: u.vbms,\n        packType: u.packType\n      });\n    }\n    let d = r.coins || 0, c = r.lifetimeEarned || 0;\n    await a.db.patch(r._id, {\n      coins: d + t,\n      lifetimeEarned: c + t\n    });\n    let y = o.map((p) => `${p.count}x ${p.rarity}`).join(\", \");\n    return await P(a, {\n      address: n,\n      type: \"earn\",\n      amount: t,\n      source: \"burn_cards\",\n      description: `Burned ${e.cardIds.length} cards (${y}) for ${t} TESTVBMS`,\n      balanceBefore: d,\n      balanceAfter: d + t\n    }), await C(\n      a,\n      n,\n      \"earn\",\n      t,\n      d,\n      d + t,\n      \"burn_cards\",\n      `${e.cardIds.length}_cards`,\n      { reason: `Burned ${e.cardIds.length} cards: ${y}` }\n    ), console.log(`\\u{1F525} MASS BURN: ${n} burned ${e.cardIds.length} cards for ${t} VBMS`), {\n      success: !0,\n      cardsBurned: e.cardIds.length,\n      totalVBMS: t,\n      burnedCards: o,\n      newBalance: d + t\n    };\n  }, \"handler\")\n}), ie = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async () => M, \"handler\")\n}), ce = m({\n  args: {\n    address: i.string(),\n    quantity: i.number(),\n    boosted: i.boolean()\n    // true = elite odds for 5x price\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), s = (e.boosted ? 5e3 : 1e3) * e.quantity, d = await a.db.query(\"profiles\").withIndex(\"by_address\", (f) => f.eq(\"address\", n)).first();\n    if (!d)\n      throw new Error(\"Profile not found\");\n    let c = d.coins || 0;\n    if (c < s)\n      throw new Error(`Not enough coins. Need ${s}, have ${c}`);\n    await a.db.patch(d._id, {\n      coins: c - s,\n      lifetimeSpent: (d.lifetimeSpent || 0) + s\n    });\n    let y = e.boosted ? \"boosted\" : \"basic\";\n    await a.db.insert(\"coinTransactions\", {\n      address: n,\n      amount: -s,\n      type: \"spend\",\n      source: `buy_pack_${y}`,\n      description: `Bought ${e.quantity}x ${y} pack`,\n      timestamp: Date.now(),\n      balanceBefore: c,\n      balanceAfter: c - s\n    });\n    let p = e.boosted ? \"elite\" : \"basic\", u = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (f) => f.eq(\"address\", n).eq(\"packType\", p)).first();\n    return u ? await a.db.patch(u._id, {\n      unopened: u.unopened + e.quantity\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: p,\n      unopened: e.quantity,\n      earnedAt: Date.now()\n    }), console.log(`\\u{1F4B0} Pack Purchase: ${n} bought ${e.quantity}x ${p} pack(s) for ${s} VBMS`), {\n      success: !0,\n      packsReceived: e.quantity,\n      packType: p,\n      coinsSpent: s,\n      remainingCoins: c - s,\n      boosted: e.boosted\n    };\n  }, \"handler\")\n}), pe = b({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = await a.db.query(\"dailyFreeClaims\").withIndex(\"by_address\", (c) => c.eq(\"address\", n)).first();\n    if (!r)\n      return { canClaim: !0, nextClaimAt: null };\n    let t = Date.now(), o = r.claimedAt, s = 1440 * 60 * 1e3, d = o + s;\n    return t >= d ? { canClaim: !0, nextClaimAt: null } : {\n      canClaim: !1,\n      nextClaimAt: d,\n      timeRemaining: d - t\n    };\n  }, \"handler\")\n}), le = m({\n  args: { address: i.string() },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.address.toLowerCase(), r = await a.db.query(\"dailyFreeClaims\").withIndex(\"by_address\", (d) => d.eq(\"address\", n)).first(), t = Date.now(), o = 1440 * 60 * 1e3;\n    if (r && t < r.claimedAt + o)\n      throw new Error(\"Already claimed today! Come back tomorrow.\");\n    let s = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (d) => d.eq(\"address\", n).eq(\"packType\", \"basic\")).first();\n    return s ? await a.db.patch(s._id, {\n      unopened: s.unopened + 1\n    }) : await a.db.insert(\"cardPacks\", {\n      address: n,\n      packType: \"basic\",\n      unopened: 1,\n      sourceId: \"daily_free\",\n      earnedAt: t\n    }), r ? await a.db.patch(r._id, {\n      claimedAt: t,\n      totalClaims: (r.totalClaims || 0) + 1\n    }) : await a.db.insert(\"dailyFreeClaims\", {\n      address: n,\n      claimedAt: t,\n      totalClaims: 1\n    }), console.log(`\\u{1F381} Daily Free: ${n} claimed a free pack!`), {\n      success: !0,\n      packsAwarded: 1\n    };\n  }, \"handler\")\n}), ue = g({\n  args: {},\n  handler: /* @__PURE__ */ l(async (a) => {\n    let e = await a.db.query(\"dailyFreeClaims\").collect();\n    for (let n of e)\n      await a.db.delete(n._id);\n    return { deleted: e.length };\n  }, \"handler\")\n}), ye = g({\n  args: {\n    cards: i.array(i.object({\n      address: i.string(),\n      cardId: i.string(),\n      suit: i.string(),\n      rank: i.string(),\n      variant: i.string(),\n      rarity: i.string(),\n      imageUrl: i.string(),\n      badgeType: i.string(),\n      foil: i.optional(i.string()),\n      wear: i.string(),\n      power: i.number(),\n      quantity: i.number()\n    }))\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = 0, r = [];\n    for (let t of e.cards) {\n      let o = t.address.toLowerCase(), s = t.imageUrl.includes(\"%20\") ? t.imageUrl : t.imageUrl.replace(/ /g, \"%20\"), d = await a.db.insert(\"cardInventory\", {\n        address: o,\n        cardId: t.cardId,\n        suit: t.suit,\n        rank: t.rank,\n        variant: t.variant,\n        rarity: t.rarity,\n        imageUrl: s,\n        badgeType: t.badgeType,\n        foil: t.foil,\n        wear: t.wear,\n        power: t.power,\n        quantity: t.quantity,\n        equipped: !1,\n        obtainedAt: Date.now()\n      });\n      r.push({\n        cardId: d,\n        rarity: t.rarity,\n        power: t.power,\n        address: o\n      }), n++;\n    }\n    return {\n      success: !0,\n      restoredCount: n,\n      cards: r,\n      message: `Successfully restored ${n} cards!`\n    };\n  }, \"handler\")\n}), fe = m({\n  args: {\n    senderAddress: i.string(),\n    recipientAddress: i.string(),\n    packType: i.union(i.literal(\"basic\"), i.literal(\"boosted\"), i.literal(\"premium\"), i.literal(\"elite\"))\n  },\n  handler: /* @__PURE__ */ l(async (a, e) => {\n    let n = e.senderAddress.toLowerCase(), r = e.recipientAddress.toLowerCase();\n    if (n === r)\n      throw new Error(\"N\\xE3o pode enviar pack para voc\\xEA mesmo\");\n    let t = w[e.packType];\n    if (!t || t.price === 0)\n      throw new Error(\"Tipo de pack inv\\xE1lido\");\n    let o = t.price, s = await a.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", n)).first();\n    if (!s)\n      throw new Error(\"Perfil do remetente n\\xE3o encontrado\");\n    let d = s.coins || 0;\n    if (d < o)\n      throw new Error(`Saldo insuficiente. Precisa de ${o.toLocaleString()} TESTVBMS, tem ${d.toLocaleString()}`);\n    let c = await a.db.query(\"profiles\").withIndex(\"by_address\", (p) => p.eq(\"address\", r)).first();\n    if (!c)\n      throw new Error(\"Perfil do destinat\\xE1rio n\\xE3o encontrado\");\n    await a.db.patch(s._id, {\n      coins: d - o,\n      lifetimeSpent: (s.lifetimeSpent || 0) + o\n    }), await P(a, {\n      address: n,\n      type: \"spend\",\n      amount: -o,\n      source: \"gift_pack\",\n      description: `Gifted ${e.packType} pack to ${c.username}`,\n      balanceBefore: d,\n      balanceAfter: d - o\n    });\n    let y = await a.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (p) => p.eq(\"address\", r).eq(\"packType\", e.packType)).first();\n    return y ? await a.db.patch(y._id, {\n      unopened: y.unopened + 1\n    }) : await a.db.insert(\"cardPacks\", {\n      address: r,\n      packType: e.packType,\n      unopened: 1,\n      earnedAt: Date.now(),\n      sourceId: `gift_from_${n}`\n    }), console.log(`\\u{1F381} GIFT PACK: ${s.username} sent ${e.packType} pack to ${c.username} (${o} TESTVBMS)`), {\n      success: !0,\n      packType: e.packType,\n      packPrice: o,\n      senderUsername: s.username,\n      recipientUsername: c.username,\n      senderNewBalance: d - o\n    };\n  }, \"handler\")\n}), me = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async () => [\n    { type: \"basic\", name: \"Basic Pack\", price: 1e3, cards: 1, description: \"1 card\" },\n    { type: \"boosted\", name: \"Boosted Pack\", price: 5e3, cards: 1, description: \"1 card, better odds\" },\n    { type: \"premium\", name: \"Premium Pack\", price: 1e4, cards: 5, description: \"5 cards\" },\n    { type: \"elite\", name: \"Elite Pack\", price: 1e5, cards: 5, description: \"5 cards, best odds\" }\n  ], \"handler\")\n});\nexport {\n  ue as adminResetDailyFreeClaims,\n  ae as awardPack,\n  oe as burnCard,\n  de as burnMultipleCards,\n  J as buyPack,\n  ce as buyPackWithLuckBoost,\n  X as buyPackWithVBMS,\n  pe as canClaimDailyFree,\n  le as claimDailyFreePack,\n  W as debugAllCards,\n  ie as getBurnValues,\n  G as getFreeCardsStats,\n  me as getGiftPackOptions,\n  j as getLockedFreeCardIds,\n  Y as getPlayerCards,\n  z as getPlayerPacks,\n  H as getShopPacks,\n  fe as giftPack,\n  re as giveStarterPack,\n  Q as normalizeCardAddresses,\n  ee as openAllPacks,\n  Z as openPack,\n  se as resetUserFreeCards,\n  ye as restoreCards,\n  te as rewardProfileShare,\n  ne as updateAllCardImages\n};\n//# sourceMappingURL=cardPacks.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/cardPacks.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"cryptoRandomFloat\", \"randomBytes\", \"__name\", \"cryptoRandomInt\", \"max\", \"PACK_TYPES\", \"rollRarity\", \"odds\", \"total\", \"a\", \"b\", \"roll\", \"cryptoRandomFloat\", \"rarity\", \"chance\", \"__name\", \"CARD_IMAGES\", \"FOIL_ODDS\", \"BOOSTED_FOIL_ODDS\", \"WEAR_ODDS\", \"calculateCardPower\", \"rarity\", \"wear\", \"foil\", \"rarityBase\", \"wearMultiplier\", \"foilMultiplier\", \"base\", \"wearMult\", \"foilMult\", \"power\", \"__name\", \"generateRandomCard\", \"packType\", \"rarityLower\", \"imageCount\", \"CARD_IMAGES\", \"imageIndex\", \"cryptoRandomInt\", \"rollRarity\", \"BOOSTED_FOIL_ODDS\", \"FOIL_ODDS\", \"cardId\", \"imageUrl\", \"imageFiles\", \"fileName\", \"getPlayerPacks\", \"query\", \"v\", \"ctx\", \"args\", \"q\", \"pack\", \"PACK_TYPES\", \"getShopPacks\", \"getPlayerCards\", \"getLockedFreeCardIds\", \"normalizedAddress\", \"lockedIds\", \"profile\", \"card\", \"raidDeck\", \"getFreeCardsStats\", \"internalQuery\", \"allCards\", \"totalCards\", \"sum\", \"uniquePlayers\", \"c\", \"byRarity\", \"debugAllCards\", \"sampleCards\", \"normalizeCardAddresses\", \"internalMutation\", \"updatedCount\", \"lowercaseAddress\", \"buyPack\", \"mutation\", \"address\", \"packInfo\", \"totalCost\", \"coins\", \"existingPack\", \"buyPackWithVBMS\", \"actualPackType\", \"vbmsSpent\", \"openPack\", \"revealedCards\", \"i\", \"existingCard\", \"openAllPacks\", \"allRevealedCards\", \"totalPacks\", \"p\", \"awardPack\", \"giveStarterPack\", \"rewardProfileShare\", \"now\", \"today\", \"updateAllCardImages\", \"newImageMapping\", \"updates\", \"newImages\", \"hasUnencodedSpace\", \"hasOldFormat\", \"randomIndex\", \"newImageFile\", \"newImageUrl\", \"resetUserFreeCards\", \"username\", \"userCards\", \"deletedCount\", \"BURN_RARITY_MULTIPLIER\", \"BURN_FOIL_MULTIPLIER\", \"DEFAULT_PACK_PRICE\", \"getPackPrice\", \"BURN_VALUES\", \"calculateBurnValue\", \"sourcePackType\", \"packPrice\", \"rarityMult\", \"burnCard\", \"burnValue\", \"currentCoins\", \"currentLifetimeEarned\", \"logTransaction\", \"createAuditLog\", \"burnMultipleCards\", \"totalVBMS\", \"burnedCards\", \"burnTracker\", \"foilPart\", \"packPart\", \"trackKey\", \"data\", \"parts\", \"displayKey\", \"burnSummary\", \"b\", \"getBurnValues\", \"buyPackWithLuckBoost\", \"packTypeName\", \"canClaimDailyFree\", \"lastClaim\", \"lastClaimTime\", \"twentyFourHours\", \"nextClaimAt\", \"claimDailyFreePack\", \"adminResetDailyFreeClaims\", \"claims\", \"claim\", \"restoreCards\", \"restoredCount\", \"restored\", \"cardData\", \"giftPack\", \"senderAddress\", \"recipientAddress\", \"senderProfile\", \"senderCoins\", \"recipientProfile\", \"getGiftPackOptions\"]\n}\n"},{"path":"_deps/HHLKWD3J.js","source":"import {\n  a as p,\n  c as f,\n  d as w\n} from \"./3SBKGJDS.js\";\nimport {\n  h as t\n} from \"./34SVKERO.js\";\nimport {\n  a as l\n} from \"./5B5TEMMX.js\";\n\n// convex/coinsInbox.ts\nasync function g(s, e) {\n  await s.db.insert(\"coinTransactions\", {\n    address: e.address.toLowerCase(),\n    type: e.type,\n    amount: e.amount,\n    source: e.source,\n    description: e.description,\n    balanceBefore: e.balanceBefore,\n    balanceAfter: e.balanceAfter,\n    timestamp: Date.now(),\n    txHash: e.txHash\n  });\n}\nl(g, \"logTransaction\");\nvar C = w({\n  args: {\n    address: t.string(),\n    amount: t.number(),\n    source: t.string()\n    // \"pve\", \"pvp\", \"attack\", \"leaderboard\"\n  },\n  handler: /* @__PURE__ */ l(async (s, { address: e, amount: n, source: a }) => {\n    let o = e.toLowerCase(), i = await s.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", o)).first();\n    if (!i)\n      throw new Error(\"Profile not found\");\n    let d = i.coinsInbox || 0, b = d + n;\n    return await s.db.patch(i._id, {\n      coinsInbox: b,\n      lastUpdated: Date.now()\n    }), await s.db.insert(\"coinTransactions\", {\n      address: o,\n      type: \"earn\",\n      amount: n,\n      source: a,\n      description: `Earned ${n} coins from ${a}`,\n      balanceBefore: d,\n      balanceAfter: b,\n      timestamp: Date.now()\n    }), {\n      success: !0,\n      newInboxBalance: b,\n      amountAdded: n\n    };\n  }, \"handler\")\n}), A = f({\n  args: {\n    address: t.string()\n  },\n  handler: /* @__PURE__ */ l(async (s, { address: e }) => {\n    let n = e.toLowerCase(), a = await s.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", n)).first();\n    if (!a)\n      throw new Error(\"Profile not found\");\n    let o = a.coinsInbox || 0;\n    if (o === 0)\n      throw new Error(\"No coins in inbox to claim\");\n    let i = a.coins || 0, d = i + o;\n    return await s.db.patch(a._id, {\n      coins: d,\n      coinsInbox: 0,\n      lifetimeEarned: (a.lifetimeEarned || 0) + o,\n      lastUpdated: Date.now()\n    }), await s.db.insert(\"coinTransactions\", {\n      address: n,\n      type: \"claim\",\n      amount: o,\n      source: \"inbox\",\n      description: `Claimed ${o} coins from inbox to balance`,\n      balanceBefore: i,\n      balanceAfter: d,\n      timestamp: Date.now()\n    }), {\n      success: !0,\n      claimedAmount: o,\n      newCoinsBalance: d\n    };\n  }, \"handler\")\n}), I = p({\n  args: {\n    address: t.string()\n  },\n  handler: /* @__PURE__ */ l(async (s, { address: e }) => {\n    let n = await s.db.query(\"profiles\").withIndex(\"by_address\", (b) => b.eq(\"address\", e.toLowerCase())).first();\n    if (!n)\n      return null;\n    let a = 180 * 1e3, o = n.lastConversionAttempt || n.pendingConversionTimestamp || 0, i = Date.now() - o, d = o > 0 && i < a ? Math.ceil((a - i) / 1e3) : 0;\n    return {\n      coinsInbox: n.coinsInbox || 0,\n      // For backward compatibility\n      coins: n.coins || 0,\n      inbox: n.coinsInbox || 0,\n      // TESTVBMS inbox (rewards accumulate here)\n      lifetimeEarned: n.lifetimeEarned || 0,\n      cooldownRemaining: d\n      // Seconds until next conversion allowed (0 = ready)\n    };\n  }, \"handler\")\n}), T = p({\n  args: {\n    address: t.string()\n  },\n  handler: /* @__PURE__ */ l(async (s, { address: e }) => {\n    let n = await s.db.query(\"profiles\").withIndex(\"by_address\", (a) => a.eq(\"address\", e.toLowerCase())).first();\n    return n ? (n.coinsInbox || 0) > 0 : !1;\n  }, \"handler\")\n}), B = p({\n  args: {\n    address: t.string(),\n    limit: t.optional(t.number())\n  },\n  handler: /* @__PURE__ */ l(async (s, { address: e, limit: n = 50 }) => {\n    let a = e.toLowerCase(), o = await s.db.query(\"coinTransactions\").withIndex(\"by_address\", (r) => r.eq(\"address\", a)).order(\"desc\").take(n), d = (await s.db.query(\"bettingTransactions\").withIndex(\"by_address\", (r) => r.eq(\"address\", a)).order(\"desc\").take(n)).map((r) => {\n      let c, m, u = r.amount;\n      switch (r.type) {\n        case \"win\":\n          c = \"earn\", m = `Won ${Math.abs(u)} credits betting (Mecha Arena)`;\n          break;\n        case \"loss\":\n          c = \"spend\", m = `Lost ${Math.abs(u)} credits betting (Mecha Arena)`;\n          break;\n        case \"deposit\":\n          c = \"convert\", m = `Deposited ${Math.abs(u)} coins for betting credits`;\n          break;\n        case \"withdraw\":\n          c = \"earn\", m = `Converted ${Math.abs(u)} betting credits to coins`;\n          break;\n        case \"refund\":\n          c = \"refund\", m = `Refunded ${Math.abs(u)} credits (tie round)`;\n          break;\n        default:\n          c = \"spend\", m = `Bet ${Math.abs(u)} credits`;\n      }\n      return {\n        _id: r._id,\n        _creationTime: r._creationTime,\n        address: r.address,\n        type: c,\n        amount: Math.abs(u),\n        source: \"mecha_arena\",\n        description: m,\n        balanceBefore: 0,\n        // Not tracked for betting\n        balanceAfter: 0,\n        // Not tracked for betting\n        timestamp: r.timestamp,\n        txHash: r.txHash\n      };\n    });\n    return [...o, ...d].sort((r, c) => c.timestamp - r.timestamp).slice(0, n);\n  }, \"handler\")\n}), M = f({\n  args: {\n    address: t.string(),\n    type: t.string(),\n    // 'earn' | 'claim' | 'convert' | 'spend' | 'bonus' | 'refund'\n    amount: t.number(),\n    source: t.string(),\n    // 'pve', 'pvp', 'attack', 'boss', 'mission', 'quest', 'shame', 'leaderboard', 'convert', etc\n    description: t.string(),\n    balanceBefore: t.number(),\n    balanceAfter: t.number(),\n    txHash: t.optional(t.string())\n  },\n  handler: /* @__PURE__ */ l(async (s, e) => {\n    let n = e.address.toLowerCase();\n    return await s.db.insert(\"coinTransactions\", {\n      address: n,\n      type: e.type,\n      amount: e.amount,\n      source: e.source,\n      description: e.description,\n      balanceBefore: e.balanceBefore,\n      balanceAfter: e.balanceAfter,\n      timestamp: Date.now(),\n      txHash: e.txHash\n    }), { success: !0 };\n  }, \"handler\")\n});\n\nexport {\n  g as a,\n  C as b,\n  A as c,\n  I as d,\n  T as e,\n  B as f,\n  M as g\n};\n//# sourceMappingURL=HHLKWD3J.js.map\n","environment":"isolate"},{"path":"cardSchema.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f\n} from \"./_deps/IJFCN5IR.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  a as cardValidator,\n  b as deckCardValidator,\n  f as sanitizeCard,\n  d as validateCardPower,\n  e as validateDeckSize,\n  c as wagerCardValidator\n};\n//# sourceMappingURL=cardSchema.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"_deps/IJFCN5IR.js","source":"import {\n  h as t\n} from \"./34SVKERO.js\";\nimport {\n  a\n} from \"./5B5TEMMX.js\";\n\n// convex/cardSchema.ts\nvar l = t.object({\n  // Required fields\n  tokenId: t.string(),\n  name: t.string(),\n  power: t.number(),\n  rarity: t.union(\n    t.literal(\"Common\"),\n    t.literal(\"Rare\"),\n    t.literal(\"Epic\"),\n    t.literal(\"Legendary\"),\n    t.literal(\"Mythic\"),\n    t.literal(\"common\"),\n    t.literal(\"rare\"),\n    t.literal(\"epic\"),\n    t.literal(\"legendary\"),\n    t.literal(\"mythic\")\n  ),\n  // Optional visual fields\n  imageUrl: t.optional(t.string()),\n  collection: t.optional(t.string()),\n  foil: t.optional(t.string()),\n  wear: t.optional(t.string()),\n  // Optional game fields\n  equipped: t.optional(t.boolean()),\n  contractAddress: t.optional(t.string()),\n  address: t.optional(t.string()),\n  // VibeFID specific\n  fid: t.optional(t.number()),\n  username: t.optional(t.string()),\n  displayName: t.optional(t.string()),\n  pfpUrl: t.optional(t.string()),\n  neynarScore: t.optional(t.number()),\n  // Playing card properties\n  suit: t.optional(t.string()),\n  rank: t.optional(t.string()),\n  suitSymbol: t.optional(t.string()),\n  color: t.optional(t.string()),\n  // Additional metadata (for NFT attributes)\n  attributes: t.optional(t.array(t.object({\n    trait_type: t.string(),\n    value: t.union(t.string(), t.number())\n  })))\n}), s = t.object({\n  tokenId: t.string(),\n  power: t.number(),\n  name: t.optional(t.string()),\n  imageUrl: t.optional(t.string()),\n  collection: t.optional(t.string()),\n  rarity: t.optional(t.string()),\n  foil: t.optional(t.string()),\n  wear: t.optional(t.string()),\n  fid: t.optional(t.number()),\n  username: t.optional(t.string()),\n  displayName: t.optional(t.string()),\n  pfpUrl: t.optional(t.string()),\n  suit: t.optional(t.string()),\n  rank: t.optional(t.string()),\n  suitSymbol: t.optional(t.string()),\n  color: t.optional(t.string()),\n  contractAddress: t.optional(t.string()),\n  // Free card fields\n  badgeType: t.optional(t.string()),\n  isFreeCard: t.optional(t.boolean()),\n  description: t.optional(t.string()),\n  title: t.optional(t.string()),\n  status: t.optional(t.string()),\n  // NFT metadata fields\n  acquiredAt: t.optional(t.any()),\n  character: t.optional(t.string()),\n  // NFT attributes array\n  attributes: t.optional(t.array(t.object({\n    trait_type: t.string(),\n    value: t.union(t.string(), t.number())\n  })))\n}), p = t.object({\n  tokenId: t.string(),\n  power: t.number(),\n  name: t.string(),\n  imageUrl: t.optional(t.string()),\n  collection: t.optional(t.string()),\n  rarity: t.optional(t.string()),\n  contractAddress: t.optional(t.string())\n});\nfunction g(o, n = 0, i = 1e5) {\n  return o.power >= n && o.power <= i;\n}\na(g, \"validateCardPower\");\nfunction c(o, n = 10) {\n  return Array.isArray(o) && o.length === n;\n}\na(c, \"validateDeckSize\");\nfunction u(o) {\n  let n = {};\n  for (let [i, r] of Object.entries(o))\n    typeof r == \"string\" ? n[i] = r.replace(/<[^>]*>/g, \"\").slice(0, 1e3) : typeof r == \"number\" ? n[i] = Math.max(-1e6, Math.min(1e6, r)) : n[i] = r;\n  return n;\n}\na(u, \"sanitizeCard\");\n\nexport {\n  l as a,\n  s as b,\n  p as c,\n  g as d,\n  c as e,\n  u as f\n};\n//# sourceMappingURL=IJFCN5IR.js.map\n","environment":"isolate"},{"path":"cardValidation.js","source":"import {\n  a as r\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/cardValidation.ts\nfunction y(e) {\n  return e >= 0.99 ? \"Mythic\" : e >= 0.9 ? \"Legendary\" : e >= 0.79 ? \"Epic\" : e >= 0.7 ? \"Rare\" : \"Common\";\n}\nr(y, \"calculateRarityFromScore\");\nfunction d(e) {\n  let t = Math.sin(e) * 1e4;\n  return t - Math.floor(t);\n}\nr(d, \"seededRandom\");\nfunction v(e, t) {\n  let l = t.reduce((a, o) => a + o.weight, 0), u = d(e) * l;\n  for (let a of t)\n    if (u -= a.weight, u <= 0) return a.value;\n  return t[t.length - 1].value;\n}\nr(v, \"weightedRoll\");\nfunction s(e) {\n  return e <= 5e3 ? [{ value: \"Prize\", weight: 100 }, { value: \"Standard\", weight: 0 }, { value: \"None\", weight: 0 }] : e <= 2e4 ? [{ value: \"Prize\", weight: 80 }, { value: \"Standard\", weight: 20 }, { value: \"None\", weight: 0 }] : e <= 1e5 ? [{ value: \"Prize\", weight: 30 }, { value: \"Standard\", weight: 60 }, { value: \"None\", weight: 10 }] : e <= 25e4 ? [{ value: \"Prize\", weight: 5 }, { value: \"Standard\", weight: 35 }, { value: \"None\", weight: 60 }] : e <= 5e5 ? [{ value: \"Prize\", weight: 3 }, { value: \"Standard\", weight: 25 }, { value: \"None\", weight: 72 }] : e <= 12e5 ? [{ value: \"Prize\", weight: 1 }, { value: \"Standard\", weight: 10 }, { value: \"None\", weight: 89 }] : [{ value: \"Prize\", weight: 0 }, { value: \"Standard\", weight: 5 }, { value: \"None\", weight: 95 }];\n}\nr(s, \"getFoilProbabilities\");\nfunction P(e) {\n  return e <= 5e3 ? [{ value: \"Pristine\", weight: 100 }, { value: \"Mint\", weight: 0 }, { value: \"Lightly Played\", weight: 0 }, { value: \"Moderately Played\", weight: 0 }, { value: \"Heavily Played\", weight: 0 }] : e <= 2e4 ? [{ value: \"Pristine\", weight: 90 }, { value: \"Mint\", weight: 10 }, { value: \"Lightly Played\", weight: 0 }, { value: \"Moderately Played\", weight: 0 }, { value: \"Heavily Played\", weight: 0 }] : e <= 1e5 ? [{ value: \"Pristine\", weight: 50 }, { value: \"Mint\", weight: 40 }, { value: \"Lightly Played\", weight: 10 }, { value: \"Moderately Played\", weight: 0 }, { value: \"Heavily Played\", weight: 0 }] : e <= 25e4 ? [{ value: \"Pristine\", weight: 2 }, { value: \"Mint\", weight: 18 }, { value: \"Lightly Played\", weight: 45 }, { value: \"Moderately Played\", weight: 30 }, { value: \"Heavily Played\", weight: 5 }] : e <= 5e5 ? [{ value: \"Pristine\", weight: 0 }, { value: \"Mint\", weight: 5 }, { value: \"Lightly Played\", weight: 30 }, { value: \"Moderately Played\", weight: 55 }, { value: \"Heavily Played\", weight: 10 }] : e <= 12e5 ? [{ value: \"Pristine\", weight: 0 }, { value: \"Mint\", weight: 0 }, { value: \"Lightly Played\", weight: 5 }, { value: \"Moderately Played\", weight: 45 }, { value: \"Heavily Played\", weight: 50 }] : [{ value: \"Pristine\", weight: 0 }, { value: \"Mint\", weight: 0 }, { value: \"Lightly Played\", weight: 0 }, { value: \"Moderately Played\", weight: 10 }, { value: \"Heavily Played\", weight: 90 }];\n}\nr(P, \"getWearProbabilities\");\nfunction c(e) {\n  let t = v(e, s(e)), l = v(e * 2, P(e));\n  return { foil: t, wear: l };\n}\nr(c, \"calculateFidTraits\");\nvar w = {\n  rarityBase: { mythic: 800, legendary: 240, epic: 80, rare: 20, common: 5 },\n  wearMultiplier: { pristine: 1.8, mint: 1.4, default: 1 },\n  foilMultiplier: { prize: 15, standard: 2.5, none: 1 }\n};\nfunction p(e, t, l) {\n  let u = e.toLowerCase(), a = w.rarityBase[u] || w.rarityBase.common, o = l.toLowerCase().replace(\" \", \"\"), n = w.wearMultiplier[o] || w.wearMultiplier.default, g = t.toLowerCase(), i = w.foilMultiplier[g] || w.foilMultiplier.none;\n  return Math.round(a * n * i);\n}\nr(p, \"calculatePower\");\nfunction f(e, t, l, u, a, o) {\n  let n = [], g = y(t), i = c(e), h = p(g, i.foil, i.wear);\n  return l !== g && n.push(`Invalid rarity: client=${l}, expected=${g} (score=${t})`), u !== i.foil && n.push(`Invalid foil: client=${u}, expected=${i.foil}`), a !== i.wear && n.push(`Invalid wear: client=${a}, expected=${i.wear}`), Math.abs(o - h) > 1 && n.push(`Invalid power: client=${o}, expected=${h}`), {\n    valid: n.length === 0,\n    errors: n,\n    correctedValues: {\n      rarity: g,\n      foil: i.foil,\n      wear: i.wear,\n      power: h\n    }\n  };\n}\nr(f, \"validateCardTraits\");\nexport {\n  c as calculateFidTraits,\n  p as calculatePower,\n  y as calculateRarityFromScore,\n  f as validateCardTraits\n};\n//# sourceMappingURL=cardValidation.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/cardValidation.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"calculateRarityFromScore\", \"neynarScore\", \"__name\", \"seededRandom\", \"seed\", \"x\", \"weightedRoll\", \"choices\", \"total\", \"sum\", \"c\", \"roll\", \"choice\", \"getFoilProbabilities\", \"fid\", \"getWearProbabilities\", \"calculateFidTraits\", \"foil\", \"wear\", \"VIBEFID_POWER_CONFIG\", \"calculatePower\", \"rarity\", \"rarityKey\", \"basePower\", \"wearKey\", \"wearMult\", \"foilKey\", \"foilMult\", \"validateCardTraits\", \"clientRarity\", \"clientFoil\", \"clientWear\", \"clientPower\", \"errors\", \"expectedRarity\", \"expectedTraits\", \"expectedPower\"]\n}\n"},{"path":"accessAnalytics.js","source":"import {\n  a as g,\n  c as f\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as e\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as d\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/accessAnalytics.ts\nfunction p() {\n  let n = /* @__PURE__ */ new Date();\n  return `${n.getFullYear()}-${String(n.getMonth() + 1).padStart(2, \"0\")}-${String(n.getDate()).padStart(2, \"0\")}`;\n}\nd(p, \"getTodayKey\");\nvar A = f({\n  args: {\n    address: e.string(),\n    source: e.union(\n      e.literal(\"miniapp\"),\n      e.literal(\"farcaster_web\"),\n      e.literal(\"web\"),\n      e.literal(\"frame\")\n    )\n  },\n  handler: /* @__PURE__ */ d(async (n, { address: r, source: i }) => {\n    let a = p(), o = r.toLowerCase(), t = await n.db.query(\"accessAnalytics\").withIndex(\n      \"by_date_source\",\n      (c) => c.eq(\"date\", a).eq(\"source\", i)\n    ).first();\n    t ? t.addresses.includes(o) ? await n.db.patch(t._id, {\n      sessions: t.sessions + 1\n    }) : await n.db.patch(t._id, {\n      uniqueUsers: t.uniqueUsers + 1,\n      sessions: t.sessions + 1,\n      addresses: [...t.addresses, o]\n    }) : await n.db.insert(\"accessAnalytics\", {\n      date: a,\n      source: i,\n      uniqueUsers: 1,\n      sessions: 1,\n      addresses: [o]\n    }), console.log(`\\u{1F4CA} Access logged: ${i} - ${o}`);\n  }, \"handler\")\n}), _ = g({\n  args: {\n    startDate: e.optional(e.string()),\n    // YYYY-MM-DD, defaults to 7 days ago\n    endDate: e.optional(e.string())\n    // YYYY-MM-DD, defaults to today\n  },\n  handler: /* @__PURE__ */ d(async (n, { startDate: r, endDate: i }) => {\n    let a = p(), o = i || a, t = r || (() => {\n      let s = /* @__PURE__ */ new Date();\n      return s.setDate(s.getDate() - 7), `${s.getFullYear()}-${String(s.getMonth() + 1).padStart(2, \"0\")}-${String(s.getDate()).padStart(2, \"0\")}`;\n    })(), c = await n.db.query(\"accessAnalytics\").withIndex(\"by_date\").filter(\n      (s) => s.and(\n        s.gte(s.field(\"date\"), t),\n        s.lte(s.field(\"date\"), o)\n      )\n    ).take(1500), u = {\n      miniapp: { uniqueUsers: 0, sessions: 0 },\n      farcaster_web: { uniqueUsers: 0, sessions: 0 },\n      web: { uniqueUsers: 0, sessions: 0 },\n      frame: { uniqueUsers: 0, sessions: 0 }\n    }, b = {};\n    for (let s of c)\n      u[s.source] || (u[s.source] = { uniqueUsers: 0, sessions: 0 }), u[s.source].uniqueUsers += s.uniqueUsers, u[s.source].sessions += s.sessions, b[s.date] || (b[s.date] = {\n        miniapp: { uniqueUsers: 0, sessions: 0 },\n        farcaster_web: { uniqueUsers: 0, sessions: 0 },\n        web: { uniqueUsers: 0, sessions: 0 },\n        frame: { uniqueUsers: 0, sessions: 0 }\n      }), b[s.date][s.source] = {\n        uniqueUsers: s.uniqueUsers,\n        sessions: s.sessions\n      };\n    let q = u.miniapp.uniqueUsers + u.farcaster_web.uniqueUsers, l = q + u.web.uniqueUsers + u.frame.uniqueUsers, U = l > 0 ? Math.round(u.miniapp.uniqueUsers / l * 100) : 0, w = l > 0 ? Math.round(u.farcaster_web.uniqueUsers / l * 100) : 0, y = l > 0 ? Math.round(u.web.uniqueUsers / l * 100) : 0;\n    return {\n      totals: u,\n      byDate: b,\n      summary: {\n        totalUniqueUsers: l,\n        farcasterTotal: q,\n        miniappPercent: U,\n        farcasterWebPercent: w,\n        webPercent: y,\n        dateRange: { start: t, end: o }\n      }\n    };\n  }, \"handler\")\n}), D = g({\n  args: {\n    date: e.optional(e.string()),\n    source: e.union(e.literal(\"miniapp\"), e.literal(\"farcaster_web\"), e.literal(\"web\"), e.literal(\"frame\"))\n  },\n  handler: /* @__PURE__ */ d(async (n, { date: r, source: i }) => {\n    let a = r || p(), o = await n.db.query(\"accessAnalytics\").withIndex(\n      \"by_date_source\",\n      (t) => t.eq(\"date\", a).eq(\"source\", i)\n    ).first();\n    return {\n      date: a,\n      source: i,\n      addresses: o?.addresses || [],\n      count: o?.addresses.length || 0\n    };\n  }, \"handler\")\n}), x = g({\n  args: {},\n  handler: /* @__PURE__ */ d(async (n) => {\n    let r = p(), i = await n.db.query(\"accessAnalytics\").withIndex(\"by_date\", (c) => c.eq(\"date\", r)).take(10), a = {\n      miniapp: { uniqueUsers: 0, sessions: 0 },\n      farcaster_web: { uniqueUsers: 0, sessions: 0 },\n      web: { uniqueUsers: 0, sessions: 0 },\n      frame: { uniqueUsers: 0, sessions: 0 }\n    };\n    for (let c of i)\n      c.source in a && (a[c.source] = {\n        uniqueUsers: c.uniqueUsers,\n        sessions: c.sessions\n      });\n    let o = a.miniapp.uniqueUsers + a.farcaster_web.uniqueUsers, t = o + a.web.uniqueUsers + a.frame.uniqueUsers;\n    return {\n      date: r,\n      ...a,\n      total: t,\n      farcasterTotal: o,\n      // miniapp + farcaster_web (all Farcaster traffic)\n      miniappPercent: t > 0 ? Math.round(a.miniapp.uniqueUsers / t * 100) : 0,\n      farcasterWebPercent: t > 0 ? Math.round(a.farcaster_web.uniqueUsers / t * 100) : 0,\n      farcasterTotalPercent: t > 0 ? Math.round(o / t * 100) : 0\n    };\n  }, \"handler\")\n}), $ = f({\n  args: {\n    address: e.string(),\n    source: e.string(),\n    userAgent: e.optional(e.string()),\n    referrer: e.optional(e.string()),\n    currentUrl: e.optional(e.string()),\n    isIframe: e.optional(e.boolean()),\n    sdkAvailable: e.optional(e.boolean())\n  },\n  handler: /* @__PURE__ */ d(async (n, r) => {\n    await n.db.insert(\"accessDebugLogs\", {\n      address: r.address.toLowerCase(),\n      source: r.source,\n      userAgent: r.userAgent,\n      referrer: r.referrer,\n      currentUrl: r.currentUrl,\n      isIframe: r.isIframe,\n      sdkAvailable: r.sdkAvailable,\n      timestamp: Date.now()\n    }), console.log(`\\u{1F50D} Access debug logged: ${r.source} - ${r.address}`);\n  }, \"handler\")\n}), I = g({\n  args: {\n    limit: e.optional(e.number())\n  },\n  handler: /* @__PURE__ */ d(async (n, { limit: r = 50 }) => await n.db.query(\"accessDebugLogs\").withIndex(\"by_timestamp\").order(\"desc\").take(r), \"handler\")\n}), S = g({\n  args: {\n    address: e.string()\n  },\n  handler: /* @__PURE__ */ d(async (n, { address: r }) => await n.db.query(\"accessDebugLogs\").withIndex(\"by_address\", (a) => a.eq(\"address\", r.toLowerCase())).take(500), \"handler\")\n});\nexport {\n  S as getAccessDebugByAddress,\n  I as getAccessDebugLogs,\n  D as getAddressesBySource,\n  _ as getAnalytics,\n  x as getTodayAnalytics,\n  A as logAccess,\n  $ as logAccessDebug\n};\n//# sourceMappingURL=accessAnalytics.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/accessAnalytics.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;AAaA,SAASA,IAAsB;AAC7B,MAAMC,IAAM,oBAAI,KAAK;AACrB,SAAO,GAAGA,EAAI,YAAY,CAAC,IAAI,OAAOA,EAAI,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAOA,EAAI,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC;AACtH;AAHSC,EAAAF,GAAA;AAQF,IAAMG,IAAYC,EAAS;AAAA,EAChC,MAAM;AAAA,IACJ,SAASC,EAAE,OAAO;AAAA,IAClB,QAAQA,EAAE;AAAA,MACRA,EAAE,QAAQ,SAAS;AAAA,MACnBA,EAAE,QAAQ,eAAe;AAAA,MACzBA,EAAE,QAAQ,KAAK;AAAA,MACfA,EAAE,QAAQ,OAAO;AAAA,IACnB;AAAA,EACF;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK,EAAE,SAAAC,GAAS,QAAAC,EAAO,MAAM;AAC3C,QAAMC,IAAQT,EAAY,GACpBU,IAAoBH,EAAQ,YAAY,GAGxCI,IAAW,MAAML,EAAI,GACxB,MAAM,iBAAiB,EACvB;AAAA,MAAU;AAAA,MAAkB,CAACM,MAC5BA,EAAE,GAAG,QAAQH,CAAK,EAAE,GAAG,UAAUD,CAAM;AAAA,IACzC,EACC,MAAM;AAET,IAAIG,IAEEA,EAAS,UAAU,SAASD,CAAiB,IAE/C,MAAMJ,EAAI,GAAG,MAAMK,EAAS,KAAK;AAAA,MAC/B,UAAUA,EAAS,WAAW;AAAA,IAChC,CAAC,IAGD,MAAML,EAAI,GAAG,MAAMK,EAAS,KAAK;AAAA,MAC/B,aAAaA,EAAS,cAAc;AAAA,MACpC,UAAUA,EAAS,WAAW;AAAA,MAC9B,WAAW,CAAC,GAAGA,EAAS,WAAWD,CAAiB;AAAA,IACtD,CAAC,IAIH,MAAMJ,EAAI,GAAG,OAAO,mBAAmB;AAAA,MACrC,MAAMG;AAAA,MACN,QAAAD;AAAA,MACA,aAAa;AAAA,MACb,UAAU;AAAA,MACV,WAAW,CAACE,CAAiB;AAAA,IAC/B,CAAC,GAGH,QAAQ,IAAI,4BAAqBF,CAAM,MAAME,CAAiB,EAAE;AAAA,EAClE,GAvCS;AAwCX,CAAC,GAKYG,IAAeC,EAAM;AAAA,EAChC,MAAM;AAAA,IACJ,WAAWT,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA;AAAA,IAChC,SAASA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA;AAAA,EAChC;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK,EAAE,WAAAS,GAAW,SAAAC,EAAQ,MAAM;AAC9C,QAAMP,IAAQT,EAAY,GAGpBiB,IAAMD,KAAWP,GACjBS,IAAQH,MAAc,MAAM;AAChC,UAAMI,IAAI,oBAAI,KAAK;AACnB,aAAAA,EAAE,QAAQA,EAAE,QAAQ,IAAI,CAAC,GAClB,GAAGA,EAAE,YAAY,CAAC,IAAI,OAAOA,EAAE,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAOA,EAAE,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IAChH,GAAG,GAIGC,IAAU,MAAMd,EAAI,GACvB,MAAM,iBAAiB,EACvB,UAAU,SAAS,EACnB;AAAA,MAAO,CAACM,MACPA,EAAE;AAAA,QACAA,EAAE,IAAIA,EAAE,MAAM,MAAM,GAAGM,CAAK;AAAA,QAC5BN,EAAE,IAAIA,EAAE,MAAM,MAAM,GAAGK,CAAG;AAAA,MAC5B;AAAA,IACF,EACC,KAAK,IAAI,GAGNI,IAAoE;AAAA,MACxE,SAAS,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MACvC,eAAe,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MAC7C,KAAK,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MACnC,OAAO,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,IACvC,GAEMC,IAAwC,CAAC;AAE/C,aAAWC,KAAUH;AAEnB,MAAKC,EAAOE,EAAO,MAAM,MACvBF,EAAOE,EAAO,MAAM,IAAI,EAAE,aAAa,GAAG,UAAU,EAAE,IAExDF,EAAOE,EAAO,MAAM,EAAE,eAAeA,EAAO,aAC5CF,EAAOE,EAAO,MAAM,EAAE,YAAYA,EAAO,UAGpCD,EAAOC,EAAO,IAAI,MACrBD,EAAOC,EAAO,IAAI,IAAI;AAAA,QACpB,SAAS,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,QACvC,eAAe,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,QAC7C,KAAK,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,QACnC,OAAO,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MACvC,IAEFD,EAAOC,EAAO,IAAI,EAAEA,EAAO,MAAM,IAAI;AAAA,QACnC,aAAaA,EAAO;AAAA,QACpB,UAAUA,EAAO;AAAA,MACnB;AAIF,QAAMC,IAAiBH,EAAO,QAAQ,cAAcA,EAAO,cAAc,aACnEI,IAAaD,IAAiBH,EAAO,IAAI,cAAcA,EAAO,MAAM,aACpEK,IAAiBD,IAAa,IAAI,KAAK,MAAOJ,EAAO,QAAQ,cAAcI,IAAc,GAAG,IAAI,GAChGE,IAAsBF,IAAa,IAAI,KAAK,MAAOJ,EAAO,cAAc,cAAcI,IAAc,GAAG,IAAI,GAC3GG,IAAaH,IAAa,IAAI,KAAK,MAAOJ,EAAO,IAAI,cAAcI,IAAc,GAAG,IAAI;AAE9F,WAAO;AAAA,MACL,QAAAJ;AAAA,MACA,QAAAC;AAAA,MACA,SAAS;AAAA,QACP,kBAAkBG;AAAA,QAClB,gBAAAD;AAAA,QACA,gBAAAE;AAAA,QACA,qBAAAC;AAAA,QACA,YAAAC;AAAA,QACA,WAAW,EAAE,OAAAV,GAAO,KAAAD,EAAI;AAAA,MAC1B;AAAA,IACF;AAAA,EACF,GA5ES;AA6EX,CAAC,GAKYY,IAAuBf,EAAM;AAAA,EACxC,MAAM;AAAA,IACJ,MAAMT,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,IAC3B,QAAQA,EAAE,MAAMA,EAAE,QAAQ,SAAS,GAAGA,EAAE,QAAQ,eAAe,GAAGA,EAAE,QAAQ,KAAK,GAAGA,EAAE,QAAQ,OAAO,CAAC;AAAA,EACxG;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK,EAAE,MAAAwB,GAAM,QAAAtB,EAAO,MAAM;AACxC,QAAMuB,IAAaD,KAAQ9B,EAAY,GAEjCuB,IAAS,MAAMjB,EAAI,GACtB,MAAM,iBAAiB,EACvB;AAAA,MAAU;AAAA,MAAkB,CAACM,MAC5BA,EAAE,GAAG,QAAQmB,CAAU,EAAE,GAAG,UAAUvB,CAAM;AAAA,IAC9C,EACC,MAAM;AAET,WAAO;AAAA,MACL,MAAMuB;AAAA,MACN,QAAAvB;AAAA,MACA,WAAWe,GAAQ,aAAa,CAAC;AAAA,MACjC,OAAOA,GAAQ,UAAU,UAAU;AAAA,IACrC;AAAA,EACF,GAhBS;AAiBX,CAAC,GAKYS,IAAoBlB,EAAM;AAAA,EACrC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAZ,EAAA,OAAOI,MAAQ;AACtB,QAAMG,IAAQT,EAAY,GAGpBoB,IAAU,MAAMd,EAAI,GACvB,MAAM,iBAAiB,EACvB,UAAU,WAAW,CAACM,MAAMA,EAAE,GAAG,QAAQH,CAAK,CAAC,EAC/C,KAAK,EAAE,GAEJwB,IAAU;AAAA,MACd,SAAS,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MACvC,eAAe,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MAC7C,KAAK,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,MACnC,OAAO,EAAE,aAAa,GAAG,UAAU,EAAE;AAAA,IACvC;AAEA,aAAWV,KAAUH;AACnB,MAAIG,EAAO,UAAUU,MACnBA,EAAQV,EAAO,MAA8B,IAAI;AAAA,QAC/C,aAAaA,EAAO;AAAA,QACpB,UAAUA,EAAO;AAAA,MACnB;AAIJ,QAAMC,IAAiBS,EAAQ,QAAQ,cAAcA,EAAQ,cAAc,aACrEC,IAAQV,IAAiBS,EAAQ,IAAI,cAAcA,EAAQ,MAAM;AAEvE,WAAO;AAAA,MACL,MAAMxB;AAAA,MACN,GAAGwB;AAAA,MACH,OAAAC;AAAA,MACA,gBAAAV;AAAA;AAAA,MACA,gBAAgBU,IAAQ,IAAI,KAAK,MAAOD,EAAQ,QAAQ,cAAcC,IAAS,GAAG,IAAI;AAAA,MACtF,qBAAqBA,IAAQ,IAAI,KAAK,MAAOD,EAAQ,cAAc,cAAcC,IAAS,GAAG,IAAI;AAAA,MACjG,uBAAuBA,IAAQ,IAAI,KAAK,MAAOV,IAAiBU,IAAS,GAAG,IAAI;AAAA,IAClF;AAAA,EACF,GArCS;AAsCX,CAAC,GAKYC,IAAiB/B,EAAS;AAAA,EACrC,MAAM;AAAA,IACJ,SAASC,EAAE,OAAO;AAAA,IAClB,QAAQA,EAAE,OAAO;AAAA,IACjB,WAAWA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,IAChC,UAAUA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,IAC/B,YAAYA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,IACjC,UAAUA,EAAE,SAASA,EAAE,QAAQ,CAAC;AAAA,IAChC,cAAcA,EAAE,SAASA,EAAE,QAAQ,CAAC;AAAA,EACtC;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK8B,MAAS;AAC5B,UAAM9B,EAAI,GAAG,OAAO,mBAAmB;AAAA,MACrC,SAAS8B,EAAK,QAAQ,YAAY;AAAA,MAClC,QAAQA,EAAK;AAAA,MACb,WAAWA,EAAK;AAAA,MAChB,UAAUA,EAAK;AAAA,MACf,YAAYA,EAAK;AAAA,MACjB,UAAUA,EAAK;AAAA,MACf,cAAcA,EAAK;AAAA,MACnB,WAAW,KAAK,IAAI;AAAA,IACtB,CAAC,GAED,QAAQ,IAAI,kCAA2BA,EAAK,MAAM,MAAMA,EAAK,OAAO,EAAE;AAAA,EACxE,GAbS;AAcX,CAAC,GAKYC,IAAqBvB,EAAM;AAAA,EACtC,MAAM;AAAA,IACJ,OAAOT,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,EAC9B;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK,EAAE,OAAAgC,IAAQ,GAAG,MACnB,MAAMhC,EAAI,GACpB,MAAM,iBAAiB,EACvB,UAAU,cAAc,EACxB,MAAM,MAAM,EACZ,KAAKgC,CAAK,GALN;AASX,CAAC,GAKYC,IAA0BzB,EAAM;AAAA,EAC3C,MAAM;AAAA,IACJ,SAAST,EAAE,OAAO;AAAA,EACpB;AAAA,EACA,SAAS,gBAAAH,EAAA,OAAOI,GAAK,EAAE,SAAAC,EAAQ,MAEhB,MAAMD,EAAI,GACpB,MAAM,iBAAiB,EACvB,UAAU,cAAc,CAACM,MAAMA,EAAE,GAAG,WAAWL,EAAQ,YAAY,CAAC,CAAC,EACrE,KAAK,GAAG,GALJ;AASX,CAAC;\",\n  \"names\": [\"getTodayKey\", \"now\", \"__name\", \"logAccess\", \"mutation\", \"v\", \"ctx\", \"address\", \"source\", \"today\", \"normalizedAddress\", \"existing\", \"q\", \"getAnalytics\", \"query\", \"startDate\", \"endDate\", \"end\", \"start\", \"d\", \"records\", \"totals\", \"byDate\", \"record\", \"farcasterTotal\", \"totalUsers\", \"miniappPercent\", \"farcasterWebPercent\", \"webPercent\", \"getAddressesBySource\", \"date\", \"targetDate\", \"getTodayAnalytics\", \"sources\", \"total\", \"logAccessDebug\", \"args\", \"getAccessDebugLogs\", \"limit\", \"getAccessDebugByAddress\"]\n}\n"},{"path":"achievementDefinitions.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g,\n  h\n} from \"./_deps/5IIR4IPG.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  f as ALL_ACHIEVEMENTS,\n  c as FOIL_ACHIEVEMENTS,\n  d as PROGRESSIVE_ACHIEVEMENTS,\n  a as RARITY_ACHIEVEMENTS,\n  e as SOCIAL_ACHIEVEMENTS,\n  b as WEAR_ACHIEVEMENTS,\n  g as getAchievementById,\n  h as getAchievementsByCategory\n};\n//# sourceMappingURL=achievementDefinitions.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"achievements.js","source":"import {\n  f as y\n} from \"./_deps/5IIR4IPG.js\";\nimport {\n  a as b,\n  c as v\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as f\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/achievements.ts\nvar x = b({\n  args: {\n    playerAddress: h.string()\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c } = p, r = c.toLowerCase(), a = await o.db.query(\"achievements\").withIndex(\"by_player\", (t) => t.eq(\"playerAddress\", r)).collect(), s = new Map(\n      a.map((t) => [t.achievementId, t])\n    );\n    return y.map((t) => {\n      let l = s.get(t.id);\n      return {\n        ...t,\n        progress: l?.progress || 0,\n        completed: l?.completed || !1,\n        claimedAt: l?.claimedAt,\n        completedAt: l?.completedAt,\n        _id: l?._id\n      };\n    });\n  }, \"handler\")\n}), F = v({\n  args: {\n    playerAddress: h.string(),\n    nfts: h.array(h.any())\n    // Player's NFT collection\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c, nfts: r } = p, a = c.toLowerCase(), s = [], i = /* @__PURE__ */ f((n) => !(!(n.collection === \"vibe\" || n.collection === \"Vibe Most Wanted\" || n.collection === \"vbms\" || n.collection === \"VBMS\" || !n.collection) || n.collection === \"feature\" || n.collection === \"Feature Collection\" || n.free === !0 || n.isFree === !0), \"isVibeCard\"), t = /* @__PURE__ */ f((n) => r.filter((e) => i(e) && e.rarity === n).length, \"countByRarity\"), l = /* @__PURE__ */ f((n) => r.filter((e) => i(e) && e.wear === n).length, \"countByWear\"), m = /* @__PURE__ */ f((n) => r.filter((e) => i(e) && e.foil === n).length, \"countByFoil\");\n    for (let n of y) {\n      let { id: e, requirement: d } = n, g = 0;\n      d.type === \"have_rarity\" ? g = t(d.rarity) : d.type === \"have_wear\" ? g = l(d.wear) : d.type === \"have_foil\" ? g = m(d.foil) : d.type === \"collect_count\" && (d.rarity ? g = t(d.rarity) : d.wear ? g = l(d.wear) : d.foil && (g = m(d.foil)));\n      let u = g >= d.count, w = await o.db.query(\"achievements\").withIndex(\n        \"by_player_achievement\",\n        (A) => A.eq(\"playerAddress\", a).eq(\"achievementId\", e)\n      ).first();\n      if (w) {\n        let A = w.completed;\n        await o.db.patch(w._id, {\n          progress: g,\n          completed: u,\n          completedAt: u && !A ? Date.now() : w.completedAt\n        }), u && !A && s.push(e);\n      } else\n        await o.db.insert(\"achievements\", {\n          playerAddress: a,\n          achievementId: e,\n          category: n.category,\n          completed: u,\n          progress: g,\n          target: d.count,\n          completedAt: u ? Date.now() : void 0\n        }), u && s.push(e);\n    }\n    return {\n      success: !0,\n      newlyCompleted: s,\n      newlyCompletedCount: s.length\n    };\n  }, \"handler\")\n}), $ = v({\n  args: {\n    playerAddress: h.string(),\n    achievementId: h.string()\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c, achievementId: r } = p, a = c.toLowerCase(), s = y.find((e) => e.id === r);\n    if (!s)\n      throw new Error(`Achievement ${r} not found in definitions`);\n    let i = await o.db.query(\"achievements\").withIndex(\n      \"by_player_achievement\",\n      (e) => e.eq(\"playerAddress\", a).eq(\"achievementId\", r)\n    ).first();\n    if (!i)\n      throw new Error(\"Achievement not unlocked yet\");\n    if (!i.completed)\n      throw new Error(\"Achievement not completed yet\");\n    if (i.claimedAt)\n      throw new Error(\"Achievement reward already claimed\");\n    let t = await o.db.query(\"profiles\").withIndex(\"by_address\", (e) => e.eq(\"address\", a)).first();\n    if (!t && c !== a && (t = await o.db.query(\"profiles\").withIndex(\"by_address\", (e) => e.eq(\"address\", c)).first()), !t)\n      throw new Error(\"Profile not found\");\n    await o.db.patch(i._id, {\n      claimedAt: Date.now()\n    });\n    let l = t.coins || 0, m = l + s.reward, n = (t.lifetimeEarned || 0) + s.reward;\n    return console.log(\"[claimAchievementReward] Adding coins:\", {\n      address: a,\n      achievementId: r,\n      oldCoins: l,\n      reward: s.reward,\n      newCoins: m\n    }), await o.db.patch(t._id, {\n      coins: m,\n      lifetimeEarned: n,\n      lastUpdated: Date.now()\n    }), {\n      success: !0,\n      reward: s.reward,\n      newBalance: m,\n      achievementName: s.name,\n      achievementId: s.id\n    };\n  }, \"handler\")\n}), S = b({\n  args: {\n    playerAddress: h.string()\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c } = p, r = c.toLowerCase(), a = await o.db.query(\"achievements\").withIndex(\"by_player\", (e) => e.eq(\"playerAddress\", r)).collect(), s = y.length, i = a.filter((e) => e.completed).length, t = a.filter((e) => e.claimedAt).length, l = i - t, m = a.filter((e) => e.completed && !e.claimedAt).reduce((e, d) => {\n      let g = y.find((u) => u.id === d.achievementId);\n      return e + (g?.reward || 0);\n    }, 0), n = {\n      rarity: a.filter((e) => e.category === \"rarity\"),\n      wear: a.filter((e) => e.category === \"wear\"),\n      foil: a.filter((e) => e.category === \"foil\"),\n      progressive: a.filter((e) => e.category === \"progressive\"),\n      social: a.filter((e) => e.category === \"social\")\n    };\n    return {\n      totalAchievements: s,\n      completedCount: i,\n      claimedCount: t,\n      unclaimedCount: l,\n      unclaimedRewards: m,\n      completionPercentage: Math.round(i / s * 100),\n      byCategory: {\n        rarity: {\n          total: y.filter((e) => e.category === \"rarity\").length,\n          completed: n.rarity.filter((e) => e.completed).length\n        },\n        wear: {\n          total: y.filter((e) => e.category === \"wear\").length,\n          completed: n.wear.filter((e) => e.completed).length\n        },\n        foil: {\n          total: y.filter((e) => e.category === \"foil\").length,\n          completed: n.foil.filter((e) => e.completed).length\n        },\n        progressive: {\n          total: y.filter((e) => e.category === \"progressive\").length,\n          completed: n.progressive.filter((e) => e.completed).length\n        },\n        social: {\n          total: y.filter((e) => e.category === \"social\").length,\n          completed: n.social.filter((e) => e.completed).length\n        }\n      }\n    };\n  }, \"handler\")\n}), B = v({\n  args: {\n    playerAddress: h.string(),\n    achievementId: h.string()\n    // \"enable_notifications\" or \"add_miniapp\"\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c, achievementId: r } = p, a = c.toLowerCase();\n    if (!y.find(\n      (t) => t.id === r && t.category === \"social\"\n    ))\n      return console.log(`[grantSocialAchievement] Invalid social achievement: ${r}`), { success: !1, reason: \"invalid_achievement\" };\n    let i = await o.db.query(\"achievements\").withIndex(\n      \"by_player_achievement\",\n      (t) => t.eq(\"playerAddress\", a).eq(\"achievementId\", r)\n    ).first();\n    return i ? (console.log(`[grantSocialAchievement] Achievement ${r} already exists for ${a}`), { success: !0, alreadyGranted: !0, completed: i.completed }) : (await o.db.insert(\"achievements\", {\n      playerAddress: a,\n      achievementId: r,\n      category: \"social\",\n      completed: !0,\n      progress: 1,\n      target: 1,\n      completedAt: Date.now()\n    }), console.log(`[grantSocialAchievement] \\u2705 Granted ${r} to ${a}`), { success: !0, alreadyGranted: !1, completed: !0 });\n  }, \"handler\")\n}), D = v({\n  args: {\n    fid: h.string(),\n    achievementId: h.string()\n    // \"enable_notifications\" or \"add_miniapp\"\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { fid: c, achievementId: r } = p;\n    if (!y.find(\n      (m) => m.id === r && m.category === \"social\"\n    ))\n      return console.log(`[grantSocialAchievementByFid] Invalid social achievement: ${r}`), { success: !1, reason: \"invalid_achievement\" };\n    let s = parseInt(c, 10);\n    if (isNaN(s))\n      return console.log(`[grantSocialAchievementByFid] Invalid FID format: ${c}`), { success: !1, reason: \"invalid_fid\" };\n    let i = await o.db.query(\"profiles\").withIndex(\"by_fid\", (m) => m.eq(\"farcasterFid\", s)).first();\n    if (!i)\n      return console.log(`[grantSocialAchievementByFid] No profile found for FID ${c}`), { success: !1, reason: \"profile_not_found\" };\n    let t = i.address.toLowerCase(), l = await o.db.query(\"achievements\").withIndex(\n      \"by_player_achievement\",\n      (m) => m.eq(\"playerAddress\", t).eq(\"achievementId\", r)\n    ).first();\n    return l ? (console.log(`[grantSocialAchievementByFid] Achievement ${r} already exists for FID ${c}`), { success: !0, alreadyGranted: !0, completed: l.completed }) : (await o.db.insert(\"achievements\", {\n      playerAddress: t,\n      achievementId: r,\n      category: \"social\",\n      completed: !0,\n      progress: 1,\n      target: 1,\n      completedAt: Date.now()\n    }), console.log(`[grantSocialAchievementByFid] \\u2705 Granted ${r} to FID ${c} (${t})`), { success: !0, alreadyGranted: !1, completed: !0 });\n  }, \"handler\")\n}), E = b({\n  args: {\n    playerAddress: h.string()\n  },\n  handler: /* @__PURE__ */ f(async (o, p) => {\n    let { playerAddress: c } = p, r = c.toLowerCase();\n    return (await o.db.query(\"achievements\").withIndex(\"by_player\", (i) => i.eq(\"playerAddress\", r)).collect()).filter((i) => i.completed && !i.claimedAt).map((i) => {\n      let t = y.find((l) => l.id === i.achievementId);\n      return {\n        ...i,\n        ...t\n      };\n    });\n  }, \"handler\")\n});\nexport {\n  F as checkAndUpdateAchievements,\n  $ as claimAchievementReward,\n  S as getAchievementStats,\n  x as getPlayerAchievements,\n  E as getUnclaimedAchievements,\n  B as grantSocialAchievement,\n  D as grantSocialAchievementByFid\n};\n//# sourceMappingURL=achievements.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/achievements.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"getPlayerAchievements\", \"query\", \"v\", \"__name\", \"ctx\", \"args\", \"playerAddress\", \"normalizedAddress\", \"playerAchievements\", \"q\", \"achievementMap\", \"a\", \"ALL_ACHIEVEMENTS\", \"definition\", \"existing\", \"checkAndUpdateAchievements\", \"mutation\", \"nfts\", \"newlyCompletedAchievements\", \"isVibeCard\", \"nft\", \"countByRarity\", \"rarity\", \"countByWear\", \"wear\", \"countByFoil\", \"foil\", \"achievement\", \"id\", \"requirement\", \"currentProgress\", \"isCompleted\", \"wasCompleted\", \"claimAchievementReward\", \"achievementId\", \"profile\", \"oldCoins\", \"newCoins\", \"lifetimeEarned\", \"getAchievementStats\", \"achievements\", \"totalAchievements\", \"completedCount\", \"claimedCount\", \"unclaimedCount\", \"unclaimedRewards\", \"sum\", \"def\", \"ach\", \"byCategory\", \"grantSocialAchievement\", \"grantSocialAchievementByFid\", \"fid\", \"fidNumber\", \"getUnclaimedAchievements\"]\n}\n"},{"path":"_deps/5IIR4IPG.js","source":"import {\n  a as i\n} from \"./5B5TEMMX.js\";\n\n// convex/achievementDefinitions.ts\nvar o = [\n  {\n    id: \"common_collector_1\",\n    name: \"Common Collector\",\n    description: \"Own your first Common card\",\n    icon: \"\\u{1F4E6}\",\n    category: \"rarity\",\n    requirement: {\n      type: \"have_rarity\",\n      count: 1,\n      rarity: \"Common\"\n    },\n    reward: 15\n  },\n  {\n    id: \"rare_collector_1\",\n    name: \"Rare Collector\",\n    description: \"Own your first Rare card\",\n    icon: \"\\u{1F48E}\",\n    category: \"rarity\",\n    requirement: {\n      type: \"have_rarity\",\n      count: 1,\n      rarity: \"Rare\"\n    },\n    reward: 30\n  },\n  {\n    id: \"epic_collector_1\",\n    name: \"Epic Collector\",\n    description: \"Own your first Epic card\",\n    icon: \"\\u{1F52E}\",\n    category: \"rarity\",\n    requirement: {\n      type: \"have_rarity\",\n      count: 1,\n      rarity: \"Epic\"\n    },\n    reward: 60\n  },\n  {\n    id: \"legendary_collector_1\",\n    name: \"Legendary Collector\",\n    description: \"Own your first Legendary card\",\n    icon: \"\\u2B50\",\n    category: \"rarity\",\n    requirement: {\n      type: \"have_rarity\",\n      count: 1,\n      rarity: \"Legendary\"\n    },\n    reward: 150\n  },\n  {\n    id: \"mythic_collector_1\",\n    name: \"Mythic Collector\",\n    description: \"Own your first Mythic card\",\n    icon: \"\\u{1F31F}\",\n    category: \"rarity\",\n    requirement: {\n      type: \"have_rarity\",\n      count: 1,\n      rarity: \"Mythic\"\n    },\n    reward: 300\n  }\n], c = [\n  {\n    id: \"pristine_first\",\n    name: \"Pristine Collector\",\n    description: \"Own your first Pristine card\",\n    icon: \"\\u2728\",\n    category: \"wear\",\n    requirement: {\n      type: \"have_wear\",\n      count: 1,\n      wear: \"Pristine\"\n    },\n    reward: 100\n  },\n  {\n    id: \"pristine_10\",\n    name: \"Pristine Hoarder\",\n    description: \"Own 10 Pristine cards\",\n    icon: \"\\u{1F4AB}\",\n    category: \"wear\",\n    requirement: {\n      type: \"have_wear\",\n      count: 10,\n      wear: \"Pristine\"\n    },\n    reward: 300\n  },\n  {\n    id: \"pristine_50\",\n    name: \"Pristine Master\",\n    description: \"Own 50 Pristine cards\",\n    icon: \"\\u{1F320}\",\n    category: \"wear\",\n    requirement: {\n      type: \"have_wear\",\n      count: 50,\n      wear: \"Pristine\"\n    },\n    reward: 1500\n  },\n  {\n    id: \"pristine_100\",\n    name: \"Pristine Legend\",\n    description: \"Own 100 Pristine cards\",\n    icon: \"\\u{1F451}\",\n    category: \"wear\",\n    requirement: {\n      type: \"have_wear\",\n      count: 100,\n      wear: \"Pristine\"\n    },\n    reward: 5e3\n  }\n], n = [\n  {\n    id: \"standard_foil_1\",\n    name: \"Shiny Collector\",\n    description: \"Own your first Standard Foil card\",\n    icon: \"\\u{1F3B4}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 1,\n      foil: \"Standard\"\n    },\n    reward: 60\n  },\n  {\n    id: \"standard_foil_10\",\n    name: \"Foil Enthusiast\",\n    description: \"Own 10 Standard Foil cards\",\n    icon: \"\\u{1F0CF}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 10,\n      foil: \"Standard\"\n    },\n    reward: 300\n  },\n  {\n    id: \"standard_foil_50\",\n    name: \"Foil Master\",\n    description: \"Own 50 Standard Foil cards\",\n    icon: \"\\u{1F3B0}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 50,\n      foil: \"Standard\"\n    },\n    reward: 1500\n  },\n  {\n    id: \"prize_foil_1\",\n    name: \"Prize Winner\",\n    description: \"Own your first Prize Foil card\",\n    icon: \"\\u{1F3C6}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 1,\n      foil: \"Prize\"\n    },\n    reward: 150\n  },\n  {\n    id: \"prize_foil_10\",\n    name: \"Elite Collector\",\n    description: \"Own 10 Prize Foil cards\",\n    icon: \"\\u{1F947}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 10,\n      foil: \"Prize\"\n    },\n    reward: 600\n  },\n  {\n    id: \"prize_foil_50\",\n    name: \"Prize Legend\",\n    description: \"Own 50 Prize Foil cards\",\n    icon: \"\\u{1F451}\",\n    category: \"foil\",\n    requirement: {\n      type: \"have_foil\",\n      count: 50,\n      foil: \"Prize\"\n    },\n    reward: 3e3\n  }\n], a = [\n  // COMMON PROGRESSIVE (15 coins per milestone)\n  {\n    id: \"common_progressive_1\",\n    name: \"Common Beginner I\",\n    description: \"Collect 1 Common card\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, rarity: \"Common\" },\n    reward: 3,\n    tier: 1\n  },\n  {\n    id: \"common_progressive_5\",\n    name: \"Common Beginner II\",\n    description: \"Collect 5 Common cards\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, rarity: \"Common\" },\n    reward: 15,\n    tier: 5\n  },\n  {\n    id: \"common_progressive_10\",\n    name: \"Common Collector I\",\n    description: \"Collect 10 Common cards\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, rarity: \"Common\" },\n    reward: 30,\n    tier: 10\n  },\n  {\n    id: \"common_progressive_25\",\n    name: \"Common Collector II\",\n    description: \"Collect 25 Common cards\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, rarity: \"Common\" },\n    reward: 83,\n    tier: 25\n  },\n  {\n    id: \"common_progressive_50\",\n    name: \"Common Master\",\n    description: \"Collect 50 Common cards\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, rarity: \"Common\" },\n    reward: 150,\n    tier: 50\n  },\n  {\n    id: \"common_progressive_100\",\n    name: \"Common Legend\",\n    description: \"Collect 100 Common cards\",\n    icon: \"\\u{1F4E6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, rarity: \"Common\" },\n    reward: 300,\n    tier: 100\n  },\n  // RARE PROGRESSIVE (50 coins per milestone)\n  {\n    id: \"rare_progressive_1\",\n    name: \"Rare Beginner I\",\n    description: \"Collect 1 Rare card\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, rarity: \"Rare\" },\n    reward: 15,\n    tier: 1\n  },\n  {\n    id: \"rare_progressive_5\",\n    name: \"Rare Beginner II\",\n    description: \"Collect 5 Rare cards\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, rarity: \"Rare\" },\n    reward: 83,\n    tier: 5\n  },\n  {\n    id: \"rare_progressive_10\",\n    name: \"Rare Collector I\",\n    description: \"Collect 10 Rare cards\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, rarity: \"Rare\" },\n    reward: 150,\n    tier: 10\n  },\n  {\n    id: \"rare_progressive_25\",\n    name: \"Rare Collector II\",\n    description: \"Collect 25 Rare cards\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, rarity: \"Rare\" },\n    reward: 400,\n    tier: 25\n  },\n  {\n    id: \"rare_progressive_50\",\n    name: \"Rare Master\",\n    description: \"Collect 50 Rare cards\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, rarity: \"Rare\" },\n    reward: 750,\n    tier: 50\n  },\n  {\n    id: \"rare_progressive_100\",\n    name: \"Rare Legend\",\n    description: \"Collect 100 Rare cards\",\n    icon: \"\\u{1F48E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, rarity: \"Rare\" },\n    reward: 1500,\n    tier: 100\n  },\n  // EPIC PROGRESSIVE (100 coins per milestone)\n  {\n    id: \"epic_progressive_1\",\n    name: \"Epic Beginner I\",\n    description: \"Collect 1 Epic card\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, rarity: \"Epic\" },\n    reward: 30,\n    tier: 1\n  },\n  {\n    id: \"epic_progressive_5\",\n    name: \"Epic Beginner II\",\n    description: \"Collect 5 Epic cards\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, rarity: \"Epic\" },\n    reward: 150,\n    tier: 5\n  },\n  {\n    id: \"epic_progressive_10\",\n    name: \"Epic Collector I\",\n    description: \"Collect 10 Epic cards\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, rarity: \"Epic\" },\n    reward: 300,\n    tier: 10\n  },\n  {\n    id: \"epic_progressive_25\",\n    name: \"Epic Collector II\",\n    description: \"Collect 25 Epic cards\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, rarity: \"Epic\" },\n    reward: 750,\n    tier: 25\n  },\n  {\n    id: \"epic_progressive_50\",\n    name: \"Epic Master\",\n    description: \"Collect 50 Epic cards\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, rarity: \"Epic\" },\n    reward: 1500,\n    tier: 50\n  },\n  {\n    id: \"epic_progressive_100\",\n    name: \"Epic Legend\",\n    description: \"Collect 100 Epic cards\",\n    icon: \"\\u{1F52E}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, rarity: \"Epic\" },\n    reward: 3e3,\n    tier: 100\n  },\n  // LEGENDARY PROGRESSIVE (200 coins per milestone)\n  {\n    id: \"legendary_progressive_1\",\n    name: \"Legendary Beginner I\",\n    description: \"Collect 1 Legendary card\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, rarity: \"Legendary\" },\n    reward: 60,\n    tier: 1\n  },\n  {\n    id: \"legendary_progressive_5\",\n    name: \"Legendary Beginner II\",\n    description: \"Collect 5 Legendary cards\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, rarity: \"Legendary\" },\n    reward: 300,\n    tier: 5\n  },\n  {\n    id: \"legendary_progressive_10\",\n    name: \"Legendary Collector I\",\n    description: \"Collect 10 Legendary cards\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, rarity: \"Legendary\" },\n    reward: 600,\n    tier: 10\n  },\n  {\n    id: \"legendary_progressive_25\",\n    name: \"Legendary Collector II\",\n    description: \"Collect 25 Legendary cards\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, rarity: \"Legendary\" },\n    reward: 1500,\n    tier: 25\n  },\n  {\n    id: \"legendary_progressive_50\",\n    name: \"Legendary Master\",\n    description: \"Collect 50 Legendary cards\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, rarity: \"Legendary\" },\n    reward: 3e3,\n    tier: 50\n  },\n  {\n    id: \"legendary_progressive_100\",\n    name: \"Legendary Overlord\",\n    description: \"Collect 100 Legendary cards\",\n    icon: \"\\u2B50\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, rarity: \"Legendary\" },\n    reward: 8e3,\n    tier: 100\n  },\n  // MYTHIC PROGRESSIVE (500 coins per milestone)\n  {\n    id: \"mythic_progressive_1\",\n    name: \"Mythic Beginner I\",\n    description: \"Collect 1 Mythic card\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, rarity: \"Mythic\" },\n    reward: 150,\n    tier: 1\n  },\n  {\n    id: \"mythic_progressive_5\",\n    name: \"Mythic Beginner II\",\n    description: \"Collect 5 Mythic cards\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, rarity: \"Mythic\" },\n    reward: 750,\n    tier: 5\n  },\n  {\n    id: \"mythic_progressive_10\",\n    name: \"Mythic Collector I\",\n    description: \"Collect 10 Mythic cards\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, rarity: \"Mythic\" },\n    reward: 1500,\n    tier: 10\n  },\n  {\n    id: \"mythic_progressive_25\",\n    name: \"Mythic Collector II\",\n    description: \"Collect 25 Mythic cards\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, rarity: \"Mythic\" },\n    reward: 4e3,\n    tier: 25\n  },\n  {\n    id: \"mythic_progressive_50\",\n    name: \"Mythic Master\",\n    description: \"Collect 50 Mythic cards\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, rarity: \"Mythic\" },\n    reward: 8e3,\n    tier: 50\n  },\n  {\n    id: \"mythic_progressive_100\",\n    name: \"Mythic God\",\n    description: \"Collect 100 Mythic cards - Ultimate Achievement!\",\n    icon: \"\\u{1F31F}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, rarity: \"Mythic\" },\n    reward: 15e3,\n    tier: 100\n  },\n  // PRISTINE PROGRESSIVE\n  {\n    id: \"pristine_progressive_1\",\n    name: \"Pristine Starter\",\n    description: \"Collect 1 Pristine card\",\n    icon: \"\\u2728\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, wear: \"Pristine\" },\n    reward: 30,\n    tier: 1\n  },\n  {\n    id: \"pristine_progressive_5\",\n    name: \"Pristine Keeper\",\n    description: \"Collect 5 Pristine cards\",\n    icon: \"\\u2728\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, wear: \"Pristine\" },\n    reward: 150,\n    tier: 5\n  },\n  {\n    id: \"pristine_progressive_10\",\n    name: \"Pristine Guardian\",\n    description: \"Collect 10 Pristine cards\",\n    icon: \"\\u{1F4AB}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, wear: \"Pristine\" },\n    reward: 300,\n    tier: 10\n  },\n  {\n    id: \"pristine_progressive_25\",\n    name: \"Pristine Curator\",\n    description: \"Collect 25 Pristine cards\",\n    icon: \"\\u{1F4AB}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, wear: \"Pristine\" },\n    reward: 750,\n    tier: 25\n  },\n  {\n    id: \"pristine_progressive_50\",\n    name: \"Pristine Archivist\",\n    description: \"Collect 50 Pristine cards\",\n    icon: \"\\u{1F320}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, wear: \"Pristine\" },\n    reward: 1500,\n    tier: 50\n  },\n  {\n    id: \"pristine_progressive_100\",\n    name: \"Pristine Perfectionist\",\n    description: \"Collect 100 Pristine cards\",\n    icon: \"\\u{1F451}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, wear: \"Pristine\" },\n    reward: 5e3,\n    tier: 100\n  },\n  // STANDARD FOIL PROGRESSIVE\n  {\n    id: \"standard_foil_progressive_1\",\n    name: \"Foil Starter\",\n    description: \"Collect 1 Standard Foil\",\n    icon: \"\\u{1F3B4}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, foil: \"Standard\" },\n    reward: 30,\n    tier: 1\n  },\n  {\n    id: \"standard_foil_progressive_5\",\n    name: \"Foil Collector\",\n    description: \"Collect 5 Standard Foils\",\n    icon: \"\\u{1F3B4}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, foil: \"Standard\" },\n    reward: 150,\n    tier: 5\n  },\n  {\n    id: \"standard_foil_progressive_10\",\n    name: \"Foil Hunter\",\n    description: \"Collect 10 Standard Foils\",\n    icon: \"\\u{1F0CF}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, foil: \"Standard\" },\n    reward: 300,\n    tier: 10\n  },\n  {\n    id: \"standard_foil_progressive_25\",\n    name: \"Foil Expert\",\n    description: \"Collect 25 Standard Foils\",\n    icon: \"\\u{1F0CF}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, foil: \"Standard\" },\n    reward: 750,\n    tier: 25\n  },\n  {\n    id: \"standard_foil_progressive_50\",\n    name: \"Foil Veteran\",\n    description: \"Collect 50 Standard Foils\",\n    icon: \"\\u{1F3B0}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, foil: \"Standard\" },\n    reward: 1500,\n    tier: 50\n  },\n  {\n    id: \"standard_foil_progressive_100\",\n    name: \"Foil Emperor\",\n    description: \"Collect 100 Standard Foils\",\n    icon: \"\\u{1F3B0}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, foil: \"Standard\" },\n    reward: 3e3,\n    tier: 100\n  },\n  // PRIZE FOIL PROGRESSIVE\n  {\n    id: \"prize_foil_progressive_1\",\n    name: \"Prize Rookie\",\n    description: \"Collect 1 Prize Foil\",\n    icon: \"\\u{1F3C6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 1, foil: \"Prize\" },\n    reward: 83,\n    tier: 1\n  },\n  {\n    id: \"prize_foil_progressive_5\",\n    name: \"Prize Champion\",\n    description: \"Collect 5 Prize Foils\",\n    icon: \"\\u{1F3C6}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 5, foil: \"Prize\" },\n    reward: 400,\n    tier: 5\n  },\n  {\n    id: \"prize_foil_progressive_10\",\n    name: \"Prize Master\",\n    description: \"Collect 10 Prize Foils\",\n    icon: \"\\u{1F947}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 10, foil: \"Prize\" },\n    reward: 750,\n    tier: 10\n  },\n  {\n    id: \"prize_foil_progressive_25\",\n    name: \"Prize Elite\",\n    description: \"Collect 25 Prize Foils\",\n    icon: \"\\u{1F947}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 25, foil: \"Prize\" },\n    reward: 2e3,\n    tier: 25\n  },\n  {\n    id: \"prize_foil_progressive_50\",\n    name: \"Prize Sovereign\",\n    description: \"Collect 50 Prize Foils\",\n    icon: \"\\u{1F451}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 50, foil: \"Prize\" },\n    reward: 4e3,\n    tier: 50\n  },\n  {\n    id: \"prize_foil_progressive_100\",\n    name: \"Prize Deity\",\n    description: \"Collect 100 Prize Foils - Legendary Status!\",\n    icon: \"\\u{1F451}\",\n    category: \"progressive\",\n    requirement: { type: \"collect_count\", count: 100, foil: \"Prize\" },\n    reward: 8e3,\n    tier: 100\n  }\n], s = [\n  {\n    id: \"enable_notifications\",\n    name: \"Stay Connected\",\n    description: \"Enable notifications to receive game updates\",\n    icon: \"\\u{1F514}\",\n    category: \"social\",\n    requirement: {\n      type: \"enable_notifications\",\n      count: 1\n    },\n    reward: 1e3\n  },\n  {\n    id: \"add_miniapp\",\n    name: \"VBMS Fan\",\n    description: \"Add VBMS to your Farcaster favorites\",\n    icon: \"\\u2B50\",\n    category: \"social\",\n    requirement: {\n      type: \"add_miniapp\",\n      count: 1\n    },\n    reward: 1e3\n  }\n], t = [\n  ...s,\n  // Social achievements first (notifications, miniapp)\n  ...o,\n  ...c,\n  ...n,\n  ...a\n];\nfunction d(e) {\n  return t.find((r) => r.id === e);\n}\ni(d, \"getAchievementById\");\nfunction l(e) {\n  return t.filter((r) => r.category === e);\n}\ni(l, \"getAchievementsByCategory\");\n\nexport {\n  o as a,\n  c as b,\n  n as c,\n  a as d,\n  s as e,\n  t as f,\n  d as g,\n  l as h\n};\n//# sourceMappingURL=5IIR4IPG.js.map\n","environment":"isolate"},{"path":"admin.js","source":"import {\n  h as y\n} from \"./_deps/QS6BMXBV.js\";\nimport {\n  b,\n  c as g,\n  d as f\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as c\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as l\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/admin.ts\nvar _ = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    console.log(\"\\u{1F6A8} STEP 1: Resetting profiles...\");\n    let a = await n.db.query(\"profiles\").take(100);\n    console.log(`\\u{1F4CA} Found ${a.length} profiles to reset`);\n    let o = 0, e = 0;\n    for (let s of a)\n      try {\n        let t = (/* @__PURE__ */ new Date()).toISOString().split(\"T\")[0];\n        await n.db.patch(s._id, {\n          coins: 0,\n          lifetimeEarned: 0,\n          lifetimeSpent: 0,\n          stats: {\n            totalPower: 0,\n            totalCards: 0,\n            openedCards: 0,\n            unopenedCards: 0,\n            pveWins: 0,\n            pveLosses: 0,\n            pvpWins: 0,\n            pvpLosses: 0,\n            attackWins: 0,\n            attackLosses: 0,\n            defenseWins: 0,\n            defenseLosses: 0\n          },\n          dailyLimits: {\n            pveWins: 0,\n            pvpMatches: 0,\n            lastResetDate: t,\n            firstPveBonus: !1,\n            firstPvpBonus: !1,\n            loginBonus: !1,\n            streakBonus: !1\n          },\n          winStreak: 0,\n          lastWinTimestamp: 0,\n          attacksToday: 0,\n          rematchesToday: 0,\n          lastUpdated: Date.now()\n        }), o++;\n      } catch (t) {\n        console.error(`Failed to reset profile ${s.address}:`, t), e++;\n      }\n    return console.log(`\\u2705 Reset ${o} profiles`), { profilesReset: o };\n  }, \"handler\")\n}), I = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"matches\").take(100);\n    if (a.length === 0)\n      return console.log(\"\\u2705 No more matches to delete\"), { deleted: 0, remaining: 0 };\n    for (let e of a)\n      try {\n        await n.db.delete(e._id);\n      } catch (s) {\n        console.error(`Failed to delete match ${e._id}:`, s);\n      }\n    let o = await n.db.query(\"matches\").take(1);\n    return console.log(`\\u{1F5D1}\\uFE0F Deleted ${a.length} matches`), {\n      deleted: a.length,\n      hasMore: o.length > 0\n    };\n  }, \"handler\")\n}), q = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"questProgress\").take(100);\n    for (let o of a)\n      try {\n        await n.db.delete(o._id);\n      } catch (e) {\n        console.error(`Failed to delete quest progress ${o._id}:`, e);\n      }\n    return console.log(`\\u2705 Deleted ${a.length} quest progress records`), { deleted: a.length };\n  }, \"handler\")\n}), S = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    console.log(\"\\u{1F504} Starting username normalization migration...\");\n    let a = await n.db.query(\"profiles\").take(100), o = 0, e = 0, s = [];\n    for (let t of a) {\n      let r = t.username, d = r.toLowerCase();\n      if (r !== d) {\n        let i = await n.db.query(\"profiles\").withIndex(\n          \"by_username\",\n          (u) => u.eq(\"username\", d)\n        ).first();\n        if (i && i._id !== t._id) {\n          console.warn(\n            `\\u26A0\\uFE0F CONFLICT: Cannot normalize \"${r}\" - already exists`\n          ), e++;\n          continue;\n        }\n        await n.db.patch(t._id, {\n          username: d\n        }), s.push(\n          `\\u2705 ${r} \\u2192 ${d}`\n        ), o++;\n      } else\n        e++;\n    }\n    return console.log(`\\u{1F4CA} Total: ${a.length}, Updated: ${o}, Skipped: ${e}`), {\n      success: !0,\n      totalProfiles: a.length,\n      updated: o,\n      skipped: e,\n      changes: s\n    };\n  }, \"handler\")\n}), x = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    console.log(\"\\u{1F6A8} Resetting all FREE cards...\");\n    let a = await n.db.query(\"cardInventory\").take(100);\n    console.log(`\\u{1F4CA} Found ${a.length} FREE cards`);\n    let o = new Set(a.map((t) => t.address));\n    console.log(`\\u{1F465} From ${o.size} players`);\n    let e = 0;\n    for (let t of a)\n      try {\n        await n.db.delete(t._id), e++;\n      } catch (r) {\n        console.error(`Failed to delete card ${t._id}:`, r);\n      }\n    console.log(`\\u{1F5D1}\\uFE0F Deleted ${e} cards`);\n    let s = 0;\n    for (let t of o)\n      try {\n        let r = await n.db.query(\"cardPacks\").withIndex(\"by_address_packType\", (d) => d.eq(\"address\", t).eq(\"packType\", \"basic\")).first();\n        r ? await n.db.patch(r._id, {\n          unopened: r.unopened + 1\n        }) : await n.db.insert(\"cardPacks\", {\n          address: t,\n          packType: \"basic\",\n          unopened: 1,\n          sourceId: \"reset_compensation\",\n          earnedAt: Date.now()\n        }), s++;\n      } catch (r) {\n        console.error(`Failed to give pack to ${t}:`, r);\n      }\n    return console.log(`\\u{1F381} Gave ${s} compensation packs`), {\n      success: !0,\n      cardsDeleted: e,\n      playersAffected: o.size,\n      packsGiven: s\n    };\n  }, \"handler\")\n}), C = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"cardInventory\").take(100);\n    return console.log(\"\\u{1F4CA} Total cards in cardInventory:\", a.length), a.length > 0 && console.log(\"\\u{1F3B4} Sample card:\", a[0]), {\n      totalCards: a.length,\n      sampleCard: a[0] || null\n    };\n  }, \"handler\")\n}), F = f({\n  args: { username: c.string() },\n  handler: /* @__PURE__ */ l(async (n, { username: a }) => {\n    let o = await n.db.query(\"profiles\").withIndex(\"by_username\", (d) => d.eq(\"username\", a.toLowerCase())).first();\n    if (!o)\n      return {\n        success: !1,\n        error: `Profile not found for username: ${a}`\n      };\n    let e = o.address;\n    console.log(\"\\u{1F50D} Found profile:\", { username: a, address: e });\n    let s = await n.db.query(\"cardInventory\").withIndex(\"by_address\", (d) => d.eq(\"address\", e)).take(1e3);\n    console.log(\"\\u{1F3B4} User has\", s.length, \"cards\");\n    let t = 0;\n    for (let d of s)\n      await n.db.delete(d._id), t++;\n    console.log(\"\\u{1F5D1}\\uFE0F Deleted\", t, \"cards\");\n    let r = await n.db.query(\"cardPacks\").withIndex(\"by_address\", (d) => d.eq(\"address\", e)).filter((d) => d.eq(d.field(\"packType\"), \"basic\")).first();\n    return r ? (await n.db.patch(r._id, {\n      unopened: r.unopened + 1\n    }), console.log(\"\\u{1F381} Added 1 pack to existing pack (total:\", r.unopened + 1, \")\")) : (await n.db.insert(\"cardPacks\", {\n      address: e,\n      packType: \"basic\",\n      unopened: 1,\n      sourceId: \"reset_compensation\",\n      earnedAt: Date.now()\n    }), console.log(\"\\u{1F381} Created new pack with 1 unopened\")), {\n      success: !0,\n      username: a,\n      address: e,\n      cardsDeleted: t,\n      packGiven: !0\n    };\n  }, \"handler\")\n}), v = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"cardInventory\").take(100);\n    console.log(\"\\u{1F50D} Found cards to delete:\", a.length);\n    let o = new Set(a.map((t) => t.address));\n    console.log(\"\\u{1F465} Unique addresses:\", o.size);\n    let e = 0;\n    for (let t of a)\n      await n.db.delete(t._id), e++;\n    console.log(\"\\u{1F5D1}\\uFE0F Deleted cards:\", e);\n    let s = 0;\n    for (let t of o) {\n      let r = await n.db.query(\"cardPacks\").withIndex(\"by_address\", (d) => d.eq(\"address\", t)).filter((d) => d.eq(d.field(\"packType\"), \"basic\")).first();\n      r ? await n.db.patch(r._id, {\n        unopened: r.unopened + 1\n      }) : await n.db.insert(\"cardPacks\", {\n        address: t,\n        packType: \"basic\",\n        unopened: 1,\n        sourceId: \"reset_compensation\",\n        earnedAt: Date.now()\n      }), s++;\n    }\n    return console.log(\"\\u{1F381} Packs given:\", s), {\n      success: !0,\n      cardsDeleted: e,\n      playersAffected: o.size,\n      packsGiven: s\n    };\n  }, \"handler\")\n}), P = f({\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"profiles\").take(100), o = 0, e = [];\n    for (let s of a) {\n      let t = s.coinsInbox || 0;\n      if (t > 0) {\n        let r = s.coins || 0, d = r + t;\n        await n.db.patch(s._id, {\n          coins: d,\n          coinsInbox: 0,\n          // ðŸ”’ SECURITY FIX (2026-01-01): Track lifetimeEarned\n          lifetimeEarned: (s.lifetimeEarned || 0) + t\n        }), await y(n, s.address, \"earn\", t, r, d, \"admin:claimAllCoinsInboxForAll\"), await n.db.insert(\"coinTransactions\", {\n          address: s.address.toLowerCase(),\n          amount: t,\n          type: \"earn\",\n          source: \"admin_inbox_claim\",\n          description: \"Admin batch inbox claim\",\n          timestamp: Date.now(),\n          balanceBefore: r,\n          balanceAfter: d\n        }), o += t, e.push({ address: s.address, moved: t });\n      }\n    }\n    return console.log(\"Moved \" + o + \" coins from coinsInbox to coins for \" + e.length + \" profiles\"), {\n      success: !0,\n      totalMoved: o,\n      profilesUpdated: e.length,\n      updates: e\n    };\n  }, \"handler\")\n}), L = f({\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"profiles\").take(100), o = 0, e = [];\n    for (let s of a) {\n      let t = s.inbox || 0;\n      if (t > 0) {\n        let r = s.coins || 0, d = r + t;\n        await n.db.patch(s._id, {\n          coins: d,\n          inbox: 0,\n          lifetimeEarned: (s.lifetimeEarned || 0) + t\n        }), await y(n, s.address, \"earn\", t, r, d, \"admin:moveInboxToCoinsForAll\"), await n.db.insert(\"coinTransactions\", {\n          address: s.address.toLowerCase(),\n          amount: t,\n          type: \"earn\",\n          source: \"admin_inbox_move\",\n          description: \"Admin moved inbox to coins\",\n          timestamp: Date.now(),\n          balanceBefore: r,\n          balanceAfter: d\n        }), o += t, e.push({ address: s.address, moved: t });\n      }\n    }\n    return console.log(\"Moved \" + o + \" from inbox to coins for \" + e.length + \" profiles\"), {\n      success: !0,\n      totalMoved: o,\n      profilesUpdated: e.length,\n      updates: e\n    };\n  }, \"handler\")\n}), U = f({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ l(async (n, { address: a }) => {\n    let o = a.toLowerCase(), e = await n.db.query(\"socialQuestProgress\").withIndex(\"by_player\", (s) => s.eq(\"playerAddress\", o)).take(100);\n    for (let s of e)\n      await n.db.delete(s._id);\n    return console.log(`Reset ${e.length} social quest progress entries for ${o}`), {\n      success: !0,\n      resetCount: e.length\n    };\n  }, \"handler\")\n}), R = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"dailyFreeClaims\").take(5e3);\n    for (let o of a)\n      await n.db.delete(o._id);\n    return console.log(`Deleted ${a.length} daily free claims`), { deleted: a.length };\n  }, \"handler\")\n}), h = {\n  \"0x0395df57f73ae2029fc27a152cd87070bcfbd4a4\": { username: \"faqih\", fid: 1063904, amountStolen: 1283500 },\n  \"0xbb367d00000f5e37ac702aab769725c299be2fc3\": { username: \"aliselalujp\", fid: 272115, amountStolen: 1096804 },\n  \"0x0e14598940443b91d097b5fd6a89b5808fe35a6b\": { username: \"fvgf\", fid: 1328239, amountStolen: 1094400 },\n  \"0x0230cf1cf5bf2537eb385772ff72edd5db45320d\": { username: \"ndmcm\", fid: 1129881, amountStolen: 1094400 },\n  \"0x9ab292251cfb32b8f405ae43a9851aba61696ded\": { username: \"ral\", fid: 1276961, amountStolen: 1094400 },\n  \"0xd4c3afc6adce7622400759d5194e5497b162e39d\": { username: \"fransiska\", fid: 1156056, amountStolen: 1090100 },\n  \"0xa43ae3956ecb0ce00c69576153a34db42d265cc6\": { username: \"jessica\", fid: 520832, amountStolen: 993303 },\n  \"0x04c6d801f529b8d4f118edb2722d5986d25a6ebf\": { username: \"khajoel\", fid: 528311, amountStolen: 991800 },\n  \"0xff793f745cb0f1131f0614bf54f4c4310f33f0ce\": { username: \"azwar\", fid: 544479, amountStolen: 991800 },\n  \"0x4ab24dac98c86778e2c837e5fa37ec5a2fdbffc0\": { username: \"uenxnx\", fid: 1322032, amountStolen: 803900 },\n  \"0xf73e59d03d45a227e5a37aace702599c15d7e64d\": { username: \"rapoer\", fid: 1168341, amountStolen: 455900 },\n  \"0xc85a10e41fdea999556f8779ea83e6cd1c5d0ded\": { username: \"desri\", fid: 518884, amountStolen: 303400 },\n  \"0x0f6cfb4f54fec1deca1f43f9c0294ff945b16eb9\": { username: \"venombaseeth\", fid: 308907, amountStolen: 270700 },\n  \"0x8cc9746c2bb68bd8f51e30ad96f67596b25b141b\": { username: \"hdhxhx\", fid: 1483990, amountStolen: 98400 },\n  \"0xdeb2f2f02d2d5a2be558868ca8f31440c73d3091\": { username: \"jxjsjsjxj\", fid: 1439850, amountStolen: 98400 },\n  \"0x2cb84569b69265eea55a8ceb361549548ca99749\": { username: \"aaggwgxgch\", fid: 1420345, amountStolen: 98400 },\n  \"0xcd890b0f59d7d1a98ffdf133d6b99458324e6621\": { username: \"nxnckck\", fid: 1328839, amountStolen: 98400 },\n  \"0xcda1b44a39cd827156334c69552d8ecdc697646f\": { username: \"hshdjxjck\", fid: 1328834, amountStolen: 98400 },\n  \"0x32c3446427e4481096dd96e6573aaf1fbbb9cff8\": { username: \"jsjxjxjd\", fid: 1328624, amountStolen: 98400 },\n  \"0xce1899674ac0b4137a5bb819e3849794a768eaf0\": { username: \"9\", fid: 1249352, amountStolen: 98400 },\n  \"0x0d2450ada31e8dfd414e744bc3d250280dca202e\": { username: \"komeng\", fid: 1031800, amountStolen: 95700 },\n  \"0x1915a871dea94e538a3c9ec671574ffdee6e7c45\": { username: \"miya\", fid: 252536, amountStolen: 95700 },\n  \"0x705d7d414c6d94a8d1a06aeffc7cd92882480bd9\": { username: \"wow\", fid: 443434, amountStolen: 60900 }\n}, E = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = 0, o = [];\n    for (let e of Object.keys(h)) {\n      let s = await n.db.query(\"profiles\").withIndex(\"by_address\", (t) => t.eq(\"address\", e)).first();\n      if (s && s.defenseDeck && s.defenseDeck.length > 0) {\n        let t = s.defenseDeck.length;\n        await n.db.patch(s._id, {\n          defenseDeck: [],\n          hasFullDefenseDeck: !1\n          // ðŸš€ BANDWIDTH FIX\n        }), a++, o.push({\n          address: e,\n          username: h[e].username,\n          deckSize: t\n        }), console.log(`Removed defense deck from exploiter: ${e} (${h[e].username}) - had ${t} cards`);\n      }\n    }\n    return { removedCount: a, removed: o };\n  }, \"handler\")\n}), M = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"voiceParticipants\").collect();\n    for (let o of a)\n      await n.db.delete(o._id);\n    return console.log(`[Admin] Voice cleanup: removed ${a.length} voice participants`), { deleted: a.length };\n  }, \"handler\")\n}), z = f({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    console.log(\"\\u{1F680} Starting hasFullDefenseDeck backfill migration...\");\n    let a = await n.db.query(\"profiles\").take(5e3), o = 0, e = 0, s = 0;\n    for (let t of a) {\n      let r = (t.defenseDeck?.length || 0) === 5;\n      if (t.hasFullDefenseDeck === r) {\n        s++;\n        continue;\n      }\n      await n.db.patch(t._id, {\n        hasFullDefenseDeck: r\n      }), r ? o++ : e++;\n    }\n    return console.log(\"\\u2705 Migration complete!\"), console.log(`   \\u{1F4CA} Total profiles: ${a.length}`), console.log(`   \\u2705 Updated WITH full deck: ${o}`), console.log(`   \\u274C Updated WITHOUT full deck: ${e}`), console.log(`   \\u23ED\\uFE0F Skipped (already correct): ${s}`), {\n      total: a.length,\n      updatedWithDeck: o,\n      updatedWithoutDeck: e,\n      skipped: s\n    };\n  }, \"handler\")\n}), O = f({\n  args: {\n    daysOld: c.optional(c.number())\n  },\n  handler: /* @__PURE__ */ l(async (n, { daysOld: a = 30 }) => {\n    let o = Date.now() - a * 24 * 60 * 60 * 1e3, e = {}, s = 100, t = await n.db.query(\"matches\").filter((i) => i.lt(i.field(\"timestamp\"), o)).take(100);\n    e.matches = t.length >= s ? s + \"+\" : String(t.length);\n    let r = await n.db.query(\"raidAttacks\").filter((i) => i.lt(i.field(\"createdAt\"), o)).take(100);\n    e.raidAttacks = r.length >= s ? s + \"+\" : String(r.length);\n    let d = await n.db.query(\"coinTransactions\").filter((i) => i.lt(i.field(\"timestamp\"), o)).take(100);\n    return e.coinTransactions = d.length >= s ? s + \"+\" : String(d.length), console.log(\"Records older than \" + a + \" days:\", e), {\n      daysOld: a,\n      cutoffDate: new Date(o).toISOString(),\n      counts: e\n    };\n  }, \"handler\")\n}), j = f({\n  args: { daysOld: c.optional(c.number()) },\n  handler: /* @__PURE__ */ l(async (n, { daysOld: a = 30 }) => {\n    let o = Date.now() - a * 24 * 60 * 60 * 1e3, e = await n.db.query(\"matches\").filter((s) => s.lt(s.field(\"timestamp\"), o)).take(100);\n    if (e.length === 0)\n      return { deleted: 0, hasMore: !1 };\n    for (let s of e)\n      await n.db.delete(s._id);\n    return console.log(\"Deleted \" + e.length + \" old matches\"), { deleted: e.length, hasMore: e.length === 100 };\n  }, \"handler\")\n}), B = f({\n  args: { daysOld: c.optional(c.number()) },\n  handler: /* @__PURE__ */ l(async (n, { daysOld: a = 30 }) => {\n    let o = Date.now() - a * 24 * 60 * 60 * 1e3, e = await n.db.query(\"raidAttacks\").filter((s) => s.lt(s.field(\"createdAt\"), o)).take(100);\n    if (e.length === 0)\n      return { deleted: 0, hasMore: !1 };\n    for (let s of e)\n      await n.db.delete(s._id);\n    return console.log(\"Deleted \" + e.length + \" old raid attacks\"), { deleted: e.length, hasMore: e.length === 100 };\n  }, \"handler\")\n}), W = f({\n  args: { daysOld: c.optional(c.number()) },\n  handler: /* @__PURE__ */ l(async (n, { daysOld: a = 60 }) => {\n    let o = Date.now() - a * 24 * 60 * 60 * 1e3, e = await n.db.query(\"coinTransactions\").filter((s) => s.lt(s.field(\"timestamp\"), o)).take(100);\n    if (e.length === 0)\n      return { deleted: 0, hasMore: !1 };\n    for (let s of e)\n      await n.db.delete(s._id);\n    return console.log(\"Deleted \" + e.length + \" old coin transactions\"), { deleted: e.length, hasMore: e.length === 100 };\n  }, \"handler\")\n}), N = f({\n  args: {\n    address: c.string()\n  },\n  handler: /* @__PURE__ */ l(async (n, a) => {\n    let o = a.address.toLowerCase(), e = await n.db.query(\"profiles\").withIndex(\"by_address\", (r) => r.eq(\"address\", o)).first();\n    if (!e)\n      return console.log(`\\u274C Profile not found for address: ${o}`), { success: !1, error: \"Profile not found\" };\n    let s = e.farcasterFid, t = e.username;\n    return await n.db.patch(e._id, {\n      farcasterFid: void 0,\n      fid: void 0\n    }), console.log(`\\u2705 Unlinked FID ${s} from @${t} (${o})`), {\n      success: !0,\n      unlinkedFid: s,\n      username: t,\n      address: o\n    };\n  }, \"handler\")\n}), V = f({\n  args: {\n    primaryAddress: c.string(),\n    secondaryAddress: c.string()\n  },\n  handler: /* @__PURE__ */ l(async (n, a) => {\n    let o = a.primaryAddress.toLowerCase(), e = a.secondaryAddress.toLowerCase(), s = await n.db.query(\"profiles\").withIndex(\"by_address\", (u) => u.eq(\"address\", o)).first();\n    if (!s)\n      return console.log(`\\u274C Primary profile not found: ${o}`), { success: !1, error: \"Primary profile not found\" };\n    let t = await n.db.query(\"profiles\").withIndex(\"by_address\", (u) => u.eq(\"address\", e)).first();\n    if (!t)\n      return console.log(`\\u274C Secondary profile not found: ${e}`), { success: !1, error: \"Secondary profile not found\" };\n    let r = Date.now(), d = await n.db.query(\"addressLinks\").withIndex(\"by_address\", (u) => u.eq(\"address\", e)).first();\n    d ? console.log(`\\u26A0\\uFE0F Link already exists: ${e} \\u2192 ${d.primaryAddress}`) : (await n.db.insert(\"addressLinks\", {\n      address: e,\n      primaryAddress: o,\n      linkedAt: r\n    }), console.log(`\\u{1F517} Created addressLink: ${e} \\u2192 ${o}`));\n    let i = s.linkedAddresses || [];\n    return i.includes(e) || (await n.db.patch(s._id, {\n      linkedAddresses: [...i, e],\n      lastUpdated: r\n    }), console.log(`\\u{1F4DD} Added ${e} to @${s.username}'s linkedAddresses`)), t.farcasterFid && (await n.db.patch(t._id, {\n      farcasterFid: void 0,\n      fid: void 0\n    }), console.log(`\\u{1F513} Removed FID from @${t.username}`)), console.log(`\\u2705 Linked @${t.username} (${e}) to @${s.username} (${o})`), {\n      success: !0,\n      primaryUsername: s.username,\n      secondaryUsername: t.username,\n      primaryAddress: o,\n      secondaryAddress: e\n    };\n  }, \"handler\")\n}), G = f({\n  args: {\n    primaryAddress: c.string(),\n    secondaryAddress: c.string()\n  },\n  handler: /* @__PURE__ */ l(async (n, a) => {\n    let o = a.primaryAddress.toLowerCase(), e = a.secondaryAddress.toLowerCase(), s = await n.db.query(\"profiles\").withIndex(\"by_address\", (m) => m.eq(\"address\", o)).first();\n    if (!s)\n      return console.log(`\\u274C Primary profile not found: ${o}`), { success: !1, error: \"Primary profile not found\" };\n    let t = await n.db.query(\"profiles\").withIndex(\"by_address\", (m) => m.eq(\"address\", e)).first();\n    if (!t)\n      return console.log(`\\u274C Secondary profile not found: ${e}`), { success: !1, error: \"Secondary profile not found\" };\n    let r = Date.now(), d = 0, i = t.coins || 0;\n    if (i > 0) {\n      let m = s.coins || 0;\n      await n.db.patch(s._id, {\n        coins: m + i,\n        lastUpdated: r\n      }), d = i, console.log(`\\u{1F4B0} Transferred ${i} coins to @${s.username}`);\n    }\n    await n.db.query(\"addressLinks\").withIndex(\"by_address\", (m) => m.eq(\"address\", e)).first() || (await n.db.insert(\"addressLinks\", {\n      address: e,\n      primaryAddress: o,\n      linkedAt: r\n    }), console.log(`\\u{1F517} Created addressLink: ${e} \\u2192 ${o}`));\n    let p = s.linkedAddresses || [];\n    return p.includes(e) || (await n.db.patch(s._id, {\n      linkedAddresses: [...p, e]\n    }), console.log(`\\u{1F4DD} Added ${e} to @${s.username}'s linkedAddresses`)), await n.db.patch(t._id, {\n      farcasterFid: void 0,\n      fid: void 0,\n      coins: 0\n    }), console.log(`\\u{1F513} Removed FID and reset balances from @${t.username}`), console.log(`\\u2705 Merged @${t.username} into @${s.username}`), {\n      success: !0,\n      primaryUsername: s.username,\n      secondaryUsername: t.username,\n      coinsTransferred: d\n    };\n  }, \"handler\")\n}), Q = f({\n  args: {\n    fid: c.number(),\n    amount: c.number(),\n    reason: c.optional(c.string())\n  },\n  handler: /* @__PURE__ */ l(async (n, a) => {\n    let o = await n.db.query(\"profiles\").withIndex(\"by_fid\", (t) => t.eq(\"farcasterFid\", a.fid)).first();\n    if (!o)\n      return console.log(`\\u274C Profile not found for FID: ${a.fid}`), { success: !1, error: \"Profile not found\" };\n    let e = o.coins || 0, s = e + a.amount;\n    return await n.db.patch(o._id, {\n      coins: s,\n      lifetimeEarned: (o.lifetimeEarned || 0) + a.amount,\n      lastUpdated: Date.now()\n    }), await y(\n      n,\n      o.address,\n      \"earn\",\n      a.amount,\n      e,\n      s,\n      \"admin:giveCoins\",\n      void 0,\n      { reason: a.reason || \"Admin grant\" }\n    ), await n.db.insert(\"coinTransactions\", {\n      address: o.address.toLowerCase(),\n      amount: a.amount,\n      type: \"earn\",\n      source: \"admin_grant\",\n      description: a.reason || \"Admin granted coins\",\n      timestamp: Date.now(),\n      balanceBefore: e,\n      balanceAfter: s\n    }), console.log(`\\u2705 Gave ${a.amount.toLocaleString()} coins to @${o.username} (FID ${a.fid})`), console.log(`   Balance: ${e.toLocaleString()} \\u2192 ${s.toLocaleString()}`), {\n      success: !0,\n      username: o.username,\n      fid: a.fid,\n      amount: a.amount,\n      balanceBefore: e,\n      balanceAfter: s\n    };\n  }, \"handler\")\n}), H = f({\n  args: {\n    batchSize: c.optional(c.number())\n  },\n  handler: /* @__PURE__ */ l(async (n, a) => {\n    let o = a.batchSize || 100;\n    console.log(\"=== BACKFILL: Burn earnings to lifetimeEarned ===\");\n    let e = await n.db.query(\"coinTransactions\").filter(\n      (i) => i.or(\n        i.eq(i.field(\"source\"), \"burn_card\"),\n        i.eq(i.field(\"source\"), \"burn_cards\")\n      )\n    ).take(1e4);\n    console.log(`Found ${e.length} burn transactions`);\n    let s = {};\n    for (let i of e) {\n      let u = i.address.toLowerCase();\n      s[u] = (s[u] || 0) + i.amount;\n    }\n    let t = Object.keys(s);\n    console.log(`Found ${t.length} unique addresses with burns`);\n    let r = 0, d = 0;\n    for (let i of t.slice(0, o)) {\n      let u = s[i], p = await n.db.query(\"profiles\").withIndex(\"by_address\", (k) => k.eq(\"address\", i)).first();\n      if (!p) {\n        d++;\n        continue;\n      }\n      let w = (p.lifetimeEarned || 0) + u;\n      await n.db.patch(p._id, {\n        lifetimeEarned: w\n      }), console.log(`\\u2705 ${p.username || i.slice(0, 10)}: +${u.toLocaleString()} \\u2192 ${w.toLocaleString()}`), r++;\n    }\n    return console.log(`\n=== DONE: Updated ${r}, Skipped ${d} ===`), { updated: r, skipped: d, total: t.length };\n  }, \"handler\")\n}), K = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"notificationTokens\").collect(), o = {\n      total: a.length,\n      byPlatform: {},\n      byApp: {},\n      withUrl: 0,\n      withoutUrl: 0\n    };\n    for (let e of a) {\n      let s = e.platform || \"unknown\";\n      o.byPlatform[s] = (o.byPlatform[s] || 0) + 1;\n      let t = e.app || \"vbms\";\n      o.byApp[t] = (o.byApp[t] || 0) + 1, e.url ? o.withUrl++ : o.withoutUrl++;\n    }\n    return o;\n  }, \"handler\")\n}), X = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => {\n    let a = await n.db.query(\"notificationTokens\").collect(), o = Date.now(), e = 10080 * 60 * 1e3, s = 720 * 60 * 60 * 1e3, t = {\n      total: a.length,\n      last7Days: 0,\n      last30Days: 0,\n      byDay: {},\n      byPlatform: {},\n      byApp: {}\n    };\n    for (let r of a) {\n      let d = o - r._creationTime;\n      if (d < e) {\n        t.last7Days++;\n        let p = new Date(r._creationTime).toISOString().split(\"T\")[0];\n        t.byDay[p] = (t.byDay[p] || 0) + 1;\n      }\n      d < s && t.last30Days++;\n      let i = r.platform || \"unknown\";\n      t.byPlatform[i] = (t.byPlatform[i] || 0) + 1;\n      let u = r.app || \"vbms\";\n      t.byApp[u] = (t.byApp[u] || 0) + 1;\n    }\n    return t;\n  }, \"handler\")\n}), J = b({\n  args: {},\n  handler: /* @__PURE__ */ l(async (n) => (await n.db.query(\"notificationTokens\").order(\"desc\").take(50)).map((o) => ({\n    fid: o.fid,\n    platform: o.platform || \"unknown\",\n    app: o.app || \"vbms\",\n    url: o.url ? o.url.includes(\"neynar\") ? \"neynar\" : \"warpcast\" : \"no-url\",\n    created: new Date(o._creationTime).toISOString().split(\"T\")[0]\n  })), \"handler\")\n}), Y = g({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ l(async (n, { address: a }) => {\n    let o = a.toLowerCase(), e = await n.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", o)).first();\n    if (!e)\n      throw new Error(\"Profile not found\");\n    let s = await n.db.query(\"farcasterCards\").withIndex(\"by_address\", (i) => i.eq(\"address\", o)).collect();\n    if (s.length === 0)\n      return { added: 0, message: \"No VibeFID cards found\" };\n    let t = e.ownedTokenIds || [], r = s.map((i) => i.fid.toString()).filter((i) => !t.includes(i));\n    if (r.length === 0)\n      return { added: 0, message: \"All VibeFID tokens already in ownedTokenIds\" };\n    let d = [...t, ...r];\n    return await n.db.patch(e._id, { ownedTokenIds: d }), {\n      added: r.length,\n      tokens: r,\n      message: `Added ${r.length} VibeFID token(s)`\n    };\n  }, \"handler\")\n}), Z = g({\n  args: {\n    address: c.string(),\n    tokenIds: c.array(c.string())\n  },\n  handler: /* @__PURE__ */ l(async (n, { address: a, tokenIds: o }) => {\n    let e = a.toLowerCase(), s = await n.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", e)).first();\n    if (!s)\n      throw new Error(\"Profile not found\");\n    let t = s.ownedTokenIds || [], r = o.filter((i) => !t.includes(i));\n    if (r.length === 0)\n      return { added: 0, message: \"All tokens already in ownedTokenIds\" };\n    let d = [...t, ...r];\n    return await n.db.patch(s._id, { ownedTokenIds: d }), {\n      added: r.length,\n      tokens: r,\n      message: `Added ${r.length} token(s)`\n    };\n  }, \"handler\")\n}), ee = g({\n  args: { address: c.string() },\n  handler: /* @__PURE__ */ l(async (n, { address: a }) => {\n    let o = a.toLowerCase(), e = await n.db.query(\"profiles\").withIndex(\"by_address\", (u) => u.eq(\"address\", o)).first();\n    if (!e)\n      throw new Error(\"Profile not found\");\n    let s = e.defenseDeck || [];\n    if (s.length === 0)\n      return { added: 0, message: \"No defense deck\" };\n    let t = e.ownedTokenIds || [], d = s.map((u) => u.tokenId).filter((u) => !t.includes(u));\n    if (d.length === 0)\n      return { added: 0, message: \"All defense deck tokens already in ownedTokenIds\" };\n    let i = [...t, ...d];\n    return await n.db.patch(e._id, { ownedTokenIds: i }), {\n      added: d.length,\n      tokens: d,\n      message: `Added ${d.length} defense deck token(s)`\n    };\n  }, \"handler\")\n});\nexport {\n  Z as addTokensToProfile,\n  Y as addVibeFIDToOwnedTokens,\n  H as backfillBurnEarnings,\n  z as backfillHasFullDefenseDeck,\n  P as claimAllCoinsInboxForAll,\n  M as cleanupAllVoice,\n  W as cleanupOldCoinTransactions,\n  j as cleanupOldMatches,\n  B as cleanupOldRaidAttacks,\n  K as countNotificationTokens,\n  O as countOldRecordsForCleanup,\n  C as debugCountFreeCards,\n  I as deleteMatchesBatch,\n  q as deleteQuestProgress,\n  v as executeResetFreeCards,\n  X as getAppStats,\n  J as getRecentTokens,\n  Q as giveCoinsToPlayer,\n  V as linkDuplicateProfile,\n  G as mergeDuplicateProfile,\n  L as moveInboxToCoinsForAll,\n  S as normalizeUsernames,\n  E as removeBlacklistedDefenseDecks,\n  R as resetDailyFreeClaims,\n  x as resetFreeCards,\n  _ as resetProfiles,\n  U as resetSocialQuestProgress,\n  F as resetUserFreeCards,\n  ee as syncDefenseDeckToOwned,\n  N as unlinkFidFromProfile\n};\n//# sourceMappingURL=admin.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/admin.ts\"],\n  \"mappings\": \"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\",\n  \"names\": [\"resetProfiles\", \"internalMutation\", \"__name\", \"ctx\", \"profiles\", \"resetCount\", \"errorCount\", \"profile\", \"today\", \"err\", \"deleteMatchesBatch\", \"matches\", \"match\", \"remaining\", \"deleteQuestProgress\", \"questProgress\", \"progress\", \"normalizeUsernames\", \"updated\", \"skipped\", \"changes\", \"originalUsername\", \"normalizedUsername\", \"conflict\", \"q\", \"resetFreeCards\", \"allCards\", \"uniqueAddresses\", \"c\", \"deletedCount\", \"card\", \"packsGiven\", \"address\", \"existingPack\", \"debugCountFreeCards\", \"resetUserFreeCards\", \"v\", \"username\", \"userCards\", \"executeResetFreeCards\", \"claimAllCoinsInboxForAll\", \"totalMoved\", \"updates\", \"coinsInbox\", \"balanceBefore\", \"balanceAfter\", \"createAuditLog\", \"moveInboxToCoinsForAll\", \"inbox\", \"balanceBefore2\", \"balanceAfter2\", \"resetSocialQuestProgress\", \"normalizedAddress\", \"p\", \"resetDailyFreeClaims\", \"claims\", \"claim\", \"EXPLOITER_BLACKLIST\", \"removeBlacklistedDefenseDecks\", \"removedCount\", \"removed\", \"deckSize\", \"cleanupAllVoice\", \"allParticipants\", \"backfillHasFullDefenseDeck\", \"updatedWithDeck\", \"updatedWithoutDeck\", \"hasFullDeck\", \"countOldRecordsForCleanup\", \"daysOld\", \"cutoffTime\", \"results\", \"LIMIT\", \"oldMatches\", \"oldRaidAttacks\", \"oldCoinTx\", \"cleanupOldMatches\", \"cleanupOldRaidAttacks\", \"oldAttacks\", \"attack\", \"cleanupOldCoinTransactions\", \"oldTx\", \"tx\", \"unlinkFidFromProfile\", \"args\", \"oldFid\", \"oldUsername\", \"linkDuplicateProfile\", \"primaryAddr\", \"secondaryAddr\", \"primaryProfile\", \"secondaryProfile\", \"now\", \"existingLink\", \"currentLinked\", \"mergeDuplicateProfile\", \"coinsTransferred\", \"secondaryCoins\", \"primaryCoins\", \"giveCoinsToPlayer\", \"backfillBurnEarnings\", \"batchSize\", \"burnTxs\", \"burnsByAddress\", \"addr\", \"addresses\", \"burnTotal\", \"newLifetime\", \"countNotificationTokens\", \"internalQuery\", \"allTokens\", \"stats\", \"token\", \"platform\", \"app\", \"getAppStats\", \"sevenDays\", \"thirtyDays\", \"age\", \"date\", \"getRecentTokens\", \"t\", \"addVibeFIDToOwnedTokens\", \"mutation\", \"vibefidCards\", \"currentTokens\", \"missingTokens\", \"tokenId\", \"newTokens\", \"addTokensToProfile\", \"tokenIds\", \"id\", \"syncDefenseDeckToOwned\", \"defenseDeck\"]\n}\n"},{"path":"_deps/QS6BMXBV.js","source":"import {\n  a as E,\n  b as M,\n  d as R\n} from \"./3SBKGJDS.js\";\nimport {\n  h as n\n} from \"./34SVKERO.js\";\nimport {\n  a as A\n} from \"./5B5TEMMX.js\";\n\n// convex/coinAudit.ts\nvar $ = R({\n  args: {\n    playerAddress: n.string(),\n    type: n.union(\n      n.literal(\"earn\"),\n      n.literal(\"spend\"),\n      n.literal(\"convert\"),\n      n.literal(\"claim\")\n    ),\n    amount: n.number(),\n    balanceBefore: n.number(),\n    balanceAfter: n.number(),\n    source: n.string(),\n    sourceId: n.optional(n.string()),\n    metadata: n.optional(n.object({\n      missionType: n.optional(n.string()),\n      difficulty: n.optional(n.string()),\n      txHash: n.optional(n.string()),\n      nonce: n.optional(n.string()),\n      reason: n.optional(n.string()),\n      prizeIndex: n.optional(n.number()),\n      spinId: n.optional(n.string())\n    }))\n  },\n  handler: /* @__PURE__ */ A(async (p, r) => {\n    let u = await p.db.insert(\"coinAuditLog\", {\n      playerAddress: r.playerAddress.toLowerCase(),\n      type: r.type,\n      amount: r.amount,\n      balanceBefore: r.balanceBefore,\n      balanceAfter: r.balanceAfter,\n      source: r.source,\n      sourceId: r.sourceId,\n      metadata: r.metadata,\n      timestamp: Date.now()\n    });\n    return console.log(`\\u{1F512} [AUDIT] ${r.type.toUpperCase()} | ${r.playerAddress} | ${r.amount} coins | ${r.source} | balance: ${r.balanceBefore} \\u2192 ${r.balanceAfter}`), u;\n  }, \"handler\")\n}), O = E({\n  args: {\n    playerAddress: n.string(),\n    limit: n.optional(n.number()),\n    type: n.optional(n.union(\n      n.literal(\"earn\"),\n      n.literal(\"spend\"),\n      n.literal(\"convert\"),\n      n.literal(\"claim\")\n    ))\n  },\n  handler: /* @__PURE__ */ A(async (p, { playerAddress: r, limit: u = 100, type: s }) => {\n    let g = r.toLowerCase(), c = await p.db.query(\"coinAuditLog\").withIndex(\"by_player\", (a) => a.eq(\"playerAddress\", g)).order(\"desc\").take(u);\n    return s ? c.filter((a) => a.type === s) : c;\n  }, \"handler\")\n}), H = E({\n  args: {\n    playerAddress: n.string()\n  },\n  handler: /* @__PURE__ */ A(async (p, { playerAddress: r }) => {\n    let u = r.toLowerCase(), s = await p.db.query(\"coinAuditLog\").withIndex(\"by_player\", (t) => t.eq(\"playerAddress\", u)).order(\"desc\").take(5e3), g = s.filter((t) => t.type === \"earn\").reduce((t, o) => t + o.amount, 0), h = s.filter((t) => t.type === \"spend\").reduce((t, o) => t + Math.abs(o.amount), 0), c = s.filter((t) => t.type === \"convert\").reduce((t, o) => t + o.amount, 0), a = s.filter((t) => t.type === \"claim\").reduce((t, o) => t + o.amount, 0), m = {};\n    s.forEach((t) => {\n      m[t.source] || (m[t.source] = { count: 0, total: 0 }), m[t.source].count++, m[t.source].total += t.amount;\n    });\n    let e = [], i = [...s].sort((t, o) => t.timestamp - o.timestamp);\n    for (let t = 0; t < i.length - 10; t++) {\n      let o = i[t + 10].timestamp - i[t].timestamp;\n      if (o < 6e4) {\n        e.push(`Rapid transactions: 11 transactions in ${(o / 1e3).toFixed(1)}s at ${new Date(i[t].timestamp).toISOString()}`);\n        break;\n      }\n    }\n    let d = {};\n    return s.forEach((t) => {\n      d[t.source] || (d[t.source] = []), d[t.source].push(t.timestamp);\n    }), Object.entries(d).forEach(([t, o]) => {\n      if (o.length > 5) {\n        let f = [...o].sort((S, _) => S - _), I = f[4] - f[0];\n        I < 3e4 && e.push(`Suspicious spam: ${t} called ${o.length} times, first 5 in ${(I / 1e3).toFixed(1)}s`);\n      }\n    }), {\n      totalTransactions: s.length,\n      totalEarned: g,\n      totalSpent: h,\n      totalConverted: c,\n      totalClaimed: a,\n      netBalance: g - h,\n      bySource: m,\n      suspicious: e,\n      firstTransaction: s.length > 0 ? new Date(Math.min(...s.map((t) => t.timestamp))).toISOString() : null,\n      lastTransaction: s.length > 0 ? new Date(Math.max(...s.map((t) => t.timestamp))).toISOString() : null\n    };\n  }, \"handler\")\n}), N = E({\n  args: {\n    hours: n.optional(n.number()),\n    minAmount: n.optional(n.number())\n  },\n  handler: /* @__PURE__ */ A(async (p, { hours: r = 24, minAmount: u = 5e3 }) => {\n    let s = Date.now() - r * 60 * 60 * 1e3, g = await p.db.query(\"coinAuditLog\").withIndex(\"by_timestamp\").filter((a) => a.gte(a.field(\"timestamp\"), s)).take(5e3), h = {};\n    g.forEach((a) => {\n      h[a.playerAddress] || (h[a.playerAddress] = []), h[a.playerAddress].push(a);\n    });\n    let c = [];\n    return Object.entries(h).forEach(([a, m]) => {\n      let e = m.filter((i) => i.type === \"earn\").reduce((i, d) => i + d.amount, 0);\n      if (e >= u) {\n        let i = m.map((o) => o.timestamp), d = Math.max(...i) - Math.min(...i), t = [];\n        e >= 5e3 && d < 6e5 && t.push(`High earnings in short time: ${e} TESTVBMS in ${(d / 6e4).toFixed(1)} min`), m.length > 20 && d < 3e5 && t.push(`High transaction volume: ${m.length} transactions in ${(d / 6e4).toFixed(1)} min`), t.length > 0 && c.push({\n          address: a,\n          totalEarned: e,\n          transactionCount: m.length,\n          timeSpan: d,\n          reasons: t\n        });\n      }\n    }), c.sort((a, m) => m.totalEarned - a.totalEarned);\n  }, \"handler\")\n}), U = M({\n  args: {\n    limit: n.optional(n.number())\n  },\n  handler: /* @__PURE__ */ A(async (p, { limit: r = 100 }) => {\n    let u = await p.db.query(\"coinAuditLog\").order(\"desc\").take(r);\n    return {\n      total: u.length,\n      logs: u\n    };\n  }, \"handler\")\n}), y = {\n  // Rapid claims detection\n  MAX_CLAIMS_PER_MINUTE: 3,\n  MAX_CLAIMS_PER_HOUR: 10,\n  // High volume detection\n  HIGH_AMOUNT_SINGLE_CLAIM: 1e5,\n  // 100k VBMS in one claim\n  HIGH_AMOUNT_PER_HOUR: 5e5,\n  // 500k VBMS per hour\n  // Rapid transactions detection\n  MAX_TRANSACTIONS_PER_MINUTE: 15,\n  SUSPICIOUS_EARN_RATE: 1e4\n  // 10k+ in 5 minutes\n}, x = M({\n  args: {},\n  handler: /* @__PURE__ */ A(async (p) => {\n    let r = Date.now(), u = r - 3600 * 1e3, s = r - 300 * 1e3, g = r - 60 * 1e3, h = await p.db.query(\"coinAuditLog\").withIndex(\"by_timestamp\").filter((e) => e.gte(e.field(\"timestamp\"), u)).take(3e3), c = [], a = {};\n    h.forEach((e) => {\n      a[e.playerAddress] || (a[e.playerAddress] = []), a[e.playerAddress].push(e);\n    }), Object.entries(a).forEach(([e, i]) => {\n      let d = i.filter((l) => l.type === \"convert\" || l.type === \"claim\"), t = d.filter((l) => l.timestamp > g), o = d.filter((l) => l.timestamp > u);\n      t.length >= y.MAX_CLAIMS_PER_MINUTE && c.push({\n        severity: \"critical\",\n        type: \"RAPID_CLAIMS\",\n        address: e,\n        details: `${t.length} claims in last minute (threshold: ${y.MAX_CLAIMS_PER_MINUTE})`,\n        timestamp: r\n      }), o.length >= y.MAX_CLAIMS_PER_HOUR && c.push({\n        severity: \"warning\",\n        type: \"HIGH_CLAIM_VOLUME\",\n        address: e,\n        details: `${o.length} claims in last hour (threshold: ${y.MAX_CLAIMS_PER_HOUR})`,\n        timestamp: r\n      });\n      let f = d.filter((l) => l.timestamp > u).reduce((l, L) => l + L.amount, 0);\n      f >= y.HIGH_AMOUNT_PER_HOUR && c.push({\n        severity: \"critical\",\n        type: \"HIGH_VOLUME_CLAIMS\",\n        address: e,\n        details: `${f.toLocaleString()} VBMS claimed in last hour (threshold: ${y.HIGH_AMOUNT_PER_HOUR.toLocaleString()})`,\n        timestamp: r\n      }), d.filter((l) => l.amount >= y.HIGH_AMOUNT_SINGLE_CLAIM).forEach((l) => {\n        c.push({\n          severity: \"warning\",\n          type: \"LARGE_SINGLE_CLAIM\",\n          address: e,\n          details: `Single claim of ${l.amount.toLocaleString()} VBMS (threshold: ${y.HIGH_AMOUNT_SINGLE_CLAIM.toLocaleString()})`,\n          timestamp: l.timestamp\n        });\n      });\n      let _ = i.filter((l) => l.type === \"earn\" && l.timestamp > s).reduce((l, L) => l + L.amount, 0);\n      _ >= y.SUSPICIOUS_EARN_RATE && c.push({\n        severity: \"warning\",\n        type: \"RAPID_EARNING\",\n        address: e,\n        details: `${_.toLocaleString()} TESTVBMS earned in 5 minutes (threshold: ${y.SUSPICIOUS_EARN_RATE.toLocaleString()})`,\n        timestamp: r\n      });\n      let b = i.filter((l) => l.timestamp > g);\n      b.length >= y.MAX_TRANSACTIONS_PER_MINUTE && c.push({\n        severity: \"critical\",\n        type: \"RAPID_TRANSACTIONS\",\n        address: e,\n        details: `${b.length} transactions in last minute (threshold: ${y.MAX_TRANSACTIONS_PER_MINUTE})`,\n        timestamp: r\n      });\n    });\n    let m = { critical: 0, warning: 1, info: 2 };\n    return c.sort((e, i) => m[e.severity] !== m[i.severity] ? m[e.severity] - m[i.severity] : i.timestamp - e.timestamp), {\n      totalAlerts: c.length,\n      critical: c.filter((e) => e.severity === \"critical\").length,\n      warning: c.filter((e) => e.severity === \"warning\").length,\n      alerts: c.slice(0, 50),\n      // Top 50 alerts\n      thresholds: y,\n      analyzedPlayers: Object.keys(a).length,\n      analyzedTransactions: h.length\n    };\n  }, \"handler\")\n}), P = M({\n  args: {},\n  handler: /* @__PURE__ */ A(async (p) => {\n    let r = Date.now() - 6048e5, u = await p.db.query(\"coinAuditLog\").withIndex(\"by_timestamp\").filter((e) => e.gte(e.field(\"timestamp\"), r)).take(1e4), s = {};\n    u.forEach((e) => {\n      s[e.playerAddress] || (s[e.playerAddress] = []), s[e.playerAddress].push(e);\n    });\n    let g = Object.keys(s), h = g.map(\n      (e) => p.db.query(\"profiles\").withIndex(\"by_address\", (i) => i.eq(\"address\", e)).first()\n    ), c = await Promise.all(h), a = {};\n    g.forEach((e, i) => {\n      c[i] && (a[e] = c[i]);\n    });\n    let m = [];\n    for (let e of g) {\n      let i = s[e], d = a[e];\n      if (!d) continue;\n      let t = 0, o = [], f = d.claimedTokens || 0, I = d.lifetimeEarned || 0, S = I > 0 ? f / I : f > 0 ? 999 : 0, _ = i.filter((l) => l.source === \"clearPendingWithoutRestore\"), b = i.filter((l) => l.type === \"claim\" && l.source === \"recordTESTVBMSConversion\");\n      _.length > 0 && (t += 100, o.push(`\\u{1F6A8} DOUBLE-SPEND: ${_.length}x`), S > 5 && f > 1e5 && (t += 50, o.push(`\\u26A0\\uFE0F RATIO: ${S.toFixed(1)}x`))), _.length === 0 && S > 100 && f > 5e5 && (t += 40, o.push(`\\u26A0\\uFE0F Very high ratio: ${S.toFixed(1)}x (might be burns)`)), b.length > 20 && (t += 20, o.push(`High claims this week: ${b.length}`)), t >= 50 && m.push({\n        address: e,\n        username: d.username || d.farcasterDisplayName || \"unknown\",\n        riskScore: t,\n        totalClaimedOnChain: f,\n        lifetimeEarned: I,\n        ratio: Math.round(S * 10) / 10,\n        claimCount: b.length,\n        flags: o\n      });\n    }\n    return m.sort((e, i) => i.riskScore - e.riskScore);\n  }, \"handler\")\n});\nasync function v(p, r, u, s, g, h, c, a, m) {\n  await p.db.insert(\"coinAuditLog\", {\n    playerAddress: r.toLowerCase(),\n    type: u,\n    amount: s,\n    balanceBefore: g,\n    balanceAfter: h,\n    source: c,\n    sourceId: a,\n    metadata: m,\n    timestamp: Date.now()\n  }), console.log(`\\u{1F512} [AUDIT] ${u.toUpperCase()} | ${r} | ${s} coins | ${c} | balance: ${g} \\u2192 ${h}`);\n}\nA(v, \"createAuditLog\");\n\nexport {\n  $ as a,\n  O as b,\n  H as c,\n  N as d,\n  U as e,\n  x as f,\n  P as g,\n  v as h\n};\n//# sourceMappingURL=QS6BMXBV.js.map\n","environment":"isolate"},{"path":"apiStats.js","source":"import {\n  a as i,\n  c as r\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as o\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a as s\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/apiStats.ts\nvar d = r({\n  args: {\n    key: o.string(),\n    // e.g., \"gift_nfts_total\", \"gift_nfts_cache_hit\", \"rpc_failed\"\n    amount: o.optional(o.number())\n  },\n  handler: /* @__PURE__ */ s(async (t, a) => {\n    let e = a.amount || 1, n = await t.db.query(\"apiStats\").withIndex(\"by_key\", (l) => l.eq(\"key\", a.key)).first();\n    n ? await t.db.patch(n._id, {\n      value: n.value + e,\n      lastUpdated: Date.now()\n    }) : await t.db.insert(\"apiStats\", {\n      key: a.key,\n      value: e,\n      lastUpdated: Date.now()\n    });\n  }, \"handler\")\n}), p = i({\n  args: {},\n  handler: /* @__PURE__ */ s(async (t) => {\n    let a = await t.db.query(\"apiStats\").collect(), e = {};\n    for (let n of a)\n      e[n.key] = n.value;\n    return e;\n  }, \"handler\")\n}), y = r({\n  args: {},\n  handler: /* @__PURE__ */ s(async (t) => {\n    let a = await t.db.query(\"apiStats\").collect();\n    for (let e of a)\n      await t.db.patch(e._id, { value: 0, lastUpdated: Date.now() });\n    return { reset: !0, count: a.length };\n  }, \"handler\")\n});\nexport {\n  p as getAll,\n  d as increment,\n  y as resetAll\n};\n//# sourceMappingURL=apiStats.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/apiStats.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;AASO,IAAMA,IAAYC,EAAS;AAAA,EAChC,MAAM;AAAA,IACJ,KAAKC,EAAE,OAAO;AAAA;AAAA,IACd,QAAQA,EAAE,SAASA,EAAE,OAAO,CAAC;AAAA,EAC/B;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,MAAS;AAC5B,QAAMC,IAASD,EAAK,UAAU,GACxBE,IAAW,MAAMH,EAAI,GACxB,MAAM,UAAU,EAChB,UAAU,UAAU,CAACI,MAAMA,EAAE,GAAG,OAAOH,EAAK,GAAG,CAAC,EAChD,MAAM;AAET,IAAIE,IACF,MAAMH,EAAI,GAAG,MAAMG,EAAS,KAAK;AAAA,MAC/B,OAAOA,EAAS,QAAQD;AAAA,MACxB,aAAa,KAAK,IAAI;AAAA,IACxB,CAAC,IAED,MAAMF,EAAI,GAAG,OAAO,YAAY;AAAA,MAC9B,KAAKC,EAAK;AAAA,MACV,OAAOC;AAAA,MACP,aAAa,KAAK,IAAI;AAAA,IACxB,CAAC;AAAA,EAEL,GAnBS;AAoBX,CAAC,GAGYG,IAASC,EAAM;AAAA,EAC1B,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAP,EAAA,OAAOC,MAAQ;AACtB,QAAMO,IAAQ,MAAMP,EAAI,GAAG,MAAM,UAAU,EAAE,QAAQ,GAC/CQ,IAAiC,CAAC;AACxC,aAAWC,KAAQF;AACjB,MAAAC,EAAOC,EAAK,GAAG,IAAIA,EAAK;AAE1B,WAAOD;AAAA,EACT,GAPS;AAQX,CAAC,GAGYE,IAAWb,EAAS;AAAA,EAC/B,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAE,EAAA,OAAOC,MAAQ;AACtB,QAAMO,IAAQ,MAAMP,EAAI,GAAG,MAAM,UAAU,EAAE,QAAQ;AACrD,aAAWS,KAAQF;AACjB,YAAMP,EAAI,GAAG,MAAMS,EAAK,KAAK,EAAE,OAAO,GAAG,aAAa,KAAK,IAAI,EAAE,CAAC;AAEpE,WAAO,EAAE,OAAO,IAAM,OAAOF,EAAM,OAAO;AAAA,EAC5C,GANS;AAOX,CAAC;\",\n  \"names\": [\"increment\", \"mutation\", \"v\", \"__name\", \"ctx\", \"args\", \"amount\", \"existing\", \"q\", \"getAll\", \"query\", \"stats\", \"result\", \"stat\", \"resetAll\"]\n}\n"},{"path":"arenaCardsData.js","source":"import {\n  a,\n  b\n} from \"./_deps/K5WLKJWZ.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  b as AVAILABLE_COLLECTIONS,\n  a as COLLECTION_CARDS\n};\n//# sourceMappingURL=arenaCardsData.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"_deps/K5WLKJWZ.js","source":"// convex/arenaCardsData.ts\nvar e = {\n  vibefid: [\n    {\n      tokenId: \"17355\",\n      name: \"VibeFID #17355\",\n      rarity: \"Legendary\",\n      power: 180,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmcwAbHooMSsC1EMb8u4EXaJTqNPRA4EJc7dLQAswoF2N6\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"263600\",\n      name: \"VibeFID #263600\",\n      rarity: \"Legendary\",\n      power: 100,\n      imageUrl: \"https://ipfs.io/ipfs/QmcaEzPvi1BdqyQ6ZPtRVZqUsrnzyuSmhdKqhTWaKSrcTm\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"329898\",\n      name: \"VibeFID #329898\",\n      rarity: \"Legendary\",\n      power: 100,\n      imageUrl: \"https://ipfs.io/ipfs/QmRFeqWzwLdBJ6WAXA8LnayyBcrY99VYFhgNm2ca3vyb2V\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"421001\",\n      name: \"VibeFID #421001\",\n      rarity: \"Legendary\",\n      power: 100,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmcaEzPvi1BdqyQ6ZPtRVZqUsrnzyuSmhdKqhTWaKSrcTm\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"14771\",\n      name: \"VibeFID #14771\",\n      rarity: \"Epic\",\n      power: 540,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmdfHJqBQ572w1Xpeu8EnVyoCQ1mM47xKiWxqv7E1RY5wU\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"214746\",\n      name: \"VibeFID #214746\",\n      rarity: \"Epic\",\n      power: 140,\n      imageUrl: \"https://ipfs.io/ipfs/QmaWKKQXrVkPRNdPuUuiyYhNDYcmgqd4vyhrSeavqub8aS\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"272956\",\n      name: \"VibeFID #272956\",\n      rarity: \"Epic\",\n      power: 50,\n      imageUrl: \"https://ipfs.io/ipfs/QmU13eApRwsDNMcogQJKm7JC6ctDMKoYcM2wzAwqPaWzcP\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"546879\",\n      name: \"VibeFID #546879\",\n      rarity: \"Epic\",\n      power: 50,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmaWKKQXrVkPRNdPuUuiyYhNDYcmgqd4vyhrSeavqub8aS\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"932921\",\n      name: \"VibeFID #932921\",\n      rarity: \"Epic\",\n      power: 50,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmPx1QDvMSz2dynitGoF9y3dwHf1r8fa16qWQB43QW9ara\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1009776\",\n      name: \"VibeFID #1009776\",\n      rarity: \"Epic\",\n      power: 50,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmWRQGriUYddX7aGYUFhAvasS11TYMwMVahXf2gRGjNLaQ\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1012281\",\n      name: \"VibeFID #1012281\",\n      rarity: \"Epic\",\n      power: 50,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/Qmaxu6YzN2VLekCvCfkCTJs8ienymswAm9T9HvLNHcdZ3e\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"199190\",\n      name: \"VibeFID #199190\",\n      rarity: \"Rare\",\n      power: 120,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmesxiKYmeZGNnFT6V46N9vbZENq9mq7PZaaNbCgYR5Bb3\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"203754\",\n      name: \"VibeFID #203754\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://ipfs.io/ipfs/QmRwFD7M4d4bJGJ97GL37R81EpiFV4CNHrB4YAgQCUWzWs\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"249478\",\n      name: \"VibeFID #249478\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmRwFD7M4d4bJGJ97GL37R81EpiFV4CNHrB4YAgQCUWzWs\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"249629\",\n      name: \"VibeFID #249629\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmTnvTnxPzozi4gcZJy2GNecT8Ngdbkz5v6x2h7QEXTcNH\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"316088\",\n      name: \"VibeFID #316088\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://ipfs.io/ipfs/QmdMRKMtLCTVWoX2EDNPJFS9JxUNv4rUWHmrs4MszvQa9H\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"903908\",\n      name: \"VibeFID #903908\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmdMRKMtLCTVWoX2EDNPJFS9JxUNv4rUWHmrs4MszvQa9H\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1078302\",\n      name: \"VibeFID #1078302\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmakmDMgbBsEM2rEyvatNn76P7UePJgWUarR3WXRHHUmr1\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"22415\",\n      name: \"VibeFID #22415\",\n      rarity: \"Common\",\n      power: 36,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmdeGgdhBeoumxcpDjJVC1uFU7WyFsg34bo6CmZ34nPq7p\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"214791\",\n      name: \"VibeFID #214791\",\n      rarity: \"Common\",\n      power: 20,\n      imageUrl: \"https://ipfs.io/ipfs/Qmao3mwyD6Y2vttk6e8k1D8Ae35m9DTNCJQXZgY2LUiUXE\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"271797\",\n      name: \"VibeFID #271797\",\n      rarity: \"Common\",\n      power: 14,\n      imageUrl: \"https://ipfs.io/ipfs/QmZzxZ2zSCK5dfygsZyWhSoe6kosv75A9rYyi8W2RQJjkb\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"301572\",\n      name: \"VibeFID #301572\",\n      rarity: \"Common\",\n      power: 14,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/Qmao3mwyD6Y2vttk6e8k1D8Ae35m9DTNCJQXZgY2LUiUXE\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"439094\",\n      name: \"VibeFID #439094\",\n      rarity: \"Common\",\n      power: 14,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmcBZJh28Aeb9DfyFLPHoq3eFMk9suDQe3G4Fvd79AWXYo\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"481376\",\n      name: \"VibeFID #481376\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmaVAnbPuJSjsmf81H9vttTc5d2zyy5GETHMgaGhXbYZg7\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"505211\",\n      name: \"VibeFID #505211\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmVE15A3bhEKXmFdLE7sH2xx5QhaNzrzcabSQdbFr22jmo\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"873944\",\n      name: \"VibeFID #873944\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmT8s8Csm5uVAWsEYwhRyrmxYPKmScFY3z1kxfM2Jybdtj\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"937300\",\n      name: \"VibeFID #937300\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmdsL3MpbrSMxfu5ddkJZSfgaWpyswCXiqrnqq31FafJxU\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1010556\",\n      name: \"VibeFID #1010556\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmZ1njjDF1zpaDd1aqSSQtiWvMRbmBd3K27rDbtAjsNeXn\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1068973\",\n      name: \"VibeFID #1068973\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.filebase.io/ipfs/QmfGfvfwznLpcmYdp2qWiatupUfSmsFwFyohkCPVk2TW4X\",\n      collection: \"vibefid\"\n    },\n    {\n      tokenId: \"1087677\",\n      name: \"VibeFID #1087677\",\n      rarity: \"Common\",\n      power: 10,\n      imageUrl: \"https://ipfs.io/ipfs/QmUc3GXDohqRS5WQYUErSWLt2eY3jY53A7ZVn3CEQizW3L\",\n      collection: \"vibefid\"\n    }\n  ],\n  gmvbrs: [\n    {\n      tokenId: \"8310\",\n      name: \"GM VBRS #8310\",\n      rarity: \"Mythic\",\n      power: 800,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4bd6ff5ef7ef432cebe3156ee75ba51e\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"3533\",\n      name: \"GM VBRS #3533\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe4c0a2300966226a4a04d3cff11e9e09\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"4297\",\n      name: \"GM VBRS #4297\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7fd7c45a7c1f3358eda3d6874a44e921\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"6354\",\n      name: \"GM VBRS #6354\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F89f576e9188c35512c204f4b76ebdbe7\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"7137\",\n      name: \"GM VBRS #7137\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fdd597b800429489b8d44c8ff3eebf33d\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"8556\",\n      name: \"GM VBRS #8556\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F06ce768c7731d6465ab1bb866ac32845\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"9446\",\n      name: \"GM VBRS #9446\",\n      rarity: \"Legendary\",\n      power: 600,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe950f018657af1f780431058ded7383a\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"10364\",\n      name: \"GM VBRS #10364\",\n      rarity: \"Legendary\",\n      power: 336,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fdd9a70aed050ab71df4113c6ff304314\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"10849\",\n      name: \"GM VBRS #10849\",\n      rarity: \"Legendary\",\n      power: 336,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F089ae8e0e2444e07182ceab2488f7841\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"12195\",\n      name: \"GM VBRS #12195\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9ab999ef5c9030b5d1c991ea82e6048f\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"19\",\n      name: \"GM VBRS #19\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F527d21ec0dc898b0ffe7a701615fdab2\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"22\",\n      name: \"GM VBRS #22\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9ed57c455f18416ee5da6bb7092087ff\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"27\",\n      name: \"GM VBRS #27\",\n      rarity: \"Epic\",\n      power: 112,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa6881f4ae5c588a98c2b43d4c54e4a53\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"28\",\n      name: \"GM VBRS #28\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd7076f6b2c0b60c1ad50da5c4991d6bc\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"2\",\n      name: \"GM VBRS #2\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F37f88a6387dfa870a1af29fd71a6e889\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"9\",\n      name: \"GM VBRS #9\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F43e3d28815d43840d5809795215b151e\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"17\",\n      name: \"GM VBRS #17\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F56c9ac0305ee0fd299886963f7a05833\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"21\",\n      name: \"GM VBRS #21\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Feaa319e42502e130aa60e9335a4e22db\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"4\",\n      name: \"GM VBRS #4\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F6e872b207d208916673dbc6b20da6c9d\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"6\",\n      name: \"GM VBRS #6\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8c48bac6db6bc95821c37731ef0727fb\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"8\",\n      name: \"GM VBRS #8\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2750181570ad4b753ab7b0ca581103f9\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"11\",\n      name: \"GM VBRS #11\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fecb7aa567a054ace376b206416ca2916\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"12\",\n      name: \"GM VBRS #12\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9b95f534be7b81453ceb3d3566d2350c\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"5414\",\n      name: \"GM VBRS #5414\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F441bdd04-66ec-47ca-41b0-59d7197bd000%2Fpublic\",\n      collection: \"gmvbrs\"\n    },\n    {\n      tokenId: \"5071\",\n      name: \"GM VBRS #5071\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc7464059-4417-4551-3a7a-3337dc033100%2Fpublic\",\n      collection: \"gmvbrs\"\n    }\n  ],\n  vibe: [\n    {\n      tokenId: \"3067\",\n      name: \"Vibe Most Wanted #3067\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2ba42b445cca1bfbdf6e3df92b6dc94f\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"5225\",\n      name: \"Vibe Most Wanted #5225\",\n      rarity: \"Legendary\",\n      power: 336,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fddd201991ef3b280a322b28b9b936ff2\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"5945\",\n      name: \"Vibe Most Wanted #5945\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F0c83313af1b9017149b6984b2a40a135\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"6070\",\n      name: \"Vibe Most Wanted #6070\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F57a017be175af2ad40ff83c8687fa336\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"8549\",\n      name: \"Vibe Most Wanted #8549\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F175f83c4e0c6b1c2ca3d6fa1bdadceed\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"9454\",\n      name: \"Vibe Most Wanted #9454\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb59cf185562cf730730a6f7abeb7647c\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"9856\",\n      name: \"Vibe Most Wanted #9856\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F652f21a00056a93b93d7ed4cc55d0522\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"10869\",\n      name: \"Vibe Most Wanted #10869\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fbb7d32006efceb8a144245da3fef5bd3\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"9\",\n      name: \"Vibe Most Wanted #9\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2108ff44d8a68a96ffab496796a2b995\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"13\",\n      name: \"Vibe Most Wanted #13\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F15e53335b8893e83d0224636a0743931\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"15\",\n      name: \"Vibe Most Wanted #15\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd3d6ff5a72b9034600cee2f7843aed29\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"3\",\n      name: \"Vibe Most Wanted #3\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb90069fd9d9da42c2cd6416d12da4073\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"10\",\n      name: \"Vibe Most Wanted #10\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4143f5ab0e395293d12b44caa4fcc0c9\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"12\",\n      name: \"Vibe Most Wanted #12\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7712a941ed369a9afbc26042a0cc9ebf\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"17\",\n      name: \"Vibe Most Wanted #17\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fbf230ec7950f78ec953164e7f35dc250\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"1\",\n      name: \"Vibe Most Wanted #1\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd6566f25ad2ec36e99fc6b57c334bead\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"2\",\n      name: \"Vibe Most Wanted #2\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa410e19f3dea9aff4b82aa382840babe\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"11\",\n      name: \"Vibe Most Wanted #11\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4c325b4afbee433b694fd1d74ef1733d\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"14\",\n      name: \"Vibe Most Wanted #14\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F6297be1687111c95500d587dc1f1ea46\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"16\",\n      name: \"Vibe Most Wanted #16\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F5bf943bac86dcb092632995e7810cee0\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"18\",\n      name: \"Vibe Most Wanted #18\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff4e2bbf182afbf2aa5a1b1f665a7c5d6\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"19\",\n      name: \"Vibe Most Wanted #19\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F5c844bd4db90082369bb6157fa8cde20\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"20\",\n      name: \"Vibe Most Wanted #20\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F574f5036b5ce6670196a24ef7f44519a\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"21\",\n      name: \"Vibe Most Wanted #21\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4e8cd2d7ff3f2007c1830af8b3d38d4f\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"22\",\n      name: \"Vibe Most Wanted #22\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F83bcc2df46c9011ae7cc6caa04df1e6a\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"4633\",\n      name: \"Vibe Most Wanted #4633\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc11c7ef2-d2c3-4af6-09d9-3e8093a88200%2Fpublic\",\n      collection: \"vibe\"\n    },\n    {\n      tokenId: \"7063\",\n      name: \"Vibe Most Wanted #7063\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F24969f85-7659-473d-deac-45f9b6dd5200%2Fpublic\",\n      collection: \"vibe\"\n    }\n  ],\n  americanfootball: [\n    {\n      tokenId: \"14\",\n      name: \"AMERICAN FOOTBALL #14\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F708d613803f656ef9ca85c2543ed66c7\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"9\",\n      name: \"AMERICAN FOOTBALL #9\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F1ac26fbe97c26c704cb938f7f031427f\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"11\",\n      name: \"AMERICAN FOOTBALL #11\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F975e9b7dfebfab333cc18bdf33cdfdd0\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"15\",\n      name: \"AMERICAN FOOTBALL #15\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fcc5aa34f86f3802f2c0e0e1ca9ab8ba6\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"2\",\n      name: \"AMERICAN FOOTBALL #2\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F61403fc80be2ee14d9e6c20b79d93b4e\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"3\",\n      name: \"AMERICAN FOOTBALL #3\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F900c765a415296db5779e646c06d6bbe\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4\",\n      name: \"AMERICAN FOOTBALL #4\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F765693007764b6bc7f364234cdf9d977\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5\",\n      name: \"AMERICAN FOOTBALL #5\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F08253d053ac358b14c4e30d22d7b13a5\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"6\",\n      name: \"AMERICAN FOOTBALL #6\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8b4de4cbd06998fdeda9cff64420f5b4\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"7\",\n      name: \"AMERICAN FOOTBALL #7\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4bd71170669fbb8ff22bf7190ebeaac7\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"8\",\n      name: \"AMERICAN FOOTBALL #8\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fad2c92e97485c73841c807ab651d32d4\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"12\",\n      name: \"AMERICAN FOOTBALL #12\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa2f50c22d55ff53e82d5ccd530fcced4\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"13\",\n      name: \"AMERICAN FOOTBALL #13\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff582a6d149ca8c2f7265994b2a8c4b69\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5329\",\n      name: \"AMERICAN FOOTBALL #5329\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F32f14aef41b7cc44b236d295ffd9381b\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"12039\",\n      name: \"#12039\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F44fb820b41d00520604d96998431f961\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"6604\",\n      name: \"AMERICAN FOOTBALL #6604\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fab9dc125-9529-46e3-4d2a-1c97adbcb300%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"1520\",\n      name: \"AMERICAN FOOTBALL #1520\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0xe3910325daaef5d969e6db5eca1ff0117bb160ae%2F5018280c52ee6d6ac75698423fc9cd%2Fd75018280c52ee6d6ac75698423fc9cd.png\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5185\",\n      name: \"AMERICAN FOOTBALL #5185\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0xe3910325daaef5d969e6db5eca1ff0117bb160ae%2F24c8f28d7dd44665db23f81c33c9bf%2Fd424c8f28d7dd44665db23f81c33c9bf.png\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4848\",\n      name: \"AMERICAN FOOTBALL #4848\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0xe3910325daaef5d969e6db5eca1ff0117bb160ae%2F3350116cf4dfa7972c29b44aaaa1ab%2F643350116cf4dfa7972c29b44aaaa1ab.png\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5643\",\n      name: \"AMERICAN FOOTBALL #5643\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F57ec57e3-0550-42a1-3bc3-f7d340ec5600%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5449\",\n      name: \"AMERICAN FOOTBALL #5449\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0xe3910325daaef5d969e6db5eca1ff0117bb160ae%2Fa97110f623ccf5b2c02b4347934490%2F8ea97110f623ccf5b2c02b4347934490.png\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"8512\",\n      name: \"AMERICAN FOOTBALL #8512\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe93ebec3-6630-4901-2cd1-5920e30b2d00%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"11195\",\n      name: \"AMERICAN FOOTBALL #11195\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3a7fa506-d78c-492f-347f-671e63bd3d00%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4246\",\n      name: \"AMERICAN FOOTBALL #4246\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3492b5c6-01ad-4ce6-d74b-e06658dc6200%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"5122\",\n      name: \"AMERICAN FOOTBALL #5122\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe0bd3e64-ed3b-4a21-8659-224d93a4aa00%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4874\",\n      name: \"AMERICAN FOOTBALL #4874\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F50d5c6f7-cd8f-4059-dcc5-afcfaa146d00%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4165\",\n      name: \"AMERICAN FOOTBALL #4165\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F8300b5e1-7625-467b-c873-b10dbd7a4200%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"300\",\n      name: \"AMERICAN FOOTBALL #300\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1ec54729-10a3-418b-cde3-0db369210d00%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"624\",\n      name: \"AMERICAN FOOTBALL #624\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3c9b86fe-8214-4c51-0290-61abd455e900%2Fpublic\",\n      collection: \"americanfootball\"\n    },\n    {\n      tokenId: \"4980\",\n      name: \"AMERICAN FOOTBALL #4980\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F95cc2638-c06c-4825-0d27-6f4cc2f44b00%2Fpublic\",\n      collection: \"americanfootball\"\n    }\n  ],\n  viberuto: [\n    {\n      tokenId: \"2360\",\n      name: \"Viberuto  Packs #2360\",\n      rarity: \"Mythic\",\n      power: 800,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e2565c1-2784-4287-f1de-a66794d9ae00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"5142\",\n      name: \"Viberuto  Packs #5142\",\n      rarity: \"Mythic\",\n      power: 1440,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e2565c1-2784-4287-f1de-a66794d9ae00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"664\",\n      name: \"Viberuto  Packs #664\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3fc8d2b8-f76e-47a5-8370-ab0233bc2800%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"1071\",\n      name: \"Viberuto  Packs #1071\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1bcbc7e7-4de6-41ca-bf77-56423f322000%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"3481\",\n      name: \"Viberuto  Packs #3481\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F137200cd-ab9d-4268-1c48-4cecb792cc00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"3712\",\n      name: \"Viberuto  Packs #3712\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F6b09472f-3eff-4d37-fe7e-084eb81a9f00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"5598\",\n      name: \"Viberuto  Packs #5598\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F6a013762-f2ae-4fe7-7d5d-2a597b2e4b00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"4980\",\n      name: \"Viberuto  Packs #4980\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F70a26cb7-c66e-415c-6f9f-6ff614b65d00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"4633\",\n      name: \"Viberuto  Packs #4633\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F346cd4f5-80c2-4aa9-49d7-382e06dfc200%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"4983\",\n      name: \"Viberuto  Packs #4983\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F22a0bd8a-a147-46c7-34e0-39655785e500%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"5414\",\n      name: \"Viberuto  Packs #5414\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1dfeb6a4-1074-42d5-aa06-0675f8430300%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"7023\",\n      name: \"Viberuto  Packs #7023\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F6c3b57d4-a310-4887-c588-51c2bb652500%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"7063\",\n      name: \"Viberuto  Packs #7063\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F34a9c84b-8644-458b-2286-f87fb18fcf00%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"5071\",\n      name: \"Viberuto  Packs #5071\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F393565e5-ad08-4642-aab9-a846856b4000%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2206\",\n      name: \"Viberuto  Packs #2206\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa417f4d2-8d17-43d5-e043-4f661ccdc800%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"4143\",\n      name: \"Viberuto  Packs #4143\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x70b4005a83a0b39325d27cf31bd4a7a30b15069f%2Fd3abe28a1ec25bb8c73b6f468855b8%2Fb0d3abe28a1ec25bb8c73b6f468855b8.png\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"6317\",\n      name: \"Viberuto  Packs #6317\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x70b4005a83a0b39325d27cf31bd4a7a30b15069f%2Fe6630662718cca9f1840cbdd2c88f5%2Fe8e6630662718cca9f1840cbdd2c88f5.png\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2607\",\n      name: \"Viberuto  Packs #2607\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x70b4005a83a0b39325d27cf31bd4a7a30b15069f%2F8d57784026cda686f0a7ebfa5ca668%2Fce8d57784026cda686f0a7ebfa5ca668.png\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2132\",\n      name: \"Viberuto  Packs #2132\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F4d079122-868d-43fd-1378-be2b25d9a600%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2174\",\n      name: \"Viberuto  Packs #2174\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb8303c70-8616-489d-55e2-998a98a12800%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2096\",\n      name: \"Viberuto  Packs #2096\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F264c5ecb-6e69-4a50-657b-72c74f3e7400%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2105\",\n      name: \"Viberuto  Packs #2105\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F7ea4cfdc-1b5d-4973-395e-56edeb409100%2Fpublic\",\n      collection: \"viberuto\"\n    },\n    {\n      tokenId: \"2127\",\n      name: \"Viberuto  Packs #2127\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb82f5ca6-b76b-48c9-cc35-8568e8e03500%2Fpublic\",\n      collection: \"viberuto\"\n    }\n  ],\n  meowverse: [\n    {\n      tokenId: \"15743\",\n      name: \"Meowverse #15743\",\n      rarity: \"Mythic\",\n      power: 800,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F17626457373f1dc8f295656508fcfcf7\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"24106\",\n      name: \"Meowverse #24106\",\n      rarity: \"Mythic\",\n      power: 1120,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F682885ff305b5c9d114cc880750bcfcf\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"15921\",\n      name: \"Meowverse #15921\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb62ae1daf52a43416dc9116ddae09ab3\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"25252\",\n      name: \"Meowverse #25252\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8ddd7324c3012d74c436d89cf2beeca9\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"17\",\n      name: \"Meowverse #17\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4f54e249caf1c9e74258cf2c2f00d6d7\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"8\",\n      name: \"Meowverse #8\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F324e660b079ee710a6d6105ef6ba57c5\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"20\",\n      name: \"Meowverse #20\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9e22d3e0846b560b22f74b66c754bf5d\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"22\",\n      name: \"Meowverse #22\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ffebd4651932d32e8477836c1a63877f4\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"28\",\n      name: \"Meowverse #28\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8fa50ebb4b44e96fc93fb6241cf24f34\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"29\",\n      name: \"Meowverse #29\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa68d1324afd0e6eeabd9223e095a8afe\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"7\",\n      name: \"Meowverse #7\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9c12283d90a4df768e7064928be26558\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"13\",\n      name: \"Meowverse #13\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe20a4c613f722b1a4a833e1fa1a0c100\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"14\",\n      name: \"Meowverse #14\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F11193b2748ca3e6396ccd330a094b7e9\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"15\",\n      name: \"Meowverse #15\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9b232dd694215d68bebfa02b2dc1ed99\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"16\",\n      name: \"Meowverse #16\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa8b29dc5f9e5acf5712698aad72a473c\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"18\",\n      name: \"Meowverse #18\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe5b521f2e44732f831118f2e16e9fd79\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"19\",\n      name: \"Meowverse #19\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe86d6eeccf583c5dfbe7aee28780683a\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"21\",\n      name: \"Meowverse #21\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff89a780c9d2de4200153605d175db93f\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"23\",\n      name: \"Meowverse #23\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F203ceb3cfcbd344f0e9688d4f5706337\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"24\",\n      name: \"Meowverse #24\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F4eff4bfeea2f511c861aaedb97684e95\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"2174\",\n      name: \"Meowverse #2174\",\n      rarity: \"Epic\",\n      power: 112,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc923890e-8e93-439f-87c9-79ee6b309100%2Fpublic\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"4980\",\n      name: \"Meowverse #4980\",\n      rarity: \"Epic\",\n      power: 112,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F7cf53bf7-b360-4f18-8f47-35aeb0fa2600%2Fpublic\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"134\",\n      name: \"Meowverse #134\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd20a156c-ce19-4427-1fd0-728733118300%2Fpublic\",\n      collection: \"meowverse\"\n    },\n    {\n      tokenId: \"2181\",\n      name: \"Meowverse #2181\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F51b682ad-0b84-4f89-5c76-9cae729acd00%2Fpublic\",\n      collection: \"meowverse\"\n    }\n  ],\n  poorlydrawnpepes: [\n    {\n      tokenId: \"1119\",\n      name: \"poorly drawn pepes #1119\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F3da08c6e8d2f141c55241ad41e5a520e\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"1264\",\n      name: \"poorly drawn pepes #1264\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb0b9ab118be4bea0d025add136c267f3\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"3126\",\n      name: \"poorly drawn pepes #3126\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fefaf2012f1d2cb5536ffe95b7f30c737\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"3205\",\n      name: \"poorly drawn pepes #3205\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7e15428ae1f97bd9c318d2a5edddc5d4\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"4676\",\n      name: \"poorly drawn pepes #4676\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F15816bbe5e75b5101a2d64c74c224acf\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"5268\",\n      name: \"poorly drawn pepes #5268\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2132541cd4094700ee7d1b10dbaa3b72\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"1\",\n      name: \"poorly drawn pepes #1\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F76e5688ccc192abdad64cbb4d809fca3\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"4460\",\n      name: \"poorly drawn pepes #4460\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F97baf65f-6363-4231-db61-be7765c09300%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"1710\",\n      name: \"poorly drawn pepes #1710\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe5aa17c9-50fb-4ffa-76a7-0e8bb0a46e00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"597\",\n      name: \"poorly drawn pepes #597\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb5d0ad19-ab01-4c40-d7fc-af0d47a72d00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"3121\",\n      name: \"poorly drawn pepes #3121\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F596ffdae-1f15-4830-1bf1-1f17b1faeb00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"6087\",\n      name: \"poorly drawn pepes #6087\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F274d3780-1d9b-46c9-b438-b3b3a81f2800%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"758\",\n      name: \"poorly drawn pepes #758\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F596ffdae-1f15-4830-1bf1-1f17b1faeb00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"3784\",\n      name: \"poorly drawn pepes #3784\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Feae08439-1f94-423e-8bf5-4b2c79953500%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"600\",\n      name: \"poorly drawn pepes #600\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe5aa17c9-50fb-4ffa-76a7-0e8bb0a46e00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"5434\",\n      name: \"poorly drawn pepes #5434\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fec4a8dff-f40c-45d5-8126-87a447328a00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"5921\",\n      name: \"poorly drawn pepes #5921\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Feae08439-1f94-423e-8bf5-4b2c79953500%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"2201\",\n      name: \"poorly drawn pepes #2201\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F97baf65f-6363-4231-db61-be7765c09300%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"3790\",\n      name: \"poorly drawn pepes #3790\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F596ffdae-1f15-4830-1bf1-1f17b1faeb00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"397\",\n      name: \"poorly drawn pepes #397\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F596ffdae-1f15-4830-1bf1-1f17b1faeb00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"411\",\n      name: \"poorly drawn pepes #411\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe5aa17c9-50fb-4ffa-76a7-0e8bb0a46e00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"624\",\n      name: \"poorly drawn pepes #624\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F223a82bb-93f1-44ef-df2a-f01232186900%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"1870\",\n      name: \"poorly drawn pepes #1870\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F42a29d00-e37f-4f06-b931-d2939058e300%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    },\n    {\n      tokenId: \"1874\",\n      name: \"poorly drawn pepes #1874\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F38a34663-f47b-4fcd-1448-bdad627f1e00%2Fpublic\",\n      collection: \"poorlydrawnpepes\"\n    }\n  ],\n  teampothead: [\n    {\n      tokenId: \"100\",\n      name: \"Team Pothead #100\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7efb950dd79ff1d2cb986f2b675f779d\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"300\",\n      name: \"Team Pothead #300\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F85b5a75fbe9c1f329e98c725cc244bf0\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2425\",\n      name: \"Team Pothead #2425\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F86ef1d9a-2628-4a1a-4477-be0614e8ed00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2591\",\n      name: \"Team Pothead #2591\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3467e6cf-2a63-481d-dd3c-45f02af5c400%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2127\",\n      name: \"Team Pothead #2127\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3467e6cf-2a63-481d-dd3c-45f02af5c400%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1870\",\n      name: \"Team Pothead #1870\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb2fa379d-ed71-4ba1-2aee-e6bc64fffb00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1876\",\n      name: \"Team Pothead #1876\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Ff2b1bdcc-3616-45e6-994d-5472ab419800%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2632\",\n      name: \"Team Pothead #2632\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F984b1dbb-1cc4-41a1-2df8-bc09bccf5a00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2633\",\n      name: \"Team Pothead #2633\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc8de21ac-4b65-4f30-ad7e-660fff071d00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2181\",\n      name: \"Team Pothead #2181\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3467e6cf-2a63-481d-dd3c-45f02af5c400%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2431\",\n      name: \"Team Pothead #2431\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F18513e8b-f3dc-4e1f-7d12-41ec77d60b00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2562\",\n      name: \"Team Pothead #2562\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fee2a659e-41fb-42ed-9f6c-9dd17dc7c900%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2435\",\n      name: \"Team Pothead #2435\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Feb7aa46d-05ff-4b40-0321-e4349ba32b00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2049\",\n      name: \"Team Pothead #2049\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x1f16007c7f08bf62ad37f8cfaf87e1c0cf8e2aea%2Ff6c498929e57c17cbbfcd2c892a834%2Fbaf6c498929e57c17cbbfcd2c892a834.png\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2096\",\n      name: \"Team Pothead #2096\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc8de21ac-4b65-4f30-ad7e-660fff071d00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1874\",\n      name: \"Team Pothead #1874\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F18513e8b-f3dc-4e1f-7d12-41ec77d60b00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1204\",\n      name: \"Team Pothead #1204\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2876ba67-ed31-4f3d-4a9f-2f367d731c00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2626\",\n      name: \"Team Pothead #2626\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F0ba9233c-bf68-4b08-8595-4e8d32972700%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1233\",\n      name: \"Team Pothead #1233\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fdfb3f6b54c62095a16bf66009a00526f\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2105\",\n      name: \"Team Pothead #2105\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F227bea90-9cde-4e44-d495-542fe7523000%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"880\",\n      name: \"Team Pothead #880\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb1620a8d-1b1b-499e-b728-9cc7027de000%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"411\",\n      name: \"Team Pothead #411\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1284d791-3c1d-4f21-bee3-82511b472100%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"134\",\n      name: \"Team Pothead #134\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F3996379e-5dcd-4b30-c81a-9ba40292b300%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1572\",\n      name: \"Team Pothead #1572\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fee2a659e-41fb-42ed-9f6c-9dd17dc7c900%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"534\",\n      name: \"Team Pothead #534\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fee2a659e-41fb-42ed-9f6c-9dd17dc7c900%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1828\",\n      name: \"Team Pothead #1828\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F64b28bf4-46c6-4dde-ccdd-70ac1a84d400%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"286\",\n      name: \"Team Pothead #286\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F227bea90-9cde-4e44-d495-542fe7523000%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2336\",\n      name: \"Team Pothead #2336\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5643052e-2b47-49fa-c64e-1e4501a3f900%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"1061\",\n      name: \"Team Pothead #1061\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F98bd294c-136d-422e-3670-35c9fa581c00%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"624\",\n      name: \"Team Pothead #624\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F374f20c7-e9ab-4c16-8465-1a7bc2440300%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2132\",\n      name: \"Team Pothead #2132\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F16c995dc-8bae-4941-af2f-98bb3d552000%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2174\",\n      name: \"Team Pothead #2174\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2cc14112-c2f4-40ee-4685-cde6644a6600%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"397\",\n      name: \"Team Pothead #397\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F8937b7ed-b924-4cf2-9217-a5c3d6957100%2Fpublic\",\n      collection: \"teampothead\"\n    },\n    {\n      tokenId: \"2372\",\n      name: \"Team Pothead #2372\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F0c5027a8-8368-48b5-d8b5-c4949fa4ba00%2Fpublic\",\n      collection: \"teampothead\"\n    }\n  ],\n  tarot: [\n    {\n      tokenId: \"2\",\n      name: \"Tarot #2\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ffe9f914dd1f1837d2ad6f93f6cc4e406\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"12\",\n      name: \"Tarot #12\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff5d4389992231b77c85d6c52f0d08cbd\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"14\",\n      name: \"Tarot #14\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe3e7ba3c640bca0d0e40a9f408078ed6\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"100\",\n      name: \"Tarot #100\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F01d77c5e90fd74a5e37d801f7256ddb0\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"300\",\n      name: \"Tarot #300\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F71bab6e720bf7607ae9d9e35293b801a\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"400\",\n      name: \"Tarot #400\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F36eec989de7e28b6ea91856700360536\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"800\",\n      name: \"Tarot #800\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F29aae4c32c9fa08938d6900a3e01976c\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"900\",\n      name: \"Tarot #900\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe0d5e06357d3e49c392e59bd8bddf0ae\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"13\",\n      name: \"Tarot #13\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff85eb17240e1f45ea4b65bcee8f632b3\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"16\",\n      name: \"Tarot #16\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F19526ea9136297730c6b46bd5a67ce1d\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"17\",\n      name: \"Tarot #17\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F70a5fb6342a3d387fe6187a195c6130c\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"18\",\n      name: \"Tarot #18\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd177b1ec182a745b28b7de14adbd9723\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"2181\",\n      name: \"Tarot #2181\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F700af1e7-6452-45a2-552d-0d42d18a8600%2Fpublic\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"1828\",\n      name: \"Tarot #1828\",\n      rarity: \"Common\",\n      power: 7,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F83925d22-aa44-4508-3f48-74302ff60000%2Fpublic\",\n      collection: \"tarot\"\n    },\n    {\n      tokenId: \"1874\",\n      name: \"Tarot #1874\",\n      rarity: \"Common\",\n      power: 9,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F83925d22-aa44-4508-3f48-74302ff60000%2Fpublic\",\n      collection: \"tarot\"\n    }\n  ],\n  baseballcabal: [\n    {\n      tokenId: \"2105\",\n      name: \"BASE BALL CABAL #2105\",\n      rarity: \"Epic\",\n      power: 144,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2db7f804-045e-48bb-f03c-51e7b7283c00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1876\",\n      name: \"BASE BALL CABAL #1876\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Faf8b0bae-3a86-46b0-38b1-351407496500%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"2049\",\n      name: \"BASE BALL CABAL #2049\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Faf8b0bae-3a86-46b0-38b1-351407496500%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"7023\",\n      name: \"BASE BALL CABAL #7023\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Faac297be-5e27-4d95-b97c-28411c90c400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1204\",\n      name: \"BASE BALL CABAL #1204\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fcfd60c48-fc6a-4b3b-398d-513d4c918f00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1870\",\n      name: \"BASE BALL CABAL #1870\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fdd5f9144-978e-4f26-ca5f-03e25f802a00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1874\",\n      name: \"BASE BALL CABAL #1874\",\n      rarity: \"Common\",\n      power: 9,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fcfd60c48-fc6a-4b3b-398d-513d4c918f00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"22438\",\n      name: \"BASE BALL CABAL #22438\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"22913\",\n      name: \"BASE BALL CABAL #22913\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"12350\",\n      name: \"BASE BALL CABAL #12350\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5ea8f4a4-c445-4f46-6cfa-4c86d72e2700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"20443\",\n      name: \"BASE BALL CABAL #20443\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x3ff41af61d092657189b1d4f7d74d994514724bb%2F5670aab8d75e5bceb1b0d967a261e3%2Fd85670aab8d75e5bceb1b0d967a261e3.png\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"6975\",\n      name: \"BASE BALL CABAL #6975\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x3ff41af61d092657189b1d4f7d74d994514724bb%2Fc8c748b702a2503516d600abd8dd20%2F17c8c748b702a2503516d600abd8dd20.png\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"11602\",\n      name: \"BASE BALL CABAL #11602\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x3ff41af61d092657189b1d4f7d74d994514724bb%2Fe8a275d8d032b763cdf72781224c5f%2Fc9e8a275d8d032b763cdf72781224c5f.png\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"16261\",\n      name: \"BASE BALL CABAL #16261\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2469ee76-a021-4ae1-fc10-07785ce1f400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"9354\",\n      name: \"BASE BALL CABAL #9354\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5ea8f4a4-c445-4f46-6cfa-4c86d72e2700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"15700\",\n      name: \"BASE BALL CABAL #15700\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"20737\",\n      name: \"BASE BALL CABAL #20737\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa0a1613b-4c0a-4680-ba80-db06f9aee000%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"18882\",\n      name: \"BASE BALL CABAL #18882\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"16645\",\n      name: \"BASE BALL CABAL #16645\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9573c4d-a8fa-4263-6e75-773685948300%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"18567\",\n      name: \"BASE BALL CABAL #18567\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5ea8f4a4-c445-4f46-6cfa-4c86d72e2700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"20606\",\n      name: \"BASE BALL CABAL #20606\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2469ee76-a021-4ae1-fc10-07785ce1f400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"15300\",\n      name: \"BASE BALL CABAL #15300\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd85c0c8c-cb7d-415b-adc5-e2120bb56400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"16914\",\n      name: \"BASE BALL CABAL #16914\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x3ff41af61d092657189b1d4f7d74d994514724bb%2F924330980ce9eca021308d83d3a4c4%2Fbe924330980ce9eca021308d83d3a4c4.png\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"2250\",\n      name: \"BASE BALL CABAL #2250\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9573c4d-a8fa-4263-6e75-773685948300%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"18539\",\n      name: \"BASE BALL CABAL #18539\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"23390\",\n      name: \"BASE BALL CABAL #23390\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"17544\",\n      name: \"BASE BALL CABAL #17544\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5ea8f4a4-c445-4f46-6cfa-4c86d72e2700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"12849\",\n      name: \"BASE BALL CABAL #12849\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"12840\",\n      name: \"BASE BALL CABAL #12840\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd85c0c8c-cb7d-415b-adc5-e2120bb56400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"23946\",\n      name: \"BASE BALL CABAL #23946\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F9750b6b62a866e865fca8611a06eb09a\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"14833\",\n      name: \"BASE BALL CABAL #14833\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd85c0c8c-cb7d-415b-adc5-e2120bb56400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1430\",\n      name: \"BASE BALL CABAL #1430\",\n      rarity: \"Common\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F99e63509-5369-4057-5327-c53de72e0a00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"14091\",\n      name: \"BASE BALL CABAL #14091\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F54a1ce047c66d1c07c26133037f4042f\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"2914\",\n      name: \"BASE BALL CABAL #2914\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2469ee76-a021-4ae1-fc10-07785ce1f400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"17014\",\n      name: \"BASE BALL CABAL #17014\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x3ff41af61d092657189b1d4f7d74d994514724bb%2F5670aab8d75e5bceb1b0d967a261e3%2Fd85670aab8d75e5bceb1b0d967a261e3.png\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"8202\",\n      name: \"BASE BALL CABAL #8202\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9573c4d-a8fa-4263-6e75-773685948300%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"9823\",\n      name: \"BASE BALL CABAL #9823\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"1985\",\n      name: \"BASE BALL CABAL #1985\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd9302773a447437d3c88fcb7197595bc\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"2958\",\n      name: \"BASE BALL CABAL #2958\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"18464\",\n      name: \"BASE BALL CABAL #18464\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa9aff3dd-cfd6-4001-de1c-079311e73700%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"15058\",\n      name: \"BASE BALL CABAL #15058\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fa0a1613b-4c0a-4680-ba80-db06f9aee000%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"4862\",\n      name: \"BASE BALL CABAL #4862\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"8068\",\n      name: \"BASE BALL CABAL #8068\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e253a3f-455a-4962-d333-aa3985e42e00%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"14130\",\n      name: \"BASE BALL CABAL #14130\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd85c0c8c-cb7d-415b-adc5-e2120bb56400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"15262\",\n      name: \"BASE BALL CABAL #15262\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2469ee76-a021-4ae1-fc10-07785ce1f400%2Fpublic\",\n      collection: \"baseballcabal\"\n    },\n    {\n      tokenId: \"14632\",\n      name: \"BASE BALL CABAL #14632\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5ea8f4a4-c445-4f46-6cfa-4c86d72e2700%2Fpublic\",\n      collection: \"baseballcabal\"\n    }\n  ],\n  vibefx: [\n    {\n      tokenId: \"1233\",\n      name: \"VIBE FX  #1233\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F619e716f-912e-4853-ad07-aad3a2ce9400%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1870\",\n      name: \"VIBE FX  #1870\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbd701e49-d1cf-44e4-f588-1e21641a5300%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1876\",\n      name: \"VIBE FX  #1876\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbd701e49-d1cf-44e4-f588-1e21641a5300%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"134\",\n      name: \"VIBE FX  #134\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F08cbc455-6a71-4218-c2b5-82f09cafe000%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1572\",\n      name: \"VIBE FX  #1572\",\n      rarity: \"Rare\",\n      power: 36,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F08cbc455-6a71-4218-c2b5-82f09cafe000%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2132\",\n      name: \"VIBE FX  #2132\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F92571361-2605-4af8-b62c-a63c103ee300%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2181\",\n      name: \"VIBE FX  #2181\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F642cb6d2-10c1-4d88-74b1-c95681b6c500%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2206\",\n      name: \"VIBE FX  #2206\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F08cbc455-6a71-4218-c2b5-82f09cafe000%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2360\",\n      name: \"VIBE FX  #2360\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F6058ca77-4045-4aa5-ecbd-c80d18f73c00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2632\",\n      name: \"VIBE FX  #2632\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F0d495a6d-7456-4f62-33a8-991f7cd71c00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"397\",\n      name: \"VIBE FX  #397\",\n      rarity: \"Common\",\n      power: 9,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F249db819-103f-4a39-430f-94ae60442700%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"411\",\n      name: \"VIBE FX  #411\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F249db819-103f-4a39-430f-94ae60442700%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"534\",\n      name: \"VIBE FX  #534\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1d6c0b10-81c7-41ff-037c-9d0e24339900%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"827\",\n      name: \"VIBE FX  #827\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F235dd45e-8cee-4afc-1e7e-cd0efed76900%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"826\",\n      name: \"VIBE FX  #826\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc6dd7f87-5490-4fce-703c-4856ba0f0400%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1525\",\n      name: \"VIBE FX  #1525\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc6dd7f87-5490-4fce-703c-4856ba0f0400%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"3548\",\n      name: \"VIBE FX  #3548\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb6e399f6-7696-4c9e-6bd3-b85ad4009c00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4214\",\n      name: \"VIBE FX  #4214\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1c1a31ac-6f0e-485e-2b0e-299b61f1aa00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1106\",\n      name: \"VIBE FX  #1106\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F6209276b-c6ed-4155-e438-14eeace31800%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1528\",\n      name: \"VIBE FX  #1528\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc6dd7f87-5490-4fce-703c-4856ba0f0400%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"330\",\n      name: \"VIBE FX  #330\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fd97d5932-a6c5-4db5-63da-c19de9f99800%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4174\",\n      name: \"VIBE FX  #4174\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F57297e0a-86ae-4896-5f22-db64ea2f1e00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"3831\",\n      name: \"VIBE FX  #3831\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F409eba32-c110-4c82-2d12-e4f097f0a600%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2481\",\n      name: \"VIBE FX  #2481\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2aea5dd2-cb36-4ac0-df26-dffcc7b89f00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4429\",\n      name: \"VIBE FX  #4429\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fc6bff5bb-f50e-40f6-0380-190ccc55ff00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4672\",\n      name: \"VIBE FX  #4672\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fd28d2a01e37b8685458bd740905cabeb\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"3015\",\n      name: \"VIBE FX  #3015\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fb89b5619-a703-4f49-bee8-20fd27222000%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2427\",\n      name: \"VIBE FX  #2427\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbcfba6b3-ab46-42ce-2eee-02ce55d2fd00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"2167\",\n      name: \"VIBE FX  #2167\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2aea5dd2-cb36-4ac0-df26-dffcc7b89f00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"885\",\n      name: \"VIBE FX  #885\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbcfba6b3-ab46-42ce-2eee-02ce55d2fd00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"800\",\n      name: \"VIBE FX  #800\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F5c1cda92-67b1-41b0-1792-537a5c0a4400%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4319\",\n      name: \"VIBE FX  #4319\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F8275f9ca-100c-49b6-367f-17c32dc74700%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1274\",\n      name: \"VIBE FX  #1274\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F2aea5dd2-cb36-4ac0-df26-dffcc7b89f00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"1925\",\n      name: \"VIBE FX  #1925\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbcfba6b3-ab46-42ce-2eee-02ce55d2fd00%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"3012\",\n      name: \"VIBE FX  #3012\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F409eba32-c110-4c82-2d12-e4f097f0a600%2Fpublic\",\n      collection: \"vibefx\"\n    },\n    {\n      tokenId: \"4518\",\n      name: \"VIBE FX  #4518\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F409eba32-c110-4c82-2d12-e4f097f0a600%2Fpublic\",\n      collection: \"vibefx\"\n    }\n  ],\n  historyofcomputer: [\n    {\n      tokenId: \"1071\",\n      name: \"historyofcomputer #1071\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1870\",\n      name: \"historyofcomputer #1870\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F51f8cc85-8ac8-44e3-9f73-903b956f0a00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"2607\",\n      name: \"historyofcomputer #2607\",\n      rarity: \"Epic\",\n      power: 112,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3712\",\n      name: \"historyofcomputer #3712\",\n      rarity: \"Epic\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"286\",\n      name: \"historyofcomputer #286\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F904e119c-f55d-4a32-ad26-38c26b155900%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"624\",\n      name: \"historyofcomputer #624\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F68c71b4d-4f3d-4951-fe08-055129cdd500%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1061\",\n      name: \"historyofcomputer #1061\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F904e119c-f55d-4a32-ad26-38c26b155900%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1233\",\n      name: \"historyofcomputer #1233\",\n      rarity: \"Rare\",\n      power: 36,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F68c71b4d-4f3d-4951-fe08-055129cdd500%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"2206\",\n      name: \"historyofcomputer #2206\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbc14dff6-9d3d-49b4-238a-b6a39acac500%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"2633\",\n      name: \"historyofcomputer #2633\",\n      rarity: \"Rare\",\n      power: 28,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbc14dff6-9d3d-49b4-238a-b6a39acac500%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3481\",\n      name: \"historyofcomputer #3481\",\n      rarity: \"Rare\",\n      power: 20,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F904e119c-f55d-4a32-ad26-38c26b155900%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"100\",\n      name: \"historyofcomputer #100\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F9fe8fb2c-e372-4a9c-9b27-633a1d906400%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"300\",\n      name: \"historyofcomputer #300\",\n      rarity: \"Common\",\n      power: 9,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F7d8ebce4-bb83-4541-a70b-84e765eebd00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"397\",\n      name: \"historyofcomputer #397\",\n      rarity: \"Common\",\n      power: 5,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F7d8ebce4-bb83-4541-a70b-84e765eebd00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4498\",\n      name: \"historyofcomputer #4498\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e74669c-37e4-4e64-2b99-199eeb699400%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3112\",\n      name: \"historyofcomputer #3112\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"991\",\n      name: \"historyofcomputer #991\",\n      rarity: \"Mythic\",\n      power: 100,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F62aa5e75-3ed9-4553-7e32-1dcddcdfe800%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4463\",\n      name: \"historyofcomputer #4463\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F51f8cc85-8ac8-44e3-9f73-903b956f0a00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4510\",\n      name: \"historyofcomputer #4510\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fe2e52645-c160-4f17-3eb1-a2742a571700%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4483\",\n      name: \"historyofcomputer #4483\",\n      rarity: \"Epic\",\n      power: 72,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4442\",\n      name: \"historyofcomputer #4442\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4467\",\n      name: \"historyofcomputer #4467\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4518\",\n      name: \"historyofcomputer #4518\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4476\",\n      name: \"historyofcomputer #4476\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4437\",\n      name: \"historyofcomputer #4437\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4430\",\n      name: \"historyofcomputer #4430\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3956\",\n      name: \"historyofcomputer #3956\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e74669c-37e4-4e64-2b99-199eeb699400%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3202\",\n      name: \"historyofcomputer #3202\",\n      rarity: \"Epic\",\n      power: 60,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3748\",\n      name: \"historyofcomputer #3748\",\n      rarity: \"Epic\",\n      power: 72,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F51f8cc85-8ac8-44e3-9f73-903b956f0a00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4429\",\n      name: \"historyofcomputer #4429\",\n      rarity: \"Epic\",\n      power: 72,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1685\",\n      name: \"historyofcomputer #1685\",\n      rarity: \"Epic\",\n      power: 72,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fbf3fdc44-c898-493a-1fb7-a99c33737f00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"3641\",\n      name: \"historyofcomputer #3641\",\n      rarity: \"Epic\",\n      power: 72,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F693cd114-da98-4d53-04fc-291b13b7fc00%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1469\",\n      name: \"historyofcomputer #1469\",\n      rarity: \"Legendary\",\n      power: 96,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb3652df265bea9dbfd54f06020815e05\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4235\",\n      name: \"historyofcomputer #4235\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x319b12e8eba0be2eae1112b357ba75c2c178b567%2F189478b132ca59188ee2cb6745dbfe%2Fbe189478b132ca59188ee2cb6745dbfe.png\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"4419\",\n      name: \"historyofcomputer #4419\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e74669c-37e4-4e64-2b99-199eeb699400%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1470\",\n      name: \"historyofcomputer #1470\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Ffb78738a-d293-4b55-0388-167ecaeee100%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1825\",\n      name: \"historyofcomputer #1825\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Ffb78738a-d293-4b55-0388-167ecaeee100%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1676\",\n      name: \"historyofcomputer #1676\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7aa95950e712b2f5632e2ac2ddc0a4a6\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"2679\",\n      name: \"historyofcomputer #2679\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F1e74669c-37e4-4e64-2b99-199eeb699400%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"556\",\n      name: \"historyofcomputer #556\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F515e17ff4e0c98cdc78496f6fdaea9d0\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"1938\",\n      name: \"historyofcomputer #1938\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Ffb78738a-d293-4b55-0388-167ecaeee100%2Fpublic\",\n      collection: \"historyofcomputer\"\n    },\n    {\n      tokenId: \"2627\",\n      name: \"historyofcomputer #2627\",\n      rarity: \"Legendary\",\n      power: 80,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fi2c.seadn.io%2Fbase%2F0x319b12e8eba0be2eae1112b357ba75c2c178b567%2Fc44a706a096f98d62ed9c124928d8e%2Ff4c44a706a096f98d62ed9c124928d8e.png\",\n      collection: \"historyofcomputer\"\n    }\n  ],\n  cumioh: [\n    {\n      tokenId: \"823\",\n      name: \"$cu-Mi-Oh! #823\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F91c81987744291bea206aaf0d4feff40\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"5254\",\n      name: \"$cu-Mi-Oh! #5254\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F91c81987744291bea206aaf0d4feff40\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"2792\",\n      name: \"$cu-Mi-Oh! #2792\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F352359898d02a346415deaef7e32302e\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"6384\",\n      name: \"$cu-Mi-Oh! #6384\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8a50fe223cb9e91a2812ed5564276e1a\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"4145\",\n      name: \"$cu-Mi-Oh! #4145\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F37cb1b249d73594ff909ba6b157db7af\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"2522\",\n      name: \"$cu-Mi-Oh! #2522\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F93ae262b5a70b5cdd0ceba98098f059a\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"3604\",\n      name: \"$cu-Mi-Oh! #3604\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F16caff2d57cf858089e2119afea130be\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"5878\",\n      name: \"$cu-Mi-Oh! #5878\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe2cb824757e23daa8304b456ed8e9490\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"1489\",\n      name: \"$cu-Mi-Oh! #1489\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F42134656cded876e74cce5ce4a486fe4\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"2265\",\n      name: \"$cu-Mi-Oh! #2265\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa03c7ae3c6e28f8a3fb9bd13f1db432e\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"4190\",\n      name: \"$cu-Mi-Oh! #4190\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F792c36265869159302b4685cc92ea057\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"3218\",\n      name: \"$cu-Mi-Oh! #3218\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2cd41acd560e0e06416be074867b7a85\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"30\",\n      name: \"$cu-Mi-Oh! #30\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Ff3917b486bdfdb7c0dd83bcd40ffcb22\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"4078\",\n      name: \"$cu-Mi-Oh! #4078\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F868769096a7d713f91c38fdea27ce729\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"3992\",\n      name: \"$cu-Mi-Oh! #3992\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F01d3ddc9de468b59273ea024668f6737\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"4785\",\n      name: \"$cu-Mi-Oh! #4785\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F37682fda8b667da8f3d7047c26171f5d\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"2911\",\n      name: \"$cu-Mi-Oh! #2911\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F261b4a624a0cc5cb199d73037a8f7f91\",\n      collection: \"cumioh\"\n    },\n    {\n      tokenId: \"3446\",\n      name: \"$cu-Mi-Oh! #3446\",\n      rarity: \"Legendary\",\n      power: 240,\n      imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fb78642a577228b822518b13ed678e868\",\n      collection: \"cumioh\"\n    }\n  ],\n  viberotbangers: [\n    { tokenId: \"cover\", name: \"VIBE ROT BANGERS\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F1269ebe2e27ff8a041cb7253fb5687b6\", collection: \"viberotbangers\" },\n    { tokenId: \"4262\", name: \"VIBE ROT BANGERS #4262\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fe6f3228527e9abc1bcf651f1e938f2eb\", collection: \"viberotbangers\" },\n    { tokenId: \"4486\", name: \"VIBE ROT BANGERS #4486\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Faf427b07c575290efb81db310acc5a51\", collection: \"viberotbangers\" },\n    { tokenId: \"3700\", name: \"VIBE ROT BANGERS #3700\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Ff761e0e2-23e5-4295-2b18-004346d38a00%2Fpublic\", collection: \"viberotbangers\" },\n    { tokenId: \"4046\", name: \"VIBE ROT BANGERS #4046\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F89d8594bedf3f054ecaf2127bbd05674\", collection: \"viberotbangers\" },\n    { tokenId: \"4251\", name: \"VIBE ROT BANGERS #4251\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F865220e74fcb3b1701733fc8dfc7ee59\", collection: \"viberotbangers\" },\n    { tokenId: \"4087\", name: \"VIBE ROT BANGERS #4087\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F7bff860868c9c35584ffa5d7e483f87f\", collection: \"viberotbangers\" },\n    { tokenId: \"4044\", name: \"VIBE ROT BANGERS #4044\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F080e38bf946f830bee666047310db5c7\", collection: \"viberotbangers\" },\n    { tokenId: \"3169\", name: \"VIBE ROT BANGERS #3169\", rarity: \"Epic\", power: 80, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F7c652e85-2833-4f51-5de7-2115407c4800%2Fpublic\", collection: \"viberotbangers\" },\n    { tokenId: \"4051\", name: \"VIBE ROT BANGERS #4051\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2d9e66d00d43325dcd7d80233682ef37\", collection: \"viberotbangers\" },\n    { tokenId: \"4244\", name: \"VIBE ROT BANGERS #4244\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F24295b93b3458abeb69b83f5c6090238\", collection: \"viberotbangers\" },\n    { tokenId: \"3092\", name: \"VIBE ROT BANGERS #3092\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Faefd3ad4-f5d3-458f-bdc5-6561a9208b00%2Fpublic\", collection: \"viberotbangers\" },\n    { tokenId: \"4054\", name: \"VIBE ROT BANGERS #4054\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F09dcc10a84593adf382129c977d44a75\", collection: \"viberotbangers\" },\n    { tokenId: \"3699\", name: \"VIBE ROT BANGERS #3699\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2Fdeb93fdb-4718-4465-7682-67a4f27c7200%2Fpublic\", collection: \"viberotbangers\" },\n    { tokenId: \"4317\", name: \"VIBE ROT BANGERS #4317\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fc444601ba5b8ef18a10ee0785907760d\", collection: \"viberotbangers\" },\n    { tokenId: \"4073\", name: \"VIBE ROT BANGERS #4073\", rarity: \"Epic\", power: 80, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F842c91f340bfb07aad0e026062be07dc\", collection: \"viberotbangers\" },\n    { tokenId: \"4035\", name: \"VIBE ROT BANGERS #4035\", rarity: \"Epic\", power: 80, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8e775fff488d358102ca69ba7952db8d\", collection: \"viberotbangers\" },\n    { tokenId: \"4069\", name: \"VIBE ROT BANGERS #4069\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fc54013c64de1b9fcc4fb6296791a3ff9\", collection: \"viberotbangers\" },\n    { tokenId: \"4309\", name: \"VIBE ROT BANGERS #4309\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fcf9e1e4b561ebf6fd7f3eff34cfa6a12\", collection: \"viberotbangers\" },\n    { tokenId: \"4249\", name: \"VIBE ROT BANGERS #4249\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8153579d04ec85767a342e86cd611f54\", collection: \"viberotbangers\" },\n    { tokenId: \"4322\", name: \"VIBE ROT BANGERS #4322\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F73ed73b5ec9e44560c6f0eac6200d0e3\", collection: \"viberotbangers\" },\n    { tokenId: \"3415\", name: \"VIBE ROT BANGERS #3415\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F3748f0eec545154c8f322113c2fd7329\", collection: \"viberotbangers\" },\n    { tokenId: \"4017\", name: \"VIBE ROT BANGERS #4017\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F35c6657fa6a9698028b463699c85e893\", collection: \"viberotbangers\" },\n    { tokenId: \"4307\", name: \"VIBE ROT BANGERS #4307\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2Fa176d29f2f348f64c1056b185f4bc636\", collection: \"viberotbangers\" },\n    { tokenId: \"4280\", name: \"VIBE ROT BANGERS #4280\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F2eff4a2a5863006e0fc44e943e32ba2d\", collection: \"viberotbangers\" },\n    { tokenId: \"4316\", name: \"VIBE ROT BANGERS #4316\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F6882607513930d9322e96450b3be58f4\", collection: \"viberotbangers\" },\n    { tokenId: \"4048\", name: \"VIBE ROT BANGERS #4048\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F73eac04c6a148bdf1fcdb693bea11d1c\", collection: \"viberotbangers\" },\n    { tokenId: \"4293\", name: \"VIBE ROT BANGERS #4293\", rarity: \"Common\", power: 5, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F35533a7b6a0af7e31ed2f36cf169eb27\", collection: \"viberotbangers\" },\n    { tokenId: \"4300\", name: \"VIBE ROT BANGERS #4300\", rarity: \"Rare\", power: 20, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fnft-cdn.alchemy.com%2Fbase-mainnet%2F8642be4eea70c8106baa915be4ab8965\", collection: \"viberotbangers\" },\n    { tokenId: \"2876\", name: \"VIBE ROT BANGERS #2876\", rarity: \"Epic\", power: 80, imageUrl: \"https://vibechain.com/api/proxy?url=https%3A%2F%2Fimagedelivery.net%2Fg4iQ0bIzMZrjFMgjAnSGfw%2F86d4a913-0be0-4b72-6e57-355867737400%2Fpublic\", collection: \"viberotbangers\" }\n  ]\n}, i = Object.keys(e).filter((a) => e[a].length >= 10);\n\nexport {\n  e as a,\n  i as b\n};\n//# sourceMappingURL=K5WLKJWZ.js.map\n","environment":"isolate"},{"path":"audioStorage.js","source":"import {\n  a as s,\n  c as o\n} from \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport {\n  h as r\n} from \"./_deps/34SVKERO.js\";\nimport {\n  a\n} from \"./_deps/5B5TEMMX.js\";\n\n// convex/audioStorage.ts\nvar i = o({\n  args: {},\n  handler: /* @__PURE__ */ a(async (e) => await e.storage.generateUploadUrl(), \"handler\")\n}), c = s({\n  args: { storageId: r.id(\"_storage\") },\n  handler: /* @__PURE__ */ a(async (e, { storageId: t }) => await e.storage.getUrl(t), \"handler\")\n}), l = o({\n  args: {\n    storageId: r.id(\"_storage\"),\n    senderFid: r.number(),\n    durationSeconds: r.number()\n  },\n  handler: /* @__PURE__ */ a(async (e, { storageId: t, senderFid: d, durationSeconds: n }) => ({\n    audioStorageId: t,\n    success: !0\n  }), \"handler\")\n}), p = o({\n  args: { storageId: r.id(\"_storage\") },\n  handler: /* @__PURE__ */ a(async (e, { storageId: t }) => (await e.storage.delete(t), { success: !0 }), \"handler\")\n});\nexport {\n  p as deleteAudio,\n  i as generateUploadUrl,\n  c as getAudioUrl,\n  l as saveAudioMetadata\n};\n//# sourceMappingURL=audioStorage.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [\"../convex/audioStorage.ts\"],\n  \"mappings\": \";;;;;;;;;;;;;AAOO,IAAMA,IAAoBC,EAAS;AAAA,EACxC,MAAM,CAAC;AAAA,EACP,SAAS,gBAAAC,EAAA,OAAOC,MACP,MAAMA,EAAI,QAAQ,kBAAkB,GADpC;AAGX,CAAC,GAKYC,IAAcC,EAAM;AAAA,EAC/B,MAAM,EAAE,WAAWC,EAAE,GAAG,UAAU,EAAE;AAAA,EACpC,SAAS,gBAAAJ,EAAA,OAAOC,GAAK,EAAE,WAAAI,EAAU,MACxB,MAAMJ,EAAI,QAAQ,OAAOI,CAAS,GADlC;AAGX,CAAC,GAMYC,IAAoBP,EAAS;AAAA,EACxC,MAAM;AAAA,IACJ,WAAWK,EAAE,GAAG,UAAU;AAAA,IAC1B,WAAWA,EAAE,OAAO;AAAA,IACpB,iBAAiBA,EAAE,OAAO;AAAA,EAC5B;AAAA,EACA,SAAS,gBAAAJ,EAAA,OAAOC,GAAK,EAAE,WAAAI,GAAW,WAAAE,GAAW,iBAAAC,EAAgB,OAGpD;AAAA,IACL,gBAAgBH;AAAA,IAChB,SAAS;AAAA,EACX,IANO;AAQX,CAAC,GAMYI,IAAcV,EAAS;AAAA,EAClC,MAAM,EAAE,WAAWK,EAAE,GAAG,UAAU,EAAE;AAAA,EACpC,SAAS,gBAAAJ,EAAA,OAAOC,GAAK,EAAE,WAAAI,EAAU,OAC/B,MAAMJ,EAAI,QAAQ,OAAOI,CAAS,GAC3B,EAAE,SAAS,GAAK,IAFhB;AAIX,CAAC;\",\n  \"names\": [\"generateUploadUrl\", \"mutation\", \"__name\", \"ctx\", \"getAudioUrl\", \"query\", \"v\", \"storageId\", \"saveAudioMetadata\", \"senderFid\", \"durationSeconds\", \"deleteAudio\"]\n}\n"},{"path":"auth.js","source":"import {\n  a,\n  b,\n  c,\n  d,\n  e,\n  f,\n  g,\n  h\n} from \"./_deps/KGOWE5FI.js\";\nimport \"./_deps/3SBKGJDS.js\";\nimport \"./_deps/6EQFL5ZL.js\";\nimport \"./_deps/34SVKERO.js\";\nimport \"./_deps/5B5TEMMX.js\";\nexport {\n  d as authenticateAction,\n  e as authenticateActionWithBackend,\n  f as getNonce,\n  g as incrementNonce,\n  c as verifyMessageAddress,\n  h as verifyNonce,\n  a as verifySignature,\n  b as verifyTimestamp\n};\n//# sourceMappingURL=auth.js.map\n","environment":"isolate","sourceMap":"{\n  \"version\": 3,\n  \"sources\": [],\n  \"mappings\": \"\",\n  \"names\": []\n}\n"},{"path":"_deps/KGOWE5FI.js","source":"import {\n  a as u\n} from \"./3SBKGJDS.js\";\nimport {\n  h as d\n} from \"./34SVKERO.js\";\nimport {\n  a as o\n} from \"./5B5TEMMX.js\";\n\n// convex/auth.ts\nfunction l(s, n, r) {\n  try {\n    if (!n.startsWith(\"0x\") || n.length !== 132)\n      return console.error(\"\\u274C Invalid signature format\"), !1;\n    let e = s.toLowerCase();\n    return !e.startsWith(\"0x\") || e.length !== 42 ? (console.error(\"\\u274C Invalid address format\"), !1) : !r || r.length === 0 ? (console.error(\"\\u274C Empty message\"), !1) : !0;\n  } catch (e) {\n    return console.error(\"\\u274C Signature validation error:\", e), !1;\n  }\n}\no(l, \"verifySignature\");\nfunction m(s) {\n  try {\n    let n = s.match(/at (\\d+)/);\n    if (!n)\n      return console.error(\"\\u274C No timestamp in message\"), !1;\n    let r = parseInt(n[1]);\n    if (isNaN(r))\n      return console.error(\"\\u274C Invalid timestamp format (NaN)\"), !1;\n    let e = Date.now(), t = 300 * 1e3;\n    return Math.abs(e - r) > t ? (console.error(\"\\u274C Message expired (older than 5 minutes)\"), !1) : !0;\n  } catch (n) {\n    return console.error(\"\\u274C Timestamp verification error:\", n), !1;\n  }\n}\no(m, \"verifyTimestamp\");\nfunction g(s, n) {\n  let r = s.toLowerCase();\n  return n.toLowerCase().includes(r) ? !0 : (console.error(\"\\u274C Address mismatch in message\"), !1);\n}\no(g, \"verifyMessageAddress\");\nfunction y(s, n, r) {\n  return g(s, r) ? m(r) ? l(s, n, r) ? { success: !0 } : { success: !1, error: \"Invalid signature format\" } : { success: !1, error: \"Expired signature\" } : { success: !1, error: \"Address mismatch\" };\n}\no(y, \"authenticateAction\");\nasync function w(s, n, r, e) {\n  let t = y(n, r, e);\n  if (!t.success)\n    return t;\n  try {\n    let i = await import(\"../cryptoActions.js\"), a = await s.runAction(i.verifyEthereumSignature, {\n      message: e,\n      signature: r,\n      expectedAddress: n\n    });\n    return a.success ? (console.log(\"\\u2705 Backend signature verification passed\"), { success: !0 }) : (console.error(\"\\u274C Backend signature verification failed:\", a.error), { success: !1, error: a.error });\n  } catch (i) {\n    return console.error(\"\\u274C Backend verification error:\", i), { success: !1, error: \"Backend verification failed\" };\n  }\n}\no(w, \"authenticateActionWithBackend\");\nvar x = u({\n  args: { address: d.string() },\n  handler: /* @__PURE__ */ o(async (s, { address: n }) => {\n    let r = n.toLowerCase(), e = await s.db.query(\"nonces\").withIndex(\"by_address\", (t) => t.eq(\"address\", r)).first();\n    return e ? e.nonce : 0;\n  }, \"handler\")\n});\nasync function N(s, n) {\n  let r = n.toLowerCase(), e = await s.db.query(\"nonces\").withIndex(\"by_address\", (t) => t.eq(\"address\", r)).first();\n  e ? await s.db.patch(e._id, {\n    nonce: e.nonce + 1,\n    lastUsed: Date.now()\n  }) : await s.db.insert(\"nonces\", {\n    address: r,\n    nonce: 1,\n    lastUsed: Date.now()\n  });\n}\no(N, \"incrementNonce\");\nasync function b(s, n, r) {\n  try {\n    let e = r.match(/nonce:(\\d+)/);\n    if (!e)\n      return console.error(\"\\u274C No nonce in message\"), !1;\n    let t = parseInt(e[1]);\n    if (isNaN(t))\n      return console.error(\"\\u274C Invalid nonce format (NaN)\"), !1;\n    let i = n.toLowerCase(), a = await s.db.query(\"nonces\").withIndex(\"by_address\", (f) => f.eq(\"address\", i)).first(), c = a ? a.nonce : 0;\n    return t !== c ? (console.error(\n      `\\u274C Nonce mismatch: expected ${c}, got ${t}`\n    ), !1) : !0;\n  } catch (e) {\n    return console.error(\"\\u274C Nonce verification error:\", e), !1;\n  }\n}\no(b, \"verifyNonce\");\n\nexport {\n  l as a,\n  m as b,\n  g as c,\n  y as d,\n  w as e,\n  x as f,\n  N as g,\n  b as h\n};\n//# sourceMappingURL=KGOWE5FI.js.map\n","environment":"isolate"},{"path":"_deps/3SBKGJDS.js","source":"import {\n  a as t,\n  b as n,\n  c as e,\n  d as o,\n  e as r,\n  f as i\n} from \"./6EQFL5ZL.js\";\n\n// convex/_generated/server.js\nvar p = e, u = o, s = t, x = n, G = r, l = i;\n\nexport {\n  p as a,\n  u as b,\n  s as c,\n  x as d,\n  G as e,\n  l as f\n};\n//# sourceMappingURL=3SBKGJDS.js.map\n","environment":"isolate"},{"path":"_deps/6EQFL5ZL.js","source":"import {\n  a as v,\n  b as m,\n  c as p,\n  d as x,\n  e as pe,\n  f as fe,\n  g as V,\n  h as a,\n  i as he\n} from \"./34SVKERO.js\";\nimport {\n  a as n\n} from \"./5B5TEMMX.js\";\n\n// node_modules/convex/dist/esm/server/functionName.js\nvar _ = Symbol.for(\"functionName\");\n\n// node_modules/convex/dist/esm/server/components/paths.js\nvar W = Symbol.for(\"toReferencePath\");\nfunction Ve(t) {\n  return t[W] ?? null;\n}\nn(Ve, \"extractReferencePath\");\nfunction We(t) {\n  return t.startsWith(\"function://\");\n}\nn(We, \"isFunctionHandle\");\nfunction w(t) {\n  let e;\n  if (typeof t == \"string\")\n    We(t) ? e = { functionHandle: t } : e = { name: t };\n  else if (t[_])\n    e = { name: t[_] };\n  else {\n    let r = Ve(t);\n    if (!r)\n      throw new Error(`${t} is not a functionReference`);\n    e = { reference: r };\n  }\n  return e;\n}\nn(w, \"getFunctionAddress\");\n\n// node_modules/convex/dist/esm/server/api.js\nfunction B(t) {\n  let e = w(t);\n  if (e.name === void 0)\n    throw e.functionHandle !== void 0 ? new Error(\n      `Expected function reference like \"api.file.func\" or \"internal.file.func\", but received function handle ${e.functionHandle}`\n    ) : e.reference !== void 0 ? new Error(\n      `Expected function reference in the current component like \"api.file.func\" or \"internal.file.func\", but received reference ${e.reference}`\n    ) : new Error(\n      `Expected function reference like \"api.file.func\" or \"internal.file.func\", but received ${JSON.stringify(e)}`\n    );\n  if (typeof t == \"string\") return t;\n  let r = t[_];\n  if (!r)\n    throw new Error(`${t} is not a functionReference`);\n  return r;\n}\nn(B, \"getFunctionName\");\nfunction me(t = []) {\n  let e = {\n    get(r, o) {\n      if (typeof o == \"string\") {\n        let s = [...t, o];\n        return me(s);\n      } else if (o === _) {\n        if (t.length < 2) {\n          let l = [\"api\", ...t].join(\".\");\n          throw new Error(\n            `API path is expected to be of the form \\`api.moduleName.functionName\\`. Found: \\`${l}\\``\n          );\n        }\n        let s = t.slice(0, -1).join(\"/\"), i = t[t.length - 1];\n        return i === \"default\" ? s : s + \":\" + i;\n      } else return o === Symbol.toStringTag ? \"FunctionReference\" : void 0;\n    }\n  };\n  return new Proxy({}, e);\n}\nn(me, \"createApi\");\nvar Be = me();\n\n// node_modules/convex/dist/esm/server/cron.js\nvar De = Object.defineProperty, ke = /* @__PURE__ */ n((t, e, r) => e in t ? De(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), ye = /* @__PURE__ */ n((t, e, r) => ke(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), Le = [\n  \"sunday\",\n  \"monday\",\n  \"tuesday\",\n  \"wednesday\",\n  \"thursday\",\n  \"friday\",\n  \"saturday\"\n], Ye = /* @__PURE__ */ n(() => new L(), \"cronJobs\");\nfunction D(t) {\n  if (!Number.isInteger(t) || t <= 0)\n    throw new Error(\"Interval must be an integer greater than 0\");\n}\nn(D, \"validateIntervalNumber\");\nfunction Ke(t) {\n  if (!Number.isInteger(t) || t < 1 || t > 31)\n    throw new Error(\"Day of month must be an integer from 1 to 31\");\n  return t;\n}\nn(Ke, \"validatedDayOfMonth\");\nfunction Xe(t) {\n  if (!Le.includes(t))\n    throw new Error('Day of week must be a string like \"monday\".');\n  return t;\n}\nn(Xe, \"validatedDayOfWeek\");\nfunction k(t) {\n  if (!Number.isInteger(t) || t < 0 || t > 23)\n    throw new Error(\"Hour of day must be an integer from 0 to 23\");\n  return t;\n}\nn(k, \"validatedHourOfDay\");\nfunction R(t) {\n  if (!Number.isInteger(t) || t < 0 || t > 59)\n    throw new Error(\"Minute of hour must be an integer from 0 to 59\");\n  return t;\n}\nn(R, \"validatedMinuteOfHour\");\nfunction Ze(t) {\n  if (!t.match(/^[ -~]*$/))\n    throw new Error(\n      `Invalid cron identifier ${t}: use ASCII letters that are not control characters`\n    );\n  return t;\n}\nn(Ze, \"validatedCronIdentifier\");\nvar L = class {\n  static {\n    n(this, \"Crons\");\n  }\n  constructor() {\n    ye(this, \"crons\"), ye(this, \"isCrons\"), this.isCrons = !0, this.crons = {};\n  }\n  /** @internal */\n  schedule(e, r, o, s) {\n    let i = v(s);\n    if (Ze(e), e in this.crons)\n      throw new Error(`Cron identifier registered twice: ${e}`);\n    this.crons[e] = {\n      name: B(o),\n      args: [p(i)],\n      schedule: r\n    };\n  }\n  /**\n   * Schedule a mutation or action to run at some interval.\n   *\n   * ```js\n   * crons.interval(\"Clear presence data\", {seconds: 30}, api.presence.clear);\n   * ```\n   *\n   * @param identifier - A unique name for this scheduled job.\n   * @param schedule - The time between runs for this scheduled job.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  interval(e, r, o, ...s) {\n    let i = r, l = +(\"seconds\" in i && i.seconds !== void 0), h = +(\"minutes\" in i && i.minutes !== void 0), b = +(\"hours\" in i && i.hours !== void 0);\n    if (l + h + b !== 1)\n      throw new Error(\"Must specify one of seconds, minutes, or hours\");\n    l ? D(r.seconds) : h ? D(r.minutes) : b && D(r.hours), this.schedule(\n      e,\n      { ...r, type: \"interval\" },\n      o,\n      ...s\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on an hourly basis.\n   *\n   * ```js\n   * crons.hourly(\n   *   \"Reset high scores\",\n   *   {\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  hourly(e, r, o, ...s) {\n    let i = R(r.minuteUTC);\n    this.schedule(\n      e,\n      { minuteUTC: i, type: \"hourly\" },\n      o,\n      ...s\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a daily basis.\n   *\n   * ```js\n   * crons.daily(\n   *   \"Reset high scores\",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  daily(e, r, o, ...s) {\n    let i = k(r.hourUTC), l = R(r.minuteUTC);\n    this.schedule(\n      e,\n      { hourUTC: i, minuteUTC: l, type: \"daily\" },\n      o,\n      ...s\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a weekly basis.\n   *\n   * ```js\n   * crons.weekly(\n   *   \"Weekly re-engagement email\",\n   *   {\n   *     dayOfWeek: \"Tuesday\",\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.emails.send\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each week to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   */\n  weekly(e, r, o, ...s) {\n    let i = Xe(r.dayOfWeek), l = k(r.hourUTC), h = R(r.minuteUTC);\n    this.schedule(\n      e,\n      { dayOfWeek: i, hourUTC: l, minuteUTC: h, type: \"weekly\" },\n      o,\n      ...s\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a monthly basis.\n   *\n   * Note that some months have fewer days than others, so e.g. a function\n   * scheduled to run on the 30th will not run in February.\n   *\n   * ```js\n   * crons.monthly(\n   *   \"Bill customers at \",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *     day: 1,\n   *   },\n   *   api.billing.billCustomers\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each month to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  monthly(e, r, o, ...s) {\n    let i = Ke(r.day), l = k(r.hourUTC), h = R(r.minuteUTC);\n    this.schedule(\n      e,\n      { day: i, hourUTC: l, minuteUTC: h, type: \"monthly\" },\n      o,\n      ...s\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a recurring basis.\n   *\n   * Like the unix command `cron`, Sunday is 0, Monday is 1, etc.\n   *\n   * ```\n   *  â”Œâ”€ minute (0 - 59)\n   *  â”‚ â”Œâ”€ hour (0 - 23)\n   *  â”‚ â”‚ â”Œâ”€ day of the month (1 - 31)\n   *  â”‚ â”‚ â”‚ â”Œâ”€ month (1 - 12)\n   *  â”‚ â”‚ â”‚ â”‚ â”Œâ”€ day of the week (0 - 6) (Sunday to Saturday)\n   * \"* * * * *\"\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param cron - Cron string like `\"15 7 * * *\"` (Every day at 7:15 UTC)\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  cron(e, r, o, ...s) {\n    let i = r;\n    this.schedule(\n      e,\n      { cron: i, type: \"cron\" },\n      o,\n      ...s\n    );\n  }\n  /** @internal */\n  export() {\n    return JSON.stringify(this.crons);\n  }\n};\n\n// node_modules/convex/dist/esm/index.js\nvar f = \"1.31.5\";\n\n// node_modules/convex/dist/esm/server/impl/syscall.js\nfunction $(t, e) {\n  if (typeof Convex > \"u\" || Convex.syscall === void 0)\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  let r = Convex.syscall(t, JSON.stringify(e));\n  return JSON.parse(r);\n}\nn($, \"performSyscall\");\nasync function c(t, e) {\n  if (typeof Convex > \"u\" || Convex.asyncSyscall === void 0)\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  let r;\n  try {\n    r = await Convex.asyncSyscall(t, JSON.stringify(e));\n  } catch (o) {\n    if (o.data !== void 0) {\n      let s = new he(o.message);\n      throw s.data = m(o.data), s;\n    }\n    throw new Error(o.message);\n  }\n  return JSON.parse(r);\n}\nn(c, \"performAsyncSyscall\");\nfunction F(t, e) {\n  if (typeof Convex > \"u\" || Convex.jsSyscall === void 0)\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  return Convex.jsSyscall(t, e);\n}\nn(F, \"performJsSyscall\");\n\n// node_modules/convex/dist/esm/server/components/index.js\nfunction xe(t, e) {\n  let r = {\n    get(o, s) {\n      if (typeof s == \"string\") {\n        let i = [...e, s];\n        return xe(t, i);\n      } else if (s === W) {\n        if (e.length < 1) {\n          let i = [t, ...e].join(\".\");\n          throw new Error(\n            `API path is expected to be of the form \\`${t}.childComponent.functionName\\`. Found: \\`${i}\\``\n          );\n        }\n        return \"_reference/childComponent/\" + e.join(\"/\");\n      } else\n        return;\n    }\n  };\n  return new Proxy({}, r);\n}\nn(xe, \"createChildComponents\");\nvar et = /* @__PURE__ */ n(() => xe(\"components\", []), \"componentsGeneric\");\n\n// node_modules/convex/dist/esm/server/impl/actions_impl.js\nfunction Y(t, e, r) {\n  return {\n    ...w(e),\n    args: p(v(r)),\n    version: f,\n    requestId: t\n  };\n}\nn(Y, \"syscallArgs\");\nfunction we(t) {\n  return {\n    runQuery: /* @__PURE__ */ n(async (e, r) => {\n      let o = await c(\n        \"1.0/actions/query\",\n        Y(t, e, r)\n      );\n      return m(o);\n    }, \"runQuery\"),\n    runMutation: /* @__PURE__ */ n(async (e, r) => {\n      let o = await c(\n        \"1.0/actions/mutation\",\n        Y(t, e, r)\n      );\n      return m(o);\n    }, \"runMutation\"),\n    runAction: /* @__PURE__ */ n(async (e, r) => {\n      let o = await c(\n        \"1.0/actions/action\",\n        Y(t, e, r)\n      );\n      return m(o);\n    }, \"runAction\")\n  };\n}\nn(we, \"setupActionCalls\");\n\n// node_modules/convex/dist/esm/server/vector_search.js\nvar tt = Object.defineProperty, rt = /* @__PURE__ */ n((t, e, r) => e in t ? tt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), ge = /* @__PURE__ */ n((t, e, r) => rt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), O = class {\n  static {\n    n(this, \"FilterExpression\");\n  }\n  /**\n   * @internal\n   */\n  constructor() {\n    ge(this, \"_isExpression\"), ge(this, \"_value\");\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/validate.js\nfunction u(t, e, r, o) {\n  if (t === void 0)\n    throw new TypeError(\n      `Must provide arg ${e} \\`${o}\\` to \\`${r}\\``\n    );\n}\nn(u, \"validateArg\");\nfunction ve(t, e, r, o) {\n  if (!Number.isInteger(t) || t < 0)\n    throw new TypeError(\n      `Arg ${e} \\`${o}\\` to \\`${r}\\` must be a non-negative integer`\n    );\n}\nn(ve, \"validateArgIsNonNegativeInteger\");\n\n// node_modules/convex/dist/esm/server/impl/vector_search_impl.js\nvar nt = Object.defineProperty, ot = /* @__PURE__ */ n((t, e, r) => e in t ? nt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), K = /* @__PURE__ */ n((t, e, r) => ot(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\");\nfunction be(t) {\n  return async (e, r, o) => {\n    if (u(e, 1, \"vectorSearch\", \"tableName\"), u(r, 2, \"vectorSearch\", \"indexName\"), u(o, 3, \"vectorSearch\", \"query\"), !o.vector || !Array.isArray(o.vector) || o.vector.length === 0)\n      throw Error(\"`vector` must be a non-empty Array in vectorSearch\");\n    return await new X(\n      t,\n      e + \".\" + r,\n      o\n    ).collect();\n  };\n}\nn(be, \"setupActionVectorSearch\");\nvar X = class {\n  static {\n    n(this, \"VectorQueryImpl\");\n  }\n  constructor(e, r, o) {\n    K(this, \"requestId\"), K(this, \"state\"), this.requestId = e;\n    let s = o.filter ? M(o.filter(st)) : null;\n    this.state = {\n      type: \"preparing\",\n      query: {\n        indexName: r,\n        limit: o.limit,\n        vector: o.vector,\n        expressions: s\n      }\n    };\n  }\n  async collect() {\n    if (this.state.type === \"consumed\")\n      throw new Error(\"This query is closed and can't emit any more values.\");\n    let e = this.state.query;\n    this.state = { type: \"consumed\" };\n    let { results: r } = await c(\"1.0/actions/vectorSearch\", {\n      requestId: this.requestId,\n      version: f,\n      query: e\n    });\n    return r;\n  }\n}, A = class extends O {\n  static {\n    n(this, \"ExpressionImpl\");\n  }\n  constructor(e) {\n    super(), K(this, \"inner\"), this.inner = e;\n  }\n  serialize() {\n    return this.inner;\n  }\n};\nfunction M(t) {\n  return t instanceof A ? t.serialize() : { $literal: x(t) };\n}\nn(M, \"serializeExpression\");\nvar st = {\n  //  Comparisons  /////////////////////////////////////////////////////////////\n  eq(t, e) {\n    if (typeof t != \"string\")\n      throw new Error(\"The first argument to `q.eq` must be a field name.\");\n    return new A({\n      $eq: [\n        M(new A({ $field: t })),\n        M(e)\n      ]\n    });\n  },\n  //  Logic  ///////////////////////////////////////////////////////////////////\n  or(...t) {\n    return new A({ $or: t.map(M) });\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/authentication_impl.js\nfunction J(t) {\n  return {\n    getUserIdentity: /* @__PURE__ */ n(async () => await c(\"1.0/getUserIdentity\", {\n      requestId: t\n    }), \"getUserIdentity\")\n  };\n}\nn(J, \"setupAuth\");\n\n// node_modules/convex/dist/esm/server/filter_builder.js\nvar it = Object.defineProperty, at = /* @__PURE__ */ n((t, e, r) => e in t ? it(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), Se = /* @__PURE__ */ n((t, e, r) => at(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), U = class {\n  static {\n    n(this, \"Expression\");\n  }\n  /**\n   * @internal\n   */\n  constructor() {\n    Se(this, \"_isExpression\"), Se(this, \"_value\");\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/filter_builder_impl.js\nvar ut = Object.defineProperty, ct = /* @__PURE__ */ n((t, e, r) => e in t ? ut(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), lt = /* @__PURE__ */ n((t, e, r) => ct(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), y = class extends U {\n  static {\n    n(this, \"ExpressionImpl\");\n  }\n  constructor(e) {\n    super(), lt(this, \"inner\"), this.inner = e;\n  }\n  serialize() {\n    return this.inner;\n  }\n};\nfunction d(t) {\n  return t instanceof y ? t.serialize() : { $literal: x(t) };\n}\nn(d, \"serializeExpression\");\nvar _e = {\n  //  Comparisons  /////////////////////////////////////////////////////////////\n  eq(t, e) {\n    return new y({\n      $eq: [d(t), d(e)]\n    });\n  },\n  neq(t, e) {\n    return new y({\n      $neq: [d(t), d(e)]\n    });\n  },\n  lt(t, e) {\n    return new y({\n      $lt: [d(t), d(e)]\n    });\n  },\n  lte(t, e) {\n    return new y({\n      $lte: [d(t), d(e)]\n    });\n  },\n  gt(t, e) {\n    return new y({\n      $gt: [d(t), d(e)]\n    });\n  },\n  gte(t, e) {\n    return new y({\n      $gte: [d(t), d(e)]\n    });\n  },\n  //  Arithmetic  //////////////////////////////////////////////////////////////\n  add(t, e) {\n    return new y({\n      $add: [d(t), d(e)]\n    });\n  },\n  sub(t, e) {\n    return new y({\n      $sub: [d(t), d(e)]\n    });\n  },\n  mul(t, e) {\n    return new y({\n      $mul: [d(t), d(e)]\n    });\n  },\n  div(t, e) {\n    return new y({\n      $div: [d(t), d(e)]\n    });\n  },\n  mod(t, e) {\n    return new y({\n      $mod: [d(t), d(e)]\n    });\n  },\n  neg(t) {\n    return new y({ $neg: d(t) });\n  },\n  //  Logic  ///////////////////////////////////////////////////////////////////\n  and(...t) {\n    return new y({ $and: t.map(d) });\n  },\n  or(...t) {\n    return new y({ $or: t.map(d) });\n  },\n  not(t) {\n    return new y({ $not: d(t) });\n  },\n  //  Other  ///////////////////////////////////////////////////////////////////\n  field(t) {\n    return new y({ $field: t });\n  }\n};\n\n// node_modules/convex/dist/esm/server/index_range_builder.js\nvar dt = Object.defineProperty, pt = /* @__PURE__ */ n((t, e, r) => e in t ? dt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), ft = /* @__PURE__ */ n((t, e, r) => pt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), j = class {\n  static {\n    n(this, \"IndexRange\");\n  }\n  /**\n   * @internal\n   */\n  constructor() {\n    ft(this, \"_isIndexRange\");\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js\nvar ht = Object.defineProperty, mt = /* @__PURE__ */ n((t, e, r) => e in t ? ht(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), Ae = /* @__PURE__ */ n((t, e, r) => mt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), Q = class t extends j {\n  static {\n    n(this, \"IndexRangeBuilderImpl\");\n  }\n  constructor(e) {\n    super(), Ae(this, \"rangeExpressions\"), Ae(this, \"isConsumed\"), this.rangeExpressions = e, this.isConsumed = !1;\n  }\n  static new() {\n    return new t([]);\n  }\n  consume() {\n    if (this.isConsumed)\n      throw new Error(\n        \"IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes\"\n      );\n    this.isConsumed = !0;\n  }\n  eq(e, r) {\n    return this.consume(), new t(\n      this.rangeExpressions.concat({\n        type: \"Eq\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  gt(e, r) {\n    return this.consume(), new t(\n      this.rangeExpressions.concat({\n        type: \"Gt\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  gte(e, r) {\n    return this.consume(), new t(\n      this.rangeExpressions.concat({\n        type: \"Gte\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  lt(e, r) {\n    return this.consume(), new t(\n      this.rangeExpressions.concat({\n        type: \"Lt\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  lte(e, r) {\n    return this.consume(), new t(\n      this.rangeExpressions.concat({\n        type: \"Lte\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  export() {\n    return this.consume(), this.rangeExpressions;\n  }\n};\n\n// node_modules/convex/dist/esm/server/search_filter_builder.js\nvar yt = Object.defineProperty, xt = /* @__PURE__ */ n((t, e, r) => e in t ? yt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), wt = /* @__PURE__ */ n((t, e, r) => xt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), G = class {\n  static {\n    n(this, \"SearchFilter\");\n  }\n  /**\n   * @internal\n   */\n  constructor() {\n    wt(this, \"_isSearchFilter\");\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js\nvar gt = Object.defineProperty, vt = /* @__PURE__ */ n((t, e, r) => e in t ? gt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), Ee = /* @__PURE__ */ n((t, e, r) => vt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), H = class t extends G {\n  static {\n    n(this, \"SearchFilterBuilderImpl\");\n  }\n  constructor(e) {\n    super(), Ee(this, \"filters\"), Ee(this, \"isConsumed\"), this.filters = e, this.isConsumed = !1;\n  }\n  static new() {\n    return new t([]);\n  }\n  consume() {\n    if (this.isConsumed)\n      throw new Error(\n        \"SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.\"\n      );\n    this.isConsumed = !0;\n  }\n  search(e, r) {\n    return u(e, 1, \"search\", \"fieldName\"), u(r, 2, \"search\", \"query\"), this.consume(), new t(\n      this.filters.concat({\n        type: \"Search\",\n        fieldPath: e,\n        value: r\n      })\n    );\n  }\n  eq(e, r) {\n    return u(e, 1, \"eq\", \"fieldName\"), arguments.length !== 2 && u(r, 2, \"search\", \"value\"), this.consume(), new t(\n      this.filters.concat({\n        type: \"Eq\",\n        fieldPath: e,\n        value: x(r)\n      })\n    );\n  }\n  export() {\n    return this.consume(), this.filters;\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/query_impl.js\nvar bt = Object.defineProperty, St = /* @__PURE__ */ n((t, e, r) => e in t ? bt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), Z = /* @__PURE__ */ n((t, e, r) => St(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), Ie = 256, E = class {\n  static {\n    n(this, \"QueryInitializerImpl\");\n  }\n  constructor(e) {\n    Z(this, \"tableName\"), this.tableName = e;\n  }\n  withIndex(e, r) {\n    u(e, 1, \"withIndex\", \"indexName\");\n    let o = Q.new();\n    return r !== void 0 && (o = r(o)), new S({\n      source: {\n        type: \"IndexRange\",\n        indexName: this.tableName + \".\" + e,\n        range: o.export(),\n        order: null\n      },\n      operators: []\n    });\n  }\n  withSearchIndex(e, r) {\n    u(e, 1, \"withSearchIndex\", \"indexName\"), u(r, 2, \"withSearchIndex\", \"searchFilter\");\n    let o = H.new();\n    return new S({\n      source: {\n        type: \"Search\",\n        indexName: this.tableName + \".\" + e,\n        filters: r(o).export()\n      },\n      operators: []\n    });\n  }\n  fullTableScan() {\n    return new S({\n      source: {\n        type: \"FullTableScan\",\n        tableName: this.tableName,\n        order: null\n      },\n      operators: []\n    });\n  }\n  order(e) {\n    return this.fullTableScan().order(e);\n  }\n  // This is internal API and should not be exposed to developers yet.\n  async count() {\n    let e = await c(\"1.0/count\", {\n      table: this.tableName\n    });\n    return m(e);\n  }\n  filter(e) {\n    return this.fullTableScan().filter(e);\n  }\n  limit(e) {\n    return this.fullTableScan().limit(e);\n  }\n  collect() {\n    return this.fullTableScan().collect();\n  }\n  take(e) {\n    return this.fullTableScan().take(e);\n  }\n  paginate(e) {\n    return this.fullTableScan().paginate(e);\n  }\n  first() {\n    return this.fullTableScan().first();\n  }\n  unique() {\n    return this.fullTableScan().unique();\n  }\n  [Symbol.asyncIterator]() {\n    return this.fullTableScan()[Symbol.asyncIterator]();\n  }\n};\nfunction Pe(t) {\n  throw new Error(\n    t === \"consumed\" ? \"This query is closed and can't emit any more values.\" : \"This query has been chained with another operator and can't be reused.\"\n  );\n}\nn(Pe, \"throwClosedError\");\nvar S = class t {\n  static {\n    n(this, \"QueryImpl\");\n  }\n  constructor(e) {\n    Z(this, \"state\"), Z(this, \"tableNameForErrorMessages\"), this.state = { type: \"preparing\", query: e }, e.source.type === \"FullTableScan\" ? this.tableNameForErrorMessages = e.source.tableName : this.tableNameForErrorMessages = e.source.indexName.split(\".\")[0];\n  }\n  takeQuery() {\n    if (this.state.type !== \"preparing\")\n      throw new Error(\n        \"A query can only be chained once and can't be chained after iteration begins.\"\n      );\n    let e = this.state.query;\n    return this.state = { type: \"closed\" }, e;\n  }\n  startQuery() {\n    if (this.state.type === \"executing\")\n      throw new Error(\"Iteration can only begin on a query once.\");\n    (this.state.type === \"closed\" || this.state.type === \"consumed\") && Pe(this.state.type);\n    let e = this.state.query, { queryId: r } = $(\"1.0/queryStream\", { query: e, version: f });\n    return this.state = { type: \"executing\", queryId: r }, r;\n  }\n  closeQuery() {\n    if (this.state.type === \"executing\") {\n      let e = this.state.queryId;\n      $(\"1.0/queryCleanup\", { queryId: e });\n    }\n    this.state = { type: \"consumed\" };\n  }\n  order(e) {\n    u(e, 1, \"order\", \"order\");\n    let r = this.takeQuery();\n    if (r.source.type === \"Search\")\n      throw new Error(\n        \"Search queries must always be in relevance order. Can not set order manually.\"\n      );\n    if (r.source.order !== null)\n      throw new Error(\"Queries may only specify order at most once\");\n    return r.source.order = e, new t(r);\n  }\n  filter(e) {\n    u(e, 1, \"filter\", \"predicate\");\n    let r = this.takeQuery();\n    if (r.operators.length >= Ie)\n      throw new Error(\n        `Can't construct query with more than ${Ie} operators`\n      );\n    return r.operators.push({\n      filter: d(e(_e))\n    }), new t(r);\n  }\n  limit(e) {\n    u(e, 1, \"limit\", \"n\");\n    let r = this.takeQuery();\n    return r.operators.push({ limit: e }), new t(r);\n  }\n  [Symbol.asyncIterator]() {\n    return this.startQuery(), this;\n  }\n  async next() {\n    (this.state.type === \"closed\" || this.state.type === \"consumed\") && Pe(this.state.type);\n    let e = this.state.type === \"preparing\" ? this.startQuery() : this.state.queryId, { value: r, done: o } = await c(\"1.0/queryStreamNext\", {\n      queryId: e\n    });\n    return o && this.closeQuery(), { value: m(r), done: o };\n  }\n  return() {\n    return this.closeQuery(), Promise.resolve({ done: !0, value: void 0 });\n  }\n  async paginate(e) {\n    if (u(e, 1, \"paginate\", \"options\"), typeof e?.numItems != \"number\" || e.numItems < 0)\n      throw new Error(\n        `\\`options.numItems\\` must be a positive number. Received \\`${e?.numItems}\\`.`\n      );\n    let r = this.takeQuery(), o = e.numItems, s = e.cursor, i = e?.endCursor ?? null, l = e.maximumRowsRead ?? null, { page: h, isDone: b, continueCursor: N, splitCursor: Ge, pageStatus: He } = await c(\"1.0/queryPage\", {\n      query: r,\n      cursor: s,\n      endCursor: i,\n      pageSize: o,\n      maximumRowsRead: l,\n      maximumBytesRead: e.maximumBytesRead,\n      version: f\n    });\n    return {\n      page: h.map((ze) => m(ze)),\n      isDone: b,\n      continueCursor: N,\n      splitCursor: Ge,\n      pageStatus: He\n    };\n  }\n  async collect() {\n    let e = [];\n    for await (let r of this)\n      e.push(r);\n    return e;\n  }\n  async take(e) {\n    return u(e, 1, \"take\", \"n\"), ve(e, 1, \"take\", \"n\"), this.limit(e).collect();\n  }\n  async first() {\n    let e = await this.take(1);\n    return e.length === 0 ? null : e[0];\n  }\n  async unique() {\n    let e = await this.take(2);\n    if (e.length === 0)\n      return null;\n    if (e.length === 2)\n      throw new Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:\n [${e[0]._id}, ${e[1]._id}, ...]`);\n    return e[0];\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/database_impl.js\nasync function ee(t, e, r) {\n  if (u(e, 1, \"get\", \"id\"), typeof e != \"string\")\n    throw new Error(\n      `Invalid argument \\`id\\` for \\`db.get\\`, expected string but got '${typeof e}': ${e}`\n    );\n  let o = {\n    id: p(e),\n    isSystem: r,\n    version: f,\n    table: t\n  }, s = await c(\"1.0/get\", o);\n  return m(s);\n}\nn(ee, \"get\");\nfunction se() {\n  let t = /* @__PURE__ */ n((s = !1) => ({\n    get: /* @__PURE__ */ n(async (i, l) => l !== void 0 ? await ee(i, l, s) : await ee(void 0, i, s), \"get\"),\n    query: /* @__PURE__ */ n((i) => new q(i, s).query(), \"query\"),\n    normalizeId: /* @__PURE__ */ n((i, l) => {\n      u(i, 1, \"normalizeId\", \"tableName\"), u(l, 2, \"normalizeId\", \"id\");\n      let h = i.startsWith(\"_\");\n      if (h !== s)\n        throw new Error(\n          `${h ? \"System\" : \"User\"} tables can only be accessed from db.${s ? \"\" : \"system.\"}normalizeId().`\n        );\n      let b = $(\"1.0/db/normalizeId\", {\n        table: i,\n        idString: l\n      });\n      return m(b).id;\n    }, \"normalizeId\"),\n    // We set the system reader on the next line\n    system: null,\n    table: /* @__PURE__ */ n((i) => new q(i, s), \"table\")\n  }), \"reader\"), { system: e, ...r } = t(!0), o = t();\n  return o.system = r, o;\n}\nn(se, \"setupReader\");\nasync function Te(t, e) {\n  if (t.startsWith(\"_\"))\n    throw new Error(\"System tables (prefixed with `_`) are read-only.\");\n  u(t, 1, \"insert\", \"table\"), u(e, 2, \"insert\", \"value\");\n  let r = await c(\"1.0/insert\", {\n    table: t,\n    value: p(e)\n  });\n  return m(r)._id;\n}\nn(Te, \"insert\");\nasync function te(t, e, r) {\n  u(e, 1, \"patch\", \"id\"), u(r, 2, \"patch\", \"value\"), await c(\"1.0/shallowMerge\", {\n    id: p(e),\n    value: pe(r),\n    table: t\n  });\n}\nn(te, \"patch\");\nasync function re(t, e, r) {\n  u(e, 1, \"replace\", \"id\"), u(r, 2, \"replace\", \"value\"), await c(\"1.0/replace\", {\n    id: p(e),\n    value: p(r),\n    table: t\n  });\n}\nn(re, \"replace\");\nasync function ne(t, e) {\n  u(e, 1, \"delete\", \"id\"), await c(\"1.0/remove\", {\n    id: p(e),\n    table: t\n  });\n}\nn(ne, \"delete_\");\nfunction Ce() {\n  let t = se();\n  return {\n    get: t.get,\n    query: t.query,\n    normalizeId: t.normalizeId,\n    system: t.system,\n    insert: /* @__PURE__ */ n(async (e, r) => await Te(e, r), \"insert\"),\n    patch: /* @__PURE__ */ n(async (e, r, o) => o !== void 0 ? await te(e, r, o) : await te(void 0, e, r), \"patch\"),\n    replace: /* @__PURE__ */ n(async (e, r, o) => o !== void 0 ? await re(e, r, o) : await re(void 0, e, r), \"replace\"),\n    delete: /* @__PURE__ */ n(async (e, r) => r !== void 0 ? await ne(e, r) : await ne(void 0, e), \"delete\"),\n    table: /* @__PURE__ */ n((e) => new oe(e, !1), \"table\")\n  };\n}\nn(Ce, \"setupWriter\");\nvar q = class {\n  static {\n    n(this, \"TableReader\");\n  }\n  constructor(e, r) {\n    this.tableName = e, this.isSystem = r;\n  }\n  async get(e) {\n    return ee(this.tableName, e, this.isSystem);\n  }\n  query() {\n    let e = this.tableName.startsWith(\"_\");\n    if (e !== this.isSystem)\n      throw new Error(\n        `${e ? \"System\" : \"User\"} tables can only be accessed from db.${this.isSystem ? \"\" : \"system.\"}query().`\n      );\n    return new E(this.tableName);\n  }\n}, oe = class extends q {\n  static {\n    n(this, \"TableWriter\");\n  }\n  async insert(e) {\n    return Te(this.tableName, e);\n  }\n  async patch(e, r) {\n    return te(this.tableName, e, r);\n  }\n  async replace(e, r) {\n    return re(this.tableName, e, r);\n  }\n  async delete(e) {\n    return ne(this.tableName, e);\n  }\n};\n\n// node_modules/convex/dist/esm/server/impl/scheduler_impl.js\nfunction Ne() {\n  return {\n    runAfter: /* @__PURE__ */ n(async (t, e, r) => {\n      let o = qe(t, e, r);\n      return await c(\"1.0/schedule\", o);\n    }, \"runAfter\"),\n    runAt: /* @__PURE__ */ n(async (t, e, r) => {\n      let o = Re(\n        t,\n        e,\n        r\n      );\n      return await c(\"1.0/schedule\", o);\n    }, \"runAt\"),\n    cancel: /* @__PURE__ */ n(async (t) => {\n      u(t, 1, \"cancel\", \"id\");\n      let e = { id: p(t) };\n      await c(\"1.0/cancel_job\", e);\n    }, \"cancel\")\n  };\n}\nn(Ne, \"setupMutationScheduler\");\nfunction $e(t) {\n  return {\n    runAfter: /* @__PURE__ */ n(async (e, r, o) => {\n      let s = {\n        requestId: t,\n        ...qe(e, r, o)\n      };\n      return await c(\"1.0/actions/schedule\", s);\n    }, \"runAfter\"),\n    runAt: /* @__PURE__ */ n(async (e, r, o) => {\n      let s = {\n        requestId: t,\n        ...Re(e, r, o)\n      };\n      return await c(\"1.0/actions/schedule\", s);\n    }, \"runAt\"),\n    cancel: /* @__PURE__ */ n(async (e) => {\n      u(e, 1, \"cancel\", \"id\");\n      let r = { id: p(e) };\n      return await c(\"1.0/actions/cancel_job\", r);\n    }, \"cancel\")\n  };\n}\nn($e, \"setupActionScheduler\");\nfunction qe(t, e, r) {\n  if (typeof t != \"number\")\n    throw new Error(\"`delayMs` must be a number\");\n  if (!isFinite(t))\n    throw new Error(\"`delayMs` must be a finite number\");\n  if (t < 0)\n    throw new Error(\"`delayMs` must be non-negative\");\n  let o = v(r), s = w(e), i = (Date.now() + t) / 1e3;\n  return {\n    ...s,\n    ts: i,\n    args: p(o),\n    version: f\n  };\n}\nn(qe, \"runAfterSyscallArgs\");\nfunction Re(t, e, r) {\n  let o;\n  if (t instanceof Date)\n    o = t.valueOf() / 1e3;\n  else if (typeof t == \"number\")\n    o = t / 1e3;\n  else\n    throw new Error(\"The invoke time must a Date or a timestamp\");\n  let s = w(e), i = v(r);\n  return {\n    ...s,\n    ts: o,\n    args: p(i),\n    version: f\n  };\n}\nn(Re, \"runAtSyscallArgs\");\n\n// node_modules/convex/dist/esm/server/impl/storage_impl.js\nfunction ie(t) {\n  return {\n    getUrl: /* @__PURE__ */ n(async (e) => (u(e, 1, \"getUrl\", \"storageId\"), await c(\"1.0/storageGetUrl\", {\n      requestId: t,\n      version: f,\n      storageId: e\n    })), \"getUrl\"),\n    getMetadata: /* @__PURE__ */ n(async (e) => await c(\"1.0/storageGetMetadata\", {\n      requestId: t,\n      version: f,\n      storageId: e\n    }), \"getMetadata\")\n  };\n}\nn(ie, \"setupStorageReader\");\nfunction ae(t) {\n  let e = ie(t);\n  return {\n    generateUploadUrl: /* @__PURE__ */ n(async () => await c(\"1.0/storageGenerateUploadUrl\", {\n      requestId: t,\n      version: f\n    }), \"generateUploadUrl\"),\n    delete: /* @__PURE__ */ n(async (r) => {\n      await c(\"1.0/storageDelete\", {\n        requestId: t,\n        version: f,\n        storageId: r\n      });\n    }, \"delete\"),\n    getUrl: e.getUrl,\n    getMetadata: e.getMetadata\n  };\n}\nn(ae, \"setupStorageWriter\");\nfunction Fe(t) {\n  return {\n    ...ae(t),\n    store: /* @__PURE__ */ n(async (r, o) => await F(\"storage/storeBlob\", {\n      requestId: t,\n      version: f,\n      blob: r,\n      options: o\n    }), \"store\"),\n    get: /* @__PURE__ */ n(async (r) => await F(\"storage/getBlob\", {\n      requestId: t,\n      version: f,\n      storageId: r\n    }), \"get\")\n  };\n}\nn(Fe, \"setupStorageActionWriter\");\n\n// node_modules/convex/dist/esm/server/impl/registration_impl.js\nasync function Oe(t, e) {\n  let o = m(JSON.parse(e)), s = {\n    db: Ce(),\n    auth: J(\"\"),\n    storage: ae(\"\"),\n    scheduler: Ne(),\n    runQuery: /* @__PURE__ */ n((l, h) => ue(\"query\", l, h), \"runQuery\"),\n    runMutation: /* @__PURE__ */ n((l, h) => ue(\"mutation\", l, h), \"runMutation\")\n  }, i = await ce(t, s, o);\n  return Me(i), JSON.stringify(p(i === void 0 ? null : i));\n}\nn(Oe, \"invokeMutation\");\nfunction Me(t) {\n  if (t instanceof E || t instanceof S)\n    throw new Error(\n      \"Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.\"\n    );\n}\nn(Me, \"validateReturnValue\");\nasync function ce(t, e, r) {\n  let o;\n  try {\n    o = await Promise.resolve(t(e, ...r));\n  } catch (s) {\n    throw _t(s);\n  }\n  return o;\n}\nn(ce, \"invokeFunction\");\nfunction I(t, e) {\n  return (r, o) => (globalThis.console.warn(\n    `Convex functions should not directly call other Convex functions. Consider calling a helper function instead. e.g. \\`export const foo = ${t}(...); await foo(ctx);\\` is not supported. See https://docs.convex.dev/production/best-practices/#use-helper-functions-to-write-shared-code`\n  ), e(r, o));\n}\nn(I, \"dontCallDirectly\");\nfunction _t(t) {\n  if (typeof t == \"object\" && t !== null && Symbol.for(\"ConvexError\") in t) {\n    let e = t;\n    return e.data = JSON.stringify(\n      p(e.data === void 0 ? null : e.data)\n    ), e.ConvexErrorSymbol = Symbol.for(\"ConvexError\"), e;\n  } else\n    return t;\n}\nn(_t, \"serializeConvexErrorData\");\nfunction P() {\n  if (typeof window > \"u\" || window.__convexAllowFunctionsInBrowser)\n    return;\n  (Object.getOwnPropertyDescriptor(globalThis, \"window\")?.get?.toString().includes(\"[native code]\") ?? !1) && console.error(\n    \"Convex functions should not be imported in the browser. This will throw an error in future versions of `convex`. If this is a false negative, please report it to Convex support.\"\n  );\n}\nn(P, \"assertNotBrowser\");\nfunction Je(t, e) {\n  if (e === void 0)\n    throw new Error(\n      `A validator is undefined for field \"${t}\". This is often caused by circular imports. See https://docs.convex.dev/error#undefined-validator for details.`\n    );\n  return e;\n}\nn(Je, \"strictReplacer\");\nfunction T(t) {\n  return () => {\n    let e = a.any();\n    return typeof t == \"object\" && t.args !== void 0 && (e = V(t.args)), JSON.stringify(e.json, Je);\n  };\n}\nn(T, \"exportArgs\");\nfunction C(t) {\n  return () => {\n    let e;\n    return typeof t == \"object\" && t.returns !== void 0 && (e = V(t.returns)), JSON.stringify(e ? e.json : null, Je);\n  };\n}\nn(C, \"exportReturns\");\nvar At = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\"mutation\", e);\n  return P(), r.isMutation = !0, r.isPublic = !0, r.invokeMutation = (o) => Oe(e, o), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"mutationGeneric\"), Et = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\n    \"internalMutation\",\n    e\n  );\n  return P(), r.isMutation = !0, r.isInternal = !0, r.invokeMutation = (o) => Oe(e, o), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"internalMutationGeneric\");\nasync function Ue(t, e) {\n  let o = m(JSON.parse(e)), s = {\n    db: se(),\n    auth: J(\"\"),\n    storage: ie(\"\"),\n    runQuery: /* @__PURE__ */ n((l, h) => ue(\"query\", l, h), \"runQuery\")\n  }, i = await ce(t, s, o);\n  return Me(i), JSON.stringify(p(i === void 0 ? null : i));\n}\nn(Ue, \"invokeQuery\");\nvar It = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\"query\", e);\n  return P(), r.isQuery = !0, r.isPublic = !0, r.invokeQuery = (o) => Ue(e, o), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"queryGeneric\"), Pt = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\"internalQuery\", e);\n  return P(), r.isQuery = !0, r.isInternal = !0, r.invokeQuery = (o) => Ue(e, o), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"internalQueryGeneric\");\nasync function je(t, e, r) {\n  let o = m(JSON.parse(r)), i = {\n    ...we(e),\n    auth: J(e),\n    scheduler: $e(e),\n    storage: Fe(e),\n    vectorSearch: be(e)\n  }, l = await ce(t, i, o);\n  return JSON.stringify(p(l === void 0 ? null : l));\n}\nn(je, \"invokeAction\");\nvar Tt = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\"action\", e);\n  return P(), r.isAction = !0, r.isPublic = !0, r.invokeAction = (o, s) => je(e, o, s), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"actionGeneric\"), Ct = /* @__PURE__ */ n(((t) => {\n  let e = typeof t == \"function\" ? t : t.handler, r = I(\"internalAction\", e);\n  return P(), r.isAction = !0, r.isInternal = !0, r.invokeAction = (o, s) => je(e, o, s), r.exportArgs = T(t), r.exportReturns = C(t), r._handler = e, r;\n}), \"internalActionGeneric\");\nasync function ue(t, e, r) {\n  let o = v(r), s = {\n    udfType: t,\n    args: p(o),\n    ...w(e)\n  }, i = await c(\"1.0/runUdf\", s);\n  return m(i);\n}\nn(ue, \"runUdf\");\n\n// node_modules/convex/dist/esm/server/pagination.js\nvar Mn = a.object({\n  numItems: a.number(),\n  cursor: a.union(a.string(), a.null()),\n  endCursor: a.optional(a.union(a.string(), a.null())),\n  id: a.optional(a.number()),\n  maximumRowsRead: a.optional(a.number()),\n  maximumBytesRead: a.optional(a.number())\n});\n\n// node_modules/convex/dist/esm/server/schema.js\nvar Nt = Object.defineProperty, $t = /* @__PURE__ */ n((t, e, r) => e in t ? Nt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), g = /* @__PURE__ */ n((t, e, r) => $t(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), z = class {\n  static {\n    n(this, \"TableDefinition\");\n  }\n  /**\n   * @internal\n   */\n  constructor(e) {\n    g(this, \"indexes\"), g(this, \"stagedDbIndexes\"), g(this, \"searchIndexes\"), g(this, \"stagedSearchIndexes\"), g(this, \"vectorIndexes\"), g(this, \"stagedVectorIndexes\"), g(this, \"validator\"), this.indexes = [], this.stagedDbIndexes = [], this.searchIndexes = [], this.stagedSearchIndexes = [], this.vectorIndexes = [], this.stagedVectorIndexes = [], this.validator = e;\n  }\n  /**\n   * This API is experimental: it may change or disappear.\n   *\n   * Returns indexes defined on this table.\n   * Intended for the advanced use cases of dynamically deciding which index to use for a query.\n   * If you think you need this, please chime in on ths issue in the Convex JS GitHub repo.\n   * https://github.com/get-convex/convex-js/issues/49\n   */\n  \" indexes\"() {\n    return this.indexes;\n  }\n  index(e, r) {\n    return Array.isArray(r) ? this.indexes.push({\n      indexDescriptor: e,\n      fields: r\n    }) : r.staged ? this.stagedDbIndexes.push({\n      indexDescriptor: e,\n      fields: r.fields\n    }) : this.indexes.push({\n      indexDescriptor: e,\n      fields: r.fields\n    }), this;\n  }\n  searchIndex(e, r) {\n    return r.staged ? this.stagedSearchIndexes.push({\n      indexDescriptor: e,\n      searchField: r.searchField,\n      filterFields: r.filterFields || []\n    }) : this.searchIndexes.push({\n      indexDescriptor: e,\n      searchField: r.searchField,\n      filterFields: r.filterFields || []\n    }), this;\n  }\n  vectorIndex(e, r) {\n    return r.staged ? this.stagedVectorIndexes.push({\n      indexDescriptor: e,\n      vectorField: r.vectorField,\n      dimensions: r.dimensions,\n      filterFields: r.filterFields || []\n    }) : this.vectorIndexes.push({\n      indexDescriptor: e,\n      vectorField: r.vectorField,\n      dimensions: r.dimensions,\n      filterFields: r.filterFields || []\n    }), this;\n  }\n  /**\n   * Work around for https://github.com/microsoft/TypeScript/issues/57035\n   */\n  self() {\n    return this;\n  }\n  /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */\n  export() {\n    let e = this.validator.json;\n    if (typeof e != \"object\")\n      throw new Error(\n        \"Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)\"\n      );\n    return {\n      indexes: this.indexes,\n      stagedDbIndexes: this.stagedDbIndexes,\n      searchIndexes: this.searchIndexes,\n      stagedSearchIndexes: this.stagedSearchIndexes,\n      vectorIndexes: this.vectorIndexes,\n      stagedVectorIndexes: this.stagedVectorIndexes,\n      documentType: e\n    };\n  }\n};\nfunction le(t) {\n  return fe(t) ? new z(t) : new z(a.object(t));\n}\nn(le, \"defineTable\");\nvar de = class {\n  static {\n    n(this, \"SchemaDefinition\");\n  }\n  /**\n   * @internal\n   */\n  constructor(e, r) {\n    g(this, \"tables\"), g(this, \"strictTableNameTypes\"), g(this, \"schemaValidation\"), this.tables = e, this.schemaValidation = r?.schemaValidation === void 0 ? !0 : r.schemaValidation;\n  }\n  /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */\n  export() {\n    return JSON.stringify({\n      tables: Object.entries(this.tables).map(([e, r]) => {\n        let {\n          indexes: o,\n          stagedDbIndexes: s,\n          searchIndexes: i,\n          stagedSearchIndexes: l,\n          vectorIndexes: h,\n          stagedVectorIndexes: b,\n          documentType: N\n        } = r.export();\n        return {\n          tableName: e,\n          indexes: o,\n          stagedDbIndexes: s,\n          searchIndexes: i,\n          stagedSearchIndexes: l,\n          vectorIndexes: h,\n          stagedVectorIndexes: b,\n          documentType: N\n        };\n      }),\n      schemaValidation: this.schemaValidation\n    });\n  }\n};\nfunction Qe(t, e) {\n  return new de(t, e);\n}\nn(Qe, \"defineSchema\");\nvar zn = Qe({\n  _scheduled_functions: le({\n    name: a.string(),\n    args: a.array(a.any()),\n    scheduledTime: a.float64(),\n    completedTime: a.optional(a.float64()),\n    state: a.union(\n      a.object({ kind: a.literal(\"pending\") }),\n      a.object({ kind: a.literal(\"inProgress\") }),\n      a.object({ kind: a.literal(\"success\") }),\n      a.object({ kind: a.literal(\"failed\"), error: a.string() }),\n      a.object({ kind: a.literal(\"canceled\") })\n    )\n  }),\n  _storage: le({\n    sha256: a.string(),\n    size: a.float64(),\n    contentType: a.optional(a.string())\n  })\n});\n\nexport {\n  At as a,\n  Et as b,\n  It as c,\n  Pt as d,\n  Tt as e,\n  Ct as f,\n  Be as g,\n  Ye as h,\n  et as i\n};\n//# sourceMappingURL=6EQFL5ZL.js.map\n","environment":"isolate"},{"path":"_deps/34SVKERO.js","source":"import {\n  a as n\n} from \"./5B5TEMMX.js\";\n\n// node_modules/convex/dist/esm/values/base64.js\nvar d = [], l = [], et = Uint8Array, V = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nfor (h = 0, J = V.length; h < J; ++h)\n  d[h] = V[h], l[V.charCodeAt(h)] = h;\nvar h, J;\nl[45] = 62;\nl[95] = 63;\nfunction rt(t) {\n  var e = t.length;\n  if (e % 4 > 0)\n    throw new Error(\"Invalid string. Length must be a multiple of 4\");\n  var r = t.indexOf(\"=\");\n  r === -1 && (r = e);\n  var o = r === e ? 0 : 4 - r % 4;\n  return [r, o];\n}\nn(rt, \"getLens\");\nfunction nt(t, e, r) {\n  return (e + r) * 3 / 4 - r;\n}\nn(nt, \"_byteLength\");\nfunction g(t) {\n  var e, r = rt(t), o = r[0], s = r[1], f = new et(nt(t, o, s)), i = 0, c = s > 0 ? o - 4 : o, p;\n  for (p = 0; p < c; p += 4)\n    e = l[t.charCodeAt(p)] << 18 | l[t.charCodeAt(p + 1)] << 12 | l[t.charCodeAt(p + 2)] << 6 | l[t.charCodeAt(p + 3)], f[i++] = e >> 16 & 255, f[i++] = e >> 8 & 255, f[i++] = e & 255;\n  return s === 2 && (e = l[t.charCodeAt(p)] << 2 | l[t.charCodeAt(p + 1)] >> 4, f[i++] = e & 255), s === 1 && (e = l[t.charCodeAt(p)] << 10 | l[t.charCodeAt(p + 1)] << 4 | l[t.charCodeAt(p + 2)] >> 2, f[i++] = e >> 8 & 255, f[i++] = e & 255), f;\n}\nn(g, \"toByteArray\");\nfunction ot(t) {\n  return d[t >> 18 & 63] + d[t >> 12 & 63] + d[t >> 6 & 63] + d[t & 63];\n}\nn(ot, \"tripletToBase64\");\nfunction it(t, e, r) {\n  for (var o, s = [], f = e; f < r; f += 3)\n    o = (t[f] << 16 & 16711680) + (t[f + 1] << 8 & 65280) + (t[f + 2] & 255), s.push(ot(o));\n  return s.join(\"\");\n}\nn(it, \"encodeChunk\");\nfunction m(t) {\n  for (var e, r = t.length, o = r % 3, s = [], f = 16383, i = 0, c = r - o; i < c; i += f)\n    s.push(\n      it(\n        t,\n        i,\n        i + f > c ? c : i + f\n      )\n    );\n  return o === 1 ? (e = t[r - 1], s.push(d[e >> 2] + d[e << 4 & 63] + \"==\")) : o === 2 && (e = (t[r - 2] << 8) + t[r - 1], s.push(\n    d[e >> 10] + d[e >> 4 & 63] + d[e << 2 & 63] + \"=\"\n  )), s.join(\"\");\n}\nn(m, \"fromByteArray\");\n\n// node_modules/convex/dist/esm/common/index.js\nfunction $t(t) {\n  if (t === void 0)\n    return {};\n  if (!R(t))\n    throw new Error(\n      `The arguments to a Convex function must be an object. Received: ${t}`\n    );\n  return t;\n}\nn($t, \"parseArgs\");\nfunction R(t) {\n  let e = typeof t == \"object\", r = Object.getPrototypeOf(t), o = r === null || r === Object.prototype || // Objects generated from other contexts (e.g. across Node.js `vm` modules) will not satisfy the previous\n  // conditions but are still simple objects.\n  r?.constructor?.name === \"Object\";\n  return e && o;\n}\nn(R, \"isSimpleObject\");\n\n// node_modules/convex/dist/esm/values/value.js\nvar G = !0, w = BigInt(\"-9223372036854775808\"), M = BigInt(\"9223372036854775807\"), U = BigInt(\"0\"), st = BigInt(\"8\"), at = BigInt(\"256\");\nfunction Y(t) {\n  return Number.isNaN(t) || !Number.isFinite(t) || Object.is(t, -0);\n}\nn(Y, \"isSpecial\");\nfunction ft(t) {\n  t < U && (t -= w + w);\n  let e = t.toString(16);\n  e.length % 2 === 1 && (e = \"0\" + e);\n  let r = new Uint8Array(new ArrayBuffer(8)), o = 0;\n  for (let s of e.match(/.{2}/g).reverse())\n    r.set([parseInt(s, 16)], o++), t >>= st;\n  return m(r);\n}\nn(ft, \"slowBigIntToBase64\");\nfunction pt(t) {\n  let e = g(t);\n  if (e.byteLength !== 8)\n    throw new Error(\n      `Received ${e.byteLength} bytes, expected 8 for $integer`\n    );\n  let r = U, o = U;\n  for (let s of e)\n    r += BigInt(s) * at ** o, o++;\n  return r > M && (r += w + w), r;\n}\nn(pt, \"slowBase64ToBigInt\");\nfunction ut(t) {\n  if (t < w || M < t)\n    throw new Error(\n      `BigInt ${t} does not fit into a 64-bit signed integer.`\n    );\n  let e = new ArrayBuffer(8);\n  return new DataView(e).setBigInt64(0, t, !0), m(new Uint8Array(e));\n}\nn(ut, \"modernBigIntToBase64\");\nfunction ct(t) {\n  let e = g(t);\n  if (e.byteLength !== 8)\n    throw new Error(\n      `Received ${e.byteLength} bytes, expected 8 for $integer`\n    );\n  return new DataView(e.buffer).getBigInt64(0, !0);\n}\nn(ct, \"modernBase64ToBigInt\");\nvar lt = DataView.prototype.setBigInt64 ? ut : ft, dt = DataView.prototype.getBigInt64 ? ct : pt, H = 1024;\nfunction q(t) {\n  if (t.length > H)\n    throw new Error(\n      `Field name ${t} exceeds maximum field name length ${H}.`\n    );\n  if (t.startsWith(\"$\"))\n    throw new Error(`Field name ${t} starts with a '$', which is reserved.`);\n  for (let e = 0; e < t.length; e += 1) {\n    let r = t.charCodeAt(e);\n    if (r < 32 || r >= 127)\n      throw new Error(\n        `Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`\n      );\n  }\n}\nn(q, \"validateObjectField\");\nfunction S(t) {\n  if (t === null || typeof t == \"boolean\" || typeof t == \"number\" || typeof t == \"string\")\n    return t;\n  if (Array.isArray(t))\n    return t.map((o) => S(o));\n  if (typeof t != \"object\")\n    throw new Error(`Unexpected type of ${t}`);\n  let e = Object.entries(t);\n  if (e.length === 1) {\n    let o = e[0][0];\n    if (o === \"$bytes\") {\n      if (typeof t.$bytes != \"string\")\n        throw new Error(`Malformed $bytes field on ${t}`);\n      return g(t.$bytes).buffer;\n    }\n    if (o === \"$integer\") {\n      if (typeof t.$integer != \"string\")\n        throw new Error(`Malformed $integer field on ${t}`);\n      return dt(t.$integer);\n    }\n    if (o === \"$float\") {\n      if (typeof t.$float != \"string\")\n        throw new Error(`Malformed $float field on ${t}`);\n      let s = g(t.$float);\n      if (s.byteLength !== 8)\n        throw new Error(\n          `Received ${s.byteLength} bytes, expected 8 for $float`\n        );\n      let i = new DataView(s.buffer).getFloat64(0, G);\n      if (!Y(i))\n        throw new Error(`Float ${i} should be encoded as a number`);\n      return i;\n    }\n    if (o === \"$set\")\n      throw new Error(\n        \"Received a Set which is no longer supported as a Convex type.\"\n      );\n    if (o === \"$map\")\n      throw new Error(\n        \"Received a Map which is no longer supported as a Convex type.\"\n      );\n  }\n  let r = {};\n  for (let [o, s] of Object.entries(t))\n    q(o), r[o] = S(s);\n  return r;\n}\nn(S, \"jsonToConvex\");\nvar X = 16384;\nfunction y(t) {\n  let e = JSON.stringify(t, (r, o) => o === void 0 ? \"undefined\" : typeof o == \"bigint\" ? `${o.toString()}n` : o);\n  if (e.length > X) {\n    let r = \"[...truncated]\", o = X - r.length, s = e.codePointAt(o - 1);\n    return s !== void 0 && s > 65535 && (o -= 1), e.substring(0, o) + r;\n  }\n  return e;\n}\nn(y, \"stringifyValueForError\");\nfunction b(t, e, r, o) {\n  if (t === void 0) {\n    let i = r && ` (present at path ${r} in original object ${y(\n      e\n    )})`;\n    throw new Error(\n      `undefined is not a valid Convex value${i}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`\n    );\n  }\n  if (t === null)\n    return t;\n  if (typeof t == \"bigint\") {\n    if (t < w || M < t)\n      throw new Error(\n        `BigInt ${t} does not fit into a 64-bit signed integer.`\n      );\n    return { $integer: lt(t) };\n  }\n  if (typeof t == \"number\")\n    if (Y(t)) {\n      let i = new ArrayBuffer(8);\n      return new DataView(i).setFloat64(0, t, G), { $float: m(new Uint8Array(i)) };\n    } else\n      return t;\n  if (typeof t == \"boolean\" || typeof t == \"string\")\n    return t;\n  if (t instanceof ArrayBuffer)\n    return { $bytes: m(new Uint8Array(t)) };\n  if (Array.isArray(t))\n    return t.map(\n      (i, c) => b(i, e, r + `[${c}]`, !1)\n    );\n  if (t instanceof Set)\n    throw new Error(\n      D(r, \"Set\", [...t], e)\n    );\n  if (t instanceof Map)\n    throw new Error(\n      D(r, \"Map\", [...t], e)\n    );\n  if (!R(t)) {\n    let i = t?.constructor?.name, c = i ? `${i} ` : \"\";\n    throw new Error(\n      D(r, c, t, e)\n    );\n  }\n  let s = {}, f = Object.entries(t);\n  f.sort(([i, c], [p, Bt]) => i === p ? 0 : i < p ? -1 : 1);\n  for (let [i, c] of f)\n    c !== void 0 ? (q(i), s[i] = b(c, e, r + `.${i}`, !1)) : o && (q(i), s[i] = K(\n      c,\n      e,\n      r + `.${i}`\n    ));\n  return s;\n}\nn(b, \"convexToJsonInternal\");\nfunction D(t, e, r, o) {\n  return t ? `${e}${y(\n    r\n  )} is not a supported Convex type (present at path ${t} in original object ${y(\n    o\n  )}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.` : `${e}${y(\n    r\n  )} is not a supported Convex type.`;\n}\nn(D, \"errorMessageForUnsupportedType\");\nfunction K(t, e, r) {\n  if (t === void 0)\n    return { $undefined: null };\n  if (e === void 0)\n    throw new Error(\n      `Programming error. Current value is ${y(\n        t\n      )} but original value is undefined`\n    );\n  return b(t, e, r, !1);\n}\nn(K, \"convexOrUndefinedToJsonInternal\");\nfunction _(t) {\n  return b(t, t, \"\", !1);\n}\nn(_, \"convexToJson\");\nfunction Tt(t) {\n  return K(t, t, \"\");\n}\nn(Tt, \"convexOrUndefinedToJson\");\nfunction Ct(t) {\n  return b(t, t, \"\", !0);\n}\nn(Ct, \"patchValueToJson\");\n\n// node_modules/convex/dist/esm/values/validators.js\nvar ht = Object.defineProperty, yt = /* @__PURE__ */ n((t, e, r) => e in t ? ht(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), a = /* @__PURE__ */ n((t, e, r) => yt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), wt = \"https://docs.convex.dev/error#undefined-validator\";\nfunction x(t, e) {\n  let r = e !== void 0 ? ` for field \"${e}\"` : \"\";\n  throw new Error(\n    `A validator is undefined${r} in ${t}. This is often caused by circular imports. See ${wt} for details.`\n  );\n}\nn(x, \"throwUndefinedValidatorError\");\nvar u = class {\n  static {\n    n(this, \"BaseValidator\");\n  }\n  constructor({ isOptional: e }) {\n    a(this, \"type\"), a(this, \"fieldPaths\"), a(this, \"isOptional\"), a(this, \"isConvexValidator\"), this.isOptional = e, this.isConvexValidator = !0;\n  }\n}, A = class t extends u {\n  static {\n    n(this, \"VId\");\n  }\n  /**\n   * Usually you'd use `v.id(tableName)` instead.\n   */\n  constructor({\n    isOptional: e,\n    tableName: r\n  }) {\n    if (super({ isOptional: e }), a(this, \"tableName\"), a(this, \"kind\", \"id\"), typeof r != \"string\")\n      throw new Error(\"v.id(tableName) requires a string\");\n    this.tableName = r;\n  }\n  /** @internal */\n  get json() {\n    return { type: \"id\", tableName: this.tableName };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      tableName: this.tableName\n    });\n  }\n}, O = class t extends u {\n  static {\n    n(this, \"VFloat64\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"float64\");\n  }\n  /** @internal */\n  get json() {\n    return { type: \"number\" };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\"\n    });\n  }\n}, B = class t extends u {\n  static {\n    n(this, \"VInt64\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"int64\");\n  }\n  /** @internal */\n  get json() {\n    return { type: \"bigint\" };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({ isOptional: \"optional\" });\n  }\n}, $ = class t extends u {\n  static {\n    n(this, \"VBoolean\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"boolean\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\"\n    });\n  }\n}, E = class t extends u {\n  static {\n    n(this, \"VBytes\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"bytes\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({ isOptional: \"optional\" });\n  }\n}, I = class t extends u {\n  static {\n    n(this, \"VString\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"string\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\"\n    });\n  }\n}, j = class t extends u {\n  static {\n    n(this, \"VNull\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"null\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({ isOptional: \"optional\" });\n  }\n}, T = class t extends u {\n  static {\n    n(this, \"VAny\");\n  }\n  constructor() {\n    super(...arguments), a(this, \"kind\", \"any\");\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\"\n    });\n  }\n}, C = class t extends u {\n  static {\n    n(this, \"VObject\");\n  }\n  /**\n   * Usually you'd use `v.object({ ... })` instead.\n   */\n  constructor({\n    isOptional: e,\n    fields: r\n  }) {\n    super({ isOptional: e }), a(this, \"fields\"), a(this, \"kind\", \"object\"), globalThis.Object.entries(r).forEach(([o, s]) => {\n      if (s === void 0 && x(\"v.object()\", o), !s.isConvexValidator)\n        throw new Error(\"v.object() entries must be validators\");\n    }), this.fields = r;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: globalThis.Object.fromEntries(\n        globalThis.Object.entries(this.fields).map(([e, r]) => [\n          e,\n          {\n            fieldType: r.json,\n            optional: r.isOptional === \"optional\"\n          }\n        ])\n      )\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      fields: this.fields\n    });\n  }\n  /**\n   * Create a new VObject with the specified fields omitted.\n   * @param fields The field names to omit from this VObject.\n   */\n  omit(...e) {\n    let r = { ...this.fields };\n    for (let o of e)\n      delete r[o];\n    return new t({\n      isOptional: this.isOptional,\n      fields: r\n    });\n  }\n  /**\n   * Create a new VObject with only the specified fields.\n   * @param fields The field names to pick from this VObject.\n   */\n  pick(...e) {\n    let r = {};\n    for (let o of e)\n      r[o] = this.fields[o];\n    return new t({\n      isOptional: this.isOptional,\n      fields: r\n    });\n  }\n  /**\n   * Create a new VObject with all fields marked as optional.\n   */\n  partial() {\n    let e = {};\n    for (let [r, o] of globalThis.Object.entries(this.fields))\n      e[r] = o.asOptional();\n    return new t({\n      isOptional: this.isOptional,\n      fields: e\n    });\n  }\n  /**\n   * Create a new VObject with additional fields merged in.\n   * @param fields An object with additional validators to merge into this VObject.\n   */\n  extend(e) {\n    return new t({\n      isOptional: this.isOptional,\n      fields: { ...this.fields, ...e }\n    });\n  }\n}, N = class t extends u {\n  static {\n    n(this, \"VLiteral\");\n  }\n  /**\n   * Usually you'd use `v.literal(value)` instead.\n   */\n  constructor({ isOptional: e, value: r }) {\n    if (super({ isOptional: e }), a(this, \"value\"), a(this, \"kind\", \"literal\"), typeof r != \"string\" && typeof r != \"boolean\" && typeof r != \"number\" && typeof r != \"bigint\")\n      throw new Error(\"v.literal(value) must be a string, number, or boolean\");\n    this.value = r;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: _(this.value)\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      value: this.value\n    });\n  }\n}, v = class t extends u {\n  static {\n    n(this, \"VArray\");\n  }\n  /**\n   * Usually you'd use `v.array(element)` instead.\n   */\n  constructor({\n    isOptional: e,\n    element: r\n  }) {\n    super({ isOptional: e }), a(this, \"element\"), a(this, \"kind\", \"array\"), r === void 0 && x(\"v.array()\"), this.element = r;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: this.element.json\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      element: this.element\n    });\n  }\n}, L = class t extends u {\n  static {\n    n(this, \"VRecord\");\n  }\n  /**\n   * Usually you'd use `v.record(key, value)` instead.\n   */\n  constructor({\n    isOptional: e,\n    key: r,\n    value: o\n  }) {\n    if (super({ isOptional: e }), a(this, \"key\"), a(this, \"value\"), a(this, \"kind\", \"record\"), r === void 0 && x(\"v.record()\", \"key\"), o === void 0 && x(\"v.record()\", \"value\"), r.isOptional === \"optional\")\n      throw new Error(\"Record validator cannot have optional keys\");\n    if (o.isOptional === \"optional\")\n      throw new Error(\"Record validator cannot have optional values\");\n    if (!r.isConvexValidator || !o.isConvexValidator)\n      throw new Error(\"Key and value of v.record() but be validators\");\n    this.key = r, this.value = o;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      // This cast is needed because TypeScript thinks the key type is too wide\n      keys: this.key.json,\n      values: {\n        fieldType: this.value.json,\n        optional: !1\n      }\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      key: this.key,\n      value: this.value\n    });\n  }\n}, k = class t extends u {\n  static {\n    n(this, \"VUnion\");\n  }\n  /**\n   * Usually you'd use `v.union(...members)` instead.\n   */\n  constructor({ isOptional: e, members: r }) {\n    super({ isOptional: e }), a(this, \"members\"), a(this, \"kind\", \"union\"), r.forEach((o, s) => {\n      if (o === void 0 && x(\"v.union()\", `member at index ${s}`), !o.isConvexValidator)\n        throw new Error(\"All members of v.union() must be validators\");\n    }), this.members = r;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: this.members.map((e) => e.json)\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new t({\n      isOptional: \"optional\",\n      members: this.members\n    });\n  }\n};\n\n// node_modules/convex/dist/esm/values/validator.js\nfunction gt(t) {\n  return !!t.isConvexValidator;\n}\nn(gt, \"isValidator\");\nfunction mt(t) {\n  return gt(t) ? t : F.object(t);\n}\nn(mt, \"asObjectValidator\");\nvar F = {\n  /**\n   * Validates that the value corresponds to an ID of a document in given table.\n   * @param tableName The name of the table.\n   */\n  id: /* @__PURE__ */ n((t) => new A({\n    isOptional: \"required\",\n    tableName: t\n  }), \"id\"),\n  /**\n   * Validates that the value is of type Null.\n   */\n  null: /* @__PURE__ */ n(() => new j({ isOptional: \"required\" }), \"null\"),\n  /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   *\n   * Alias for `v.float64()`\n   */\n  number: /* @__PURE__ */ n(() => new O({ isOptional: \"required\" }), \"number\"),\n  /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   */\n  float64: /* @__PURE__ */ n(() => new O({ isOptional: \"required\" }), \"float64\"),\n  /**\n   * @deprecated Use `v.int64()` instead\n   */\n  bigint: /* @__PURE__ */ n(() => new B({ isOptional: \"required\" }), \"bigint\"),\n  /**\n   * Validates that the value is of Convex type Int64 (BigInt in JS).\n   */\n  int64: /* @__PURE__ */ n(() => new B({ isOptional: \"required\" }), \"int64\"),\n  /**\n   * Validates that the value is of type Boolean.\n   */\n  boolean: /* @__PURE__ */ n(() => new $({ isOptional: \"required\" }), \"boolean\"),\n  /**\n   * Validates that the value is of type String.\n   */\n  string: /* @__PURE__ */ n(() => new I({ isOptional: \"required\" }), \"string\"),\n  /**\n   * Validates that the value is of Convex type Bytes (constructed in JS via `ArrayBuffer`).\n   */\n  bytes: /* @__PURE__ */ n(() => new E({ isOptional: \"required\" }), \"bytes\"),\n  /**\n   * Validates that the value is equal to the given literal value.\n   * @param literal The literal value to compare against.\n   */\n  literal: /* @__PURE__ */ n((t) => new N({ isOptional: \"required\", value: t }), \"literal\"),\n  /**\n   * Validates that the value is an Array of the given element type.\n   * @param element The validator for the elements of the array.\n   */\n  array: /* @__PURE__ */ n((t) => new v({ isOptional: \"required\", element: t }), \"array\"),\n  /**\n   * Validates that the value is an Object with the given properties.\n   * @param fields An object specifying the validator for each property.\n   */\n  object: /* @__PURE__ */ n((t) => new C({ isOptional: \"required\", fields: t }), \"object\"),\n  /**\n   * Validates that the value is a Record with keys and values that match the given types.\n   * @param keys The validator for the keys of the record. This cannot contain string literals.\n   * @param values The validator for the values of the record.\n   */\n  record: /* @__PURE__ */ n((t, e) => new L({\n    isOptional: \"required\",\n    key: t,\n    value: e\n  }), \"record\"),\n  /**\n   * Validates that the value matches one of the given validators.\n   * @param members The validators to match against.\n   */\n  union: /* @__PURE__ */ n((...t) => new k({\n    isOptional: \"required\",\n    members: t\n  }), \"union\"),\n  /**\n   * Does not validate the value.\n   */\n  any: /* @__PURE__ */ n(() => new T({ isOptional: \"required\" }), \"any\"),\n  /**\n   * Allows not specifying a value for a property in an Object.\n   * @param value The property value validator to make optional.\n   *\n   * ```typescript\n   * const objectWithOptionalFields = v.object({\n   *   requiredField: v.string(),\n   *   optionalField: v.optional(v.string()),\n   * });\n   * ```\n   */\n  optional: /* @__PURE__ */ n((t) => t.asOptional(), \"optional\"),\n  /**\n   * Allows specifying a value or null.\n   */\n  nullable: /* @__PURE__ */ n((t) => F.union(t, F.null()), \"nullable\")\n};\n\n// node_modules/convex/dist/esm/values/errors.js\nvar bt = Object.defineProperty, xt = /* @__PURE__ */ n((t, e, r) => e in t ? bt(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, \"__defNormalProp\"), P = /* @__PURE__ */ n((t, e, r) => xt(t, typeof e != \"symbol\" ? e + \"\" : e, r), \"__publicField\"), Z, z, Ot = Symbol.for(\"ConvexError\"), Q = class extends (z = Error, Z = Ot, z) {\n  static {\n    n(this, \"ConvexError\");\n  }\n  constructor(e) {\n    super(typeof e == \"string\" ? e : y(e)), P(this, \"name\", \"ConvexError\"), P(this, \"data\"), P(this, Z, !0), this.data = e;\n  }\n};\n\n// node_modules/convex/dist/esm/values/compare_utf8.js\nvar tt = /* @__PURE__ */ n(() => Array.from({ length: 4 }, () => 0), \"arr\"), Mt = tt(), _t = tt();\n\nexport {\n  $t as a,\n  S as b,\n  _ as c,\n  Tt as d,\n  Ct as e,\n  gt as f,\n  mt as g,\n  F as h,\n  Q as i\n};\n//# sourceMappingURL=34SVKERO.js.map\n","environment":"isolate"},{"path":"_deps/5B5TEMMX.js","source":"var d = Object.defineProperty;\nvar e = (b, a) => d(b, \"name\", { value: a, configurable: !0 });\nvar f = (b, a) => {\n  for (var c in a)\n    d(b, c, { get: a[c], enumerable: !0 });\n};\n\nexport {\n  e as a,\n  f as b\n};\n//# sourceMappingURL=5B5TEMMX.js.map\n","environment":"isolate"}],"nodeDependencies":[],"udfServerVersion":"1.31.5"}